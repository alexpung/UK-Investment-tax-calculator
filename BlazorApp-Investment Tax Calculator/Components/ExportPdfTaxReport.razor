@using InvestmentTaxCalculator.Services.PdfExport.Sections
@using Syncfusion.Blazor.Buttons
@using Syncfusion.Blazor.DropDowns
@using InvestmentTaxCalculator.Services.PdfExport;

<div class="bg-dark text-light">
    <div class="row">
        <div class="col">
            <h3>Export Calculation Result to PDF</h3>
        </div>
    </div>

    <div>
        <h5>Active Sections</h5>
        <p>Drag and drop sections to change the order</p>
        <SfListBox @ref="SectionsSelection" TValue="string[]" AllowDragAndDrop="true" TItem="ISection"
                   DataSource="PdfExportService.AllSections" @bind-Value="PdfExportService.SelectedSections">
            <ListBoxFieldSettings Text="Name" Value="Name"></ListBoxFieldSettings>
            <ListBoxEvents TValue="string[]" TItem="ISection" Dropped="OnDropped" OnDrop="OnDrop"></ListBoxEvents>
            <ListBoxSelectionSettings ShowCheckbox="true" ShowSelectAll="true"></ListBoxSelectionSettings>
        </SfListBox>
    </div>
    <div class="mt-3">
        <h5>Disposal Tax Calculation Detail Settings</h5>
        <div class="d-flex flex-column gap-2">
            <div>
                <SfRadioButton Label="Show trades taxable in the report years (non-taxable trades are not shown, taxable temporary non-resident trades shown when return to UK resident)"
                               Name="taxableOnly"
                               Value=true
                               @bind-Checked="DisposalDetailSection.OnlyShowTaxableTrades">
                </SfRadioButton>
            </div>

            <div>
                <SfRadioButton Label="Show trades occurred in the report years (non-resident and temporary non-resident trades is also shown)"
                               Name="taxableOnly"
                               Value=false
                               @bind-Checked="DisposalDetailSection.OnlyShowTaxableTrades">
                </SfRadioButton>
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-md-4 mb-2">
            <SfButton @onclick="InvokeExportToPdf">Export to PDF</SfButton>
        </div>
    </div>
</div>
