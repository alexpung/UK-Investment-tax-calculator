@using Syncfusion.Blazor.Buttons
@using System.Collections.ObjectModel

<div class="card">
    <div class="card-header">
        <h3 class="mb-0">Calculate Taxes</h3>
    </div>
    <div class="card-body">
        <p class="text-muted mb-3">
            Process your imported data to calculate capital gains, losses, dividends, and other tax obligations 
            according to UK tax rules. This may take a few moments for large datasets.
        </p>
        
        @if (FileImportState.IsProcessing)
        {
            <div class="alert alert-warning alert-custom mb-3" role="alert">
                <small><strong>Please wait</strong> - Files are still being processed. The calculation button will be enabled once import is complete.</small>
            </div>
        }
        
        <SfButton @onclick="OnStartCalculation" 
                  CssClass="btn btn-primary btn-lg" 
                  Disabled="@(TaxCalculationService.IsCalculating || FileImportState.IsProcessing)">
            @if (TaxCalculationService.IsCalculating)
            {
                <span>Calculating...</span>
            }
            else
            {
                <span>Start Calculation</span>
            }
        </SfButton>
    </div>
</div>
