!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./single-bundle.js")}({"./modules/base.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{},window.sf.base=function(e){"use strict";var t="ej2_instances",n=0,s=!1;function o(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function r(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[parseInt(i.toString(),10)];return t}(i),s=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",s,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",s),e=s=n=void 0}}function a(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),s=0;s<n.length&&!g(i);s++)i=i[n[parseInt(s.toString(),10)]];return i}function l(e,t,i){var n,s,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=i||{},a=r,l=o.length;for(n=0;n<l;n++)s=o[parseInt(n.toString(),10)],n+1===l?a[""+s]=void 0===t?{}:t:f(a[""+s])&&(a[""+s]={}),a=a[""+s];return r}function h(e,t){delete e[""+t]}var d="undefined"!=typeof window?window:{};function c(e){return!f(e)&&e.constructor==={}.constructor}function p(e,t){if(!f(t))for(var i=e,n=t,s=0,o=Object.keys(t);s<o.length;s++){var r=o[s];f(i.deepMerge)||-1===i.deepMerge.indexOf(r)||!c(n[""+r])&&!Array.isArray(n[""+r])?i[""+r]=n[""+r]:u(i[""+r],i[""+r],n[""+r],!0)}}function u(e,t,n,s){var o=e&&"object"===i(e)?e:{},r=arguments.length;s&&(r-=1);for(var a=function(e){if(!l[e])return"continue";var t=l[e];Object.keys(t).forEach((function(e){var i,n=o[""+e],r=t[""+e],a=Array.isArray(r)&&Array.isArray(n)&&r.length!==n.length,l=!y()||!(n instanceof Event||a);s&&l&&(c(r)||Array.isArray(r))?c(r)?(i=n||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?u(i,{},r,s):o[""+e]=u(i,{},r,s)):(i=y()?n&&Object.keys(r).length:n||[],o[""+e]=u([],i,r,i&&i.length||r&&r.length)):o[""+e]=r}))},l=arguments,h=1;h<r;h++)a(h);return o}function f(e){return null==e}function g(e){return void 0===e}function m(e,t){var i;return function(){var n=this,s=arguments,o=function(){return i=null,e.apply(n,s)};clearTimeout(i),i=setTimeout(o,t)}}function v(e,t){return e===t||!(e===document||!e)&&v(e.parentNode,t)}function b(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}function y(){return s}function C(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}var w,M,S={latn:{_digits:"0123456789",_type:"numeric"}},x={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},N=[0,1,2,3,4,5,6,7,8,9],O=function(){function e(){}return e.getMainObject=function(e,t){return a(y()?t:"main."+t,e)},e.getNumberingSystem=function(e){return a("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},n=0,s=t||Object.keys(e);n<s.length;n++){var o=s[n];i.hasOwnProperty(e[o])||(i[e[o]]=o)}return i},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,n=Object.keys(x);i<n.length;i++){var s=n[i];t[e[s]]=x[s]}return t},e.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[parseInt(n.toString(),10)]+"|":e[parseInt(n.toString(),10)];return i},e.convertValueParts=function(e,t,i){return e.replace(t,(function(e){return i[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=a("numbers",e),t.nSystem=a("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i,n){var s={},o=this.getDefaultNumberingSystem(e);if(!g(o.nSystem)||n){var r=n?a("obj.mapperDigits",o):a(o.nSystem+"._digits",t);if(!g(r)){s.numericPair=this.reverseObject(r,N);var l=RegExp;s.numberParseRegex=new l(this.constructRegex(r),"g"),s.numericRegex="["+r[0]+"-"+r[9]+"]",i&&(s.numericRegex=r[0]+"-"+r[9],s.symbolNumberSystem=a(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),s.symbolMatch=this.getSymbolMatch(s.symbolNumberSystem),s.numberSystem=o.nSystem)}}return s},e.getNumberMapper=function(e,t,i){var n={mapper:{}},s=this.getDefaultNumberingSystem(e);if(!g(s.nSystem)){n.numberSystem=s.nSystem,n.numberSymbols=a("symbols-numberSystem-"+s.nSystem,s.obj),n.timeSeparator=a("timeSeparator",n.numberSymbols);var o=a(s.nSystem+"._digits",t);if(!g(o))for(var r=0,l=N;r<l.length;r++){var h=l[r];n.mapper[h]=o[h]}}return n},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=S,e}(),E={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH₵",XDR:"XDR",AED:"د.إ.",BHD:"د.ب.",DZD:"د.ج.",EGP:"ج.م.",ILS:"₪",IQD:"د.ع.",JOD:"د.ا.",KMF:"CF",KWD:"د.ك.",LBP:"ل.ل.",LYD:"د.ل.",MAD:"د.م.",MRU:"أ.م.",OMR:"ر.ع.",QAR:"ر.ق.",SAR:"ر.س.",SDG:"ج.س.",SOS:"S",SSP:"£",SYP:"ل.س.",TND:"د.ت.",YER:"ر.ي.",CLP:"$",INR:"₹",TZS:"TSh",EUR:"€",AZN:"₼",RUB:"₽",BYN:"Br",ZMW:"K",BGN:"лв.",NGN:"₦",XOF:"CFA",BDT:"৳",CNY:"¥",BAM:"КМ",UGX:"USh",USD:"$",CZK:"Kč",GBP:"£",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"ރ.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"£",GIP:"£",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"₱",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"₡",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"₲",UYU:"$",VES:"Bs.S",IRR:"ريال",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"֏",ISK:"kr",JPY:"¥",GEL:"₾",CVE:"​",KZT:"₸",KHR:"៛",KPW:"₩",KRW:"₩",KGS:"сом",AOA:"Kz",LAK:"₭",MZN:"MTn",MKD:"ден",MNT:"₮",BND:"$",MMK:"K",NOK:"kr",NPR:"रु",AWG:"Afl.",SRD:"$",PLN:"zł",AFN:"؋",STN:"Db",MDL:"L",RON:"lei",UAH:"₴",LKR:"රු.",ALL:"Lekë",RSD:"дин.",TJS:"смн",THB:"฿",TMT:"m.",TRY:"₺",UZS:"сўм",VND:"₫",TWD:"NT$"};w=e.HijriParser||(e.HijriParser={}),M=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],w.getHijriDate=function(e){var t=e.getDate(),i=e.getMonth(),n=e.getFullYear(),s=i+1,o=n;s<3&&(o-=1,s+=12);var r=Math.floor(o/100),a=r-Math.floor(r/4)-2,l=Math.floor(365.25*(o+4716))+Math.floor(30.6001*(s+1))+t-a-1524,h=l+(a=(r=Math.floor((l-1867216.25)/36524.25))-Math.floor(r/4)+1)+1524,d=Math.floor((h-122.1)/365.25),c=Math.floor(365.25*d),p=Math.floor((h-c)/30.6001);t=h-c-Math.floor(30.6001*p),(i=Math.floor((h-c)/20.6001))>13&&(d+=1,i-=12),i-=1,n=d-4716;var u=l-24e5,f=l-1948084,g=Math.floor(f/10631);f-=10631*g;var m=Math.floor((f-.1335)/(10631/30)),v=30*g+m;f-=Math.floor(m*(10631/30)+.1335);var b=Math.floor((f+28.5001)/29.5);13===b&&(b=12);for(var y=f-Math.floor(29.5001*b-29),C=0;C<M.length&&!(M[parseInt(C.toString(),10)]>u);C++);var w=C+16260,S=Math.floor((w-1)/12),x=S+1,N=w-12*S,O=u-M[C-1]+1;return(O+"").length>2&&(O=y,N=b,x=v),{year:x,month:N,date:O}},w.toGregorian=function(e,t,i){var n=i+M[12*(e-1)+1+(t-1)-16260-1]-1+24e5,s=Math.floor(n+.5),o=Math.floor((s-1867216.25)/36524.25),r=1524+(o=s+1+o-Math.floor(o/4)),a=Math.floor((r-122.1)/365.25),l=Math.floor(365.25*a),h=Math.floor((r-l)/30.6001),d=r-l-Math.floor(30.6001*h),c=h-(h>13.5?13:1),p=a-(c>2.5?4716:4715);return p<=0&&c--,new Date(p+"/"+c+"/"+d)};var I=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,T=["sun","mon","tue","wed","thu","fri","sat"],D={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},j={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},A=function(){function t(){}return t.dateFormat=function(t,i,n){var s=this,o=e.IntlBase.getDependables(n,t,i.calendar),r=a("parserObject.numbers",o),l=o.dateObject,h={isIslamic:e.IntlBase.islamicRegex.test(i.calendar)};y()&&i.isServerRendered&&(i=e.IntlBase.compareBlazorDateFormats(i,t));var d=i.format||e.IntlBase.getResultantPattern(i.skeleton,o.dateObject,i.type,!1,y()?t:"");if(h.dateSeperator=y()?a("dateSeperator",l):e.IntlBase.getDateSeparator(o.dateObject),g(d))b("Format options or type given must be invalid");else{d=e.IntlBase.ConvertDateToWeekFormat(d),y()&&(d=d.replace(/tt/,"a")),h.pattern=d,h.numMapper=y()?u({},r):O.getNumberMapper(o.parserObject,O.getNumberingSystem(n));for(var c=0,p=d.match(I)||[];c<p.length;c++){var f=p[c],m=f.length,v=f[0];switch("K"===v&&(v="h"),v){case"E":case"c":y()?h.weekday=a("days."+e.IntlBase.monthIndex[m],l):h.weekday=o.dateObject[e.IntlBase.days]["stand-alone"][e.IntlBase.monthIndex[m]];break;case"M":case"L":y()?h.month=a("months."+e.IntlBase.monthIndex[m],l):h.month=o.dateObject[e.IntlBase.month]["stand-alone"][e.IntlBase.monthIndex[m]];break;case"a":h.designator=y()?a("dayPeriods",l):a("dayPeriods.format.wide",l);break;case"G":var C=m<=3?"eraAbbr":4===m?"eraNames":"eraNarrow";h.era=y()?a("eras",l):a("eras."+C,o.dateObject);break;case"z":h.timeZone=a("dates.timeZoneNames",o.parserObject)}}}return function(e){return isNaN(e.getDate())?null:s.intDateFormatter(e,h)}},t.intDateFormatter=function(t,i){for(var n="",s=i.pattern.match(e.IntlBase.dateParseRegex),o=this.getCurrentDateValue(t,i.isIslamic),r=0,a=s;r<a.length;r++){var l=a[r],h=l.length,d=l[0];"K"===d&&(d="h");var c=void 0,p="",u=void 0,g=void 0,m="";switch(d){case"M":case"L":c=o.month,h>2?n+=i.month[c]:u=!0;break;case"E":case"c":n+=i.weekday[T[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(u=!0,"d"===d)c=o.date;else if("f"===d){u=!1,g=!0;var v=(p=(p=t[D[d]]().toString()).substring(0,h)).length;if(h!==v){if(h>3)continue;for(var b=0;b<h-v;b++)p="0"+p.toString()}m+=p}else c=t[D[d]]();"h"===d&&(c=c%12||12);break;case"y":g=!0,m+=o.year,2===h&&(m=m.substr(m.length-2));break;case"a":var y=t.getHours()<12?"am":"pm";n+=i.designator[y];break;case"G":var C=t.getFullYear()<0?0:1,w=i.era[C];f(w)&&(w=i.era[C?0:1]),n+=w||"";break;case"'":n+="''"===l?"'":l.replace(/'/g,"");break;case"z":var M=t.getTimezoneOffset(),S=h<4?"+H;-H":i.timeZone.hourFormat;S=S.replace(/:/g,i.numMapper.timeSeparator),0===M?n+=i.timeZone.gmtZeroFormat:(g=!0,m=this.getTimeZoneValue(M,S)),m=i.timeZone.gmtFormat.replace(/\{0\}/,m);break;case":":n+=i.numMapper.numberSymbols.timeSeparator;break;case"/":n+=i.dateSeperator;break;case"W":u=!0,c=e.IntlBase.getWeekOfYear(t);break;default:n+=l}u&&(g=!0,m=this.checkTwodigitNumber(c,h)),g&&(n+=O.convertValueParts(m,e.IntlBase.latnParseRegex,i.numMapper.mapper))}return n},t.getCurrentDateValue=function(t,i){return i?e.HijriParser.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},t.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},t.getTimeZoneValue=function(e,t){var i=this,n=t.split(";")[e>0?1:0],s=Math.abs(e);return n.replace(/HH?|mm/g,(function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?s/60:s%60),t)}))},t}(),z={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},k=["infinity","nan","group","decimal","exponential"],P=function(){function t(){}return t.numberFormatter=function(t,i,n){var s,o=this,r=u({},i),l={},h={},d=e.IntlBase.getDependables(n,t,"",!0),c=d.numericObject;h.numberMapper=y()?u({},c):O.getNumberMapper(d.parserObject,O.getNumberingSystem(n),!0),h.currencySymbol=y()?a("currencySymbol",c):e.IntlBase.getCurrencySymbol(d.numericObject,r.currency||e.defaultCurrencyCode,i.altSymbol),h.percentSymbol=y()?a("numberSymbols.percentSign",c):h.numberMapper.numberSymbols.percentSign,h.minusSymbol=y()?a("numberSymbols.minusSign",c):h.numberMapper.numberSymbols.minusSign;var p=h.numberMapper.numberSymbols;if(i.format&&!e.IntlBase.formatRegex.test(i.format))l=e.IntlBase.customFormat(i.format,h,d.numericObject);else{if(u(r,e.IntlBase.getProperNumericSkeleton(i.format||"N")),r.isCurrency="currency"===r.type,r.isPercent="percent"===r.type,y()||(s=e.IntlBase.getSymbolPattern(r.type,h.numberMapper.numberSystem,d.numericObject,r.isAccount)),r.groupOne=this.checkValueRange(r.maximumSignificantDigits,r.minimumSignificantDigits,!0),this.checkValueRange(r.maximumFractionDigits,r.minimumFractionDigits,!1,!0),g(r.fractionDigits)||(r.minimumFractionDigits=r.maximumFractionDigits=r.fractionDigits),g(r.useGrouping)&&(r.useGrouping=!0),r.isCurrency&&!y()&&(s=s.replace(/\u00A4/g,e.IntlBase.defaultCurrency)),y())l.nData=u({},{},a(r.type+"nData",c)),l.pData=u({},{},a(r.type+"pData",c)),"currency"===r.type&&i.currency&&e.IntlBase.replaceBlazorCurrency([l.pData,l.nData],h.currencySymbol,i.currency);else{var f=s.split(";");l.nData=e.IntlBase.getFormatData(f[1]||"-"+f[0],!0,h.currencySymbol),l.pData=e.IntlBase.getFormatData(f[0],!1,h.currencySymbol),r.useGrouping&&(r.groupSeparator=p[k[2]],r.groupData=this.getGroupingDetails(f[0]))}if(g(r.minimumFractionDigits)&&(r.minimumFractionDigits=l.nData.minimumFraction),g(r.maximumFractionDigits)){var m=l.nData.maximumFraction;r.maximumFractionDigits=g(m)&&r.isPercent?0:m}var v=r.minimumFractionDigits,b=r.maximumFractionDigits;g(v)||g(b)||v>b&&(r.maximumFractionDigits=v)}return u(l.nData,r),u(l.pData,r),function(e){return isNaN(e)?p[k[1]]:isFinite(e)?o.intNumberFormatter(e,l,h,i):p[k[0]]}},t.getGroupingDetails=function(t){var i={},n=t.match(e.IntlBase.negativeDataRegex);if(n&&n[4]){var s=n[4],o=s.lastIndexOf(",");if(-1!==o){var r=s.split(".")[0];i.primary=r.length-o-1;var a=s.lastIndexOf(",",o-1);-1!==a&&(i.secondary=o-1-a)}}return i},t.checkValueRange=function(e,t,i,n){var s=n?"f":"s",o=0,r=z["l"+s],a=z["m"+s];if(g(e)||(this.checkRange(e,r,n),o++),g(t)||(this.checkRange(t,a,n),o++),2===o){if(!(e<t))return!0;b(a+"specified must be less than the"+r)}else i&&1===o&&b("Both"+a+"and"+a+"must be present");return!1},t.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&b(t+"value must be within the range"+n[0]+"to"+n[1])},t.intNumberFormatter=function(t,i,n,s){var o;if(!g(i.nData.type)){t<0?(t*=-1,o=i.nData):o=0===t&&i.zeroData||i.pData;var r="";if(o.isPercent&&(t*=100),o.groupOne)r=this.processSignificantDigits(t,o.minimumSignificantDigits,o.maximumSignificantDigits);else if(r=this.processFraction(t,o.minimumFractionDigits,o.maximumFractionDigits,s),o.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,o.minimumIntegerDigits)),n.isCustomFormat&&o.minimumFractionDigits<o.maximumFractionDigits&&/\d+\.\d+/.test(r)){for(var a=r.split("."),l=a[1],h=l.length-1;h>=0&&("0"===l[""+h]&&h>=o.minimumFractionDigits);h--)l=l.slice(0,h);r=a[0]+"."+l}return"scientific"===o.type&&(r=(r=t.toExponential(o.maximumFractionDigits)).replace("e",n.numberMapper.numberSymbols[k[4]])),r=r.replace(".",n.numberMapper.numberSymbols[k[3]]),r="#,###,,;(#,###,,)"===o.format?this.customPivotFormat(parseInt(r)):r,o.useGrouping&&(r=this.groupNumbers(r,o.groupData.primary,o.groupSeparator||",",n.numberMapper.numberSymbols[k[3]]||".",o.groupData.secondary)),r=O.convertValueParts(r,e.IntlBase.latnParseRegex,n.numberMapper.mapper),"N/A"===o.nlead?o.nlead:"0"===r&&s&&"0"===s.format?r+o.nend:o.nlead+r+o.nend}},t.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},t.groupNumbers=function(e,t,i,n,s){for(var o=!f(s)&&0!==s,r=e.split(n),a=r[0],l=a.length,h="";l>t;)h=a.slice(l-t,l)+(h.length?i+h:""),l-=t,o&&(t=s,o=!1);return r[0]=a.slice(0,l)+(h.length?i:"")+h,r.join(n)},t.processFraction=function(e,t,i,n){var s=(e+"").split(".")[1],o=s?s.length:0;if(t&&o<t){var r="";if(0!==o){r+=e;for(var a=0;a<t-o;a++)r+="0";return r}return r=e.toFixed(t),e.toFixed(t)}if(!f(i)&&(o>i||0===i))return e.toFixed(i);var l=e+"";return"0"===l[0]&&n&&"###.00"===n.format&&(l=l.slice(1)),l},t.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],s=n.length;if(s<t){for(var o=0;o<t-s;o++)n="0"+n;i[0]=n}return i.join(".")},t.customPivotFormat=function(e){if(e>=5e5){var t=(e/=1e6).toString().split("."),i=(t[0],t[1]);return i&&+i.substring(0,1)>=5?Math.ceil(e).toString():Math.floor(e).toString()}return""},t}(),L=/^[0-9]*$/,B={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},R=function(){function t(){}return t.dateParser=function(t,i,n){var s=this,o=e.IntlBase.getDependables(n,t,i.calendar),r=O.getCurrentNumericOptions(o.parserObject,O.getNumberingSystem(n),!1,y()),l={};y()&&i.isServerRendered&&(i=e.IntlBase.compareBlazorDateFormats(i,t));var h,d=i.format||e.IntlBase.getResultantPattern(i.skeleton,o.dateObject,i.type,!1,y()?t:""),c="";if(g(d))b("Format options or type given must be invalid");else{d=e.IntlBase.ConvertDateToWeekFormat(d),l={isIslamic:e.IntlBase.islamicRegex.test(i.calendar),pattern:d,evalposition:{},culture:t};for(var p=d.match(e.IntlBase.dateParseRegex)||[],u=p.length,m=0,v=0,C=!1,w=r.numericRegex,M=y()?o.parserObject.numbers:O.getNumberMapper(o.parserObject,O.getNumberingSystem(n)),S=0;S<u;S++){var x=p[parseInt(S.toString(),10)],N=x.length,E="K"===x[0]?"h":x[0],I=void 0,T=void 0,D=j[E],A=2===N?"":"?";switch(C&&(m=v,C=!1),E){case"E":case"c":var z=void 0;z=y()?a("days."+e.IntlBase.monthIndex[N],o.dateObject):o.dateObject[e.IntlBase.days]["stand-alone"][e.IntlBase.monthIndex[N]];var k=O.reverseObject(z);c+="("+Object.keys(k).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(T=!0,("M"===E||"L"===E)&&N>2){var P=void 0;P=y()?a("months."+e.IntlBase.monthIndex[N],o.dateObject):o.dateObject.months["stand-alone"][e.IntlBase.monthIndex[N]],l[D]=O.reverseObject(P),c+="("+Object.keys(l[D]).join("|")+")"}else if("f"===E){if(N>3)continue;I=!0,c+="("+w+w+"?"+w+"?)"}else I=!0,c+="("+w+w+A+")";"h"===E&&(l.hour12=!0);break;case"W":c+="("+w+(1===N?"?":"")+w+")";break;case"y":T=I=!0,c+=2===N?"("+w+w+")":"("+w+"{"+N+",})";break;case"a":T=!0;var L=y()?a("dayPeriods",o.dateObject):a("dayPeriods.format.wide",o.dateObject);l[D]=O.reverseObject(L),c+="("+Object.keys(l[D]).join("|")+")";break;case"G":T=!0;var B=N<=3?"eraAbbr":4===N?"eraNames":"eraNarrow";l[D]=O.reverseObject(y()?a("eras",o.dateObject):a("eras."+B,o.dateObject)),c+="("+Object.keys(l[D]).join("|")+"?)";break;case"z":T=0!==(new Date).getTimezoneOffset(),l[D]=a("dates.timeZoneNames",o.parserObject);var R=l[D],U=(h=N<4)?"+H;-H":R.hourFormat;U=U.replace(/:/g,M.timeSeparator),c+="("+this.parseTimeZoneRegx(U,R,w)+")?",C=!0,v=h?6:12;break;case"'":c+="("+x.replace(/'/g,"")+")?";break;default:c+="([\\D])"}if(T&&(l.evalposition[""+D]={isNumber:I,pos:S+1+m,hourOnly:h}),S===u-1&&!f(c)){var H=RegExp;l.parserRegex=new H("^"+c+"$","i")}}}return function(t){var i=s.internalDateParse(t,l,r);if(f(i)||!Object.keys(i).length)return null;if(l.isIslamic){var n={},o=i.year,a=i.day,h=i.month,d=o?o+"":"",c=2===d.length;o&&h&&a&&!c||(n=e.HijriParser.getHijriDate(new Date)),c&&(o=parseInt((n.year+"").slice(0,2)+d,10));var p=e.HijriParser.toGregorian(o||n.year,h||n.month,a||n.date);i.year=p.getFullYear(),i.month=p.getMonth()+1,i.day=p.getDate()}return s.getDateObject(i)}},t.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,s=e.designator,o=e.timeZone;if(!g(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var r=0,a=["hour","minute","second","milliseconds","month","day"];r<a.length;r++){var l=a[r],h=e[l];if(g(h)&&"day"===l&&i.setDate(1),!g(h))if("month"===l){if((h-=1)<0||h>11)return new Date("invalid");var d=i.getDate();i.setDate(1),i[B[l]](h);var c=new Date(i.getFullYear(),h+1,0).getDate();i.setDate(d<c?d:c)}else{if("day"===l){var p=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(h<1||h>p)return null}i[B[l]](h)}}if(!g(s)){var u=i.getHours();"pm"===s?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!g(o)){var f=o-i.getTimezoneOffset();0!==f&&i.setMinutes(i.getMinutes()+f)}return i},t.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),s={hour:0,minute:0,second:0};if(f(n))return null;for(var o=0,r=Object.keys(t.evalposition);o<r.length;o++){var a=r[o],l=t.evalposition[""+a],h=n[l.pos];if(l.isNumber)s[a]=this.internalNumberParser(h,i);else if("timeZone"!==a||g(h))h="month"!==a||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?h:h[0].toUpperCase()+h.substring(1).toLowerCase(),h="month"!==a&&"designator"===a&&"en-GB"===t.culture?h.toLowerCase():h,s[a]=t[a][h];else{var d=l.pos,c=void 0,p=n[d+1],u=!g(p);l.hourOnly?c=60*this.getZoneValue(u,p,n[d+4],i):(c=60*this.getZoneValue(u,p,n[d+7],i),c+=this.getZoneValue(u,n[d+4],n[d+10],i)),f(c)||(s[""+a]=c)}}return t.hour12&&(s.hour12=!0),s},t.internalNumberParser=function(e,t){return e=O.convertValueParts(e,t.numberParseRegex,t.numericPair),L.test(e)?+e:null},t.parseTimeZoneRegx=function(e,t,i){var n,s,o=t.gmtFormat,r="("+i+")("+i+")";return n=e.replace("+","\\+"),s=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+r+")"):n.replace(/H|m/g,"("+r+"?)")).split(";").map((function(e){return o.replace("{0}",e)})),n=s.join("|")+"|"+t.gmtZeroFormat},t.getZoneValue=function(e,t,i,n){var s=e?t:i;if(!s)return 0;var o=this.internalNumberParser(s,n);return e?-o:o},t}(),U=new RegExp("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$"),H=/,/g,F=["minusSign","infinity"],Y=function(){function t(){}return t.numberParser=function(t,i,n){var s,o=this,r=e.IntlBase.getDependables(n,t,"",!0),l={custom:!0};e.IntlBase.formatRegex.test(i.format)||!i.format?(u(l,e.IntlBase.getProperNumericSkeleton(i.format||"N")),l.custom=!1,l.fractionDigits||i.maximumFractionDigits&&(l.maximumFractionDigits=i.maximumFractionDigits)):u(l,e.IntlBase.customFormat(i.format,null,null));var h,d=a("numbers",r.parserObject);if(s=O.getCurrentNumericOptions(r.parserObject,O.getNumberingSystem(n),!0,y()),l.symbolRegex=O.getSymbolRegex(Object.keys(s.symbolMatch)),l.infinity=s.symbolNumberSystem[F[1]],y())l.nData=u({},{},a(l.type+"nData",d)),l.pData=u({},{},a(l.type+"pData",d)),"currency"===l.type&&i.currency&&e.IntlBase.replaceBlazorCurrency([l.pData,l.nData],a("currencySymbol",d),i.currency);else if(h=e.IntlBase.getSymbolPattern(l.type,s.numberSystem,r.numericObject,l.isAccount)){var c=(h=h.replace(/\u00A4/g,e.IntlBase.defaultCurrency)).split(";");l.nData=e.IntlBase.getFormatData(c[1]||"-"+c[0],!0,""),l.pData=e.IntlBase.getFormatData(c[0],!0,"")}return function(e){return o.getParsedNumber(e,l,s)}},t.getParsedNumber=function(e,t,i){var n,s,o,r,a,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=O.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=-1!==(e=O.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);var h=e.match(U);if(f(h))return NaN;r=h[1],o=h[2];var d=h[5];return a=h[6],s=(n=t.custom?r===t.nData.nlead&&a===t.nData.nend:-1!==r.indexOf(t.nData.nlead)&&-1!==a.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(H,""),d&&(o+=d),l=+o,("percent"===t.type||s)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(l=this.convertMaxFracDigits(o,t,l,n)),n&&(l*=-1),l},t.convertMaxFracDigits=function(e,t,i,n){var s=e.split(".");return s[1]&&s[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i},t}(),q=function(){function e(e){this.ranArray=[],this.boundedEvents={},f(e)||(this.context=e)}return e.prototype.on=function(e,t,i,n){if(!f(t)){var s=i||this.context;this.notExist(e)?this.boundedEvents[""+e]=[{handler:t,context:s,id:n}]:f(n)?this.isHandlerPresent(this.boundedEvents[""+e],t)||this.boundedEvents[""+e].push({handler:t,context:s}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[""+e].push({handler:t,context:s,id:n}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=a(e,this.boundedEvents);if(t){for(var s=0;s<n.length;s++)if(i){if(n[parseInt(s.toString(),10)].id===i){n.splice(s,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===n[parseInt(s.toString(),10)].handler){n.splice(s,1);break}}else delete this.boundedEvents[""+e]}},e.prototype.notify=function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var s=a(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(s,t,i,n,0);for(var o=0,r=s;o<r.length;o++){var l=r[o];l.handler.call(l.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,n,s){var o=this,r=s===e.length-1;if(s<e.length){var a=e[parseInt(s.toString(),10)],l=a.handler.call(a.context,t);if(l&&"function"==typeof l.then){if(!i)return l;l.then((function(l){if(l="string"==typeof l&&o.isJson(l)?JSON.parse(l,o.dateReviver):l,u(t,t,l,!0),!i||!r)return o.blazorCallback(e,t,i,n,s+1);i.call(a.context,t)})).catch((function(e){n&&n.call(a.context,"string"==typeof e&&o.isJson(e)?JSON.parse(e,o.dateReviver):e)}))}else{if(!i||!r)return this.blazorCallback(e,t,i,n,s+1);i.call(a.context,t)}}},e.prototype.dateReviver=function(e,t){return y&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.offIntlEvents=function(){var e=this.boundedEvents.notifyExternalChange;if(e){for(var t=0;t<e.length;t++){var i=e[0].context;i&&i.detectFunction&&i.randomId&&!i.isRendered&&(this.off("notifyExternalChange",i.detectFunction,i.randomId),t--)}this.boundedEvents.notifyExternalChange.length||delete this.boundedEvents.notifyExternalChange}},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++){if(n[i].handler===t)return!0}return!1},e}(),_=new q;e.rightToLeft=!1;var W={};e.defaultCulture="en-US",e.defaultCurrencyCode="USD";var V=["numericObject","dateObject"],X=function(){function t(e){e&&(this.culture=e)}return t.prototype.getDateFormat=function(e){return A.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},W)},t.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=e.defaultCurrencyCode),y()&&t&&!t.format&&(t.minimumFractionDigits=0),P.numberFormatter(this.getCulture(),t||{},W)},t.prototype.getDateParser=function(e){return R.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},W)},t.prototype.getNumberParser=function(e){return y()&&e&&!e.format&&(e.minimumFractionDigits=0),Y.numberParser(this.getCulture(),e||{format:"N"},W)},t.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},t.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},t.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},t.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},t.prototype.getDatePattern=function(t,i){return e.IntlBase.getActualDateTimeFormat(this.getCulture(),t,W,i)},t.prototype.getNumberPattern=function(t,i){return e.IntlBase.getActualNumberFormat(this.getCulture(),t,W,i)},t.prototype.getFirstDayOfWeek=function(){return e.IntlBase.getWeekData(this.getCulture(),W)},t.prototype.getCulture=function(){return this.culture||e.defaultCulture},t}();var Q=RegExp,Z={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(t){t.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var i=/[0-9]/g;t.defaultCurrency="$";var n=["infinity","nan","group","decimal"],s=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,o={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};t.dateConverterMapper=/dddd|ddd/gi;t.islamicRegex=/^islamic/;var r={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};t.formatRegex=new Q("(^[ncpae]{1})([0-1]?[0-9]|20)?$","i"),t.currencyFormatRegex=new Q("(^[ca]{1})([0-1]?[0-9]|20)?$","i"),t.curWithoutNumberRegex=/(c|a)$/gi;var l={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function h(e,i,n,s,o){var r,l=n||"date";if(o)r=m({skeleton:e},o).format||m({skeleton:"d"},"en-US").format;else{if(-1!==t.basicPatterns.indexOf(e)){if(r=a(l+"Formats."+e,i),"dateTime"===l){var h=a("dateFormats."+e,i),d=a("timeFormats."+e,i);r=r.replace("{1}",h).replace("{0}",d)}}else r=a("dateTimeFormats.availableFormats."+e,i);g(r)&&"yMd"===e&&(r="M/d/y")}return r}function d(e,i,n,s){var o={},r=n||"gregorian";if(o.parserObject=O.getMainObject(e,i)||(y()?t.blazorDefaultObject:t.defaultObject),s)o.numericObject=a("numbers",o.parserObject);else{var l=y()?"dates":"dates.calendars."+r;o.dateObject=a(l,o.parserObject)}return o}function c(e,t,i,n){return a(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?a(e+"Formats-numberSystem-"+t+".standard",i):"")}function p(e){var i=e.match(t.dateConverterMapper);if(i&&y()){var n=3===i[0].length?"EEE":"EEEE";return e.replace(t.dateConverterMapper,n)}return e}function m(e,t){var i=e.format||e.skeleton,n=a((t||"en-US")+"."+i,Z);return n||(n=a("en-US."+i,Z)),n&&(n=p(n),e.format=n.replace(/tt/,"a")),e}function v(e){var i=e.match(t.formatRegex),n={},s=i[1].toUpperCase();return n.isAccount="A"===s,n.type=t.patternMatcher[s],e.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function b(e,n,s,o){var r=o?{}:{nlead:"",nend:""},a=e.match(t.customRegex);if(a){o||(r.nlead=C(a[1],s),r.nend=C(a[10],s),r.groupPattern=a[4]);var l=a[7];if(l&&n){var h=l.match(i);f(h)?r.minimumFraction=0:r.minimumFraction=h.length,r.maximumFraction=l.length-1}}return r}function C(e,i){return e?(e=e.replace(t.defaultCurrency,i),""===i?e.trim():e):""}function w(e,t,i){return a("currencies."+t+(i?"."+i:".symbol"),e)||a("currencies."+t+".symbol-alt-narrow",e)||"$"}function M(e,i,s){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},r=e.match(t.customRegex);if(f(r)||""===r[5]&&"N/A"!==e)return o.type=void 0,o;o.nlead=r[1],o.nend=r[10];var a=r[6],l=!!a.match(/\ $/g),h=-1!==a.replace(/\ $/g,"").indexOf(" ");o.useGrouping=-1!==a.indexOf(",")||h,a=a.replace(/,/g,"");var d=r[7];if(-1!==a.indexOf("0")&&(o.minimumIntegerDigits=a.length-a.indexOf("0")),f(d)||(o.minimumFractionDigits=d.lastIndexOf("0"),o.maximumFractionDigits=d.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),f(i)?u(o,S([o.nlead,o.nend],"%","%")):(i.isCustomFormat=!0,u(o,S([o.nlead,o.nend],"$",i.currencySymbol)),o.isCurrency||u(o,S([o.nlead,o.nend],"%",i.percentSymbol))),!f(s)){var p=c(o.type,i.numberMapper.numberSystem,s,!1);o.useGrouping&&(o.groupSeparator=h?" ":i.numberMapper.numberSymbols[n[2]],o.groupData=P.getGroupingDetails(p.split(";")[0])),o.nlead=o.nlead.replace(/'/g,""),o.nend=l?" "+o.nend.replace(/'/g,""):o.nend.replace(/'/g,"")}return o}function S(e,t,i){for(var n={nlead:e[0],nend:e[1]},s=0;s<2;s++){var o=e[parseInt(s.toString(),10)],r=o.indexOf(t);if(-1!==r&&(r<o.indexOf("'")||r>o.lastIndexOf("'"))){n[l[s]]=o.substr(0,r)+i+o.substr(r+1),n[l[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}function x(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var s=i-t,o=0;o<s;o++)e+="#";return e}function N(e,t){for(var i=e.split("."),n="",s=0;s<t;s++)n+="0";return i[1]?n+"."+i[1]:n}function I(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var s=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;s>0;s-=3)e=","+i[s-2]+i[s-1]+i[parseInt(s.toString(),10)]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}t.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,t.basicPatterns=["short","medium","long","full"],t.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},t.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},t.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},t.month="months",t.days="days",t.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},t.getResultantPattern=h,t.getDependables=d,t.getSymbolPattern=c,t.ConvertDateToWeekFormat=p,t.compareBlazorDateFormats=m,t.getProperNumericSkeleton=v,t.getFormatData=b,t.changeCurrencySymbol=C,t.getCurrencySymbol=w,t.customFormat=function(e,t,i){for(var n={},s=e.split(";"),o=["pData","nData","zeroData"],r=0;r<s.length;r++)n[o[r]]=M(s[r],t,i);return f(n.nData)&&(n.nData=u({},n.pData),n.nData.nlead=f(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},t.customNumberFormat=M,t.isCurrencyPercent=S,t.getDateSeparator=function(e){var t=(a("dateFormats.short",e)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return t?t[1]:"/"},t.getActualDateTimeFormat=function(e,t,i,n){var r=d(i,e,t.calendar);y()&&(t=m(t,e));var l=t.format||h(t.skeleton,r.dateObject,t.type);if(n){if(-1!==(l=l.replace(s,(function(e){return o[e]}))).indexOf("z")){var c=l.match(/z/g).length,p=void 0,u={timeZone:{}};u.numMapper=O.getNumberMapper(r.parserObject,O.getNumberingSystem(i)),u.timeZone=a("dates.timeZoneNames",r.parserObject);var f=(new Date).getTimezoneOffset(),g=c<4?"+H;-H":u.timeZone.hourFormat;g=g.replace(/:/g,u.numMapper.timeSeparator),0===f?p=u.timeZone.gmtZeroFormat:(p=A.getTimeZoneValue(f,g),p=u.timeZone.gmtFormat.replace(/\{0\}/,p)),l=l.replace(/[z]+/,'"'+p+'"')}l=l.replace(/ $/,"")}return l},t.getActualNumberFormat=function(i,n,s,o){var r,l,h=d(s,i,"",!0),p={custom:!0},f=h.numericObject,g={},m=(n.format||"").match(t.currencyFormatRegex),C=t.formatRegex.test(n.format)?v(n.format||"N"):{},M={};if(m){M.numberMapper=y()?u({},h.numericObject):O.getNumberMapper(h.parserObject,O.getNumberingSystem(s),!0);var S=y()?a("currencySymbol",h.numericObject):w(h.numericObject,n.currency||e.defaultCurrencyCode,n.altSymbol),E=c("currency",M.numberMapper.numberSystem,h.numericObject,/a/i.test(n.format)),T=(E=E.replace(/\u00A4/g,S)).split(";");g.hasNegativePattern=!!y()||T.length>1,g.nData=y()?a(C.type+"nData",f):b(T[1]||"-"+T[0],!0,S),g.pData=y()?a(C.type+"pData",f):b(T[0],!1,S),m[2]||n.minimumFractionDigits||n.maximumFractionDigits||(r=b(E.split(";")[0],!0,"",!0).minimumFraction)}if(t.formatRegex.test(n.format)||!n.format){if(u(p,v(n.format||"N")),p.custom=!1,l="###0",p.fractionDigits||n.minimumFractionDigits||n.maximumFractionDigits||r){p.fractionDigits&&(n.minimumFractionDigits=n.maximumFractionDigits=p.fractionDigits),l=x(l,r||p.fractionDigits||n.minimumFractionDigits||0,n.maximumFractionDigits||0)}if(n.minimumIntegerDigits&&(l=N(l,n.minimumIntegerDigits)),n.useGrouping&&(l=I(l)),"currency"===p.type||p.type&&y()){y()&&"currency"!==p.type&&(g.pData=a(p.type+"pData",f),g.nData=a(p.type+"nData",f));var D=l;l=g.pData.nlead+D+g.pData.nend,(g.hasNegativePattern||y())&&(l+=";"+g.nData.nlead+D+g.nData.nend)}"percent"!==p.type||y()||(l+=" %")}else l=n.format.replace(/'/g,'"');return Object.keys(M).length>0&&(l=o?l:function(e,t){if(-1!==e.indexOf(",")){var i=e.split(",");e=i[0]+a("numberMapper.numberSymbols.group",t)+i[1].replace(".",a("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",a("numberMapper.numberSymbols.decimal",t));return e}(l,M)),l},t.fractionDigitsPattern=x,t.minimumIntegerPattern=N,t.groupingPattern=I,t.getWeekData=function(e,t){var i="sun",n=a("supplemental.weekData.firstDay",t),s=e;return/en-/.test(s)&&(s=s.slice(3)),s=s.slice(0,2).toUpperCase()+s.substr(2),n&&(i=n[""+s]||n[s.slice(0,2)]||"sun"),r[""+i]},t.replaceBlazorCurrency=function(e,t,i){var n=a(i||"",E);if(t!==n)for(var s=0,o=e;s<o.length;s++){var r=o[s];r.nend=r.nend.replace(t,n),r.nlead=r.nlead.replace(t,n)}},t.getWeekOfYear=function(e){var t,i=new Date(e.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;var s=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if((t=Math.floor((s+n-1)/7)+1)>52){var o=new Date(e.getFullYear()+1,0,1).getDay();t=(o=o>=0?o:o+7)<4?1:53}}else t=Math.floor((s+n-1)/7);return t}}(e.IntlBase||(e.IntlBase={}));var G=/^(.*?):[ \t]*([^\r\n]*)$/gm,K=function(){function e(e,t,n,s){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!f(n)||n):"object"===i(e)&&(this.options=e,p(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:s}return e.prototype.send=function(e){var t=this;this.data=f(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise((function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},f(t.onLoad)||(t.httpRequest.onload=t.onLoad),f(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),f(t.onAbort)||(t.httpRequest.onabort=t.onAbort),f(t.onError)||(t.httpRequest.onerror=t.onError),f(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),f(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(f(t.data)?null:t.data)}))},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(e){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=G.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=G.exec(this.httpRequest.getAllResponseHeaders());return f(i=t[e.toLowerCase()])?null:i},e}(),J=function(){function e(e,t,i){this.type="GET",this.emitError=!0,"string"==typeof e?(this.url=e,this.type=f(t)?this.type:t.toUpperCase(),this.contentType=i):c(e)&&Object.keys(e).length>0&&p(this,e),this.contentType=f(this.contentType)?"application/json; charset=utf-8":this.contentType}return e.prototype.send=function(e){var t=this,i={"application/json":"json","multipart/form-data":"formData","application/octet-stream":"blob","application/x-www-form-urlencoded":"formData"};try{f(this.fetchRequest)&&"GET"===this.type?this.fetchRequest=new Request(this.url,{method:this.type}):f(this.fetchRequest)&&(this.data=f(e)?this.data:e,this.fetchRequest=new Request(this.url,{method:this.type,headers:{"Content-Type":this.contentType},body:this.data}));var n={cancel:!1,fetchRequest:this.fetchRequest};return this.triggerEvent(this.beforeSend,n),n.cancel?null:(this.fetchResponse=fetch(this.fetchRequest),this.fetchResponse.then((function(e){if(t.triggerEvent(t.onLoad,e),!e.ok)throw e;for(var n="text",s=0,o=Object.keys(i);s<o.length;s++){var r=o[s];e.headers.get("Content-Type")&&-1!==e.headers.get("Content-Type").indexOf(r)&&(n=i[r])}return e[n]()})).then((function(e){return t.triggerEvent(t.onSuccess,e,t),e})).catch((function(e){var i={};return t.emitError&&(t.triggerEvent(t.onFailure,e),i=Promise.reject(e)),i})))}catch(e){return e}},e.prototype.triggerEvent=function(e,t,i){f(e)||"function"!=typeof e||e(t,i)},e}(),$=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,ee=/msie|trident/i,te=/Trident\/7\./,ie=/(ipad|iphone|ipod touch)/i,ne=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,se=/android/i,oe=/trident|windows phone|edge/i,re=/(version)[ /]([\w.]+)/i,ae={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var le=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,s=Object.keys(ae);n<s.length;n++){var o=s[n];if(i=e.userAgent.match(ae[""+o])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(te)){t.name="msie";break}var r=e.userAgent.match(re);"safari"===t.name&&r&&(t.version=r[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[""+t].isPointer:e.isTouch?i[""+t].isTouch+(e.isDevice?"":" "+i[""+t].isDevice):i[""+t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.isSafari=function(){return e.isDevice&&e.isIos&&e.isTouch&&"undefined"!=typeof window&&-1===window.navigator.userAgent.toLowerCase().indexOf("iphone")&&window.navigator.userAgent.toLowerCase().indexOf("safari")>-1},e.getValue=function(t,i){var n="undefined"!=typeof window?window.browserDetails:{};return"undefined"!=typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===e.isTouch&&!ae.CHROME.test(navigator.userAgent)&&(n.isIos=!0,n.isDevice=!0,n.isTouch=!0,n.isPointer=!0),void 0===n[""+t]?n[""+t]=i.test(e.userAgent):n[""+t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return g(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",ee)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return g(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return g(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return g(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",$)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",ie)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",ne)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",se)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return g(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(g(window.cordova)&&g(window.PhoneGap)&&g(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",oe)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return g(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return g(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return g(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return g(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}(),he=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,n,s,o){var r,a=e.addOrGetEventData(t);r=o?m(n,o):n,s&&(r=r.bind(s));for(var l=i.split(" "),h=0;h<l.length;h++)a.push({name:l[parseInt(h.toString(),10)],listener:n,debounce:r}),le.isIE?t.addEventListener(l[parseInt(h.toString(),10)],r):t.addEventListener(l[parseInt(h.toString(),10)],r,{passive:!1});return r},e.remove=function(t,i,n){for(var s=e.addOrGetEventData(t),o=i.split(" "),r=function(e){var i,r=-1;s&&0!==s.length&&s.some((function(t,s){return t.name===o[parseInt(e.toString(),10)]&&t.listener===n&&(r=s,i=t.debounce,!0)})),-1!==r&&s.splice(r,1),i&&t.removeEventListener(o[parseInt(e.toString(),10)],i)},a=0;a<o.length;a++)r(a)},e.clearEvents=function(t){var i,n;n=u([],n,i=e.addOrGetEventData(t));for(var s=0;s<n.length;s++)t.removeEventListener(n[parseInt(s.toString(),10)].name,n[parseInt(s.toString(),10)].debounce),i.shift()},e.trigger=function(t,i,n){for(var s=0,o=e.addOrGetEventData(t);s<o.length;s++){var r=o[s];r.name===i&&r.debounce.call(this,n)}},e}(),de=/^svg|^path|^g/;function ce(e,t){var i=de.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&be(i,t.attrs)),i}function pe(e,t){for(var i=fe(t),n=RegExp,s=0,o=e;s<o.length;s++)for(var r=o[s],h=0,d=i;h<d.length;h++){var p=d[h];if(c(r)){var u=a("attributes.className",r);f(u)?l("attributes.className",p,r):new n("\\b"+p+"\\b","i").test(u)||l("attributes.className",u+" "+p,r)}else r.classList.contains(p)||r.classList.add(p)}return e}function ue(e,t){for(var i=fe(t),n=0,s=e;n<s.length;n++){var o=s[n],r=c(o);if(r?a("attributes.className",o):""!==o.className)for(var h=0,d=i;h<d.length;h++){var p=d[h];if(r){var u=a("attributes.className",o).split(" "),f=u.indexOf(p);-1!==f&&u.splice(f,1),l("attributes.className",u.join(" "),o)}else o.classList.remove(p)}}return e}function fe(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function ge(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function me(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),ve(t)}))}function ve(e){var t=e.parentNode;if(t)return t.removeChild(e)}function be(e,t){for(var i=e,n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];if(c(i)){var r=o;"tabindex"===o&&(r="tabIndex"),i.attributes[""+r]=t[""+o]}else i.setAttribute(o,t[""+o])}return i}function ye(e,t,i){return void 0===t&&(t=document),e=we(e),t.querySelector(e)}function Ce(e,t,i){return void 0===t&&(t=document),e=we(e),t.querySelectorAll(e)}function we(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var i=e.split(","),n=0;n<i.length;n++){for(var s=i[parseInt(n.toString(),10)].split(" "),o=0;o<s.length;o++)if(s[parseInt(o.toString(),10)].indexOf("#")>-1&&!s[parseInt(o.toString(),10)].match(/\[.*\]/)){var r=s[parseInt(o.toString(),10)].split("#");if(r[1].match(/^\d/)||r[1].match(t)){var a=s[parseInt(o.toString(),10)].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",s[parseInt(o.toString(),10)]=a.join(".")}}i[parseInt(n.toString(),10)]=s.join(" ")}return i.join(",")}return e}function Me(e,t){var i=e;if("function"==typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(xe(i,t))return i;i=i.parentNode}return null}function Se(e,t){void 0!==t&&Object.keys(t).forEach((function(i){e.style[i]=t[i]}))}function xe(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var Ne=new RegExp("]"),Oe=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new q(this),g(t)||(this.element="string"==typeof t?document.querySelector(t):t,f(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),g(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,p(this,e),!0!==t?(p(this.changedProperties,e),this.dataBind()):y()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];if(t[""+s]instanceof Array)for(var o=0,r=t[""+s];o<r.length;o++){var a=r[o];void 0!==a.dataBind&&a.dataBind()}else t[""+s].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(y()){e=e||{},u(this.bulkChanges,{},e,!0);this.allowServerDataBinding&&window.sfBlazor.updateModel&&(window.sfBlazor.updateModel(this),this.bulkChanges={})}},e.prototype.saveChanges=function(e,t,i){if(y()){var n={};n[""+e]=t,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.finalUpdate(),this.finalUpdate=r(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,i,n){var s=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var r=this.modelObserver.notify(e,t,i,n);if(Ne.test(e)){var l=a(e,this);if(l){if(window.Blazor){var h=l.call(this,t);h&&"function"==typeof h.then?i?h.then((function(e){i&&(e="string"==typeof e&&s.modelObserver.isJson(e)?JSON.parse(e):e,i.call(s,e))})).catch((function(e){n&&(e="string"==typeof e&&s.modelObserver.isJson(e)?JSON.parse(e):e,n.call(s,e))})):r=h:i&&i.call(this,t)}else l.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=o,r}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();pe([this.element],["e-lib",e]),f(this.element.ej2_instances)?l("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances?this.element.ej2_instances.filter((function(t){return t!==e})):[],ue([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&ue([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function Ee(e,t){var i,n,s="string"==typeof e?document.getElementById(e):e;for(n=0;n<s.ej2_instances.length;n++){if(i=s.ej2_instances[parseInt(n.toString(),10)],"string"==typeof t){if(t===i.getModuleName())return i}else if(i instanceof t)return i}}function Ie(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[""+t]=o(n,[e,t,i])),e.properties[""+t]}function Te(e,t,i,n,s,r){for(var a=[],l=i?i.length:0,h=0;h<l;h++){var d=n;if(r&&(d=n(i[parseInt(h.toString(),10)],e)),s){var c=o(d,[e,t,{},!0]);c.setProperties(i[parseInt(h.toString(),10)],!0),a.push(c)}else a.push(o(d,[e,t,i[parseInt(h.toString(),10)],!1]))}return a}function De(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[""+t]=e),this.properties[""+t]}}function je(e,t){return function(i){if(this.properties[""+t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[""+t]=i}}}function Ae(e,t,i){return function(){return Ie(this,t,e,i)}}function ze(e,t,i){return function(n){Ie(this,t,e,i).setProperties(n)}}function ke(e,t,i){return function(){var n=i({});return this.properties.hasOwnProperty(t)?this.properties[""+t]:Ie(this,t,e,n)}}function Pe(e,t,i){return function(n){var s=i(n,this);Ie(this,t,e,s).setProperties(n)}}function Le(e,t,i){return function(){var n=this;if(!this.properties.hasOwnProperty(t)){var s=Te(this,t,e,i,!1);this.properties[""+t]=s}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||o||["push","pop"].forEach((function(e){var s={value:He(e,t,i,n.properties[""+t]).bind(n),configurable:!0};Object.defineProperty(n.properties[""+t],e,s)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[""+t],"isComplexArray",{value:!0}),this.properties[""+t]}}function Be(e,t,i){return function(n){this.isComplexArraySetter=!0;var s=Te(this,t,e,i,!1),o=Te(this,t,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,o,s),this.properties[""+t]=o}}function Re(e,t,i){return function(n){var s=this.properties.hasOwnProperty(t)?this.properties[t]:e,o=Te(this,t,n,i,!0,!0);this.saveChanges(t,o,s),this.properties[""+t]=o}}function Ue(e,t,i){return function(){var n=i({});if(!this.properties.hasOwnProperty(t)){var s=Te(this,t,e,n,!1);this.properties[""+t]=s}return this.properties[""+t]}}function He(e,t,i,n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var r=0;r<i.length;r++){Array.prototype[""+e].apply(n,[i[parseInt(r.toString(),10)]]);var a=Fe(o+(n.length-1),i[parseInt(r.toString(),10)],!this.controlParent,e);this.serverDataBind(a,i[parseInt(r.toString(),10)],!1,e)}break;case"pop":Array.prototype[""+e].apply(n);var l=Fe(o+n.length,null,!this.controlParent,e);this.serverDataBind(l,{ejsAction:"pop"},!1,e)}return n}}function Fe(e,t,n,s){var o=e;if(n&&((o={})[""+e]=t,t&&"object"===i(t))){o[""+e].ejsAction=s}return o}function Ye(e){return function(t,i){var n={set:je(e,i),get:De(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),Ve(t,i,"prop",e)}}function qe(e,t){return function(i,n){var s={set:ze(e,n,t),get:Ae(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,s),Ve(i,n,"complexProp",e,t)}}function _e(){return function(e,t){var i={set:function(e){var i=this.properties[""+t];if(i!==e){var n=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var n=a("propName",t);return n&&(i=n+"-"+i),e(a("parentObj",t),i)}(this,t);!1===g(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[""+t]=e}},get:De(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),Ve(e,t,"event")}}function We(e){}function Ve(e,t,i,n,s){g(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:s}),e.propList[i+"Names"].push(t)}var Xe,Qe,Ze=(Xe=function(e,t){return(Xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Xe(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ge=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Ke=function(t){function i(e){var i=t.call(this,e,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var n;return Ze(i,t),n=i,i.prototype.animate=function(e,t){t=t||{};var i=this.getModel(t);if("string"==typeof e)for(var s=0,o=Array.prototype.slice.call(Ce(e,document));s<o.length;s++){var r=o[s];i.element=r,n.delayAnimation(i)}else i.element=e,n.delayAnimation(i)},i.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},i.delayAnimation=function(t){"Disable"===e.animationMode||e.animationMode===e.GlobalAnimationMode.Disable?(t.begin&&t.begin.call(this,t),t.end&&t.end.call(this,t)):t.delay?setTimeout((function(){n.applyAnimation(t)}),t.delay):n.applyAnimation(t)},i.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,n=0,s=0,o=e.duration;e.element.setAttribute("e-animate","true");!function r(a){try{if(a){s=0===s?a:s,e.timeStamp=a+e.timeStamp-s,s=a,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<o&&e.timeStamp+l<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(r)):(cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else n=requestAnimationFrame(r),e.element.setAttribute("e-animation-id",n.toString())}catch(i){cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,i)}}()},i.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},i.prototype.onPropertyChanged=function(e,t){},i.prototype.getModuleName=function(){return"animation"},i.prototype.destroy=function(){},Ge([Ye("FadeIn")],i.prototype,"name",void 0),Ge([Ye(400)],i.prototype,"duration",void 0),Ge([Ye("ease")],i.prototype,"timingFunction",void 0),Ge([Ye(0)],i.prototype,"delay",void 0),Ge([_e()],i.prototype,"progress",void 0),Ge([_e()],i.prototype,"begin",void 0),Ge([_e()],i.prototype,"end",void 0),Ge([_e()],i.prototype,"fail",void 0),i=n=Ge([We],i)}(Oe);function Je(e){var t=e.target,i=this.rippleOptions.selector,n=i?Me(t,i):t;if(!(!n||this.rippleOptions&&Me(t,this.rippleOptions.ignore))){var s=n.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,r=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(o-s.left),Math.abs(o-s.right)),l=Math.max(Math.abs(r-s.top),Math.abs(r-s.bottom)),h=Math.sqrt(a*a+l*l),d=2*h+"px",c=o-s.left-h,p=r-s.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(c=0,p=0,d="100%"),n.classList.add("e-ripple");var u=ce("div",{className:"e-ripple-element",styles:"width: "+d+";height: "+d+";left: "+c+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&he.add(n,"mouseleave",et,{parent:this.parent,rippleOptions:this.rippleOptions})}}function $e(e){tt(e,this)}function et(e){tt(e,this)}function tt(e,t){var i=t.rippleOptions.duration,n=e.target,s=t.rippleOptions.selector,o=s?Me(n,s):n;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var r=Ce(".e-ripple-element",o),a=r[r.length-1];a&&(a.style.opacity="0.5"),t.parent!==o&&he.remove(o,"mouseleave",et),setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)}),i)}}e.isRippleEnabled=!1,(Qe=e.GlobalAnimationMode||(e.GlobalAnimationMode={})).Default="Default",Qe.Enable="Enable",Qe.Disable="Disable";var it,nt=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var s=e[parseInt(n.toString(),10)],r=0,a=t;r<a.length;r++){var h=a[r],d=s.member;if(h&&h.prototype.getModuleName()===s.member&&!this.isModuleLoaded(d)){var c=o(h,s.args),p=this.getMemberName(d);s.isProperty?l(p,h,this.parent):l(p,c,this.parent);var u=s;u.member=p,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||a(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t=this,i=e.map((function(e){return t.getMemberName(e.member)})),n=0,s=this.loadedModules.filter((function(e){return-1===i.indexOf(e.member)}));n<s.length;n++){var o=s[n];o.isProperty||a(o.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(o),1),h(this.parent,o.member)}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),st=function(){function e(e,t,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=a("callChildDataBind",Oe),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=n,this.setProperties(i,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[""+t]=e:delete this.parentObj.childChangedProperties[""+t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(p(this,e),this.updateChange(!1,this.propName),this.clearChanges()):p(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(l(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),l(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(e,t,!0),this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,i,n){if(y()&&!this.parentObj.isComplexArraySetter){var s,o={},r=i?this.getParentKey(!0)+"."+e:e;if(-1!==r.indexOf(".")){var a=r.split(".");s=o;for(var l=0;l<a.length;l++){var h=l===a.length-1;s[a[parseInt(l.toString(),10)]]=h?t:{},s=h?s:s[a[parseInt(l.toString(),10)]]}}else o[""+r]={},s=o[""+r],o[""+r][""+e]=t;if(this.isParentArray){s.ejsAction=n||"none"}this.controlParent.serverDataBind(o)}},e.prototype.getParentKey=function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=e?n:n>0?n-1:0,i+=t=-1!==t?"-"+t:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i},e}(),ot=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","inplaceeditor","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","slider","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],rt=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],at=function(){function e(e){var t;this.isValidated=!1,this.isLicensed=!0,this.version="24",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats|essentialstudio/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion license key is invalid.</span>",invalidKey:"<span>The included Syncfusion license key is invalid.</span>"},this.manager=(t=null,{setKey:function(e){t=e},getKey:function(){return t}}),this.npxManager={getKey:function(){return"npxKeyReplace"}},this.manager.setKey(e)}return e.prototype.validate=function(){if(!this.isValidated&&d&&!a(ht(rt),d)&&!a("Blazor",d)){var e=void 0,t=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var i=this.getInfoFromKey();if(i&&i.length)for(var n=0,s=i;n<s.length;n++){var o=s[n];if(!this.platform.test(o.platform)||o.invalidPlatform)e=this.errors.platformMismatched;else if(-1===o.version.indexOf(this.version))e=(e=(e=this.errors.versionMismatched).replace("##LicenseVersion",o.version)).replace("##Requireversion",this.version+".x");else if(o.expiryDate){var r=new Date(o.expiryDate),h=new Date;if(!(r!==h&&r<h))break;e=this.errors.trailExpired}}else e=this.errors.invalidKey}else{var c=a(ht([115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116]),d);t=a(ht([115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76]),d),e=c&&""!==c?c:this.errors.noLicense}if(e&&"undefined"!=typeof document&&!f(document)){var p=ce("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>"+e+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+(it=t&&""!==t?t:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjQ=&utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information")+">Claim your free account</a>"});p.setAttribute("style","position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(p),this.isLicensed=!1}this.isValidated=!0,l(ht(rt),this.isValidated,d)}return this.isLicensed},e.prototype.getDecryptedData=function(e){try{return atob(e)}catch(e){return""}},e.prototype.getInfoFromKey=function(){try{var e="",t=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],s=!1,o=!1;this.manager.getKey()?e=this.manager.getKey():(o=!0,e=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var r=e.split(";"),a=0,l=r;a<l.length;a++){var h=l[a],d=this.getDecryptedData(h);if(d){var c=0,p="";if(o){var u=d[d.length-1],f=[];for(g=0;g<d.length;g++)f[parseInt(g.toString(),10)]=d[parseInt(g.toString(),10)].charCodeAt(0)-u.charCodeAt(0);for(g=0;g<f.length;g++)p+=String.fromCharCode(f[parseInt(g.toString(),10)])}else for(var g=0;g<d.length;g++,c++){c===t.length&&(c=0);var m=d.charCodeAt(g);p+=String.fromCharCode(m^t[parseInt(c.toString(),10)]>>16)}this.platform.test(p)?(i=p.split(";"),s=!1,i.length>3&&n.push({platform:i[0],version:i[1],expiryDate:i[2]})):p&&p.split(";").length>3&&(s=!0)}}return s&&!n.length?[{invalidPlatform:s}]:n.length?n:null}catch(e){return null}},e}(),lt=new at;function ht(e){for(var t="",i=0,n=e;i<n.length;i++){var s=n[i];t+=String.fromCharCode(s)}return t}function dt(e){lt=new at(e)}var ct,pt,ut=function(e){return e&&dt(e),lt.validate()},ft=function(){var e='\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                " style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href="https://www.syncfusion.com/downloads/metrostudio?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                " style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href="https://www.syncfusion.com/blogs/?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                " style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href='+it+' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';if("undefined"!=typeof document&&!f(document)){var t=ce("div",{innerHTML:e});document.body.appendChild(t)}},gt=(ct=function(e,t){return(ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ct(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),mt=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},vt=0,bt=0,yt=0,Ct=!0,wt=!1;e.versionBasedStatePersistence=!1;var Mt=function(t){function n(i,n){var s=t.call(this,i,n)||this;return s.randomId=C(),s.isStringTemplate=!1,s.needsID=!1,s.isReactHybrid=!1,f(s.enableRtl)&&s.setProperties({enableRtl:e.rightToLeft},!0),f(s.locale)&&s.setProperties({locale:e.defaultCulture},!0),s.moduleLoader=new nt(s),s.localObserver=new q(s),_.on("notifyExternalChange",s.detectFunction,s,s.randomId),"undefined"==typeof window||"undefined"==typeof document||ut()||-1!==ot.indexOf(s.getModuleName())&&(yt+=1)>5&&(Ct=!1),g(n)||s.appendTo(),s}return gt(n,t),n.prototype.requiredModules=function(){return[]},n.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&(this.setPersistData(),this.detachUnloadEvent()),this.localObserver.destroy(),this.refreshing||(ue([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),t.prototype.destroy.call(this),this.moduleLoader.clean(),_.off("notifyExternalChange",this.detectFunction,this.randomId)))},n.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new q(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},n.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},n.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},n.prototype.getLocalData=function(){var t=this.getModuleName()+this.element.id;return e.versionBasedStatePersistence?window.localStorage.getItem(t+this.ej2StatePersistenceVersion):window.localStorage.getItem(t)},n.prototype.attachUnloadEvent=function(){this.handleUnload=this.handleUnload.bind(this),window.addEventListener("unload",this.handleUnload)},n.prototype.handleUnload=function(){this.setPersistData()},n.prototype.detachUnloadEvent=function(){window.removeEventListener("unload",this.handleUnload)},n.prototype.appendTo=function(e){if(f(e)||"string"!=typeof e?f(e)||(this.element=e):this.element=ye(e,document),!f(this.element)){var i="e-"+this.getModuleName().toLowerCase();pe([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),this.attachUnloadEvent());var n=a("ej2_instances",this.element);n&&-1!==n.indexOf(this)||t.prototype.addInstance.call(this),this.preRender(),this.injectModules(),Ct||wt||(ft(),wt=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},n.prototype.renderComplete=function(e){if(y()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},n.prototype.dataBind=function(){this.injectModules(),t.prototype.dataBind.call(this)},n.prototype.on=function(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else for(var n=0,s=e;n<s.length;n++){var o=s[n];this.localObserver.on(o.event,o.handler,o.context)}},n.prototype.off=function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(var i=0,n=e;i<n.length;i++){var s=n[i];this.localObserver.off(s.event,s.handler)}},n.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},n.prototype.getInjectedModules=function(){return this.injectedModules},n.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[parseInt(i.toString(),10)])&&this.prototype.injectedModules.push(e[parseInt(i.toString(),10)])},n.prototype.createElement=function(e,t,i){return ce(e,t)},n.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},n.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},n.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},n.prototype.mergePersistData=function(){var t;f(t=e.versionBasedStatePersistence?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===t||this.setProperties(JSON.parse(t),!0)},n.prototype.setPersistData=function(){this.isDestroyed||(e.versionBasedStatePersistence?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},n.prototype.renderReactTemplates=function(e){f(e)||e()},n.prototype.clearTemplate=function(e,t){},n.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(vt=0),pt=this.pageID(location.href),bt=history.length,e+"_"+pt+"_"+vt++},n.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},n.prototype.isHistoryChanged=function(){return pt!==this.pageID(location.href)||bt!==history.length},n.prototype.addOnPersist=function(e){for(var t=this,i={},n=0,s=e;n<s.length;n++){var o,r=s[n];g(o=a(r,this))||l(r,this.getActualProperties(o),i)}return JSON.stringify(i,(function(e,i){return t.getActualProperties(i)}))},n.prototype.getActualProperties=function(e){return e instanceof st?a("properties",e):e},n.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},n.prototype.iterateJsonProperties=function(e,t){for(var n={},s=function(s){if(-1===t.indexOf(s)){var r=e[s];if("object"!==i(r)||r instanceof Array)n[""+s]=r;else{var a=t.filter((function(e){return new RegExp(s+".").test(e)})).map((function(e){return e.replace(s+".","")}));n[""+s]=o.iterateJsonProperties(o.getActualProperties(r),a)}}},o=this,r=0,a=Object.keys(e);r<a.length;r++){s(a[r])}return n},mt([Ye(!1)],n.prototype,"enablePersistence",void 0),mt([Ye()],n.prototype,"enableRtl",void 0),mt([Ye()],n.prototype,"locale",void 0),n=mt([We],n)}(Oe);"undefined"!=typeof window&&window.addEventListener("popstate",(function(){vt=0}));var St,xt,Nt,Ot,Et=(St=function(e,t){return(St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}St(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),It=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Tt={left:0,top:0,bottom:0,right:0},Dt={isDragged:!1},jt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Et(t,e),It([Ye(0)],t.prototype,"left",void 0),It([Ye(0)],t.prototype,"top",void 0),t}(st),At=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.dragLimit=n.getDefaultPosition(),s.borderWidth=n.getDefaultPosition(),s.padding=n.getDefaultPosition(),s.diffX=0,s.prevLeft=0,s.prevTop=0,s.dragProcessStarted=!1,s.eleTop=0,s.tapHoldTimer=0,s.externalInitialize=!1,s.diffY=0,s.parentScrollX=0,s.parentScrollY=0,s.droppables={},s.bind(),s}var n;return Et(t,e),n=t,t.prototype.bind=function(){this.toggleEvents(),le.isIE&&pe([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return u({},Tt)},t.prototype.toggleEvents=function(e){var t;g(this.handle)||(t=ye(this.handle,this.element));var i=this.enableTapHold&&le.isDevice&&le.isTouch?this.mobileInitialize:this.initialize;e?he.remove(t||this.element,le.isSafari()?"touchstart":le.touchStartEvent,i):he.add(t||this.element,le.isSafari()?"touchstart":le.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)}),this.tapHoldThreshold),he.add(document,le.isSafari()?"touchmove":le.touchMoveEvent,this.removeTapholdTimer,this),he.add(document,le.isSafari()?"touchend":le.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),he.remove(document,le.isSafari()?"touchmove":le.touchMoveEvent,this.removeTapholdTimer),he.remove(document,le.isSafari()?"touchend":le.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return f(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[""+t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),f(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"==typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!f(Me(e.target,i[parseInt(n.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!g(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var s=this.getCoordinates(e);if(this.initialPosition={x:s.pageX,y:s.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=s.pageX-(o.left+this.parentScrollX),this.relativeYPosition=s.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(he.add(document,le.isSafari()?"touchmove":le.touchMoveEvent,this.intDragStart,this),he.add(document,le.isSafari()?"touchend":le.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,he.trigger(document.documentElement,le.isSafari()?"touchstart":le.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!g(e.changedTouches);if(!t||1===e.changedTouches.length){var i,n=this.getCoordinates(e),s=getComputedStyle(this.element);this.margin={left:parseInt(s.marginLeft,10),top:parseInt(s.marginTop,10),right:parseInt(s.marginRight,10),bottom:parseInt(s.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var r=Me(e.target,this.dragTarget);f(r)||(o=r)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);var a=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(a*a+l*l)>=this.distance||this.externalInitialize){var h=this.getHelperElement(e);if(!h||f(h))return;t&&e.preventDefault();var d=this.helperElement=h;if(this.parentClientRect=this.calculateParentPosition(d.offsetParent),this.dragStart){var c={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:y()?this.bindDragEvents.bind(this):null,dragElement:d};this.trigger("dragStart",c)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var p=getComputedStyle(o),u=parseFloat(p.marginTop);this.clone&&0!==u&&(i.top+=u),this.eleTop=isNaN(parseFloat(p.top))?0:parseFloat(p.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(i.top-=this.parentScrollY,i.left-=this.parentScrollX);var m=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(i.top+=this.dragArea.scrollTop),this.dragElePosition={top:i.top,left:i.left},Se(d,this.getDragPosition({position:"absolute",left:m.left,top:m.top})),he.remove(document,le.isSafari()?"touchmove":le.touchMoveEvent,this.intDragStart),he.remove(document,le.isSafari()?"touchend":le.touchEndEvent,this.intDestroy),y()||this.bindDragEvents(d)}}},t.prototype.bindDragEvents=function(e){ge(e)?(he.add(document,le.isSafari()?"touchmove":le.touchMoveEvent,this.intDrag,this),he.add(document,le.isSafari()?"touchend":le.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(f(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(g(e.changedTouches)||1===e.changedTouches.length){var t,i;this.clone&&e.changedTouches&&le.isDevice&&le.isTouch&&e.preventDefault(),this.position=this.getMousePosition(e,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var s=this.getDocumentWidthHeight("Width");if(s<this.position.left&&(this.position.left=s),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var r=this.checkTargetElement(e);if(r.target&&r.instance){var a=!0;this.hoverObject&&(this.hoverObject.instance!==r.instance?this.triggerOutFunction(e,r):a=!1),a&&(r.instance.dragData[this.scope]=this.droppables[this.scope],r.instance.intOver(e,r.target),this.hoverObject=r)}else this.hoverObject&&this.triggerOutFunction(e,r);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var h=this.parentClientRect.left,d=this.parentClientRect.top,c=this.getCoordinates(e),p=c.pageX,u=c.pageY,m=this.position.left-this.diffX,v=this.position.top-this.diffY,b=getComputedStyle(l);if(this.dragArea){if(this.enableAutoScroll&&this.setDragArea(),this.pageX!==p||this.skipDistanceCheck){var y=l.offsetWidth+(parseFloat(b.marginLeft)+parseFloat(b.marginRight));t=this.dragLimit.left>m&&m>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<m+y&&m>0?m-(m-this.dragLimit.right)+window.pageXOffset-y:m<0?this.dragLimit.left:m}if(this.pageY!==u||this.skipDistanceCheck){var C=l.offsetHeight+(parseFloat(b.marginTop)+parseFloat(b.marginBottom));i=this.dragLimit.top>v&&v>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<v+C&&v>0?v-(v-this.dragLimit.bottom)+window.pageYOffset-C:v<0?this.dragLimit.top:v}}else t=m,i=v;var w,M,S=d+this.borderWidth.top,x=h+this.borderWidth.left;if(this.dragProcessStarted&&(f(i)&&(i=this.prevTop),f(t)&&(t=this.prevLeft)),this.helperElement.classList.contains("e-treeview"))this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,w=i-S<0?this.dragLimit.top:i-this.borderWidth.top,M=t-x<0?this.dragLimit.left:t-this.borderWidth.left):(w=i-this.borderWidth.top,M=t-this.borderWidth.left);else if(this.dragArea){var N=this.helperElement.classList.contains("e-dialog");this.dragLimit.top=this.clone?this.dragLimit.top:0,w=i-S<0?this.dragLimit.top:i-S,M=t-x<0?N?t-(x-this.borderWidth.left):this.dragElePosition.left:t-x}else w=i-S,M=t-x;var O=parseFloat(getComputedStyle(this.element).marginTop);if(O>0&&(this.clone&&(w+=O,v<0&&(O+v>=0?w=O+v:w-=O),this.dragArea&&(w=this.dragLimit.bottom<w?this.dragLimit.bottom:w)),i-S<0))if(v+O+(l.offsetHeight-S)>=0){var E=this.dragLimit.top+v-S;E+O+S<0?w-=O+S:w=E}else w-=O+S;if(this.dragArea&&this.helperElement.classList.contains("e-treeview"))w=w+(C=l.offsetHeight+(parseFloat(b.marginTop)+parseFloat(b.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-C:w;this.enableScrollHandler&&!this.clone&&(w-=this.parentScrollY,M-=this.parentScrollX),this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(w+=this.dragArea.scrollTop);var I=this.getProcessedPositionValue({top:w+"px",left:M+"px"});Se(l,this.getDragPosition(I)),this.elementInViewport(l)||!this.enableAutoScroll||this.helperElement.classList.contains("e-treeview")||this.helperElement.scrollIntoView();var T=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===T.length&&(T=this.getPathElements(e));var D=this.getScrollParent(T,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(D,w):this.elementInViewport(this.helperElement)||(0===(T=[].slice.call(document.querySelectorAll(":hover"))).length&&(T=this.getPathElements(e)),D=this.getScrollParent(T,!0),this.getScrollPosition(D,w))}this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=p,this.pageY=u}},t.prototype.getScrollParent=function(e,t){for(var i,n=t?e.reverse():e,s=n.length-1;s>=0;s--)if(("auto"===(i=window.getComputedStyle(n[parseInt(s.toString(),10)])["overflow-y"])||"scroll"===i)&&n[parseInt(s.toString(),10)].scrollHeight>n[parseInt(s.toString(),10)].clientHeight)return n[parseInt(s.toString(),10)];if("visible"===(i=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(e,t){e&&e===document.scrollingElement?e.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<t&&e.getBoundingClientRect().height+this.parentClientRect.top>t?e.scrollTop+=this.helperElement.clientHeight:e.scrollTop>t-this.helperElement.clientHeight&&(e.scrollTop-=this.helperElement.clientHeight):e&&e!==document.scrollingElement&&(e.clientHeight+e.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<t?e.scrollTop+=this.helperElement.clientHeight:e.getBoundingClientRect().top>t-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(e.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(e){var t=e.clientX>0?e.clientX:0,i=e.clientY>0?e.clientY:0;return document.elementsFromPoint(t,i)},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=u({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,g(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),he.remove(document,le.isSafari()?"touchmove":le.touchMoveEvent,this.intDragStart),he.remove(document,le.isSafari()?"touchend":le.touchEndEvent,this.intDragStop),he.remove(document,le.isSafari()?"touchend":le.touchEndEvent,this.intDestroy),he.remove(document,le.isSafari()?"touchmove":le.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(Dt.isDragged=!Dt.isDragged),Dt.isDragged},t.prototype.setDragArea=function(){var e,t,n,s=0,o=0;if(n="string"===i(this.dragArea)?ye(this.dragArea):this.dragArea){var r=n.getBoundingClientRect();e=n.scrollWidth?n.scrollWidth:r.right-r.left,t=n.scrollHeight?this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?n.clientHeight:n.scrollHeight:r.bottom-r.top;for(var a=["Top","Left","Bottom","Right"],l=getComputedStyle(n),h=0;h<a.length;h++){var d=a[parseInt(h.toString(),10)],c=l["border"+d+"Width"],p=l["padding"+d],u=d.toLowerCase();this.borderWidth[""+u]=isNaN(parseFloat(c))?0:parseFloat(c),this.padding[""+u]=isNaN(parseFloat(p))?0:parseFloat(p)}s=this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?r.top+document.scrollingElement.scrollTop:r.top,o=r.left,this.dragLimit.left=o+this.borderWidth.left+this.padding.left,this.dragLimit.top=n.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=s+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"",s=-1!==e.type.indexOf("pointer")&&"safari"===le.info.name&&parseInt(le.info.version)>12;return v(e.target,this.helperElement)||-1!==e.type.indexOf("touch")||s?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return f(this.currentStateTarget)||this.currentStateTarget===e?f(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var i,n,s=void 0!==e.srcElement?e.srcElement:e.target,o=this.getCoordinates(e),r=f(s.offsetParent);if(t?(i=this.clone?o.pageX:o.pageX+(r?0:s.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+(r?0:s.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),document.scrollingElement&&!t&&!this.clone){var a=document.scrollingElement.scrollHeight>0&&document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight&&document.scrollingElement.scrollTop>0;i=document.scrollingElement.scrollWidth>0&&document.scrollingElement.scrollWidth>document.scrollingElement.clientWidth&&document.scrollingElement.scrollLeft>0?i-document.scrollingElement.scrollLeft:i,n=a?n-document.scrollingElement.scrollTop:n}return{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=ce("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!f(t.parentNode)){var n=Me(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var n=0,s=i;n<s.length;n++){var o=s[n];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},It([qe({},jt)],t.prototype,"cursorAt",void 0),It([Ye(!0)],t.prototype,"clone",void 0),It([Ye()],t.prototype,"dragArea",void 0),It([Ye()],t.prototype,"isDragScroll",void 0),It([Ye()],t.prototype,"isReplaceDragEle",void 0),It([Ye(!0)],t.prototype,"isPreventSelect",void 0),It([_e()],t.prototype,"drag",void 0),It([_e()],t.prototype,"dragStart",void 0),It([_e()],t.prototype,"dragStop",void 0),It([Ye(1)],t.prototype,"distance",void 0),It([Ye()],t.prototype,"handle",void 0),It([Ye()],t.prototype,"abort",void 0),It([Ye()],t.prototype,"helper",void 0),It([Ye("default")],t.prototype,"scope",void 0),It([Ye("")],t.prototype,"dragTarget",void 0),It([Ye()],t.prototype,"axis",void 0),It([Ye()],t.prototype,"queryPositionInfo",void 0),It([Ye(!1)],t.prototype,"enableTailMode",void 0),It([Ye(!1)],t.prototype,"skipDistanceCheck",void 0),It([Ye(!0)],t.prototype,"preventDefault",void 0),It([Ye(!1)],t.prototype,"enableAutoScroll",void 0),It([Ye(!1)],t.prototype,"enableTapHold",void 0),It([Ye(750)],t.prototype,"tapHoldThreshold",void 0),It([Ye(!1)],t.prototype,"enableScrollHandler",void 0),t=n=It([We],t)}(Oe),zt=(xt=function(e,t){return(xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}xt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),kt=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Pt=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return zt(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){he.add(this.element,le.isSafari()?"touchend":le.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,s=this.dragData[this.scope],o=!!s&&(s.helper&&ge(s.helper));o&&(i=this.isDropArea(e,s.helper,t),this.accept&&(n=xe(s.helper,this.accept))),o&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var n={canDrop:!0,target:i||e.target},s="touchend"===e.type;if(s||n.target===t){t.style.display="none";var o=s?e.changedTouches[0]:e,r=document.elementFromPoint(o.clientX,o.clientY);n.canDrop=!1,n.canDrop=v(r,this.element),n.canDrop&&(n.target=r),t.style.display=""}return n},t.prototype.destroy=function(){he.remove(this.element,le.isSafari()?"touchend":le.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},kt([Ye()],t.prototype,"accept",void 0),kt([Ye("default")],t.prototype,"scope",void 0),kt([_e()],t.prototype,"drop",void 0),kt([_e()],t.prototype,"over",void 0),kt([_e()],t.prototype,"out",void 0),t=kt([We],t)}(Oe),Lt=(Nt=function(e,t){return(Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Nt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Bt=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},Rt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Ut=function(e){function t(t,n){var s=e.call(this,n,t)||this;return s.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,o=e.shiftKey,r=e.which,a=0,l=Object.keys(s.keyConfigs);a<l.length;a++)for(var h=l[a],d=0,c=s.keyConfigs[""+h].split(",");d<c.length;d++){var p=c[d],u=i.getKeyConfigData(p.trim());t===u.altKey&&n===u.ctrlKey&&o===u.shiftKey&&r===u.keyCode&&(e.action=h,s.keyAction&&s.keyAction(e))}},s.bind(),s}var i;return Lt(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[""+e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[""+e]=n,n},t.getKeyCode=function(e){return Rt[""+e]||e.toUpperCase().charCodeAt(0)},t.configCache={},Bt([Ye({})],t.prototype,"keyConfigs",void 0),Bt([Ye("keyup")],t.prototype,"eventName",void 0),Bt([_e()],t.prototype,"keyAction",void 0),t=i=Bt([We],t)}(Oe),Ht=function(){function t(t,i,n){this.controlName=t,this.localeStrings=i,this.setLocale(n||e.defaultCulture)}return t.prototype.setLocale=function(e){var i=this.intGetControlConstant(t.locale,e);this.currentLocale=i||this.localeStrings},t.load=function(e){this.locale=u(this.locale,e,{},!0)},t.prototype.getConstant=function(e){return f(this.currentLocale[""+e])?this.localeStrings[""+e]||"":this.currentLocale[""+e]},t.prototype.intGetControlConstant=function(e,t){return e[""+t]?e[""+t][this.controlName]:null},t.locale={},t}(),Ft=(Ot=function(e,t){return(Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Ot(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Yt=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ft(t,e),Yt([Ye(50)],t.prototype,"swipeThresholdDistance",void 0),t}(st),_t=/(Up|Down)/,Wt=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(e){if(!0===n.touchAction){var t=n.updateChangeTouches(e);void 0!==e.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},n.startEventData=t,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout((function(){n.tapHoldEvent(e)}),n.tapHoldThreshold),he.add(n.element,le.touchMoveEvent,n.moveEvent,n),he.add(n.element,le.touchEndEvent,n.endEvent,n),he.add(n.element,le.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(e){var t=n.updateChangeTouches(e);n.movedPoint=t,n.isTouchMoved=!(t.clientX===n.startPoint.clientX&&t.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(e),i=u(i,{},{startEvents:n.startEventData,originalEvent:e,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(t)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},n.cancelEvent=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(e),he.remove(n.element,le.touchCancelEvent,n.cancelEvent)},n.endEvent=function(e){n.swipeFn(e),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:e,tapCount:++n.tapCount}),n.timeOutTap=setTimeout((function(){n.tapCount=0}),n.tapThreshold)),n.modeclear()},n.swipeFn=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var t=n.updateChangeTouches(e),i=t.clientX-n.startPoint.clientX,s=t.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),s=Math.floor(s<0?-1*s:i),n.isTouchMoved=i>1||s>1,/Firefox/.test(le.userAgent)&&0===t.clientX&&0===t.clientY&&"mouseup"===e.type&&(n.isTouchMoved=!1),n.endPoint=t,n.calcPoints(e);var o={originalEvent:e,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(t)};if(n.isTouchMoved){var r=void 0,a=n.swipeSettings.swipeThresholdDistance;r=u(r,n.defaultArgs,o);var l=!1,h=n.element,d=n.isScrollable(h),c=_t.test(n.movedDirection);(a<n.distanceX&&!c||a<n.distanceY&&c)&&(l=!d||n.checkSwipe(h,c)),l&&n.trigger("swipe",r)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout((function(){n.touchAction=!0}),"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),he.remove(n.element,le.touchMoveEvent,n.moveEvent),he.remove(n.element,le.touchEndEvent,n.endEvent),he.remove(n.element,le.touchCancelEvent,n.cancelEvent)},n.bind(),n}return Ft(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),le.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){he.add(this.element,le.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){he.remove(this.element,le.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,he.remove(this.element,le.touchMoveEvent,this.moveEvent),he.remove(this.element,le.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),he.remove(this.element,le.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,n=Date.now(),s=t-this.startPoint.clientX,o=i-this.startPoint.clientX,r=n-this.tStampStart;return Math.sqrt(s*s+o*o)/r},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||(0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Yt([_e()],t.prototype,"tap",void 0),Yt([_e()],t.prototype,"tapHold",void 0),Yt([_e()],t.prototype,"swipe",void 0),Yt([_e()],t.prototype,"scroll",void 0),Yt([Ye(350)],t.prototype,"tapThreshold",void 0),Yt([Ye(750)],t.prototype,"tapHoldThreshold",void 0),Yt([qe({},qt)],t.prototype,"swipeSettings",void 0),t=Yt([We],t)}(Oe),Vt=new RegExp("[\\n\\r\\s]+","g"),Xt=new RegExp(/'|"/g),Qt=new RegExp("if ?\\("),Zt=new RegExp("else if ?\\("),Gt=new RegExp("else"),Kt=new RegExp("for ?\\("),Jt=new RegExp("(/if|/for)"),$t=new RegExp("\\((.*)\\)",""),ei=new RegExp("^[0-9]+$","g"),ti=new RegExp("[\\w\"'.\\s+]+","g"),ii=new RegExp('"(.*?)"',"g"),ni=new RegExp("[\\w\"'@#$.\\s-+]+","g"),si=new RegExp("\\${([^}]*)}","g"),oi=/^\..*/gm,ri=/\\/gi,ai=/\\\\/gi,li=new RegExp("[\\w\"'@#$.\\s+]+","g"),hi=/\window\./gm;function di(e,t,i){if("function"==typeof e)return e;var n=function(e,t,i,n){var s=0,o=[],r=e.match(/class="([^"]+|)\s{2}/g),a="";r&&r.forEach((function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)}));return e.replace(Vt," ").replace(ii,"'$1'").replace(si,(function(e,r,a,l){var h=r.match($t);if(h){var d=h[1];if(Zt.test(r))r='";} '+r.replace(h[1],d.replace(ti,(function(e){return ci(e=e.trim(),!Xt.test(e)&&-1===o.indexOf(e),t,o,n)})))+'{ \n str = str + "';else if(Qt.test(r))r='"; '+r.replace(h[1],d.replace(ni,(function(e){return fi(e,t,o,n)})))+'{ \n str = str + "';else if(Kt.test(r)){var c=h[1].split(" of ");r='"; '+r.replace(h[1],(function(e){return o.push(c[0]),o.push(c[0]+"Index"),"var i"+(s+=1)+"=0; i"+s+" < "+ci(c[1],!0,t,o,n)+".length; i"+s+"++"}))+"{ \n "+c[0]+"= "+ci(c[1],!0,t,o,n)+"[i"+s+"]; \n var "+c[0]+"Index=i"+s+'; \n str = str + "'}else{var p=r.split("("),u=i&&i.hasOwnProperty(p[0])?"this.":"global";u=/\./.test(p[0])?"":u;var f=h[1].split(",");0===h[1].length||/data/.test(f[0])||/window./.test(f[0])||(h[1]="global"===u?t+"."+h[1]:h[1]);if(hi.test(r)&&/\]\./gm.test(r)||/@|\$|#/gm.test(r)){/@|\$|#|\]\./gm.test(r)&&(r='"+ '+("global"===u?"":u)+r.replace(h[1],d.replace(li,(function(e){return fi(e,t,o,n)})))+'+ "')}else r='" + '+("global"===u?"":u)+r.replace(d,ci(h[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==u,t,o,n))+'+"'}}else Gt.test(r)?r='"; '+r.replace(Gt,'} else { \n str = str + "'):r.match(Jt)?r=r.replace(Jt,'"; \n } \n str = str + "'):/@|#|\$/gm.test(r)?(r.match(ri)&&(r=ui(r)),r='"+'+pi(r,-1===o.indexOf(r),t,o)+'"]+"'):r=r.match(ri)?'"+'+pi(r=ui(r),-1===o.indexOf(r),t,o)+'"]+"':""!==r?'"+'+ci(r.replace(/,/gi,"+"+t+"."),-1===o.indexOf(r),t,o,n)+'+"':"${}";return r}))}(e,"data",t,i);return new Function("data",'var str="'+n+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-■\\s]+)['])/g);\n        var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-■\\s]+)['])/g);\n        if(str.match(valueRegEx)){\n            var check = str.match(valueRegEx);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(valueRegEx)[i].split('value=')[1];\n                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                str1 = str1.replace(check1, change);\n            }\n            str = str.replace(str, str1);\n        }\n        else if (str.match(/(?:href='')/) === null) {\n            if(str.match(hrefRegex)) {\n                var check = str.match(hrefRegex);\n                var str1 = str;\n                for (var i=0; i < check.length; i++) {\n                    var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                    if (check1) {\n                        var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                        change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                        str1 = str1.replace(check1, change);\n                    }\n                }\n                str = str.replace(str, str1);\n            }\n        }\n         return str;").bind(t)}function ci(e,t,i,n,s){return!t||ei.test(e)||-1!==n.indexOf(e.split(".")[0])||s||"true"===e||"false"===e?e:i+"."+e}function pi(e,t,i,n){return t&&!ei.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function ui(e){return e=e.match(ai)?e:e.replace(ri,"\\\\")}function fi(e,t,i,n){e=e.trim();if(/\window\./gm.test(e))return e;var s=/'|"/gm;return/@|\$|#/gm.test(e)&&(e=pi(e,-1===i.indexOf(e),t,i)+'"]'),oi.test(e)?function(e,t,i,n){return!t||ei.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!s.test(e)&&-1===i.indexOf(e),t,i):ci(e,!s.test(e)&&-1===i.indexOf(e),t,i,n)}var gi=/^[\n\r.]+<tr|^<tr/,mi=/^[\n\r.]+<svg|^<path|^<g/,vi={};function bi(){return"-"+Math.random().toString(36).substr(2,5)}var yi={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t,i){return void 0===t&&(t={}),di(e,t)},e}())).compile},Ci=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],wi=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Mi=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","oncanplay","oncanplaythrough","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeypress","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onstart","onpropertychange","oncopy","ontoggle","onpointerout","onpointermove","onpointerleave","onpointerenter","onpointerrawupdate","onpointerover","onbeforecopy","onbeforecut","onbeforeinput"],Si=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:Ci,attributes:wi}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace(/&amp;/g,"&")},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[parseInt(t.toString(),10)].attributes,n=0;n<i.length;n++)this.wrapElement.children[parseInt(t.toString(),10)].removeAttribute(i[parseInt(n.toString(),10)].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){ve(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+Mi.join("],[")+"]");e.length>0&&e.forEach((function(e){Mi.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,i){var n=e.wrapElement.querySelectorAll(t.selector);n.length>0&&n.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}();return e.blazorCultureFormats=Z,e.Ajax=K,e.Fetch=J,e.Animation=Ke,e.rippleEffect=function(t,i,n){var s=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(i);return!1===s.rippleFlag||void 0===s.rippleFlag&&!e.isRippleEnabled?function(){}:(t.setAttribute("data-ripple","true"),he.add(t,"mousedown",Je,{parent:t,rippleOptions:s}),he.add(t,"mouseup",$e,{parent:t,rippleOptions:s,done:n}),he.add(t,"mouseleave",et,{parent:t,rippleOptions:s}),le.isPointer&&he.add(t,"transitionend",et,{parent:t,rippleOptions:s}),function(){t.removeAttribute("data-ripple"),he.remove(t,"mousedown",Je),he.remove(t,"mouseup",$e),he.remove(t,"mouseleave",et),he.remove(t,"transitionend",et)})},e.enableRipple=function(t){return e.isRippleEnabled=t,e.isRippleEnabled},e.setGlobalAnimation=function(t){e.animationMode=t},e.Base=Oe,e.getComponent=Ee,e.removeChildInstance=function(e){for(var t=[].slice.call(e.getElementsByClassName("e-control")),i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)].classList[1].split("e-")[1],s=Ee(t[parseInt(i.toString(),10)],n);g(s)||s.destroy()}},e.Browser=le,e.enableVersionBasedPersistence=function(t){e.versionBasedStatePersistence=t},e.Component=Mt,e.ChildProperty=st,e.Position=jt,e.Draggable=At,e.Droppable=Pt,e.EventHandler=he,e.onIntlChange=_,e.cldrData=W,e.Internationalization=X,e.setCulture=function(t){e.defaultCulture=t,_.notify("notifyExternalChange",{locale:e.defaultCulture})},e.setCurrencyCode=function(t){e.defaultCurrencyCode=t,_.notify("notifyExternalChange",{currencyCode:e.defaultCurrencyCode})},e.loadCldr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=e;i<n.length;i++){var s=n[i];u(W,s,{},!0)}},e.enableRtl=function(t){void 0===t&&(t=!0),e.rightToLeft=t,_.notify("notifyExternalChange",{enableRtl:e.rightToLeft})},e.getNumericObject=function(t,i){var n=e.IntlBase.getDependables(W,t,"",!0)[V[0]],s=e.IntlBase.getDependables(W,t,"")[V[1]],o=a("defaultNumberingSystem",n),r=y()?a("numberSymbols",n):a("symbols-numberSystem-"+o,n),l=e.IntlBase.getSymbolPattern(i||"decimal",o,n,!1);return u(r,e.IntlBase.getFormatData(l,!0,"",!0),{dateSeparator:e.IntlBase.getDateSeparator(s)})},e.getNumberDependable=function(t,i){var n=e.IntlBase.getDependables(W,t,"",!0);return e.IntlBase.getCurrencySymbol(n.numericObject,i)},e.getDefaultDateObject=function(t){return e.IntlBase.getDependables(W,"",t,!1)[V[1]]},e.KeyboardEvents=Ut,e.L10n=Ht,e.ModuleLoader=nt,e.Property=Ye,e.Complex=qe,e.ComplexFactory=function(e){return function(t,i){var n={set:Pe({},i,e),get:ke({},i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),Ve(t,i,"complexProp",{},e)}},e.Collection=function(e,t){return function(i,n){var s={set:Be(e,n,t),get:Le(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,s),Ve(i,n,"colProp",e,t)}},e.CollectionFactory=function(e){return function(t,i){var n={set:Re([],i,e),get:Ue([],i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),Ve(t,i,"colProp",{},e)}},e.Event=_e,e.NotifyPropertyChanges=We,e.CreateBuilder=function(e){var t=function(e){return this.element=e,this};return function(i){return t.prototype.hasOwnProperty("create")||((t.prototype=function e(t){if(g(t.prototype.builderObject)){t.prototype.builderObject={properties:{},propCollections:[],add:function(){this.isPropertyArray=!0,this.propCollections.push(u({},this.properties,{}))}};for(var i=/complex/,n=0,s=Object.keys(t.prototype.propList);n<s.length;n++)for(var o=s[n],r=function(n){i.test(o)?t.prototype.builderObject[n.propertyName]=function(t){var i,s={};return p(s,e(n.type)),t(s),i=s.isPropertyArray?s.propCollections:u({},s.properties,{}),this.properties[n.propertyName]=i,s.properties={},s.propCollections=[],s.isPropertyArray=!1,this}:t.prototype.builderObject[n.propertyName]=function(e){return this.properties[n.propertyName]=e,this}},a=0,l=t.prototype.propList[""+o];a<l.length;a++){r(l[a])}}return t.prototype.builderObject}(e)).create=function(){var t=u({},{},this.properties);return this.properties={},new e(t,this.element)}),new t(i)}},e.SwipeSettings=qt,e.Touch=Wt,e.blazorTemplates=vi,e.getRandomId=bi,e.compile=function(e,t,i){var n=yi.compile(e,t,i);return function(e,t,i,s,o,r,a,l){var h=n(e,t,i,a,l);if(y()&&!o){var d=s+bi();if(vi[""+s]||(vi[""+s]=[]),f(r))e.BlazorTemplateId=d,vi[""+s].push(e);else for(var c=0,p=Object.keys(vi[""+s][parseInt(r.toString(),10)]);c<p.length;c++){var u=p[c];"BlazorTemplateId"!==u&&e[""+u]&&(vi[""+s][parseInt(r.toString(),10)][""+u]=e[""+u]),"BlazorTemplateId"===u&&(d=vi[""+s][parseInt(r.toString(),10)][""+u])}return"rowTemplate"===i?[ce("tr",{id:d,className:"e-blazor-template"})]:[ce("div",{id:d,className:"e-blazor-template"})]}return"string"==typeof h?mi.test(h)?ce("svg",{innerHTML:h}).childNodes:ce(gi.test(h)?"table":"div",{innerHTML:h}).childNodes:h}},e.updateBlazorTemplate=function(e,t,i,n,s){if(y()){window.sfBlazor.updateTemplate(t,vi[""+e],e,i,s),!1!==n&&(vi[""+e]=[])}},e.resetBlazorTemplate=function(e,t,i){var n=document.getElementById(e);if(n)for(var s=n.getElementsByClassName("blazor-inner-template"),o=0;o<s.length;o++){var r=" ";r=f(i)?s[parseInt(o.toString(),10)].getAttribute("data-templateId"):s[parseInt(i.toString(),10)].getAttribute("data-templateId");var a=document.getElementById(r);if(a)for(var l=a.childNodes.length,h=0;h<l;h++)f(i)?s[parseInt(o.toString(),10)].appendChild(a.childNodes[0]):(s[parseInt(i.toString(),10)].appendChild(a.childNodes[0]),o=s.length)}},e.setTemplateEngine=function(e){yi.compile=e.compile},e.getTemplateEngine=function(){return yi.compile},e.initializeCSPTemplate=function(e,t){var i;return e.prototype.CSPTemplate=!0,f(t)?i=e:(i=e.bind(t)).prototype=Object.create(e.prototype),i},e.disableBlazorMode=function(){s=!1},e.createInstance=o,e.setImmediate=r,e.getValue=a,e.setValue=l,e.deleteObject=h,e.containerObject=d,e.isObject=c,e.getEnumValue=function(e,t){return e[t]},e.merge=p,e.extend=u,e.isNullOrUndefined=f,e.isUndefined=g,e.getUniqueID=function(e){return e+"_"+n++},e.debounce=m,e.queryParams=function(e){for(var t=[],i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];t.push(encodeURIComponent(s)+"="+encodeURIComponent(""+e[""+s]))}return t.join("&")},e.isObjectArray=function(e){var t=Object.prototype.toString;return"[object Array]"===t.call(e)&&"[object Object]"===t.call(e[0])},e.compareElementParent=v,e.throwError=b,e.print=function(e,t){var i=document.createElement("div"),n=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),s=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(s.length)for(var o=0,r=s.length;o<r;o++)n.push(s[parseInt(o.toString(),10)]);var a="";f(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),i.appendChild(e.cloneNode(!0));var l=0;for(r=n.length;l<r;l++)a+=n[parseInt(l.toString(),10)].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+a+"</head><body>"+i.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var h=setInterval((function(){t.ready&&(t.print(),t.close(),clearInterval(h))}),500);return t},e.formatUnit=function(e){var t=e+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"},e.enableBlazorMode=function(){s=!0},e.isBlazor=y,e.getElement=function(e){return e instanceof Node||!y()||f(e.xPath)?e:document.evaluate(e.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},e.getInstance=function(e,i){var n="string"==typeof e?document.querySelector(e):e;if(n[""+t])for(var s=0,o=n[""+t];s<o.length;s++){var r=o[s];if(r instanceof i)return r}return null},e.addInstance=function(e,i){var n="string"==typeof e?document.querySelector(e):e;n[""+t]?n[""+t].push(i):n[""+t]=[i]},e.uniqueID=C,e.createElement=ce,e.addClass=pe,e.removeClass=ue,e.isVisible=ge,e.prepend=function(e,t,i){for(var n=document.createDocumentFragment(),s=0,o=e;s<o.length;s++){var r=o[s];n.appendChild(r)}return t.insertBefore(n,t.firstElementChild),i&&me(t),e},e.append=function(e,t,i){var n=document.createDocumentFragment();if(e instanceof NodeList)for(;e.length>0;)n.appendChild(e[0]);else for(var s=0,o=e;s<o.length;s++){var r=o[s];n.appendChild(r)}return t.appendChild(n),i&&me(t),e},e.detach=ve,e.remove=function(e){var t=e.parentNode;he.clearEvents(e),t.removeChild(e)},e.attributes=be,e.select=ye,e.selectAll=Ce,e.closest=Me,e.siblings=function(e){for(var t=[],i=0,n=Array.prototype.slice.call(e.parentNode.childNodes);i<n.length;i++){var s=n[i];s.nodeType===Node.ELEMENT_NODE&&e!==s&&t.push(s)}return t},e.getAttributeOrDefault=function(e,t,i){var n,s=c(e);return f(n=s?a("attributes."+t,e):e.getAttribute(t))&&i&&(s?e.attributes[""+t]=i:e.setAttribute(t,i.toString()),n=i),n},e.setStyleAttribute=Se,e.classList=function(e,t,i){pe([e],t),ue([e],i)},e.matches=xe,e.includeInnerHTML=function(e,t){e.innerHTML=t},e.containsClass=function(e,t){return c(e)?new RegExp("\\b"+t+"\\b","i").test(e.attributes.className):e.classList.contains(t)},e.cloneNode=function(e,t){return c(e)?t?u({},{},e,!0):void 0:e.cloneNode(t)},e.Observer=q,e.SanitizeHtmlHelper=Si,e.componentList=ot,e.registerLicense=dt,e.validateLicense=ut,e.getVersion=function(){return lt.version},e.createLicenseOverlay=ft,e}({})},"./modules/navigationsbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};window.sf.navigations=window.sf.base.extend({},window.sf.navigations,function(e){"use strict";var t,n,s=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),o=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},r=function(e){function t(t,i){return e.call(this,t,i)||this}return s(t,e),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=sf.base.Browser.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=sf.base.getUniqueID("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,s=[].slice.call(i.children);n<s.length;n++){var o=s[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device"),t.classList.remove("e-rtl");var i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),n=sf.base.selectAll(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){sf.base.detach(e)}));for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++){var r=o[s];t.appendChild(r)}this.uniqueId&&this.element.removeAttribute("id"),sf.base.detach(this.scrollEle),i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1])),sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),s=this.createElement("div",{id:t.concat("_right"),className:n}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});s.appendChild(o);var r=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&s.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(s),e.insertBefore(r,e.firstChild),this.eventBinding([s])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n={role:"button",id:t.concat("_right"),"aria-label":"Scroll right"},s=this.createElement("div",{className:i,attrs:n});s.setAttribute("aria-disabled","false");var o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),r="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),a={role:"button",id:t.concat("_left"),"aria-label":"Scroll left"},l=this.createElement("div",{className:r+" e-overlay",attrs:a});l.setAttribute("aria-disabled","true");var h=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});l.appendChild(h),s.appendChild(o),e.appendChild(s),e.insertBefore(l,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([s,l])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new sf.base.Touch(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),sf.base.EventHandler.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=this.element,s=t.classList;s.contains("e-scroll-nav")&&(s=t.querySelector(".e-nav-arrow").classList),this.contains(n,"e-rtl")&&this.browserCheck&&(e=-e),!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?s.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):s.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5;!function s(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?i.scrollLeft+=t*o:"Right"===e.swipeDirection&&(i.scrollLeft-=t*o),n-=.5,window.requestAnimationFrame(s))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetWidth}));!function i(){var s,o;n.contains(n.element,"e-rtl")&&n.browserCheck?(s=-e,o=-10):(s=e,o=10),s<10?window.cancelAnimationFrame(o):(n.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceX;this.ieCheck&&this.contains(this.element,"e-rtl")&&(i=-i),"Left"===e.scrollDirection?t.scrollLeft=t.scrollLeft+i:"Right"===e.scrollDirection&&(t.scrollLeft=t.scrollLeft-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(e)?t:e).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(e)?sf.base.classList(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):sf.base.classList(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e&&t&&(e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,n=(this.element,this.element.querySelector(".e-scroll-left-nav")),s=this.element.querySelector(".e-scroll-right-nav"),o=this.element.querySelector(".e-scroll-left-overlay"),r=this.element.querySelector(".e-scroll-right-overlay"),a=t.scrollLeft;if(a<=0&&(a=-a),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(o=this.element.querySelector(".e-scroll-right-overlay"),r=this.element.querySelector(".e-scroll-left-overlay")),o.style.width=a<40?a+"px":"40px",t.scrollWidth-Math.ceil(i+a)<40?r.style.width=t.scrollWidth-Math.ceil(i+a)+"px":r.style.width="40px"),0===a)this.arrowDisabling(n,s);else if(Math.ceil(i+a+.1)>=t.scrollWidth)this.arrowDisabling(s,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},o([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=o([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},h=function(e){function t(t,i){return e.call(this,t,i)||this}return a(t,e),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=sf.base.Browser.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=sf.base.getUniqueID("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),sf.base.EventHandler.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=sf.base.createElement("div",{className:"e-vscroll-content"}),t=sf.base.createElement("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,s=[].slice.call(i.children);n<s.length;n++){var o=s[n];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflow="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",sf.base.removeClass([this.element],["e-vscroll","e-scroll-device","e-rtl"]);var i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),n=sf.base.selectAll(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){sf.base.detach(e)}));for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++){var r=o[s];t.appendChild(r)}this.uniqueId&&this.element.removeAttribute("id"),sf.base.detach(this.scrollEle),i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1])),sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),s=sf.base.createElement("div",{id:t.concat("down"),className:n}),o=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});s.appendChild(o);var r=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&s.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(s),e.insertBefore(r,e.firstChild),this.eventBinding([s])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=sf.base.createElement("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var s=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),r=sf.base.createElement("div",{id:t.concat("_up"),className:o+" e-overlay"});r.setAttribute("aria-disabled","true");var a=sf.base.createElement("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});r.appendChild(a),n.appendChild(s),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(r,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),r.classList.add("e-ie-align")),this.eventBinding([n,r])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new sf.base.Touch(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),sf.base.EventHandler.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5;!function s(){var o=Math.sin(n);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?i.scrollTop+=t*o:"Down"===e.swipeDirection&&(i.scrollTop-=t*o),n-=.02,window.requestAnimationFrame(s))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetHeight}));!function i(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceY;"Up"===e.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===e.scrollDirection&&(t.scrollTop=t.scrollTop-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(e)?t:e).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(e)?sf.base.classList(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):sf.base.classList(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,n=this.element.querySelector(".e-scroll-up-nav"),s=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),r=this.element.querySelector(".e-scroll-down-overlay"),a=t.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(o.style.height=a<40?a+"px":"40px",t.scrollHeight-Math.ceil(i+a)<40?r.style.height=t.scrollHeight-Math.ceil(i+a)+"px":r.style.height="40px"),0===a)this.arrowDisabling(n,s);else if(Math.ceil(i+a+.1)>=t.scrollHeight)this.arrowDisabling(s,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},l([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=l([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);function d(e,t,i,n,s,o){var a=e("div",{className:"e-menu-"+n});return t.appendChild(a),a.appendChild(i),o?(a.style.overflow="hidden",a.style.height=o+"px"):(a.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden"),"vscroll"===n?new h({enableRtl:s},a).scrollStep=sf.base.select(".e-"+n+"-bar",t).offsetHeight/2:new r({enableRtl:s},a).scrollStep=sf.base.select(".e-"+n+"-bar",t).offsetWidth,a}return e.HScroll=r,e.VScroll=h,e.addScrolling=function(e,t,i,n,s,o){var r,a,l=t.parentElement;if("vscroll"===n?(r=o||t.getBoundingClientRect().height,a=i.getBoundingClientRect().height):(r=t.getBoundingClientRect().width,a=i.getBoundingClientRect().width),r<a)return d(e,t,i,n,s,o);if(l){var h=l.getBoundingClientRect().width;return h<r&&"hscroll"===n?(a=h,t.style.maxWidth=h+"px",d(e,t,i,n,s,o)):i}return i},e.destroyScroll=function(e,t,i){if(e){var n=sf.base.select(".e-menu-parent",t);n?i&&i!==n||(e.destroy(),t.parentElement.appendChild(n),sf.base.detach(t)):(e.destroy(),sf.base.detach(t))}},e}({}))},"./modules/popup.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.popups=sf.base.extend({},sf.popups,function(e){"use strict";var t,n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),s([sf.base.Property("left")],t.prototype,"X",void 0),s([sf.base.Property("top")],t.prototype,"Y",void 0),t}(sf.base.ChildProperty),r="e-popup",a="e-rtl",l="e-popup-open",h="e-popup-close",d=function(e){function t(t,i){return e.call(this,i,t)||this}return n(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(e.width)});break;case"height":sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(e.height)});break;case"zIndex":sf.base.setStyleAttribute(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var s=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+s).toString()+"px";break;case"offsetY":var o=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(r,a,l,h),this.content=null,this.relateTo=null,e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(r);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=sf.base.formatUnit(this.width)),"auto"!==this.height&&(e.height=sf.base.formatUnit(this.height)),sf.base.setStyleAttribute(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];sf.base.EventHandler.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||sf.base.isNullOrUndefined(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?sf.base.isNullOrUndefined(this.element)||this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(sf.base.isNullOrUndefined(this.checkGetBoundingClientRect(t))){var n=window,s={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},o=sf.popups.calculatePosition(e),r={top:o.top,left:o.left,right:o.left+i.width,bottom:o.top+i.height},a={top:s.bottom-r.top,left:s.right-r.left,bottom:r.bottom-s.top,right:r.right-s.left};return a.top>0&&a.left>0&&a.right>0&&a.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top||i.bottom>l.bottom||i.right>l.right||i.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(a):this.element.classList.remove(a)},t.prototype.setContent=function(){if(!sf.base.isNullOrUndefined(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),t=this.content.props;e.classList.contains("e-dropdown-btn")&&!sf.base.isNullOrUndefined(t)||this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout((function(){e.refreshPosition()}),200)},t.prototype.refreshPosition=function(e,t){sf.base.isNullOrUndefined(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var n=void 0,s=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=s,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){var o=this.element.clientHeight;s=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY,o),this.element.style.display=s}else e={left:0,top:0};sf.base.isNullOrUndefined(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return null}},t.prototype.getAnchorPosition=function(e,t,i,n,s,o){void 0===o&&(o=0);var r=this.checkGetBoundingClientRect(t),a=this.checkGetBoundingClientRect(e);if(sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(a))return null;var l=e,h={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?h=sf.popups.calculatePosition(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==l.tagName&&(t=t.parentElement),h=sf.popups.calculateRelativeBasedPosition(l,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?h.left+=window.innerWidth/2-r.width/2:"container"===this.targetType?h.left+=a.width/2-r.width/2:h.left+=a.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?h.left+=window.innerWidth-r.width:"container"===this.targetType?h.left+=a.width-r.width:h.left+=a.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?h.top+=window.innerHeight/2-r.height/2:"container"===this.targetType?h.top+=a.height/2-r.height/2:h.top+=a.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?h.top+=window.innerHeight-r.height:"container"!==this.targetType||t.classList.contains("e-dialog")?"container"===this.targetType&&t.classList.contains("e-dialog")?h.top+=a.height-o:h.top+=a.height:h.top+=a.height-r.height}return h.left+=n,h.top+=s,h},t.prototype.callFlip=function(e){var t=this.getRelateToElement();sf.popups.flip(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==sf.popups.isCollide(this.element,this.viewPortElement).length)if(sf.base.isNullOrUndefined(this.viewPortElement)){var t=sf.popups.fit(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var n=this;if(this.getRelateToElement().classList.contains("e-filemanager")&&(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0]),this.wireEvents(),!sf.base.isNullOrUndefined(this.fmDialogContainer)&&sf.base.Browser.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!sf.base.isNullOrUndefined(t)){var s=sf.base.isNullOrUndefined(t)?this.element:t;this.zIndex=p(s),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex})}e=sf.base.isNullOrUndefined(e)||"object"!==i(e)?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(sf.base.removeClass([this.element],h),sf.base.addClass([this.element],l),this.checkCollision(),sf.base.removeClass([this.element],l),sf.base.addClass([this.element],h)),sf.base.isNullOrUndefined(e)?(sf.base.removeClass([this.element],h),sf.base.addClass([this.element],l),this.trigger("open")):(e.begin=function(){n.isDestroyed||(sf.base.removeClass([n.element],h),sf.base.addClass([n.element],l))},e.end=function(){n.isDestroyed||n.trigger("open")},new sf.base.Animation(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=sf.base.isNullOrUndefined(e)||"object"!==i(e)?this.hideAnimation:e,sf.base.isNullOrUndefined(e)?(sf.base.removeClass([this.element],l),sf.base.addClass([this.element],h),this.trigger("close")):(e.end=function(){t.isDestroyed||(sf.base.removeClass([t.element],l),sf.base.addClass([t.element],h),t.trigger("close"))},new sf.base.Animation(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),c(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&!sf.base.isNullOrUndefined(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&"hidden"!==getComputedStyle(this.element.offsetParent).overflow&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?sf.base.formatUnit(window.scrollY-parseInt(this.element.style.top,10)):sf.base.formatUnit(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,!sf.base.isNullOrUndefined(this.element)&&sf.base.isNullOrUndefined(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},s([sf.base.Property("auto")],t.prototype,"height",void 0),s([sf.base.Property("auto")],t.prototype,"width",void 0),s([sf.base.Property(null)],t.prototype,"content",void 0),s([sf.base.Property("container")],t.prototype,"targetType",void 0),s([sf.base.Property(null)],t.prototype,"viewPortElement",void 0),s([sf.base.Property({X:"none",Y:"none"})],t.prototype,"collision",void 0),s([sf.base.Property("")],t.prototype,"relateTo",void 0),s([sf.base.Complex({},o)],t.prototype,"position",void 0),s([sf.base.Property(0)],t.prototype,"offsetX",void 0),s([sf.base.Property(0)],t.prototype,"offsetY",void 0),s([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),s([sf.base.Property(!1)],t.prototype,"enableRtl",void 0),s([sf.base.Property("reposition")],t.prototype,"actionOnScroll",void 0),s([sf.base.Property(null)],t.prototype,"showAnimation",void 0),s([sf.base.Property(null)],t.prototype,"hideAnimation",void 0),s([sf.base.Event()],t.prototype,"open",void 0),s([sf.base.Event()],t.prototype,"close",void 0),s([sf.base.Event()],t.prototype,"targetExitViewport",void 0),t=s([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);function c(e,t){for(var i=getComputedStyle(e),n=[],s=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var r=getComputedStyle(o);"absolute"===i.position&&"static"===r.position||!s.test(r.overflow+r.overflowY+r.overflowX)||n.push(o),o=o.parentElement}return t||n.push(document),n}function p(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==s&&i.push(n),t=t.parentElement}for(var o=[],r=0;r<document.body.children.length;r++)if(!e.isEqualNode(document.body.children[r])){n=document.defaultView.getComputedStyle(document.body.children[r],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(document.body.children[r],null).getPropertyValue("position");"auto"!==n&&"static"!==s&&o.push(n)}o.push("999");var a=[];if(!sf.base.isNullOrUndefined(e.parentElement)&&"BODY"!==e.parentElement.tagName){var l=[].slice.call(e.parentElement.children);for(r=0;r<l.length;r++)if(!e.isEqualNode(l[r])){n=document.defaultView.getComputedStyle(l[r],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(l[r],null).getPropertyValue("position");"auto"!==n&&"static"!==s&&a.push(n)}}var h=i.concat(o,a),d=Math.max.apply(Math,h)+1;return d>2147483647?2147483647:d}return e.PositionData=o,e.Popup=d,e.getScrollableParent=c,e.getZindexPartial=p,e.getMaxZindex=function(e){void 0===e&&(e=["*"]);for(var t=[],i=0;i<e.length;i++)for(var n=document.getElementsByTagName(e[i]),s=0;s<n.length;s++){var o=document.defaultView.getComputedStyle(n[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(n[s],null).getPropertyValue("position");"auto"!==o&&"static"!==r&&t.push(o)}var a=Math.max.apply(Math,t)+1;return a>2147483647?2147483647:a},e}({}))},"./modules/popupsbase.js":function(e,t,i){window.sf=window.sf||{};window.sf.popups=window.sf.base.extend({},window.sf.popups,function(e){"use strict";var t,i,n,s,o,r,a=!1;function l(e,o,r,l,c){if(i=void 0,i=c,a=!!l,!e)return{left:0,top:0};o||(o="left"),r||(r="top"),s=e.ownerDocument,n=e;return function(e,i,s){switch(t=n.getBoundingClientRect(),i+e){case"topcenter":h(b(),s),d(g(),s);break;case"topright":h(v(),s),d(g(),s);break;case"centercenter":h(b(),s),d(f(),s);break;case"centerright":h(v(),s),d(f(),s);break;case"centerleft":h(m(),s),d(f(),s);break;case"bottomcenter":h(b(),s),d(u(),s);break;case"bottomright":h(v(),s),d(u(),s);break;case"bottomleft":h(m(),s),d(u(),s);break;default:case"topleft":h(m(),s),d(g(),s)}return n=null,s}(o.toLowerCase(),r.toLowerCase(),{left:0,top:0})}function h(e,t){t.left=e}function d(e,t){t.top=e}function c(){return s.documentElement.scrollTop||s.body.scrollTop}function p(){return s.documentElement.scrollLeft||s.body.scrollLeft}function u(){return a?t.bottom:t.bottom+c()}function f(){return g()+t.height/2}function g(){return a?t.top:t.top+c()}function m(){return t.left+p()}function v(){var e=n&&(n.classList.contains("e-date-wrapper")||n.classList.contains("e-datetime-wrapper")||n.classList.contains("e-date-range-wrapper")||n.classList.contains("e-multiselect"))?i?i.width:0:i&&t.width>=i.width?i.width:0;return t.right+p()-e}function b(){return m()+t.width/2}function y(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function C(e,t){var i=!1,n=!1;return e-j()<E()&&(i=!0),t>I()&&(n=!0),{leftSide:i,rightSide:n}}function w(e,t){var i=!1,n=!1;return e-D()<O()&&(i=!0),t>T()&&(n=!0),{topSide:i,bottomSide:n}}function M(){return r.getBoundingClientRect().width}function S(){return r.getBoundingClientRect().height}function x(){return r.getBoundingClientRect().left}function N(){return r.getBoundingClientRect().top}function O(){return r?N():0}function E(){return r?x():0}function I(){return r?j()+x()+M():j()+z()}function T(){return r?D()+N()+S():D()+A()}function D(){return o.documentElement.scrollTop||o.body.scrollTop}function j(){return o.documentElement.scrollLeft||o.body.scrollLeft}function A(){return window.innerHeight}function z(){var e=window.innerWidth,t=document.documentElement.getBoundingClientRect();return e-(e-(sf.base.isNullOrUndefined(document.documentElement)?0:t.width))}var k,P,L,B,R,U,H,F,Y=["north-west","north","north-east","west","east","south-west","south","south-east"],q=["e-restrict-left"],_=["north","west","east","south"],W=0,V=0,X=0,Q=0,Z=0,G=0,K=null,J=null,$=null,ee=!0,te=0,ie=!0;function ne(e){he();var t=sf.base.createElement("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+e),"south"===e&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===e&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===e&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===e&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),k.appendChild(t)}function se(e){var t;return sf.base.isNullOrUndefined(e)||(t="string"==typeof e?document.querySelector(e):e),t}function oe(e){sf.base.isNullOrUndefined(e)&&(e=this);for(var t=k.querySelectorAll(".e-resize-handle"),i=0;i<t.length;i++){P=t[i],sf.base.EventHandler.add(P,"mousedown",ae,e);var n="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.add(P,n,de,e)}var s=k.querySelectorAll(".e-dialog-border-resize");if(!sf.base.isNullOrUndefined(s))for(i=0;i<s.length;i++){P=s[i],sf.base.EventHandler.add(P,"mousedown",ae,e);n="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.add(P,n,de,e)}}function re(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function ae(e){if(e.preventDefault(),k=e.target.parentElement,he(),Z=e.pageX,G=e.pageY,e.target.classList.add("e-focused-handle"),sf.base.isNullOrUndefined(K)||!0!==K(e,this)){this.targetEle&&k&&k.querySelector(".e-dlg-resizable")&&(H="body"===this.target?null:this.targetEle,U=this.targetEle.clientWidth,B=this.targetEle.clientHeight);var t=sf.base.isNullOrUndefined(H)?document:H;sf.base.EventHandler.add(t,"mousemove",ce,this),sf.base.EventHandler.add(document,"mouseup",le,this);for(var i=0;i<q.length;i++)ee=!k.classList.contains(q[i])}}function le(e){var t="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",i="msie"===sf.base.Browser.info.name?"pointerup":"touchend",n=sf.base.isNullOrUndefined(H)?document:H,s="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.remove(n,"mousemove",ce),sf.base.EventHandler.remove(n,t,ce),sf.base.EventHandler.remove(n,s,ce),sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle"),sf.base.isNullOrUndefined($)||$(e,this),sf.base.EventHandler.remove(document,"mouseup",le),sf.base.EventHandler.remove(document,i,le)}function he(){W=parseFloat(getComputedStyle(k,null).getPropertyValue("width").replace("px","")),V=parseFloat(getComputedStyle(k,null).getPropertyValue("height").replace("px","")),X=k.getBoundingClientRect().left,Q=k.getBoundingClientRect().top}function de(e){k=e.target.parentElement,he();var t=k.classList.contains("e-dialog");(e.target.classList.contains("e-resize-handle")||e.target.classList.contains("e-dialog-border-resize"))&&t&&e.target.classList.add("e-focused-handle");var i=e.touches?e.changedTouches[0]:e;if(Z=i.pageX,G=i.pageY,sf.base.isNullOrUndefined(K)||!0!==K(e,this)){var n="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",s="msie"===sf.base.Browser.info.name?"pointerup":"touchend",o=sf.base.isNullOrUndefined(H)?document:H;sf.base.EventHandler.add(o,n,ce,this),sf.base.EventHandler.add(document,s,le,this)}}function ce(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains("e-focused-handle")?P=e.target:sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||(P=document.body.querySelector(".e-focused-handle")),!sf.base.isNullOrUndefined(P)){for(var t="",i=0;i<Y.length;i++)P.classList.contains("e-"+Y[i])&&(t=Y[i]);switch(sf.base.isNullOrUndefined(J)||J(e,this),t){case"south":ue(e);break;case"north":fe(e);break;case"west":ge(e);break;case"east":me(e);break;case"south-east":ue(e),me(e);break;case"south-west":ue(e),ge(e);break;case"north-east":fe(e),me(e);break;case"north-west":fe(e),ge(e)}}}function pe(e){return e.getBoundingClientRect()}function ue(e){var t,i=document.documentElement.clientHeight,n=!1,s=(e.touches?e.changedTouches[0]:e).pageY,o=pe(k);sf.base.isNullOrUndefined(H)||(t=pe(H)),sf.base.isNullOrUndefined(H)?sf.base.isNullOrUndefined(H)&&(i-s>=0||o.top<0)&&(n=!0):n=!0;var r=V+(s-G);r=r>L?r:L;var a=0;sf.base.isNullOrUndefined(H)||(a=t.top);var l=sf.base.isNullOrUndefined(H)?0:H.offsetHeight-H.clientHeight,h=o.top-a-l/2;if(h=h<0?0:h,o.top>0&&h+r>B){if(n=!1,k.classList.contains("e-resize-viewport"))return;k.style.height=B-parseInt(h.toString(),10)+"px"}else{var d=0;if(n){o.top<0&&i+(o.height+o.top)>0&&r+(d=o.top)<=30&&(r=o.height-(o.height+o.top)+30),r+o.top>=B&&(k.style.height=o.height+(i-(o.height+o.top))+"px");var c=sf.base.isNullOrUndefined(H)?d:h;r>=L&&r+c<=B&&(k.style.height=r+"px")}}}function fe(e){var t,i=!1,n="mouse"===re(e.type)?e.pageY:e.touches[0].pageY,s=pe(k);sf.base.isNullOrUndefined(H)||(t=pe(H)),(!sf.base.isNullOrUndefined(H)&&s.top-t.top>0||sf.base.isNullOrUndefined(H)&&n>0)&&(i=!0);var o=V-(n-G);if(i&&o>=L&&o<=B){var r=0;sf.base.isNullOrUndefined(H)||(r=t.top);var a=Q-r+(n-G);a=a>0?a:1,k.style.height=o+"px",k.style.top=a+"px"}}function ge(e){var t,i=document.documentElement.clientWidth,n=!1;sf.base.isNullOrUndefined(H)||(t=pe(H));var s="mouse"===re(e.type)?e.pageX:e.touches[0].pageX,o=pe(k),r=sf.base.isNullOrUndefined(H)?0:H.offsetWidth-H.clientWidth,a=sf.base.isNullOrUndefined(H)?0:t.left,l=sf.base.isNullOrUndefined(H)?0:t.width;sf.base.isNullOrUndefined(F)&&(sf.base.isNullOrUndefined(H)?F=i:(F=o.left-a-r/2+o.width,F+=l-r-F)),(!sf.base.isNullOrUndefined(H)&&Math.floor(o.left-t.left+o.width+(t.right-o.right))-r<=U||sf.base.isNullOrUndefined(H)&&s>=0)&&(n=!0);var h=W-(s-Z);if(ee&&(h=h>F?F:h),n&&h>=R&&h<=U){var d=0;sf.base.isNullOrUndefined(H)||(d=t.left);var c=X-d+(s-Z);c=c>0?c:1,h!==te&&ie&&(k.style.width=h+"px"),ee&&(k.style.left=c+"px",ie=1!==c)}te=h}function me(e){var t,i=document.documentElement.clientWidth,n=!1;sf.base.isNullOrUndefined(H)||(t=pe(H));var s=(e.touches?e.changedTouches[0]:e).pageX,o=pe(k);(!sf.base.isNullOrUndefined(H)&&(o.left-t.left+o.width<=U||o.right-t.left>=o.width)||sf.base.isNullOrUndefined(H)&&i-s>0)&&(n=!0);var r=W+(s-Z),a=0;if(sf.base.isNullOrUndefined(H)||(a=t.left),o.left-a+r>U){if(n=!1,k.classList.contains("e-resize-viewport"))return;k.style.width=U-(o.left-a)+"px"}n&&r>=R&&r<=U&&(k.style.width=r+"px")}return e.fit=function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var s=e.getBoundingClientRect();if(r=t,o=e.ownerDocument,n||(n=l(e,"left","top")),i.X){var a=r?M():z(),h=E(),d=I(),c=h-n.left,p=n.left+s.width-d;s.width>a?n.left=c>0&&p<=0?d-s.width:p>0&&c<=0?h:c>p?d-s.width:h:c>0?n.left+=c:p>0&&(n.left-=p)}if(i.Y){var u=r?S():A(),f=O(),g=T(),m=f-n.top,v=n.top+s.height-g;s.height>u?n.top=m>0&&v<=0?g-s.height:v>0&&m<=0?f:m>v?g-s.height:f:m>0?n.top+=m:v>0&&(n.top-=v)}return n},e.isCollide=function(e,t,i,n){void 0===t&&(t=null);var s=l(e,"left","top");i&&(s.left=i),n&&(s.top=n);var a=[];r=t,o=e.ownerDocument;var h=e.getBoundingClientRect(),d=s.top,c=s.left,p=s.left+h.width,u=w(d,s.top+h.height),f=C(c,p);return u.topSide&&a.push("top"),f.rightSide&&a.push("right"),f.leftSide&&a.push("left"),u.bottomSide&&a.push("bottom"),a},e.flip=function(e,t,i,n,s,a,h,d,c){if(void 0===h&&(h=null),void 0===d&&(d={X:!0,Y:!0}),t&&e&&s&&a&&(d.X||d.Y)){var p,u={TL:null,TR:null,BL:null,BR:null},f={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(e).display){var g=e.style.visibility;e.style.visibility="hidden",e.style.display="block",p=e.getBoundingClientRect(),e.style.removeProperty("display"),e.style.visibility=g}else p=e.getBoundingClientRect();var m={posX:s,posY:a,offsetX:i,offsetY:n,position:{left:0,top:0}};r=h,o=t.ownerDocument,function(e,t,i,n,s){i.position=l(e,i.posX,i.posY,n,s),t.TL=l(e,"left","top",n,s),t.TR=l(e,"right","top",n,s),t.BR=l(e,"left","bottom",n,s),t.BL=l(e,"right","bottom",n,s)}(t,u,m,c,p),y(f,m,p),d.X&&function e(t,i,n,s,o,r){var a=C(i.TL.left,i.TR.left);n.TL.left-j()<=E()&&(a.leftSide=!1);n.TR.left>I()&&(a.rightSide=!1);(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&("right"===s.posX?s.posX="left":s.posX="right",s.offsetX=s.offsetX+o.width,s.offsetX=-1*s.offsetX,s.position=l(t,s.posX,s.posY,!1),y(i,s,o),r&&e(t,i,n,s,o,!1))}(t,f,u,m,p,!0),d.Y&&u.TL.top>-1&&function e(t,i,n,s,o,r){var a=w(i.TL.top,i.BL.top);n.TL.top-D()<=O()&&(a.topSide=!1);n.BL.top>=T()&&t.getBoundingClientRect().bottom<window.innerHeight&&(a.bottomSide=!1);(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&("top"===s.posY?s.posY="bottom":s.posY="top",s.offsetY=s.offsetY+o.height,s.offsetY=-1*s.offsetY,s.position=l(t,s.posX,s.posY,!1,o),y(i,s,o),r&&e(t,i,n,s,o,!1))}(t,f,u,m,p,!0),function(e,t,i){var n=0,s=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var o=l(e.offsetParent,"left","top",!1,i);n=o.left,s=o.top}var r=1,a=1;if(e.offsetParent){var h=getComputedStyle(e.offsetParent).transform;if("none"!==h){var d=new DOMMatrix(h);r=d.a,a=d.d}}e.style.top=t.position.top/a+t.offsetY-s+"px",e.style.left=t.position.left/r+t.offsetX-n+"px"}(e,m,p)}},e.calculateRelativeBasedPosition=function(e,t){var i=!1,n={left:0,top:0},s=e;if(!e||!t)return n;for(sf.base.isNullOrUndefined(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=s;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n},e.calculatePosition=l,e.createResize=function(e){K=e.resizeBegin,J=e.resizing,$=e.resizeComplete,k=se(e.element),H=se(e.boundary);for(var t=e.direction.split(" "),i=0;i<t.length;i++)if(_.indexOf(t[i])>=0&&t[i])ne(t[i]);else if(""!==t[i].trim()){var n=sf.base.createElement("div",{className:"e-icons e-resize-handle e-"+t[i]});k.appendChild(n)}L=e.minHeight,R=e.minWidth,U=e.maxWidth,B=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?oe(e.proxy):oe()},e.setMinHeight=function(e){L=e},e.setMaxWidth=function(e){U=e},e.setMaxHeight=function(e){B=e},e.removeResize=function(){for(var e=k.querySelectorAll(".e-resize-handle"),t=0;t<e.length;t++)sf.base.detach(e[t]);var i=k.querySelectorAll(".e-dialog-border-resize");if(!sf.base.isNullOrUndefined(i))for(t=0;t<i.length;t++)sf.base.detach(i[t])},e}({}))},"./modules/sf-accordion.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Accordion=function(){"use strict";var e="e-acrdn-item",t="e-acrdn-header",i=function(){function i(e,t,i,n){window.sfBlazor=window.sfBlazor,this.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return i.prototype.destroy=function(){var e=this.element;this.unwireEvents(),this.isDestroy=!0,e.classList.remove("e-acrdn-root"),!this.isNested&&sf.base.isRippleEnabled&&this.removeRippleEffect()},i.prototype.render=function(){var e=sf.base.closest(this.element,".e-acrdn-panel");this.isNested=!1,this.isDestroy||(this.isDestroy=!1),e&&e.firstElementChild&&e.firstElementChild.firstElementChild?e.firstElementChild.firstElementChild.classList.contains("e-accordion")&&(e.classList.add("e-nested"),this.isNested=!0):this.element.classList.add("e-acrdn-root"),this.wireFocusEvents(),this.wireEvents()},i.prototype.wireFocusEvents=function(){for(var i=0,n=[].slice.call(this.element.querySelectorAll("."+e));i<n.length;i++){var s=n[i],o=s.querySelector("."+t);s.childElementCount>0&&o&&(sf.base.EventHandler.clearEvents(o),sf.base.EventHandler.add(o,"focus",this.focusIn,this),sf.base.EventHandler.add(o,"blur",this.focusOut,this))}},i.prototype.unwireEvents=function(){sf.base.isNullOrUndefined(this.keyModule)||this.keyModule.destroy()},i.prototype.wireEvents=function(){this.isNested||this.isDestroy||(this.removeRippleEffect=sf.base.rippleEffect(this.element,{selector:"."+t})),this.isNested||(this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},i.prototype.focusIn=function(e){e.target.parentElement.classList.add("e-item-focus")},i.prototype.focusOut=function(e){e.target.parentElement.classList.remove("e-item-focus")},i.prototype.afterContentRender=function(t){var i,n=this,s=[],o=t,r=o.children[0],a=o.children[1];r?i=sf.base.closest(r,"."+e):a&&(i=sf.base.closest(a,"."+e));var l=this.element.children;[].slice.call(l).forEach((function(e){e.classList.contains("e-active")&&s.push(e)}));var h=[].slice.call(this.element.querySelectorAll("."+e+" [e-animate]"));if(h.length>0)for(var d=0,c=h;d<c.length;d++){var p=c[d];s.push(p.parentElement)}var u=-1!==s.indexOf(i)&&"true"===a.getAttribute("e-animate"),f=!1;if(!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(r)){var g=sf.base.select(".e-acrdn-panel",o),m=sf.base.closest(o,".e-acrdn-root").querySelector(".e-expand-state");if(sf.base.isNullOrUndefined(g))return;f=m===o,!sf.base.isVisible(g)||u&&!i.classList.contains("e-selected")?(s.length>0&&"Single"===this.options.expandMode&&!u&&s.forEach((function(e){n.collapse(sf.base.select(".e-acrdn-panel",e)),e.classList.remove("e-expand-state")})),this.expand(g)):this.collapse(g),sf.base.isNullOrUndefined(m)||f||m.classList.remove("e-expand-state")}},i.prototype.eleMoveFocus=function(i,n,s){var o,r=sf.base.closest(s,"."+e);s===n?o=("moveUp"===i?s.lastElementChild:s).querySelector("."+t):s.classList.contains(t)&&(r="moveUp"===i?r.previousElementSibling:r.nextElementSibling)&&(o=sf.base.select("."+t,r)),o&&o.focus()},i.prototype.keyActionHandler=function(e){var i=e.target,n=sf.base.closest(e.target,t);if(!sf.base.isNullOrUndefined(n)||i.classList.contains("e-accordion")||i.classList.contains(t)){var s,o=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,o,i);break;case"space":case"enter":s=i.nextElementSibling,!sf.base.isNullOrUndefined(s)&&s.classList.contains("e-acrdn-panel")?"true"!==s.getAttribute("e-animate")&&i.click():i.click(),e.preventDefault();break;case"home":case"end":("home"===e.action?o.firstElementChild.children[0]:o.lastElementChild.children[0]).focus(),e.preventDefault()}}},i.prototype.expand=function(t){var i=sf.base.closest(t,"."+e);sf.base.isNullOrUndefined(t)||sf.base.isVisible(t)&&"true"!==t.getAttribute("e-animate")||i.classList.contains("e-overlay")||this.dotNetRef.invokeMethodAsync("TriggerExpandingEvent",this.getIndexByItem(i))},i.prototype.expandAnimation=function(e,t,i,n,s,o){var r,a=this;this.lastActiveItemId=n.id,"None"===e&&"Enable"===sf.base.animationMode&&(e="SlideDown",s.name="SlideDown"),"SlideDown"===e?(s.begin=function(){a.expandProgress("begin",t,i,n,o),i.style.position="absolute",r=n.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",n.style.maxHeight=""},s.progress=function(){n.style.minHeight=r+i.offsetHeight+"px"},s.end=function(){sf.base.setStyleAttribute(i,{position:"",maxHeight:""}),n.style.minHeight="",a.expandProgress("end",t,i,n,o)}):(s.begin=function(){a.expandProgress("begin",t,i,n,o)},s.end=function(){a.expandProgress("end",t,i,n,o)}),new sf.base.Animation(s).animate(i)},i.prototype.expandProgress=function(e,t,i,n,s){sf.base.removeClass([i],"e-content-hide"),sf.base.addClass([n],"e-selected"),sf.base.addClass([t],"e-expand-icon"),"end"===e&&(sf.base.addClass([n],"e-active"),i.setAttribute("aria-hidden","false"),sf.base.attributes(n.firstElementChild,{"aria-expanded":"true"}),t.classList.remove("e-toggle-animation"),this.dotNetRef.invokeMethodAsync("TriggerExpandedEvent",s),this.setPersistence("accordion"+this.element.id))},i.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);if(-1===this.options.expandedIndices.indexOf(t)){var i=[].slice.call(this.options.expandedIndices);i.push(t),this.options.expandedIndices=i}},i.prototype.getIndexByItem=function(e){var t=this.getItemElements();return[].slice.call(t).indexOf(e)},i.prototype.getItemElements=function(){var t=[],i=this.element.children;return[].slice.call(i).forEach((function(i){i.classList.contains(e)&&t.push(i)})),t},i.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e),i=[].slice.call(this.options.expandedIndices),n=i.indexOf(t);n>-1&&i.splice(n,1),this.options.expandedIndices=i},i.prototype.collapse=function(t){var i=sf.base.closest(t,"."+e);sf.base.isNullOrUndefined(t)||!sf.base.isVisible(t)||i.classList.contains("e-overlay")||this.dotNetRef.invokeMethodAsync("TriggerCollapsingEvent",this.getIndexByItem(i))},i.prototype.collapseAnimation=function(e,t,i,n,s,o){var r,a,l,h,d=this;this.lastActiveItemId=i.id,"None"===e&&"Enable"===sf.base.animationMode&&(e="SlideUp",s.name="SlideUp"),"SlideUp"===e?(s.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",t.style.position="absolute",r=i.offsetHeight,a=t.offsetHeight,t.style.maxHeight=a+"px",d.collapseProgress("begin",n,t,i,o)},s.progress=function(){(h=r-(a-t.offsetHeight))<l&&(i.style.minHeight=h+"px")},s.end=function(){t.style.display="none",d.collapseProgress("end",n,t,i,o),i.style.minHeight="",sf.base.setStyleAttribute(t,{position:"",maxHeight:"",display:""})}):(s.begin=function(){d.collapseProgress("begin",n,t,i,o)},s.end=function(){d.collapseProgress("end",n,t,i,o)}),new sf.base.Animation(s).animate(t)},i.prototype.collapseProgress=function(e,t,i,n,s){sf.base.removeClass([t],"e-expand-icon"),sf.base.removeClass([n],"e-selected"),"end"===e&&(sf.base.addClass([i],"e-content-hide"),t.classList.remove("e-toggle-animation"),sf.base.removeClass([n],"e-active"),i.setAttribute("aria-hidden","true"),sf.base.attributes(n.firstElementChild,{"aria-expanded":"false"}),this.dotNetRef.invokeMethodAsync("TriggerCollapsedEvent",s),this.setPersistence("accordion"+this.element.id))},i.prototype.expandingItem=function(t){this.accItem=sf.base.selectAll(":scope > ."+e,this.element);var i=this.getElementByIndex(t.index),n=sf.base.select(".e-acrdn-panel",i),s=sf.base.closest(i,".e-acrdn-root"),o=sf.base.select(".e-toggle-icon",i).firstElementChild,r=s.querySelector(".e-expand-state"),a={name:this.options.animation.expand.effect,duration:this.options.animation.expand.duration,timingFunction:this.options.animation.expand.easing};o.classList.add("e-toggle-animation"),this.expandedItemsPush(i),sf.base.isNullOrUndefined(r)||r.classList.remove("e-expand-state"),i.classList.add("e-expand-state"),"None"===a.name&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?(this.expandProgress("begin",o,n,i,t),this.expandProgress("end",o,n,i,t)):this.expandAnimation(a.name,o,n,i,a,t)},i.prototype.getElementByIndex=function(e){return this.accItem[e]?this.accItem[e]:null},i.prototype.collapsingItem=function(t){this.accItem=sf.base.selectAll(":scope > ."+e,this.element);var i=this.getElementByIndex(t.index),n=sf.base.select(".e-acrdn-panel",i),s=sf.base.select(".e-toggle-icon",i).firstElementChild,o={name:this.options.animation.collapse.effect,duration:this.options.animation.collapse.duration,timingFunction:this.options.animation.collapse.easing};this.expandedItemsPop(i),i.classList.add("e-expand-state"),s.classList.add("e-toggle-animation"),"None"===o.name&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?(this.collapseProgress("begin",s,n,i,t),this.collapseProgress("end",s,n,i,t)):this.collapseAnimation(o.name,n,i,s,o,t)},i.prototype.select=function(e){var i=this.getItemElements()[e];sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(sf.base.select("."+t,i))||i.children[0].focus()},i.prototype.expandItem=function(e,t){var i=this,n=this.getItemElements();if(sf.base.isNullOrUndefined(t))if("Single"===this.options.expandMode&&e){var s=n[n.length-1];this.itemExpand(e,s,this.getIndexByItem(s))}else{var o=sf.base.select("#"+this.lastActiveItemId,this.element);[].slice.call(n).forEach((function(t){i.itemExpand(e,t,i.getIndexByItem(t)),t.classList.remove("e-expand-state")}));var r=sf.base.select(".e-expand-state",this.element);r&&r.classList.remove("e-expand-state"),o&&o.classList.add("e-expand-state")}else{s=n[t];if(sf.base.isNullOrUndefined(s)||!s.classList.contains("e-select")||s.classList.contains("e-active")&&e)return;"Single"===this.options.expandMode&&this.expandItem(!1),this.itemExpand(e,s,t)}},i.prototype.setPersistence=function(e){this.options.enablePersistence&&window.localStorage.setItem(e,this.options.expandedIndices.toString())},i.prototype.itemExpand=function(e,t,i){var n=this,s=t.children[1];t.classList.contains("e-overlay")||(sf.base.isNullOrUndefined(s)&&e?this.dotNetRef.invokeMethodAsync("OnAccordionClick",i).then((function(){s=t.children[1],sf.base.isNullOrUndefined(s)||n.expand(s)})):sf.base.isNullOrUndefined(s)||(e?this.expand(s):this.collapse(s)))},i}();return{initialize:function(e,t,n,s){if(t&&e){null===n.expandedIndices&&(n.expandedIndices=[]);var o=new i(e,t,n,s);o.render(),o.dotNetRef.invokeMethodAsync("CreatedEvent",null)}},expandingItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.element&&i.expandingItem(t)},collapsingItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.element&&i.collapsingItem(t)},select:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.element&&i.select(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t.element&&(t.setPersistence("accordion"+t.element.id),t.destroy())},setExpandModeAndRTL:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);o.element&&(n&&(t?sf.base.addClass([o.element],"e-rtl"):sf.base.removeClass([o.element],"e-rtl")),s&&(o.options.expandMode=i,"Single"===i&&o.options.expandedIndices.length>1&&o.expandItem(!1)))},itemChanged:function(e){var t=window.sfBlazor.getCompInstance(e);t.element&&t.wireFocusEvents()},afterContentRender:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n.element&&(n.options.animation=i,n.afterContentRender(t))},itemExpandedOrCollapsed:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(i.element){var n=i.accItem[t.index].querySelector(".e-acrdn-panel");n&&n.firstElementChild&&n.firstElementChild.firstElementChild&&n.firstElementChild.firstElementChild.classList.contains("e-accordion")&&n.classList.add("e-nested")}}}}()},"./modules/sf-accumulation-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.AccumulationChart=function(){"use strict";var e=function(e,t){this.x=e,this.y=t},t=function(){function e(e,t,i,n,s){window.sfBlazor=window.sfBlazor,this.chartOnMouseDownRef=null,this.mouseMoveRef=null,this.mouseMoveThreshold=null,this.mouseEndRef=null,this.chartOnMouseClickRef=null,this.chartRightClickRef=null,this.mouseLeaveRef=null,this.chartMouseWheelRef=null,this.domMouseMoveRef=null,this.domMouseUpRef=null,this.chartKeyDownRef=null,this.chartKeyUpRef=null,this.longPressBound=null,this.touchObject=null,this.mouseY=0,this.mouseX=0,this.eventInterval=80,this.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus()},this.id=t,this.element=i,this.dotnetref=n,this.options=s,this.currentLegendIndex=0,this.currentPointIndex=0,this.previousTargetId="",this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.unWireEvents(),this.wireEvents()},e.prototype.destroy=function(){this.unWireEvents()},e.prototype.wireEvents=function(){var e=document.getElementById(this.id);if(e){i.dotnetrefCollection.push({id:this.id,dotnetref:this.dotnetref});
/*! Find the Events type */
var t=sf.base.Browser.isPointer?"pointerleave":"mouseleave";this.chartOnMouseDownRef=this.chartOnMouseDown.bind(this,this.dotnetref,this.id),this.mouseMoveRef=this.mouseMove.bind(this,this.dotnetref,this.id),this.mouseEndRef=this.mouseEnd.bind(this,this.dotnetref,this.id),this.chartOnMouseClickRef=this.chartOnMouseClick.bind(this,this.dotnetref,this.id),this.chartRightClickRef=this.chartRightClick.bind(this,this.dotnetref,this.id),this.chartKeyDownRef=this.chartOnKeyDown.bind(this,this.dotnetref,this.id),this.chartKeyUpRef=this.chartOnKeyUp.bind(this,this.dotnetref,this.id),this.mouseLeaveRef=this.mouseLeave.bind(this,this.dotnetref,this.id),
/*! Bind the Event handler */
e.addEventListener("mousemove",this.mouseMoveRef),e.addEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.add(e,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.add(e,"click",this.chartOnMouseClickRef),sf.base.EventHandler.add(e,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.add(e,t,this.mouseLeaveRef),sf.base.EventHandler.add(e,"keydown",this.chartKeyDownRef),sf.base.EventHandler.add(e,"keyup",this.chartKeyUpRef),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler),i.resizeBound=i.chartResize.bind(this,i.dotnetrefCollection);var n=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,n,i.resizeBound),this.longPressBound=this.longPress.bind(this,this.dotnetref,this.id),this.touchObject=new sf.base.Touch(e,{tapHold:this.longPressBound,tapHoldThreshold:500})}},e.prototype.unWireEvents=function(){var e=this,t=document.getElementById(this.id);if(t){i.dotnetrefCollection=i.dotnetrefCollection.filter((function(t){return t.id!==e.id}));
/*! Find the Events type */
var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";
/*! Bind the Event handler */sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),t.removeEventListener("mousemove",this.mouseMoveRef),t.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(t,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.remove(t,"click",this.chartOnMouseClickRef),sf.base.EventHandler.remove(t,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.remove(t,n,this.mouseLeaveRef),sf.base.EventHandler.remove(t,"keydown",this.chartKeyDownRef),sf.base.EventHandler.remove(t,"keyup",this.chartKeyUpRef),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);var s=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,s,i.resizeBound),this.touchObject&&(this.touchObject.destroy(),this.touchObject=null)
/*! Apply the style for chart */}},e.prototype.getEventArgs=function(e){var t=e.changedTouches?e.changedTouches[0].clientX:e.clientX,i=e.changedTouches?e.changedTouches[0].clientY:e.clientY;return this.setMouseXY(t,i),{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0}}},e.prototype.setMouseXY=function(e,t){var i=document.getElementById(this.id+"_svg").getBoundingClientRect(),n=document.getElementById(this.id).getBoundingClientRect();this.mouseY=t-n.top-Math.max(i.top-n.top,0),this.mouseX=e-n.left-Math.max(i.left-n.left,0)},e.prototype.chartOnMouseDown=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseDown",this.getEventArgs(i)),!1},e.prototype.chartOnKeyDown=function(e,t,i){this.dotnetref=e,this.id=t;var n="";return this.options.showTooltip&&("Tab"==i.code&&this.previousTargetId.indexOf("Series")>-1||"Escape"===i.code)&&(n="ESC"),i.code.indexOf("Arrow")>-1&&i.preventDefault(),i.ctrlKey&&"p"===i.key&&(i.preventDefault(),n="CtrlP"),""!=n&&e.invokeMethodAsync("OnAccumulationChartKeyboardNavigations",n,i.target.id),!1},e.prototype.chartOnKeyUp=function(e,t,n){this.dotnetref=e,this.id=t;var s="",o=n.target.id,r=document.getElementById(this.element.id+"_chart_legend_translate_g"),a=document.getElementById(this.element.id+"_chart_legend_pageup");if(r){var l=r.firstElementChild,h=l.getAttribute("class");h&&-1===h.indexOf("e-chart-focused")?h+=" e-chart-focused":h="e-chart-focused",l.setAttribute("class",h)}if(a&&a.setAttribute("class","e-chart-focused"),"Tab"==n.code){if(""!=this.previousTargetId)if(this.previousTargetId.indexOf("_Point_")>-1&&-1==o.indexOf("_Point_")){var d=document.getElementById(this.previousTargetId).parentElement;i.setTabIndex(d.children[this.currentPointIndex],d.firstElementChild),this.currentPointIndex=0}else this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1==o.indexOf("_chart_legend_page")&&-1==o.indexOf("_chart_legend_g_")?i.setTabIndex(n.target,a):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1==o.indexOf("chart_legend_g_")&&i.setTabIndex(r.children[this.currentLegendIndex],r.firstElementChild);this.previousTargetId=o,o.indexOf("_chart_legend_g_")>-1&&this.options.enableHighlight?(o=n.target.lastElementChild.id,s="Tap"):o.indexOf("_Point_")>-1&&(this.options.enableHighlight||this.options.showTooltip)&&(s="Tap")}else if(n.code.indexOf("Arrow")>-1)if(n.preventDefault(),o.indexOf("_chart_legend_page")>-1)n.target.removeAttribute("tabindex"),this.previousTargetId=o=this.element.id+"_chart_legend_page"+("ArrowRight"==n.code?"up":"down"),i.focusTarget(document.getElementById(o));else if(o.indexOf("_chart_legend_")>-1){n.target.removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"==n.code||"ArrowRight"==n.code?1:-1,this.currentLegendIndex=i.getActualIndex(this.currentLegendIndex,r.children.length);var c=r.children[this.currentLegendIndex];i.focusTarget(c),this.previousTargetId=o=c.lastElementChild.id,s=this.options.enableHighlight?"ArrowMove":""}else o.indexOf("_Point_")>-1&&(n.target.removeAttribute("tabindex"),this.currentPointIndex+="ArrowUp"==n.code||"ArrowRight"==n.code?1:-1,this.currentPointIndex=i.getActualIndex(this.currentPointIndex,n.target.parentElement.children.slice().filter((function(e){return e.id.indexOf("_Point_")>-1})).length),o=this.element.id+"_Series_0_Point_"+this.currentPointIndex,i.focusTarget(document.getElementById(o)),s=this.options.showTooltip?"ArrowMove":"");else"Enter"!=n.code&&"Space"!=n.code||!(o.indexOf("_chart_legend_")>-1||o.indexOf("_Point_")>-1)||(o=o.indexOf("_chart_legend_g")>-1?n.target.lastElementChild.id:o,s="Enter");return""!=s&&e.invokeMethodAsync("OnAccumulationChartKeyboardNavigations",s,o),!1},e.prototype.mouseMove=function(e,t,i){if(null==this.mouseMoveThreshold||(new Date).getTime()-this.mouseMoveThreshold>this.eventInterval){this.mouseMoveThreshold=(new Date).getTime(),this.dotnetref=e,this.id=t;var n=void 0,s=void 0,o=void 0;"touchmove"===i.type?(this.isTouch=!0,n=(o=i).changedTouches[0].clientX,s=o.changedTouches[0].clientY):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,n=i.clientX,s=i.clientY),document.getElementById(this.id+"_svg")&&(this.setMouseXY(n,s),this.dotnetref.invokeMethodAsync("OnChartMouseMove",this.getEventArgs(i)))}return!1},e.prototype.mouseEnd=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseEnd",this.getEventArgs(i)),!1},e.prototype.chartOnMouseClick=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseClick",this.getEventArgs(i)),!1},e.prototype.chartRightClick=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartRightClick",this.getEventArgs(i)),!1},e.prototype.mouseLeave=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseLeave",this.getEventArgs(i)),!1},e.prototype.longPress=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartLongPress",i),!1},e}(),i={initialize:function(e,i,n,s){new t(e,i.id,i,n,s).render()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},focusTargetId:function(e){this.focusTarget(document.getElementById(e).parentElement)},focusTarget:function(e){var t=e.getAttribute("class");return e.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-chart-focused")?t+=" e-chart-focused":t||(t="e-chart-focused"),e.setAttribute("tabindex","0"),e.setAttribute("class",t),e.focus(),e.id},getActualIndex:function(e,t){return e>t-1?0:e<0?t-1:e},setTabIndex:function(e,t){e.removeAttribute("tabindex"),t.setAttribute("tabindex","0")},id:"",getParentElementBoundsById:function(e){var t=document.getElementById(e);if(t){t.style.width="100%",t.style.height="100%";var i=t.getBoundingClientRect();return{width:i.width||t.clientWidth||t.offsetWidth,height:i.height||t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(e,t){void 0===t&&(t=!0),t&&(this.id=e);var i=document.getElementById(e);if(i){var n=i.getBoundingClientRect();return{width:i.clientWidth||i.offsetWidth,height:i.clientHeight||i.offsetHeight,left:n.left,top:n.top,right:n.right,bottom:n.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getAllCharacters:function(){for(var e=[],t=33;t<591;t++)e.push(String.fromCharCode(t));return e},measureText:function(e,t,i,n){var s=document.getElementById("chartmeasuretext");return null===s&&(s=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(s))," "===e&&(e="&nbsp;"),s.innerHTML=e,s.style.position="fixed",s.style.fontSize="100px",s.style.fontWeight=t,s.style.fontStyle=i,s.style.fontFamily=n,s.style.visibility="hidden",s.style.top="-100",s.style.left="0",s.style.whiteSpace="nowrap",s.style.lineHeight="normal",{Width:s.clientWidth,Height:s.clientHeight}},getCharCollectionSize:function(e){for(var t=[],i=this.getAllCharacters(),n=i.length,s=e.length,o=0;o<s;o++)for(var r=e[o].split("_"),a=r[0],l=r[1],h=r[2],d=0;d<n;d++)t.push(this.measureText(i[d],a,l,h).Width+"");return JSON.stringify(t)},dotnetref:{},dotnetrefCollection:[],resizeBound:{},resize:{},chartResize:function(e,t){var i=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var t=e.length,n=0;n<t;n++)e[n].dotnetref.invokeMethodAsync("RemoveElements");for(n=0;n<t;n++)e[n].dotnetref.invokeMethodAsync("OnChartResize");clearTimeout(i.resize)}),500),!1},performAnimation:function(e,t,i,n,s,o,r,a,l){var h=this,d=/translate\((-?\d+\.?\d*),?\s*(-?\d+[.]?\d*)?\)/.exec(a);sf.base.isNullOrUndefined(a)||""===a||(s=+d[1],o=+d[2]);var c="";if(r<=0)return this.setElementTransform(t,e,"transform","translate("+s+", "+o+")",c),null;var p,u,f=t.replace("Series_0","datalabel").replace("Point","Series_0");if(!sf.base.isNullOrUndefined(document.getElementById(f+"text_"+e))){var g=(c=document.getElementById(f+"text_"+e).getAttribute("transform")).split(" ");g.length>2&&(c=g[2])}new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:r,progress:function(r){p=h.linear(r.timeStamp,i,s,r.duration),u=h.linear(r.timeStamp,n,o,r.duration),h.setElementTransform(t,e,"transform","translate("+(l?s-p:p)+", "+(l?o-u:u)+")",c)},end:function(n){h.setElementTransform(t,e,"transform","translate("+(l?i:s)+", "+(l?i:o)+")",c)}})},setElementTransform:function(e,t,i,n,s){var o=e.replace("Series_0","datalabel").replace("Point","Series_0");this.setElementAttribute(e+t,"transform",n),this.setElementAttribute(o+"shape_"+t,"transform",n),this.setElementAttribute(o+"text_"+t,"transform",n+" "+s),this.setElementAttribute(o+"connector_"+t,"transform",n)},linear:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},setElementAttribute:function(e,t,i){var n=document.getElementById(e);n&&n.setAttribute(t,i)},getElementAttribute:function(e,t){var i=document.getElementById(e);return i?i.getAttribute(t):""},createStyleElement:function(e,t){document.body.appendChild(sf.base.createElement("style",{id:e,innerHTML:t}))},renderTooltip:function(e,t,i,n){var s=document.getElementById(t+"_svg"),o=!(s&&parseInt(s.getAttribute("opacity"),10)>0),r=JSON.parse(e),a=window.sfBlazor.getCompInstance(n);o&&!sf.base.isNullOrUndefined(a)?(a.tooltip=new sf.svgbase.Tooltip(r),a.tooltip.enableRTL=r.enableRTL,a.tooltip.animationComplete=function(e){e.tooltip.fadeOuted&&i.invokeMethodAsync("TooltipAnimationComplete")},a.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(a.tooltip)||(a.tooltip.location=new sf.svgbase.TooltipLocation(r.location.x,r.location.y),a.tooltip.content=r.content,a.tooltip.header=r.header,a.tooltip.offset=r.offset,a.tooltip.palette=r.palette,a.tooltip.shapes=r.shapes,a.tooltip.data=r.data,a.tooltip.template=r.template,a.tooltip.textStyle.color=r.textStyle.color||a.tooltip.textStyle.color,a.tooltip.textStyle.fontFamily=r.textStyle.fontFamily||a.tooltip.textStyle.fontFamily,a.tooltip.textStyle.fontStyle=r.textStyle.fontStyle||a.tooltip.textStyle.fontStyle,a.tooltip.textStyle.fontWeight=r.textStyle.fontWeight||a.tooltip.textStyle.fontWeight,a.tooltip.textStyle.opacity=r.textStyle.opacity||a.tooltip.textStyle.opacity,a.tooltip.textStyle.size=r.textStyle.size||a.tooltip.textStyle.size,a.tooltip.isNegative=r.isNegative,a.tooltip.clipBounds=new sf.svgbase.TooltipLocation(r.clipBounds.x,r.clipBounds.y),a.tooltip.arrowPadding=r.arrowPadding,a.tooltip.dataBind())},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip)||(this.removeTooltipCommentElement(t),t.tooltip.fadeOut())},removeTooltipCommentElement:function(e){var t=document.getElementById(e.tooltip.element.id);if(t&&!e.isRemoveCommentElement&&t.childNodes.length>1){for(var i=t.childNodes,n=[],s=0;s<i.length;s++)(i[s].nodeName.match("#comment")||i[s].nodeName.match("#text"))&&n.push(i[s]);for(var o=0,r=n;o<r.length;o++){var a=r[o];sf.base.remove(a),e.isRemoveCommentElement=!0}}},animateRedrawElement:function(e,t,i,n,s,o,r,a){var l=this;void 0===r&&(r="x"),void 0===a&&(a="y");var h=document.getElementById(e);if(!h)return null;var d="DIV"===h.tagName,c=function(e,t){d?(h.style[r]=e+"px",h.style[a]=t+"px"):(h.setAttribute(r,e+""),h.setAttribute(a,t+""))};c(i,n),new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:t,progress:function(e){c(l.linear(e.timeStamp,i,s-i,e.duration),l.linear(e.timeStamp,n,o-n,e.duration))},end:function(){c(s,o)}})},doAnimation:function(e,t,i,n,s,o,r,a){var l=this,h=document.getElementById(e);t-=90;var d,c=o||n;a.x+=1,r+=.414*r,new sf.base.Animation({}).animate(h,{duration:c,delay:s,progress:function(e){d=l.linear(e.timeStamp,t,i,e.duration),h.setAttribute("d",l.getPathArc(a,t,d,r,0))},end:function(e){a.x-=1,h.setAttribute("d",l.getPathArc(a,t,t-9e-5,r,0));var i=document.getElementById(h.id.split("Series")[0]+"datalabel_Series_0")||document.getElementById(h.id.split("Series")[0]+"chart_datalabel_Series_0");i&&i.setAttribute("style","visibility: visible")}})},getPathArc:function(e,t,i,n,s){var o=i-t,r=(o=o<0?o+360:o)<180?0:1;return s||0!==s?this.getDoughnutPath(e,this.degreeToLocation(t,n,e),this.degreeToLocation(i,n,e),n,this.degreeToLocation(t,s,e),this.degreeToLocation(i,s,e),s,r):this.getPiePath(e,this.degreeToLocation(t,n,e),this.degreeToLocation(i,n,e),n,r)},getPiePath:function(e,t,i,n,s){return"M "+e.x+" "+e.y+" L "+t.x+" "+t.y+" A "+n+" "+n+" 0 "+s+" 1 "+i.x+" "+i.y+" Z"},getDoughnutPath:function(e,t,i,n,s,o,r,a){return"M "+t.x+" "+t.y+" A "+n+" "+n+" 0 "+a+" 1 "+i.x+" "+i.y+" L "+o.x+" "+o.y+" A "+r+" "+r+" 0 "+a+",0 "+s.x+" "+s.y+" Z"},degreeToLocation:function(t,i,n){var s=t*Math.PI/180;return new e(Math.cos(s)*i+n.x,Math.sin(s)*i+n.y)},ChangePiePath:function(e,t,i){for(var n=0,s=e;n<s.length;n++){var o=s[n];this.ChangePointPath(o.point,o.degree,o.start,o.pathOption,i,t,o.radius,o.innerRadius)}},GetPathOption:function(e,t,i,n,s){return t?this.getPathArc(e,i,(i+t)%360,n,s):""},ChangePointPath:function(e,t,i,n,s,o,r,a){var l,h,d=this,c=document.getElementById(n.id);new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:s,delay:0,progress:function(n){h=d.linear(n.timeStamp,e.degree,t-e.degree,n.duration),l=((l=d.linear(n.timeStamp,e.start,i-e.start,n.duration))/(Math.PI/180)+360)%360,c.setAttribute("d",d.GetPathOption(o,h,l,r,a)),e.isExplode,c.style.visibility="visible"},end:function(s){c.style.visibility=e.visible?"visible":"hidden",c.setAttribute("d",n.direction),e.degree=t,e.start=i}})}};return i}()},"./modules/sf-barcode.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Barcode=function(){"use strict";var e=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new i((function(t){t(e.value)})).then(r,a)}l((n=n.apply(e,t||[])).next())}))},t=function(e,t){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};return{getBarcodeSize:function(e){var t=e.getBoundingClientRect(),i={};return i.Width=t.width,i.Height=t.height,i},createHtmlElement:function(e,t){var i=sf.base.createElement(e);return t&&this.setAttribute(i,t),i},setAttribute:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]])},createMeasureElements:function(){if(window.barcodeMeasureElement)window.barcodeMeasureElement.usageCount+=1;else{var e=this.createHtmlElement("div",{id:"barcodeMeasureElement",class:"barcodeMeasureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),t=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(t);var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(i);var n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.appendChild(n),window.barcodeMeasureElement=e,window.barcodeMeasureElement.usageCount=1,document.body.appendChild(e)}},measureText:function(e,t,i){window.barcodeMeasureElement.style.visibility="visible";var n=window.barcodeMeasureElement.children[1],s=this.getChildNode(n)[0];s.textContent=e,s.setAttribute("style","font-size:"+t+"px; font-family:"+i+";");var o=s.getBBox(),r={};return r.Width=o.width,r.Height=o.height,window.barcodeMeasureElement.style.visibility="hidden",r},getChildNode:function(e){var t,i=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[n]).nodeType&&i.push(t);else i=e.children;return i},checkOverlapTextPosition:function(e,t,i,n,s,o,r,a){return(a=a||{}).stringSize=t,n+s-(o+this.measureText(e,t,i).Width)<=r&&t>2&&(a.stringSize-=.2,this.checkOverlapTextPosition(e,a.stringSize,i,n,s,o,r,a)),a.stringSize},triggerDownload:function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},exportAsImage:function(i,n,s,o){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return[4,this.imageExport(i,n,s,o)];case 1:return(e=t.sent())instanceof Promise?(e.then((function(e){return e})),[2,e]):[2,e]}}))}))},imageExport:function(i,n,s,o){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){return e=this,[2,new Promise((function(t,r){var a="<svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink>"+s.children[0].outerHTML+"</svg>",l=window.URL.createObjectURL(new Blob("SVG"===i?[a]:[(new window.XMLSerializer).serializeToString(s)],{type:"image/svg+xml"}));if("SVG"===i)e.triggerDownload(i,n,l),t(null);else{var h=document.createElement("canvas");h.height=s.clientHeight,h.width=s.clientWidth;var d=h.getContext("2d"),c=new Image;c.onload=function(){if(d.drawImage(c,0,0),window.URL.revokeObjectURL(l),o){var s="JPEG"===i?h.toDataURL("image/jpeg"):"PNG"===i?h.toDataURL("image/png"):"";t(s)}else e.triggerDownload(i,n,h.toDataURL("image/png").replace("image/png","image/octet-stream")),t(null)},c.src=l}}))]}))}))}}}()},"./modules/sf-breadcrumb.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Breadcrumb=function(){"use strict";var e=function(){function e(e,t,i,n,s,o,r){this.dataId=e,this.element=t,this.menu=r,this.popup=o,this.overflowMode=n,this.maxItems=s,this.dotnetRef=i,window.sfBlazor.setCompInstance(this),this.calculateMaxItems(),this.wireEvents()}return e.prototype.calculateMaxItems=function(){if(this.prevWidth=this.element.offsetWidth,"Default"===this.overflowMode||"Collapsed"===this.overflowMode||"Menu"===this.overflowMode){var e=-1,t=this.element.offsetWidth,i=[].slice.call(this.element.children[0].children).reverse(),n="Menu"===this.overflowMode?0:i[i.length-1].offsetWidth+(i[i.length-2]?i[i.length-2].offsetWidth:0);if("Menu"===this.overflowMode){var s=this.getMenuElement();this.element.append(s),n+=s.offsetWidth,s.remove()}for(var o=0;o<i.length-2;o++){if(n>t){e=Math.ceil((o-1)/2)+("Menu"===this.overflowMode&&o<=2?0:1);break}if("Menu"===this.overflowMode&&2===o&&(n+=i[i.length-1].offsetWidth+i[i.length-2].offsetWidth)>t){e=1;break}if(("Menu"!==this.overflowMode||!i[o].classList.contains("e-breadcrumb-menu"))&&(n+=i[o].offsetWidth)>t){e=Math.ceil(o/2)+("Menu"===this.overflowMode&&o<=2?0:1);break}}this.dotnetRef.invokeMethodAsync("ChangeMaxItems",e)}else if(("Wrap"===this.overflowMode||"Scroll"===this.overflowMode)&&this.maxItems>0){t=0;if((i=this.element.querySelectorAll(".e-breadcrumb-item,.e-breadcrumb-separator")).length>this.maxItems+this.maxItems-1){for(o="Wrap"===this.overflowMode?1:0;o<this.maxItems+this.maxItems-1;o++)t+=i[o].offsetWidth;t=t+5+2*parseInt(getComputedStyle(this.element.children[0]).paddingLeft,10),"Wrap"===this.overflowMode?this.element.querySelector(".e-breadcrumb-wrapped-ol").style.width=t+"px":this.element.style.width=t+"px"}}},e.prototype.resize=function(){this.element.offsetWidth>0&&this.prevWidth!=this.element.offsetWidth&&this.dotnetRef.invokeMethodAsync("ResizeHandler")},e.prototype.getMenuElement=function(){return sf.base.createElement("li",{className:"e-icons e-breadcrumb-menu"})},e.prototype.openPopup=function(e,t){var i,n;document.body.appendChild(t);var s=e.getBoundingClientRect(),o=t.getBoundingClientRect();i=s.left+pageXOffset,n=s.bottom+pageYOffset,s.bottom+o.height>document.documentElement.clientHeight&&n-s.height-o.height>document.documentElement.clientTop&&(n=n-s.height-o.height),s.left+o.width>document.documentElement.clientWidth&&s.right-o.width>document.documentElement.clientLeft&&(i=i+s.width-o.width),this.addEventListener(),t.style.left=Math.ceil(i)+"px",t.style.top=Math.ceil(n)+"px",t.style.zIndex=sf.popups.getZindexPartial(this.element)+"",t.style.visibility="",t.firstElementChild.focus()},e.prototype.addEventListener=function(){sf.base.EventHandler.add(document,"mousedown",this.mousedownHandler,this),this.popup&&sf.base.EventHandler.add(this.popup,"keydown",this.popupKeyDownHandler,this)},e.prototype.popupKeyDownHandler=function(e){"Escape"===e.key&&this.dotnetRef.invokeMethodAsync("ClosePopup",null)},e.prototype.mousedownHandler=function(e){if(this.popup&&this.popup.parentElement){var t=e.target;sf.base.closest(t,"#"+this.menu.id)||sf.base.closest(e.target,"#"+this.popup.id)||(this.dotnetRef.invokeMethodAsync("ClosePopup",null),this.removeEventListener())}else this.removeEventListener()},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,"mousedown",this.mousedownHandler),this.popup&&sf.base.EventHandler.remove(this.popup,"keydown",this.popupKeyDownHandler)},e.prototype.wireEvents=function(){window.addEventListener("resize",this.resize.bind(this))},e.prototype.unWireEvents=function(){window.removeEventListener("resize",this.resize.bind(this))},e.prototype.destroy=function(){this.unWireEvents()},e}();return{initialize:function(t,i,n,s,o){i&&new e(t,i,n,s,o)},calculateMaxItems:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.overflowMode=t,i.calculateMaxItems())},openPopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.popup=i,n.menu=t,n.openPopup(t,i))},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-bullet-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.BulletChart=function(){"use strict";var e=function(){function e(e,t,i){window.sfBlazor=window.sfBlazor,this.resizeTo=0,this.mouseleave=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnMouseLeave")},this.element=t,this.dotNetRef=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.click.bind(this),this),sf.base.EventHandler.add(this.element,"mousemove",this.mousemove.bind(this),this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mousemove.bind(this),this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.mousemove.bind(this),this),sf.base.EventHandler.add(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave.bind(this),this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"}),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousemove",this.mousemove),sf.base.EventHandler.remove(this.element,"click",this.click),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mousemove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.mousemove),sf.base.EventHandler.remove(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown);var e=sf.base.getInstance(this.element,this.keyActionHandler);e&&e.destroy(),this.element=null,this.dotNetRef=null},e.prototype.mouseDown=function(e){e.preventDefault()},e.prototype.keyActionHandler=function(e){"enter"===e.action&&this.clickProcess(e)},e.prototype.resize=function(){var e=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){e.dotNetRef.invokeMethodAsync("TriggerResize")}),500))},e.prototype.click=function(e){this.clickProcess(e)},e.prototype.clickProcess=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerClick",e.target.id)},e.prototype.mousemove=function(e){var t,i,n;this.element&&(t=this.element.getBoundingClientRect());var s=document.getElementById(this.element.id+"_svg");s&&(i=s.getBoundingClientRect()),e.type.indexOf("touch")>-1&&(n=e);var o=(sf.base.isNullOrUndefined(n)?e.clientX:n.changedTouches[0].clientX)-t.left-Math.max(i.left-t.left,0),r=(sf.base.isNullOrUndefined(n)?e.clientY:n.changedTouches[0].clientY)-t.top-Math.max(i.top-t.top,0);this.dotNetRef&&((sf.base.Browser.isDevice||e.type.indexOf("touch")>-1)&&setTimeout((function(e){e.invokeMethodAsync("OnMouseLeave")}),1e3,this.dotNetRef),this.dotNetRef.invokeMethodAsync("TriggerMouseMove",e.target.id,o,r))},e.prototype.barAnimation=function(e,t,i,n,s){new sf.base.Animation({}).animate(t,{duration:e.duration<=0?1e3:e.duration,delay:e.delay,progress:function(o){if(o.timeStamp>=o.delay){t.style.visibility="visible";var r=-1*Math.cos((o.timeStamp-o.delay)/o.duration*(Math.PI/2))+1;"targetBarAnimation"===i?t.setAttribute("transform","translate("+n.toString()+" "+s.toString()+") scale(1, "+(r/1).toString()+") translate("+-n.toString()+" "+-s.toString()+")"):t.setAttribute("transform","translate("+n.toString()+" "+e.valueY.toString()+") scale("+(r/1).toString()+", 1) translate("+-n.toString()+" "+-e.valueY.toString()+")")}},end:function(){t.setAttribute("transform","translate(0,0)"),t.style.visibility="visible"}})},e}();return{initialize:function(t,i,n,s,o){if(i)return new e(t,i,o).wireEvents(),this.getElementSize(i,n,s)},getElementSize:function(e,t,i){var n,s;return e&&(e.style.height=t,e.style.width=i,n=e.clientWidth||e.offsetWidth,s=e.clientHeight),{width:n,height:s}},updateElementOpacity:function(e,t,i){var n=document.getElementById(e);if(n){if(!sf.base.isNullOrUndefined(i)&&""!==i)document.getElementById(i).setAttribute("opacity","1");!0===t?n.setAttribute("opacity","1"):n.setAttribute("opacity","0.6")}},doBarAnimation:function(e,t,i,n,s,o){for(var r=0;r<i.length;r++){var a=document.getElementById(i[r]),l=window.sfBlazor.getCompInstance(e);a&&("valueBarAnimation"===n?l.barAnimation(t,a,n,s[r]):l.barAnimation(t,a,n,s[r],o[r]))}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-calendar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.CalendarBase=function(){"use strict";return{initialize:function(e,t,i,n,s){var o={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"};o=sf.base.extend(o,i),new sf.base.KeyboardEvents(e,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this,n,s,t),keyConfigs:o})},keyActionHandle:function(e,t,i,n){n.preventDefault();var s=sf.base.closest(n.target,".e-calendar").querySelector("tbody");if(s){!1;var o,r=s.querySelector("tr td.e-focused-date");o=s.querySelector("tr td.e-selected"),s.focus();var a=n.target,l={Action:n.action,Key:n.key,Events:n,SelectDate:o?o.id:null,FocusedDate:r?r.id:null,classList:o?o.classList.toString():r?r.classList.toString():"e-cell",Id:r?r.id:o?o.id:null,TargetClassList:a.classList.toString()};i.invokeMethodAsync("OnCalendarKeyboardEvent",l),a.classList.contains("e-today")&&(a.blur(),s.focus())}}}}()},"./modules/sf-carousel.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Carousel=function(){"use strict";var e="e-carousel-item",t=function(){function t(e,t,i,n){if(window.sfBlazor=window.sfBlazor,this.element=t,this.dotnetRef=n,this.swipeMode=i,this.dataId=e,window.sfBlazor.setCompInstance(this),this.itemsContainer=this.element.querySelector(".e-carousel-items"),"-4"!=this.swipeMode){new sf.base.Touch(this.itemsContainer,{scroll:this.scrollHandler.bind(this),swipe:this.swipeHandler.bind(this),swipeSettings:{swipeThresholdDistance:1}});sf.base.EventHandler.add(this.element,"transitionend",this.onTransitionEnd,this)}}return t.prototype.scrollHandler=function(e){if(!this.element.classList.contains("e-carousel-custom-animation")){if(this.timeStampStart||(this.timeStampStart=Date.now()),this.element.classList.contains("e-translate")&&this.onTransitionEnd(),"Touch"===this.swipeMode){if("mousemove"===e.originalEvent.type)return}else if("Mouse"===this.swipeMode&&"touchmove"===e.originalEvent.type)return;if("Left"===e.scrollDirection||"Right"===e.scrollDirection){var t=this.element.querySelector(".e-carousel-items");if(t&&t.scrollWidth>t.clientWidth)return;this.isScrollTriggered=!0,e.originalEvent.preventDefault(),e.originalEvent.stopPropagation()}"Left"===e.scrollDirection?this.itemsContainer.style.transform="translatex("+(this.getTranslateX(this.itemsContainer)+-e.distanceX)+"px)":"Right"===e.scrollDirection&&(this.itemsContainer.style.transform="translatex("+(this.getTranslateX(this.itemsContainer)+e.distanceX)+"px)")}},t.prototype.swipeHandler=function(e){var t=this.itemsContainer.children.length;if("Left"===e.swipeDirection||"Right"===e.swipeDirection){var i=Date.now()-this.timeStampStart,n=e.distanceX*(sf.base.Browser.isDevice?6:1.66);if(n>i||e.distanceX>this.element.offsetWidth/2){e.distanceX>this.element.offsetWidth/2&&this.applySwipeAnimation(e,n,i);var s=getComputedStyle(this.itemsContainer).getPropertyValue("--carousel-items-current");(this.element.classList.contains("e-loop")||"Right"!==e.swipeDirection||"0"!==s)&&(this.element.classList.contains("e-loop")||"Left"!==e.swipeDirection||s!==(t-1).toString())?(this.element.classList.contains("e-rtl")&&("Right"===e.swipeDirection?e.swipeDirection="Left":e.swipeDirection="Right"),this.confirmSwipe(e.swipeDirection)):this.cancelSwipe()}else this.cancelSwipe()}else this.cancelSwipe();this.timeStampStart=null},t.prototype.inverseDirection=function(e){switch(e){case"Left":e="Next";break;case"Right":e="Previous";break;case"Next":e="Left";break;case"Previous":e="Right"}return e},t.prototype.applySwipeAnimation=function(e,t,i){this.element.classList.contains("e-carousel-slide-animation")?sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i)?this.itemsContainer.classList.add("e-slide"):this.itemsContainer.style.transitionDuration=(sf.base.Browser.isDevice?e.distanceX:t)/i/10+"s":this.element.classList.contains("e-carousel-fade-animation")&&this.itemsContainer.classList.add("e-fade-in-out")},t.prototype.confirmSwipe=function(e,t){sf.base.addClass([this.element],"e-translate"),sf.base.isNullOrUndefined(t)?(this.changeActiveClass(e),this.changeSlide(e)):this.changeActiveClass(e,t)},t.prototype.cancelSwipe=function(){this.element.classList.add("e-translate"),this.onTransitionEnd()},t.prototype.changeActiveClass=function(t,i){var n=this.element.querySelector("."+e+".e-active:not(.e-clone)").previousElementSibling,s=this.element.querySelector("."+e+".e-active:not(.e-clone)").nextElementSibling;if(this.element.querySelectorAll("."+e+".e-active").forEach((function(e){e.classList.remove("e-active")})),!sf.base.isNullOrUndefined(i)){var o=this.element.querySelectorAll("."+e+":not(.e-clone)")[i];return o.classList.add("e-active"),void("Left"===t?o.classList.add("e-next"):(t="Right")&&o.classList.add("e-prev"))}"Left"===t?s.classList.contains("e-clone")?this.element.querySelector("."+e+":not(.e-clone)").classList.add("e-active"):s.classList.add("e-active","e-next"):n.classList.contains("e-clone")?this.element.querySelectorAll("."+e)[this.itemsContainer.children.length-2].classList.add("e-active"):n.classList.add("e-active")},t.prototype.getTranslateX=function(e){var t=window.getComputedStyle(e);return new WebKitCSSMatrix(t.webkitTransform).m41},t.prototype.onTransitionEnd=function(){this.itemsContainer.style.transitionDuration="",this.itemsContainer.style.transitionTimingFunction="",this.itemsContainer.style.transform="",this.element.classList.remove("e-translate"),sf.base.removeClass([this.itemsContainer],["e-fade-in-out","e-slide"]),this.timeStampStart=null,this.isScrollTriggered=!1;var t=this.element.querySelector("."+e+".e-prev, ."+e+".e-next");sf.base.isNullOrUndefined(t)||(t.classList.remove("e-prev"),t.classList.remove("e-next"))},t.prototype.changeSlide=function(e,t){e=this.inverseDirection(e);try{this.dotnetRef.invokeMethodAsync("ChangeSlide",e)}catch(e){console.log(e)}},t}();return{initialize:function(e,i,n,s){new t(e,i,n,s)},swipeHandler:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&(n.applySwipeAnimation(),t=n.inverseDirection(t),n.confirmSwipe(t,i))}}}()},"./modules/sf-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Chart=function(){"use strict";var e,t=(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),i=function(){function e(e,t,i,n,s,o,d,c){void 0===s&&(s=!1),void 0===o&&(o=!1),window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.isTouch=!1,this.eventInterval=80,this.mouseMoveRef=null,this.mouseMoveThreshold=null,this.chartOnMouseClickRef=null,this.chartRightClickRef=null,this.mouseLeaveRef=null,this.chartKeyDownRef=null,this.chartKeyUpRef=null,this.chartMouseWheelRef=null,this.chartOnMouseDownRef=null,this.mouseEndRef=null,this.chartMouseWheelThreshold=null,this.domMouseMoveRef=null,this.domMouseMoveThreshold=null,this.scrollbarMouseMoveThreshold=null,this.scrollbarMouseWheelThreshold=null,this.domMouseUpRef=null,this.longPressBound=null,this.touchObject=null,this.pinchZoomingEnable=!1,this.crosshairEnable=!1,this.toggleVisibility=!0,this.enableHighlight=!0,this.highlightMode="None",this.selectionMode="None",this.rectSeries=!0,this.isSeriesMode=!1,this.seriesTypes=[],this.redraw=!1,this.selectedDataIndexes=[],this.highlightDataIndexes=[],this.previousSelectedEle=[],this.highlightColor="",this.highlightPattern="None",this.selectionPattern="None",this.legendModule=[],this.allowMultiSelection=!1,this.drawType=[],this.previousHighlightedIndex=-1,this.tooltipBase=new r,this.markerExplodeBase=new a,this.crosshairBase=new l,this.userInteractionBase=new h,this.zoomBase=new f,this.zoomToolkitBase=new u,this.isChartPanning=!1,this.axes=[],this.scrollDownRef=null,this.wheelEventEndTimeout=null,this.isWheelScrolling=!1,this.pinchStyle="opacity: 0; position: absolute; display: block; width: 100px; height: 100px; background: transparent; border: 2px solid blue;",this.pinchtarget=null,this.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus()},this.id=t,this.element=i,this.dotnetref=n,this.isZooming=s,this.isScrollbar=o,this.options=d,this.currentLegendIndex=0,this.currentPointIndex=0,this.currentSeriesIndex=0,this.currentAnnotationIndex=0,this.previousTargetId="",this.isZoomed=!1,this.selectionHighlightOptions(c),this.selectedDataIndexes=c.selectedDataIndexes||[],this.unSelected=t+"_ej2_deselected",this.dataId=e,window.sfBlazor.setCompInstance(this),this.getTooltipData(),this.userInteractionBase.svgRenderer=new sf.svgbase.SvgRenderer(this.element.id),this.removeTooltipData()}return e.prototype.render=function(){this.unWireEvents(this.id,this.dotnetref),this.wireEvents(this.id,this.dotnetref)},e.prototype.destroy=function(){this.unWireEvents(this.id,this.dotnetref),this.dotnetref.invokeMethodAsync("DisposeDotNetReference")},e.prototype.selectionHighlightOptions=function(e){this.enableHighlight=e.enableHighlight,this.pinchZoomingEnable=e.pinchZoomingEnable,this.toggleVisibility=e.toggleVisibility,this.highlightMode=e.highlightMode,this.selectionMode=e.selectionMode,this.seriesTypes=e.seriesTypes,this.highlightColor=e.highlightColor,this.highlightPattern=e.highlightPattern,this.selectionPattern=e.selectionPattern,this.allowMultiSelection=e.allowMultiSelection,this.drawType=e.drawType,this.oldMode=this.currentMode},e.prototype.getTooltipData=function(e,t,i,n){var s=document.getElementById(this.element.id+"_tooltip_data");if(s){this.userInteractionBase.chartData=s.getAttributeNames().map((function(e){return s.getAttribute(e)})),this.userInteractionBase.chartData.shift();var o=this.userInteractionBase.chartData.indexOf("display: block;");if(o>-1&&this.userInteractionBase.chartData.splice(o,1),this.userInteractionBase.isStockChart)for(var r=this.userInteractionBase.chartData.indexOf("");r>-1;)this.userInteractionBase.chartData.splice(r,1),r=this.userInteractionBase.chartData.indexOf("");sf.base.isNullOrUndefined(this.userInteractionBase.visibleSeries)||this.userInteractionBase.visibleSeries.forEach((function(e){e.visible=!!document.getElementById(e.id)})),this.userInteractionBase.chartData.length>0&&e&&t&&i&&n&&(this.getVisibleSeries(this,e,t,i,n),this.isDataLoaded=!0),sf.base.isNullOrUndefined(this.tooltipBase.tooltipElementSize)&&this.tooltipBase.tooltipModule&&this.tooltipBase.tooltipModule.template&&this.getElementSize(this.element.id+"_tooltip")}},e.prototype.removeTooltipData=function(){var e=document.getElementById(this.element.id+"_tooltip_data");e&&e.getAttributeNames().length>1&&this.dotnetref.invokeMethodAsync("RemoveTooltipData")},e.prototype.tooltipOptions=function(e,t){this.userInteractionBase.availableSize=t.availableSize,this.userInteractionBase.chartBorderWidth=t.borderWidth,this.userInteractionBase.disableTrackTooltip=t.disableTrackTooltip,this.userInteractionBase.axisClipRect=t.axisClipRect,this.userInteractionBase.isPointMouseDown=t.isPointMouseDown,this.userInteractionBase.isPointDragging=t.isPointDragging,this.userInteractionBase.isInverted=t.isInverted,this.userInteractionBase.chartAreaType=t.chartAreaType,this.tooltipBase.isTooltipMarker=t.isMarkerEnable,this.tooltipBase.tooltipModule=e,this.tooltipBase.tooltipFormat=sf.base.isNullOrUndefined(t.tooltipFormat)?t.tooltipFormat:this.getTooltipFormat(t.tooltipFormat),this.userInteractionBase.enableRTL=t.enableRTL,this.crosshairBase.crosshair=t.crosshair,this.crosshairEnable=t.crosshair.enable,this.markerExplodeBase.markerExploded=t.markerExplode,this.userInteractionBase.chartRadius=t.chartRadius,this.userInteractionBase.theme=t.theme,this.crosshairBase.themeStyleCrosshairLine=t.themeStyleCrosshairLine,this.crosshairBase.themeStyleCrosshairFill=t.themeStyleCrosshairFill,this.crosshairBase.themeStyleCrosshairLabel=t.themeStyleCrosshairLabel,this.crosshairBase.themeStyleCrosshairTextSize=t.themeStyleCrosshairTextSize,this.crosshairBase.themeStyleCrosshairFontFamily=t.themeStyleCrosshairFontFamily,this.crosshairBase.themeStyleCrosshairFontWeight=t.themeStyleCrosshairFontWeight,this.tooltipBase.tooltipModule.template=t.templateString?t.templateString:this.tooltipBase.tooltipModule.template,this.userInteractionBase.initialRect=t.initialRect,this.userInteractionBase.secondaryElementOffset=t.secondaryElementOffset,sf.base.isNullOrUndefined(this.tooltipBase.tooltipElementSize)&&this.tooltipBase.tooltipModule.template&&this.getElementSize(this.element.id+"_tooltip"),this.userInteractionBase.isStockChart=this.element.id.indexOf("_stockChart")>-1,this.tooltipBase.tooltipEventCalled=t.tooltipEventCalled,this.tooltipBase.sharedTooltipEventCalled=t.sharedTooltipEventCalled,this.tooltipBase.crosshairMouseMoveEventCalled=t.crosshairMouseMoveEventCalled,this.tooltipBase.seriesTooltipTop=t.seriesTooltipTop,this.userInteractionBase.useGrouping=t.useGrouping,this.tooltipBase.tooltipDuration=0!=this.tooltipBase.tooltipModule.duration?this.tooltipBase.tooltipModule.duration:this.tooltipBase.tooltipModule.shared?100:300,this.crosshairEnable?this.togglePointerEvents(this.element.id,!1):this.pinchZoomingEnable&&this.togglePointerEvents(this.element.id,!0)},e.prototype.getElementSize=function(e){var t=document.getElementById(e);t&&0===t.childNodes.length&&(t.appendChild(document.getElementById("tooltip_template")),this.tooltipBase.tooltipElementSize={width:t.offsetWidth,height:t.offsetHeight},t.removeChild(t.firstChild))},e.prototype.clipPathID=function(e){return this.element.id+"_ChartSeriesClipRect_"+e},e.prototype.markerClipPathId=function(e){return this.element.id+"_ChartMarkerClipRect_"+e},e.prototype.getVisibleSeries=function(e,t,i,n,s){e.userInteractionBase.visibleSeries=[],e.userInteractionBase.axes=s;var o=document.getElementById(e.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),r=document.getElementById(e.element.id+"IndicatorCollection").querySelectorAll("[id*='_Group']"),a=document.getElementById(e.element.id+"TrendLineCollection").querySelectorAll("[id*='TrendlineSeriesGroup']"),l=[];o.length>0&&o.forEach((function(e){l.push(e)})),r.length>0&&r.forEach((function(e){l.push(e)})),a.length>0&&a.forEach((function(e){l.push(e)}));for(var h,d=function(s){var o=l[s].id,r=document.getElementById(o),a=sf.base.isNullOrUndefined(r)?null:r.getAttribute("data-point").split(",");h={id:o,name:a[15],index:parseInt(a[4]),interior:a[2],visible:"True"===a[8],category:a[10],seriesType:a[11],type:a[3],drawType:a[12],marker:i[s],border:n[s],shape:a[13],points:sf.base.isNullOrUndefined(c.userInteractionBase.chartData[s])||""==c.userInteractionBase.chartData[s]?[]:JSON.parse(e.userInteractionBase.chartData[s]),clipRect:t[s],tooltipFormat:""!==a[14]?c.getTooltipFormat(a[14]):a[14],enableTooltip:"True"===a[16],dataEditSettings:"True"===a[17],chartIsTransposed:"True"===a[18],opacity:parseFloat(a[19]),x_Axis:c.userInteractionBase.axes.filter((function(e){return e.name===a[20]}))[0],y_Axis:c.userInteractionBase.axes.filter((function(e){return e.name===a[21]}))[0],axesCount:c.userInteractionBase.axes.length,volume:a[22],markerDataLabelFormat:a[23],xMin:parseInt(a[24]),xMax:parseInt(a[25])},e.userInteractionBase.visibleSeries.push(h)},c=this,p=0;p<l.length;p++)d(p)},e.prototype.getTooltipFormat=function(e){return e=e.replace("tooltip","tT").replace("text","t").replace("high","h").replace("low","l").replace("open","o").replace("close","c").replace("volume","v").replace("size","sI").replace("percentage","p").replace("minimum","mI").replace("maximum","mX").replace("outliers","oL").replace("upperQuartile","uQ").replace("lowerQuartile","lQ").replace("median","m").replace("average","a")},e.prototype.calculateSecondaryOffset=function(e){var t=document.getElementById(e.replace("_stockChart_chart","")+"_svg").getBoundingClientRect(),i=document.getElementById(e).getBoundingClientRect();this.userInteractionBase.secondaryElementOffset&&(this.userInteractionBase.secondaryElementOffset.left=Math.max(t.left-i.left,0),this.userInteractionBase.secondaryElementOffset.top=Math.max(t.top-i.top,0))},e.prototype.unWireEvents=function(e,t){var i=document.getElementById(e);if(i){this.dotnetref=t,m.dotnetrefCollection=m.dotnetrefCollection.filter((function(t){return t.id!==e}));
/*! Find the Events type */
var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";
/*! Bind the Event handler */if(i.removeEventListener("mousemove",this.mouseMoveRef),i.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(i,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),sf.base.EventHandler.remove(i,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.remove(i,"click",this.chartOnMouseClickRef),sf.base.EventHandler.remove(i,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.remove(i,n,this.mouseLeaveRef),sf.base.EventHandler.remove(i,"keydown",this.chartKeyDownRef),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler),sf.base.EventHandler.remove(i,"keyup",this.chartKeyUpRef),this.isZooming||this.isScrollbar){var s="mozilla"===sf.base.Browser.info.name?sf.base.Browser.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";i.removeEventListener(s,this.chartMouseWheelRef)}if(this.isScrollbar&&(window.removeEventListener("mousedown",this.scrollDownRef),window.removeEventListener("touchstart",this.scrollDownRef),window.removeEventListener("mousemove",this.domMouseMoveRef),window.removeEventListener("touchmove",this.domMouseMoveRef),window.removeEventListener("mouseup",this.domMouseUpRef,!1),window.removeEventListener("touchend",this.domMouseUpRef,!1)),0==document.getElementsByClassName("e-chart").length){var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,o,m.resizeBound)}this.touchObject&&(this.touchObject.destroy(),this.touchObject=null)
/*! Apply the style for chart */}},e.prototype.wireEvents=function(e,t){var i=document.getElementById(e);if(i){this.dotnetref=t,m.dotnetrefCollection.push({id:e,dotnetref:t});
/*! Find the Events type */
var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";if(this.chartOnMouseDownRef=this.chartOnMouseDown.bind(this,t,e),this.mouseEndRef=this.mouseEnd.bind(this,t,e),this.mouseMoveRef=this.mouseMove.bind(this,t,e),this.chartOnMouseClickRef=this.chartOnMouseClick.bind(this,t,e),this.chartRightClickRef=this.chartRightClick.bind(this,t,e),this.chartKeyDownRef=this.chartOnKeyDown.bind(this,this.dotnetref,this.id),this.chartKeyUpRef=this.chartOnKeyUp.bind(this,this.dotnetref,this.id),this.mouseLeaveRef=this.mouseLeave.bind(this,t,e),
/*! Bind the Event handler */
i.addEventListener("mousemove",this.mouseMoveRef),i.addEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.add(i,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),sf.base.EventHandler.add(i,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.add(i,"click",this.chartOnMouseClickRef),sf.base.EventHandler.add(i,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.add(i,n,this.mouseLeaveRef),sf.base.EventHandler.add(i,"keydown",this.chartKeyDownRef),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this),sf.base.EventHandler.add(i,"keyup",this.chartKeyUpRef),this.isZooming||this.isScrollbar){this.chartMouseWheelRef=this.chartMouseWheel.bind(this,t,e);var s="mozilla"===sf.base.Browser.info.name?sf.base.Browser.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";i.addEventListener(s,this.chartMouseWheelRef)}this.isScrollbar&&(this.scrollDownRef=this.scrollDown.bind(this,t,e),this.domMouseMoveRef=this.domMouseMove.bind(this,t,e),this.domMouseUpRef=this.domMouseUp.bind(this,t,e),window.addEventListener("mousedown",this.scrollDownRef),window.addEventListener("touchstart",this.scrollDownRef),window.addEventListener("mousemove",this.domMouseMoveRef),window.addEventListener("touchmove",this.domMouseMoveRef),window.addEventListener("mouseup",this.domMouseUpRef,!1),window.addEventListener("touchend",this.domMouseUpRef,!1)),m.resizeBound=m.chartResize.bind(this,m.dotnetrefCollection);var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,o,m.resizeBound),this.longPressBound=this.longPress.bind(this,t,e),this.touchObject=new sf.base.Touch(i,{tapHold:this.longPressBound,tapHoldThreshold:500})}},e.prototype.getEventArgs=function(e,t){var i=e.changedTouches?e.changedTouches[0].clientX:e.clientX,n=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.setMouseXY(i,n,t);var s=e.touches,o=[];if(e.type.indexOf("touch")>-1)for(var r=0,a=s.length;r<a;r++)o.push({pageX:s[r].clientX,pageY:s[r].clientY,pointerId:e.pointerId||0});return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:o,pointerId:e.pointerId}},e.prototype.getWheelArgs=function(e,t){return this.setMouseXY(e.clientX,e.clientY,t),{detail:e.detail,wheelDelta:e.wheelDelta,target:e.currentTarget?e.currentTarget.id:e.srcElement?e.srcElement.id:e.target?e.target.id:"",clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer}},e.prototype.setMouseXY=function(e,t,i){var n=document.getElementById(i.replace("_stockChart_chart","")+"_svg").getBoundingClientRect(),s=document.getElementById(i).getBoundingClientRect();this.userInteractionBase.secondaryElementOffset&&(this.userInteractionBase.secondaryElementOffset.left=Math.max(n.left-(this.userInteractionBase.isStockChart?document.getElementById(i.replace("_stockChart_chart","")).getBoundingClientRect().left:s.left),0),this.userInteractionBase.secondaryElementOffset.top=Math.max(n.top-s.top,0),this.mouseY=t-s.top-this.userInteractionBase.secondaryElementOffset.top,this.mouseX=e-s.left-this.userInteractionBase.secondaryElementOffset.left)},e.prototype.chartOnMouseDown=function(e,t,i){this.dotnetref=e;var n,s,o,r=i.target,a=window.sfBlazor.getCompInstance(this.dataId);if(r.id.indexOf("legend")>0&&(a.previousHighlightedIndex=-1),"touchstart"===i.type?(this.isTouch=!0,n=(o=i).changedTouches[0].clientX,s=o.changedTouches[0].clientY):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,n=i.clientX,s=i.clientY),this.setMouseXY(n,s,t),i.type.indexOf("touch")>-1){var l=i.changedTouches?i.changedTouches[0].clientX:i.clientX,h=i.changedTouches?i.changedTouches[0].clientY:i.clientY,d=i.touches.length>1;a.pinchZoomingEnable?(this.pinchtarget=document.getElementById(t+"_Pinch_target"),this.pinchtarget.setAttribute("style",this.pinchStyle+" top: "+(h-50)+"px; left: "+(l-50)+"px;"),this.togglePointerEvents(t,!a.crosshairEnable||!a.userInteractionBase.startMove||d),i.preventDefault(),"mozilla"!==sf.base.Browser.info.name.toLowerCase()&&d&&i.stopImmediatePropagation()):a.crosshairEnable&&a.userInteractionBase.startMove&&(this.togglePointerEvents(t,!1),i.preventDefault())}return this.zoomBase.zoomingModule&&(r.id.indexOf("_Zooming_")>-1&&m.zoomToolkitMouseDown(this,r),r.id.indexOf("_Zooming_")>-1||r.id.indexOf("_scrollBar_")>-1||m.onZoomingMouseDown(this.getEventArgs(i,t),this)),this.userInteractionBase.isStockChart&&a.zoomBase.zoomSettings.enablePan&&("Logarithmic"===a.userInteractionBase.axes[0].valueType?document.getElementById(this.element.id).setAttribute("cursor","not-allowed"):document.getElementById(this.element.id).setAttribute("cursor","pointer")),e.invokeMethodAsync("OnZoomingMouseDown",this.getEventArgs(i,t)),!1},e.prototype.togglePointerEvents=function(e,t){t?this.setPointerEvents(e,"none"):this.setPointerEvents(e,"auto")},e.prototype.setPointerEvents=function(e,t){document.getElementById(e+"_sfchart_rect_style").innerHTML="#"+e+"_ChartAreaBorder, #"+e+"_ChartBorder {pointer-events: "+t+"; }"},e.prototype.chartMouseWheel=function(e,t,i){var n=this;return this.dotnetref=e,(this.zoomBase.zoomingModule||this.isScrollbar)&&m.zoomingMouseWheelHandler(i,this),e.invokeMethodAsync("OnChartMouseWheel",this.getWheelArgs(i,t)),this.wheelEventEndTimeout&&clearTimeout(this.wheelEventEndTimeout),this.wheelEventEndTimeout=setTimeout((function(){e.invokeMethodAsync("UpdateChartData"),n.isWheelScrolling=!1}),100),i.preventDefault(),!1},e.prototype.mouseMove=function(e,t,i,n){void 0===n&&(n=!1);var s=i.target;if(!sf.base.isNullOrUndefined(document.getElementById(s.id))&&("None"!==this.highlightMode||this.enableHighlight)){if((!sf.base.isNullOrUndefined(s)||s.id.indexOf("Point")>-1||s.id.indexOf("Symbol")>-1)&&(s=s.id.indexOf("text")>-1?m.findDOMElement(s.id.replace("text","shape")):m.findDOMElement(s.id),!sf.base.isNullOrUndefined(s)&&s.hasAttribute("class")&&(s.getAttribute("class").indexOf("highlight")>-1||s.getAttribute("class").indexOf("selection")>-1)))return;"None"!==this.highlightMode&&m.calculateSelectedElements(i,this.dataId);for(var o=void 0,r=[this.id+"_chart_legend_text_",this.id+"_chart_legend_shape_marker_",this.id+"_chart_legend_shape_",this.id+"_chart_legend_g_"],a=0;a<r.length;a++)if(!sf.base.isNullOrUndefined(s)&&!s.id.indexOf(r[a])){o=parseInt(s.id.split(r[a])[1]);break}var l=window.sfBlazor.getCompInstance(this.dataId);!sf.base.isNullOrUndefined(s)&&s.id.indexOf("legend")>0&&(m.isTargetChanged(o,l)||"None"!==this.highlightMode)&&!sf.base.Browser.isDevice&&(this.legendVisible=!0,m.legendSelection(i,l.dataId)),sf.base.isNullOrUndefined(s)||s.id.indexOf("legend")>0||m.resetPreviousHighlightIndex(l),sf.base.isNullOrUndefined(s)||"None"!=this.highlightMode||s.id.indexOf("legend")>0||!(l.highlightDataIndexes.length>0)||m.removeSelectionStyles(this.dataId)}if(!n){var h,d,c;if("touchmove"===i.type){this.isTouch=!0,h=(c=i).changedTouches[0].clientX,d=c.changedTouches[0].clientY;l=window.sfBlazor.getCompInstance(this.dataId);this.pinchtarget&&l.pinchZoomingEnable&&(this.pinchtarget.setAttribute("style",this.pinchStyle+" top: "+(d-50)+"px; left: "+(h-50)+"px;"),i.preventDefault()),l.crosshairBase.crosshair.enable&&l.userInteractionBase.startMove&&i.preventDefault()}else this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,h=i.clientX,d=i.clientY;this.dotnetref=e,document.getElementById(t.replace("_stockChart_chart","")+"_svg")&&(this.setMouseXY(h,d,t),!this.userInteractionBase.chartStartMove||!this.isTouch&&this.zoomBase&&this.zoomBase.isChartDrag||(null!=this.tooltipBase.tooltipModule&&m.tooltipMousemovehandler(this),this.markerExplodeBase.markerExploded&&m.markerMove(this,!1),this.crosshairBase.crosshair&&this.crosshairBase.crosshair.enable&&m.crosshairMousemoveHandler(this)),this.isTouch||(!sf.base.isNullOrUndefined(s)&&s.id.indexOf("_Zooming_")>-1?m.zoomToolkitTooltip(this,s.id,i):m.zoomToolkitRemoveTooltip(this)),this.zoomBase.zoomingModule&&m.onZoomingMouseMove(this.getEventArgs(i,t),this),e.invokeMethodAsync("OnZoomingMouseMove",this.getEventArgs(i,t)),this.isTouch=!1)}},e.prototype.mouseEnd=function(e,t,i){var n,s,o=this;this.dotnetref=e;var r="touchmove"===i.type?i:null;if(n="touchmove"===i.type?r.changedTouches[0].clientX:i.clientX,s="touchmove"===i.type?r.changedTouches[0].clientY:i.clientY,this.isTouch=i.type.indexOf("touch")>-1||("touch"===i.pointerType||"2"===i.pointerType),document.getElementById(t.replace("_stockChart_chart","")+"_svg")){this.setMouseXY(n,s,t),this.isTouch&&((this.tooltipBase.tooltipModule.enable&&!this.crosshairBase.crosshair.enable&&!m.isSelected()&&sf.svgbase.withInAreaBounds(this.mouseX,this.mouseY,this.userInteractionBase.axisClipRect)&&this.tooltipBase.tooltipModule.shared||this.tooltipBase.tooltipModule.shared)&&(m.tooltip(this),this.markerExplodeBase.markerExploded&&m.markerMove(this,!1)),this.clearTooltip&&clearTimeout(this.clearTooltip),this.clearTooltip=setTimeout((function(){m.removeTooltip(300,o)}),1e3),m.removeMarker(this)),this.userInteractionBase.startMove&&(m.removeCrosshair(this,2e3),this.userInteractionBase.startMove=!1);var a=window.sfBlazor.getCompInstance(this.dataId);"None"==this.highlightMode&&a.highlightDataIndexes.length>0&&m.removeSelectionStyles(this.dataId)}if("touchend"==i.type)if(this.pinchZoomingEnable){var l=i.touches.length>0;this.togglePointerEvents(t,!this.crosshairEnable||l)}else this.togglePointerEvents(t,!1);return this.zoomBase.zoomingModule&&(this.zoomBase.threshold=(new Date).getTime()+300,m.onZoomingMouseEnd(this.getEventArgs(i,t),this)),e.invokeMethodAsync("OnZoomingMouseEnd",this.getEventArgs(i,t)),this.isTouch=!1,!1},e.prototype.chartOnMouseClick=function(e,t,i){m.calculateSelectedElements(i,this.dataId);var n=i.target,s=window.sfBlazor.getCompInstance(this.dataId);n.id.indexOf("legend")>0&&!s.toggleVisibility&&(this.legendVisible=!0,m.legendSelection(i,s.dataId))},e.prototype.chartRightClick=function(e,t,i){return this.dotnetref=e,!window.sfBlazor.getCompInstance(this.dataId).crosshairBase.crosshair.enable||2!==i.buttons&&"touch"!==i.pointerType||(i.preventDefault(),i.stopPropagation()),e.invokeMethodAsync("OnChartMouseRightClick",this.getEventArgs(i,t)),!1},e.prototype.chartOnKeyDown=function(e,t,i){this.dotnetref=e;var n="",s=i.target;if((this.isZoomed&&"Tab"==i.code||"Space"==i.code)&&i.preventDefault(),this.options.showTooltip&&("Tab"==i.code&&this.previousTargetId.indexOf("Series")>-1||"Escape"===i.code)&&(n="ESC"),!i.ctrlKey||"+"!==i.key&&"Equal"!==i.code&&"-"!==i.key&&"Minus"!==i.code?82===i.keyCode&&this.isZoomed?(i.preventDefault(),this.isZoomed=!1,n="R"):i.code.indexOf("Arrow")>-1&&(i.preventDefault(),n=this.isZoomed?i.code:""):(i.preventDefault(),this.isZoomed=this.options.enableZoom,m.fadeOut(this.element),n=this.isZoomed?i.code:""),i.ctrlKey&&"p"===i.key&&(i.preventDefault(),n="CtrlP"),""!=n){if(this.zoomBase.zoomingModule){if("Equal"!=n&&"Minus"!=n||(this.zoomBase.zoomingModule.isZoomed=this.zoomBase.zoomingModule.performedUI=!0,this.zoomBase.zoomingModule.isPanning=this.zoomBase.isChartDrag=!1,"Equal"==n?m.zoomToolkitZoomIn(this,s.getAttribute("opacity")):m.zoomToolkitZoomOut(this,s.getAttribute("opacity")),m.performZoomRedraw(this,!0)),"ArrowUp"==n||"ArrowDown"==n||"ArrowLeft"==n||"ArrowRight"==n){var o="ArrowUp"==n?10:"ArrowDown"==n?-10:0,r="ArrowLeft"==n?-10:"ArrowRight"==n?10:0;this.zoomBase.zoomingModule.isPanning=this.zoomBase.isChartDrag=!0,m.doPan(this,this.zoomBase.axisCollections,r,o),m.performZoomRedraw(this,!0)}"R"==n&&m.zoomToolkitReset(this)}e.invokeMethodAsync("OnChartKeyboardNavigations",n,i.target.id)}return!1},e.prototype.processPointSelection=function(e,t,i,n){var s=document.getElementById(t);sf.base.isNullOrUndefined(s)||("Enter"===n?this.chartOnMouseClick(e,t,{target:document.getElementById(i),type:"click"}):"Tab"!==n&&"ArrowMove"!==n||this.mouseMove(e,t,{target:document.getElementById(i),type:"mousemove"},!0))},e.prototype.chartOnKeyUp=function(e,t,i){this.dotnetref=e;var n,s,o="",r=i.target,a=i.target.id,l=i.target,h=m.getElement(this.element.id+"_ChartTitle"),d=m.getElement(this.element.id+"SeriesCollection"),c=m.getElement(this.element.id+"_chart_legend_translate_g"),p=m.getElement(this.element.id+"_chart_legend_pageup"),u=m.getElement(this.element.id+"_Annotation_Collections"),f=m.getElement(this.element.id+"_Zooming_ZoomIn"),g=m.getElement(this.element.id+"_Zooming_ZoomOut"),v=m.getElement(this.element.id+"_Zooming_Reset");if(!this.isZoomed&&82!==i.keyCode){var b,y;if(h&&h.setAttribute("class","e-chart-focused"),d&&d.firstElementChild)if(b=d.firstElementChild.children[1])(y=b.getAttribute("class"))&&-1===y.indexOf("e-chart-focused")?y+=" e-chart-focused":y||(y="e-chart-focused"),b.setAttribute("class",y+" e-chart-focused");if(c)if(b=c.firstElementChild)(y=b.getAttribute("class"))&&-1===y.indexOf("e-chart-focused")?y+=" e-chart-focused":y||(y="e-chart-focused"),b.setAttribute("class",y);if(u)if(b=u.firstElementChild)(y=b.getAttribute("class"))&&-1===y.indexOf("e-chart-focused")?y+=" e-chart-focused":y||(y="e-chart-focused"),b.setAttribute("class",y);if(p&&p.setAttribute("class","e-chart-focused"),f&&f.setAttribute("class","e-chart-focused"),g&&g.setAttribute("class","e-chart-focused"),v&&v.setAttribute("class","e-chart-focused"),"Tab"==i.code){if(""!=this.previousTargetId)if(this.previousTargetId.indexOf("_Series_")>-1&&-1==a.indexOf("_Series_")){if(n=m.getElement(this.element.id+"SeriesCollection"),!sf.base.isNullOrUndefined(n.children[this.currentSeriesIndex])){var C=this.previousTargetId.indexOf("_Symbol")>-1?m.getElement(this.element.id+"SymbolGroup"+this.currentSeriesIndex).children[this.currentPointIndex+1]:this.previousTargetId.indexOf("_Point_")>-1?n.children[this.currentSeriesIndex].children[this.currentPointIndex+1]:n.children[this.currentSeriesIndex];m.setTabIndex(C,n.firstElementChild),this.currentPointIndex=0,this.currentSeriesIndex=0}}else this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1==a.indexOf("_chart_legend_page")&&-1==a.indexOf("_chart_legend_g_")?m.setTabIndex(i.target,m.getElement(this.element.id+"_chart_legend_pageup")):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1==a.indexOf("_chart_legend_g_")&&(n=m.getElement(this.element.id+"_chart_legend_translate_g"),m.setTabIndex(n.children[this.currentLegendIndex],n.firstElementChild));this.previousTargetId=a,a.indexOf("SeriesGroup")>-1&&(this.currentSeriesIndex=+a.split("SeriesGroup")[1],l.removeAttribute("tabindex"),l.blur(),-1==l.children[1].id.indexOf("_Point_")&&(s=m.getElement(this.element.id+"SymbolGroup"+a.split("SeriesGroup")[1])),a=m.focusChild(null!=s?s.children[1]:l.children[1])),o=this.options.enableHighlight||this.options.showTooltip?"Tab":""}else if(i.code.indexOf("Arrow")>-1){if(i.preventDefault(),this.previousTargetId=a,a.indexOf("_chart_legend_page")>-1)"ArrowLeft"==i.code?(m.getElement(this.element.id+"_chart_legend_pagedown").removeAttribute("tabindex"),m.focusChild(m.getElement(this.element.id+"_chart_legend_pageup"))):"ArrowRight"==i.code&&(m.getElement(this.element.id+"_chart_legend_pageup").removeAttribute("tabindex"),m.focusChild(m.getElement(this.element.id+"_chart_legend_pagedown")));else if(a.indexOf("_chart_legend_")>-1){var w=l.parentElement.children;w[this.currentLegendIndex].removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"==i.code||"ArrowRight"==i.code?1:-1,this.currentLegendIndex=m.getActualIndex(this.currentLegendIndex,w.length);var M=w[this.currentLegendIndex];m.focusChild(M),a=M.children[1].id,o=this.options.enableHighlight?"ArrowMove":""}else if(a.indexOf("_Annotation_")>-1){var S=l.parentElement.children;S[this.currentAnnotationIndex].removeAttribute("tabindex"),this.currentAnnotationIndex+="ArrowUp"==i.code||"ArrowRight"==i.code?1:-1,this.currentAnnotationIndex=m.getActualIndex(this.currentAnnotationIndex,S.length);var x=S[this.currentAnnotationIndex];m.focusChild(x),a=x.children[1].id,o=""}else if(a.indexOf("_Series_")>-1){n=l.parentElement.parentElement;var N=i.target;if(l.removeAttribute("tabindex"),l.blur(),"ArrowRight"==i.code||"ArrowLeft"==i.code){for(var O=[],E=0;E<n.children.length;E++)n.children[E].id.indexOf("SeriesGroup")>-1&&O.push(+n.children[E].id.split("SeriesGroup")[1]);this.currentSeriesIndex=O.indexOf(this.currentSeriesIndex)+("ArrowRight"==i.code?1:-1),this.currentSeriesIndex=O[m.getActualIndex(this.currentSeriesIndex,O.length)],n=m.getElement(this.element.id+"SeriesGroup"+this.currentSeriesIndex),s=m.getElement(this.element.id+"SymbolGroup"+this.currentSeriesIndex),this.currentPointIndex=m.getActualIndex(this.currentPointIndex,s?s.childElementCount:n.childElementCount),N=-1==n.children[1].id.indexOf("_Point_")&&s?s.children[this.currentPointIndex+1]:n.children[this.currentPointIndex+1]}else this.currentPointIndex+="ArrowUp"==i.code?1:-1,a.indexOf("_Symbol")>-1?(this.currentPointIndex=m.getActualIndex(this.currentPointIndex,m.getElement(this.element.id+"SymbolGroup"+this.currentSeriesIndex).childElementCount-1),N=m.getElement(this.element.id+"_Series_"+this.currentSeriesIndex+"_Point_"+this.currentPointIndex+"_Symbol")):a.indexOf("_Point_")>-1&&(this.currentPointIndex=m.getActualIndex(this.currentPointIndex,m.getElement(this.element.id+"SeriesGroup"+this.currentSeriesIndex).childElementCount-1),N=m.getElement(this.element.id+"_Series_"+this.currentSeriesIndex+"_Point_"+this.currentPointIndex));a=m.focusChild(N),o=this.options.showTooltip?"ArrowMove":""}}else"Enter"!=i.code&&"Space"!=i.code||!(a.indexOf("_chart_legend_")>-1||a.indexOf("_Point_")>-1)||(a=a.indexOf("_chart_legend_page")>-1?a:a.indexOf("_chart_legend_")>-1?l.children[1].id:a,o="Enter")}if(a.indexOf("_Zooming_")>-1&&this.zoomBase.zoomingModule&&("Enter"!=i.code&&"Space"!=i.code||(this.zoomBase.zoomingModule.isZoomed=this.zoomBase.zoomingModule.performedUI=!0,this.zoomBase.zoomingModule.isPanning=this.zoomBase.isChartDrag=!1,a.indexOf("_Zooming_ZoomIn")>-1?(m.zoomToolkitZoomIn(this,r.getAttribute("opacity")),o="Enter"):a.indexOf("_Zooming_ZoomOut")>-1?(m.zoomToolkitZoomOut(this,r.getAttribute("opacity")),o="Enter"):a.indexOf("_Zooming_Reset")>-1&&(m.zoomToolkitReset(this),o="Enter"),m.performZoomRedraw(this,!1))),""!=o){if("ArrowMove"==o||"Tab"==o)if(a.indexOf("_Point_")>-1){var I,T=parseInt(a.split("_Series_")[1].split("_Point_")[0]),D=parseInt(a.split("_Series_")[1].replace("_Symbol","").split("_Point_")[1]);this.userInteractionBase.visibleSeries.forEach((function(e){e.index===T&&(I=e)}));var j=m.isRectSeries(I.type)?I.points[D].r[0]:I.points[D].s[0];this.mouseX=Math.ceil(j.x+this.userInteractionBase.initialRect.x),this.mouseY=Math.ceil(j.y+this.userInteractionBase.initialRect.y),m.tooltipMousemovehandler(this)}else m.removeTooltip(1,this);"ESC"==o&&m.removeTooltip(1,this),this.processPointSelection(e,t,a,o),e.invokeMethodAsync("OnChartKeyboardNavigations",o,a)}return!1},e.prototype.mouseLeave=function(e,t,i){return null!=this.tooltipBase.tooltipModule&&m.removeTooltip(this.tooltipBase.tooltipModule.fadeOutDuration,this),null!=this.crosshairBase.crosshair&&m.removeCrosshair(this,1e3),this.dotnetref=e,this.zoomBase.zoomingModule&&(this.zoomBase.isChartDrag=this.userInteractionBase.isPointMouseDown=!1,m.mouseCancelHandler(this)),e.invokeMethodAsync("OnChartMouseLeave",this.getEventArgs(i,t)),!1},e.prototype.longPress=function(e,t,i){this.dotnetref=e;var n=i&&i.originalEvent.changedTouches?i.originalEvent.changedTouches[0].clientX:0,s=i&&i.originalEvent.changedTouches?i.originalEvent.changedTouches[0].clientY:0;this.setMouseXY(n,s,t);this.mouseX,this.mouseY;return this.userInteractionBase.startMove=!0,sf.svgbase.withInAreaBounds(this.mouseX,this.mouseY,this.userInteractionBase.axisClipRect)&&(m.markerMove(this,!1),this.tooltipBase.tooltipModule.enable&&m.tooltip(this),this.crosshairBase.crosshair.enable&&m.createCrosshair(this)),this.dotnetref.invokeMethodAsync("OnChartLongPress"),!1},e.prototype.getAxisScrollbar=function(e,t){var i="",n=[];return m.isExist(e,"_scrollBar_svg")?(n=e.split("_scrollBar_svg"),i=n[n.length-1]):(n=e.split("_"),i=n[n.length-1]),t.filter((function(e){return e.name===i}))[0]},e.prototype.scrollDown=function(e,t,i){var n=i.target.id;if(n.indexOf("scrollBar")>-1){var s=window.sfBlazor.getCompInstance(this.dataId),o=s.scrollbarBase;o.targetId=n;var r=this.getAxisScrollbar(n,o.axes);o.axis=r;var a=o.scrollbarOptions[r.name];a.isVertical="Vertical"===r.orientation;var l=r.isAxisInverse,h=m.getScrollEventArgs(i,[s.id,s.id+"_scrollBar_svg"+r.name]);this.mouseX=h.mouseX,this.mouseY=h.mouseY,o.isResizeLeft=m.isExist(n,"_leftCircle_")||m.isExist(n,"_leftArrow_"),o.isResizeRight=m.isExist(n,"_rightCircle_")||m.isExist(n,"_rightArrow_"),o.previousXY=a.isVertical&&l?this.mouseY:a.isVertical?a.width-this.mouseY:l?a.width-this.mouseX:this.mouseX,o.previousWidth=a.thumbRectWidth,o.previousRectX=a.thumbRectX,o.startZoomPosition=r.zoomPosition,o.startZoomFactor=r.zoomFactor,o.startRange=r.visibleRange,o.scrollStarted=!0;r.zoomPosition,r.zoomFactor,r.visibleRange;if(s.dotnetref.invokeMethodAsync("TriggerScrollEvents",m.getArgs("ScrollStart",r.name,r.zoomPosition,r.zoomFactor,null)),m.isExist(n,"scrollBarThumb_")||m.isExist(n,"gripCircle"))o.isThumbDrag=!0,a.svgObject.style.cursor="-webkit-grabbing";else if(m.isExist(n,"scrollBarBackRect_")){var d=m.moveLength(o);if(a.thumbRectX=m.isWithIn(d,o)?d:a.thumbRectX,m.positionThumb(a.thumbRectX,a.thumbRectWidth,o),m.setZoomFactorPosition(o,a.thumbRectX,a.thumbRectWidth,!1),a.isLazyLoad){var c=a.thumbRectX>o.previousRectX?"RightMove":"LeftMove",p=m.calculateLazyRange(o,c);p&&s.dotnetref.invokeMethodAsync("TriggerScrollEvents",m.getArgs("ScrollStart",r.name,r.zoomPosition,r.zoomFactor,p.currentRange))}}}return!1},e.prototype.domMouseMove=function(e,t,i){var n=i.target.id,s=window.sfBlazor.getCompInstance(this.dataId);if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(n)&&n.indexOf(s.id)>-1){var o=s.scrollbarBase;if((n=!sf.base.isNullOrUndefined(o)&&o.scrollStarted?o.targetId:n).indexOf("scrollBar")>-1){var r=this.getAxisScrollbar(n,o.axes),a=o.scrollbarOptions[r.name],l=r.isAxisInverse;if(sf.base.isNullOrUndefined(a)||a&&!document.getElementById(a.svgObject.id))return null;var h=m.getScrollEventArgs(i,[s.id,s.id+"_scrollBar_svg"+r.name]);this.mouseX=h.mouseX,this.mouseY=h.mouseY,m.setCursor(i.target,this.dataId,r.name),m.setTheme(i.target,this.dataId,r.name);var d=a.isVertical&&l?a.width-this.mouseY:a.isVertical?this.mouseY:this.mouseX,c=(r.visibleRange,a.zoomPosition),p=a.zoomFactor,u=o.previousRectX-a.thumbRectX<0?"RightMove":"LeftMove",f=void 0;a.isLazyLoad&&(o.isThumbDrag||o.isResizeLeft||o.isResizeRight)&&(f=m.calculateLazyRange(o,u));var g=f?f.currentRange:null;if(o.isThumbDrag){o.isScrolling=o.isThumbDrag,d=a.isVertical||l?a.width-d:d;var v=a.thumbRectX+(d-o.previousXY);d>=v+a.thumbRectWidth?m.setCursor(i.target,this.dataId,r.name):a.svgObject.style.cursor="-webkit-grabbing",d>=0&&d<=v+a.thumbRectWidth&&(a.thumbRectX=m.isWithIn(v,o)?v:a.thumbRectX,m.positionThumb(a.thumbRectX,a.thumbRectWidth,o),o.previousXY=d,m.setZoomFactorPosition(o,v,a.thumbRectWidth,!1)),s.dotnetref.invokeMethodAsync("TriggerScrollEvents",m.getArgs("OnScrollChanged",r.name,c,p,g))}else(o.isResizeLeft||o.isResizeRight)&&(m.resizeThumb(o,this.mouseX,this.mouseY),s.dotnetref.invokeMethodAsync("TriggerScrollEvents",m.getArgs("OnScrollChanged",r.name,c,p,g)))}}return!1},e.prototype.domMouseUp=function(e,t,i){var n=i.target.id,s=window.sfBlazor.getCompInstance(this.dataId),o=s.scrollbarBase;if((n=!sf.base.isNullOrUndefined(o)&&o.scrollStarted?o.targetId:n).indexOf("scrollBar")>-1){var r=void 0,a=o.scrollbarOptions[o.axis.name];a.startX=a.thumbRectX;var l=this.getAxisScrollbar(n,o.axes),h=a.startX+a.thumbRectWidth+8+1;if(!o.isResizeLeft&&!o.isResizeRight||a.isLazyLoad||(l.zoomFactor=h>=a.width-1&&a.startX-8.5<=0?1:a.zoomFactor),a.isLazyLoad){var d=o.previousRectX-a.startX;if((d>0||d<0)&&o.isThumbDrag){var c=d<0?"RightMove":"LeftMove";a.startX="RightMove"===c?a.startX+Math.abs(d)<a.width-8?a.startX:a.width-8-a.thumbRectWidth:a.startX+a.thumbRectWidth-Math.abs(d)>8?a.startX:8,(r=m.calculateLazyRange(o,c))&&(s.dotnetref.invokeMethodAsync("TriggerScrollEvents",m.getArgs("OnScrollEnd",l.name,l.zoomPosition,l.zoomFactor,r.currentRange)),o.targetId=n,o.scrollStarted=!1)}(o.isResizeLeft||o.isResizeRight)&&(r=m.calculateLazyRange(o))&&(s.dotnetref.invokeMethodAsync("TriggerScrollEvents",m.getArgs("OnScrollEnd",l.name,l.zoomPosition,l.zoomFactor,r.currentRange)),o.targetId=n,o.scrollStarted=!1)}o.isThumbDrag=!1,o.isResizeLeft=!1,o.isResizeRight=!1,o.isScrollEnd=!1,o.isScrolling=!1,o.scrollStarted&&!a.isLazyLoad&&(s.dotnetref.invokeMethodAsync("TriggerScrollEvents",m.getArgs("OnScrollChanged",l.name,l.zoomPosition,l.zoomFactor,r?r.currentRange:null)),o.targetId=n,o.scrollStarted=!1),s.dotnetref.invokeMethodAsync("UpdateChartData")}return s.userInteractionBase.isStockChart&&(s.userInteractionBase.startMove=!1),!1},e}(),n=function(e,t){this.series=e,this.point=t},s=function(e,t){this.x=e,this.y=t},o=function(e,t,i){this.r=e,this.g=t,this.b=i},r=function(){this.currentPoints=[],this.previousPoints=[],this.valueX=0,this.valueY=0,this.tooltipTempList=[]},a=function(){this.markerCurrentPoints=[],this.markerPreviousPoints=[],this.trackBallClass="EJ2-TrackBall"},l=function(){this.crosshairX=0,this.crosshairY=0,this.rx=2,this.ry=2},h=function(){this.lierIndex=0,this.chartStartMove=!0,this.axes=[],this.isFirstRendered=!0,this.toolbarHeight=43},d=function(e,t,i,n,s){this.browserName=e,this.isPointer=t,this.isDevice=i,this.isTouch=n,this.isIos=s},c=function(e){function i(t,i,n,s,o,r,a,l,h){var d=e.call(this,t,i,n.width,n.color,s,h)||this;return d.y=o.y,d.x=o.x,d.height=o.height,d.width=o.width,d.rx=r||0,d.ry=a||0,d.transform=l||"",d.stroke=0!==n.width&&""!==d.stroke?n.color:"transparent",d}return t(i,e),i}(sf.svgbase.PathOption),p=function(e){this.isZoomStart=!0,this.touchStartList=[],this.touchMoveList=[],this.chart=e,this.browser=new d(sf.base.Browser.info.name,sf.base.Browser.isPointer,sf.base.Browser.isDevice,sf.base.Browser.isTouch,sf.base.Browser.isIos||sf.base.Browser.isIos7),this.isDevice=this.browser.isDevice,this.zooming=e.zoomBase.zoomSettings,this.elementId=e.element.id,this.zoomAxes=[],this.zoomingRect=new sf.svgbase.Rect(0,0,0,0),this.isZoomed=this.performedUI=this.zooming.enablePan&&this.zooming.enableSelectionZooming},u=function(){this.iconRectOverFill="transparent",this.iconRectSelectionFill="transparent"},f=function(){this.axisCollections=[],this.previousMouseMoveX=0,this.previousMouseMoveY=0,this.mouseDownX=0,this.mouseDownY=0,this.clipRectId="_ChartAreaClipRect__Rect",this.zoomToolkitId="_Zooming_KitCollection",this.zoomToolkitZoom="_Zooming_Zoom",this.zoomToolkitZoomIn="_Zooming_ZoomIn",this.zoomToolkitZoomOut="_Zooming_ZoomOut",this.zoomToolkitPan="_Zooming_Pan",this.zoomToolkitReset="_Zooming_Reset",this.chartZoomTip="EJ2_Chart_ZoomTip"},g=function(e){function i(t,i,n,s,o,r,a){var l=e.call(this,t,i,n.width,n.color,s)||this;return l.cy=r,l.cx=o,l.r=a,l}return t(i,e),i}(sf.svgbase.PathOption),m={initialize:function(e,t,n,s,o,r,a){var l=this,h=new i(e,t.id,t,n,s,o,r,a);if(t.id.indexOf("_stockChart_")>-1){var d=t.id.split("_stockChart_")[0],c=window.sfBlazor.StockChart.dotnetrefCollection.find((function(e){return e.id==d})).dotnetref;window.sfBlazor.StockChart.getTooltipPosition(c).then((function(e){l.stockChartTooltipPosition=e}))}this.isUpdatingClipRect=!1,h.render()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},getArgs:function(e,t,i,n,s){return{name:e,axisName:t,zoomPosition:isFinite(i)?i:1,zoomFactor:isFinite(n)?n:1,currentRangeMax:s?s.maximum.toString():"",currentRangeMin:s?s.minimum.toString():""}},getMouseXY:function(e,t,i){var n,s,o;e.type.indexOf("touch")>-1?(n=(o=e).changedTouches[0].clientX,s=o.changedTouches[0].clientY):(n=e.clientX,s=e.clientY);var r=document.getElementById(t+"_scrollBar_svg"+i).getBoundingClientRect();this.mouseX=n-Math.max(r.left,0),this.mouseY=s-Math.max(r.top,0)},isExist:function(e,t){return e.indexOf(t)>-1},moveLength:function(e){var t=e.previousXY,i=e.previousRectX,n=e.scrollbarOptions[e.axis.name],s=.1*(n.width-16);return s=t<i?i-(i-s>8?s:8):i+(i+n.thumbRectWidth+s<n.width-8?s:8),s},isWithIn:function(e,t){var i=t.scrollbarOptions[t.axis.name];return e-8>=0&&e+i.thumbRectWidth+8<=i.width},positionThumb:function(e,t,i){var n=i.scrollbarOptions[i.axis.name];n.slider.setAttribute("x",e.toString()),n.slider.setAttribute("width",t.toString()),n.leftCircleEle.setAttribute("cx",e.toString()),n.rightCircleEle.setAttribute("cx",(e+t).toString()),this.setArrowDirection(i),n.gripCircle.setAttribute("transform","translate("+(e+t/2+5*(n.isVertical?1:-1))+","+(n.isVertical?"10":"5")+") rotate("+(n.isVertical?"180":"0")+")")},setZoomFactorPosition:function(e,t,i,n){void 0===n&&(n=!0);var s=e.axis,o=e.scrollbarOptions[s.name];o.isScrollUI=!0;var r=o.height/2,a=t+i+r+1,l=r+.5,h=o.isVertical?s.rect.h:o.width;o.zoomFactor=(i+(a>=o.width?r+1:0))/h,s.zoomFactor=n&&!o.isLazyLoad?o.zoomFactor:s.zoomFactor,o.zoomPosition=a>h?1-s.zoomFactor:t<r+1?0:(t-(t-l<=0?l:0))/h,s.zoomPosition=o.zoomPosition<0?0:o.zoomPosition>.9?1:o.zoomPosition,o.isLazyLoad||this.dotnetref.invokeMethodAsync("ChartScrolled",s.name,s.zoomFactor,s.zoomPosition)},calculateLazyRange:function(e,t,i){var n,s,o,r,a,l=e.scrollbarOptions[e.axis.name],h=l.thumbRectX,d=l.thumbRectWidth,c=l.scrollRange,p=this.getStartEnd(l.previousStart,l.previousEnd,!1,e);return e.isResizeRight||"RightMove"===t?(n=(d=e.isResizeRight?d+16:d)/l.width,s="RightMove"===t?(h+8)/l.width:e.axis.zoomPosition,r=(o="RightMove"===t?c.start+s*c.delta:l.previousStart)+n*c.delta):e.isResizeLeft||"LeftMove"===t?(s=(h-8)/l.width,n=d/l.width,o=(o=c.start+s*c.delta)>=c.start?o:c.start,r="LeftMove"===t?o+n*c.delta:l.previousEnd):(e.isThumbDrag||e.isScrollWheel)&&(s="RightMove"===t||i>0?(h+8)/l.width:(h-8)/l.width,n=l.thumbRectWidth/l.width,r=(o=(o=c.start+s*c.delta)>=c.start?o:c.start)+n*c.delta),r&&(a={axis:e.axis,currentRange:this.getStartEnd(o,r,!0,e),previousAxisRange:p}),a},getStartEnd:function(e,t,i,n){var s=n.scrollbarOptions[n.axis.name],o=s.valueType;switch("DateTime"!==o&&"DateTimeCategory"!==o||!i?i&&(s.previousStart=Math.round(e),s.previousEnd=Math.ceil(t)):(s.previousStart=e,s.previousEnd=t),o){case"Double":case"Category":case"Logarithmic":e=Math.round(e),t=Math.ceil(t);break;case"DateTime":case"DateTimeCategory":e=e,t=t}return{minimum:e,maximum:t}},setCursor:function(e,t,i){var n=window.sfBlazor.getCompInstance(t).scrollbarBase;if(n){var s=e.id;s&&n.scrollbarOptions[i]&&(n.scrollbarOptions[i].svgObject.style.cursor=s.indexOf("scrollBarThumb_")>-1||s.indexOf("_gripCircle")>-1?"-webkit-grab":s.indexOf("Circle_")>-1||s.indexOf("Arrow_")>-1?n.scrollbarOptions[i].isVertical?"ns-resize":"ew-resize":"auto")}},setTheme:function(e,t,i){var n=window.sfBlazor.getCompInstance(t).scrollbarBase,s=n.scrollbarOptions[i];if(s){var o=e.id,r=o.indexOf("_leftCircle_")>-1||o.indexOf("_leftArrow_")>-1,a=o.indexOf("_rightCircle_")>-1||o.indexOf("_rightArrow_")>-1,l=n.scrollbarThemeStyle,h=s.leftArrowEle,d=s.rightArrowEle,c=s.leftCircleEle,p=s.rightCircleEle,u=this.isCurrentAxis(e,h);c.style.fill=r&&u?l.circleHover:l.circle,p.style.fill=a&&u?l.circleHover:l.circle,c.style.stroke=r&&u?l.circleHover:l.circle,p.style.stroke=a&&u?l.circleHover:l.circle,"HighContrastLight"===n.theme&&(h.style.fill=r&&u?l.arrowHover:l.arrow,h.style.stroke=r&&u?l.arrowHover:l.arrow,d.style.fill=a&&u?l.arrowHover:l.arrow,d.style.stroke=a&&u?l.arrowHover:l.arrow,c.style.stroke=r&&u?l.circleHover:l.circle,p.style.stroke=a&&u?l.circleHover:l.circle)}},isCurrentAxis:function(e,t){return e.id.split("_")[2]===t.id.split("_")[2]},resizeThumb:function(e,t,i){var n,s=e.scrollbarOptions[e.axis.name].height/2,o=2*s+10+14,r=e.previousRectX,a=e.axis.isAxisInverse;this.mouseX=t,this.mouseY=i;var l=e.scrollbarOptions[e.axis.name],h=l.isVertical&&a?this.mouseY:l.isVertical?l.width-this.mouseY:a?l.width-this.mouseX:this.mouseX,d=Math.abs(e.previousXY-h);if(e.isResizeLeft&&h>=0){var c=r+(h>e.previousXY?d:-d);n=c-s>=0?e.previousWidth+(h>e.previousXY?-d:d):e.previousWidth,c=c-s>=0?c:r,n>=o&&h<c+n&&(l.thumbRectX=e.previousRectX=c,l.thumbRectWidth=e.previousWidth=n,e.previousXY=h,this.positionThumb(c,n,e),this.setZoomFactorPosition(e,c,n))}else e.isResizeRight&&(n=h>=o+l.thumbRectX&&h<=l.width-s?h-l.thumbRectX:e.previousWidth,l.thumbRectWidth=e.previousWidth=n,e.previousXY=h,this.positionThumb(l.startX,n,e),this.setZoomFactorPosition(e,l.startX,n),l.isLazyLoad||this.setZoomFactorPosition(e,l.startX,n))},setHighlightSelectionOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.selectionHighlightOptions(t)},showTooltip:function(e,t,i,n){void 0===i&&(i=!1);var s=window.sfBlazor.getCompInstance(n);if(i)for(var o=0,r=s.userInteractionBase.visibleSeries;o<r.length;o++)for(var a=r[o],l=0,h=a.points;l<h.length;l++){var d=h[l],c="DateTime"==a.x_Axis.valueType?d.xV:d.x,p=e;if("DateTime"==a.x_Axis.valueType&&(p=new Date(p).getTime()),e==c&&t===d.yV){s.mouseX=d.r[0].x+a.clipRect.x,s.mouseY=d.r[0].y+a.clipRect.y,m.tooltipMousemovehandler(s),m.markerMove(s,!1);break}}else s.mouseX=e,s.mouseY=t,m.tooltipMousemovehandler(s),m.markerMove(s,!1)},hideTooltip:function(e){var t=window.sfBlazor.getCompInstance(e);m.removeTooltip(sf.base.Browser.isDevice?2e3:1e3,t)},showCrosshair:function(e,t,i){var n=window.sfBlazor.getCompInstance(i);n.mouseX=e,n.mouseY=t,m.crosshairMousemoveHandler(n)},hideCrosshair:function(e){var t=window.sfBlazor.getCompInstance(e);m.removeCrosshair(t,sf.base.Browser.isDevice?2e3:1e3)},updateZoomingOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.zoomBase.zoomingModule.isZoomed=t,i.zoomBase.zoomingModule.isPanning=t)},setTooltipData:function(e,t,i,n,s,o,r,a,l){var h=window.sfBlazor.getCompInstance(e);h.tooltipBase.tooltipModule&&!h.userInteractionBase.isStockChart&&(this.removeTooltip(sf.base.Browser.isDevice?1e3:100,h),this.removeCrosshair(h,sf.base.Browser.isDevice?1e3:100)),o&&(null!=h.tooltipBase.tooltipModule.template&&(o.template=h.tooltipBase.tooltipModule.template),h.tooltipBase.tooltipModule=o),h.dateValuePairs=r,h.numberValuePairs=a,h.userInteractionBase.chartStartMove=!1,h.getTooltipData(t,i,n,s),h.userInteractionBase.chartStartMove=!0,h.zoomBase.axisCollections=s,h.userInteractionBase.axisClipRect=l,h.zoomBase.zoomingModule&&(!this.isUpdatingClipRect&&h.userInteractionBase.isStockChart?(this.isUpdatingClipRect=!0,this.updateClipRect(this.getElement(h.element.id+h.zoomBase.clipRectId),h),this.isUpdatingClipRect=!1):h.userInteractionBase.isStockChart||this.updateClipRect(this.getElement(h.element.id+h.zoomBase.clipRectId),h)),h.isDataLoaded&&setTimeout((function(){h.removeTooltipData()}),500),this.applyZoomingToolkit(h)},setTooltipOptions:function(e,t,i,n,s,o,r,a,l){var h=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(h)||(h.dateValuePairs=a,h.numberValuePairs=l,h.userInteractionBase.chartStartMove=!1,h.tooltipOptions(t,i),h.zoomBase.axisCollections=r,sf.base.isNullOrUndefined(h.userInteractionBase.visibleSeries)&&h.getVisibleSeries(h,n,s,o,r),h.userInteractionBase.chartStartMove=!0,h.zoomBase.isResized&&h.zoomBase.zoomingModule&&(h.zoomBase.isResized=!1,this.updateClipRect(this.getElement(h.element.id+h.zoomBase.clipRectId),h)))},setZoomOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)){var n=i.userInteractionBase.theme;i.zoomBase.zoomSettings=t,i.zoomBase.zoomingModule=new p(i),i.zoomToolkitBase.selectionColor="Material3Dark"==n?"#CAC4D0":"Material3"==n?"#49454E":"Bootstrap5"==n||"Bootstrap5Dark"==n?"#0D6EFD":"Tailwind"==n?"#4F46E5":"TailwindDark"==n?"#22D3EE":"Material"==n?"#E3165B":"MaterialDark"==n?"#00B0FF":"Bootstrap4"==n?"#007BFF":"Fluent"==n||"FluentDark"==n?"#0078D4":"Bootstrap"==n?"#317AB9":"BootstrapDark"==n?"#0070F0":"Fabric"==n?"#0078D6":"FabricDark"==n?"#0074CC":"HighContrast"==n||"HighContrastLight"==n?"#FFD939":i.zoomToolkitBase.selectionColor,i.zoomToolkitBase.iconRectOverFill="Bootstrap4"==n?"#5A6268":"Material3"==n?"#EADDFF":"Material3Dark"==n?"#4F378B":i.zoomToolkitBase.iconRectOverFill,i.zoomToolkitBase.iconRectSelectionFill="Bootstrap4"==n?"#5B6269":"Material3"==n?"#EADDFF":"Material3Dark"==n?"#4F378B":i.zoomToolkitBase.iconRectSelectionFill,i.zoomToolkitBase.selectedId=i.zoomBase.zoomingModule.isPanning?i.element.id+"_Zooming_Pan_1":i.element.id+"_Zooming_Zoom_1",i.zoomToolkitBase.fillColor="Bootstrap4"==n?"#495057":"Tailwind"==n?"#6B7280":"TailwindDark"==n?"D1D5DB":"Fluent"==n?"#A19F9D":"FluentDark"==n?"#484644":"#737373",!this.getElement(i.element.id+i.zoomBase.clipRectId)&&i.zoomBase.zoomingModule&&this.createClipRect(i),this.applyZoomingToolkit(i)}},setUIBooleanValues:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(s.userInteractionBase.isPointDragging=n,s.userInteractionBase.isPointMouseDown=t,s.userInteractionBase.disableTrackTooltip=i)},setTooltipArgsData:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.tooltipBase.formattedText=[],n.tooltipBase.argsData.headerText=t,n.tooltipBase.argsData.text=i,this.seriesTooltip(n,n.tooltipBase.currentPoints[0],!0))},setSharedTooltipArgsData:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.tooltipBase.sharedArgsData.headerText=t,n.tooltipBase.sharedArgsData.text=i,this.groupedTooltip(n,n.tooltipBase.currentPoints,!0,n.tooltipBase.lastData))},invokeBlurEffect:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||this.blurEffect(t.element.id,t)},invokeRemoveSelectedElements:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.selectedDataIndexes=[],t.styleId=t.element.id+"_ej2_chart_selection",this.removeSelectedElements(e))},redrawSelection:function(e){var t=window.sfBlazor.getCompInstance(e);t.isSeriesMode="Series"==t.oldMode;var i=t.selectedDataIndexes,n=t.highlightDataIndexes;t.styleId.indexOf("highlight")>-1&&t.highlightDataIndexes.length>0?(t.highlightDataIndexes=[],this.removeSelectedElements(e),i=n):(t.selectedDataIndexes=[],this.removeSelectedElements(e)),this.blurEffect(t.element.id,t),this.selectDataIndex(t.dataId,i)},removeSelectionStyles:function(e){var t=window.sfBlazor.getCompInstance(e);t.highlightDataIndexes=[];for(var i=0;i<t.seriesTypes.length;i++)this.removeLegendSelectionClass(document.getElementsByClassName(t.unSelected),t),this.removeLegendSelectionClass(document.getElementsByClassName(this.generateStyle(t.element.id+"SeriesGroup"+i,t)),t),this.removeLegendSelectionClass(this.getSeriesElements(i,t),t);for(i=0;i<t.seriesTypes.length;i++)this.removeSvgClass(this.findDOMElement(t.element.id+"_chart_legend_shape_"+i),this.findDOMElement(t.element.id+"_chart_legend_shape_"+i).getAttribute("class"))},removeLegendSelectionClass:function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];sf.base.isNullOrUndefined(s)||(this.removeSvgClass(s,s.getAttribute("class")),sf.base.isNullOrUndefined(t.highlightColor)||"None"!=t.highlightPattern||s.setAttribute("fill",t.highlightColor))}},removeSelectedElements:function(e){for(var t=window.sfBlazor.getCompInstance(e),i=0;i<t.seriesTypes.length;i++)this.removeStyles(this.getSeriesElements(i,t),t)},selectionChart:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.currentMode=i.selectionMode,i.styleId=i.element.id+"_ej2_chart_selection",this.selection(i,t,this.findElements(i,"",t)))},selectDataIndex:function(e,t){var i=this,n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(this.isAlreadySelected({type:"click"},n),t.forEach((function(e){var t="#"+n.element.id+"_Series_"+e.series+"_Point_"+e.point;i.performSelection(e,n,n.element.querySelector(t))})))},focusTarget:function(e){var t,i;e.indexOf("_chart_legend_")>-1?(i=(t=this.getElement(e).parentElement).getAttribute("class"),this.setTabIndex(this.getElement(this.id+"_chart_legend_translate_g").firstElementChild,this.getElement(this.id+"SeriesCollection").firstElementChild),t.setAttribute("tabindex","0"),i&&-1===i.indexOf("e-chart-focused")?i+=" e-chart-focused":i||(i="e-chart-focused")):(t=this.getElement(e),i="e-chart-focused"),t.setAttribute("tabindex","0"),t.setAttribute("class",i),t.focus()},focusChild:function(e){e.setAttribute("tabindex","0");var t=e.getAttribute("class");return e.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-chart-focused")?t+=" e-chart-focused":t||(t="e-chart-focused"),e.setAttribute("class",t),e.focus(),e.id},getActualIndex:function(e,t){return e>t-1?0:e<0?t-1:e},setTabIndex:function(e,t){e&&e.removeAttribute("tabindex"),t&&t.setAttribute("tabindex","0")},eventInterval:80,dotnetref:{},getScrollEventArgs:function(e,t){var i=e.changedTouches?e.changedTouches[0].clientX:e.clientX,n=e.changedTouches?e.changedTouches[0].clientY:e.clientY,s=this.setScrollMouseXY(i,n,e.target.id,t),o=e.touches,r=[];if(e.type.indexOf("touch")>-1)for(var a=0,l=o.length;a<l;a++)r.push({pageX:o[a].clientX,pageY:o[a].clientY,pointerId:e.pointerId||0});var h=e.target.id;return h=h.indexOf("scrollBar")>-1?h:this.svgId,{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:s.mouseX,mouseY:s.mouseY,pointerType:e.pointerType,target:h,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:r,pointerId:e.pointerId}},getScrollWheelArgs:function(e){},svgId:null,setScrollMouseXY:function(e,t,i,n){this.svgId=n[1];var s=n[0];this.dotnetref=this.dotnetrefCollection.find((function(e){return s===e.id})).dotnetref;var o=e,r=t,a=this.getElement(this.svgId);if(!sf.base.isNullOrUndefined(a)){var l=a.getBoundingClientRect();o=e-Math.max(l.left,0),r=t-Math.max(l.top,0)}return{mouseX:o,mouseY:r}},dotnetrefCollection:[],tooltipMousemovehandler:function(e){e.userInteractionBase.isPointMouseDown?this.removeTooltip(e.tooltipBase.tooltipModule.fadeOutDuration,e):e.userInteractionBase.disableTrackTooltip||this.isSelected()||!e.tooltipBase.tooltipModule.enable||(!e.tooltipBase.tooltipModule.shared&&(!e.isTouch||e.userInteractionBase.startMove)||sf.svgbase.withInAreaBounds(e.mouseX,e.mouseY,e.userInteractionBase.axisClipRect)&&e.tooltipBase.tooltipModule.shared&&(!e.isTouch||e.userInteractionBase.startMove)?this.tooltip(e):e.tooltipBase.tooltipModule.shared&&e.tooltipBase.isSharedRemove&&this.removeTooltip(e.tooltipBase.tooltipModule.fadeOutDuration,e))},markerMove:function(e,t){var i=this;if(e.userInteractionBase.isPointMouseDown)this.removeMarker(e);else{var n,s,o;if(!e.userInteractionBase.disableTrackTooltip&&(!e.isTouch||e.userInteractionBase.startMove)){if(e.tooltipBase.tooltipModule.shared&&e.tooltipBase.tooltipModule.enable){if(!sf.svgbase.withInAreaBounds(e.mouseX,e.mouseY,e.userInteractionBase.axisClipRect))return;if(e.tooltipBase.tooltipModule.enable){for(var r="PolarAxes"==e.userInteractionBase.chartAreaType?this.getData(e):null,a=0,l=e.userInteractionBase.visibleSeries;a<l.length;a++){var h=l[a];h.enableTooltip&&"Indicator"!=h.category&&h.visible&&h.marker.aH&&("CartesianAxes"==e.userInteractionBase.chartAreaType&&h.visible?n=this.getClosestX(e,h):"PolarAxes"==e.userInteractionBase.chartAreaType&&h.visible&&r.point&&(n={point:h.points[r.point.iX],series:h}),n&&!sf.base.isNullOrUndefined(n.point)&&(this.isSeriesAxisZoomed(h)&&n.point.s.length&&!this.isPointInRect(n.point.s,e.userInteractionBase.axisClipRect)||e.markerExplodeBase.markerCurrentPoints.push(n)))}e.markerExplodeBase.markerCurrentPoints=this.getSharedPoints(e,e.markerExplodeBase.markerCurrentPoints)}}else if((o=(n=this.getData(e)).series)&&o.marker.aH){var d=e.markerExplodeBase.markerPreviousPoints.length>0?e.markerExplodeBase.markerPreviousPoints[0]:null;s=!sf.base.isNullOrUndefined(o)&&("Bubble"==o.type||"Scatter"==o.drawType||"Scatter"==o.type||"Candle"!=o.type&&"Hilo"!=o.type&&"HiloOpenClose"!=o.type&&o.marker.vS&&0!=o.marker.mW&&0!=o.marker.mH),n.lierIndex=e.userInteractionBase.lierIndex,n.point&&s&&(null==d||d.point!=n.point||d.lierIndex>3&&d.lierIndex!=e.userInteractionBase.lierIndex)&&e.markerExplodeBase.markerCurrentPoints.push(n),n.point&&s&&e.userInteractionBase.isPointMouseDown&&e.markerExplodeBase.markerCurrentPoints.push(n)}if(e.markerExplodeBase.markerCurrentPoints.length>0&&(0==e.markerExplodeBase.markerPreviousPoints.length||e.userInteractionBase.isPointMouseDown||e.markerExplodeBase.markerPreviousPoints.length>0&&(e.tooltipBase.tooltipModule.showNearestPoint&&e.tooltipBase.tooltipModule.shared||e.markerExplodeBase.markerPreviousPoints[0].point!=e.markerExplodeBase.markerCurrentPoints[0].point))){e.markerExplodeBase.markerPreviousPoints.length>0&&this.removeMarker(e);for(var c=0;c<e.markerExplodeBase.markerCurrentPoints.length;c++){var p=(r=e.markerExplodeBase.markerCurrentPoints[c]).series,u=r.point;if(u.mK=u.mK?u.mK:{vS:!1},r&&u||o&&"Candle"!=o.type&&"Hilo"!=o.type&&"HiloOpenClose"!=o.type){window.clearTimeout(e.markerExplodeBase.markerExplodeInterval),e.markerExplodeBase.isRemove=!0;for(var f=0;f<u.s.length;f++)this.isRectSeries(p.type)&&!u.mK.vS||this.trackBall(e,p,u,u.s[f],f)}}e.markerExplodeBase.markerPreviousPoints=[],e.markerExplodeBase.markerPreviousPoints=e.markerExplodeBase.markerPreviousPoints.concat(e.markerExplodeBase.markerCurrentPoints)}!e.tooltipBase.tooltipModule.enable&&(0==e.markerExplodeBase.markerCurrentPoints.length&&e.markerExplodeBase.isRemove||t&&e.markerExplodeBase.isRemove||e.userInteractionBase.axisClipRect&&!sf.svgbase.withInAreaBounds(e.mouseX,e.mouseY,e.userInteractionBase.axisClipRect))&&(e.markerExplodeBase.isRemove=!1,e.markerExplodeBase.markerExplodeInterval=+setTimeout((function(){i.removeMarker(e)}),2e3))}e.markerExplodeBase.markerCurrentPoints=[]}},trackBall:function(e,t,i,n,s,o){for(var r=i.mK,a=t.marker,l=e.element.id+"_Series_"+t.index+"_Point_"+i.iX+"_Trackball"+(s&&0!=s?"_"+s:""),h={width:(r.mW?r.mW:a.mW)+3,height:(r.mH?r.mH:a.mH)+3},d=r.b||t.border,c=d.cL&&"transparent"!=d.cL?d.cL:r.f?r.f:i.i?i.i:t.interior,p=this.convertHexToColor(this.colorNameToHex(c)),u=r.b?r.b.wT:a.b.wT,f="rgba("+p.r+","+p.g+","+p.b+",0.2)",g="CartesianAxes"==e.userInteractionBase.chartAreaType?"translate("+t.clipRect.x+","+t.clipRect.y+")":"",m="Bubble"==t.type||"Scatter"==t.type?"url(#"+e.clipPathID(t.index)+")":"url(#"+e.markerClipPathId(t.index)+")",v=r.sH?r.sH:a.sH,b=0;b<2;b++){var y=new sf.svgbase.PathOption(l+"_"+b,b>0?r.f||i.i||(o?t.interior:"#ffffff"):"transparent",u+(b>0?0:8),b>0?c:f,r.oP||a.oP,"",null),C=this.calculateShapes(n,h,v,y,a.iU,!1);this.drawTrackBall(e.element.id+"_svg",C.renderOption,C.functionName,e.markerExplodeBase.trackBallClass,m,g)}},colorNameToHex:function(e){e="transparent"===e?"white":e,document.body.appendChild(sf.base.createElement("text",{id:"chartmeasuretext"}));var t=document.getElementById("chartmeasuretext");t.style.color=e,e=window.getComputedStyle(t).color,sf.base.remove(t);var i=/^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/.exec(e);return this.convertToHexCode(new o(parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10)))},convertToHexCode:function(e){return"#"+this.componentToHex(e.r)+this.componentToHex(e.g)+this.componentToHex(e.b)},componentToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},convertHexToColor:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new o(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):new o(255,255,255)},calculateShapes:function(e,t,i,n,s,o){var r,a,l,h="path",d=o,c=d&&"Circle"===i?t.width-2:t.width,p=d&&"Circle"===i?t.height-2:t.height,u=e.x,f=e.y,g=e.y+-p/2,m=e.x+-c/2;switch(i){case"Bubble":case"Circle":h="ellipse",sf.base.merge(n,{d:"",rx:c/2,ry:p/2,cx:u,cy:f});break;case"Cross":r="M "+m+" "+(f+-p/2)+" L "+(u+c/2)+" "+(f+p/2)+" M "+m+" "+(f+p/2)+" L "+(u+c/2)+" "+(f+-p/2),sf.base.merge(n,{d:r});break;case"Multiply":r="M "+(u-0)+" "+(f-0)+" L "+(u+0)+" "+(f+0)+" M "+(u-0)+" "+(f+0)+" L "+(u+0)+" "+(f-0),sf.base.merge(n,{d:r,stroke:n.fill});break;case"HorizontalLine":r="M "+m+" "+f+" L "+(u+c/2)+" "+f,sf.base.merge(n,{d:r});break;case"VerticalLine":r="M "+u+" "+(f+p/2)+" L "+u+" "+(f+-p/2),sf.base.merge(n,{d:r});break;case"Diamond":r="M "+m+" "+f+" L "+u+" "+(f+-p/2)+" L "+(u+c/2)+" "+f+" L "+u+" "+(f+p/2)+" L "+m+" "+f+" z",sf.base.merge(n,{d:r});break;case"ActualRect":r="M "+m+" "+(f+-p/8)+" L "+(u+0)+" "+(f+-p/8)+" L "+(u+0)+" "+(f+p/8)+" L "+m+" "+(f+p/8)+" L "+m+" "+(f+-p/8)+" z",sf.base.merge(n,{d:r});break;case"TargetRect":r="M "+(m+0)+" "+(f+-p/2)+" L "+(u+0)+" "+(f+-p/2)+" L "+(u+0)+" "+(f+p/2)+" L "+(m+0)+" "+(f+p/2)+" L "+(m+0)+" "+(f+-p/2)+" z",sf.base.merge(n,{d:r});break;case"Rectangle":case"Hilo":case"HiloOpenClose":case"Candle":case"Waterfall":case"BoxAndWhisker":case"StepArea":case"StackingStepArea":case"Square":case"Flag":r="M "+m+" "+(f+-p/2)+" L "+(u+c/2)+" "+(f+-p/2)+" L "+(u+c/2)+" "+(f+p/2)+" L "+m+" "+(f+p/2)+" L "+m+" "+(f+-p/2)+" z",sf.base.merge(n,{d:r});break;case"Pyramid":case"Triangle":r="M "+m+" "+(f+p/2)+" L "+u+" "+(f+-p/2)+" L "+(u+c/2)+" "+(f+p/2)+" L "+m+" "+(f+p/2)+" z",sf.base.merge(n,{d:r});break;case"Funnel":case"InvertedTriangle":r="M "+(u+c/2)+" "+(f-p/2)+" L "+u+" "+(f+p/2)+" L "+(u-c/2)+" "+(f-p/2)+" L "+(u+c/2)+" "+(f-p/2)+" z",sf.base.merge(n,{d:r});break;case"Pentagon":for(var v=0;v<=5;v++)a=c/2*Math.cos(Math.PI/180*(72*v)),l=p/2*Math.sin(Math.PI/180*(72*v)),r=0===v?"M "+(u+a)+" "+(f+l)+" ":r.concat("L "+(u+a)+" "+(f+l)+" ");r=r.concat("Z"),sf.base.merge(n,{d:r});break;case"Plus":r="M "+m+" "+f+" L "+(u+c/2)+" "+f+" M "+u+" "+(f+p/2)+" L "+u+" "+(f+-p/2),sf.base.merge(n,{d:r});break;case"Image":h="Image",sf.base.merge(n,{href:s,height:p,width:c,x:m,y:g})}return{renderOption:n,functionName:h}},removeMarker:function(e){this.removeHighLightedMarker(e),e.markerExplodeBase.markerPreviousPoints=[]},crosshairMousemoveHandler:function(e){!e.userInteractionBase.disableTrackTooltip&&e.crosshairBase.crosshair.enable&&(!sf.svgbase.withInAreaBounds(e.mouseX,e.mouseY,e.userInteractionBase.axisClipRect)||e.isTouch&&!e.userInteractionBase.startMove?this.removeCrosshair(e,1e3):this.createCrosshair(e))},removeCrosshair:function(e,t){var i=this.getElement(e.element.id+"_UserInteraction"),n=this.getElement(e.element.id+"_crosshair_axis");this.stopAnimation(e.crosshairBase.crosshairInterval),!e.userInteractionBase.isFirstRendered&&i&&"0"!==i.getAttribute("opacity")&&(e.crosshairBase.crosshairInterval=+setTimeout((function(){new sf.base.Animation({}).animate(i,{duration:200,progress:function(e){if(i.style.animation="",i.setAttribute("opacity",(1-e.timeStamp/e.duration).toString()),n)for(;n.firstChild;)n.removeChild(n.firstChild)},end:function(){i.setAttribute("opacity","0"),e.tooltipBase.tooltipModule&&(e.tooltipBase.valueX=null,e.tooltipBase.valueY=null)}})}),t))},createCrosshair:function(e){var t,i=e.userInteractionBase.axisClipRect,n="",s="",o=e.crosshairBase.crosshair,r=document.getElementById(e.element.id+"_UserInteraction");if(window.clearTimeout(e.crosshairBase.crosshairInterval),(!e.tooltipBase.tooltipModule.enable||sf.svgbase.withInAreaBounds(e.tooltipBase.valueX,e.tooltipBase.valueY,i))&&(e.crosshairBase.crosshairX=e.tooltipBase.tooltipModule.enable&&!e.userInteractionBase.isInverted?e.tooltipBase.valueX:e.mouseX,e.crosshairBase.crosshairY=e.tooltipBase.tooltipModule.enable&&e.userInteractionBase.isInverted?e.tooltipBase.valueY:e.mouseY,e.userInteractionBase.isFirstRendered?(r.setAttribute("opacity","1"),r.setAttribute("style","pointer-events:none"),e.userInteractionBase.isFirstRendered=!1):r.setAttribute("opacity","1"),("Both"===o.lineType||"Horizontal"===o.lineType||e.userInteractionBase.axes[1].crosshairTooltip.enable)&&(n+="M "+i.x+" "+e.crosshairBase.crosshairY+" L "+(i.x+i.width)+" "+e.crosshairBase.crosshairY),("Both"===o.lineType||"Vertical"===o.lineType||e.userInteractionBase.axes[0].crosshairTooltip.enable)&&(s+="M "+e.crosshairBase.crosshairX+" "+i.y+" L "+e.crosshairBase.crosshairX+" "+(i.y+i.height)),0!=r.childNodes.length)){t=new sf.svgbase.PathOption("_HorizontalLine","none",o.line.width,o.line.color||e.crosshairBase.themeStyleCrosshairLine,null,o.dashArray,n),this.renderCrosshairLine(t,r.childNodes[0]),t=new sf.svgbase.PathOption("_VerticalLine","none",o.line.width,o.line.color||e.crosshairBase.themeStyleCrosshairLine,null,o.dashArray,s);var a={AxisInfo:[]};this.renderCrosshairLine(t,r.childNodes[3]),this.renderAxisTooltip(e,i,r.childNodes[6],a),e.tooltipBase.crosshairMouseMoveEventCalled&&e.dotnetref.invokeMethodAsync("OnCrosshairMove",a)}},renderAxisTooltip:function(e,t,i,n){var s,o,r,a,l,h,d,c={text:"",value:null};if(i)for(;i.firstChild;)i.removeChild(i.firstChild);for(var p=e.userInteractionBase.axes.length-1;p>=0;p--)if(d=(s=e.userInteractionBase.axes[p]).placeNextToAxisLine?s.updatedRect:s.rect,s.crosshairTooltip.enable&&(e.crosshairBase.crosshairX<=d.x+d.w&&d.x<=e.crosshairBase.crosshairX&&0!=d.w||e.crosshairBase.crosshairY<=d.y+d.h&&d.y<=e.crosshairBase.crosshairY&&0!=d.h)){if(r=document.getElementById(e.element.id+"_axis_tooltip_"+p),a=document.getElementById(e.element.id+"_axis_tooltip_text_"+p),!(c=this.getAxisText(e,s)).text)continue;sf.base.isNullOrUndefined(n)||n.AxisInfo.push({AxisName:s.name,AxisLabel:c.text,Value:c.value}),o=this.tooltipLocation(e,c.text,s,t,new sf.svgbase.Rect(d.x,d.y,d.w,d.h)),null===r&&(r=e.userInteractionBase.svgRenderer.drawPath({id:e.element.id+"_axis_tooltip_"+p,fill:s.crosshairTooltip.fill||e.crosshairBase.themeStyleCrosshairFill})),a&&this.removeElement(a.id),i.appendChild(r),l=new sf.svgbase.TextOption(e.element.id+"_axis_tooltip_text_"+p,0,0,"start",c.text);var u={size:s.crosshairTooltip.textStyle.size||e.crosshairBase.themeStyleCrosshairTextSize,color:s.crosshairTooltip.textStyle.color||e.crosshairBase.themeStyleCrosshairLabel,fontFamily:s.crosshairTooltip.textStyle.fontFamily||e.crosshairBase.themeStyleCrosshairFontFamily,fontStyle:s.crosshairTooltip.textStyle.fontStyle,fontWeight:s.crosshairTooltip.textStyle.fontWeight||e.crosshairBase.themeStyleCrosshairFontWeight,opacity:s.crosshairTooltip.textStyle.opacity};a=sf.svgbase.textElement(l,u,u.color,i),h=this.findCrosshairDirection(e.crosshairBase.rx,e.crosshairBase.ry,o,e.crosshairBase.arrowLocation,8,e.crosshairBase.isTop,e.crosshairBase.isBottom,e.crosshairBase.isLeft,e.crosshairBase.crosshairX,e.crosshairBase.crosshairY),r.setAttribute("d",h),a.textContent=c.text,a.setAttribute("x",(o.x+5+(e.userInteractionBase.enableRTL?e.crosshairBase.elementSize.width:0)).toString()),a.setAttribute("y",(o.y+5+3*e.crosshairBase.elementSize.height/4).toString()),"Fluent"!==e.userInteractionBase.theme&&"FluentDark"!==e.userInteractionBase.theme&&"Fabric"!==e.userInteractionBase.theme||(r.setAttribute("stroke","#cccccc"),r.setAttribute("stroke-width","0.5"))}},getAxisText:function(e,t){var i,n={text:"",value:null};e.crosshairBase.isBottom=!1,e.crosshairBase.isTop=!1,e.crosshairBase.isLeft=!1,e.crosshairBase.isRight=!1;var s="Category"===t.valueType&&"BetweenTicks"===t.labelPlacement?.5:0,o=t.isAxisOppositePosition;if("Horizontal"===t.orientation?(i=this.getValueByPoint(Math.abs(e.crosshairBase.crosshairX-t.rect.x),t.rect.w,t.orientation,t.visibleRange,t.isAxisInverse)+s,e.crosshairBase.isBottom=!o,e.crosshairBase.isTop=o):(i=this.getValueByPoint(Math.abs(e.crosshairBase.crosshairY-t.rect.y),t.rect.h,t.orientation,t.visibleRange,t.isAxisInverse)+s,e.crosshairBase.isRight=o,e.crosshairBase.isLeft=!o),"DateTime"===t.valueType){var r=(new sf.base.Internationalization).getDateFormat({format:t.format?t.format:t.dateFormat,type:this.firstToLowerCase("DateTime")})(this.convertDateAndTime(new Date(i)));return n.text=this.getGlobalizedDate(r,e.dateValuePairs),n.value=new Date(i),n}if("Category"===t.valueType)return n.text=i<t.labels.length?t.labels[Math.floor(i)]:"",n.value=Math.floor(i),n;if("DateTimeCategory"===t.valueType)return n.text=this.getIndexedAxisLabel(t.labels[Math.round(i)],this.customFormat(t,e),e.dateValuePairs),n.value=Math.floor(i),n;if("Logarithmic"===t.valueType){var a=this.formatAxisValue(Math.pow(t.logBase,i),this.getaxisFormat(t).indexOf("{value}")>-1,t.labelFormat,void 0,e);return n.text=this.getGlobalizedNumber(a,e.numberValuePairs),n.value=Number(Math.pow(t.logBase,i)),n}var l=t.labelFormat&&null!==t.labelFormat.match("{value}");a=l?t.labelFormat.replace("{value}",this.formatAxisValue(i,l,t.labelFormat,3,e)):this.formatAxisValue(i,l,t.labelFormat,3,e);return n.text=this.getGlobalizedNumber(a,e.numberValuePairs),n.value=i,n},convertDateAndTime:function(e){return new Date(e.getTime()+60*e.getTimezoneOffset()*1e3)},getGlobalizedDate:function(e,t){return Object.keys(t).forEach((function(i){e=e.replaceAll?e.replaceAll(i,t[i]):e.replace(i,t[i])})),e},getGlobalizedNumber:function(e,t){for(var i=e.split(""),n=Object.keys(t),s=0,o=e.length;s<o;s++)for(var r=0,a=n.length;r<a;r++)if(i[s]==n[r]){i.splice(s,1,t[n[r]]);break}return i.join("")},firstToLowerCase:function(e){return e.substr(0,1).toLowerCase()+e.substr(1)},getaxisFormat:function(e){return e.labelFormat?0!=e.labelFormat.indexOf("p")||e.labelFormat.indexOf("{value}")>-1||!e.isStack100?e.labelFormat:"{value}%":e.isStack100?"{value}%":""},getIndexedAxisLabel:function(e,t,i){for(var n=e.split(","),s=0;s<n.length;s++)n[s]=this.getGlobalizedDate((new sf.base.Internationalization).getDateFormat({format:t})(this.convertDateAndTime(new Date(parseInt(n[s],10)))),i);return n.join(", ")},customFormat:function(e,t){return e.labelFormat?e.labelFormat:"Years"===e.actualIntervalType?"yyyy":this.getSkeleton(e,t)},getSkeleton:function(e,t){var i=e.rangeIntervalType;return e.format?e.format:"Years"===i||"Quarter"===i?"y":"Months"===i||"Weeks"===i?t.userInteractionBase.isStockChart&&"DateTimeCategory"===e.valueType?"MMM d":"MMMM d":"Days"===i?"MM/dd/yyyy":"Hours"===i?"HH:mm tt":"HH:mm:ss tt"},tooltipLocation:function(e,t,i,n,o){var r,a=n.x,l=n.y,h="Inside"===i.labelPosition,d=i.scrollbarSettingsEnable?i.scrollBarHeight:0,c=i.crosshairTooltip.textStyle;c.size=c.size||e.crosshairBase.themeStyleCrosshairTextSize,c.fontFamily=c.fontFamily||e.crosshairBase.themeStyleCrosshairFontFamily,c.fontWeight=c.fontWeight||e.crosshairBase.themeStyleCrosshairFontWeight,e.crosshairBase.elementSize=sf.svgbase.measureText(t,c);var p=i.isAxisOppositePosition;if("Horizontal"===i.orientation){var u=h?o.y-e.crosshairBase.elementSize.height-20:o.y+d,f=h?o.y-e.crosshairBase.elementSize.height-10:o.y+10;e.crosshairBase.arrowLocation=new s(e.crosshairBase.crosshairX,u),r=new sf.svgbase.Rect(e.crosshairBase.crosshairX-e.crosshairBase.elementSize.width/2-5,f+(h?0:d),e.crosshairBase.elementSize.width+10,e.crosshairBase.elementSize.height+10),p&&(r.y=h?o.y:o.y-(e.crosshairBase.elementSize.height+20)-d),r.x<a&&(r.x=a),r.x+r.width>a+n.width&&(r.x-=r.x+r.width-(a+n.width)),e.crosshairBase.arrowLocation.x+4>r.x+r.width-e.crosshairBase.rx&&(e.crosshairBase.arrowLocation.x=r.x+r.width-e.crosshairBase.rx-8),e.crosshairBase.arrowLocation.x-8<r.x+e.crosshairBase.rx&&(e.crosshairBase.arrowLocation.x=r.x+e.crosshairBase.rx+8)}else{d*=p?1:-1,e.crosshairBase.arrowLocation=new s(o.x,e.crosshairBase.crosshairY);var g=h?o.x-d:o.x-e.crosshairBase.elementSize.width-20;r=new sf.svgbase.Rect(g+d,e.crosshairBase.crosshairY-e.crosshairBase.elementSize.height/2-5,e.crosshairBase.elementSize.width+10,e.crosshairBase.elementSize.height+10),p?(r.x=h?o.x-e.crosshairBase.elementSize.width-8:o.x+8+d,r.x+r.width>e.userInteractionBase.availableSize.width&&(e.crosshairBase.arrowLocation.x-=r.x+r.width-e.userInteractionBase.availableSize.width,r.x-=r.x+r.width-e.userInteractionBase.availableSize.width)):r.x<0&&(e.crosshairBase.arrowLocation.x-=r.x,r.x=0),r.y<l&&(r.y=l),r.y+r.height>=l+n.height&&(r.y-=r.y+r.height-(l+n.height)),e.crosshairBase.arrowLocation.y+4>r.y+r.height-e.crosshairBase.ry&&(e.crosshairBase.arrowLocation.y=r.y+r.height-e.crosshairBase.ry-4),e.crosshairBase.arrowLocation.y-4<r.y+e.crosshairBase.ry&&(e.crosshairBase.arrowLocation.y=r.y+e.crosshairBase.ry+4)}return r},findCrosshairDirection:function(e,t,i,n,s,o,r,a,l,h){var d="",c=i.x,p=i.y,u=i.x+i.width,f=i.y+i.height;return o?(d=(d=(d=d.concat("M "+c+" "+(p+t)+" Q "+c+" "+p+" "+(c+e)+" "+p)).concat(" L "+(u-e)+" "+p+" Q "+u+" "+p+" "+u+" "+(p+t))).concat(" L "+u+" "+(f-t)+" Q "+u+" "+f+" "+(u-e)+" "+f),0!==s&&(d=(d=d.concat(" L "+(n.x+s/2)+" "+f)).concat(" L "+l+" "+(f+s)+" L "+(n.x-s/2)+" "+f)),d=n.x-s/2>c||0===s?d.concat(" L "+(c+e)+" "+f+" Q "+c+" "+f+" "+c+" "+(f-t)+" z"):d.concat(" L "+c+" "+(f+t)+" z")):d=r?(d=(d=(d=(d=(d=d.concat("M "+c+" "+(p+t)+" Q "+c+" "+p+" "+(c+e)+" "+p+" L "+(n.x-s/2)+" "+p)).concat(" L "+l+" "+n.y)).concat(" L "+(n.x+s/2)+" "+p)).concat(" L "+(u-e)+" "+p+" Q "+u+" "+p+" "+u+" "+(p+t))).concat(" L "+u+" "+(f-t)+" Q "+u+" "+f+" "+(u-e)+" "+f)).concat(" L "+(c+e)+" "+f+" Q "+c+" "+f+" "+c+" "+(f-t)+" z"):a?(d=(d=(d=(d=(d=d.concat("M "+c+" "+(p+t)+" Q "+c+" "+p+" "+(c+e)+" "+p)).concat(" L "+(u-e)+" "+p+" Q "+u+" "+p+" "+u+" "+(p+t)+" L "+u+" "+(n.y-s/2))).concat(" L "+(u+s)+" "+h)).concat(" L "+u+" "+(n.y+s/2))).concat(" L "+u+" "+(f-t)+" Q "+u+" "+f+" "+(u-e)+" "+f)).concat(" L "+(c+e)+" "+f+" Q "+c+" "+f+" "+c+" "+(f-t)+" z"):(d=(d=(d=(d=(d=d.concat("M "+(c+e)+" "+p+" Q "+c+" "+p+" "+c+" "+(p+t)+" L "+c+" "+(n.y-s/2))).concat(" L "+(c-s)+" "+h)).concat(" L "+c+" "+(n.y+s/2))).concat(" L "+c+" "+(f-t)+" Q "+c+" "+f+" "+(c+e)+" "+f)).concat(" L "+(u-e)+" "+f+" Q "+u+" "+f+" "+u+" "+(f-t))).concat(" L "+u+" "+(p+t)+" Q "+u+" "+p+" "+(u-e)+" "+p+" z"),d},renderCrosshairLine:function(e,t){for(var i=Object.keys(e),n="",s=0;s<i.length;s++)"id"!=(n="strokeWidth"===i[s]?"stroke-width":"strokeDashArray"===i[s]?"stroke-dashArray":"direction"===i[s]?"d":i[s])&&t.setAttribute(n,e[i[s]])},isSelected:function(){return!1},getTooltipElement:function(e){e.tooltipBase.header=null===e.tooltipBase.tooltipModule.header?e.tooltipBase.tooltipModule.shared?"<b>${point.x}</b>":"<b>${series.name}</b>":e.getTooltipFormat(e.tooltipBase.tooltipModule.header),e.tooltipBase.formattedText=[]},findData:function(e,t,i){return e.point&&(!t||t.point!==e.point||t.lierIndex>3&&t.lierIndex!=i||t.point===e.point)},renderSeriesTooltip:function(e,t){var i=this.getData(t);if(i.lierIndex=t.userInteractionBase.lierIndex,t.tooltipBase.currentPoints=[],this.findData(i,t.tooltipBase.previousPoints.length>0?t.tooltipBase.previousPoints[0]:null,t.userInteractionBase.lierIndex)){if(window.clearTimeout(t.tooltipBase.toolTipInterval),!i.series.dataEditSettings&&t.tooltipBase.previousPoints[0]&&i.point.iX===t.tooltipBase.previousPoints[0].point.iX&&i.series.index===t.tooltipBase.previousPoints[0].series.index)return t.tooltipBase.isRemove=!0,null;this.pushData(i,t)?this.triggerTooltipRender(i,e,this.getTooltipText(i,t),this.findHeader(i,t),t):this.removeTooltip(t.tooltipBase.tooltipModule.fadeOutDuration,t)}else if(!i.point&&t.tooltipBase.isRemove)this.removeTooltip(t.tooltipBase.tooltipModule.fadeOutDuration,t),t.tooltipBase.isRemove=!1;else for(var n=0,s=t.userInteractionBase.visibleSeries;n<s.length;n++){var o=s[n];o.visible&&"TrendLine"!==o.category&&(i=this.getClosestX(t,o)||i)}i&&i.point&&this.findMouseValue(i,t)},triggerTooltipRender:function(e,t,i,n,s){s.tooltipBase.argsData={data:{pointX:e.point.x?e.point.x.toString():"",pointY:e.point.y?e.point.y.toString():"",seriesIndex:e.series.index,seriesName:e.series.name,pointIndex:e.point.iX,pointText:e.point.t},headerText:n,point:e.point,series:{},text:i},s.tooltipBase.tooltipEventCalled?s.dotnetref.invokeMethodAsync("TooltipEventTriggered",s.tooltipBase.argsData):this.seriesTooltip(s,e,t)},seriesTooltip:function(e,t,i){var n=[];if(null!=t){"BoxAndWhisker"===t.series.type&&(i=!0),e.tooltipBase.header=e.tooltipBase.argsData.headerText,e.tooltipBase.formattedText=e.tooltipBase.formattedText.concat(e.tooltipBase.argsData.text);var o=new s(t.series.clipRect.x,t.series.clipRect.y);if(null!=e.tooltipBase.tooltipModule.template&&e.tooltipBase.currentPoints.length>0){e.tooltipBase.tooltipTempList=[];var r=t.point,a={x:r.x?this.formatPointValue(r,"x",!0,!1,t.series,e.userInteractionBase.isStockChart,e):"",y:r.y?this.formatPointValue(r,"y",!1,!0,t.series,e.userInteractionBase.isStockChart,e):"",text:r.t.toString(),high:r.h?this.formatPointValue(r,"h",!1,!0,t.series,e.userInteractionBase.isStockChart,e):"",low:r.l?this.formatPointValue(r,"l",!1,!0,t.series,e.userInteractionBase.isStockChart,e):"",open:r.o?this.formatPointValue(r,"o",!1,!0,t.series,e.userInteractionBase.isStockChart,e):"",close:r.c?this.formatPointValue(r,"c",!1,!0,t.series,e.userInteractionBase.isStockChart,e):"",volume:r.v?this.formatPointValue(r,"v",!1,!0,t.series,e.userInteractionBase.isStockChart,e):"",pointX:r.x?r.x.toString():"",pointY:r.y?r.y.toString():"",seriesIndex:t.series.index,seriesName:t.series.name,pointIndex:t.point.iX,pointText:t.point.t};e.tooltipBase.tooltipTempList.push(a);var l=this.getSymbolLocation(t,e),h=this.isRectSeries(t.series.type)&&"Waterfall"!=t.series.type&&t.point&&parseInt(r.y?r.y.toString():"")<0,d=e.userInteractionBase.isInverted&&h,c=this.getTemplateLocation(e.userInteractionBase.axisClipRect,l,e.tooltipBase.tooltipElementSize.width,e.tooltipBase.tooltipElementSize.height,this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),o,d,h),p=40;c.x=c.x>e.userInteractionBase.axisClipRect.width?e.userInteractionBase.axisClipRect.width-p:c.x,e.dotnetref.invokeMethodAsync("SetTooltipTemplateElementSizeAsync",c.x,c.y,e.tooltipBase.tooltipTempList),this.removeHighlight(e),this.highlightPoints(e),this.updatePreviousPoint(e,n)}else{var u=e.userInteractionBase.chartBorderWidth;p=3;this.createTooltipRenderer(e,i,this.getSymbolLocation(t,e),o,t.point,this.findShapes(e),this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),new sf.svgbase.Rect(u,u,e.userInteractionBase.availableSize.width-p-2*u,e.userInteractionBase.availableSize.height-p-2*u),e.crosshairBase.crosshair.enable,n,null,"")}}else this.removeHighlight(e);e.tooltipBase.isRemove=!0},groupedTooltip:function(e,t,i,n){var o=t[t.length-1];if(null!=n&&e.tooltipBase.currentPoints.length>0){var r=[];e.tooltipBase.header=e.tooltipBase.sharedArgsData.headerText,e.tooltipBase.formattedText=e.tooltipBase.sharedArgsData.text,this.findMouseValue(n,e);var a=1==e.tooltipBase.currentPoints.length?new s(e.tooltipBase.currentPoints[0].series.clipRect.x,e.tooltipBase.currentPoints[0].series.clipRect.y):new s(0,0);if(null!=e.tooltipBase.tooltipModule.template&&e.tooltipBase.currentPoints.length>0){e.tooltipBase.tooltipTempList=[];for(var l=0;l<t.length;l++){var h=t[l].point,d={x:h.x?this.formatPointValue(h,"x",!0,!1,t[l].series,e.userInteractionBase.isStockChart,e):"",y:h.y?this.formatPointValue(h,"y",!1,!0,t[l].series,e.userInteractionBase.isStockChart,e):"",text:h.t.toString(),high:h.h?this.formatPointValue(h,"h",!1,!0,t[l].series,e.userInteractionBase.isStockChart,e):"",low:h.l?this.formatPointValue(h,"l",!1,!0,t[l].series,e.userInteractionBase.isStockChart,e):"",open:h.o?this.formatPointValue(h,"o",!1,!0,t[l].series,e.userInteractionBase.isStockChart,e):"",close:h.c?this.formatPointValue(h,"c",!1,!0,t[l].series,e.userInteractionBase.isStockChart,e):"",volume:h.v?this.formatPointValue(h,"v",!1,!0,t[l].series,e.userInteractionBase.isStockChart,e):"",pointX:h.x?h.x.toString():"",pointY:h.y?h.y.toString():"",seriesIndex:t[l].series.index,seriesName:t[l].series.name,pointIndex:t[l].point.iX,pointText:t[l].point.t};e.tooltipBase.tooltipTempList.push(d)}var c=this.findSharedLocation(e),p=e.tooltipBase.currentPoints[0].series,u=this.isRectSeries(p.type)&&"Waterfall"!=p.type&&o.point&&parseInt(o.point.y?o.point.y.toString():"")<0,f=e.userInteractionBase.isInverted&&u,g=this.getTemplateLocation(e.userInteractionBase.axisClipRect,c,0,0,this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),a,f,u);e.dotnetref.invokeMethodAsync("SetTooltipTemplateElementSizeAsync",g.x,g.y,e.tooltipBase.tooltipTempList),this.setTooltipTemplateElementSize(e,c,a,f,u),this.removeHighlight(e),this.highlightPoints(e),this.updatePreviousPoint(e,r)}else{var m=e.userInteractionBase.chartBorderWidth;this.createTooltipRenderer(e,i,this.findSharedLocation(e),a,n.point,this.findShapes(e),this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),new sf.svgbase.Rect(m,m,e.userInteractionBase.availableSize.width-3-2*m,e.userInteractionBase.availableSize.height-3-2*m),e.crosshairBase.crosshair.enable,r,null,"")}}else[].push(o);e.tooltipBase.isSharedRemove=!0},setTooltipTemplateElementSize:function(e,t,i,n,s){var o=this.getTemplateSize(e.element.id+"_tooltip");if(o&&e.tooltipBase.currentPoints.length>0){var r=this.getTemplateLocation(e.userInteractionBase.axisClipRect,t,o.width,o.height,this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),i,n,s);r.x+=e.userInteractionBase.secondaryElementOffset.left,r.y+=e.userInteractionBase.secondaryElementOffset.top,document.getElementById(e.element.id+"_tooltip").setAttribute("style","top:"+r.y.toString()+"px;left:"+r.x.toString()+"px;pointer-events:none; position:absolute;z-index: 1;visibility: visible;")}},isPointInRect:function(e,t){for(var i,n=0,s=e;n<s.length;n++){var o=s[n];i=!!sf.svgbase.withInAreaBounds(o.x+t.x,o.y+t.y,t)||!!sf.svgbase.withInAreaBounds(o.x-t.x,o.y-t.y,t)}return i},pushData:function(e,t){return!!e.series.enableTooltip&&(null!=t&&t.tooltipBase.currentPoints.push(e),!0)},renderGroupedTooltip:function(e,t){var i,n,s=this,o="PolarAxes"===t.userInteractionBase.chartAreaType?this.getData(t):null;this.stopAnimation(t.tooltipBase.toolTipInterval),t.tooltipBase.currentPoints=[];for(var r,a,l=[],h=[],d=[],c=0;c<t.userInteractionBase.visibleSeries.length;c++){var p=t.userInteractionBase.visibleSeries[c];p.enableTooltip&&p.visible&&0!=p.points.length&&("CartesianAxes"==t.userInteractionBase.chartAreaType&&p.visible&&p.points.length>0?i=this.getClosestX(t,p):"PolarAxes"===t.userInteractionBase.chartAreaType&&p.visible&&null!=o.point&&(i={point:p.points[o.point.iX],series:p}),null!=i&&i.point&&l.push(i))}l=this.getSharedPoints(t,l),l=this.sortPointsInfo(l);var u,f,g=Number.MAX_VALUE;l.forEach((function(e){a={pointX:e.point.x?e.point.x.toString():"",pointY:e.point.y?e.point.y.toString():"",seriesIndex:e.series.index,seriesName:e.series.name,pointIndex:e.point.iX,pointText:e.point.t},d.push(a),r=s.findHeader(e,t),t.tooltipBase.currentPoints.push(e),h.push(s.getTooltipText(e,t)),u=t.userInteractionBase.isInverted?t.mouseY-e.series.clipRect.y:t.mouseX-e.series.clipRect.x,e.point.s.length&&Math.abs(u-e.point.s[0].x)<g&&(s.isSeriesAxisZoomed(e.series)&&e.point.s.length&&!s.isPointInRect(e.point.s,t.userInteractionBase.axisClipRect)||(g=Math.abs(u-e.point.s[0].x),f=e)),n=t.tooltipBase.lastData="TrendLine"===e.series.category&&t.tooltipBase.tooltipModule.shared?n:f||n})),t.userInteractionBase.isStockChart&&h.push(""),t.tooltipBase.sharedArgsData={headerText:r,text:h,data:d},t.tooltipBase.sharedTooltipEventCalled?t.dotnetref.invokeMethodAsync("SharedTooltipEventTriggered",t.tooltipBase.sharedArgsData):this.groupedTooltip(t,l,e,n)},createTooltipRenderer:function(e,t,i,n,o,r,a,l,h,d,c,p){var u,f=e.tooltipBase.currentPoints[0].series,g=this.isRectSeries(f.type);t&&null!=i&&(u=new sf.svgbase.Tooltip({opacity:e.tooltipBase.tooltipModule.opacity,header:e.tooltipBase.header,content:e.tooltipBase.formattedText,fill:e.tooltipBase.tooltipModule.fill,border:e.tooltipBase.tooltipModule.border,enableAnimation:e.tooltipBase.tooltipModule.enableAnimation,location:null!=i?new s(i.x+e.userInteractionBase.secondaryElementOffset.left,i.y+e.userInteractionBase.secondaryElementOffset.top):null,shared:e.tooltipBase.tooltipModule.shared,crosshair:h,shapes:r,clipBounds:"PolarAxes"==e.userInteractionBase.chartAreaType?new s(0,0):n,areaBounds:new sf.svgbase.Rect(l.x+e.userInteractionBase.secondaryElementOffset.left,l.y+(e&&e.userInteractionBase.isStockChart?e.tooltipBase.seriesTooltipTop:0)+e.userInteractionBase.secondaryElementOffset.top,l.width,l.height),palette:this.findPalette(e),controlName:"Chart",controlInstance:e,template:p||e.tooltipBase.tooltipModule.template,data:c,theme:e.userInteractionBase.theme,offset:a,textStyle:e.tooltipBase.tooltipModule.textStyle,isNegative:!!(g&&"Waterfall"!=f.type&&o&&o.y)&&("BoxPlot"!=f.seriesType&&Number(o.y)<0),inverted:e.userInteractionBase.isInverted&&g,arrowPadding:e.tooltipBase.formattedText.length>1?0:7,availableSize:e.userInteractionBase.availableSize,duration:e.tooltipBase.tooltipDuration,isCanvas:!1,rx:4,ry:4,isTextWrap:e.tooltipBase.tooltipModule.enableTextWrap,enableRTL:e.userInteractionBase.enableRTL})),null!=u&&(this.removeHighlight(e),this.highlightPoints(e),this.updatePreviousPoint(e,d),u.textStyle.size=sf.base.isNullOrUndefined(u.textStyle.size)?"12px":u.textStyle.size,u.textStyle.fontWeight=sf.base.isNullOrUndefined(u.textStyle.fontWeight)?"400":u.textStyle.fontWeight,this.renderTooltip(u,e.element.id+"_tooltip",e))},tooltip:function(e){this.getTooltipElement(e),sf.base.isNullOrUndefined(e.userInteractionBase.visibleSeries)||(e.tooltipBase.tooltipModule.shared?this.renderGroupedTooltip(!0,e):this.renderSeriesTooltip(!0,e))},getData:function(e){var t,i,n,s,o=null,r=null;if(!sf.base.isNullOrUndefined(e.userInteractionBase.visibleSeries))for(var a=e.userInteractionBase.visibleSeries.length-1;a>=0;a--){if(t="Scatter"===(r=e.userInteractionBase.visibleSeries[a]).type||"Scatter"===r.drawType||r.marker&&r.marker.vS?(r.marker.mH+5)/2:0,i="Scatter"===r.type||"Scatter"===r.drawType||r.marker&&r.marker.vS?(r.marker.mW+5)/2:0,n=e.mouseX,s=e.mouseY,r.dataEditSettings&&this.isRectSeries(r.seriesType))if("Bar"===r.type&&r.chartIsTransposed||!r.chartIsTransposed&&"Bar"!==r.type){var l=r.marker.mH/2;s=r.y_Axis.isAxisInverse?s-l:s+l}else{var h=r.marker.mW/2;n=r.y_Axis.isAxisInverse?n+h:n-h}if(r.visible&&!sf.base.isNullOrUndefined(r.clipRect)&&sf.svgbase.withInAreaBounds(n,s,new sf.svgbase.Rect(r.clipRect.x,r.clipRect.y,r.clipRect.w,r.clipRect.h),t,i)&&(o=this.getRectPoint(r,r.clipRect,n,s,e)),o)return{point:o,series:r}}return{point:o,series:r}},getRectPoint:function(e,t,i,n,s){for(var o,r,a,l,h,d,c=0,p=this.isRectSeries(e.seriesType),u=0,f=e.points;u<f.length;u++){var g=f[u];if(g.rD||g.r&&g.r.length){if(g.rD&&"PolarAxes"===s.userInteractionBase.chartAreaType&&e.drawType.indexOf("Column")>-1&&(o=i-(e.clipRect.w/2+e.clipRect.x),r=n-(e.clipRect.h/2+e.clipRect.y),c=2*Math.PI*(g.rD.cP<0?1+g.rD.cP:g.rD.cP),a=(a=(Math.atan2(r,o)+.5*Math.PI-c)%(2*Math.PI))<0?2*Math.PI+a:a,a+=2*Math.PI*e.x_Axis.startAngle,l=g.rD.sA,l=(l-=c)<0?2*Math.PI+l:l,h=g.rD.eA,h=(h-=c)<0?2*Math.PI+h:h,d=Math.sqrt(Math.pow(Math.abs(o),2)+Math.pow(Math.abs(r),2)),a>=l&&a<=h&&(d>=g.rD.iR&&d<=g.rD.r||d<=g.rD.iR&&d>=g.rD.r)&&d<=s.userInteractionBase.chartRadius))return g;if(e.dataEditSettings&&p&&this.rectRegion(i,n,g,t,e,s))return g;if(this.checkRegionContainsPoint(g.r,t,i,n,s))return g}}return null},rectRegion:function(e,t,i,n,s,o){var r,a="Bar"===s.type,l=s.y_Axis.isAxisInverse,h=s.chartIsTransposed,d=0,c=0,p=r=20;return l&&h?a?(d=i.r[0].h-10,r=i.r[0].w):(c=-10,p=i.r[0].h):l||i.yV<0?a?(c=-10,p=i.r[0].h):(d=i.r[0].h-10,r=i.r[0].w):h?a?(d=-10,r=i.r[0].w):(c=i.r[0].w-10,p=i.r[0].h):a?(c=i.r[0].w-10,p=i.r[0].h):(d=-10,r=i.r[0].w),i.r.some((function(i){return sf.svgbase.withInAreaBounds(e,t,new sf.svgbase.Rect(("CartesianAxes"===o.userInteractionBase.chartAreaType?n.x:0)+i.x+c,("CartesianAxes"===o.userInteractionBase.chartAreaType?n.y:0)+i.y+d,r,p))}))},checkRegionContainsPoint:function(e,t,i,n,s){return e.some((function(e,o){return s.userInteractionBase.lierIndex=o,sf.svgbase.withInAreaBounds(i,n,new sf.svgbase.Rect(("CartesianAxes"===s.userInteractionBase.chartAreaType?t.x:0)+e.x,("CartesianAxes"===s.userInteractionBase.chartAreaType?t.y:0)+e.y,e.w,e.h))}))},getClosestX:function(e,t){if(null==t)return null;var i=t.clipRect;if(i&&e.mouseX<=i.x+i.w&&e.mouseX>=i.x){var n=this.getPointValue(e,t),s=this.getClosest(t,n);return null!=s&&null==s.y&&"BollingerBand"==t.name?null:{point:s,series:t}}return null},getPointValue:function(e,t){if(null!=t&&null!=t.clipRect){var i=e.userInteractionBase.isInverted?e.mouseY-t.clipRect.y:e.mouseX-t.clipRect.x,n=e.userInteractionBase.isInverted?t.clipRect.h:t.clipRect.w;return this.getValueByPoint(i,n,t.x_Axis.orientation,t.x_Axis.visibleRange,t.x_Axis.isAxisInverse)}return 0},getValueByPoint:function(e,t,i,n,s){return("Horizontal"==i&&!s||"Horizontal"!=i&&s?e/t:1-e/t)*n.delta+n.start},getClosest:function(e,t){var i;return null==e||t>=e.xMin-.5&&t<=e.xMax+.5&&e.points.length>0&&(i=this.findClosest(this.sortPoints(e.points,["xV"]),t)),i},sortPoints:function(e,t,i){for(var n=sf.base.extend([],e,null),s=0;s<n.length;s++)for(var o=0;o<t.length;o++)n[s][t[o]]instanceof Date&&(n[s][t[o]]=n[s][t[o]].getTime());return n.sort((function(e,n){for(var s=0,o=0,r=0;r<t.length;r++)s+=e[t[r]],o+=n[t[r]];return!i&&s<o||i&&s>o?-1:s===o?0:1})),n},findClosest:function(e,t){var i=e.length;if(t<=e[0].xV)return e[0];if(t>=e[i-1].xV)return e[i-1];for(var n=0,s=i,o=0;n<s;){if(e[o=Math.round((n+s)/2)].xV==t)return e[o];if(t<e[o].xV){if(o>0&&t>e[o-1].xV)return this.getClosestValue(e[o-1],e[o],t);s=o}else{if(o<i-1&&t<e[o+1].xV)return this.getClosestValue(e[o],e[o+1],t);n=o+1}}return e[o]},getClosestValue:function(e,t,i){return i-e.xV>=t.xV-i?t:e},getSharedPoints:function(e,t){var i,n,s=t;if(!("CartesianAxes"==e.userInteractionBase.chartAreaType&&null!=t&&t.length>0)||e.tooltipBase.tooltipModule.showAllSeries)return t;for(var o=0,r=t;o<r.length;o++){var a=r[o];if(i=this.getPointValue(e,a.series),this.isClosest(i,a,n)&&(n=a.point.xV),this.isAxisValue(a.series))return t}return(t=t.filter((function(e){return n==e.point.xV}))).length<s.length&&e.tooltipBase.tooltipModule.showNearestPoint?s:t},isClosest:function(e,t,i){var n=t.series.x_Axis;return e>=n.visibleRange.start-.5&&e<=n.visibleRange.end+.5&&(isNaN(i)||Math.abs(t.point.xV-e)<Math.abs(i-e))},isAxisValue:function(e){return!sf.base.isNullOrUndefined(e)&&(e.axesCount>2&&"PrimaryXAxis"!=e.x_Axis.name)},sortPointsInfo:function(e){var t=[];return e.forEach((function(e){"Series"===e.series.category&&t.push(e)})),e.forEach((function(e){"Indicator"===e.series.category&&t.push(e)})),e.forEach((function(e){"TrendLine"===e.series.category&&t.push(e)})),t},findHeader:function(e,t){var i=t.tooltipBase.header;return sf.base.isNullOrUndefined(i)?"":""!==(i=this.parseTemplate(e.point,e.series,i,t)).replace(/<b>/g,"").replace(/<\/b>/g,"").trim()?i:""},getTooltipText:function(e,t){return this.parseTemplate(e.point,e.series,this.getFormat(t,e.series),t)},getIndicatorTooltipFormat:function(e,t){return"XY"===e.seriesType?e.name+" : <b>${point.y}</b>":t},parseTemplate:function(e,t,i,n){for(var s,o,r=0,a=Object.keys(e);r<a.length;r++){var l=a[r];s=new RegExp("${point."+l+"}","gm"),i.indexOf(s.source)>-1&&(i=i.replace(s.source,this.formatPointValue(e,l,"${point.x}"===s.source,"${point.h}"===s.source||"${point.o}"===s.source||"${point.c}"===s.source||"${point.l}"===s.source||"${point.y}"===s.source,t,n.userInteractionBase.isStockChart,n)))}for(var h=0,d=Object.keys(t);h<d.length;h++){l=d[h];s=new RegExp("${series."+l+"}","gm"),o=t[l],i.indexOf(s.source)>-1&&(i=i.replace(s.source,o))}return i},getTemplateLocation:function(e,t,i,n,o,r,a,l){var h=new s(t.x,t.y),d=i+10,c=n+10,p=r.x,u=r.y,f=e.x,g=e.y;return a?(((h=new s(h.x+p+o,h.y+u-n/2)).x+d+12>f+e.width||l)&&(h.x=(t.x>e.width?e.width:t.x)+p-o-(d+12)),h.x<f&&(h.x=(t.x<0?0:t.x)+p+o),h.y<=g&&(h.y=g),h.y+c>=g+e.height&&(h.y-=h.y+c-(g+e.height))):(((h=new s(h.x+p-i/2,h.y+u-n-12-o)).y<g||l)&&(h.y=(t.y<0?0:t.y)+u+o),h.y+c+12>g+e.height&&(h.y=(t.y>e.height?e.height:t.y)+u-n-12-o),h.x<f&&(h.x=f),h.x+d>f+e.width&&(h.x-=h.x+d-(f+e.width))),{x:h.x,y:h.y}},formatPointValue:function(e,t,i,n,s,o,r){var a,l,h,d=i?s.x_Axis:s.y_Axis,c=d.format?d.format:d.dateFormat,p=d.labelFormat;if("DateTime"==d.valueType&&i)a=(new sf.base.Internationalization).getDateFormat({format:c||"MM/dd/yyyy",type:this.firstToLowerCase("DateTime")})(this.convertDateAndTime(new Date(e.xV))),a=this.getGlobalizedDate(a,r.dateValuePairs);else if("DateTimeCategory"===d.valueType&&i){var u=d.isUniversalDateTime?this.convertDateAndTime(new Date(e[t])):new Date(e[t]);a=(new sf.base.Internationalization).getDateFormat({format:c||p||"MM/dd/yyyy HH:mm:ss tt",type:this.firstToLowerCase("DateTime")})(u),a=this.getGlobalizedDate(a,r.dateValuePairs)}else if("Category"!==d.valueType&&i)a=(l=p&&null!==p.match("{value}"))?p.replace("{value}",this.formatAxisValue(e[t],l,p,void 0,r)):this.formatAxisValue(e[t],l,p,void 0,r);else if(n&&!sf.base.isNullOrUndefined(e[t])){if(l=p&&null!==p.match("{value}"),"outliers"===t)h=this.formatAxisValue(e[t][this.lierIndex-4],l,p,void 0,r);else{var f=e[t],g=s.markerDataLabelFormat?parseInt(s.markerDataLabelFormat.substring(1)):2,m=o?Math.max(2,(f-Math.round(f)).toString().length):g;h=this.formatAxisValue(e[t],l,p,m,r)}o&&"Indicator"===s.category&&"AccumulationDistribution"===s.name&&(h=h.replace(/\B(?=(\d{3})+(?!\d))/g,",")),h=this.getGlobalizedNumber(h,r.numberValuePairs),a=l?p.replace("{value}",h):h}else a=this.getGlobalizedNumber(e[t].toString(),r.numberValuePairs);return a},getFormat:function(e,t){var i=e.tooltipBase.tooltipModule.shared&&!t.name?"":"<br/>";if(t.tooltipFormat)return"XY"===t.seriesType&&"Indicator"===t.category?this.getIndicatorTooltipFormat(t,e,e.tooltipBase.tooltipFormat):t.tooltipFormat;if(e.tooltipBase.tooltipFormat)return"XY"===t.seriesType&&"Indicator"===t.category?this.getIndicatorTooltipFormat(t,e,e.tooltipBase.tooltipFormat):e.tooltipBase.tooltipFormat;var n="Histogram"===e.seriesTypes[t.index]?"${point.mI}-${point.mX}":"${point.x}",s=e.tooltipBase.tooltipModule.shared&&(!e.userInteractionBase.isStockChart||t.seriesType.indexOf("HighLow")>-1)?"${series.name}":n;switch(t.seriesType){case"XY":return"Indicator"===t.category?this.getIndicatorTooltipFormat(t,e,e.tooltipBase.tooltipFormat):s+" : "+("Bubble"===e.seriesTypes[t.index]?"<b>${point.y}</b>  Size : <b>${point.sI}</b>":"<b>${point.y}</b>");case"HighLow":return s+i+"High : <b>${point.h}</b><br/>Low : <b>${point.l}</b>";case"HighLowOpenClose":e.userInteractionBase.isStockChart&&t.volume;return s+i+"High : <b>${point.h}</b><br/>Low : <b>${point.l}</b><br/>Open : <b>${point.o}</b><br/>Close : <b>${point.c}</b>";case"BoxPlot":return s+i+(e.userInteractionBase.lierIndex>3?"Outliers : <b>${point.oL}</b>":"Maximum : <b>${point.mX}</b><br/>Q3 : <b>${point.uQ}</b><br/>Median : <b>${point.m}</b><br/>Q1 : <b>${point.lQ}</b><br/>Minimum : <b>${point.mI}</b>");default:return""}},formatAxisValue:function(e,t,i,n,s){void 0===n&&(n=2);var o=Number(e);return(new sf.base.Internationalization).getNumberFormat({format:t?"":i,useGrouping:s.userInteractionBase.useGrouping,minimumFractionDigits:2,maximumFractionDigits:n>20?20:n})(o)},findShapes:function(e){if(!e.tooltipBase.tooltipModule.enableMarker)return[];for(var t=[],i=0,n=e.tooltipBase.currentPoints;i<n.length;i++){var s=n[i];t.push(s.series.shape)}return t},findMarkerHeight:function(e,t){var i=e.series;return(i.marker.vS||t.tooltipBase.tooltipModule.shared&&(!this.isRectSeries(i.type)||i.marker.vS)||"Scatter"===i.type||"Scatter"===i.type)&&"Candle"!==i.seriesType&&"Hilo"!==i.seriesType&&"HiloOpenClose"!==i.seriesType?(i.marker.mH+5)/2+2*i.marker.b.wT:0},findSharedLocation:function(e){return e.userInteractionBase.isStockChart?this.stockChartTooltipPosition&&"Nearest"===this.stockChartTooltipPosition?new s(e.tooltipBase.valueX,e.tooltipBase.valueY+e.tooltipBase.seriesTooltipTop+5):new s(e.userInteractionBase.axisClipRect.x+5,e.userInteractionBase.axisClipRect.y+e.tooltipBase.seriesTooltipTop+5):e.tooltipBase.currentPoints.length>1?new s(e.tooltipBase.valueX,e.tooltipBase.valueY):this.getSymbolLocation(e.tooltipBase.currentPoints[0],e)},valueToCoefficient:function(e,t){var i=(e-t.visibleRange.start)/t.visibleRange.delta;return t.isAxisInverse?1-i:i},valueToPolarCoefficient:function(e,t,i){var n,s,o=i.visibleRange;return"Category"!==t?(n=o.end-("DateTime"===t?i.dataTimeInterval:i.visibleInterval)-o.start,s=i.visibleLabelCount-1,n=0===n?1:n):(n=1===i.visibleLabelCount?1:i.visibleLabelCount-1-0,s=i.visibleLabelCount),i.isAxisInverse?(e-o.start)/n*(1-1/s):1-(e-o.start)/n*(1-1/s)},findMouseValue:function(e,t){var i=e.series.x_Axis;t.userInteractionBase.isInverted?(t.tooltipBase.valueY=(1-this.valueToCoefficient(e.point.xV,i))*i.rect.h+i.rect.y,t.tooltipBase.valueX=t.mouseX):("PolarAxes"===t.userInteractionBase.chartAreaType?t.tooltipBase.valueX=this.valueToPolarCoefficient(e.point.xV,e.series.x_Axis.valueType,i)*i.rect.w+i.rect.x:t.tooltipBase.valueX="TrendLine"===e.series.category&&t.tooltipBase.tooltipModule.shared?t.tooltipBase.valueX:this.valueToCoefficient(e.point.xV,i)*i.rect.w+i.rect.x,t.tooltipBase.valueY=t.mouseY)},getSymbolLocation:function(e,t){var i=t.userInteractionBase.isStockChart?new s(0,t.tooltipBase.seriesTooltipTop):new s(0,0);if("BoxAndWhisker"!==e.series.type){if(0==e.point.s.length)return null;i=new s(e.point.s[0].x,e.point.s[0].y)}switch(e.series.type){case"BoxAndWhisker":return this.getBoxLocation(e,t);case"Waterfall":return this.getWaterfallRegion(e,i,t);case"RangeArea":case"SplineRangeArea":case"RangeColumn":case"RangeStepArea":return this.getRangeArea(e,i);default:return i}},getBoxLocation:function(e,t){return t.userInteractionBase.lierIndex>3?e.point.s[t.userInteractionBase.lierIndex-4]:{x:e.point.r[0].x+e.point.r[0].w/2,y:e.point.r[0].y+e.point.r[0].h/2}},getWaterfallRegion:function(e,t){return this.inverted?t.x=Number(e.point.y)<0?t.x+e.point.r[0].w:t.x:t.y=Number(e.point.y)<0?t.y-e.point.r[0].h:t.y,t},getRangeArea:function(e,t){return e.point.r.length>0&&e.point.r[0]&&(this.inverted?t.x=e.point.r[0].x+e.point.r[0].w/2:t.y=e.point.r[0].y+e.point.r[0].h/2),t},findPalette:function(e){for(var t=[],i=0,n=e.tooltipBase.currentPoints;i<n.length;i++){var s=n[i];t.push(this.findColor(s,s.series))}return t},findColor:function(e,t){return!this.isRectSeries(t.seriesType)||"Candle"!==t.seriesType&&"Hilo"!==t.seriesType&&"HiloOpenClose"!==t.seriesType?""!=e.point.i?e.point.i:""!=t.marker.f?t.marker.f:t.interior:e.point.i},renderTooltip:function(e,t,i){var n=document.getElementById(t+"_svg"),s=e,o=i;!(n&&parseInt(n.getAttribute("opacity"),10)>0)&&!sf.base.isNullOrUndefined(o)?(o.tooltip=new sf.svgbase.Tooltip(s),o.tooltip.enableRTL=s.enableRTL,o.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(o.tooltip)||(o.tooltip.location=new sf.svgbase.TooltipLocation(s.location.x,s.location.y),o.tooltip.content=s.content,o.tooltip.header=s.header,o.tooltip.offset=s.offset,o.tooltip.palette=s.palette,o.tooltip.shapes=s.shapes,o.tooltip.data=s.data,o.tooltip.template=s.template,o.tooltip.textStyle.color=s.textStyle.color||o.tooltip.textStyle.color,o.tooltip.textStyle.fontFamily=s.textStyle.fontFamily||o.tooltip.textStyle.fontFamily,o.tooltip.textStyle.fontStyle=s.textStyle.fontStyle||o.tooltip.textStyle.fontStyle,o.tooltip.textStyle.fontWeight=s.textStyle.fontWeight||o.tooltip.textStyle.fontWeight,o.tooltip.textStyle.opacity=s.textStyle.opacity||o.tooltip.textStyle.opacity,o.tooltip.textStyle.size=s.textStyle.size||o.tooltip.textStyle.size,o.tooltip.isNegative=s.isNegative,o.tooltip.clipBounds=new sf.svgbase.TooltipLocation(s.clipBounds.x,s.clipBounds.y),o.tooltip.arrowPadding=s.arrowPadding,o.tooltip.dataBind())},removeTooltip:function(e,t){var i=this,n=this.getElement(t.element.id+"_tooltip");this.stopAnimation(t.tooltipBase.toolTipInterval),n&&null==t.tooltipBase.tooltipModule.template&&t.tooltipBase.previousPoints.length>0?t.tooltipBase.toolTipInterval=+setTimeout((function(){t.tooltipBase.tooltipModule&&i.fadeOut(t.dataId)}),e):n&&null!=t.tooltipBase.tooltipModule.template&&t.tooltipBase.previousPoints.length>0&&(t.tooltipBase.toolTipInterval=+setTimeout((function(){null!=t.tooltipBase.tooltipModule.template&&(t.dotnetref.invokeMethodAsync("RemoveTemplateTooltip"),t.tooltipBase.valueX=0,t.tooltipBase.valueY=0,t.tooltipBase.currentPoints=[],i.removeHighlight(t),i.removeMarker(t),t.tooltipBase.previousPoints=[])}),e))},stopAnimation:function(e){this.stopTimer(e)},stopTimer:function(e){window.clearInterval(e)},removeHighlight:function(e){for(var t=0,i=e.tooltipBase.previousPoints;t<i.length;t++){var n=i[t],s="Polar"!=n.series.type?n.series.type:n.series.drawType;this.isRectSeries(s)&&this.highlightPoint(e,n.series,n.point.iX,!1)}},highlightPoint:function(e,t,i,n){var s=this.getElement(e.element.id+"_Series_"+t.index+"_Point_"+i+("BoxPlot"==t.seriesType?"_BoxPath":""));sf.base.isNullOrUndefined(s)||(""===e.highlightColor||sf.base.isNullOrUndefined(e.highlightColor)?s.setAttribute("opacity",(n?t.opacity/1.25:t.opacity).toString()):s.setAttribute("fill",n&&"transparent"!=e.highlightColor?e.highlightColor:t.interior))},highlightPoints:function(e){for(var t=0,i=e.tooltipBase.currentPoints;t<i.length;t++){var n=i[t],s="Polar"!=n.series.type?n.series.type:n.series.drawType;this.isRectSeries(s)&&"Series"==n.series.category&&this.highlightPoint(e,n.series,n.point.iX,!0)}},updatePreviousPoint:function(e,t){t.length>0&&(e.tooltipBase.currentPoints=e.tooltipBase.currentPoints.concat(t)),e.tooltipBase.previousPoints=[],e.tooltipBase.previousPoints=e.tooltipBase.previousPoints.concat(e.tooltipBase.currentPoints)},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip)||(this.removeTooltipCommentElement(t),t.tooltipBase.valueX=0,t.tooltipBase.valueY=0,t.tooltipBase.currentPoints=[],this.removeHighlight(t),this.removeMarker(t),t.tooltipBase.previousPoints=[],t.tooltip.fadeOut())},removeTooltipCommentElement:function(e){var t=this.getElement(e.tooltip.element.id);if(t&&!e.isRemoveCommentElement&&t.childNodes.length>1){for(var i=t.childNodes,n=[],s=0;s<i.length;s++)(i[s].nodeName.match("#comment")||i[s].nodeName.match("#text"))&&n.push(i[s]);for(var o=0,r=n;o<r.length;o++){var a=r[o];sf.base.remove(a),e.isRemoveCommentElement=!0}}},isSeriesAxisZoomed:function(e){var t=!1;return 1===e.x_Axis.zoomFactor&&1===e.y_Axis.zoomFactor&&0===e.y_Axis.zoomPosition&&0===e.x_Axis.zoomPosition||(t=!0),t},getParentElementBoundsById:function(e){var t=document.getElementById(e);if(t){var i=document.getElementById(e+"_svg");i&&(i.style.display="none");var n=document.getElementById(e+"_tooltip_data");n&&(n.style.display="none"),t.style.width="100%",t.style.height="100%";var s=t.getBoundingClientRect(),o=s.width||t.clientWidth||t.offsetWidth,r=s.height||t.clientHeight||t.offsetHeight;return i&&(i.style.display=""),n&&(n.style.display="block"),{width:o,height:r,left:s.left,top:s.top,right:s.right,bottom:s.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(e,t){void 0===t&&(t=!0),t&&(this.id=e);var i=document.getElementById(e);if(i){var n=i.getBoundingClientRect();return{width:i.clientWidth||i.offsetWidth,height:i.clientHeight||i.offsetHeight,left:n.left,top:n.top,right:n.right,bottom:n.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getRefreshElementBoundsById:function(e){var t=document.getElementById(e);if(t){for(var i=document.getElementsByClassName("e-chart"),n=i.length,s=0;s<n;s++){if((r=i[s]).id.indexOf("_stockChart_")<0)r.querySelector("[id*=_svg]").style.display="none"}t.style.width="100%",t.style.height="100%";var o=t.getBoundingClientRect();for(s=0;s<n;s++){var r;if((r=i[s]).id.indexOf("_stockChart_")<0)r.querySelector("[id*=_svg]").style.display=""}return{width:o.width||t.clientWidth||t.offsetWidth,height:o.height||t.clientHeight||t.offsetHeight,left:o.left,top:o.top,right:o.right,bottom:o.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getBrowserDeviceInfo:function(){return{browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer,isDevice:sf.base.Browser.isDevice,isTouch:sf.base.Browser.isTouch,isIos:sf.base.Browser.isIos||sf.base.Browser.isIos7}},setZoomingCipPath:function(e,t,i){var n=document.getElementById(e),s=document.getElementById(t);n&&n.setAttribute("clip-path",i),s&&n.setAttribute("clip-path",i)},setZoomingElementAttributes:function(e,t,i,n,s,o,r,a){"Indicator"===t&&i&&i.parentElement&&i.parentElement.setAttribute("transform",e),i&&i.setAttribute("transform",e),n&&n.setAttribute("transform",e),s&&s.setAttribute("transform",e),o&&o.setAttribute("visibility","hidden"),r&&r.setAttribute("visibility","hidden"),a&&(a.style.visibility="hidden")},measureBreakText:function(e,t,i,n,s,o,r){var a={color:i,size:t,fontFamily:n,fontWeight:s,fontStyle:o,opacity:parseInt(r,10)};return sf.svgbase.measureText(e,a)},getAllCharacters:function(){for(var e=[],t=33;t<591;t++)e.push(String.fromCharCode(t));return e},measureText:function(e,t,i,n){var s=document.getElementById("sfchartmeasuretext");return null===s&&(s=sf.base.createElement("text",{id:"sfchartmeasuretext"}),document.body.appendChild(s))," "===e&&(e="&nbsp;"),s.innerHTML=e,s.style.position="fixed",s.style.fontSize="100px",s.style.fontWeight=t,s.style.fontStyle=i,s.style.fontFamily=n,s.style.visibility="hidden",s.style.top="-100",s.style.left="0",s.style.whiteSpace="nowrap",s.style.lineHeight="normal",{Width:s.clientWidth,Height:s.clientHeight}},getCharCollectionSize:function(e){for(var t=[],i=this.getAllCharacters(),n=i.length,s=e.length,o=0;o<s;o++)for(var r=e[o].split("_"),a=r[0],l=r[1],h=r[2],d=0;d<n;d++)t.push(this.measureText(i[d],a,l,h).Width+"");return JSON.stringify(t)},getCharSizeByFontKeys:function(e){for(var t,i={},n=e.length,s=[],o=0;o<n;o++)s=e[o].split("_"),t=this.measureText(s[0],s[1],s[2],s[3]),i[e[o]]={X:t.Width,Y:t.Height};return JSON.stringify(i)},getElementRect:function(e){var t=document.getElementById(e),i=t.getBoundingClientRect();return sf.base.remove(t),{Left:i.left,Right:i.right,Top:i.top,Bottom:i.bottom,Width:i.width,Height:i.height}},getElement:function(e){return document.getElementById(e)},drawTrackBall:function(e,t,i,n,s,o){var r=this.getElement(e);if(r){for(var a=document.createElementNS("http://www.w3.org/2000/svg",i),l=Object.keys(t),h="",d=0;d<l.length;d++)h="strokeWidth"===l[d]?"stroke-width":"strokeDashArray"===l[d]?"stroke-dashArray":"direction"===l[d]?"d":l[d],a.setAttribute(h,t[l[d]]);a.setAttribute("class",n),a.setAttribute("clip-path",s),a.setAttribute("transform",o),r.appendChild(a)}},removeHighLightedMarker:function(e){for(var t=document.getElementsByClassName(e.markerExplodeBase.trackBallClass),i=0;i<t.length;)-1!==t[i].id.indexOf(e.id)?sf.base.remove(t[i]):i++},setAttribute:function(e,t,i){var n=this.getElement(e);n&&n.setAttribute(t,i)},createTooltip:function(e,t,i,n,s){var o=document.getElementById(e),r="top:"+((window.scrollY||0)+i).toString()+"px;left:"+n.toString()+"px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:"+s+";border-radius:2px; z-index:10";o?(o.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),o.setAttribute("styles",r)):(o=sf.base.createElement("div",{id:e,innerHTML:"&nbsp;"+t+"&nbsp;",styles:r}),document.body.appendChild(o))},removeElement:function(e){if(!e)return null;var t=this.getElement(e);t&&sf.base.remove(t)},applySelection:function(e,t){var i,n=document.getElementById(e);if(n&&n.childNodes)for(var s=1,o=(i=n.childNodes).length;s<o;s++)i[s]&&"rect"!==i[s].tagName&&i[s].setAttribute&&i[s].setAttribute("fill",t)},getAndSetTextContent:function(e,t,i){var n=document.getElementById(e);if(n){if(t)return n.textContent;n.textContent=i}return null},doProgressiveAnimation:function(e,t,i,n,s){var o,r=this.getElement(t),a=this.getElement(e),l=new sf.base.Animation({}),h=a.getTotalLength();a.setAttribute("visibility","hidden"),l.animate(a,{duration:i+n,delay:n,progress:function(e){r.setAttribute("visibility","visible"),e.timeStamp>=e.delay&&(a.setAttribute("visibility","visible"),o=Math.abs(Math.round((e.timeStamp-e.delay)*h/e.duration)),a.setAttribute("stroke-dasharray",o+","+h))},end:function(){a.setAttribute("stroke-dasharray",s)}})},linear:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},doLinearAnimation:function(e,t,i,n){var s,o=this.getElement(e),r=new sf.base.Animation({}),a=this.linear,l=+o.getAttribute("height"),h=+o.getAttribute("width"),d=+o.getAttribute("x"),c=n?+o.getAttribute("height")+ +o.getAttribute("y"):+o.getAttribute("y");r.animate(o,{duration:t,delay:i,progress:function(e){e.timeStamp>=e.delay&&(o.setAttribute("visibility","visible"),n?(s=a(e.timeStamp-e.delay,0,l,e.duration),o.setAttribute("transform","translate("+d+" "+c+") scale(1,"+s/l+") translate("+-d+" "+-c+")")):(s=a(e.timeStamp-e.delay,0,h,e.duration),o.setAttribute("transform","translate("+d+" "+c+") scale("+s/h+", 1) translate("+-d+" "+-c+")")))},end:function(){o.setAttribute("transform","translate(0,0)")}})},filterCommentElement:function(e){var t=this.getElement(e);if(!t)return null;for(var i=t.childNodes,n=[],s=0;s<i.length;s++)i[s].nodeName.match("#comment")||n.push(i[s]);return n},doInitialAnimation:function(e){for(var t=0;t<e.length;t++){switch(e[t].type){case"Rect":for(var i=this.getElement(e[t].clipPathId),n=this.filterCommentElement(e[t].elementId),s=0;s<e[t].pointIndex.length;s++)this.doRectAnimation(n[e[t].pointIndex[s]],i,e[t].duration,e[t].delay,e[t].pointX[s],e[t].pointY[s],e[t].pointWidth[s],e[t].pointHeight[s],e[t].isInvertedAxis);break;case"Progressive":this.doProgressiveAnimation(e[t].elementId,e[t].clipPathId,e[t].duration,e[t].delay,e[t].strokeDashArray);break;case"Linear":this.doLinearAnimation(e[t].elementId,e[t].duration,e[t].delay,e[t].isInvertedAxis);break;case"Marker":var o=this.getElement(e[t].clipPathId),r=this.filterCommentElement(e[t].elementId);for(s=0;s<e[t].pointIndex.length;s++)this.doMarkerAnimate(r[e[t].pointIndex[s]],o,e[t].duration,e[t].delay,e[t].pointX[s],e[t].pointY[s]);break;case"PolarRadar":var a=this.getElement(e[t].clipPathId),l=this.filterCommentElement(e[t].elementId);for(s=0;s<l.length;s++)this.doPolarRadarAnimation(l[s],a,e[t].duration,e[t].delay,e[t].pointX[0],e[t].pointY[0])}if(!sf.base.isNullOrUndefined(e[t].markerInfo))for(o=this.getElement(e[t].markerInfo.markerClipPathId),r=this.filterCommentElement(e[t].markerInfo.markerElementId),s=0;s<e[t].markerInfo.pointIndex.length;s++)this.doMarkerAnimate(r[e[t].markerInfo.pointIndex[s]],o,200,e[t].duration+e[t].delay,e[t].markerInfo.pointX[s],e[t].markerInfo.pointY[s]),e[t].markerInfo.lowPointIndex.length>0&&this.doMarkerAnimate(r[e[t].markerInfo.lowPointIndex[s]],o,200,e[t].duration+e[t].delay,e[t].markerInfo.lowPointX[s],e[t].markerInfo.lowPointY[s]);if(!sf.base.isNullOrUndefined(e[t].dataLabelInfo))if(0===e[t].dataLabelInfo.templateId.length)this.doDataLabelAnimation(e[t].dataLabelInfo.shapeGroupId,e[t].dataLabelInfo.textGroupId,"",e[t].clipPathId,200,e[t].duration+e[t].delay);else for(s=0;s<e[t].dataLabelInfo.templateId.length;s++)this.doDataLabelAnimation("","",e[t].dataLabelInfo.templateId[s],"",200,e[t].duration+e[t].delay);sf.base.isNullOrUndefined(e[t].errorBarInfo)||this.doErrorBarAnimation(e[t].errorBarInfo.errorBarElementId,e[t].errorBarInfo.errorBarClipPathId,e[t].duration+e[t].delay,e[t].isInvertedAxis)}},doDynamicAnimation:function(e,t,i){for(var n=0;n<e.length;n++)sf.base.isNullOrUndefined(e[n].previousDir)||""===e[n].previousDir||sf.base.isNullOrUndefined(e[n].currentDir)||""===e[n].currentDir||this.pathAnimation(e[n].id,e[n].currentDir,!0,e[n].previousDir,300);for(var s=0;s<t.length;s++)this.animateRectElement(t[s].id,0,300,t[s].currentRect,t[s].previousRect);for(var o=0;o<i.length;o++)this.animateRedrawElement(i[o].id,300,i[o].preLocationX,i[o].preLocationY,i[o].curLocationX,i[o].curLocationY,i[o].x,i[o].y)},doRectAnimation:function(e,t,i,n,s,o,r,a,l){var h,d=this.linear;sf.base.isNullOrUndefined(e)||(e.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(e,{duration:i,delay:n,progress:function(i){t.setAttribute("visibility","visible"),i.timeStamp>=i.delay&&(e.setAttribute("visibility","visible"),l?(r=r||1,h=d(i.timeStamp-i.delay,0,r,i.duration),e.setAttribute("transform","translate("+s+" "+o+") scale("+h/r+", 1) translate("+-s+" "+-o+")")):(a=a||1,h=d(i.timeStamp-i.delay,0,a,i.duration),e.setAttribute("transform","translate("+s+" "+o+") scale(1,"+h/a+") translate("+-s+" "+-o+")")))},end:function(){e.setAttribute("transform","translate(0,0)")}}))},doMarkerAnimate:function(e,t,i,n,s,o){var r=0;e&&(e.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(e,{duration:i,delay:n,progress:function(i){t.setAttribute("visibility","visible"),i.timeStamp>i.delay&&(e.setAttribute("visibility","visible"),r=(i.timeStamp-i.delay)/i.duration,e.setAttribute("transform","translate("+s+" "+o+") scale("+r+") translate("+-s+" "+-o+")"))},end:function(){e.setAttribute("visibility","")}}))},doPolarRadarAnimation:function(e,t,i,n,s,o){var r=0;e.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(e,{duration:i,delay:n,progress:function(i){t.setAttribute("visibility","visible"),i.timeStamp>i.delay&&(e.setAttribute("visibility","visible"),r=(i.timeStamp-i.delay)/i.duration,e.setAttribute("transform","translate("+s+" "+o+") scale("+r+") translate("+-s+" "+-o+")"))},end:function(){e.setAttribute("visibility","visible"),e.removeAttribute("transform")}})},templateAnimate:function(e,t,i,n,s,o){new sf.base.Animation({}).animate(e,{duration:i,delay:t,name:n,progress:function(e){o&&o.setAttribute("visibility","visible"),e.element.style.visibility="visible"},end:function(e){s?sf.base.remove(e.element):e.element.style.visibility="visible"}})},doDataLabelAnimation:function(e,t,i,n,s,o){for(var r,a,l,h=this.filterCommentElement(e),d=this.filterCommentElement(t),c=this.getElement(n),p=this.getElement(i),u=p?1:d.length,f=0;f<u;f++)p?(p.style.visibility="hidden",this.templateAnimate(p,o,s,"ZoomIn")):(r=+(l=d[f]).getAttribute("x")+ +l.getAttribute("width")/2,a=+l.getAttribute("y")+ +l.getAttribute("height")/2,this.doMarkerAnimate(d[f],c,s,o,r,a),h[f]&&(r=+(l=h[f]).getAttribute("x")+ +l.getAttribute("width")/2,a=+l.getAttribute("y")+ +l.getAttribute("height")/2,this.doMarkerAnimate(h[f],c,s,o,r,a)))},pathAnimation:function(e,t,i,n,s){var o=this,r=this.getElement(e);if(!i||null==r)return null;var a=300;s&&(a=s);var l,h,d,c=n||r.getAttribute("d"),p=c.split(/(?=[LMCZAQ])/),u=t.split(/(?=[LMCZAQ])/),f=[],g=[];r.setAttribute("d",c),new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:a,progress:function(e){l="",p.map((function(t,i){if(f=t.split(" "),g=u[i]?u[i].split(" "):f,"Z"===f[0]?l+="Z ":l+=f[0]+" "+o.linear(e.timeStamp,+f[1],+g[1]-+f[1],e.duration)+" "+o.linear(e.timeStamp,+f[2],+g[2]-+f[2],e.duration)+" ","C"===f[0]||"Q"===f[0])for(h=3,d="Q"===f[0]?4:6;h<d;)l+=o.linear(e.timeStamp,+f[h],+g[h]-+f[h],e.duration)+" "+o.linear(e.timeStamp,+f[++h],+g[h]-+f[h],e.duration)+" ",++h;"A"===f[0]&&(l+="0 0 1 "+o.linear(e.timeStamp,+f[6],+g[6]-+f[6],e.duration)+" "+o.linear(e.timeStamp,+f[7],+g[7]-+f[7],e.duration)+" ")})),r.setAttribute("d",l)},end:function(){r.setAttribute("d",t)}})},getPreviousDirection:function(e){var t=this.getElement(e);return t?t.getAttribute("d"):null},getPreviousLocation:function(e,t){var i=this.getElement(e);return{X:i?+i.getAttribute(t+"x"):0,Y:i?+i.getAttribute(t+"y"):0}},animateRectElement:function(e,t,i,n,s){var o=this,r=function(t){e.setAttribute("x",t.x+""),e.setAttribute("y",t.y+""),e.setAttribute("width",t.width+""),e.setAttribute("height",t.height+"")};new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:i,delay:t,progress:function(e){r(new sf.svgbase.Rect(o.linear(e.timeStamp,s.x,n.x-s.x,e.duration),o.linear(e.timeStamp,s.y,n.y-s.y,e.duration),o.linear(e.timeStamp,s.width,n.width-s.width,e.duration),o.linear(e.timeStamp,s.height,n.height-s.height,e.duration)))},end:function(){r(n)}})},animateRedrawElement:function(e,t,i,n,s,o,r,a){var l=this;void 0===r&&(r="x"),void 0===a&&(a="y");var h=this.getElement(e);if(!h)return null;var d="DIV"===h.tagName,c=function(e,t){d?(h.style[r]=e+"px",h.style[a]=t+"px"):(h.setAttribute(r,e+""),h.setAttribute(a,t+""))};c(i,n),new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:t,progress:function(e){c(l.linear(e.timeStamp,i,s-i,e.duration),l.linear(e.timeStamp,n,o-n,e.duration))},end:function(){c(s,o)}})},appendChildElement:function(e,t,i,n,s,o,r,a,l,h,d,c){void 0===n&&(n=!1),void 0===s&&(s="x"),void 0===o&&(o="y"),void 0===l&&(l=!1),void 0===h&&(h=!1),void 0===d&&(d=null);var p=e.querySelector("#"+t.id)||this.getElement(t.id),u=t,f=c||300;if(i&&n&&p)if(r=r||("DIV"===p.tagName?new sf.svgbase.TooltipLocation(+p.style[s].split("px")[0],+p.style[o].split("px")[0]):new sf.svgbase.TooltipLocation(+p.getAttribute(s),+p.getAttribute(o))),""!==a&&null!==a)this.pathAnimation(t,t.getAttribute("d"),i,a,f);else if(h&&d)this.animateRectElement(u,0,f,new sf.svgbase.Rect(+p.getAttribute("x"),+p.getAttribute("y"),+p.getAttribute("width"),+p.getAttribute("height")),d);else{var g="DIV"===u.tagName?new sf.svgbase.TooltipLocation(+u.style[s].split("px")[0],+u.style[o].split("px")[0]):new sf.svgbase.TooltipLocation(+u.getAttribute(s),+u.getAttribute(o));this.animateRedrawElement(u,f,r,g,s,o)}else i&&n&&!p&&l&&this.templateAnimate(u,0,600,"FadeIn")},processAppendChild:function(e,t,i,n,s,o,r,a,l,h,d,c,p,u,f,g){void 0===h&&(h=!1),void 0===d&&(d="x"),void 0===c&&(c="y"),void 0===u&&(u=!1),void 0===f&&(f=!1);var m=this.getElement(e),v=this.getElement(t),b=new sf.svgbase.TooltipLocation(i,n),y=new sf.svgbase.Rect(s,o,r,a);this.appendChildElement(m,v,l,h,d,c,b,p,u,f,y,g)},createStyleElement:function(e,t){document.body.appendChild(sf.base.createElement("style",{id:e,innerHTML:t}))},isLassoId:function(e,t){var i=document.elementFromPoint(e,t);return i?i.id:""},doErrorBarAnimation:function(e,t,i,n){var s=this.filterCommentElement(e),o=this.getElement(t);if(!s)return null;for(var r=1;r<s.length;)s[r].style.visibility="hidden",this.templateAnimate(s[r],i,350,n?"SlideLeftIn":"SlideBottomIn",!1,o),r++},getTemplateSize:function(e){var t=this.getElement(e);return t?{width:t.offsetWidth,height:t.offsetHeight}:null},resizeBound:{},resize:{},chartResize:function(e,t){var i=this;return this.isResized=!0,this.tooltipModule&&(m.removeTooltip(100,this),m.removeCrosshair(this,100)),this.tooltipModule=null,this.crosshair=null,this.markerExploded=!1,this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var t,n,s,o=e.length,r={},a=0;a<o;a++)t=e[a].dotnetref,(n=e[a].id).indexOf("_stockChart_")<0&&document.getElementById(n+"_svg")&&((s=document.getElementById(n+"_svg")).style.display="none");for(a=0;a<o;a++)t=e[a].dotnetref,(n=e[a].id).indexOf("_stockChart_")<0&&document.getElementById(n)&&(s=document.getElementById(n),r[n]={Dotnetref:t,Width:s.clientWidth||s.offsetWidth,Height:s.clientHeight||s.offsetHeight});for(var l in r)t=r[l].Dotnetref,(s=document.getElementById(l+"_svg")).style.display="",t.invokeMethodAsync("OnChartResize",JSON.stringify({Width:r[l].Width,Height:r[l].Height}));clearTimeout(i.resize)}),500),!1},getDatalabelTemplateSize:function(e){for(var t,i=[],n=e.length,s=0;s<n;s++)t=this.getElementBoundsById(e[s],!1),i.push({X:t.width,Y:t.height});return JSON.stringify(i)},setSvgDimensions:function(e,t,i){e.setAttribute("width",t),e.setAttribute("height",i)},findDOMElement:function(e){return document.getElementById(e)},calculateSelectedElements:function(e,t){if(!sf.base.isNullOrUndefined(e.target)){var i=e.target,n=window.sfBlazor.getCompInstance(t);if(i=this.findDOMElement(this.findDOMElementFromDataLabel(i.id,n)),("None"!==n.selectionMode||"None"!==n.highlightMode&&!n.enableHighlight)&&(sf.base.isNullOrUndefined(i)||-1!==i.id.indexOf(n.element.id+"_"))&&("mousemove"!==e.type&&"pointermove"!==e.type||(null===i&&i.id.indexOf("Trackball")>-1&&(i=this.findDOMElement(i.id.split("_Trackball")[0])),!i.hasAttribute("class")||!(i.getAttribute("class").indexOf("highlight")>-1||i.getAttribute("class").indexOf("selection")>-1)))&&(this.isAlreadySelected(e,n),!sf.base.isNullOrUndefined(i)&&i.id.indexOf("_Series_")>-1)){var s=void 0;if(i.id.indexOf("_Trackball_1")>-1)s=this.findDOMElement(i.id.split("_Trackball_")[0]+"_Symbol"),s=sf.base.isNullOrUndefined(s)?this.findDOMElement(i.id.split("_Trackball_")[0]):s;else if(i.id.indexOf("_Trackball_0")>-1||i.id.indexOf("_ErrorBarGroup_")>-1||i.id.indexOf("_ErrorBarCap_")>-1)return null;this.performSelection(this.indexFinder(i.id),n,s||i)}}},generateStyle:function(e,t){var i,n=sf.base.isNullOrUndefined(this.findDOMElement(e))?null:this.findDOMElement(e).getAttribute("data-point");if(sf.base.isNullOrUndefined(this.findDOMElement(e))||(e.indexOf("SeriesGroup")>-1||e.indexOf("SymbolGroup")>-1)&&(n=(i=document.getElementById(e).querySelectorAll("path,ellipse")).length>0?i[0].getAttribute("data-point"):null),!n)return"undefined";var s=n.split(",");return s[3]?(t.styleId.indexOf("selection")>1&&"None"!==t.selectionMode&&(t.unSelected=s[7]||t.unSelected),t.styleId.indexOf("highlight")>0&&("None"!==t.highlightMode||t.enableHighlight)&&(t.unSelected=s[5]||t.unSelected),s[6]||t.styleId+"_series"+s[4]):"undefined"},findDOMElementFromDataLabel:function(e,t){if(e.indexOf("Text")>-1&&e.indexOf("Series")>-1){var i=e.split("_Text_")[0];return this.isRectSeries(t.seriesTypes[e.split("_Series_")[1].split("_")[0]])||"Bubble"===t.seriesTypes[0]||"Scatter"===t.seriesTypes[0]?i:i.slice(0,i.length)+"_Symbol "}return e},indexFinder:function(e){var t=["NaN","NaN"];return e.indexOf("_Point_")>-1?(t=e.split("_Series_")[1].split("_Point_"))[1].indexOf("Text")>-1&&(t[1]=t[1].split("_Text_")[0]):e.indexOf("_shape_")>-1&&!e.indexOf("_legend_")?(t=e.split("_shape_"))[0]=t[1]:e.indexOf("_text_")>-1&&!e.indexOf("_legend_")?(t=e.split("_text_"),e.indexOf("datalabel")>-1?t[0]=t[0].split("_Series_")[1]:t[0]=t[1]):e.indexOf("Series")>-1&&!(e.indexOf("points")>-1)&&(t[0]=e.split("_Series_")[1].split("_")[0]),new n(parseInt(t[0],10),parseInt(t[1],10))},addOrRemoveIndex:function(e,t,i,n){for(var s=0;s<e.length;s++)this.toEquals(e[s],t,i.isSeriesMode,i)&&(e.splice(s,1),s--);n&&e.push(t)},toEquals:function(e,t,i,n){return(e.series===t.series||"Cluster"===n.currentMode&&!i)&&(i||e.point===t.point)},removeSvgClass:function(e,t){var i=sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.getAttribute("class"))?"":e.getAttribute("class");i.indexOf(t)>-1&&e.setAttribute("class",i.replace(t,""))},getSelectionClass:function(e,t){return this.generateStyle(e,t)},removeStyles:function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];if(null!==s){var o=s,r=s.id,a=this.findDOMElement(o.id).getAttribute("data-point"),l=a?a.split(","):[];if(o.id.indexOf("_chart_legend_shape_")>-1&&(r=t.element.id+"SeriesGroup"+t.currentSeriesIndex),this.removeSvgClass(s,this.getSelectionClass(r,t)),"None"===t.highlightPattern&&""!==t.highlightColor&&!sf.base.isNullOrUndefined(t.highlightColor))if(s.id.indexOf("Group")>0)for(var h=0;h<s.children.length;h++)s.children[h].setAttribute("fill",l[2]);else s.setAttribute("fill",l[2])}}},findTrackballElements:function(e,t,i){var n,s;t=t.trim();for(var o=0;o<e.length;o++)if(!sf.base.isNullOrUndefined(e[o])&&(n=sf.base.isNullOrUndefined(e[o].parentNode)?[]:[].slice.call(e[0].parentNode.querySelectorAll("."+t))).length>0){s=[];for(var r=0;r<n.length;r++)n[r].id.indexOf("Trackball")>-1&&s.push(n[r]);this.removeStyles(s,i)}},blurEffect:function(e,t,i){void 0===i&&(i=!1);for(var n=this.checkVisibility(t.highlightDataIndexes,t)||this.checkVisibility(t.selectedDataIndexes,t),s=document.getElementById(t.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),o=0;o<s.length;o++){var r=parseInt(s[o].id.split("SeriesGroup")[1]);this.checkSelectionElements(this.findDOMElement(t.element.id+"SeriesGroup"+r),this.generateStyle(t.element.id+"SeriesGroup"+r,t),n,i,r,t),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SymbolGroup"+r))||this.checkSelectionElements(this.findDOMElement(t.element.id+"SymbolGroup"+r),this.generateStyle(t.element.id+"SymbolGroup"+r,t),n,i,r,t)}},checkVisibility:function(e,t){if(!e)return!1;for(var i=!1,n=[],s=0,o=e;s<o.length;s++){var r=o[s];-1===n.indexOf(r.series)&&n.push(r.series)}for(var a=0,l=n;a<l.length;a++){r=l[a];if(document.getElementById(t.element.id+"SeriesGroup"+r)){i=!0;break}}return i},findElements:function(e,t,i,n,s){return void 0===n&&(n=""),e.isSeriesMode?this.getSeriesElements(i.series.toString(),e):"Cluster"===e.currentMode?this.getClusterElements(e,i):this.findDOMElementByIndex(e,i,n,s)},removeMultiSelectElements:function(e,t,i){this.getSeriesElements(i.series.toString(),e);for(var n,s=0;s<t.length;s++)n=e.seriesTypes[t[s].series],(e.isSeriesMode&&!this.toEquals(t[s],i,e.isSeriesMode,e)||"Cluster"===e.currentMode&&!this.toEquals(t[s],i,!1,e)||!e.isSeriesMode&&this.toEquals(t[s],i,!0,e)&&!this.toEquals(t[s],i,!1,e))&&(this.removeStyles(this.findElements(e,n,t[s],"",!1),e),e.element.id+"SymbolGroup"+t[s].series&&this.removeStyles(this.findElements(e,n,t[s],"",!0),e),t.splice(s,1),s--)},checkSelectionElements:function(e,t,i,n,s,o,r){var a,l,h,d=[];t=t.trim(),e.id.indexOf("Series")>-1&&(this.pointIdRequired(o.seriesTypes[s])?(d=o.isSeriesMode?[e]:e.querySelectorAll("[id*='_Series']"),"Histogram"===o.seriesTypes[s]&&d.push(this.findDOMElement(o.element.id+"_Series_"+s+"_NDLine")),"Waterfall"===o.seriesTypes[s]&&d.push(this.findDOMElement(o.element.id+"_Series_"+s+"_Connector")),"BoxAndWhisker"===o.seriesTypes[s]&&(d=this.findDOMElement(o.element.id+"SymbolGroup"+s).querySelectorAll("path,ellipse"))):d=o.isSeriesMode?[e]:e.querySelectorAll("[id*='_Series']")),("None"!==o.selectionMode||"None"!==o.highlightMode||o.enableHighlight)&&(d=e.querySelectorAll("[id*='_Series']"));for(var c=e,p=this.isRectSeries(o.seriesTypes[s])?null:this.findDOMElement(o.element.id+"_Series_"+s),u=0;u<d.length;u++)a=d[u].getAttribute("class")||"",l=sf.base.isNullOrUndefined(p)?"":p.getAttribute("class"),("None"!==o.selectionMode||"None"!==o.highlightMode||o.enableHighlight)&&(t=!sf.base.isNullOrUndefined(a)&&(a.indexOf("selection")>0||a.indexOf("highlight")>0)?a:t,t=!sf.base.isNullOrUndefined(a)&&(l.indexOf("selection")>0||l.indexOf("highlight")>0)?l:t),sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(l)||-1!==a.indexOf(t)||-1!==l.indexOf(t)||!i?(c=d[u],this.removeSvgClass(d[u],o.unSelected),this.removeSvgClass(p,o.unSelected)):this.addSvgClass(d[u],o.unSelected),d[u].id.indexOf("Trackball")>0&&c.classList[0]===t&&(this.removeSvgClass(d[u],o.unSelected),this.removeSvgClass(p,o.unSelected),this.addSvgClass(d[u],t));if(e.id.indexOf("Symbol")>-1&&e.querySelectorAll("."+t)[0]&&e.querySelectorAll("."+t)[0].getAttribute("class")===t){var f=this.findDOMElement(e.id+"_Series_"+e.id[e.id.length-1]);(f&&f.hasAttribute("class")?f.getAttribute("class"):"").indexOf(o.unSelected)>-1&&this.removeSvgClass(f,o.unSelected)}var g,m=this.findDOMElement(e.id).getAttribute("data-point");if((e.id.indexOf("SeriesGroup")>-1||e.id.indexOf("SymbolGroup")>-1)&&(m=(g=document.getElementById(e.id).querySelectorAll("path,ellipse")).length>0?g[0].getAttribute("data-point"):null),m){var v=m.split(",");(h=this.findDOMElement(o.id+"_chart_legend_shape_"+s))&&(h.hasAttribute("class")&&(this.removeSvgClass(h,h.getAttribute("class")),sf.base.isNullOrUndefined(o.highlightColor&&""!==o.highlightColor)||(h.setAttribute("stroke",v[2]),"None"===o.highlightPattern&&h.setAttribute("fill",v[2]))),a=c.getAttribute("class")||"",l=c.parentNode.getAttribute("class")||"",-1===a.indexOf(t)&&-1===l.indexOf(t)&&i?(this.addSvgClass(h,o.unSelected),this.removeSvgClass(h,t),""===o.highlightColor||sf.base.isNullOrUndefined(o.highlightColor)||(h.setAttribute("stroke",v[2]),"None"===o.highlightPattern&&h.setAttribute("fill",v[2]))):(this.removeSvgClass(h,o.unSelected),sf.base.isNullOrUndefined(o.highlightColor)||""===o.highlightColor||(h.setAttribute("stroke",v[2]),"None"===o.highlightPattern&&h.setAttribute("fill",v[2])),"e-chart-focused"==a.trim()&&(a=""),""===a&&""===l||"EJ2-Trackball"===a.trim()?this.removeSvgClass(h,t):(this.addSvgClass(h,t),t.indexOf("highlight")>0&&""!==o.highlightColor&&!sf.base.isNullOrUndefined(o.highlightColor)&&(h.setAttribute("stroke",o.highlightColor),o.styleId.indexOf("highlight")>0&&"None"===o.highlightPattern&&h.setAttribute("fill",o.highlightColor)))),n&&l.indexOf(t)>-1&&this.addSvgClass(h,t))}},addSvgClass:function(e,t){var i=e.getAttribute("class")||"";-1===(i+=""!==i?" ":"").indexOf(t)&&e.setAttribute("class",i+t)},isRectSeries:function(e){return"Column"===e||"StackingColumn"===e||"StackingColumn100"===e||"Bar"===e||"StackingBar"===e||"StackingBar100"===e||"RangeColumn"===e||"Histogram"===e||"BoxAndWhisker"===e||"Waterfall"===e||"Pareto"===e||"RangeArea"===e||"SplineRangeArea"===e||"RangeStepArea"===e||"Hilo"===e||"HiloOpenClose"===e||"Candle"===e},pointIdRequired:function(e){return!(!this.isRectSeries(e)&&"Bubble"!==e&&"Scatter"!==e)},getSeriesElements:function(e,t){var i,n=[],s=!sf.base.isNullOrUndefined(document.getElementById(t.element.id+"SymbolGroup"+e))&&"Scatter"!==t.seriesTypes[e]&&"Bubble"!==t.seriesTypes[e]&&!this.isRectSeries(t.seriesTypes[e]);if(s?(i=this.findDOMElement(t.element.id+"SymbolGroup"+e).querySelectorAll("#"+t.element.id+"SymbolGroup"+e+" path"),n=this.addSeriesElements(n,i),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SymbolGroup"+e).querySelectorAll("#"+t.element.id+"SymbolGroup"+e+" ellipse"))||(i=this.findDOMElement(t.element.id+"SymbolGroup"+e).querySelectorAll("#"+t.element.id+"SymbolGroup"+e+" ellipse"),n=this.addSeriesElements(n,i))):sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),n=this.addSeriesElements(n,i),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"),n=this.addSeriesElements(n,i))),(t.seriesTypes[e].indexOf("Area")>-1||t.seriesTypes[e].toLowerCase().indexOf("line")>-1)&&(s?(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),n.push.apply(n,this.addSeriesElements(n,i))):sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),n=this.addSeriesElements(n,i))),"Histogram"===t.seriesTypes[e]){var o=this.findDOMElement(t.element.id+"_Series_"+e+"_NDLine");n.push(o)}return"Polar"!==t.seriesTypes[e]&&"Radar"!==t.seriesTypes[e]||"Scatter"!==t.drawType[e]||sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),n=this.addSeriesElements(n,i),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"),n=this.addSeriesElements(n,i))),n},addSeriesElements:function(e,t){for(var i=0;i<t.length;i++){var n=document.getElementById(t[i].id);null!=n&&e.push(n),e=e.filter((function(e,t,i){return t===i.indexOf(e)}))}return e},findDOMElementByIndex:function(e,t,i,n){void 0===i&&(i="");var s=e.element.id+"_Series_"+t.series+"_Point_"+t.point,o=e.seriesTypes[t.series];return s=!this.isRectSeries(o)&&"Scatter"!==o&&"Bubble"!==o&&n?s+"_Symbol"+i:s,"BoxAndWhisker"===o&&(s+="_BoxPath"),[this.findDOMElement(s),"RangeArea"!==o&&"SplineRangeArea"!==o||!n?null:this.findDOMElement(s+"1")]},applyStyles:function(e,t){for(var i=0,n=e;i<n.length;i++){var s=n[i];if(s&&(this.removeSvgClass(s,t.unSelected),this.addSvgClass(s,this.getSelectionClass(s.id,t)),t.styleId.indexOf("highlight")>0&&""!==t.highlightColor&&!sf.base.isNullOrUndefined(t.highlightColor)&&"None"===t.highlightPattern))if(s.id.indexOf("Group")>0)for(var o=0;o<s.children.length;o++)s.children[o].setAttribute("fill",t.highlightColor);else s.setAttribute("fill",t.highlightColor)}},getClusterElements:function(e,t){for(var i,s,o,r,a=[],l=document.getElementById(e.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),h=(document.getElementById(e.element.id+"SeriesCollection").querySelectorAll("[id*='SymbolGroup']"),0);h<l.length;h++){o=l[h].querySelectorAll("#"+l[h].id+" path"),r=Array.prototype.slice.call(o);for(var d=0;d<r.length;d++){var c=r[d].getAttribute("data-point").split(",");t=new n(+c[4],t.point),this.isRectSeries(c[3])&&a.push(this.findDOMElementByIndex(e,t)[0]),a.push(this.findDOMElementByIndex(e,t,"","True"===c[9])[0]),i=this.generateStyle(r[d].id,e),s=document.querySelectorAll("."+i),this.findTrackballElements(s,i);var p="True"===c[9]&&this.isRectSeries(c[3])?2:1;!e.allowMultiSelection&&s.length>0&&s[0].id!==a[a.length-p].id&&this.removeSelection(e,t.series,s,i,!0)}}return a},clusterSelection:function(e,t){this.selection(e,t,this.getClusterElements(e,new n(t.series,t.point)))},removeSelection:function(e,t,i,s,o){var r,a=document.getElementById(e.element.id+"SeriesGroup"+t).querySelectorAll("#"+e.element.id+"SeriesGroup"+t+" path");Array.prototype.slice.call(a);if(i.length>0){for(var l=[],h=0;h<i.length;h++)l.push(i[h]);this.removeStyles(l,e),e.isSeriesMode=!0,this.addOrRemoveIndex(e.selectedDataIndexes,new n(t,NaN),e);for(var d=0;d<i.length;d++)if(r=i[d].id,s=this.generateStyle(r,e),document.querySelectorAll("."+s).length>0){for(var c=0,p=l;c<p.length;c++){var u=p[c];this.checkSelectionElements(u,s,!0,!0,t,e)}o=!1;break}o&&(e.isSeriesMode="Series"===e.selectionMode,this.blurEffect(r,e))}},isAlreadySelected:function(e,t){var i=e.target;if("click"===e.type?(t.currentMode=t.selectionMode,t.styleId=t.element.id+"_ej2_chart_selection"):"mousemove"!==e.type&&"pointermove"!==e.type||(t.currentMode=t.highlightMode,t.highlightDataIndexes=[],t.styleId=t.element.id+"_ej2_chart_highlight"),("None"!==t.highlightMode||t.enableHighlight)&&"None"===t.selectionMode&&"click"===e.type)return!1;if(("None"!==t.highlightMode||t.enableHighlight)&&0!==t.previousSelectedEle.length&&null!==t.previousSelectedEle[0]){t.previousSelectedEle.filter((function(e){return null!==e}));var n=i.parentNode.id,s=void 0;i.parentNode&&(s=n.indexOf("Point")>0||n.indexOf("Symbol")>0);for(var o=0;o<t.previousSelectedEle.length;o++)if(t.previousSelectedEle[o].hasAttribute("class"))if(t.previousSelectedEle[o].getAttribute("class").indexOf("highlight")>-1&&(s||"click"===e.type)){if(t.previousSelectedEle[o].removeAttribute("class"),""!==t.highlightColor&&!sf.base.isNullOrUndefined(t.highlightColor)&&"None"===t.highlightPattern)if(t.previousSelectedEle[o].id.indexOf("Group")>0)for(var r=0;r<t.previousSelectedEle[o].children.length;r++){var a=t.previousSelectedEle[o].children[r];a.setAttribute("fill",a.getAttribute("data-point").split(",")[2])}else t.previousSelectedEle[o].setAttribute("fill",t.previousSelectedEle[o].getAttribute("data-point").split(",")[2]);this.addOrRemoveIndex(t.highlightDataIndexes,this.indexFinder(t.previousSelectedEle[o].id),t)}else!s&&t.previousSelectedEle[o].getAttribute("class").indexOf("highlight")>-1&&this.performSelection(this.indexFinder(t.previousSelectedEle[o].id),t,t.previousSelectedEle[o])}return!0},performSelection:function(e,t,i){if(t.isSeriesMode="Series"===t.currentMode,"BoxAndWhisker"===t.seriesTypes[e.series]&&i&&i.id===t.element.id+"_Series_"+e.series+"_Point_"+e.point+"_BoxPath"&&(i=i.parentNode),"Area"===t.seriesTypes[e.series]&&("Point"===t.currentMode||"Cluster"===t.currentMode)&&i&&i.id===t.element.id+"_Series_"+e.series){var n=this.generateStyle(i.id,t),s=document.querySelectorAll("."+n);sf.base.isNullOrUndefined(s)||(this.findTrackballElements(s,n),this.blurEffect(i.id,t,"True"===i.getAttribute("data-point").split(",")[8]))}switch(t.currentMode){case"Series":this.selection(t,e,this.getSeriesElements(e.series.toString(),t)),this.selectionComplete(t,e,t.selectionMode),this.blurEffect(i.id,t);break;case"Point":if(!isNaN(e.point)&&i){var o=[];o.push(i),this.selection(t,e,o),this.selectionComplete(t,e,t.selectionMode),this.blurEffect(i.id,t)}break;case"Cluster":isNaN(e.point)||(this.clusterSelection(t,e),this.selectionComplete(t,e,t.selectionMode),this.blurEffect(i.id,t))}},selection:function(e,t,i){if(i=i.filter((function(e){return null!==e})),"Lasso"!==e.currentMode&&(e.allowMultiSelection||-1!==e.currentMode.indexOf("Drag")||-1!==e.styleId.indexOf("highlight")||"None"===e.selectionMode||this.removeMultiSelectElements(e,e.selectedDataIndexes,t,i)),!sf.base.isNullOrUndefined(i[0])){this.isRectSeries(e.seriesTypes[t.series])&&"Histogram"!==e.seriesTypes[t.series]&&i[0].id&&(document.getElementById(i[0].id+"_Symbol")?i.push(this.findDOMElement(i[0].id+"_Symbol")):-1!==i[0].id.indexOf("SeriesGroup")&&document.getElementById(i[0].id.replace("SeriesGroup","SymbolGroup"))&&i.push(this.findDOMElement(i[0].id.replace("SeriesGroup","SymbolGroup"))));var n=void 0,s=i[0]&&(i[0].getAttribute("class")||""),o=i[0].parentNode&&(i[0].parentNode.getAttribute("class")||"");""!==s&&"Cluster"!==e.currentMode&&this.findTrackballElements(i,s),i[0]&&s.indexOf(this.getSelectionClass(i[0].id,e))>-1?this.removeStyles(i,e):i[0].parentNode&&o.indexOf(this.getSelectionClass(i[0].id,e))>-1?this.removeStyles([i[0].parentNode],e):(e.previousSelectedEle="None"!==e.highlightMode||e.enableHighlight?i:[],this.applyStyles(i,e),n=!0),e.styleId.indexOf("highlight")>0&&("None"!==e.highlightMode||e.enableHighlight)?this.addOrRemoveIndex(e.highlightDataIndexes,t,e,n):this.addOrRemoveIndex(e.selectedDataIndexes,t,e,n)}},resetPreviousHighlightIndex:function(e){e.previousHighlightedIndex=-1},isTargetChanged:function(e,t){var i=!1,n=!1;return-1==t.previousHighlightedIndex&&(i=!0),t.previousHighlightedIndex==e&&(n=!0),t.previousHighlightedIndex=e,!n||i},legendSelection:function(e,t){var i,s,o,r=e.target.id,a=window.sfBlazor.getCompInstance(t),l=[this.id+"_chart_legend_text_",this.id+"_chart_legend_shape_marker_",this.id+"_chart_legend_shape_",this.id+"_chart_legend_g_"],h="None";if(-1!=r.indexOf("legend")&&!a.isTouch){for(var d=0;d<l.length;d++)if(!r.indexOf(l[d])){s=parseInt(r.split(l[d])[1]);break}if(a.currentSeriesIndex=s,o=r.indexOf("text")<=0?m.findDOMElement(r):null,"mousemove"===e.type){if(r.indexOf("text")&&(o=m.findDOMElement(r.replace("text","shape"))),o.hasAttribute("class")&&!a.enableHighlight&&a.styleId.indexOf("highlight")>0&&("None"!==a.highlightMode||a.enableHighlight)&&a.styleId.indexOf("selection")>1&&"None"!==a.selectionMode)return;"None"==(h=a.highlightMode)&&a.enableHighlight&&(h="Series")}if(this.isAlreadySelected(e,a)&&!sf.base.isNullOrUndefined(this.findDOMElement(a.element.id+"SeriesGroup"+s)))if(this.seriesStyle=this.generateStyle(a.element.id+"SeriesGroup"+s,a),i=document.querySelectorAll("."+this.seriesStyle),this.isSeriesMode="Series"==h,this.isBlurEffectNeeded=!0,i.length>0)this.removeSelection(a,s,i,this.seriesStyle,this.isBlurEffectNeeded);else{for(var c=document.getElementById(a.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),p=0;p<c.length;p++)a.allowMultiSelection||p==s||(this.seriesStyle=this.generateStyle(c[p].id,a),i=document.querySelectorAll("."+this.seriesStyle),this.removeSelection(a,s,i,this.seriesStyle,this.isBlurEffectNeeded));var u=this.getSeriesElements(s.toString(),a);for(d=0;d<u.length;d++)this.checkSelectionElements(u[d],this.seriesStyle,!1,!0,s,a,u);a.isSeriesMode=!0;var f=new n(s,0);this.selection(a,f,u),this.isSeriesMode="Series"==this.selectionMode,this.blurEffect(a.element.id,a,!0)}}},selectionComplete:function(e,t,i){var n,s,o,r,a,l,h,d,c,p,u=[],f=this.getSeriesElements(t.series.toString(),e);if("Cluster"===i){for(var g=0;g<f.length;g++)if(c=this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[3],p=this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[11],o=+this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[10],"visible"===this.findDOMElement(f[g].id).getAttribute("visibility"))for(var m=0;m<e.selectedDataIndexes.length;m++)r=e.allowMultiSelection?e.selectedDataIndexes[m].point:t.point,a=+this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[4],n=+this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[0],s=+this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[1],isNaN(r)||(h=s,d=n),"Category"===e.primaryXAxis?d=n.toLocaleString():"DateTime"===e.primaryXAxis&&(d=new Date(n)),"Indicator"!==p&&u.push({x:d,y:h,seriesIndex:a,pointIndex:r}),"RangeArea"!==c&&"SplineRangeArea"!==c||u.push({x:d,y:o,seriesIndex:a,pointIndex:r})}else if("Series"===i)if(e.allowMultiSelection)for(g=0;g<e.selectedDataIndexes.length;g++)a=e.selectedDataIndexes[g].series,u.push({seriesIndex:a});else a=e.selectedDataIndexes.length>0?e.selectedDataIndexes[0].series:0,u.push({seriesIndex:a});else if("Point"===i)for(g=0;g<e.selectedDataIndexes.length;g++)r=e.selectedDataIndexes[g].point,a=e.selectedDataIndexes[g].series,l=e.element.id+"_Series_"+a+"_Point_"+r,n=+this.findDOMElement(l).getAttribute("data-point").split(",")[0],s=+this.findDOMElement(l).getAttribute("data-point").split(",")[1],o=+this.findDOMElement(l).getAttribute("data-point").split(",")[10],isNaN(r)||(d=n,h=s,"Category"===e.primaryXAxis?d=n.toLocaleString():"DateTime"===e.primaryXAxis&&(d=new Date(n)),u.push({x:d,y:h,seriesIndex:a,pointIndex:r}));e.dotnetref.invokeMethodAsync("OnSelectionChange",u)},addTouchPointer:function(e,t,i){if(i.length>0)e=i;else if(0==(e=e.length>0?e:[]).length)e.push({pageX:t.mouseX,pageY:t.mouseY,pointerId:t.pointerId});else for(var n=0;n<e.length;n++)e[n].pointerId==t.pointerId?e[n]={pageX:t.mouseX,pageY:t.mouseY,pointerId:t.pointerId}:e.push({pageX:t.mouseX,pageY:t.mouseY,pointerId:t.pointerId});return e},onZoomingMouseMove:function(e,t){var i=[];"touchmove"===e.type&&(i=e.touches),t.zoomBase.isChartDrag&&(t.zoomBase.zoomSettings.isOnZoomStartCalled&&(t.dotnetref.invokeMethodAsync("TriggerZoomingEvents","OnZoomStart",!t.zoomBase.zoomingModule.isZoomStart),t.zoomBase.zoomingModule.isZoomStart=!1),t.isTouch&&(t.zoomBase.zoomingModule.touchMoveList=this.addTouchPointer(t.zoomBase.zoomingModule.touchMoveList,e,i),t.zoomBase.zoomSettings.enablePinchZooming&&t.zoomBase.zoomingModule.touchMoveList.length>1&&t.zoomBase.zoomingModule.touchStartList.length>1&&this.performPinchZooming(t)),this.renderZooming(e,t,t.isTouch))},onZoomingMouseEnd:function(e,t){t.zoomBase.isChartDrag=!1;var i=!(e.target.indexOf(t.element.id+"_ZoomOut")>-1)||e.target.indexOf(t.element.id+"_ZoomIn")>-1;(t.zoomBase.isChartDrag||i)&&(this.clearSelectionRect(t.element.id+"_ZoomArea"),this.performZoomRedraw(t),t.zoomBase.zoomSettings.isOnZoomEndCalled&&!t.zoomToolkitBase.isReset&&t.zoomBase.zoomingModule.zoomAxes.length>0&&t.dotnetref.invokeMethodAsync("TriggerZoomingEvents","OnZoomEnd",!1),t.zoomBase.zoomingModule.isZoomStart=!0),t.isTouch&&(t.zoomBase.isDoubleTap&&sf.svgbase.withInAreaBounds(t.mouseX,t.mouseY,t.userInteractionBase.axisClipRect)&&1==t.zoomBase.zoomingModule.touchStartList.length&&t.zoomBase.zoomingModule.isZoomed&&(this.zoomToolkitReset(t),t.zoomBase.zoomingModule.isZoomStart=!0),t.zoomBase.zoomingModule.touchStartList=[],t.zoomBase.isDoubleTap=!1),t.zoomToolkitBase.isReset=!1,t.zoomBase.zoomingModule.zoomAxes=[]},onZoomingMouseDown:function(e,t){var i=sf.base.Browser.isDevice?20:30;t.zoomBase.mouseDownX=t.zoomBase.previousMouseMoveX=e.mouseX,t.zoomBase.mouseDownY=t.zoomBase.previousMouseMoveY=e.mouseY,t.isTouch&&(t.zoomBase.isDoubleTap=(new Date).getTime()<t.zoomBase.threshold&&!(e.target.indexOf(t.element.id+"_Zooming")>-1)&&(t.zoomBase.mouseDownX-i>=t.mouseX||t.zoomBase.mouseDownX+i>=t.mouseX)&&(t.zoomBase.mouseDownY-i>=t.mouseY||t.zoomBase.mouseDownY+i>=t.mouseY)&&(t.mouseX-i>=t.zoomBase.mouseDownX||t.mouseX+i>=t.zoomBase.mouseDownX)&&(t.mouseY-i>=t.zoomBase.mouseDownY||t.mouseY+i>=t.zoomBase.mouseDownY)),this.zoomingMouseDownHandler(e,t)},zoomingMouseDownHandler:function(e,t){e.target.indexOf(t.element.id+"_Zooming")>-1||e.target.indexOf(t.element.id+"_scrollBar")>-1||!sf.svgbase.withInAreaBounds(t.zoomBase.previousMouseMoveX,t.zoomBase.previousMouseMoveY,t.userInteractionBase.axisClipRect)||(t.zoomBase.isChartDrag=!0),t.isTouch&&(t.zoomBase.zoomingModule.touchStartList=this.addTouchPointer(t.zoomBase.zoomingModule.touchStartList,e,e.touches))},zoomingMouseWheelHandler:function(e,t){var i=e.target;t.zoomBase.zoomSettings&&t.zoomBase.zoomSettings.enableMouseWheelZooming&&sf.svgbase.withInAreaBounds(t.mouseX,t.mouseY,t.userInteractionBase.axisClipRect)&&!(i.id.indexOf("scrollbar")>-1)&&this.performMouseWheelZooming(e,t.mouseX,t.mouseY,t,t.userInteractionBase.axes),this.isMouseWheelScroll(i.id)&&(t.scrollbarBase.isScrollWheel=!t.scrollbarBase.isScrollWheel||t.scrollbarBase.isScrollWheel,this.performMouseWheelScrolling(e,t.mouseX,t.mouseY,t,t.userInteractionBase.axes))},renderZooming:function(e,t,i){this.calculateZoomAxesRange(t),!t.zoomBase.zoomSettings.enableSelectionZooming||t.zoomBase.zoomSettings.enablePan||i&&(!t.zoomBase.isDoubleTap||1!=t.zoomBase.zoomingModule.touchStartList.length)||t.zoomBase.zoomingModule.isPanning&&!t.zoomBase.isDoubleTap?t.zoomBase.zoomingModule.isPanning&&t.zoomBase.isChartDrag&&(!i||i&&1==t.zoomBase.zoomingModule.touchStartList.length)&&(t.zoomBase.zoomingModule.pinchTarget=i?e.target:null,this.doPan(t,t.zoomBase.axisCollections)):(t.zoomBase.zoomingModule.isPanning=!!t.zoomBase.zoomingModule.isDevice||t.zoomBase.zoomingModule.isPanning,t.zoomBase.zoomingModule.performedUI=!0,this.drawZoomingRectangle(t))},calculateZoomAxesRange:function(e){for(var t,i,n=0;n<e.zoomBase.axisCollections.length;n++){var s=e.zoomBase.axisCollections[n];i=s.visibleRange,e.zoomBase.zoomingModule.zoomAxes.length>n&&e.zoomBase.zoomingModule.zoomAxes[n]&&!e.zoomBase.delayRedraw?(e.zoomBase.zoomingModule.zoomAxes[n].min=i.start,e.zoomBase.zoomingModule.zoomAxes[n].delta=i.delta):(t={actualMin:s.actualRange.start,actualDelta:s.actualRange.delta,min:i.start,delta:i.delta},e.zoomBase.zoomingModule.zoomAxes[n]=t)}},drawZoomingRectangle:function(e){var t=e.userInteractionBase.axisClipRect,i=new s(e.zoomBase.previousMouseMoveX,e.zoomBase.previousMouseMoveY),n=new s(e.mouseX,e.mouseY),o=this.getElement(e.element.id+"_svg"),r=e.zoomBase.zoomingModule.zoomingRect=this.getRectLocation(i,n,t);if(r.width>0&&r.height>0){e.zoomBase.zoomingModule.isZoomed=!0,e.userInteractionBase.disableTrackTooltip=!0,this.setAttribute(e.userInteractionBase.isStockChart?e.element.id:o.id,"cursor","crosshair"),"X"==e.zoomBase.zoomingModule.zooming.mode?(r.height=t.height,r.y=t.y):"Y"==e.zoomBase.zoomingModule.zooming.mode&&(r.width=t.width,r.x=t.x);var a=this.getElement(e.element.id+e.zoomBase.zoomToolkitId);if(a&&(a.style.visibility="hidden"),o)o.appendChild(e.userInteractionBase.svgRenderer.drawRectangle(new c(e.element.id+"_ZoomArea",e.zoomBase.zoomingModule.zooming.themeStyleSelectionRectFill,{color:e.zoomBase.zoomingModule.zooming.themeStyleSelectionRectStroke,width:1},1,r,0,0,"","3")));else document.getElementById(e.element.id).appendChild(e.userInteractionBase.svgRenderer.drawRectangle(new c(e.element.id+"_ZoomArea",e.zoomBase.zoomingModule.zooming.themeStyleSelectionRectFill,{color:e.zoomBase.zoomingModule.zooming.themeStyleSelectionRectStroke,width:1},1,r,0,0,"","3")))}},getRectLocation:function(e,t,i){var n=t.x<i.x?i.x:t.x>i.x+i.width?i.x+i.width:t.x,s=t.y<i.y?i.y:t.y>i.y+i.height?i.y+i.height:t.y;return new sf.svgbase.Rect(n>e.x?e.x:n,s>e.y?e.y:s,Math.abs(n-e.x),Math.abs(s-e.y))},getVisibleRangeModel:function(e,t){return{min:e.start,max:e.end,interval:t,delta:e.delta}},minMax:function(e,t,i){return isFinite(e)?e>i?i:e<t?t:e:0},doPan:function(e,t,i,n,s){if(void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=!1),!e.userInteractionBase.startMove||!e.crosshairBase.crosshair.enable){e.isChartPanning=!0,e.zoomBase.zoomingModule.isZoomed=!0,e.zoomBase.zoomingModule.offset=e.zoomBase.delayRedraw?e.zoomBase.zoomingModule.offset:e.userInteractionBase.axisClipRect,e.zoomBase.delayRedraw=e.userInteractionBase.disableTrackTooltip=!0;for(var o,r,a,l=[],h=[],d=[],c=[],p=0,u=t;p<u.length;p++){var f=u[p];o=f.zoomFactor,r=f.zoomPosition,a=Math.max(1/this.minMax(o,0,1),1),r="Horizontal"==f.orientation?this.minMax(f.zoomPosition+(0!=i?i:e.zoomBase.previousMouseMoveX-e.mouseX)/f.rect.w/a,0,1-f.zoomFactor):this.minMax(f.zoomPosition-(0!=n?n:e.zoomBase.previousMouseMoveY-e.mouseY)/f.rect.h/a,0,1-f.zoomFactor),f.isZoomingScrollBar&&(f.isScrollUI=!1),l.push({axisName:f.name,zoomFactor:o,zoomPosition:r,axisRange:this.getVisibleRangeModel(f.visibleRange,f.visibleInterval)})}var g={name:"OnZooming",axisCollection:l};if(e.zoomBase.zoomingEventArgs=g,!g.cancel){for(var m=function(e){t.filter((function(t){t.name==e.axisName&&(h.push(t.name),d.push(e.zoomFactor),c.push(e.zoomPosition),t.zoomFactor=e.zoomFactor,t.zoomPosition=e.zoomPosition)}))},v=0,b=l;v<b.length;v++){m(b[v])}this.performDeferredZoom(e,h,d,c,s)}}},doZoom:function(e,t,i){var n=e.zoomBase.zoomingModule.zoomingRect;e.zoomBase.zoomingModule.isPanning=e.zoomBase.zoomSettings.enablePan||e.zoomBase.zoomingModule.isPanning;for(var s,o,r=[],a=0,l=t;a<l.length;a++){var h=l[a];s=h.zoomFactor,o=h.zoomPosition,"Horizontal"==h.orientation&&"Y"!=e.zoomBase.zoomingModule.zooming.mode?(o+=Math.abs((n.x-i.x)/i.width)*h.zoomFactor,s*=n.width/i.width):"Vertical"==h.orientation&&"X"!=e.zoomBase.zoomingModule.zooming.mode&&(o+=(1-Math.abs((n.height+(n.y-i.y))/i.height))*h.zoomFactor,s*=n.height/i.height),r.push({axisName:h.name,zoomFactor:s<.001?h.zoomFactor:s,zoomPosition:s<.001?h.zoomPosition:o,axisRange:this.getVisibleRangeModel(h.visibleRange,h.visibleInterval)})}var d={name:"OnZooming",axisCollection:r};if(e.zoomBase.zoomingEventArgs=d,!d.cancel){for(var c=function(e){t.filter((function(t){t.name==e.axisName&&(t.zoomFactor=e.zoomFactor,t.zoomPosition=e.zoomPosition)}))},p=0,u=r;p<u.length;p++){c(u[p])}e.zoomBase.zoomingModule.zoomingRect=new sf.svgbase.Rect(0,0,0,0),this.performZoomRedraw(e)}},performZoomRedraw:function(e,t){if(void 0===t&&(t=!1),e.zoomBase.zoomingModule.isZoomed){if(e.zoomBase.zoomingModule.zoomingRect.width>0&&e.zoomBase.zoomingModule.zoomingRect.height>0)e.zoomBase.zoomingModule.performedUI=!0,this.doZoom(e,e.userInteractionBase.axes,e.userInteractionBase.axisClipRect),e.zoomBase.isDoubleTap=!1,this.setAttribute(e.element.id+"_svg","cursor","auto");else if(e.userInteractionBase.disableTrackTooltip){e.userInteractionBase.disableTrackTooltip=e.zoomBase.delayRedraw=!1;var i={isZoomed:e.zoomBase.zoomingModule.isZoomed,isPanning:e.zoomBase.zoomingModule.isPanning,isDoubleTap:e.zoomBase.isDoubleTap,isWheelZoom:e.zoomBase.zoomingModule.isWheelZoom,performedUI:e.zoomBase.zoomingModule.performedUI,delayRedraw:e.zoomBase.delayRedraw,isChartDrag:e.zoomBase.isChartDrag,isChartPanning:e.isChartPanning};e.dotnetref.invokeMethodAsync("ZoomingComplete",e.zoomBase.zoomingEventArgs,i),t&&this.focusTarget(e.element.id)}e.isChartPanning=!1}},clearSelectionRect:function(e){var t=document.getElementById(e);t&&(t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("width","0"),t.setAttribute("height","0"))},isMouseWheelScroll:function(e){return-1!=e.indexOf("scrollBarThumb_")||-1!=e.indexOf("scrollBarBackRect_")||-1!=e.indexOf("scrollBar_leftCircle_")||-1!=e.indexOf("scrollBar_rightCircle_")||-1!=e.indexOf("scrollBar_gripCircle_")||-1!=e.indexOf("scrollBar_leftArrow_")||-1!=e.indexOf("scrollBar_rightArrow_")||-1!=e.indexOf("scrollBar_gripCircle")},getAxisName:function(e){var t=[];return m.isExist(e,"_scrollBar_svg")?(t=e.split("_scrollBar_svg"))[t.length-1]:(t=e.split("_"))[t.length-1]},calculateDelta:function(e,t,i,n){for(var s=0;s<t.axes.length;s++)e.name==t.axes[s].name&&(t.axis=t.axes[s]);var o=t.scrollbarOptions[e.name];o.isVertical="Vertical"===e.orientation;var r=e.isAxisInverse;if(sf.base.isNullOrUndefined(o)||o&&!document.getElementById(o.svgObject.id))return null;var a=m.getScrollEventArgs(n,[i.id,i.id+"_scrollBar_svg"+e.name]);this.mouseX=a.mouseX,this.mouseY=a.mouseY,t.previousXY=o.isVertical&&r?this.mouseY:o.isVertical?o.width-this.mouseY:r?o.width-this.mouseX:this.mouseX;return this.delta=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail)),this.delta>0?t.previousXY=t.previousXY+5:t.previousXY=t.previousXY-5,o},lazyLoadScrollChanged:function(e,t,i,n){var s,o=e.isAxisInverse,r=i.isVertical&&o?i.width-this.mouseY:i.isVertical?this.mouseY:this.mouseX,a=i.zoomPosition,l=i.zoomFactor;i.isLazyLoad&&t.isScrollWheel&&8!=i.thumbRectX&&i.thumbRectX+i.thumbRectWidth+8<i.width&&0!=this.delta&&(s=m.calculateLazyRange(t,null,this.delta));var h=s?s.currentRange:null;if(t.isScrollWheel){r=i.isVertical||o?i.width-r:r;var d=i.thumbRectX+(r-t.previousXY);i.svgObject.style.cursor="default",(r>=0||r<=d+i.thumbRectWidth)&&(i.thumbRectX=m.isWithIn(d,t)?d:i.thumbRectX,m.positionThumb(i.thumbRectX,i.thumbRectWidth,t),t.previousXY=r,m.setZoomFactorPosition(t,d,i.thumbRectWidth,!1)),s&&n.dotnetref.invokeMethodAsync("TriggerScrollEvents",m.getArgs("OnScrollChanged",e.name,a,l,h))}},lazyLoadScrollEnd:function(e,t,i,n){var s;i.startX=i.thumbRectX;var o=i.startX+i.thumbRectWidth+8+1;i.isLazyLoad||(e.zoomFactor=o>=i.width-1&&i.startX-8.5<=0?1:i.zoomFactor),i.isLazyLoad&&(8!=i.thumbRectX&&i.thumbRectX+i.thumbRectWidth+8<i.width&&0!=this.delta&&(s=m.calculateLazyRange(t,null,this.delta)),s&&n.dotnetref.invokeMethodAsync("TriggerScrollEvents",m.getArgs("OnScrollEnd",e.name,e.zoomPosition,e.zoomFactor,s.currentRange)),t.isScrollWheel=!1)},performMouseWheelScrolling:function(e,t,i,n,s){n.isWheelScrolling=!0;var o=n.scrollbarBase,r=e.target.id,a=this.getAxisName(r),l=s.filter((function(e){return e.name===a}))[0],h=this.calculateDelta(l,o,n,e);this.lazyLoadScrollChanged(l,o,h,n),this.lazyLoadScrollEnd(l,o,h,n)},performMouseWheelZooming:function(e,t,i,n,s){var o="mozilla"!==n.zoomBase.zoomingModule.browser.browserName||n.zoomBase.zoomingModule.browser.isPointer?e.wheelDelta>0?1:-1:-e.detail/3>0?1:-1;n.zoomBase.zoomingModule.isZoomed=!0,this.calculateZoomAxesRange(n),n.userInteractionBase.disableTrackTooltip=!0,n.zoomBase.zoomingModule.performedUI=!0,n.zoomBase.zoomingModule.isPanning=n.zoomBase.zoomSettings.enablePan||n.zoomBase.zoomingModule.isPanning;var r,a,l,h,d=[];n.zoomBase.zoomingModule.isWheelZoom=!0;for(var c=0,p=s;c<p.length;c++){var u=p[c];l=u.zoomFactor,h=u.zoomPosition,("Vertical"==u.orientation&&"X"!=n.zoomBase.zoomingModule.zooming.mode||"Horizontal"==u.orientation&&"Y"!=n.zoomBase.zoomingModule.zooming.mode)&&(a=Math.max(Math.max(1/this.minMax(u.zoomFactor,0,1),1)+.25*o,1))>=1&&(r=(r="Horizontal"==u.orientation?t/u.rect.w:1-i/u.rect.h)>1?1:r<0?0:r,l=1==a?1:this.minMax(1/a,0,1),h=1==a?0:u.zoomPosition+(u.zoomFactor-l)*r,u.zoomPosition==h&&u.zoomFactor==l||(l=h+l>1?1-h:l)),d.push({axisName:u.name,zoomFactor:l<.001?u.zoomFactor:l,zoomPosition:l<.001?u.zoomPosition:h,axisRange:this.getVisibleRangeModel(u.visibleRange,u.visibleInterval)})}var f={name:"OnZooming",axisCollection:d};if(n.zoomBase.zoomingEventArgs=f,!f.cancel){for(var g=function(e){s.filter((function(t){t.name==e.axisName&&(t.zoomFactor=e.zoomFactor,t.zoomPosition=e.zoomPosition)}))},m=0,v=d;m<v.length;m++){g(v[m])}this.performZoomRedraw(n)}n.zoomBase.zoomingModule.isWheelZoom=!1},performPinchZooming:function(e){if(e.zoomBase.zoomingModule.zoomingRect.width>0&&e.zoomBase.zoomingModule.zoomingRect.height>0||e.userInteractionBase.startMove&&e.crosshairBase.crosshair.enable)return!1;this.calculateZoomAxesRange(e),e.zoomBase.zoomingModule.isZoomed=e.zoomBase.zoomingModule.isPanning=e.zoomBase.zoomingModule.performedUI=!0,e.zoomBase.zoomingModule.offset=e.zoomBase.delayRedraw?e.zoomBase.zoomingModule.offset:e.userInteractionBase.axisClipRect,e.zoomBase.delayRedraw=e.userInteractionBase.disableTrackTooltip=!0;var t=e.element.getBoundingClientRect(),i=e.zoomBase.zoomingModule.touchStartList,n=e.zoomBase.zoomingModule.touchMoveList,s=i[0].pageX-t.left,o=i[0].pageY-t.top,r=n[0].pageX-t.left,a=n[0].pageY-t.top,l=i[1].pageX-t.left,h=i[1].pageY-t.top,d=n[1].pageX-t.left,c=n[1].pageY-t.top,p=Math.abs(r-d)/Math.abs(s-l),u=Math.abs(a-c)/Math.abs(o-h),f=(e.zoomBase.zoomingModule.offset.x-r)/p+s,g=(e.zoomBase.zoomingModule.offset.y-a)/u+o,m=r-p*s,v=a-u*o,b=new sf.svgbase.Rect(f,g,e.zoomBase.zoomingModule.offset.width/p,e.zoomBase.zoomingModule.offset.height/u);if(!isNaN(p-p)&&!isNaN(u-u))switch(e.zoomBase.zoomSettings.mode){case"XY":this.setTransform(m,v,p,u,e,!0);break;case"X":this.setTransform(m,0,p,1,e,!0);break;case"Y":this.setTransform(0,v,1,u,e,!0)}return this.calculatePinchZoomFactor(e,b),!0},setTransform:function(e,t,i,n,s,o){var r,a=document.getElementById(s.element.id+"SeriesCollection"),l=document.getElementById(s.element.id+"IndicatorCollection");if(a&&a.setAttribute("clip-path","url(#"+s.element.id+"_ChartAreaClipRect_)"),l&&l.setAttribute("clip-path","url(#"+s.element.id+"_ChartAreaClipRect_)"),null!==e&&null!==t)for(var h=0;h<s.userInteractionBase.visibleSeries.length;h++){var d=s.userInteractionBase.visibleSeries[h],c=s.userInteractionBase.isInverted?d.y_Axis.rect.x:d.x_Axis.rect.x,p=s.userInteractionBase.isInverted?d.x_Axis.rect.y:d.y_Axis.rect.y;if(r="translate("+(e+(o?i*c:c))+","+(t+(o?n*p:p))+")",r=i||n?r+" scale("+i+" "+n+")":r,d.visible){var u=this.getElement(s.element.id+"SeriesGroup"+d.index),f=this.getElement(s.element.id+"IndicatorGroup"+d.index),g=this.getElement(s.element.id+"ErrorBarGroup"+d.index),m=this.getElement(s.element.id+"SymbolGroup"+d.index),v=this.getElement(s.element.id+"TextGroup"+d.index),b=this.getElement(s.element.id+"ShapeGroup"+d.index);"Indicator"===d.category&&f?f.setAttribute("transform",r):u&&u.setAttribute("transform",r);var y=this.getElement(s.element.id+"_Series_"+d.index+"_DataLabelCollections");g&&g.setAttribute("transform",r),m&&m.setAttribute("transform",r),v&&(v.setAttribute("visibility","hidden"),b.setAttribute("visibility","hidden")),y&&(y.style.visibility="hidden")}}},performDeferredZoom:function(e,t,i,n,s){var o,r;if(void 0===s&&(s=!1),e.zoomBase.zoomSettings.enableDeferredZooming){switch(o=e.mouseX-e.zoomBase.mouseDownX,r=e.mouseY-e.zoomBase.mouseDownY,e.zoomBase.zoomSettings.mode){case"X":r=0;break;case"Y":o=0}this.setTransform(o,r,0,0,e,!1)}else e.dotnetref.invokeMethodAsync("ChartPan",t,i,n);e.zoomBase.previousMouseMoveX=e.mouseX,e.zoomBase.previousMouseMoveY=e.mouseY},calculatePinchZoomFactor:function(e,t){for(var i,n,s,o,r,a,l=e.zoomBase.zoomingModule.zooming.mode,h=[],d=0;d<e.userInteractionBase.axes.length;d++){var c=e.userInteractionBase.axes[d];if(r=c.zoomFactor,a=c.zoomPosition,"Horizontal"===c.orientation&&"Y"!==l||"Vertical"===c.orientation&&"X"!==l){"Horizontal"===c.orientation?(i=(s=t.x-e.zoomBase.zoomingModule.offset.x)/(o=c.rect.w/e.zoomBase.zoomingModule.zoomAxes[d].delta)+e.zoomBase.zoomingModule.zoomAxes[d].min,n=(s=t.x+t.width-e.zoomBase.zoomingModule.offset.x)/o+e.zoomBase.zoomingModule.zoomAxes[d].min):(s=t.y-e.zoomBase.zoomingModule.offset.y,o=c.rect.h/e.zoomBase.zoomingModule.zoomAxes[d].delta,i=(-1*s+c.rect.h)/o+e.zoomBase.zoomingModule.zoomAxes[d].min,n=(-1*(s=t.y+t.height-e.zoomBase.zoomingModule.offset.y)+c.rect.h)/o+e.zoomBase.zoomingModule.zoomAxes[d].min);var p=Math.min(i,n),u=Math.max(i,n),f=(p-e.zoomBase.zoomingModule.zoomAxes[d].actualMin)/e.zoomBase.zoomingModule.zoomAxes[d].delta,g=(u-p)/e.zoomBase.zoomingModule.zoomAxes[d].delta;a=f<0?0:f,r=g>1?1:g<.03?.03:g}h.push({axisName:c.name,zoomFactor:r,zoomPosition:a,axisRange:this.getVisibleRangeModel(c.visibleRange,c.visibleInterval)})}var m={name:"OnZooming",axisCollection:h};if(e.zoomBase.zoomingEventArgs=m,!m.cancel)for(var v=function(t){e.userInteractionBase.axes.filter((function(e){e.name==t.axisName&&(e.zoomFactor=t.zoomFactor,e.zoomPosition=t.zoomPosition)}))},b=0,y=h;b<y.length;b++){v(y[b])}},mouseCancelHandler:function(e){e.zoomBase.zoomingModule&&e.zoomBase.zoomingModule.isZoomed&&(this.clearSelectionRect(e.element.id+"_ZoomArea"),this.performZoomRedraw(e)),e.zoomBase.zoomingModule.pinchTarget=null,e.zoomBase.zoomingModule.touchStartList=[],e.zoomBase.zoomingModule.touchMoveList=[]},createClipRect:function(e){var t={id:e.element.id+"_ChartAreaClipRect_",x:e.userInteractionBase.axisClipRect.x,y:e.userInteractionBase.axisClipRect.y,width:e.userInteractionBase.axisClipRect.width,height:e.userInteractionBase.axisClipRect.height,fill:"transparent","stroke-width":1,stroke:"Gray"},i=e.userInteractionBase.svgRenderer.drawClipPath(t),n=this.getElement(e.element.id+"SeriesCollection");n&&n.appendChild(i)},updateClipRect:function(e,t){if(t.userInteractionBase.visibleSeries.length>0)for(var i=0;i<t.userInteractionBase.visibleSeries.length;i++){var n=t.userInteractionBase.visibleSeries[i];if(n.visible&&"Indicator"===n.category){var s=this.getElement(t.element.id+"IndicatorGroup"+n.index),o="translate("+n.clipRect.x.toString()+","+n.clipRect.y.toString()+")";s&&s.setAttribute("transform",o)}}if(e){var r=t.userInteractionBase.axisClipRect;e.setAttribute("x",r.x.toString()),e.setAttribute("y",r.y.toString()),e.setAttribute("width",r.width.toString()),e.setAttribute("height",r.height.toString())}},isAxisZoomed:function(e){for(var t=!1,i=0,n=e;i<n.length;i++){var s=n[i];1===s.zoomFactor&&0===s.zoomPosition||(t=!0)}return t},applyZoomingToolkit:function(e){this.getElement(e.element.id+e.zoomBase.zoomToolkitId)&&(this.isAxisZoomed(e.userInteractionBase.axes)?(e.zoomBase.zoomingModule.isZoomed=!0,e.zoomBase.zoomingModule.isPanning&&this.zoomToolkitPan(e)):(e.zoomBase.zoomingModule.isZoomed=e.zoomBase.zoomingModule.isPanning=!1,this.setAttribute(e.element.id+"_svg","cursor","auto")))},zoomToolkitZoom:function(e){e.zoomBase.zoomingModule.isPanning=!1;this.setAttribute(e.element.id+"_svg","cursor","auto"),this.setAttribute(e.element.id+e.zoomBase.zoomToolkitZoomIn,"opacity","1"),this.setAttribute(e.element.id+e.zoomBase.zoomToolkitZoomOut,"opacity","Always"!==e.zoomBase.zoomSettings.toolbarDisplayMode||e.zoomBase.zoomingModule.isZoomed?"1":"0.2"),this.applySelection(e.element.id+e.zoomBase.zoomToolkitZoom,e.zoomToolkitBase.selectionColor),this.applySelection(e.element.id+e.zoomBase.zoomToolkitPan,"#737373"),e.zoomToolkitBase.selectedId&&this.setAttribute(e.zoomToolkitBase.selectedId,"fill","transparent"),e.zoomToolkitBase.selectedId=e.element.id+e.zoomBase.zoomToolkitZoom+"_1",this.setAttribute(e.zoomToolkitBase.selectedId,"fill",e.zoomToolkitBase.iconRectSelectionFill)},zoomToolkitPan:function(e){if(e.zoomBase.zoomingModule.isZoomed){e.zoomBase.zoomingModule.isPanning=!("Always"==e.zoomBase.zoomSettings.toolbarDisplayMode)||e.zoomBase.zoomingModule.isZoomed,this.setAttribute(e.element.id+"_svg","cursor","pointer");this.setAttribute(e.element.id+e.zoomBase.zoomToolkitZoomIn,"opacity","Always"!=e.zoomBase.zoomSettings.toolbarDisplayMode||e.zoomBase.zoomingModule.isZoomed?"0.2":"1"),this.setAttribute(e.element.id+e.zoomBase.zoomToolkitZoomOut,"opacity","0.2"),this.applySelection(e.element.id+e.zoomBase.zoomToolkitZoom,"#737373"),this.applySelection(e.element.id+e.zoomBase.zoomToolkitPan,e.zoomToolkitBase.selectionColor),e.zoomToolkitBase.selectedId&&this.setAttribute(e.zoomToolkitBase.selectedId,"fill","transparent"),e.zoomToolkitBase.selectedId=e.element.id+e.zoomBase.zoomToolkitPan+"_1",this.setAttribute(e.zoomToolkitBase.selectedId,"fill",e.zoomToolkitBase.iconRectSelectionFill)}},zoomToolkitZoomIn:function(e,t){e.zoomBase.zoomingModule.isZoomed=!0,this.zoomInOutCalculation(1,e,t)},zoomToolkitZoomOut:function(e,t){this.zoomInOutCalculation(-1,e,t)},zoomToolkitReset:function(e){if(!e.zoomBase.zoomingModule.isDevice&&"Always"!==e.zoomBase.zoomSettings.toolbarDisplayMode){var t=this.getElement(e.element.id+e.zoomBase.zoomToolkitId);t&&(t.style.visibility="hidden")}this.zoomToolkitRemoveTooltip(e);for(var i=[],n=0,s=e.userInteractionBase.axes;n<s.length;n++){var o=s[n];o.zoomFactor=1,o.zoomPosition=0,i.push({axisName:o.name,zoomFactor:o.zoomFactor,zoomPosition:o.zoomPosition,axisRange:this.getVisibleRangeModel(o.visibleRange,o.visibleInterval)})}var r={name:"OnZoomEnd",axisCollection:i};r.cancel||(e.zoomToolkitBase.isReset=!0,this.zoomToolkitSetDeferredZoom(e,r))},zoomInOutCalculation:function(e,t,i){if(!t.zoomBase.zoomingModule.isPanning&&("0.2"!=i||"Always"===t.zoomBase.zoomSettings.toolbarDisplayMode)){t.zoomBase.zoomSettings.isOnZoomStartCalled&&(t.dotnetref.invokeMethodAsync("TriggerZoomingEvents","OnZoomStart",!1),t.zoomBase.zoomingModule.isZoomStart=!1);var n=t.zoomBase.zoomingModule.zooming.mode,s=void 0,o=void 0,r=void 0;t.userInteractionBase.disableTrackTooltip=t.zoomBase.delayRedraw=!0;for(var a=[],l=0,h=t.userInteractionBase.axes;l<h.length;l++){var d=h[l];"Horizontal"==d.orientation&&"Y"!=n||"Vertical"==d.orientation&&"X"!=n?(o=1==(s=Math.max(Math.max(1/this.minMax(d.zoomFactor,0,1),1)+.25*e,1))?1:this.minMax(1/s,0,1),r=1==s?0:d.zoomPosition+.5*(d.zoomFactor-o),d.zoomPosition==r&&d.zoomFactor==o||(o=r+o>1?1-r:o),a.push({axisName:d.name,zoomFactor:o,zoomPosition:r,axisRange:this.getVisibleRangeModel(d.visibleRange,d.visibleInterval)})):a.push({axisName:d.name,zoomFactor:d.zoomFactor,zoomPosition:d.zoomPosition,axisRange:this.getVisibleRangeModel(d.visibleRange,d.visibleInterval)})}var c={name:"OnZooming",axisCollection:a};if(t.zoomBase.zoomingEventArgs=c,!c.cancel)for(var p=function(e){t.userInteractionBase.axes.filter((function(t){t.name==e.axisName&&(t.zoomFactor=e.zoomFactor,t.zoomPosition=e.zoomPosition)}))},u=0,f=a;u<f.length;u++){p(f[u])}}},zoomToolkitRemoveTooltip:function(e){var t=e.zoomToolkitBase.hoverId;t&&(this.setAttribute(t,"fill",e.zoomBase.zoomingModule.isPanning?t.indexOf("_Pan_")>-1?e.zoomToolkitBase.iconRectSelectionFill:"transparent":t.indexOf("_Zoom_")>-1?e.zoomToolkitBase.iconRectSelectionFill:"transparent"),this.setAttribute(t.replace("_1","_2"),"fill",e.zoomBase.zoomingModule.isPanning?t.indexOf("_Pan_")>-1?e.zoomToolkitBase.selectionColor:e.zoomToolkitBase.fillColor:t.indexOf("_Zoom_")>-1?e.zoomToolkitBase.selectionColor:e.zoomToolkitBase.fillColor),this.setAttribute(t.replace("_1","_3"),"fill",e.zoomBase.zoomingModule.isPanning?e.zoomToolkitBase.fillColor:t.indexOf("_Zoom_")>-1?e.zoomToolkitBase.selectionColor:e.zoomToolkitBase.fillColor),e.dotnetref.invokeMethodAsync("SetSelectedIcon",t,!1)),this.removeElement(e.zoomBase.chartZoomTip)},zoomToolkitShowTooltip:function(e,t,i,n){this.zoomToolkitRemoveTooltip(e);var s=n.clientX-(sf.svgbase.measureText(i,{size:"10px",fontWeight:"Normal",fontStyle:"Normal",fontFamily:"Segoe UI"}).width+5),o=t+"_1";e.zoomToolkitBase.hoverId=o,this.setAttribute(o,"fill",e.zoomToolkitBase.iconRectOverFill),this.setAttribute(t+"_2","fill",e.zoomToolkitBase.selectionColor),this.setAttribute(t+"_3","fill",e.zoomToolkitBase.selectionColor),t&&"1"===document.getElementById(t).getAttribute("opacity")?document.getElementById(t).setAttribute("cursor","pointer"):document.getElementById(t).setAttribute("cursor","auto"),e.isTouch||this.createTooltip(e.zoomBase.chartZoomTip,i,n.clientY+10,s,"10px"),e.dotnetref.invokeMethodAsync("SetSelectedIcon",t,!0)},zoomToolkitSetDeferredZoom:function(e,t){e.userInteractionBase.disableTrackTooltip=!1,e.zoomBase.zoomingModule.isZoomed=e.zoomBase.zoomingModule.isPanning=e.zoomBase.isChartDrag=e.zoomBase.delayRedraw=!1,e.zoomBase.zoomingModule.touchMoveList=e.zoomBase.zoomingModule.touchStartList=[],e.zoomBase.zoomingModule.pinchTarget=null,e.dotnetref.invokeMethodAsync("ZoomToolkitSetDeferredZoom",t)},zoomToolkitTooltip:function(e,t,i){var n,s=e.zoomBase;if(t.indexOf(s.zoomToolkitZoom)>-1&&!(t.indexOf(s.zoomToolkitZoomIn)>-1||t.indexOf(s.zoomToolkitZoomOut)>-1))n=e.element.id+s.zoomToolkitZoom;else if(t.indexOf(s.zoomToolkitZoomIn)>-1)n=e.element.id+s.zoomToolkitZoomIn;else if(t.indexOf(s.zoomToolkitZoomOut)>-1)n=e.element.id+s.zoomToolkitZoomOut;else if(t.indexOf(s.zoomToolkitPan)>-1)n=e.element.id+s.zoomToolkitPan;else{if(!(t.indexOf(s.zoomToolkitReset)>-1))return;n=e.element.id+s.zoomToolkitReset}n&&m.zoomToolkitShowTooltip(e,n,this.getElement(n).getAttribute("aria-label"),i)},zoomToolkitMouseDown:function(e,t){var i=e.zoomBase;if(t.id.indexOf(i.zoomToolkitZoom)>-1&&!(t.id.indexOf(i.zoomToolkitZoomIn)>-1||t.id.indexOf(i.zoomToolkitZoomOut)>-1))this.zoomToolkitZoom(e);else if(t.id.indexOf(i.zoomToolkitZoomIn)>-1)this.zoomToolkitZoomIn(e,t.getAttribute("opacity"));else if(t.id.indexOf(i.zoomToolkitZoomOut)>-1)this.zoomToolkitZoomOut(e,t.getAttribute("opacity"));else if(t.id.indexOf(i.zoomToolkitPan)>-1)this.zoomToolkitPan(e);else{if(!(t.id.indexOf(i.zoomToolkitReset)>-1))return;this.zoomToolkitReset(e)}},setScrollbarOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.scrollbarBase=i.scrollbarBase?i.scrollbarBase:{},i.scrollbarBase.isResize=t.isResize,i.scrollbarBase.axes=t.axes,i.scrollbarBase.scrollbarThemeStyle=t.scrollbarThemeStyle,i.scrollbarBase.chartAreaType=t.chartAreaType,i.scrollbarBase.isScrollExist=t.isScrollExist,i.scrollbarBase.scrollbarOptions=i.scrollbarBase.scrollbarOptions?i.scrollbarBase.scrollbarOptions:{})},renderScrollbar:function(e,t){var i,n,s,o=window.sfBlazor.getCompInstance(e);o.axes=o.scrollbarBase.axes=t,o.calculateSecondaryOffset(o.element.id),sf.base.isNullOrUndefined(o.zoomBase.zoomingModule)?n=!1:s=(n=o.zoomBase.zoomingModule).isZoomed?n.isZoomed:this.isAxisZoomed(o.userInteractionBase.axes),o.scrollbarBase.chartId=o.id;for(var r=0;r<o.axes.length;r++)if(i=o.axes[r],o.scrollbarBase.axis=i,"PolarAxes"!=o.scrollbarBase.chartAreaType&&(s&&(i.zoomFactor<1||i.zoomPosition>0)||i.scrollbarSettings.enable&&(i.zoomFactor<=1||i.zoomPosition>=0)))!o.scrollElement&&"PolarAxes"!=o.scrollbarBase.chartAreaType&&i.visible&&(o.scrollElement=document.getElementById(o.id+"_scrollElement")),(n||o.scrollbarBase.isScrollExist&&i.scrollbarSettings.enable)&&this.getDefaults(o,i),this.getTheme(o),this.removeScrollSvg(o,i),this.createScrollSvg(i,o,o.userInteractionBase.svgRenderer),o.scrollbarBase.scrollbarOptions[i.name].svgObject.appendChild(this.renderElements(o,i)),o.scrollElement.appendChild(o.scrollbarBase.scrollbarOptions[i.name].svgObject);else{if(this.getElement(o.id+"_scrollElement").childNodes.length>0)var a=document.getElementById(o.id+"_scrollBar_svg"+i.name);a&&(a.style.display="none")}},renderElements:function(e,t){var i=t.isAxisInverse,n=e.scrollbarBase,s=n.scrollbarOptions[t.name],o=e.userInteractionBase.svgRenderer,r=o.createGroup({id:e.id+"scrollBar_"+t.name,transform:"translate("+(s.isVertical&&i?s.height:i?s.width:"0")+","+(s.isVertical&&i?"0":i?s.height:s.isVertical?s.width:"0")+") rotate("+(s.isVertical&&i?"90":s.isVertical?"270":i?"180":"0")+")"}),a=o.createGroup({id:e.id+"scrollBar_backRect_"+t.name}),l=o.createGroup({id:e.id+"scrollBar_thumb_"+t.name,transform:"translate(0,0)"});return this.backRect(n,o,a),this.thumb(n,o,l),this.renderCircle(n,o,l),this.arrows(n,o,l),this.thumbGrip(n,o,l),r.appendChild(a),r.appendChild(l),r},backRect:function(e,t,i){var n=e.scrollbarThemeStyle,s=t.drawRectangle(new c(e.chartId+"scrollBarBackRect_"+e.axis.name,n.backRect,{width:1,color:n.backRect},1,new sf.svgbase.Rect(0,0,e.scrollbarOptions[e.axis.name].width,e.scrollbarOptions[e.axis.name].height),0,0));i.appendChild(s)},thumb:function(e,t,i){e.scrollbarOptions[e.axis.name].startX=e.scrollbarOptions[e.axis.name].thumbRectX;var n=e.scrollbarThemeStyle;e.scrollbarOptions[e.axis.name].slider=t.drawRectangle(new c(e.chartId+"scrollBarThumb_"+e.axis.name,n.thumb,{width:1,color:""},1,new sf.svgbase.Rect(e.scrollbarOptions[e.axis.name].thumbRectX,0,e.scrollbarOptions[e.axis.name].thumbRectWidth,e.scrollbarOptions[e.axis.name].height))),i.appendChild(e.scrollbarOptions[e.axis.name].slider)},renderCircle:function(e,t,i){var n=e.scrollbarThemeStyle,s=new g(e.chartId+"scrollBar_leftCircle_"+e.axis.name,n.circle,{width:1,color:n.circle},1,e.scrollbarOptions[e.axis.name].thumbRectX,e.scrollbarOptions[e.axis.name].height/2,8),o=t.createDefs(),r=t.createGroup({id:e.chartId+e.axis.name+"_thumb_shadow"});o.innerText='<filter x="-25.0%" y="-20.0%" width="150.0%" height="150.0%" filterUnits="objectBoundingBox"id="scrollbar_shadow"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.16 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix></filter>',r.innerText='<use fill="black" fill-opacity="1" filter="url(#scrollbar_shadow)" xlink:href="#'+e.chartId+"scrollBar_leftCircle_"+e.axis.name+'"></use><use fill="black" fill-opacity="1" filter="url(#scrollbar_shadow)" xlink:href="#'+e.chartId+"scrollBar_rightCircle_"+e.axis.name+'"></use>',e.scrollbarOptions[e.axis.name].leftCircleEle=t.drawCircle(s),s.id=e.chartId+"scrollBar_rightCircle_"+e.axis.name,s.cx=e.scrollbarOptions[e.axis.name].thumbRectX+e.scrollbarOptions[e.axis.name].thumbRectWidth,e.scrollbarOptions[e.axis.name].rightCircleEle=t.drawCircle(s),i.appendChild(o),i.appendChild(e.scrollbarOptions[e.axis.name].leftCircleEle),i.appendChild(e.scrollbarOptions[e.axis.name].rightCircleEle),i.appendChild(r)},arrows:function(e,t,i){var n=e.scrollbarThemeStyle,s=new sf.svgbase.PathOption(e.chartId+"scrollBar_leftArrow_"+e.axis.name,n.arrow,1,n.arrow,1,"",""),o=e.scrollbarOptions[e.axis.name];o.leftArrowEle=t.drawPath(s),s.id=e.chartId+"scrollBar_rightArrow_"+e.axis.name,o.rightArrowEle=t.drawPath(s),this.setArrowDirection(e);var r="M "+(o.thumbRectX-4+1)+" "+o.height/2+" L "+(o.thumbRectX-4+6)+" 11 L "+(o.thumbRectX-4+6)+" 5 Z",a="M "+(o.thumbRectX+o.thumbRectWidth+4-.5)+" "+o.height/2+" L "+(o.thumbRectX+o.thumbRectWidth+4-6)+" 11.5 L "+(o.thumbRectX+o.thumbRectWidth+4-6)+" 4.5 Z";o.leftArrowEle.setAttribute("d",r),o.rightArrowEle.setAttribute("d",a),i.appendChild(o.leftArrowEle),i.appendChild(o.rightArrowEle)},setArrowDirection:function(e){var t=e.scrollbarOptions[e.axis.name],i=t.thumbRectX,n=t.thumbRectWidth,s=t.height,o="M "+(i-4+1)+" "+s/2+" L "+(i-4+6)+" 11 L "+(i-4+6)+" 5 Z",r="M "+(i+n+4-.5)+" "+s/2+" L "+(i+n+4-6)+" 11.5 L "+(i+n+4-6)+" 4.5 Z";t.leftArrowEle.setAttribute("d",o),t.rightArrowEle.setAttribute("d",r)},thumbGrip:function(e,t,i){var n=0,s=0,o=e.scrollbarThemeStyle,r=new g(e.chartId+"scrollBar_gripCircle0_"+e.axis.name,o.grip,{width:1,color:o.grip},1,0,0,1),a=e.scrollbarOptions[e.axis.name];a.gripCircle=t.createGroup({id:e.chartId+"scrollBar_gripCircle_"+e.axis.name,transform:"translate("+(a.thumbRectX+a.thumbRectWidth/2+5*(a.isVertical?1:-1))+","+(a.isVertical?"10":"5")+") rotate("+(a.isVertical?"180":"0")+")"});for(var l=1;l<=6;l++)r.id=e.chartId+"scrollBar_gripCircle"+l+"_"+e.axis.name,r.cx=n,r.cy=s,a.gripCircle.appendChild(t.drawCircle(r)),n=3===l?0:n+5,s=l>=3?5:0;i.appendChild(a.gripCircle)},getTheme:function(e){},getDefaults:function(e,t){e.scrollbarBase.scrollbarOptions[t.name]||(e.scrollbarBase.scrollbarOptions[t.name]={});var i=e.scrollbarBase.scrollbarOptions[t.name];t.scrollbarSettings.enable&&(i.isLazyLoad=!0,this.getLazyDefaults(e,t)),i.isVertical="Vertical"===t.orientation,i.zoomFactor=i.isLazyLoad?i.zoomFactor:t.zoomFactor,i.zoomPosition=i.isLazyLoad?i.zoomPosition:t.zoomPosition;var n=i.zoomFactor*(i.isVertical?t.rect.h:t.rect.w);n=n>40?n:40,i.scrollX=t.rect.x,i.scrollY=t.rect.y,i.width=i.isVertical?t.rect.h:t.rect.w,i.height=16;var s=i.zoomPosition*(i.isVertical?t.rect.h:i.width);s=i.isLazyLoad&&0==s&&i.startX?i.startX:s;var o=i.width-40-8;i.thumbRectX=s>o?o:s<8?8:s,i.thumbRectWidth=e.scrollbarBase.isThumbDrag||e.isWheelScrolling?i.thumbRectWidth:n+i.thumbRectX<i.width-16?n:i.width-i.thumbRectX-8},getLazyDefaults:function(e,t){var i,n,s=t.valueType,o=t.scrollbarSettings,r=t.scrollbarSettings.range,a=t.visibleRange,l=t.scrollbarSettings.pointsLength,h=e.scrollbarBase.scrollbarOptions[t.name];switch(h.valueType=s=sf.base.isNullOrUndefined(o.range.minimum)&&sf.base.isNullOrUndefined(o.range.maximum)||!o.pointsLength?s:"Double",s){case"Double":case"Category":case"Logarithmic":i=r.minimum?r.minimum:l?0:a.start,n=r.maximum?r.maximum:l?l-1:a.end;break;case"DateTime":case"DateTimeCategory":i=r.minimum?Date.parse(r.minimum):a.start,n=r.maximum?Date.parse(r.maximum):a.end}"Category"!==t.valueType&&(i=Math.min(i,a.start),n=Math.max(n,a.end));var d=(a.end-a.start)/(n-i),c=(a.start-i)/(n-i);h.zoomFactor=r.minimum||r.maximum?d:h.zoomFactor?h.zoomFactor:t.maxPointLength/t.scrollbarSettings.pointsLength,h.zoomPosition=r.minimum||r.maximum?c:h.zoomPosition?h.zoomPosition:t.zoomPosition,h.scrollRange={start:i,end:n,delta:"Category"!=t.valueType||r.maximum?n-i:l},h.previousStart=a.start,h.previousEnd=a.end},createScrollSvg:function(e,t,i){var n=e.rect,s="Horizontal"===e.orientation,o=t.scrollbarBase.scrollbarOptions[e.name],r=t.scrollbarBase.isThumbDrag&&o.isLazyLoad?"-webkit-grabbing":"auto";o.svgObject=i.createSvg({id:t.element.id+"_scrollBar_svg"+e.name,width:o.isVertical?o.height:o.width,height:o.isVertical?o.width:o.height,style:"position: absolute;top: "+((e.isAxisOppositePosition&&s?-16:0)+n.y+t.userInteractionBase.secondaryElementOffset.top)+"px;left: "+((e.isAxisOppositePosition&&!s?16:0)+n.x-(o.isVertical?o.height:0)+t.userInteractionBase.secondaryElementOffset.left)+"px;cursor:"+r+";"})},removeScrollSvg:function(e,t){document.getElementById(e.element.id+"_scrollBar_svg"+t.name)&&sf.base.remove(document.getElementById(e.element.id+"_scrollBar_svg"+t.name))}};return m}()},"./modules/sf-circulargauge.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.CircularGauge=function(){"use strict";var e=function(){function e(e,t,i,n){this.isResize=!1,this.isPropertyChange=!1,window.sfBlazor=window.sfBlazor,this.allowAxisCount=[],this.prevAnimatedMajorTickValue=[],this.prevAnimatedMajorTickIndex=[],this.prevAnimatedMinorTickValue=[],this.prevAnimatedMinorTickIndex=[],this.isPointerRenderCompleted=!1,this.loadingAnimationDuration=[],this.isTouch=!1,this.labelElementAnimation=function(e,t,i){var n=this;e&&!this.isResize&&new sf.base.Animation({}).animate(e,{duration:t.IsAxisLabelVisible?this.loadingAnimationDuration[i]/t.AxisLabelCount/this.allowAxisCount[i]:0,progress:function(){e.style.visibility="visible"},end:function(){var s=document.getElementById(n.element.id+"_Axis_Labels_"+i);t.ShowLastLabel&&parseInt(e.id.split("Label_")[1])===s.childElementCount-2&&(e=document.getElementById(n.element.id+"_Axis_"+i+"_Label_"+(s.childElementCount-1)))&&(e.style.visibility="visible")}})},this.id=e,this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.wireEvents()},e.prototype.wireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,"click",this.gaugeOnMouseClick,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},e.prototype.destroy=function(){this.dotNetRef=null},e.prototype.gaugeOnMouseClick=function(e){var t=["_Text_","_Shape_"],i=e.target.id;if(-1!==i.indexOf("Legend")&&this.options.legendToggleVisibility)for(var n=0;n<t.length;n++){var s=t[n];if(-1!==i.indexOf(s)){var o=parseInt(i.split(this.element.id+"_Legend_Axis_")[1].split(s)[0]),r=parseInt(i.split(this.element.id+"_Legend_Axis_")[1].split(s)[1]);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerLegendClick",o,r)}}},e.prototype.gaugeOnResize=function(){var e,t;if(!sf.base.isNullOrUndefined(this.element)){var i=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(i)){i.style.display="none";var n=this.element.getBoundingClientRect();e=n.width,t=n.height,i.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,this.isResize=!0,this.isPropertyChange=!1,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResizeEvent",e,t))},e.prototype.gaugeOnMouseDown=function(e){var t=document.getElementById(this.element.id+"_legend_pagenumber"),i=e.target.id,n=0,s=0;if("touchstart"===e.type?(this.isTouch=!0,n=e.touches[0].clientX,s=e.touches[0].clientY):(this.isTouch=!1,n=e.pageX,s=e.pageY),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseDownEvent",n,s),!sf.base.isNullOrUndefined(t)){var o=parseInt(t.textContent.split("/")[0],10);i.indexOf(this.element.id+"_legend_pageup")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)?this.dotNetRef.invokeMethodAsync("TriggerLegendPageClick",o-2,o-1):i.indexOf(this.element.id+"_legend_pagedown")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPageClick",o,o+1)}if((this.options.enablePointerDrag||this.options.enableRangeDrag)&&(-1!==event.target.id.indexOf("Pointer")||-1!==event.target.id.indexOf("_Range_"))){e.preventDefault(),this.isMouseDown=!0;var r=i.replace(this.element.id,"").split("_Axis_")[1];this.dragAxisIndex=+r[0],this.dragElementIndex=+r[r.length-1],sf.base.isNullOrUndefined(this.dotNetRef)||(-1!==event.target.id.indexOf("Pointer")?(this.isPointerDrag=!0,this.dotNetRef.invokeMethodAsync("TriggerDragStart",this.dragAxisIndex,this.dragElementIndex,0,"Pointer")):(this.isRangeDrag=!0,this.dotNetRef.invokeMethodAsync("TriggerDragStart",this.dragAxisIndex,0,this.dragElementIndex,"Range")))}},e.prototype.gaugeOnMouseMove=function(e){var t,i,n,s,o,r=e.target.id;"touchmove"===e.type?(s=e.touches[0].clientX,o=e.touches[0].clientY):(s=e.clientX,o=e.clientY);var a=document.getElementById(this.element.id+"_svg"),l=a.getBoundingClientRect(),h=this.element.getBoundingClientRect(),d=o-h.top-Math.max(l.top-h.top,0),c=s-h.left-Math.max(l.left-h.left,0);if(-1!==r.indexOf("Legend")){var p=document.getElementById(r);this.options.legendToggleVisibility?p.setAttribute("cursor","pointer"):p.setAttribute("cursor","auto")}var u=document.getElementById(this.element.id+"_Tooltip"),f=document.getElementById(this.element.id+"_Tooltip_Group"),g=(e.target.parentElement||e.target.parentNode).id;-1===r.indexOf("Pointer")||!sf.base.isNullOrUndefined(this.options.tooltipType)&&-1===this.options.tooltipType.indexOf("Pointer")||(i=+(t=r.replace(this.element.id,"").split("_Axis_")[1])[0],n=+t[t.length-1]),this.performDragOperation(r,i,n,c,d,event);var m=g.indexOf("Annotation")>-1?"Annotation":r.indexOf("Pointer")>-1?"Pointer":r.indexOf("_Range_")>-1?"Range":r.indexOf("_CircularGaugeTitle")>-1&&event.target.textContent.indexOf("...")>-1?"Title":-1!==r.indexOf("Legend")&&r.indexOf("_Text_")>-1&&event.target.textContent.indexOf("...")>-1?"Legend":"";this.gaugeTooltip(r,g,s,o,f,u,h,l,a,m),sf.base.isNullOrUndefined(this.dotNetRef)||r.indexOf("_CircularGaugeBorder")>-1&&this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",s,o,0,0,0,!1,!1,!1,!1,!1,h)},e.prototype.gaugeTooltip=function(e,t,i,n,s,o,r,a,l,h){var d=this;if(this.options.enableTooltip&&"Title"!==h&&"Legend"!==h){var c=void 0,p=0,u=0;if("Annotation"===h){if(r={left:Math.abs(r.left-a.left),top:Math.abs(r.top-a.top),width:a.width,height:a.height,x:Math.abs(r.left-a.left),y:Math.abs(r.top-a.top),bottom:0,right:0},(-1!==e.indexOf("Annotation")||-1!==t.indexOf("Annotation"))&&!sf.base.isNullOrUndefined(this.options.tooltipType)&&-1!==this.options.tooltipType.indexOf("Annotation")){var f=void 0;if(-1!==t.indexOf("ContentTemplate")){var g=t.split("_ContentTemplate")[0];f=g[g.length-1]}var m=document.getElementById(t);p=+(c=m.id.replace(this.element.id,"").split("_Axis_")[1])[0],u=+(-1===t.indexOf("ContentTemplate")?c[c.length-1]:f),u=isNaN(u)?0:u;if(null!==s&&null!==o.lastElementChild){var v=this.element.id+"_Tooltip_Annotation_"+u+"_Content";document.getElementById(v);document.querySelectorAll("#"+v)}var b=m.getBoundingClientRect().width;sf.base.isNullOrUndefined(this.dotNetRef)||(clearTimeout(this.tooltipTimer),this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",i+b/2,n,p,u,0,!1,!1,!0,!1,!1,r),this.isTouch&&(this.tooltipTimer=setTimeout((function(){d.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",0,0,0,0,0,!1,!1,!1,!1,!1,r)}),1500)))}}else if("Pointer"===h){if((-1!==e.indexOf("Pointer")||-1!==e.indexOf("_Range_")||-1!==e.indexOf("Annotation")||-1!==t.indexOf("Annotation")&&-1===e.indexOf("Annotation"))&&-1!==e.indexOf("Pointer")&&(sf.base.isNullOrUndefined(this.options.tooltipType)||-1!==this.options.tooltipType.indexOf("Pointer"))){p=+(c=e.replace(this.element.id,"").split("_Axis_")[1])[0],u=+c[c.length-1];var y=0,C=0;if(this.options.showPointerTooltipAtMousePosition)y=(w=this.getMousePosition(i,n,l)).x,C=w.y;else y=i,C=n;sf.base.isNullOrUndefined(this.dotNetRef)||(clearTimeout(this.tooltipTimer),this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",y,C,p,u,0,!1,!0,!1,!1,!1,r),this.isTouch&&(this.tooltipTimer=setTimeout((function(){d.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",0,0,0,0,0,!1,!1,!1,!1,!1,r)}),1500)))}}else if("Range"===h){if(-1!==e.indexOf("_Range_")&&!sf.base.isNullOrUndefined(this.options.tooltipType)&&-1!==this.options.tooltipType.indexOf("Range")&&!this.isMouseDown){p=+(c=e.replace(this.element.id,"").split("_Axis_")[1])[0],u=+c[c.length-1];y=0,C=0;if(this.options.showRangeTooltipAtMousePosition)y=(w=this.getMousePosition(i,n,l)).x,C=w.y;else y=i,C=n;sf.base.isNullOrUndefined(this.dotNetRef)||(clearTimeout(this.tooltipTimer),this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",y,C,p,u,0,!0,!1,!1,!1,!1,r),this.isTouch&&(this.tooltipTimer=setTimeout((function(){d.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",0,0,0,0,0,!1,!1,!1,!1,!1,r)}),1500)))}}else(null!==o||s&&s.childElementCount>0)&&!this.isPointerDrag&&this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",0,0,0,0,0,!1,!1,!1,!1,!1,r)}else if("Title"===h)sf.base.isNullOrUndefined(this.dotNetRef)||(clearTimeout(this.tooltipTimer),this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",0,0,0,0,0,!1,!1,!1,!0,!1,r),this.isTouch&&(this.tooltipTimer=setTimeout((function(){d.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",0,0,0,0,0,!1,!1,!1,!1,!1,r)}),1500)));else if("Legend"===h){var w=this.getMousePosition(i,n,l);clearTimeout(this.tooltipTimer),this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",w.x,w.y,0,0,parseInt(e.split("_Text_")[1]),!1,!1,!1,!1,!0,r),this.isTouch&&(this.tooltipTimer=setTimeout((function(){d.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",0,0,0,0,0,!1,!1,!1,!1,!1,r)}),1500))}else this.isPointerDrag||this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",0,0,0,0,0,!1,!1,!1,!1,!1,r)},e.prototype.performDragOperation=function(e,t,i,n,s,o){if(this.options.enablePointerDrag&&-1!==e.indexOf("Pointer")||this.options.enableRangeDrag&&-1!==e.indexOf("_Range_")||this.isMouseDown)if(this.isMouseDown){o.preventDefault();var r=new Date;if(null!==t&&null!==i&&this.isMouseDown){var a="touchmove"===o.type;this.isRangeDrag&&this.options.enableRangeDrag&&!sf.base.isNullOrUndefined(this.dotNetRef)?(document.getElementById(this.element.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerRangeDragEvent",n,s,this.dragAxisIndex,this.dragElementIndex,a)):this.isPointerDrag&&this.options.enablePointerDrag&&(sf.base.isNullOrUndefined(this.dragMilliseconds)||Math.abs(r.getMilliseconds()-this.dragMilliseconds)>100)&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.dragMilliseconds=r.getMilliseconds(),document.getElementById(this.element.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerDragEvent",n,s,this.dragAxisIndex,this.dragElementIndex,a))}}else document.getElementById(this.element.id+"_svg").setAttribute("cursor","pointer");else document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto")},e.prototype.gaugeOnMouseEnd=function(e){var t=0,i=0;this.dragMilliseconds=null;var n=e.target.id;if("touchend"===e.type){var s=e;t=s.changedTouches[0].pageX,i=s.changedTouches[0].pageY,this.isTouch=!0}else this.isTouch=!1,t=e.clientX,i=e.clientY;if(this.isTouch){var o=document.getElementById(this.element.id+"_svg"),r=o.getBoundingClientRect(),a=this.element.getBoundingClientRect(),l=(e.target.parentElement||e.target.parentNode).id,h=document.getElementById(this.element.id+"_Tooltip"),d=document.getElementById(this.element.id+"_Tooltip_Group");this.isMouseDown=!1;var c=l.indexOf("Annotation")>-1?"Annotation":n.indexOf("Pointer")>-1?"Pointer":n.indexOf("_Range_")>-1?"Range":n.indexOf("_CircularGaugeTitle")>-1&&e.target.textContent.indexOf("...")>-1?"Title":-1!==n.indexOf("Legend")&&n.indexOf("_Text_")>-1&&e.target.textContent.indexOf("...")>-1?"Legend":"";this.gaugeTooltip(n,l,t,i,d,h,a,r,o,c)}sf.base.isNullOrUndefined(this.dotNetRef)||(this.isTouch||"mouseup"==e.type?this.dotNetRef.invokeMethodAsync("TriggerMouseUpEvent",t,i):this.dotNetRef.invokeMethodAsync("TriggerMouseLeaveEvent",t,i),this.isPointerDrag?this.dotNetRef.invokeMethodAsync("TriggerDragEnd",this.dragAxisIndex,this.dragElementIndex,0,"Pointer"):this.isRangeDrag&&this.dotNetRef.invokeMethodAsync("TriggerDragEnd",this.dragAxisIndex,0,this.dragElementIndex,"Range")),this.isMouseDown=!1,this.isPointerDrag=!1,this.isRangeDrag=!1},e.prototype.performRangeBarAnimation=function(e,t,i,n){var s,o=this,r=this.allowLoadingAnimation?this.allowLoadingAnimation?t.animationEnable&&t.duration>0?t.duration:this.loadingAnimationDuration[i]:t.duration:t.animationEnable?t.duration:0;new sf.base.Animation({}).animate(e,{duration:r,progress:function(i){s=o.animationRangeProgress(s,t,i,e,r)},end:function(){if(!t.isClockWise){var s=t.endAngle;t.endAngle=t.minimumAngle,t.minimumAngle=s}if(0!=t.roundRadius&&t.end!=t.minimumAxis){var r=t.roundRadius,a=.25*t.roundRadius;t.end<=a&&(r=t.end<6?8:r,a=.25*(r/=2));var l=((t.radius-t.pointerWidth/2)*(t.minimumAngle*Math.PI/180)-r/a)/(t.radius-t.pointerWidth/2)*180/Math.PI,h=((t.radius-t.pointerWidth/2)*(t.endAngle*Math.PI/180)+r/a)/(t.radius-t.pointerWidth/2)*180/Math.PI,d=t.radius*(t.minimumAngle*Math.PI/180)/t.radius*180/Math.PI,c=t.radius*(t.endAngle*Math.PI/180)/t.radius*180/Math.PI;c=t.end>0?c:c-r/3,d=t.end>0?d:d+r/3,e.setAttribute("d",o.getRoundedPathArc({x:t.midPointX,y:t.midPointY},Math.floor(d),c,Math.floor(l),Math.floor(h),t.radius,t.pointerWidth,t.pointerWidth,Math.abs(t.roundRadius)))}else e.setAttribute("d",o.getCompletePathArc({x:t.midPointX,y:t.midPointY},t.minimumAngle,t.endAngle,t.radius,t.innerRadius,t.isClockWise));o.allowLoadingAnimation&&o.annotationAnimationProcess(),o.options.isAnimationEvent&&t.start!=t.end&&!sf.base.isNullOrUndefined(o.dotNetRef)&&o.dotNetRef.invokeMethodAsync("AnimatePointer",i,n,t.end)}})},e.prototype.performNeedleAnimation=function(e,t,i,n){var s,o=this;new sf.base.Animation({}).animate(e,{duration:this.allowLoadingAnimation?this.allowLoadingAnimation?t.animationEnable&&t.duration>0?t.duration:this.loadingAnimationDuration[i]:t.duration:t.animationEnable?t.duration:0,progress:function(i){s=o.animationProgress(s,t,i,e)},end:function(){e.setAttribute("transform","rotate("+t.endAngle+","+t.midPointX+","+t.midPointY+")"),o.allowLoadingAnimation&&o.annotationAnimationProcess(),o.options.isAnimationEvent&&t.start!=t.end&&!sf.base.isNullOrUndefined(o.dotNetRef)&&o.dotNetRef.invokeMethodAsync("AnimatePointer",i,n,t.end)}})},e.prototype.animationProgress=function(e,t,i,n){return e=t.start<t.end||Math.round(t.startAngle)===Math.round(t.endAngle)?t.isClockWise||t.start===t.end?t.endAngle-t.startAngle:t.endAngle-t.startAngle-360:t.isClockWise?t.endAngle-t.startAngle-360:t.endAngle-t.startAngle,n.style.animation="None",n.setAttribute("transform","rotate("+(-e*Math.cos(i.timeStamp/i.duration*(Math.PI/2))+e+t.startAngle)+","+t.midPointX+","+t.midPointY+")"),e},e.prototype.animationRangeProgress=function(e,t,i,n,s){var o,r,a;return e=t.start<t.end||Math.round(t.startAngle)===Math.round(t.endAngle)?t.isClockWise||t.start===t.end?t.endAngle-t.startAngle:t.endAngle-t.startAngle-360:t.isClockWise?t.endAngle-t.startAngle-360:t.endAngle-t.startAngle,n.style.animation="None",t.roundRadius<=0&&(o=-e*Math.cos(i.timeStamp/s*(Math.PI/2))+e+t.startAngle),t.isClockWise?t.roundRadius>0&&t.end!=t.minimumAxis?(r=-e*Math.cos(i.timeStamp/s*(Math.PI/2))+e+Math.floor(t.startAngle),a=-e*Math.cos(i.timeStamp/s*(Math.PI/2))+e+Math.floor(t.startAngle+Math.abs(t.roundRadius)/2),n.setAttribute("d",this.getRoundedPathArc({x:t.midPointX,y:t.midPointY},Math.floor(t.minimumAngle),r+1e-4,Math.floor(t.oldStart),Math.floor(a+1e-4),t.radius,t.pointerWidth,t.pointerWidth,Math.abs(t.roundRadius)))):n.setAttribute("d",this.getCompletePathArc({x:t.midPointX,y:t.midPointY},t.minimumAngle,o+1e-4,t.radius,t.innerRadius,!1)):t.roundRadius>0&&t.end!=t.minimumAxis?(r=-e*Math.cos(i.timeStamp/s*(Math.PI/2))+e+Math.floor(t.startAngle),a=-e*Math.cos(i.timeStamp/s*(Math.PI/2))+e+Math.floor(t.startAngle-Math.abs(t.roundRadius)/2),n.setAttribute("d",this.getRoundedPathArc({x:t.midPointX,y:t.midPointY},r,t.minimumAngle+1e-4,a,Math.floor(t.oldStart+Math.abs(t.roundRadius)),t.radius,t.pointerWidth,t.pointerWidth,Math.abs(t.roundRadius)))):n.setAttribute("d",this.getCompletePathArc({x:t.midPointX,y:t.midPointY},o,t.minimumAngle+1e-4,t.radius,t.innerRadius,!1)),e},e.prototype.annotationAnimationProcess=function(){if(this.isPointerRenderCompleted)for(var e=0;e<this.axes.length;e++)if(this.axes[e].IsAnnotationVisible){var t=document.getElementById(this.element.id+"_Axis_"+e+"_Annotation");null!=t&&this.annotationAnimateProgress(t,e)}},e.prototype.annotationAnimateProgress=function(e,t){var i=0;"0"===e.style.opacity&&new sf.base.Animation({}).animate(e,{duration:this.loadingAnimationDuration[t],progress:function(t){t.timeStamp>t.delay&&(i=(t.timeStamp-t.delay)/t.duration,e.style.opacity=1*i)},end:function(){e.style.opacity=1}})},e.prototype.pointerAnimationProcess=function(e){for(var t=document.getElementById(e.id),i=t.id.replace(this.element.id,"").split("_Axis_")[1],n=+i[0],s=+i[i.length-1],o=sf.base.Browser.isIE?t.childNodes.length:t.childElementCount,r=0;r<o;r++){var a=sf.base.Browser.isIE?t.childNodes[r]:t.children[r];"#comment"!==a.nodeName&&("RangeBar"===e.pointerType?this.performRangeBarAnimation(a,e,n,s):e.isMarkerShapeText?this.performTextAnimation(a,e,n,s):this.performNeedleAnimation(a,e,n,s))}},e.prototype.performTextAnimation=function(e,t,i,n){var s,o,r,a,l=this,h=Math.abs(t.start-t.end);new sf.base.Animation({}).animate(e,{duration:this.allowLoadingAnimation?this.allowLoadingAnimation?t.animationEnable&&t.duration>0?t.duration:this.loadingAnimationDuration[i]:t.duration:t.animationEnable?t.duration:0,progress:function(i){a=i.timeStamp/t.duration,r=t.end>t.start?t.start+a*h:t.start-a*h,s=l.getAngleFromValue(r,t.maximumAxis,t.minimumAxis,t.axisStartAngle,t.axisEndAngle,t.isClockWise),o=l.getLocationFromAngle(s,t.radius,{x:t.midPointX,y:t.midPointY}),e.setAttribute("transform","rotate("+(s+90)+", "+o.x+", "+o.y+")"),e.setAttribute("x",String(o.x)),e.setAttribute("y",String(o.y)),e.style.visibility="visible"},end:function(){s=l.getAngleFromValue(t.pointerValue,t.maximumAxis,t.minimumAxis,t.axisStartAngle,t.axisEndAngle,t.isClockWise),o=l.getLocationFromAngle(s,t.radius,{x:t.midPointX,y:t.midPointY}),e.setAttribute("transform","rotate("+(s+90)+","+o.x+","+o.y+")"),e.setAttribute("x",String(o.x)),e.setAttribute("y",String(o.y)),l.allowLoadingAnimation&&l.annotationAnimationProcess(),l.options.isAnimationEvent&&t.start!=t.end&&!sf.base.isNullOrUndefined(l.dotNetRef)&&l.dotNetRef.invokeMethodAsync("AnimatePointer",i,n,t.end)}})},e.prototype.getAngleFromValue=function(e,t,i,n,s,o){var r;return s-=this.isCompleteAngle(n,s)?1e-4:0,n-=90,s-=90,r=o?(e-i)*(this.getDegreeValue(n,s)/(t-i))+n:(r=s-(e-i)*(this.getDegreeValue(n,s)/(t-i)))<0?360+r:r,r=Math.round(r)>=360?r-360:Math.round(r)<0?360+r:r},e.prototype.isCompleteAngle=function(e,t){var i=t-e;return i=i<=0?i+360:i,0!=Math.floor(i/360)},e.prototype.getDegreeValue=function(e,t){var i=t-e;return i<0?i+360:i},e.prototype.getLocationFromAngle=function(e,t,i){var n=e*Math.PI/180;return{x:Math.cos(n)*t+i.x,y:Math.sin(n)*t+i.y}},e.prototype.getCompletePath=function(e,t,i,n,s,o,r){return"M "+e.x+" "+e.y+" A "+i+" "+i+" 0 "+r+" 1 "+t.x+" "+t.y+" L "+s.x+" "+s.y+" A "+o+" "+o+" 0 "+r+" 0 "+n.x+" "+n.y+" Z"},e.prototype.getRoundedPath=function(e,t,i,n,s,o,r,a,l,h,d,c){return"M "+e.x+" "+e.y+" A "+l+" "+l+" 0 "+c+" 1 "+t.x+" "+t.y+" C "+i.x+" "+i.y+" "+n.x+" "+n.y+" "+a.x+" "+a.y+" A "+d+" "+h+" 0 "+c+" 0 "+r.x+" "+r.y+" C "+o.x+" "+o.y+" "+s.x+" "+s.y+" "+e.x+" "+e.y+" Z"},e.prototype.getCompletePathArc=function(e,t,i,n,s,o){i-=this.isCompleteAngle(t,i)&&!o&&t!=i?1e-4:0;var r=this.getDegreeValue(t,i),a=r<180&&r>0||r>360&&r<540||t>630?0:1;return this.getCompletePath(this.getLocationFromAngle(t,n,e),this.getLocationFromAngle(i,n,e),n,this.getLocationFromAngle(t,s,e),this.getLocationFromAngle(i,s,e),s,a)},e.prototype.getRoundedPathArc=function(e,t,i,n,s,o,r,a,l){i-=this.isCompleteAngle(t,i)?1e-4:0;var h=this.getDegreeValue(t,i),d=o-(r=o<r?o:r),c=o-(a=o<a?o:a),p=o-(r+a)/2,u=180;l&&(s+=o>=r?l/o:0,n-=o>=r?l/o:0,t+=o>=r?l/2:0,i-=o>=r?l/2:0,u+=l);var f=h<=u&&h>0||h>2*(u-l)&&h<3*(u-l)||t>3*(u-l)+(u-l)/2?0:1;return this.getRoundedPath(this.getLocationFromAngle(t,o,e),this.getLocationFromAngle(i,o,e),this.getLocationFromAngle(s,o,e),this.getLocationFromAngle(s,c,e),this.getLocationFromAngle(n,o,e),this.getLocationFromAngle(n,d,e),this.getLocationFromAngle(t,d,e),this.getLocationFromAngle(i,c,e),o,p,p,f)},e.prototype.getMousePosition=function(e,t,i){var n=i.getBoundingClientRect(),s=i.ownerDocument.defaultView.pageXOffset,o=i.ownerDocument.defaultView.pageYOffset,r=i.ownerDocument.documentElement.clientTop,a=i.ownerDocument.documentElement.clientLeft;return{x:e-(n.left+s-a),y:t-(n.top+o-r)}},e.prototype.loadingAnimationProcess=function(e,t,i,n){this.axes=e,this.durationSplitUp(n,e),this.allowLoadingAnimation=n>0;for(var s=0;s<e.length;s++)this.isPointerRenderCompleted=0===i.length,this.axisLineAnimation(e[s],t[s],s,this.loadingAnimationDuration[s],i)},e.prototype.durationSplitUp=function(e,t){for(var i=0;i<t.length;i++){var n=0,s=0;t[i].IsAxisLineVisible&&n++,t[i].IsMajorTickVisible&&(n++,s++),t[i].IsMinorTickVisible&&(t[i].IsMajorTickVisible||n++,s++),t[i].IsAxisLabelVisible&&(t[i].IsMajorTickVisible||t[i].IsMinorTickVisible||n++,s++),t[i].IsRangeVisible&&n++,t[i].IsPointerVisible&&n++,t[i].IsAnnotationVisible&&n++,this.allowAxisCount.push(0===s?1:s),this.loadingAnimationDuration.push(0===n?e:e/n)}},e.prototype.axisLineAnimation=function(e,t,i,n,s){var o=this;this.prevAnimatedMajorTickValue.push(0),this.prevAnimatedMinorTickValue.push(0),this.prevAnimatedMinorTickIndex.push(0),this.prevAnimatedMajorTickIndex.push(0),this.prevAnimatedTickType="major";var r=this.isCompleteAngle(e.AxisStartAngle,e.AxisEndAngle),a=(r?0:e.AxisStartAngle)-90,l=(r?360:e.AxisEndAngle)-90;l-=this.isCompleteAngle(a,l)?1e-4:0;var h=this.getDegreeValue(a,l),d=document.getElementById(this.element.id+"_AxisLine_"+i);t.duration=n,new sf.base.Animation({}).animate(d,{duration:e.IsAxisLineVisible?n:0,progress:function(i){d.setAttribute("style","pointer-events:none; visibility: visible"),o.animationAxisProgress(e,void 0,t,i,d)},end:function(){if(o.isResize)d.setAttribute("fill","transparent"),d.setAttribute("stroke-width",t.pointerWidth);else{if(t.radius-=t.pointerWidth/2,!t.isClockWise){var r=t.endAngle;t.endAngle=t.minimumAngle,t.minimumAngle=r}var l=o.getCirclePath(o.getLocationFromAngle(a,t.radius,{x:t.midPointX,y:t.midPointY}),o.getLocationFromAngle(t.endAngle,t.radius,{x:t.midPointX,y:t.midPointY}),e.CurrentRadius,h<180?0:1);d.setAttribute("d",l),d.setAttribute("fill","transparent"),d.setAttribute("stroke-width",t.pointerWidth),o.tickElementAnimation(document.getElementById(o.element.id+"_Axis_Major_TickLine_"+i+"_0"),document.getElementById(o.element.id+"_Axis_"+i+"_Label_0"),n,i,s,e.IsMajorTickVisible&&e.IsMinorTickVisible?0:-1,"major",e)}}})},e.prototype.elementLabelAnimation=function(e,t,i,n,s){var o=this;e&&!this.isResize&&new sf.base.Animation({}).animate(e,{duration:n.IsAxisLabelVisible?this.loadingAnimationDuration[i]/n.AxisLabelCount:0,progress:function(){e.style.visibility="visible"},end:function(){if(!o.isResize){t+=1,o.elementLabelAnimation(document.getElementById(o.element.id+"_Axis_"+i+"_Label_"+t),t,i,n,s);var r=document.getElementById(o.element.id+"_Axis_Labels_"+i);n.ShowLastLabel&&parseInt(e.id.split("Label_")[1])===r.childElementCount-2&&(e=document.getElementById(o.element.id+"_Axis_"+i+"_Label_"+(r.childElementCount-1)))&&(e.style.visibility="visible"),n.AxisLabelCount-1===t&&o.rangePointerAnimation(s,i)}}})},e.prototype.pointerAnimate=function(e,t){if(!this.isResize)if(this.axes.length-1===t&&e.length>0)for(var i=0;i<e.length;i++){var n=parseInt(e[i].id.split("_Axis_")[1].split("_")[0],10);document.getElementById(this.element.id+"_Axis_Pointers_"+n).style.visibility="visible",this.isPointerRenderCompleted=i===e.length-1,this.pointerAnimationProcess(e[i])}else this.annotationAnimationProcess()},e.prototype.rangePointerAnimation=function(e,t){if(!this.isResize)for(var i=0;i<this.axes.length;i++)this.axes[i].IsRangeVisible?this.rangeElementAnimation(document.getElementById(this.element.id+"_Axis_Ranges_"+i),e,i):this.axes.length-1===i&&this.pointerAnimate(e,i)},e.prototype.tickElementAnimation=function(e,t,i,n,s,o,r,a){var l=this;if(e&&!this.isResize){var h=this.axes[n];new sf.base.Animation({}).animate(e,{duration:h.IsMinorTickVisible?0===h.MinorTickCount?0:this.loadingAnimationDuration[n]/h.MinorTickCount/this.allowAxisCount[n]:0===h.MajorTickCount?0:this.loadingAnimationDuration[n]/h.MajorTickCount/this.allowAxisCount[n],progress:function(){e.style.visibility="visible"},end:function(){if(h.IsMajorTickVisible&&h.IsMinorTickVisible){e.style.visibility="visible";var d=parseFloat(e.getAttribute("data-interval"));l.prevAnimatedTickType=r,"major"===r?(l.prevAnimatedMajorTickValue[n]=d,l.prevAnimatedMajorTickIndex[n]=o):(l.prevAnimatedMinorTickValue[n]=d,l.prevAnimatedMinorTickIndex[n]=o);var c=a.MinorTickInterval,p=c<a.MajorTickInterval?d+c:l.prevAnimatedMinorTickValue[n]+c,u=l.prevAnimatedMajorTickValue[n]+a.MajorTickInterval;"major"===(r=p<u?"minor":"major")&&a.MajorTickCount!==a.MinorTickCount&&0!==o&&"minor"===l.prevAnimatedTickType&&(o=l.prevAnimatedMajorTickIndex[n]),"minor"===r&&a.MajorTickCount!==a.MinorTickCount&&0!==o&&"major"===l.prevAnimatedTickType&&(o=l.prevAnimatedMinorTickIndex[n]),o="minor"===r&&(a.MajorTickCount===a.MinorTickCount||d===l.prevAnimatedMajorTickValue[n])?o:o+1,e="minor"===r?document.getElementById(l.element.id+"_Axis_Minor_TickLine_"+n+"_"+o):document.getElementById(l.element.id+"_Axis_Major_TickLine_"+n+"_"+o),t="minor"===r?null:document.getElementById(l.element.id+"_Axis_"+n+"_Label_"+o),"major"!==r&&0!=o||!h.IsAxisLabelVisible||l.labelElementAnimation(document.getElementById(l.element.id+"_Axis_"+n+"_Label_"+o),a,n),l.tickElementAnimation(e,t,i,n,s,o,r,a),"major"===r&&o===a.MajorTickCount-1&&l.axes.length-1===n&&l.rangePointerAnimation(s,n)}else h.IsMajorTickVisible?(r="major",o+=1,e=document.getElementById(l.element.id+"_Axis_Major_TickLine_"+n+"_"+o),t=document.getElementById(l.element.id+"_Axis_"+n+"_Label_"+o),l.tickElementAnimation(e,t,i,n,s,o,r,a),"major"!==r&&0!==o||!h.IsAxisLabelVisible||l.labelElementAnimation(document.getElementById(l.element.id+"_Axis_"+n+"_Label_"+o),a,n),"major"===r&&o===a.MajorTickCount-1&&l.axes.length-1===n&&l.rangePointerAnimation(s,n)):h.IsMinorTickVisible?(r="minor",o+=1,e=document.getElementById(l.element.id+"_Axis_Minor_TickLine_"+n+"_"+o),t=document.getElementById(l.element.id+"_Axis_"+n+"_Label_"+o),l.tickElementAnimation(e,t,i,n,s,o,r,a),"minor"!==r&&0!==o||!h.IsAxisLabelVisible||l.labelElementAnimation(document.getElementById(l.element.id+"_Axis_"+n+"_Label_"+o),a,n),"minor"===r&&o===a.MinorTickCount-1&&l.axes.length-1===n&&l.rangePointerAnimation(s,n)):h.IsAxisLabelVisible?l.elementLabelAnimation(document.getElementById(l.element.id+"_Axis_"+n+"_Label_0"),o,n,a,s):h.IsRangeVisible?l.rangePointerAnimation(s,n):h.IsPointerVisible?l.pointerAnimate(s,n):h.IsAnnotationVisible&&l.annotationAnimationProcess()}})}},e.prototype.rangeElementAnimation=function(e,t,i){var n=this,s=0;new sf.base.Animation({}).animate(e,{duration:this.axes[i].IsRangeVisible?this.loadingAnimationDuration[i]:0,progress:function(t){t.timeStamp>t.delay&&(s=(t.timeStamp-t.delay)/t.duration,e.style.opacity=1*s)},end:function(){n.axes.length-1!==i||n.isResize||n.pointerAnimate(t,i)}})},e.prototype.getCirclePath=function(e,t,i,n){return"M "+e.x+" "+e.y+" A "+i+" "+i+" 0 "+n+" 1 "+t.x+" "+t.y},e.prototype.animationAxisProgress=function(e,t,i,n,s){if(this.isResize)s.setAttribute("fill","transparent"),s.setAttribute("stroke-width",i.pointerWidth),this.isPropertyChange&&s.setAttribute("d",e.AxisLinePath);else{var o;if(o=-(t=i.start<i.end||Math.round(i.startAngle)===Math.round(i.endAngle)?i.isClockWise||i.start===i.end?i.endAngle-i.startAngle:i.endAngle-i.startAngle-360:i.isClockWise?i.endAngle-i.startAngle-360:i.endAngle-i.startAngle)*Math.cos(n.timeStamp/i.duration*(Math.PI/2))+t+i.startAngle,i.isClockWise){var r=this.getCompletePathArc({x:i.midPointX,y:i.midPointY},i.minimumAngle,o+1e-4,i.radius,i.innerRadius,!1);s.setAttribute("d",r)}else s.setAttribute("d",this.getCompletePathArc({x:i.midPointX,y:i.midPointY},o,i.minimumAngle+1e-4,i.radius,i.innerRadius,!1))}},e}();return{initialize:function(t,i,n,s){new e(t.id,t,i,n).render();var o={height:0,width:0,isIE:!1,isDevice:!1};if(s){var r=this.getContainerSize(t.id,n);o.height=r.height,o.width=r.width}return o.isIE=sf.base.Browser.isIE,o.isDevice=sf.base.Browser.isDevice,o},getContainerSize:function(e,t){var i=document.getElementById(e),n=i.clientWidth;return{height:i.clientHeight,width:n}},pointerLoadingAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(i&&i.element){i.allowLoadingAnimation=!1;for(var n=JSON.parse(t.pointerAnimation),s=0;s<n.length;s++)i.pointerAnimationProcess(n[s])}},axisLoadingAnimation:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);if(o&&o.element){o.allowLoadingAnimation=s;var r=JSON.parse(t.axis),a=JSON.parse(i.pointerAnimation),l=JSON.parse(i.axisAnimation);o.loadingAnimationProcess(r,l,a,n)}},setPointerDragStatus:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enablePointerDrag=t)},setRangeDragStatus:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableRangeDrag=t)},setLegendToggle:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.legendToggleVisibility=t)},stopAnimationProcess:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.isResize=t,i.isPropertyChange=!0)},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()}}}()},"./modules/sf-colorpicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ColorPicker=function(){"use strict";var e=function(){function e(e,t,i,n){this.dataId=e,this.element=t,this.dotnetRef=i,this.inline=n,window.sfBlazor.setCompInstance(this),n&&(this.addScrollEvents(!0),this.setPaletteWidth(this.element.querySelector(".e-container"),!1))}return e.prototype.getOffset=function(e){var t=e.querySelector(".e-hsv-container");if(!t)return{IsDevice:sf.base.Browser.isDevice};var i=t.getBoundingClientRect(),n=t.querySelector(".e-hsv-color"),s=t.querySelector(".e-handler");return s&&s.focus(),{Left:i.left,Top:i.top,Width:i.width,Height:i.height,Right:i.right,ClientLeft:n.offsetLeft,ClientTop:n.offsetTop,ClientWidth:n.offsetWidth,ClientHeight:n.offsetHeight,IsDevice:sf.base.Browser.isDevice}},e.prototype.setOffset=function(e,t){var i=this.getOffset(e);t&&!sf.base.Browser.isDevice&&(this.setZIndex(this.element,t,".e-split-colorpicker"),this.setZIndex(this.element,t,".e-dropdown-btn")),i&&this.dotnetRef.invokeMethodAsync("SetOffset",i)},e.prototype.setZIndex=function(e,t,i){var n=e.querySelector(i);n&&(n.style.zIndex=t+1+"")},e.prototype.removeZIndex=function(){var e=this.element.querySelector(".e-split-colorpicker"),t=this.element.querySelector(".e-dropdown-btn");e&&(e.style.zIndex=""),t&&(t.style.zIndex="")},e.prototype.setPaletteWidth=function(e,t,i){if(sf.base.Browser.isDevice&&!sf.base.isNullOrUndefined(i)){var n=e.querySelector(".e-colorpicker.e-modal");n&&(n.style.zIndex=i-1+"",document.body.insertBefore(n,e.parentElement),n.style.display="")}if(e.querySelector(".e-hsv-container"))e.style.width="";else{var s=parseInt(getComputedStyle(e).borderBottomWidth,10);e.style.width=e.children[0].offsetWidth+s+s+"px";var o=e.querySelector(".e-selected-value");o&&(o.style.width="100%",(o=e.querySelector(".e-switch-ctrl-btn"))&&(o.style.width="100%"))}if(t){var r=window.sfBlazor.getCompInstance(this.dataId);r.element.querySelector(".sf-colorpicker")&&sf.base.Browser.isDevice&&(r=window.sfBlazor.getCompInstance(r.element.parentElement.getAttribute("dataid")))&&r.setPosition(-1===r.element.id.indexOf("imageEditor"))}},e.prototype.scrollHandler=function(e){this.element.parentElement?this.setOffset(this.element):sf.base.EventHandler.remove(e.target,"scroll",this.scrollHandler)},e.prototype.addScrollEvents=function(e){for(var t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++){var n=i[t];e?sf.base.EventHandler.add(n,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(n,"scroll",this.scrollHandler)}e?sf.base.EventHandler.add(this.element,"keydown",this.paletteKeyDown,this):sf.base.EventHandler.remove(this.element,"keydown",this.paletteKeyDown)},e.prototype.focusIn=function(e,t){if(t){var i=e.querySelector(".e-container");i&&(i.classList.contains("e-color-palette")?this.setFocus(".e-palette"):this.setFocus(".e-handler"))}else this.setFocus(".e-split-colorpicker")},e.prototype.setFocus=function(e){var t=this.element.querySelector(e);if(this.element&&this.element.parentElement){var i=window.sfBlazor.getCompInstance(this.element.parentElement.getAttribute("dataid"));i&&i.element.classList.contains("e-dropdown-btn")&&(t=i.element)}t&&t.focus()},e.prototype.paletteKeyDown=function(e,t){var i=e.target;if(i.classList.contains("e-palette")||i.classList.contains("e-tile")){var n=void 0,s=void 0,o=void 0;i.classList.contains("e-tile")&&"SPAN"===i.tagName&&(i=i.offsetParent.querySelector(".e-palette"));var r=[].slice.call(sf.base.selectAll(".e-tile",i)),a=r.filter((function(e){return e.classList.contains("e-selected")})).pop(),l=i.parentElement;switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),o=(n=a?r[this.tilePosition(r,a,t?-1:1)]:r[t?r.length-1:0]).getAttribute("aria-label"),this.keySelectionChanges(n,l,o);break;case 37:e.preventDefault(),o=(n=a?r[this.tilePosition(r,a,t?1:-1)]:r[t?0:r.length-1]).getAttribute("aria-label"),this.keySelectionChanges(n,l,o);break;case 38:e.preventDefault(),o=(n=r[s=a?this.tilePosition(r,a,-10):0]?r[s]:r[s-10]).getAttribute("aria-label"),this.keySelectionChanges(n,l,o);break;case 40:e.preventDefault(),r[s=a?this.tilePosition(r,a,10):r.length-1]?n=r[s]:(s%=r.length,n=r[s+=r[r.length-1].parentElement.childElementCount]),o=n.getAttribute("aria-label"),this.keySelectionChanges(n,l,o);break;case 13:if(e.preventDefault(),a){a.getAttribute("aria-label");this.dotnetRef.invokeMethodAsync("Close"),this.dotnetRef.invokeMethodAsync("Focus")}}}},e.prototype.tilePosition=function(e,t,i){var n=(e=Array.prototype.slice.call(e)).length,s=10-e[n-1].parentElement.childElementCount,o=e.indexOf(t);return(o+=i)<0?o+=n+s:o%=n+s,o},e.prototype.keySelectionChanges=function(e,t,i){this.removeTileSelection(t),this.addTileSelection(e),this.dotnetRef.invokeMethodAsync("Click",i)},e.prototype.removeTileSelection=function(e){[].slice.call(sf.base.selectAll(".e-selected",e.children[0])).forEach((function(e){e.classList.remove("e-selected"),e.setAttribute("aria-selected","false")}))},e.prototype.addTileSelection=function(e){e.classList.add("e-selected"),e.setAttribute("aria-selected","true")},e}();return{initialize:function(t,i,n,s){return sf.base.isNullOrUndefined(i)?null:(new e(t,i,n,s),window.sfBlazor.getCompInstance(t).getOffset(i))},getOffset:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:(i.setPaletteWidth(t,!0),i.getOffset(t))},focusIn:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.focusIn(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.addScrollEvents(!1)}}}()},"./modules/sf-contextmenu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ContextMenu=function(){"use strict";function e(t,i,n,s){void 0===s&&(s=0);var o=t.children[i];return s===t.childElementCount?-1:((o.classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=n?i===t.childElementCount-1?0:i+1:0===i?t.childElementCount-1:i-1,s++),((o=t.children[i]).classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=e(t,i,n)),i)}var t="e-menu-parent",i="CloseMenuAsync",n="mousedown touchstart",s=function(){function s(e,t,i,n,s,o,r,a){this.dataId=e,this.element=t,this.target=i,this.filter=n,this.showOn=s,this.closeOn=o,this.dotnetRef=a,this.enableScrolling=r,window.sfBlazor.setCompInstance(this),this.addContextMenuEvent(),this.addEventListener()}return s.prototype.addContextMenuEvent=function(e){var t;if(void 0===e&&(e=!0),this.target){var i=sf.base.selectAll(this.target);if(i.length){for(var n=0,s=i.length;n<s;n++)if(t=i[n],e)sf.base.Browser.isIos?new sf.base.Touch(t,{tapHold:this.touchHandler.bind(this)}):sf.base.EventHandler.add(t,this.showOn,this.cmenuHandler,this);else if(sf.base.Browser.isIos){var o=sf.base.getInstance(t,sf.base.Touch);o&&o.destroy()}else sf.base.EventHandler.remove(t,this.showOn,this.cmenuHandler);if(sf.base.isNullOrUndefined(this.targetElement)&&(this.targetElement=t),e){sf.base.EventHandler.add(this.targetElement,"scroll",this.scrollHandler,this);for(var r=0,a=sf.popups.getScrollableParent(this.targetElement);r<a.length;r++){var l=a[r];sf.base.EventHandler.add(l,"scroll",this.scrollHandler,this)}}else{var h=void 0;this.targetElement.parentElement?(sf.base.EventHandler.remove(this.targetElement,"scroll",this.scrollHandler),h=sf.popups.getScrollableParent(this.targetElement)):h=sf.popups.getScrollableParent(t);for(var d=0,c=h;d<c.length;d++){var p=c[d];sf.base.EventHandler.remove(p,"scroll",this.scrollHandler)}this.targetElement=null}}}},s.prototype.scrollHandler=function(){if(sf.base.select("."+t,this.element)&&(this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1),this.enableScrolling)){var e=this;setTimeout((function(){e.destroyScroll()}),100)}},s.prototype.vscrollHandler=function(){var e=this.element.querySelector(".e-menu-parent");null!=e&&e.classList.contains("e-transparent")&&e.classList.remove("e-transparent")},s.prototype.touchHandler=function(e){this.cmenuHandler(e.originalEvent)},s.prototype.keyDownHandler=function(i){var n=i.target.classList;(n.contains("e-menu-item")||n.contains(t))&&i.preventDefault(),function(t,i,n,s){if(9===n&&s&&(n=39),40===n||38===n){var o=void 0,r=void 0,a=void 0;i.classList.contains("e-menu-parent")?((a=(r=i).querySelector(".e-menu-item.e-focused"))?(o=Array.prototype.indexOf.call(r.children,a),o=40===n?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1):o=0,o=e(r,o,40===n)):i.classList.contains("e-menu-item")&&(a=(r=i.parentElement).querySelector(".e-menu-item.e-focused"),o=Array.prototype.indexOf.call(r.children,a||i),o=e(r,o=40===n?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1,40===n)),r&&-1!==o&&r.children[o].focus()}else if(((t.classList.contains("e-rtl")?39===n:37===n)||27===n||39===n&&!i.classList.contains("e-menu-caret-icon")&&s||13===n&&sf.base.closest(i,".e-menu-container"))&&(i.classList.contains("e-ul")||i.classList.contains("e-menu-item")&&!i.parentElement.classList.contains("e-contextmenu"))){var l=void 0;s&&(l=sf.base.select(s));r=i.classList.contains("e-ul")?i:i.parentElement;var h=sf.base.closest(r,".e-menu-vscroll"),d=void 0,c=h?h.previousElementSibling:r.previousElementSibling;if(!l||c&&13!==n){var p=sf.base.closest(r,".e-hamburger");d=p?sf.base.select(".e-menu-item.e-selected",p):sf.base.select(".e-menu-item.e-selected",c)}else d=sf.base.select(".e-menu-item.e-selected",l),(h=sf.base.select(".e-menu-vscroll",t))&&l.blazor__instance.destroyScroll("none");d&&d.focus()}}(this.element,i.target,i.keyCode,this.menuId)},s.prototype.cmenuHandler=function(e){if(this.cmTarget=e.target,this.filter){for(var t=!1,i=this.filter.split(" "),s=0,o=i.length;s<o;s++)if(sf.base.closest(e.target,i[s])){t=!0;break}if(!t)return}e.preventDefault(),e.stopPropagation();var r=e.changedTouches?e.changedTouches[0].clientX:e.clientX,a=e.changedTouches?e.changedTouches[0].clientY:e.clientY;if("mouseover"===this.showOn){var l=this.cmTarget.getBoundingClientRect();l.right>r&&r>l.right-5&&(r-=10),l.bottom>a&&a>l.bottom-5&&(a-=10)}this.closeOn!==n&&(sf.base.EventHandler.remove(e.target,this.showOn,this.cmenuHandler),"mouseleave"===this.closeOn?sf.base.EventHandler.add(e.target,this.closeOn,this.mouseLeaveHandler,this):sf.base.EventHandler.add(document,this.closeOn,this.delegateMouseDownHandler,this)),this.dotnetRef.invokeMethodAsync("OpenContextMenuAsync",Math.ceil(r),Math.ceil(a),this.cmTarget.id)},s.prototype.mouseLeaveHandler=function(e,t){var n=this.cmTarget.getBoundingClientRect(),s=n.top<e.clientY&&n.bottom-3>e.clientY;if(!(n.left<e.clientX&&n.right>e.clientX)||!s||t){if(this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1),this.enableScrolling){var o=this;setTimeout((function(){o.destroyScroll()}),100)}sf.base.EventHandler.remove(this.cmTarget,this.closeOn,this.mouseLeaveHandler),sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this)}},s.prototype.clickHandler=function(e){if(e&&(sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this),"mouseleave"===this.closeOn?sf.base.EventHandler.remove(this.cmTarget,this.closeOn,this.mouseLeaveHandler):sf.base.EventHandler.remove(document,this.closeOn,this.delegateMouseDownHandler)),this.enableScrolling){var t=this;setTimeout((function(){t.destroyScroll(null,!0)}),100)}},s.prototype.contextMenuPosition=function(e,t,i,n,s,o){var r=this.hideMenu(!0);if(r){this.subMenuOpen=!1,this.setBlankIconStyle(r,i);var a=r.getBoundingClientRect(),l=this.getMenuWidth(r,a.width,i);if(n&&sf.base.Browser.isDevice)return r.style.width=Math.ceil(l)+"px",void(r.style.visibility="");if(s){if(t+a.height>document.documentElement.clientHeight){var h=document.documentElement.clientHeight-a.height-20;h>document.documentElement.clientTop&&(t=h)}if(e+l>document.documentElement.clientWidth){var d=document.documentElement.clientWidth-l-20;d>document.documentElement.clientLeft&&(e=d)}}var c=(r=this.updateScroll(o,r)).classList.contains("e-menu-parent")?r:sf.base.select(".e-menu-parent",r);this.element.style.top=Math.ceil(t+1)+pageYOffset+"px",this.element.style.left=Math.ceil(e+1)+pageXOffset+"px",r.style.width=Math.ceil(l)+"px",this.element.style.zIndex=sf.popups.getZindexPartial(this.element).toString(),r.style.visibility="",c.style.visibility="",r.focus()}},s.prototype.setBlankIconStyle=function(e,t){var i=[].slice.call(e.getElementsByClassName("e-blankicon")),n=t?{padding:"paddingRight",cssSelector:"padding-right",margin:"marginLeft"}:{padding:"paddingLeft",cssSelector:"padding-left",margin:"marginRight"};if([].slice.call(e.querySelectorAll('.e-menu-item[style*="'+n.cssSelector+'"]:not(.e-blankicon)')).forEach((function(e){e.style[n.padding]=""})),i.length){var s=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),o=s.querySelector(".e-menu-icon");if(o){var r=getComputedStyle(o),a=parseInt(r.fontSize,10);parseInt(r.width,10)&&parseInt(r.width,10)>a&&(a=parseInt(r.width,10));var l=a+parseInt(r[n.margin],10)+parseInt(getComputedStyle(s)[n.padding],10)+"px";i.forEach((function(e){e.style[n.padding]=l}))}}},s.prototype.getMenuWidth=function(e,t,i){var n=e.getElementsByClassName("e-caret")[0];return n&&(t+=parseInt(getComputedStyle(n)[i?"marginRight":"marginLeft"],10)),t<120?120:t},s.prototype.addEventListener=function(){this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),this.delegateMouseOverHandler=this.mouseOverHandler.bind(this),this.closeOn===n&&sf.base.EventHandler.add(document,n,this.delegateMouseDownHandler,this),sf.base.EventHandler.add(document,"mouseover",this.delegateMouseOverHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this)},s.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,n,this.delegateMouseDownHandler),sf.base.EventHandler.remove(document,"mouseover",this.delegateMouseOverHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},s.prototype.mouseDownHandler=function(e){var s=e.target;if("DIV"!==s.tagName&&"SPAN"!==s.tagName||!(s.className.indexOf("scroll")>-1||s.className.indexOf("arrow")>-1))if(document.getElementById(this.element.id)){if(!sf.base.closest(e.target,"#"+this.element.id)&&(sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(e.target,this.menuId))&&sf.base.select("."+t,this.element)){if(sf.base.closest(sf.base.select("."+t,this.element),".e-dropdown-popup")||this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1),this.enableScrolling){var o=this;setTimeout((function(){o.destroyScroll()}),100)}this.closeOn!==n&&(sf.base.EventHandler.remove(document,this.closeOn,this.delegateMouseDownHandler),sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this))}}else this.removeEventListener()},s.prototype.isHavingChild=function(e){return e&&"LI"===e.tagName&&e.className.indexOf("e-menu-item")<0&&(e=e.closest(".e-menu-item")),!!(e&&"LI"===e.tagName&&e.className.indexOf("e-menu-item")>-1&&e.className.indexOf("e-menu-caret-icon")>-1)},s.prototype.mouseOverHandler=function(e){var n=e.target;if("DIV"!==n.tagName&&"SPAN"!==n.tagName||!(n.className.indexOf("scroll")>-1||n.className.indexOf("arrow")>-1))if(document.getElementById(this.element.id)){var s=[].slice.call(sf.base.selectAll("."+t,this.element));if(s.length){var o=sf.base.closest(n,".e-scroll-nav");if(this.enableScrolling&&!this.isHavingChild(n)){var r=this;setTimeout((function(){for(var e=[].slice.call(sf.base.selectAll(".e-menu-vscroll",this.element)),t=0;t<e.length;t++)n&&"LI"===n.tagName&&n.className.indexOf("e-menu-item")<0&&(n=n.closest(".e-menu-item")),n&&n.parentElement!=e[t].querySelectorAll(".e-menu-parent")[0]&&t==e.length-1&&r.destroyScroll(e[t])}),100)}if(this.subMenuOpen&&(s.length>1||!sf.base.isNullOrUndefined(this.menuId)&&!o)){if(!sf.base.closest(n,"#"+this.element.id)&&(sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(n,this.menuId))||o){var a=1;if(!sf.base.isNullOrUndefined(this.menuId)&&(a=0,o&&(a=s.indexOf(sf.base.select("."+t,o.parentElement))+1)===s.length))return;if(this.dotnetRef.invokeMethodAsync(i,a,!1,!0,!1),this.enableScrolling){var l=this;setTimeout((function(){for(var e=a;e<s.length;e++)l.destroyScroll(s[e])}),100)}"mouseleave"===this.closeOn&&(this.mouseLeaveHandler(e),sf.base.EventHandler.remove(this.menuTarget,this.closeOn,this.menuMouseLeave)),sf.base.isNullOrUndefined(this.menuId)||sf.base.closest(n,".e-scroll-nav")||this.destroyMenuScroll(null)}sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(n,"#"+this.element.id)&&!sf.base.closest(n,this.menuId)||!sf.base.closest(n,".e-menu-item")||sf.base.closest(n,".e-selected")||this.destroyMenuScroll(sf.base.closest(n,"."+t))}else"mouseleave"===this.closeOn&&n.classList.contains("e-menu-item")&&(this.menuTarget=n.parentElement,sf.base.EventHandler.add(this.menuTarget,this.closeOn,this.menuMouseLeave,this));if(!this.openAsMenu){var h=document.activeElement;if(!sf.base.closest(h,"#"+this.element.id)&&s.length&&"BODY"==h.tagName){var d=this.getLastMenu();d&&d.focus()}}}}else this.removeEventListener()},s.prototype.menuMouseLeave=function(e){var t=this.menuTarget.getBoundingClientRect(),i=t.top<e.clientY&&t.bottom>e.clientY;t.left<e.clientX&&t.right>e.clientX&&i||(this.mouseLeaveHandler(e,!0),sf.base.EventHandler.remove(this.menuTarget,this.closeOn,this.menuMouseLeave))},s.prototype.destroyMenuScroll=function(e){if(sf.base.select(".e-menu-vscroll",this.element)){var t=window.sfBlazor.getCompInstance(this.dataId);sf.base.isNullOrUndefined(t)||t.destroyScroll("none",e)}},s.prototype.hideMenu=function(e){var i;if(e){if(!(i=sf.base.select("."+t,this.element))||sf.base.isNullOrUndefined(this.element.parentElement))return null;this.element.parentElement!==document.body&&document.body.appendChild(this.element)}else{var n=sf.base.selectAll("."+t,this.element);if(n.length<2)return null;i=n[n.length-1]}return i.style.width="",i.style.visibility="hidden",i.classList.remove("e-transparent"),i},s.prototype.subMenuPosition=function(e,i,n,s,o,r,a){if(e){var l=sf.base.selectAll("."+t,this.element),h=l[l.length-2].querySelector(".e-menu-item.e-selected").getBoundingClientRect(),d=this.element.getBoundingClientRect(),c=e.classList.contains(t)?e:sf.base.select("."+t,e);this.setBlankIconStyle(c,i);var p,u,f=c.getBoundingClientRect(),g=this.getMenuWidth(c,f.width,i);i?(u=parseInt(getComputedStyle(c).borderWidth,10),p=h.left-g-d.left):p="mouseleave"==this.closeOn?h.right-d.left-10:h.right-d.left;var m=h.top-d.top;if(i)h.left-u-g<document.documentElement.clientLeft&&h.right+g<document.documentElement.clientWidth&&(p=h.right-d.left);else if(h.right+g>document.documentElement.clientWidth){var v=h.left-g;v>document.documentElement.clientLeft&&(p=v-d.left,"mouseleave"==this.closeOn&&(p=v-d.left+10))}var b=o||f.height;if(h.top+b>document.documentElement.clientHeight){var y=document.documentElement.clientHeight-b-20;y>document.documentElement.clientTop&&(m=y-d.top)}r&&(e=this.updateScroll(o,e)).className.indexOf("scroll")>-1&&(c.style.left="0px",c.style.top="0px"),this.subMenuOpen=!n,e.style.left=Math.ceil(p)+"px",e.style.top=Math.ceil(m)+"px",e.style.width=Math.ceil(g)+"px",c.style.visibility="";var C=c.querySelector(".e-menu-item.e-focused");C?C.focus():a&&c.focus(),s&&(this.openAsMenu=!0)}},s.prototype.updateScroll=function(e,t){if(this.enableScrolling){this.destroyScroll(t),e>0&&t&&(t=sf.navigations.addScrolling(sf.base.createElement,this.element,t,"vscroll",!1,e));var i=this.element.querySelector(".e-vscroll-bar");i&&sf.base.EventHandler.add(i,"scroll",this.vscrollHandler,this)}return t},s.prototype.destroyScroll=function(e,t){sf.base.selectAll(".e-menu-vscroll",this.element).forEach((function(i){(t&&!i.querySelector("ul")||!t)&&sf.navigations.destroyScroll(sf.base.getInstance(i,sf.navigations.VScroll),i,e)}))},s.prototype.getLastMenu=function(){var e=sf.base.selectAll("."+t,this.element);return e.length?e[e.length-1]:null},s.prototype.onPropertyChanged=function(e,t){switch(e){case"Target":this.addContextMenuEvent(!1),this.target=t,this.addContextMenuEvent();break;case"Filter":this.filter=t;break;case"ShowOn":this.addContextMenuEvent(!1),this.showOn=t,this.addContextMenuEvent()}},s.prototype.destroy=function(e){this.removeEventListener(),this.addContextMenuEvent(!1),e&&e.parentElement&&e.previousElementSibling!==this.element&&e.parentElement.insertBefore(this.element,e),e&&e.parentElement||!this.element.parentElement||this.element.parentElement!==document.body||document.body.removeChild(this.element)},s.prototype.updateProperty=function(e,t){t&&(this.menuId="#"+t.id),this.subMenuOpen=!e},s}();return{initialize:function(e,t,i,n,o,r,a,l){sf.base.isNullOrUndefined(t)||new s(e,t,i,n,o,r,a,l)},contextMenuPosition:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(a)||a.contextMenuPosition(t,i,n,s,o,r)},subMenuPosition:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)){var r=o.hideMenu();o.subMenuPosition(r,t,i,n,s,!0)}},onPropertyChanged:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.onPropertyChanged(t,i)},click:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.clickHandler(t)},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.destroy(t)}}}()},"./modules/sf-dashboard-layout.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DashboardLayout=function(){"use strict";var e=function(){function e(e,t,i){this.cellAspectRatio=1,this.mOffX=0,this.mOffY=0,this.maxTop=9999,this.maxRows=100,this.mouseX=0,this.mouseY=0,this.minTop=0,this.minLeft=0,this.allowPushing=!0,this.allowResizing=!1,this.panelElements=[],this.renderedElement=[],this.allowDragging=!1,this.isRenderComplete=!1,this.allowFloating=!1,this.overlapElement=[],this.panelsSizeY=0,this.shouldRestrict=!1,this.overlapElementClone=[],this.addPanelCalled=!1,this.rows=0,this.cellSpacing=[],this.resizeCalled=!1,this.movePanelCalled=!1,this.isResizing=!1,this.resizeTimeCount=0,this.isChanged=!1,this.isDragged=!1,this.isRefreshCalled=!1,this.changedId=[],this.panelMove=!1,this.element=t,this.dataId=e,window.sfBlazor.setCompInstance(this),this.dotnetRef=i}return e.prototype.preRender=function(e){this.dragCollection=[],this.renderedElement=[],this.overlapSubElementClone=[],this.panels=[],this.sortedArray=[],this.allItems=[],this.oldRowCol={},this.cellSpacing=[],this.checkCollision=[],this.cloneObject={},this.maxColumnValue=this.columns,this.mainElement=null,e&&this.getProperty(e),this.isMediaQuery=this.checkMediaQuery(),this.calculateCellSizeValue()},e.prototype.initialize=function(e){this.preRender(e),sf.base.isNullOrUndefined(this.panels)&&(this.panels=[]);for(var t=0;t<this.element.querySelectorAll(".e-panel").length;t++)this.panelElements.push(this.element.querySelectorAll(".e-panel")[t]);this.panelsInitialModel=this.cloneModels(this.panels),this.renderDashBoardCells(this.panels),!this.allowDragging||this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches||this.enableDraggingContent(this.panelElements),this.checkColumnValue=this.maxColumnValue,this.isRenderComplete=!0,this.bindEvents();var i=this.calculateCellSize(),n=this.contentHeight();return JSON.stringify({parentOffset:i,enableMediaQuery:this.isMediaQuery,panelHeaderModel:n})},e.prototype.clearPanelElements=function(){this.panelElements=[]},e.prototype.calculateCellSize=function(){return this.cellSizeValue=[],this.cellSizeValue[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSizeValue},e.prototype.checkMediaQuery=function(){return this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches},e.prototype.getProperty=function(e){this.mediaQuery=e.MediaQuery,this.allowDragging=e.AllowDragging,this.columns=e.Columns,this.allowFloating=e.AllowFloating,this.rows=e.MaxRow+1,this.cellSpacing=e.CellSpacing,this.cellAspectRatio=e.CellAspectRatio,this.allowResizing=e.AllowResizing,this.panels=e.Panels,this.draggableHandle=e.DraggableHandle},e.prototype.movePanel=function(e,t,i){this.panelMove=!0,this.movePanelCalled=!0,this.panelsInitialModel=this.cloneModels(this.panels);var n=this.getCellInstance(e),s=document.getElementById(e),o=this.getCellInstance(s.id);this.mainElement=s,this.startRow=this.dragRow=o.row,this.startCol=this.dragColumn=o.col,this.updatePanelPosition(o.id,i,t),this.updateOldRowColumn(),this.updatePanelLayout(s,n),this.updatePanels(),this.updateCloneArrayObject(),this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.movePanelCalled=!1,this.panelMove||this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)},e.prototype.removePanel=function(e){this.panelsSizeY=0;for(var t=this.renderedElement.length-1;t>=0;t--)if(this.renderedElement[t].id===e){this.renderedElement.splice(t,1);break}for(t=this.panelElements.length-1;t>=0;t--)this.panelElements[t].id===e&&this.panelElements.splice(t,1),this.panels[t].id===e&&(this.panels.splice(t,1),this.updateOldRowColumn(),this.sortedPanel());this.updatePanels(),this.updateCloneArrayObject(),this.panelsInitialModel=this.cloneModels(this.panels)},e.prototype.renderDashBoardCells=function(e){if(this.element.querySelectorAll(".e-panel").length>0||this.panels.length>0){this.updateOldRowColumn();for(var t=0;t<this.panels.length;t++){if(this.columns<this.panels[t].col||this.columns<this.panels[t].col+this.panels[t].sizeX){var i=this.columns-this.panels[t].sizeX;this.updatePanelPosition(this.panels[t].id,i<0?0:i,this.panels[t].row)}this.renderedElement.push(this.panelElements[t]);var n=this.renderCell(e[t]);this.updatePanelLayout(n,this.panels[t])}this.updatePanels(),this.updateCloneArrayObject();var s=this.checkForChanges();s.length>0&&this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",s)}},e.prototype.resizePanel=function(e,t,i){var n=this.getCellInstance(e);this.resizeCalled=!0;var s=document.getElementById(e);this.updatePanelSize(n.id,t,i),this.mainElement=s,this.updatePanelLayout(s,n),this.updatePanels(),this.resizeCalled=!1,this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)},e.prototype.removeAll=function(){this.removeAllCalled=!0;for(var e=0;e<this.panelElements.length;e++)this.panelElements.splice(e,1);for(e=this.renderedElement.length-1;e>=0;e--)this.renderedElement.splice(e,1);this.rows=0,this.sortedPanel(),this.sortedArray=[],this.overlapElementClone=[],this.overlapElement=[],this.overlapSubElementClone=[],this.panelElements=[],this.oldRowCol={},this.cloneObject={},this.panels=[],this.updateCloneArrayObject(),this.removeAllCalled=!1},e.prototype.onPropertyChange=function(e){if(e.AllowDragging===this.allowDragging&&e.DraggableHandle==this.draggableHandle||(this.allowDragging=e.AllowDragging,this.draggableHandle=e.DraggableHandle,this.checkDragging(this.dragCollection)),e.AllowResizing!==this.allowResizing&&(this.allowResizing=e.AllowResizing),this.allowResizing&&this.resizeEvents(),e.CellSpacing!==this.cellSpacing&&(this.cellSpacing=e.CellSpacing,this.calculateCellSizeValue()),e.AllowFloating!==this.allowFloating)this.allowFloating=e.AllowFloating,this.moveItemsUpwards(),this.updatePanels(),this.updateOldRowColumn(),this.updateCloneArrayObject();else if(e.Columns!==this.columns){this.columns=e.Columns,this.calculateCellSizeValue();for(var t=0;t<this.panels.length;t++){if(this.columns<this.panels[t].col||this.columns<this.panels[t].col+this.panels[t].sizeX){var i=this.columns-this.panels[t].sizeX;this.updatePanelPosition(this.panels[t].id,i<0?0:i,this.panels[t].row)}this.updatePanelLayout(document.getElementById(this.panels[t].id),this.panels[t])}this.renderDashBoardCells(this.panels),this.updatePanels(),this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)}this.getProperty(e)},e.prototype.updatePanelLayout=function(e,t){var i=this;this.collisionChecker={};var n=[],s=[];if((n=this.mainElement&&this.isRenderComplete?this.resetLayout(t):this.collisions(t.row,t.col,t.sizeX,t.sizeY,e)).length>0)if(n=this.sortCollisionItems(n),n=this.updatedModels(n,t,e),!sf.base.isNullOrUndefined(this.startRow)&&this.checkForSwapping(n,e))this.swapItems(n,e,t);else for(var o=0;o<n.length;o++){var r=this.getCellInstance(n[o].id);if(this.checkingElement=n[o],this.spacedRowValue=null,this.spacedColumnValue=null,this.adjustmentAvailable(r.row,r.col,r.sizeY,r.sizeX,e)&&!sf.base.isNullOrUndefined(this.spacedColumnValue)){if(this.updatePanelPosition(r.id,this.spacedColumnValue,this.spacedRowValue),this.oldRowCol[n[o].id]={row:this.spacedRowValue,col:this.spacedColumnValue},n[o].setAttribute("data-row",this.spacedRowValue.toString()),n[o].setAttribute("data-col",this.spacedColumnValue.toString()),this.topAdjustable&&this.allowFloating&&(this.updatePanels(),this.updateCloneArrayObject()),this.spacedRowValue=null,o<n.length)continue}else s.push(n[o])}s.length>0&&(s.forEach((function(e){-1===i.overlapElement.indexOf(e)&&i.overlapElement.push(e)})),this.overlapElement&&-1!==this.overlapElement.indexOf(e)&&this.overlapElement.splice(this.overlapElement.indexOf(e),1),s.length>0&&(this.updateRowColumn(t.row,this.overlapElement,e),this.checkForCompletePushing())),this.isSubValue||this.sortedPanel()},e.prototype.addPanel=function(e){this.panelsSizeY=0,e.minSizeX||(e.minSizeX=1),e.minSizeY||(e.minSizeY=1),this.panels.push(e);var t=this.renderCell(e);if(this.panelElements.push(t),this.renderedElement.push(t),this.panelsInitialModel=this.cloneModels(this.panels),this.oldRowCol[e.id]={row:e.row,col:e.col},this.cloneObject[e.id]={row:e.row,col:e.col},this.updateOldRowColumn(),this.element.insertAdjacentElement("afterbegin",t),this.addPanelCalled=!0,this.checkMediaQuery()||(this.mainElement=t,this.checkCollision||(this.checkCollision=[]),this.updatePanelLayout(t,e)),this.addPanelCalled=!1,this.allowDragging&&this.mediaQuery&&!this.checkMediaQuery()&&this.enableDraggingContent([document.getElementById(e.id)]),this.allowFloating&&(this.mainElement=null,this.moveItemsUpwards()),this.updateOldRowColumn(),this.sortedPanel(),this.updateCloneArrayObject(),this.allowResizing)for(var i=0;i<t.querySelectorAll(".e-resize").length;i++){var n="msie"===sf.base.Browser.info.name?"mousedown pointerdown":"mousedown";sf.base.EventHandler.add(t.querySelectorAll(".e-resize")[i],n,this.downResizeHandler,this),"msie"!==sf.base.Browser.info.name&&sf.base.EventHandler.add(t.querySelectorAll(".e-resize")[i],"touchstart",this.touchDownResizeHandler,this)}this.dotnetRef.invokeMethodAsync("UpdatePanelContentHeight",this.panels,this.contentHeight())},e.prototype.checkForSwapping=function(e,t){if(!this.mainElement||0===e.length)return!1;var i,n=parseInt(e[0].getAttribute("data-row"),10);if(this.startRow<n?i=1:this.startRow>n&&(i=0),!this.swapAvailability(e,t))return!1;for(var s=!1,o=0;o<e.length;o++)if(e.length>=1&&this.cloneObject[this.mainElement.id].row===this.oldRowCol[this.mainElement.id].row)return!1;for(var r=0===i?this.getCellInstance(this.mainElement.id).row+this.getCellInstance(this.mainElement.id).sizeY:this.startRow,a=0;a<e.length;a++){var l=this.getCellInstance(e[a].id),h=this.getCellInstance(t.id),d=[];if(1===l.sizeY&&-1===d.indexOf(e[a]))d.push(e[a]);else if(l.sizeY>1&&-1===d.indexOf(e[a]))if(1===i&&h.row===this.cloneObject[l.id].row+l.sizeY-1)d.push(e[a]);else{if(0!==i||h.row!==this.cloneObject[l.id].row)return!1;d.push(e[a])}if(l.sizeY<=h.sizeY&&-1===d.indexOf(e[a])&&d.push(e[a]),d.push(this.mainElement),this.collisions(r,l.col,l.sizeX,l.sizeY,d).length>0)return s=!1;a===e.length-1&&(s=!0)}return s},e.prototype.swapAvailability=function(e,t){for(var i=!0,n=this.getCellInstance(t.id),s=0;s<e.length;s++)for(var o=this.getCellInstance(e[s].id),r=1;r<n.sizeY;r++){var a=[];if(a.push(t),a.push(e[s]),this.collisions(n.row+r,o.col,o.sizeX,o.sizeY,a).length>0)return i=!1,!1}return i},e.prototype.swapItems=function(e,t,i){var n,s=this,o=[];o.push(t);var r=this.getCellInstance(e[0].id).row;this.startRow<r?n=1:this.startRow>r&&(n=0);var a=0===n?r+i.sizeY:this.startRow;if(!this.movePanelCalled){var l=this.getCellInstance(e[0].id);this.updatePanelPosition(i.id,i.col,0===n?r:a+l.sizeY)}for(var h=0;h<e.length;h++)o.push(e[h]),this.updatePanelPosition(e[h].id,this.getCellInstance(e[h].id).col,a);this.updatePanelPosition(t.id,this.getCellInstance(t.id).col,i.row),this.setPanelPosition(this.shadowEle,i.row,i.col);for(var d=0;d<this.panels.length;d++)this.oldRowCol[this.panels[d].id]={row:this.panels[d].row,col:this.panels[d].col};this.startRow=this.dragRow=i.row,this.updateOldRowColumn(),o.forEach((function(e){s.cloneObject[e.id]=s.oldRowCol[e.id];for(var t=s.getCellInstance(e.id),i=0;i<s.sortedArray.length;i++)if(s.sortedArray[i])for(var n=0;n<s.sortedArray[i].length;n++)s.sortedArray[i][n]===e&&(s.sortedArray[i][n]=void 0);s.sortedArray[t.row]||(s.sortedArray[t.row]=[]),s.sortedArray[t.row][t.col]=e,s.cloneArray=s.sortedArray}))},e.prototype.resetLayout=function(e){var t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement);if(!this.mainElement||this.addPanelCalled||this.resizeCalled||this.movePanelCalled)return t;if(this.mainElement&&this.oldRowCol!==this.cloneObject)for(var i=0;i<this.panels.length;i++){var n=document.getElementById(this.panels[i].id);if(n!==this.mainElement){var s=this.cloneObject[n.id].row,o=this.cloneObject[n.id].col;this.updatePanelPosition(n.id,o,s),n.setAttribute("data-col",o.toString()),n.setAttribute("data-row",s.toString()),this.updateOldRowColumn()}}return this.sortedArray=this.cloneArray,t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement),this.sortedPanel(),this.updateOldRowColumn(),this.checkCollision&&this.checkCollision.length>0&&-1===t.indexOf(this.checkCollision[0])&&this.cloneObject[this.checkCollision[0].id].row===e.row&&t.push(this.checkCollision[0]),t},e.prototype.sortCollisionItems=function(e){for(var t,i=[],n=function(n){t=[],e.forEach((function(e){e&&e.getAttribute("data-row")===n.toString()&&t.push(e)}));for(var o=function(e){t.forEach((function(t){t&&t.getAttribute("data-col")===e.toString()&&i.push(t)}))},r=s.columns-1;r>=0;r--)o(r)},s=this,o=this.rows-1;o>=0;o--)n(o);return i},e.prototype.updatedModels=function(e,t,i){var n=this,s=[];return this.mainElement||this.sortedPanel(),e.forEach((function(o){n.checkingElement=o;var r=n.getCellInstance(o.id),a=!n.adjustmentAvailable(r.row,r.col,r.sizeY,r.sizeX,i);if(r.sizeX>1&&a)for(var l=r.row;l<t.row+t.sizeY;l++){n.collisions(l,r.col,r.sizeX,r.sizeY,o).forEach((function(t){e.indexOf(t)>=0&&-1===s.indexOf(t)&&s.push(t)}))}})),s.forEach((function(t){s.indexOf(t)>=0&&e.splice(e.indexOf(t),1)})),e},e.prototype.checkForCompletePushing=function(){for(var e=0;e<this.panels.length;e++)if(this.collisionChecker[this.panels[e].id]&&null!==this.collisionChecker[this.panels[e].id]){this.overlapElement=[this.collisionChecker[this.panels[e].id].ele];var t=this.panels[e].id;this.updateRowColumn(this.collisionChecker[t].row,this.overlapElement,this.collisionChecker[t].srcEle)}},e.prototype.updateRowColumn=function(e,t,i){if(i){var n=this.getCellInstance(i.id),s=n.sizeY,o=n.row;this.overlapElementClone=(this.overlapElement&&this.shouldRestrict,this.overlapElement);for(var r=0;r<this.overlapElementClone.length;r++){if(0===this.overlapElementClone.length)return;for(var a=0;a<this.overlapElementClone.length;a++)this.collisionChecker[this.overlapElementClone[a].id]={ele:this.overlapElementClone[a],row:e,srcEle:i};var l=o+s,h=this.getCellInstance(this.overlapElementClone[r].id),d=h.sizeY,c=h.col,p=h.sizeX,u=void 0,f=void 0;if(-1===this.overlapSubElementClone.indexOf(i)&&this.overlapSubElementClone.push(i),-1===this.overlapSubElementClone.indexOf(this.overlapElementClone[r])&&this.overlapSubElementClone.push(this.overlapElementClone[r]),d>1||p>1){var g=this.getCellInstance(this.overlapElementClone[r].id);u=g.col;for(var m=document.getElementById(g.id),v=g.row;v<o+s;v++){this.isSubValue=!0;var b=this.getCellInstance(g.id);m.setAttribute("data-row",(o+s).toString()),this.updatePanelPosition(b.id,b.col,g.row+1),this.updateCollisionChecked(m),this.oldRowCol[m.id]={row:g.row,col:u};var y=this.getCellInstance(m.id),C=y.row,w=y.col,M=y.sizeX,S=y.sizeY,x=[];x.push(m),x.push(i),f=this.collisions(C,w,M,S,x),this.mainElement&&-1!==f.indexOf(this.mainElement)&&f.splice(f.indexOf(this.mainElement),1),this.collisionPanel(f,w,C,m)}this.isSubValue=!1}else{this.addPanelCalled&&(this.addPanelCalled=!1);var N=[];N.push(this.overlapElementClone[r]),N.push(i),f=this.collisions(l,c,p,d,N),this.mainElement&&-1!==f.indexOf(this.mainElement)&&f.splice(f.indexOf(this.mainElement),1);var O=this.getCellInstance(this.overlapElementClone[r].id);u=O.col,this.updatePanelPosition(O.id,u,l),this.updateCollisionChecked(this.overlapElementClone[r]),this.oldRowCol[this.overlapElementClone[r].id]={row:l,col:u},this.collisionPanel(f,u,l,this.overlapElementClone[r])}}}},e.prototype.updateCollisionChecked=function(e){for(var t=0;t<Object.keys(this.collisionChecker).length;t++)this.collisionChecker[e.id]=null},e.prototype.collisionPanel=function(e,t,i,n){var s=this;if(e.length>0){this.overlapElement=[],this.shouldRestrict=!0,e.forEach((function(e){s.overlapElement.push(e)}));for(var o=this.getCellInstance(n.id).row,r=0;r<this.overlapElement.length;r++)this.updateRowColumn(o,this.overlapElement,n);this.shouldRestrict=!1}else{if(this.addPanelCalled||this.sortedPanel(),this.overlapSubElementClone.length>0)for(var a=0;a<this.overlapSubElementClone.length;a++){var l=this.getCellInstance(this.overlapSubElementClone[a].id),h=l.row,d=l.col,c=l.sizeX,p=l.sizeY,u=this.collisions(h,d,c,p,this.overlapSubElementClone);this.mainElement&&-1!==u.indexOf(this.mainElement)&&u.splice(u.indexOf(this.mainElement),1),u.forEach((function(e){s.overlapElement.push(e)})),u.length>0&&this.updateRowColumn(h,this.overlapElement,this.overlapSubElementClone[a])}this.overlapSubElementClone=[]}},e.prototype.collisions=function(e,t,i,n,s){var o,r=[];i&&n||(i=n=1),!s||s instanceof Array||(s=[s]);for(var a=0;a<n;++a)for(var l=0;l<i;++l)!(o=this.getPanel(e+a,t+l,s))||s&&-1!==s.indexOf(document.getElementById(o.id))||-1!==r.indexOf(document.getElementById(o.id))||r.push(document.getElementById(o.id));return r},e.prototype.getPanel=function(e,t,i){!i||i instanceof Array||(i=[i]);for(var n=1;e>-1;){for(var s=1,o=t;o>-1;){var r=this.sortedArray[e];if(r){var a=r[o];if(!sf.base.isNullOrUndefined(a)){var l=this.getCellInstance(a.id);if(a&&(!i||-1===i.indexOf(a))&&l.sizeX>=s&&l.sizeY>=n)return a}}++s,--o}--e,++n}return null},e.prototype.renderCell=function(e){return document.getElementById(e.id)},e.prototype.sortedPanel=function(){this.sortedArray=[];for(var e=0,t=this.renderedElement.length;e<t;++e)this.sortItem(this.renderedElement[e])},e.prototype.updatePanels=function(){this.moveItemsUpwards(),this.updateOldRowColumn(),this.sortedPanel()},e.prototype.setRootHeight=function(e){this.element.style.height=e+"px"},e.prototype.sortItem=function(e,t,i){this.overlapElement=[];var n=this.getCellInstance(e.id),s=n.col,o=n.row;if(this.sortedArray[o]||(this.sortedArray[o]=[]),this.sortedArray[o][s]=e,void 0!==e&&void 0!==t&&void 0!==i){if(void 0!==this.oldRowCol[e.id]&&null!==this.oldRowCol[e.id].row&&void 0!==this.oldRowCol[e.id].col){var r=this.sortedArray[this.oldRowCol[e.id].row];sf.base.isNullOrUndefined(r)||this.oldRowCol[e.id]&&r[this.oldRowCol[e.id].col]===e&&(delete r[this.oldRowCol[e.id].col],this.updateOldRowColumn(),this.sortedPanel())}this.oldRowCol[e.id].row=t,this.oldRowCol[e.id].row=i,this.sortedArray[o]||(this.sortedArray[o]=[]),this.sortedArray[o][s]=e,-1===this.allItems.indexOf(e)&&this.allItems.push(e);var a=this.getCellInstance(e.id);this.updatePanelPosition(a.id,i,t),this.sortedPanel()}},e.prototype.updateOldRowColumn=function(){this.oldRowCol={};for(var e=0;e<this.panels.length;e++){var t=this.panels[e].id;if(document.getElementById(t)){var i=this.panels[e].row,n=this.panels[e].col;this.oldRowCol[this.panels[e].id]={row:i,col:n}}}},e.prototype.getCellInstance=function(e){for(var t,i=0;i<this.panels.length;i++)if(this.panels[i].id===e){t=this.panels[i];break}return t},e.prototype.getRowElements=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},e.prototype.adjustmentAvailable=function(e,t,i,n,s){this.leftAdjustable=void 0,this.rightAdjustable=void 0;var o,r=!1,a=[],l=[];this.topAdjustable=void 0;var h=this.getCellInstance(s.id),d=h.sizeX,c=h.col;if(-1===(l=this.getRowElements(this.collisions(e,0,this.columns,i,[]))).indexOf(s)&&l.push(s),(o=this.leftWardsSpaceChecking(l,t,s)).length>0?(this.leftAdjustable=this.isLeftAdjustable(o,s,e,t,n,i),this.spacedColumnValue!==c-this.getCellInstance(this.checkingElement.id).sizeX&&(this.leftAdjustable=!1),this.leftAdjustable?this.rightAdjustable=!1:(this.leftAdjustable=!1,a=this.rightWardsSpaceChecking(l,t,s),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,s,e,t,n,i),this.spacedColumnValue!==d+c&&(this.rightAdjustable=!1))):(a=this.rightWardsSpaceChecking(l,t,s),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,s,e,t,n,i),this.spacedColumnValue!==d+c&&(this.rightAdjustable=!1),this.rightAdjustable&&(this.leftAdjustable=!1)),!this.rightAdjustable&&!this.leftAdjustable&&e>0){var p=this.getCellInstance(s.id).row,u=!1;this.startRow!==p&&(u=!0);for(var f=e;f>=0;f--){var g=this.getCellInstance(s.id).sizeY>1&&u?this.checkingElement:s;f!==p&&f===p-i&&0===this.collisions(f,t,n,i,g).length&&(u=!1,this.topAdjustable=!0,this.spacedRowValue=sf.base.isNullOrUndefined(this.spacedRowValue)?f:this.spacedRowValue,this.spacedColumnValue=t)}}return(this.rightAdjustable||this.leftAdjustable||this.topAdjustable)&&(r=!0,sf.base.isNullOrUndefined(this.spacedRowValue)&&(this.spacedRowValue=e)),r},e.prototype.updatePanelPosition=function(e,t,i){if(this.panels.length>0)for(var n=0;n<this.panels.length;n++)this.panels[n].id===e&&(sf.base.isNullOrUndefined(t)||(this.panels[n].col=t,this.panels[n].column=t),sf.base.isNullOrUndefined(i)||(this.panels[n].row=i));this.isResizing||this.isDragged||this.isRefreshCalled||this.updatePanelProps(e)},e.prototype.rightWardsSpaceChecking=function(e,t,i){var n=this,s=[],o=[];if(e.forEach((function(e){var i=n.getCellInstance(e.id),o=i.col,r=i.sizeX;if(t<n.columns&&o>=t)if(r>1)for(var a=o;a<o+r;a++)s.push(a);else s.push(o)})),s.length>0)for(var r=t+1;r<=this.columns-1;r++)-1===s.indexOf(r)&&r!==t&&-1===o.indexOf(r)&&o.push(r);var a=this.getOccupiedColumns(i);return a.forEach((function(e){e>t&&-1!==o.indexOf(e)&&o.splice(o.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e>n.getCellInstance(i.id).col&&-1===a.indexOf(e)&&-1===o.indexOf(e)&&o.push(e)})),o=o.sort((function(e,t){return e-t}))},e.prototype.isRightAdjustable=function(e,t,i,n,s,o){var r;if(1===s&&1===o&&e.length>0)this.spacedColumnValue=e[0],r=!0;else if(s>1&&1===o)r=this.isXSpacingAvailable(e,s);else if(o>1)if(1===s){var a=void 0;if(e.length>=1&&(a=!0),a)for(var l=0;l<e.length;l++){for(var h=this.collisions(i,e[l],s,o,this.checkingElement),d=0;d<h.length;d++){this.getCellInstance(t.id).col!==e[l]&&h.splice(h.indexOf(h[d]),1)}if(0===h.length)return r=!0,this.spacedColumnValue=e[l],r;r=!1}}else r=this.replacable(e,s,i,o,t);return r},e.prototype.isXSpacingAvailable=function(e,t){for(var i=!1,n=[],s=0;s<e.length;s++)if(e[s+1]-e[s]==1||e[s+1]-e[s]==-1){if(n.push(e[s]),2===t&&n.push(e[s+1]),s===e.length-2&&(n.push(e[s+1]),n.length>t&&n.splice(-1)),n.length===t)return i=!0,this.spacedColumnValue=n.sort((function(e,t){return e-t}))[0],this.spacedColumnValue<0&&(this.spacedColumnValue=1),i}else n=[];return i},e.prototype.leftWardsSpaceChecking=function(e,t,i){var n=this,s=[],o=[];if(e.forEach((function(e){var i=n.getCellInstance(e.id),s=i.col,r=i.sizeX;if(t<=n.columns&&s<=t)if(r>1)for(var a=s;a<s+r;a++)o.push(a);else o.push(s)})),o.length>0)for(var r=0;r<=t;r++)-1===o.indexOf(r)&&r!==t&&-1===s.indexOf(r)&&s.push(r);var a=this.getOccupiedColumns(i);return a.forEach((function(e){e<t&&-1!==s.indexOf(e)&&s.splice(s.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e<n.getCellInstance(i.id).col&&-1===a.indexOf(e)&&-1===s.indexOf(e)&&s.push(e)})),s=(s=s.sort((function(e,t){return e-t}))).reverse()},e.prototype.isLeftAdjustable=function(e,t,i,n,s,o){var r;if(1===s&&1===o&&e.length>0)this.spacedColumnValue=e[0],r=!0;else if(s>1&&1===o)r=this.isXSpacingAvailable(e,s);else if(o>1)if(1===s){var a=void 0;if(e.length>=1&&(a=!0),a)for(var l=0;l<e.length;l++){if(0===this.collisions(i,e[l],s,o,this.checkingElement).length)return this.spacedColumnValue=e[l],r=!0;r=!1}}else r=this.replacable(e,s,i,o,t);return r},e.prototype.replacable=function(e,t,i,n,s){for(var o,r=[],a=0;a<e.length;a++){if(this.isXSpacingAvailable(e,t)){var l=[];if(l.push(this.checkingElement),l.push(s),0===r.length)return o=!0,this.spacedColumnValue=this.spacedColumnValue,o;o=!1}}return o},e.prototype.getOccupiedColumns=function(e){for(var t=[],i=this.getCellInstance(e.id),n=i.sizeX,s=i.col,o=s;o<s+n&&o<=this.columns;o++)t.push(o);return t},e.prototype.moveItemsUpwards=function(){if(this.allowFloating)for(var e=0,t=this.sortedArray.length;e<t;++e){var i=this.sortedArray[e];if(i)for(var n=0,s=i.length;n<s;++n){var o=i[n];o&&this.moveItemUpwards(o)}}},e.prototype.moveItemUpwards=function(e){if(this.allowFloating&&e!==this.mainElement){var t=this.getCellInstance(e.id).col,i=parseInt(e.getAttribute("data-sizeY"),10),n=parseInt(e.getAttribute("data-sizeX"),10),s=null,o=null,r=parseInt(e.getAttribute("data-row"),10)-1;if(!this.panelMove){var a=this.getCellInstance(e.id);r+1!=a.row&&(r=a.row)}for(;r>-1;){if(0!==this.collisions(r,t,n,i,e).length)break;s=r,o=t,--r}null!==s&&this.sortItem(e,s,o)}},e.prototype.updatePanelProps=function(e){if(this.isRenderComplete){var t=this.checkForChanges();if(this.panelsInitialModel=this.cloneModels(this.panels),t.length>0){for(var i=0;i<t.length;i++)this.changedId&&-1===this.changedId.indexOf(t[i].id)&&this.changedId.push(t[i].id);this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",t)}}},e.prototype.enableDraggingContent=function(e){for(var t=this,i=0;i<e.length;i++){var n=[".e-resize",".e-drag-restrict"],s=e[i];this.dragobj=new sf.base.Draggable(s,{preventDefault:!1,clone:!1,dragArea:this.element,isDragScroll:!0,handle:this.draggableHandle?this.draggableHandle:".e-panel",abort:n,dragStart:this.onDraggingStart.bind(this),dragStop:function(e){var i=t.getCellInstance(t.mainElement.id);t.allowPushing&&t.collisions(i.row,i.col,i.sizeX,i.sizeY,t.mainElement).length>0?(t.setHolderPosition(e),t.updatePanelPosition(i.id,i.col,i.row),t.updatePanelLayout(t.mainElement,i)):t.updatePanelPosition(i.id,i.col,i.row),t.mainElement=null;var n=t.getPanelBase(e);t.shadowEle&&sf.base.detach(t.shadowEle),sf.base.removeClass([t.element],["e-prevent"]),sf.base.removeClass([e.element],["e-dragging"]),t.shadowEle=null,e.element.classList.remove("e-dragging");var s=t.getRowColumnDragValues(e)[0],o=t.getRowColumnDragValues(e)[1],r=t.getCellInstance(e.element.id);if(t.allowPushing&&0===t.collisions(s,o,r.sizeX,r.sizeY,document.getElementById(n.id)).length)t.oldRowCol[e.element.id].row=s,t.oldRowCol[e.element.id].col=o,t.updatePanelPosition(e.element.id,o,s),t.sortedPanel();else{var a=t.getCellInstance(e.element.id);t.updatePanelPosition(a.id,a.col,a.row),t.sortedPanel()}var l=t.getCellInstance(e.element.id);t.setPanelPosition(e.element,l.row,l.col),t.updatePanels(),t.updateCloneArrayObject(),t.updatePanelProps(i.id),t.isDragged=!1,t.dragStopEventArgs={event:e.event,element:e.element},t.dotnetRef.invokeMethodAsync("UpdateMaximumRow",e.element.id,t.changedId),t.isChanged=!1,t.changedId=[],t.resizeEvents(),t.updateDragArea()},drag:function(e){t.draggedEventArgs={event:e.event,element:e.element,target:sf.base.closest(e.target,".e-panel")},t.onDragStart(e)}}),-1===this.dragCollection.indexOf(this.dragobj)&&this.dragCollection.push(this.dragobj)}},e.prototype.getPanelBase=function(e){for(var t,i=0;i<this.panelElements.length;i++)this.panelElements[i].id===(e.element&&e.element.id||e)&&(t=this.panelElements[i]);return t},e.prototype.updateCloneArrayObject=function(){this.cloneArray=this.sortedArray,this.cloneObject=JSON.parse(JSON.stringify(this.oldRowCol))},e.prototype.getRowColumnDragValues=function(e){var t=parseFloat(e.element.style.top),i=parseFloat(e.element.style.left);return[Math.round(t/(this.getCellSize()[1]+this.cellSpacing[1])),Math.round(i/(this.getCellSize()[0]+ +this.cellSpacing[0]))]},e.prototype.onDragStart=function(e){var t,i,n,s=n=this.getRowColumnDragValues(e)[1],o=this.getRowColumnDragValues(e)[0];if(!(s<0||o<0)){var r=this.getCellInstance(e.element.id);if(this.dotnetRef.invokeMethodAsync("SetDragPanelHeight",r.row,r.sizeY,1),this.updateDragArea(),this.allowPushing&&(this.updatePanelPosition(r.id,s,o),t=this.oldRowCol[e.element.id].col,i=this.oldRowCol[e.element.id].row,this.oldRowCol[e.element.id]={row:o,col:s},this.updateOldRowColumn(),(this.dragColumn!==t||this.dragRow!==i)&&(e.element.setAttribute("data-row",o.toString()),e.element.setAttribute("data-col",s.toString()),this.setHolderPosition(e),this.dragRow=i,this.dragColumn=t,this.startCol!==t&&(this.startRow=i),this.startRow!==i&&(this.startCol=t),this.allowPushing))){this.mainElement=e.element;var a=r;this.checkCollision=this.collisions(a.row,a.col,a.sizeX,a.sizeY,e.element),r.col>=this.checkColumnValue&&(this.checkCollision=[]),this.updatePanelLayout(e.element,r),this.moveItemsUpwards(),this.updatePanelProps(r.id)}this.oldRowCol[e.element.id].row===o&&this.oldRowCol[e.element.id].col===s||(this.updatePanelPosition(r.id,s,o),this.updatePanelProps(r.id)),this.startCol!==n&&(this.startCol=this.dragColumn=t,this.moveItemsUpwards()),this.allowPushing||this.setHolderPosition(e)}},e.prototype.bindEvents=function(){this.refreshListener=this.refresh.bind(this,!0),sf.base.EventHandler.add(window,"resize",this.refreshListener),this.resizeEvents()},e.prototype.refresh=function(e){if(this.dotnetRef&&document.getElementById(this.element.id)){if(this.panelsSizeY=0,this.updateDragArea(),this.isRefreshCalled=!0,this.isMediaQuery=this.checkMediaQuery(),!this.checkMediaQuery()){if(this.element.classList.contains("e-responsive")){sf.base.removeClass([this.element],["e-responsive"]);for(var t=0;t<this.element.querySelectorAll(".e-panel").length;t++){var i=this.element.querySelectorAll(".e-panel")[t];if(0!=this.panels.length){var n=this.getCellInstance(i.id),s=n.row,o=n.col;this.updatePanelPosition(n.id,o,s)}}}this.element.classList.add("e-responsive"),this.calculateCellSizeValue()}this.dotnetRef.invokeMethodAsync("CalculateSize",this.calculateCellSize(),this.isMediaQuery,e,this.contentHeight()),this.resizeEvents(),this.checkDragging(this.dragCollection),this.isRefreshCalled=!1}},e.prototype.checkDragging=function(e){for(var t=0;t<e.length;t++)e[t].destroy();!this.checkMediaQuery()&&this.allowDragging&&this.enableDraggingContent(this.panelElements)},e.prototype.resizeEvents=function(){if(this.allowResizing)for(var e=this.element.querySelectorAll(".e-panel .e-resize"),t=0;t<e.length;t++){var i="msie"===sf.base.Browser.info.name?"mousedown pointerdown":"mousedown";sf.base.EventHandler.remove(e[t],i,this.downResizeHandler),sf.base.EventHandler.add(e[t],i,this.downResizeHandler,this),"msie"!==sf.base.Browser.info.name&&(sf.base.EventHandler.remove(e[t],"touchstart",this.touchDownResizeHandler),sf.base.EventHandler.add(e[t],"touchstart",this.touchDownResizeHandler,this))}},e.prototype.touchDownResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.changedTouches[0].pageX,this.lastMouseY=e.changedTouches[0].pageY,this.isMouseMoveBound||(sf.base.EventHandler.add(document,"touchmove",this.touchMoveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(sf.base.EventHandler.add(document,"touchend",this.upResizeHandler,this),this.isMouseUpBound=!0)},e.prototype.upResizeHandler=function(e){if(!sf.base.isNullOrUndefined(this.downTarget)){this.upTarget=this.downTarget;var t=sf.base.closest(this.upTarget,".e-panel"),i=!0;if(this.isResizing=!1,t){sf.base.addClass([t],"e-panel-transition");var n="msie"===sf.base.Browser.info.name?"mousemove pointermove":"mousemove",s="msie"===sf.base.Browser.info.name?"mouseup pointerup":"mouseup";sf.base.EventHandler.remove(document,n,this.moveResizeHandler),sf.base.EventHandler.remove(document,s,this.upResizeHandler),"msie"!==sf.base.Browser.info.name&&(sf.base.EventHandler.remove(document,"touchmove",this.touchMoveResizeHandler),sf.base.EventHandler.remove(document,"touchend",this.upResizeHandler)),this.isMouseUpBound=!1,this.isMouseMoveBound=!1,this.shadowEle&&sf.base.detach(this.shadowEle),this.shadowEle=null;var o=this.getCellInstance(t.getAttribute("id")),r=o.sizeY*this.getCellSize()[1]+(o.sizeY-1)*this.cellSpacing[1],a=o.sizeX*this.getCellSize()[0]+(o.sizeX-1)*this.cellSpacing[0],l=o.col*(this.getCellSize()[0]+this.cellSpacing[0]),h=o.row*(this.getCellSize()[1]+this.cellSpacing[1]);sf.base.setStyleAttribute(t,{left:l+"px",top:h+"px",height:r+"px",width:a+"px"}),this.updatePanelPosition(o.id,o.col,o.row)}sf.base.removeClass([t],["e-dragging"]),this.isResizing=!1,this.dotnetRef.invokeMethodAsync("TriggerResizeStart",i,t.id,"ResizeStop"),this.resizeCalled=!1,this.lastMouseX=this.lastMouseY=void 0,this.mOffX=this.mOffY=0,this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.updatePanels(),this.updateCloneArrayObject(),this.changedId.length>0&&this.dotnetRef.invokeMethodAsync("TriggerChange",i,this.changedId),this.changedId=[]}},e.prototype.moveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=sf.base.closest(this.moveTarget,".e-panel");if(this.lastMouseX!==e.pageX&&this.lastMouseY!==e.pageY){this.updateResizeElement(t);var i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.pageX,this.mouseY=e.pageY;var n=this.mouseY-this.lastMouseY+this.mOffY,s=this.mouseX-this.lastMouseX+this.mOffX;this.mOffX=this.mOffY=0,this.lastMouseY=this.mouseY,this.lastMouseX=this.mouseX,this.resizingPanel(t,i,s,n)}},e.prototype.getMinWidth=function(e){return e.minSizeX*this.getCellSize()[0]},e.prototype.getMaxWidth=function(e){return e.maxSizeX*this.getCellSize()[0]},e.prototype.getMinHeight=function(e){return e.minSizeY*this.getCellSize()[1]},e.prototype.getMaxHeight=function(e){return e.maxSizeY*this.getCellSize()[1]},e.prototype.resizingPanel=function(e,t,i,n){var s=this.getCellInstance(e.id).sizeX,o=this.getCellInstance(e.id).sizeY,r=n,a=i;this.handleClass.indexOf("north")>=0&&(this.elementHeight-r<this.getMinHeight(t)?(n=this.elementHeight-this.getMinHeight(t),this.mOffY=r-n):t.maxSizeY&&this.elementHeight-r>this.getMaxHeight(t)?(n=this.elementHeight-this.getMaxHeight(t),this.mOffY=r-n):this.elementY+r<this.minTop&&(n=this.minTop-this.elementY,this.mOffY=r-n),this.elementY+=n,this.elementHeight-=n),this.handleClass.indexOf("south")>=0&&(this.elementHeight+r<this.getMinHeight(t)?(n=this.getMinHeight(t)-this.elementHeight,this.mOffY=r-n):t.maxSizeY&&this.elementHeight+r>this.getMaxHeight(t)?(n=this.getMaxHeight(t)-this.elementHeight,this.mOffY=r-n):this.elementY+this.elementHeight+r>this.maxTop&&(n=this.maxTop-this.elementY-this.elementHeight,this.mOffY=r-n),this.elementHeight+=n),this.handleClass.indexOf("west")>=0&&(this.elementWidth-a<this.getMinWidth(t)?(i=this.elementWidth-this.getMinWidth(t),this.mOffX=a-i):t.maxSizeX&&this.elementWidth-a>this.getMaxWidth(t)?(i=this.elementWidth-this.getMaxWidth(t),this.mOffX=a-i):this.elementX+a<this.minLeft&&(i=this.minLeft-this.elementX,this.mOffX=a-i),this.elementX+=i,this.elementWidth-=i),this.handleClass.indexOf("east")>=0&&(this.elementWidth+a<this.getMinWidth(t)?(i=this.getMinWidth(t)-this.elementWidth,this.mOffX=a-i):t.maxSizeX&&this.elementWidth+a>this.getMaxWidth(t)?(i=this.getMaxWidth(t)-this.elementWidth,this.mOffX=a-i):this.elementX+this.elementWidth+a>this.maxLeft&&(i=this.maxLeft-this.elementX-this.elementWidth,this.mOffX=a-i),this.elementWidth+=i),e.style.top=this.elementY+"px",e.style.left=this.elementX+"px",e.style.width=this.elementWidth+"px",e.style.height=this.elementHeight+"px";var l=this.getResizeRowColumn(t);if(l.col+l.sizeX>this.columns&&this.updatePanelSize(l.id,l.sizeX-1,null),this.shadowEle.style.top=l.row*this.getCellSize()[1]+l.row*this.cellSpacing[1]+"px",this.handleClass.indexOf("west")>=0?this.shadowEle.style.left=l.col*this.getCellSize()[0]+(l.col-1)*this.cellSpacing[0]+"px":this.shadowEle.style.left=l.col*this.getCellSize()[0]+l.col*this.cellSpacing[0]+"px",this.shadowEle.style.height=l.sizeY*(this.getCellSize()[1]+this.cellSpacing[1])+"px",this.shadowEle.style.width=l.sizeX*(this.getCellSize()[0]+this.cellSpacing[0])+"px",s!==l.sizeX||o!==l.sizeY){s=l.sizeX,o=l.sizeY;var h=this.getCellInstance(e.id);this.updatePanelSize(e.id,h.sizeX,h.sizeY),this.updatePanelPosition(e.id,h.col,h.row),this.mainElement=e,this.updatePanelLayout(e,this.getCellInstance(e.id)),this.updateOldRowColumn(),this.sortedPanel()}},e.prototype.pixelsToColumns=function(e,t){return t?Math.round(e/this.cellSize[0]):Math.round(e/(this.cellSize[0]+this.cellSpacing[0]))},e.prototype.pixelsToRows=function(e,t){return t?Math.round(e/this.cellSize[1]):Math.round(e/(this.cellSize[1]+this.cellSpacing[0]))},e.prototype.getResizeRowColumn=function(e){var t=!1,i=!1,n=e.col;-1!==["e-west","e-south-west"].indexOf(this.handleClass)&&(n=this.pixelsToColumns(this.elementX,!1),this.previousCol!==n&&(this.previousCol=n,i=!0));var s=e.row;-1!==["e-north"].indexOf(this.handleClass)&&(s=this.pixelsToRows(this.elementY,!1),this.previousRow!==s&&(this.previousRow=s,t=!0));var o=e.sizeX;-1===["e-north","e-south"].indexOf(this.handleClass)&&(("e-west"!==this.handleClass&&"e-south-west"!==this.handleClass||i)&&(o=this.pixelsToColumns(this.elementWidth-o*this.cellSpacing[1],!0)),e.sizeX===o&&(n=e.col));var r=e.sizeY;return-1===["e-east","e-west"].indexOf(this.handleClass)&&("e-north"!==this.handleClass||t)&&(r=this.pixelsToRows(this.elementHeight-r*this.cellSpacing[0],!0)),e.col+e.sizeX>this.columns&&(e.sizeX=e.sizeX-1),(s>-1&&n>-1&&o+n<=this.columns&&r+s<=this.rows&&0===this.collisions(s,n,o,r,this.getPanelBase(e.id)).length||this.allowPushing)&&(this.updatePanelSize(e.id,o,r),this.updatePanelPosition(e.id,n,s)),e},e.prototype.touchMoveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=sf.base.closest(this.moveTarget,".e-panel");if(this.lastMouseX!==e.changedTouches[0].pageX&&this.lastMouseY!==e.changedTouches[0].pageY){this.updateResizeElement(t);var i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.changedTouches[0].pageX,this.mouseY=e.changedTouches[0].pageY;var n=this.mouseX-this.lastMouseX+this.mOffX,s=this.mouseY-this.lastMouseY+this.mOffY;this.mOffX=this.mOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.resizingPanel(t,i,n,s)}},e.prototype.updateResizeElement=function(e){this.maxLeft=this.element.offsetWidth-1,this.maxTop=this.cellSize[1]*this.maxRows-1,sf.base.removeClass([e],"e-panel-transition"),sf.base.addClass([e],["e-dragging"]);for(var t=["e-east","e-west","e-north","e-south","e-south-east","e-north-east","e-north-west","e-south-west"],i=0;i<this.moveTarget.classList.length;i++)-1!==t.indexOf(this.moveTarget.classList[i])&&(this.handleClass=this.moveTarget.classList[i])},e.prototype.updateMaxTopLeft=function(e){var t=this;this.moveTarget=this.downTarget;var i=sf.base.closest(this.moveTarget,".e-panel"),n=!0;this.resizeTimeCount=setTimeout((function(){return t.resizeCall(n,i.id,"Resizing")}),100)},e.prototype.resizeCall=function(e,t,i){(this.isResizing&&this.resizeTimeCount>100||void 0===this.resizeTimeCount)&&(this.dotnetRef.invokeMethodAsync("TriggerResizeStart",e,t,i),this.resizeTimeCount=1)},e.prototype.downResizeHandler=function(e){for(var t=sf.base.closest(e.currentTarget,".e-panel"),i=0;this.panels.length>i;i++)if(this.panels[i].enabled&&this.panels[i].id===t.id){this.downHandler(e),this.lastMouseX=e.pageX,this.lastMouseY=e.pageY;var n="msie"===sf.base.Browser.info.name?"mousemove pointermove":"mousemove",s="msie"===sf.base.Browser.info.name?"mouseup pointerup":"mouseup";this.isMouseMoveBound||(sf.base.EventHandler.add(document,n,this.moveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(sf.base.EventHandler.add(document,s,this.upResizeHandler,this),this.isMouseUpBound=!0)}},e.prototype.downHandler=function(e){this.resizeCalled=!1,this.panelsInitialModel=this.cloneModels(this.panels);var t=sf.base.closest(e.currentTarget,".e-panel");this.isChanged=!0;var i=!0;this.dotnetRef.invokeMethodAsync("TriggerResizeStart",i,t.id,"ResizeStart"),this.isResizing=!0,this.downTarget=e.currentTarget,this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),sf.base.addClass([this.element],["e-prevent"]),this.element.appendChild(this.shadowEle),this.elementX=parseFloat(t.style.left),this.elementY=parseFloat(t.style.top),this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight,this.originalWidth=this.getCellInstance(t.id).sizeX,this.originalHeight=this.getCellInstance(t.id).sizeY,this.previousRow=this.getCellInstance(t.id).row,this.previousCol=this.getCellInstance(t.id).col},e.prototype.onDraggingStart=function(e){this.isDragged=!0;var t=e;this.isChanged=!0,t.bindEvents(e.element),this.panelsInitialModel=this.cloneModels(this.panels),this.mainElement=e.element;var i=this.getCellInstance(e.element.id);this.startCol=this.dragColumn=i.col;var n=this.startRow=this.dragRow=parseInt(e.element.getAttribute("data-row"),10),s=parseInt(e.element.getAttribute("data-sizeY"),10);this.dotnetRef.invokeMethodAsync("TriggerDragStart",e.element.id,n,s,s),this.rows=n+s>=this.rows?this.rows+s:this.rows,this.updateDragArea(),this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),this.shadowEle.classList.add("e-holder-transition"),sf.base.setStyleAttribute(this.shadowEle,{position:"absolute"}),sf.base.addClass([this.element],["e-prevent"]),sf.base.addClass([e.element],["e-dragging"]),this.element.appendChild(this.shadowEle),this.shadowEle=document.querySelector(".e-holder"),this.shadowEle.style.height=this.getCellInstance(e.element.id).sizeY*this.cellSize[1]+"px",this.shadowEle.style.width=this.getCellInstance(e.element.id).sizeX*this.cellSize[0]+"px";var o=this.getCellInstance(e.element.id);this.updatePanelPosition(o.id,o.col,o.row),this.setPanelPosition(this.shadowEle,o.row,o.col)},e.prototype.updatePanelSize=function(e,t,i){if(this.panels.length>0)for(var n=0;n<this.panels.length;n++)this.panels[n].id===e&&(sf.base.isNullOrUndefined(t)||(this.panels[n].sizeX=t),sf.base.isNullOrUndefined(i)||(this.panels[n].sizeY=i))},e.prototype.updateDragArea=function(){this.dragCollection.forEach((function(e){e.setDragArea()}))},e.prototype.setPanelPosition=function(e,t,i){if(e){var n=this.getCellSize()[1],s=this.getCellSize()[0],o=0===i?0:i*(s+this.cellSpacing[0]),r=0===t?0:t*(n+this.cellSpacing[1]);sf.base.setStyleAttribute(e,{left:o+"px",top:r+"px"})}},e.prototype.calculateCellSizeValue=function(){this.cellSize=[],this.checkMediaQuery()?this.cellSize[1]=this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio:(this.cellSize[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSize[0]=this.element.parentElement&&(this.element.parentElement.offsetWidth-(this.columns-1)*this.cellSpacing[0])/this.columns,this.cellSize[1]=this.cellSize[0]/this.cellAspectRatio)},e.prototype.cloneModels=function(e,t){void 0===t&&(t=[]);for(var i=0;i<e.length;i++)for(var n in t[i]||(t[i]={}),e[i])t[i][n]=e[i][n];return t},e.prototype.checkForChanges=function(){for(var e=[],t=0;t<this.panels.length;t++)this.panels[t].row===this.panelsInitialModel[t].row&&this.panels[t].col===this.panelsInitialModel[t].col&&this.panels[t].sizeX===this.panelsInitialModel[t].sizeX&&this.panels[t].sizeY===this.panelsInitialModel[t].sizeY||(e.push(this.panels[t]),this.panels[t].sizeY=this.panels[t].sizeY<this.panels[t].minSizeY?this.panels[t].minSizeY:this.panels[t].sizeY);return e},e.prototype.getCellSize=function(){return[this.cellSize[0],this.cellSize[1]]},e.prototype.destroy=function(){sf.base.EventHandler.remove(window,"resize",this.refreshListener),this.element.removeAttribute("style");for(var e=0;e<this.dragCollection.length;e++)this.dragCollection[e].destroy();this.removeAll()},e.prototype.setHolderPosition=function(e){var t=parseInt(e.element.getAttribute("data-sizeY"),10),i=parseInt(e.element.getAttribute("data-col"),10),n=parseInt(e.element.getAttribute("data-row"),10),s=parseInt(e.element.getAttribute("data-sizeX"),10),o=this.getCellSize()[0],r=this.getCellSize()[1],a=0===n?0:n*(r+this.cellSpacing[1]),l=0===i?0:i*(o+this.cellSpacing[0]),h=this.getCellSize()[1],d=this.getCellSize()[0];this.shadowEle.style.top=a+"px",this.shadowEle.style.left=l+"px",this.shadowEle.style.height=t*h+(t-1)*this.cellSpacing[1]+"px",this.shadowEle.style.width=s*d+(s-1)*this.cellSpacing[0]+"px"},e.prototype.contentHeight=function(){for(var e=[],t=0;t<this.element.querySelectorAll(".e-panel").length;t++){var i=this.element.querySelectorAll(".e-panel")[t];if(i.querySelector(".e-panel-header")){var n=window.getComputedStyle(i.querySelector(".e-panel-header")).height,s={id:i.id,height:n||"0px"};e.push(s)}}return e},e}();return{initialize:function(t,i,n,s){new e(t,i,n);var o=window.sfBlazor.getCompInstance(t);return sf.base.isNullOrUndefined(o)?null:o.initialize(s)},movePanel:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.movePanel(t,i,n)},removePanel:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.removePanel(t)},resizePanel:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.resizePanel(t,i,n)},removeAll:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeAll()},addPanel:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.rows=i,n.addPanel(t))},onPropertyChange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.onPropertyChange(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},refresh:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.refresh(!1)},updatePanelModels:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.clearPanelElements(),i.getProperty(t),i.initialize(t))},setRootHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setRootHeight(t)}}}()},"./modules/sf-datepicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DatePicker=function(){"use strict";var e="Tab",t=function(){function t(){this.mask="",this.hiddenMask="",this.validCharacters="dMyhmHts",this.isDayPart=!1,this.isMonthPart=!1,this.isYearPart=!1,this.isHourPart=!1,this.isMinutePart=!1,this.isSecondsPart=!1,this.isMilliSecondsPart=!1,this.monthCharacter="",this.periodCharacter="",this.isHiddenMask=!1,this.isComplete=!1,this.isNavigate=!1,this.navigated=!1,this.formatRegex=/E{3,4}|d{1,4}|M{1,4}|y{1,4}|H{1,2}|h{1,2}|m{1,2}|f{1,7}|FF|t{1,2}|s{1,2}|z{1,4}|'[^']*'|'[^']*'/g,this.isDeletion=!1,this.isShortYear=!1,this.isDeleteKey=!1,this.isDateZero=!1,this.isMonthZero=!1,this.isYearZero=!1,this.dayTypeCount=0,this.monthTypeCount=0,this.hourTypeCount=0,this.minuteTypeCount=0,this.secondTypeCount=0}return t.prototype.keydownHandler=function(t){switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":"Delete"!==t.code&&t.preventDefault(),this.isPopupOpen||this.maskKeydownHandler(t);break;case e:case"shiftTab":this.maskKeydownHandler(t)}},t.prototype.clearHandler=function(){this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.updateValue()},t.prototype.updateValue=function(){this.monthCharacter=this.periodCharacter="";var e=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e},t.prototype.zeroCheck=function(e,t,i){var n=i;return e&&!t&&(n="0"),n},t.prototype.roundOff=function(e,t){for(var i=e.toString(),n=t-i.length,s="",o=0;o<n;o++)s+="0";return s+i},t.prototype.formatCheck=function(){var e=this;return function(t){var i,n,s=e.dayAbbreviatedName,o=Object.keys(s),r=e.dayName,a=Object.keys(r),l=e.monthAbbreviatedName,h=e.monthName,d=e.dayPeriod,c=Object.keys(d);switch(t){case"d":i=e.isDayPart?e.maskDateValue.getDate().toString():e.maskPlaceholderDictionary.Day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2==e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"dd":i=e.isDayPart?e.roundOff(e.maskDateValue.getDate(),2):e.maskPlaceholderDictionary.Day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2==e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"ddd":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?s[o[e.maskDateValue.getDay()]].toString():e.maskPlaceholderDictionary.DayOfWeek.toString();break;case"dddd":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?r[a[e.maskDateValue.getDay()]].toString():e.maskPlaceholderDictionary.DayOfWeek.toString();break;case"M":i=e.isMonthPart?(e.maskDateValue.getMonth()+1).toString():e.maskPlaceholderDictionary.Month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2==e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MM":i=e.isMonthPart?e.roundOff(e.maskDateValue.getMonth()+1,2):e.maskPlaceholderDictionary.Month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2==e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MMM":i=e.isMonthPart?l[e.maskDateValue.getMonth()]:e.maskPlaceholderDictionary.Month.toString();break;case"MMMM":i=e.isMonthPart?h[e.maskDateValue.getMonth()]:e.maskPlaceholderDictionary.Month.toString();break;case"yy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear()%100,2):e.maskPlaceholderDictionary.Year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i),e.isYearPart&&(e.isNavigate=e.isShortYear=2===(e.maskDateValue.getFullYear()%100).toString().length);break;case"y":case"yyyy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear(),4):e.maskPlaceholderDictionary.Year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i);break;case"h":i=e.isHourPart?(e.maskDateValue.getHours()%12||12).toString():e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"hh":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours()%12||12,2):e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"H":i=e.isHourPart?e.maskDateValue.getHours().toString():e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"HH":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours(),2):e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"m":i=e.isMinutePart?e.maskDateValue.getMinutes().toString():e.maskPlaceholderDictionary.Minute.toString(),2==e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"mm":i=e.isMinutePart?e.roundOff(e.maskDateValue.getMinutes(),2):e.maskPlaceholderDictionary.Minute.toString(),2==e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"s":i=e.isSecondsPart?e.maskDateValue.getSeconds().toString():e.maskPlaceholderDictionary.Second.toString(),2==e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"ss":i=e.isSecondsPart?e.roundOff(e.maskDateValue.getSeconds(),2):e.maskPlaceholderDictionary.Second.toString(),2==e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"f":i=Math.floor(e.maskDateValue.getMilliseconds()/100).toString();break;case"FF":case"ff":n=e.maskDateValue.getMilliseconds(),e.maskDateValue.getMilliseconds()>99&&(n=Math.floor(e.maskDateValue.getMilliseconds()/10)),i=e.roundOff(n,2);break;case"fff":i=e.roundOff(e.maskDateValue.getMilliseconds(),3);break;case"ffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),4);break;case"fffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),5);break;case"ffffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),6);break;case"t":case"tt":i=e.maskDateValue.getHours()<12?d[c[0]]:d[c[1]];break;case"z":case"zz":i=e.offset.substring(0,3);break;case"zzz":case"zzzz":i=e.offset}if("ddd"===t&&(t="EEE"),"dddd"===t&&(t="EEEE"),i=void 0!==i?i:t.slice(1,t.length-1),e.isHiddenMask){for(var p="",u=0;u<i.length;u++)p+=t[0];return p}return i}},t.prototype.differenceCheck=function(){var e=this.element,t=e.selectionStart,i=e.value,n=this.previousValue.substring(0,t+this.previousValue.length-i.length),s=i.substring(0,t),o=!sf.base.isNullOrUndefined(s)&&s.length>0?new Date(+this.maskDateValue):new Date(this.options.valueString),r=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();if(0===n.indexOf(s)&&(0===s.length||this.previousHiddenMask[s.length-1]!==this.previousHiddenMask[s.length])){for(var a=s.length;a<n.length;a++)""!==this.previousHiddenMask[a]&&this.validCharacters.indexOf(this.previousHiddenMask[a])>=0&&(this.isDeletion=this.handleDeletion(this.previousHiddenMask[a],!1));if(this.isDeletion)return}switch(this.previousHiddenMask[t-1]){case"d":var l=(this.isDayPart&&o.getDate().toString().length<2&&!this.isPersist()?10*o.getDate():0)+parseInt(s[t-1],10);if(this.isDateZero="0"==s[t-1],this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(l))return;for(a=0;l>r;a++)l=parseInt(l.toString().slice(1),10);if(l>=1){if(o.setDate(l),this.isNavigate=2===l.toString().length,this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),o.getMonth()!==this.maskDateValue.getMonth())return;this.isDayPart=!0,this.dayTypeCount=this.dayTypeCount+1}else this.isDayPart=!1,this.dayTypeCount=this.isDateZero?this.dayTypeCount+1:this.dayTypeCount;break;case"M":var h=void 0;if(h=o.getMonth().toString().length<2&&!this.isPersist()?(this.isMonthPart?10*(o.getMonth()+1):0)+parseInt(s[t-1],10):parseInt(s[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,this.isMonthZero="0"==s[t-1],isNaN(h)){var d=this.monthName,c=Object.keys(d);for(this.monthCharacter+=s[t-1].toLowerCase();this.monthCharacter.length>0;){a=0;for(var p=0,u=c;p<u.length;p++){u[p];if(0===d[a].toLowerCase().indexOf(this.monthCharacter))return o.setMonth(a),this.isMonthPart=!0,void(this.maskDateValue=o);a++}this.monthCharacter=this.monthCharacter.substring(1,this.monthCharacter.length)}}else{for(;h>12;){var f=h;0===(h=parseInt(h.toString().slice(1),10))&&(h=parseInt(f.toString().slice(0,1),10))}if(h>=1){if(o.setMonth(h-1),this.isNavigate=2===h.toString().length,o.getMonth()!==h-1&&(o.setDate(1),o.setMonth(h-1)),this.isDayPart){var g=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),m=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();this.previousDate.getDate()==g&&m<=g&&o.setDate(m)}this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),this.isMonthPart=!0,this.monthTypeCount=this.monthTypeCount+1}else o.setMonth(0),this.isMonthPart=!1,this.monthTypeCount=this.isMonthZero?this.monthTypeCount+1:this.monthTypeCount}break;case"y":var v=(this.isYearPart&&o.getFullYear().toString().length<4&&!this.isShortYear?10*o.getFullYear():0)+parseInt(s[t-1],10);if(this.isShortYear=!1,this.isYearZero="0"==s[t-1],isNaN(v))return;for(;v>9999;)v=parseInt(v.toString().slice(1),10);v<1?this.isYearPart=!1:(o.setFullYear(v),4===v.toString().length&&(this.isNavigate=!0),this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),this.isYearPart=!0);break;case"h":if(this.hour=(this.isHourPart&&(o.getHours()%12||12).toString().length<2&&!this.isPersist()?10*(o.getHours()%12||12):0)+parseInt(s[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(;this.hour>12;)this.hour=parseInt(this.hour.toString().slice(1),10);o.setHours(12*Math.floor(o.getHours()/12)+this.hour%12),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"H":if(this.hour=(this.isHourPart&&o.getHours().toString().length<2&&!this.isPersist()?10*o.getHours():0)+parseInt(s[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(a=0;this.hour>23;a++)this.hour=parseInt(this.hour.toString().slice(1),10);o.setHours(this.hour),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"m":var b=(this.isMinutePart&&o.getMinutes().toString().length<2&&!this.isPersist()?10*o.getMinutes():0)+parseInt(s[t-1],10);if(this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(b))return;for(a=0;b>59;a++)b=parseInt(b.toString().slice(1),10);o.setMinutes(b),this.isNavigate=2===b.toString().length,this.isMinutePart=!0,this.minuteTypeCount=this.minuteTypeCount+1;break;case"s":var y=(this.isSecondsPart&&o.getSeconds().toString().length<2&&!this.isPersist()?10*o.getSeconds():0)+parseInt(s[t-1],10);if(this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(y))return;for(a=0;y>59;a++)y=parseInt(y.toString().slice(1),10);o.setSeconds(y),this.isNavigate=2===y.toString().length,this.isSecondsPart=!0,this.secondTypeCount=this.secondTypeCount+1;break;case"t":this.periodCharacter+=s[t-1].toLowerCase();var C=this.dayPeriod,w=Object.keys(C);for(a=0;this.periodCharacter.length>0;a++)(0===C[w[0]].toLowerCase().indexOf(this.periodCharacter)&&o.getHours()>=12||0===C[w[1]].toLowerCase().indexOf(this.periodCharacter)&&o.getHours()<12)&&(o.setHours((o.getHours()+12)%24),this.maskDateValue=o),this.periodCharacter=this.periodCharacter.substring(1,this.periodCharacter.length)}this.maskDateValue=o},t.prototype.maskKeydownHandler=function(t){var i=this.element;if(this.dayTypeCount=this.monthTypeCount=this.hourTypeCount=this.minuteTypeCount=this.secondTypeCount=0,"Delete"!==t.key){if(!(t.altKey||t.ctrlKey||"ArrowLeft"!==t.key&&"ArrowRight"!==t.key&&"shiftTab"!==t.key&&t.key!==e&&"shiftTab"!==t.action&&"End"!==t.key&&"Home"!==t.key)){var n=i.selectionStart,s=i.selectionEnd,o=i.value.length;if(0==n&&s==o&&(t.key===e&&!t.shiftKey||t.key===e&&t.shiftKey)){var r=t.key===e&&t.shiftKey?s:0;i.selectionStart=i.selectionEnd=r}if("End"===t.key||"Home"===t.key){var a="End"===t.key?o:0;i.selectionStart=i.selectionEnd=a}if(("ArrowLeft"===t.key||"ArrowRight"===t.key)&&0===n&&s===o){if("ArrowLeft"===t.key)for(var l=i.selectionEnd,h=l,d=l-1;h<this.hiddenMask.length||d>=0;h++,d--){if(h<this.hiddenMask.length&&-1!==this.validCharacters.indexOf(this.hiddenMask[h]))return void this.setSelection(this.hiddenMask[h]);if(d>=0&&-1!==this.validCharacters.indexOf(this.hiddenMask[d]))return void this.setSelection(this.hiddenMask[d])}else this.validCharacterCheck();return}this.navigateSelection(!!("ArrowLeft"===t.key||t.shiftKey&&t.key===e||"End"===t.key))}if(!(t.altKey||t.ctrlKey||"ArrowUp"!==t.key&&"ArrowDown"!==t.key)){n=i.selectionStart;var c="";-1!==this.validCharacters.indexOf(this.hiddenMask[n])&&(c=this.hiddenMask[n]),this.dateAlteration("ArrowDown"===t.key);var p=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=p,i.value=p;for(h=0;h<this.hiddenMask.length;h++)if(c===this.hiddenMask[h]){n=h;break}i.selectionStart=n,this.validCharacterCheck()}}else this.isDeleteKey=!0},t.prototype.dateAlteration=function(e){var t=this.element.selectionStart,i="";if(-1!==this.validCharacters.indexOf(this.hiddenMask[t])){i=this.hiddenMask[t];var n=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());this.previousDate=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());var s=e?-1:1;switch(i){case"d":n.setDate(n.getDate()+s);break;case"M":var o=n.getMonth()+s;if(n.setDate(1),n.setMonth(o),this.isDayPart){var r=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),a=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();this.previousDate.getDate()==r&&a<=r?n.setDate(a):n.setDate(this.previousDate.getDate())}else n.setDate(this.previousDate.getDate());this.previousDate=new Date(n.getFullYear(),n.getMonth(),n.getDate());break;case"y":n.setFullYear(n.getFullYear()+s);break;case"H":case"h":n.setHours(n.getHours()+s);break;case"m":n.setMinutes(n.getMinutes()+s);break;case"s":n.setSeconds(n.getSeconds()+s);break;case"t":n.setHours((n.getHours()+12)%24)}this.maskDateValue=n.getFullYear()>0?n:this.maskDateValue,-1!==this.validCharacters.indexOf(this.hiddenMask[t])&&this.handleDeletion(this.hiddenMask[t],!0)}},t.prototype.handleDeletion=function(e,t){switch(e){case"d":this.isDayPart=t;break;case"M":this.isMonthPart=t,t||(this.maskDateValue.setMonth(0),this.monthCharacter="");break;case"y":this.isYearPart=t;break;case"H":case"h":this.isHourPart=t,t||(this.periodCharacter="");break;case"m":this.isMinutePart=t;break;case"s":this.isSecondsPart=t;break;default:return!1}return!0},t.prototype.isPersist=function(){return this.isFocused||this.navigated},t.prototype.setDynamicValue=function(){this.maskDateValue=new Date(this.options.valueString),this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!0,this.updateValue(),this.options.isBlurred||this.validCharacterCheck()},t.prototype.validCharacterCheck=function(){var e=this.element,t=e.selectionStart;if("TimePicker"!==this.componentName&&t===this.hiddenMask.length&&this.mask===e.value&&(t=0),"TimePicker"===this.componentName){if(t===this.hiddenMask.length)return void e.setSelectionRange(0,t);if(this.isPopupOpen)return void e.setSelectionRange(0,this.hiddenMask.length)}for(var i=t,n=t-1;i<this.hiddenMask.length||n>=0;i++,n--){if(i<this.hiddenMask.length&&-1!==this.validCharacters.indexOf(this.hiddenMask[i]))return void this.setSelection(this.hiddenMask[i]);if(n>=0&&-1!==this.validCharacters.indexOf(this.hiddenMask[n]))return void this.setSelection(this.hiddenMask[n])}},t.prototype.setSelection=function(e){for(var t=this.element,i=-1,n=0,s=0;s<this.hiddenMask.length;s++)this.hiddenMask[s]===e&&(n=s+1,-1===i&&(i=s));i<0&&(i=0),t.setSelectionRange(i,n)},t.prototype.maskInputHandler=function(){var e,t=this.element,i=t.selectionStart,n="";-1!==this.validCharacters.indexOf(this.hiddenMask[i])&&(n=this.hiddenMask[i]),this.differenceCheck(),e=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isDateZero=this.isMonthZero=this.isYearZero=!1,this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e,t.value=e;for(var s=0;s<this.hiddenMask.length;s++)if(n===this.hiddenMask[s]){i=s;break}if(t.selectionStart=i,this.validCharacterCheck(),(this.isNavigate||this.isDeletion)&&!this.isDeleteKey){var o=!this.isNavigate;this.isNavigate=this.isDeletion=!1,this.navigateSelection(o)}this.isDeleteKey&&(this.isDeletion=!1),this.isDeleteKey=!1},t.prototype.navigateSelection=function(e){var t=this.element,i=t.selectionStart,n=t.selectionEnd,s=e?i-1:n;for(this.navigated=!0;s<this.hiddenMask.length&&s>=0;){if(this.validCharacters.indexOf(this.hiddenMask[s])>=0){this.setSelection(this.hiddenMask[s]);break}s+=e?-1:1}},t.prototype.createMask=function(e){this.options=e;this.element;this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.dateformat=this.options.format;var t=this.dateformat.replace(this.formatRegex,this.formatCheck());return this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.mask=this.previousValue=t,this.options.value&&(this.value=this.options.value,this.navigated=this.options.navigated,this.setDynamicValue()),t=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.options.minMax&&this.validCharacterCheck(),{currentMaskFormat:this.mask,inputElementValue:t}},t.prototype.updateCurrentValue=function(e){this.element.value=e},t}(),i="e-datepicker",n=function(){function e(e,i,n,s,o){window.sfBlazor=window.sfBlazor,this.maskObj=new t,this.componentName="DatePicker",this.dataId=e,this.containerElement=i,this.element=n,this.options=o,window.sfBlazor.setCompInstance(this),this.dotNetRef=s,this.maskObj.element=this.element,this.enableMask=this.options.enableMask,this.enableMask&&(this.maskObj.dateformat=this.options.format,this.maskObj.isRendered=this.options.isRendered,this.maskObj.componentName=this.componentName,this.maskObj.offset=this.options.offset,this.maskObj.floatLabelType=this.options.floatLabelType,this.maskObj.maskPlaceholderDictionary=this.options.maskPlaceholderDictionary,this.maskObj.dayAbbreviatedName=this.options.dayAbbreviatedName,this.maskObj.dayName=this.options.dayName,this.maskObj.dayPeriod=this.options.dayPeriod,this.maskObj.monthAbbreviatedName=this.options.monthAbbreviatedName,this.maskObj.monthName=this.options.monthName,this.maskObj.maskDateValue=sf.base.isNullOrUndefined(this.options.value)?new Date:new Date(this.options.value.toString()),this.maskObj.maskDateValue.setMonth(0),this.maskObj.maskDateValue.setHours(0),this.maskObj.maskDateValue.setMinutes(0),this.maskObj.maskDateValue.setSeconds(0),this.maskObj.previousDate=new Date(this.maskObj.maskDateValue.getFullYear(),this.maskObj.maskDateValue.getMonth(),this.maskObj.maskDateValue.getDate(),this.maskObj.maskDateValue.getHours(),this.maskObj.maskDateValue.getMinutes(),this.maskObj.maskDateValue.getSeconds()),this.removeEventListener(),this.addEventListener())}return e.prototype.initialize=function(){this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs=sf.base.extend(this.defaultKeyConfigs,this.options.keyConfigs),new sf.base.KeyboardEvents(this.element,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}),this.index=this.options.showClearButton?2:1,sf.base.EventHandler.add(this.element,"blur",this.inputBlurHandler,this)},e.prototype.bindInputEvent=function(){this.enableMask?sf.base.EventHandler.add(this.element,"input",this.inputHandler,this):sf.base.EventHandler.remove(this.element,"input",this.inputHandler)},e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keydownHandler,this),sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),this.bindInputEvent()},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.element,"mouseup",this.mouseUpHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keydownHandler),sf.base.EventHandler.remove(this.element,"focus",this.focusHandler)},e.prototype.mouseUpHandler=function(e){if(this.enableMask){var t=!this.maskObj.isNavigate;this.maskObj.navigateSelection(t),this.maskObj.element=this.element,e.preventDefault(),this.maskObj.validCharacterCheck()}},e.prototype.focusHandler=function(){if(this.enableMask){var e=this.element;this.options.value||!this.options.placeholder||this.maskObj.mask!==e.value&&""!==e.value||("Auto"===this.options.floatLabelType||"Never"===this.options.floatLabelType||this.options.placeholder)&&(this.maskObj.updateCurrentValue(this.maskObj.mask),e.selectionStart=0,e.selectionEnd=e.value.length)}},e.prototype.inputHandler=function(){this.enableMask&&(this.maskObj.element=this.element,this.maskObj.maskInputHandler())},e.prototype.keydownHandler=function(e){this.enableMask&&!this.options.readonly&&(this.maskObj.element=this.element,this.maskObj.keydownHandler(e))},e.prototype.inputKeyActionHandle=function(e){var t,i=this.element;if(this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&this.options.isDatePopup){var n=this.tableBodyElement.querySelector("tr td.e-focused-date"),s=this.tableBodyElement.querySelector("tr td.e-selected");this.tableBodyElement.focus(),t={Action:e.action,Key:e.key,Events:e,SelectDate:s?s.id:null,FocusedDate:n?n.id:null,classList:s?s.classList.toString():n?n.classList.toString():"e-cell",Id:n?n.id:s?s.id:null,TargetClassList:this.calendarElement.classList.toString()}}else t={Action:e.action,Key:e.key,Events:e};this.options.isDatePopup&&this.enableMask&&this.maskObj.isPopupOpen&&"Enter"==e.key&&(i.value=null),this.isDisposed||this.dotNetRef.invokeMethodAsync("InputKeyActionHandle",t,i.value),"select"!==e.action&&this.popupObj&&document.body.contains(this.popupObj.element)&&e.preventDefault()},e.prototype.inputBlurHandler=function(e){this.isCalendar()&&document.activeElement===this.element&&this.dotNetRef.invokeMethodAsync("HidePopup",e)},e.prototype.renderPopup=function(e,t,i,n){if(this.options=n,this.maskObj.isPopupOpen=!0,this.popupHolder=t,e){var s=document.getElementById(e.id);s&&sf.base.remove(s)}this.createCalendar(e,n),sf.base.Browser.isDevice&&(this.mobilePopupContainer=sf.base.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupContainer)),("model"===i.appendTo&&this.mobilePopupContainer?this.mobilePopupContainer:document.body).appendChild(this.popupContainer),this.popupObj.refreshPosition(this.element),n.isDatePopup||this.setScrollPosition();var o={name:"FadeIn",duration:sf.base.Browser.isDevice?0:300};if(1e3===this.options.zIndex?this.popupObj.show(new sf.base.Animation(o),this.element):this.popupObj.show(new sf.base.Animation(o),null),this.setOverlayIndex(this.mobilePopupContainer,this.popupObj.element,this.modal,sf.base.Browser.isDevice),sf.base.EventHandler.add(document,"mousedown touchstart",this.documentHandler,this),this.popupContainer.classList.contains("e-popup-expand")){var r=this.popupContainer.querySelector(".e-model-header"),a=this.popupContainer.querySelector("button.e-today");a.classList.add("e-outline"),r.insertBefore(a,r.firstChild)}},e.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(e)){var s=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(s-1).toString(),e.style.zIndex=s.toString()}},e.prototype.closePopup=function(e,t){this.options=t,this.maskObj.isPopupOpen=!1,this.closeEventCallback(e)},e.prototype.CalendarScrollHandler=function(e){var t=0;if(this.iconRight)switch(e.swipeDirection){case"Left":t=1;break;case"Right":t=-1}else switch(e.swipeDirection){case"Up":t=1;break;case"Down":t=-1}this.isTouchstart&&0!==t&&(this.dotNetRef.invokeMethodAsync("ScrollToNextSection",1===t),this.isTouchstart=!1)},e.prototype.TouchStartHandler=function(e){this.isTouchstart=!0},e.prototype.createCalendar=function(e,t){var n=this;this.popupContainer=e,this.calendarElement=this.popupContainer.firstElementChild,this.tableBodyElement=sf.base.select("tbody",this.calendarElement);var s=i+" e-date-modal",o="e-date-overflow";t.isDatePopup?this.calendarElement.querySelector("table tbody").className="":(s="e-datetimepicker e-time-modal",o="e-time-overflow"),sf.base.Browser.isDevice&&(this.modal=sf.base.createElement("div"),this.modal.className=s,document.body.classList.add(o),this.modal.style.display="block",document.body.appendChild(this.modal)),this.popupObj=new sf.popups.Popup(this.popupContainer,{width:t.isDatePopup?"auto":this.setPopupWidth(this.options.width),relateTo:sf.base.Browser.isDevice?document.body:this.containerElement,position:sf.base.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:t.enableRtl,zIndex:t.zIndex,collision:sf.base.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){sf.base.Browser.isDevice&&(n.iconRight=parseInt(window.getComputedStyle(n.calendarElement.querySelector(".e-header .e-prev")).marginRight,10)>16,n.touchModule=new sf.base.Touch(n.calendarElement.children[1],{swipe:n.CalendarScrollHandler.bind(n)}),sf.base.EventHandler.add(n.calendarElement.children[1],"touchstart",n.TouchStartHandler,n)),document.activeElement!==n.element&&t.isDatePopup&&(n.defaultKeyConfigs=sf.base.extend(n.defaultKeyConfigs,t.keyConfigs),n.calendarElement.children[1].firstElementChild.focus(),new sf.base.KeyboardEvents(n.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:n.CalendarKeyActionHandle.bind(n),keyConfigs:n.defaultKeyConfigs}),new sf.base.KeyboardEvents(n.containerElement.children[n.index],{eventName:"keydown",keyAction:n.CalendarKeyActionHandle.bind(n),keyConfigs:n.defaultKeyConfigs}))},close:function(){n.popupHolder.appendChild(n.popupContainer),n.popupObj&&n.popupObj.destroy(),n.isDisposed||n.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),n.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||n.isDisposed||n.dotNetRef.invokeMethodAsync("HidePopup",null)}}),t.isDatePopup||(this.popupContainer.classList.contains("e-popup-expand")?(this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.popupObj.element.style.display="flex"):this.popupObj.element.style.maxHeight="240px")},e.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupContainer.getBoundingClientRect().height;return t>e?e:t},e.prototype.setScrollPosition=function(){if((this.popupContainer&&this.popupContainer.querySelector(".e-navigation")||this.popupContainer.querySelector(".e-active"))&&!this.options.isDatePopup){var e=this.popupContainer.querySelector(".e-navigation")||this.popupContainer.querySelector(".e-active");this.findScrollTop(e)}},e.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,s=e.getBoundingClientRect().height;n+e.offsetTop>t?this.popupContainer.scrollTop=i?n-(t/2+s/2):n:this.popupContainer.scrollTop=0},e.prototype.closeEventCallback=function(e){var t=e;this.isCalendar()&&!t.cancel&&this.popupObj&&this.popupObj.hide(),sf.base.Browser.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.Browser.isDevice&&(sf.base.removeClass([document.body],"e-date-overflow"),sf.base.removeClass([document.body],"e-time-overflow"),sf.base.isNullOrUndefined(this.mobilePopupContainer)||(this.mobilePopupContainer.remove(),this.mobilePopupContainer=null)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentHandler),sf.base.Browser.isDevice&&this.options.allowEdit&&!this.options.readonly&&this.element.removeAttribute("readonly")},e.prototype.documentHandler=function(e){!sf.base.isNullOrUndefined(this.popupObj)&&(this.containerElement.contains(e.target)||this.popupObj.element&&this.popupObj.element.contains(e.target))&&"touchstart"!==e.type&&e.preventDefault();var t=this.containerElement.querySelector(".e-clear-icon"),n=this.tableBodyElement?this.tableBodyElement.querySelector(".e-selected"):null,s=this.options.value?this.options.value.toString():null,o=e.target;o==t&&n&&sf.base.removeClass([this.tableBodyElement.querySelector(".e-selected")],"e-selected"),sf.base.closest(o,"."+i+".e-popup-wrapper")||sf.base.closest(o,".e-datetimepicker.e-popup-wrapper")||sf.base.closest(o,".e-input-group")===this.containerElement||o.classList.contains("e-day")||this.isDisposed?sf.base.closest(o,"."+i+".e-popup-wrapper")&&(o.classList.contains("e-day")&&!sf.base.isNullOrUndefined(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&sf.base.closest(o,".e-content")&&sf.base.closest(o,".e-content").classList.contains("e-"+this.options.depth.toLowerCase())&&!this.isDisposed||sf.base.closest(o,".e-footer-container")&&o.classList.contains("e-today")&&o.classList.contains("e-btn")&&+new Date(s)==+this.generateTodayVal(new Date(s))&&!this.isDisposed)&&this.dotNetRef.invokeMethodAsync("HidePopup",e):(this.dotNetRef.invokeMethodAsync("HidePopup",e),this.element.focus())},e.prototype.generateTodayVal=function(e){var t=new Date;return e?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t},e.prototype.isCalendar=function(){return this.popupContainer&&this.popupContainer.classList.contains("e-popup-wrapper")},e.prototype.CalendarKeyActionHandle=function(e){switch(e.action){case this.defaultKeyConfigs.escape:this.isCalendar()?this.dotNetRef.invokeMethodAsync("HidePopup",e):this.element.blur();break;case this.defaultKeyConfigs.enter:this.isCalendar()||this.dotNetRef.invokeMethodAsync("ShowPopup",e);break;case this.defaultKeyConfigs.tab:this.dotNetRef.invokeMethodAsync("HidePopup",e)}},e.prototype.setWidth=function(e){return e="number"==typeof e||"string"==typeof e?sf.base.formatUnit(e):"100%"},e.prototype.setPopupWidth=function(e){(e=this.setWidth(e)).indexOf("%")>-1&&(e=(this.containerElement.getBoundingClientRect().width*parseFloat(e)/100).toString()+"px");return e},e.prototype.updateAriaActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},e}();return{initialize:function(e,t,i,s,o){if(i&&e){var r=new n(e,t,i,s,o);if(r.initialize(),!sf.base.isNullOrUndefined(sf.base.closest(i,"fieldset"))&&sf.base.closest(i,"fieldset").disabled){var a=o.enabled=!1;r.dotNetRef.invokeMethodAsync("UpdateFieldSetStatus",a)}if(o.enableMask)return r.maskObj.createMask(o)}return{currentMaskFormat:null,inputElementValue:o.value}},createMask:function(e,t){return e&&t.enableMask?window.sfBlazor.getCompInstance(e).maskObj.createMask(t):{currentMaskFormat:null,inputElementValue:t.value}},updateCurrentValue:function(e,t){window.sfBlazor.getCompInstance(e).maskObj.updateCurrentValue(t)},renderPopup:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&i&&o.renderPopup(t,i,n,s)},updateScrollPosition:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.setScrollPosition()},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(n)&&t&&n.closePopup(t,i)},focusIn:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(t&&i.element.setAttribute("readonly","true"),i.element.focus())},updateAriaActiveDescendant:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateAriaActiveDescendant(t)},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s))}}}()},"./modules/sf-daterangepicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DateRangePicker=function(){"use strict";var e="e-left-calendar",t="e-right-calendar",i="e-calendar",n="e-header",s="e-focused-date",o=function(){function o(e,t,i,n,s){window.sfBlazor=window.sfBlazor,this.dataId=e,this.containerElement=t,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return o.prototype.initialize=function(){this.isMobile=window.matchMedia("(max-width:550px)").matches,this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab"},new sf.base.KeyboardEvents(this.element,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs})},o.prototype.keyInputHandler=function(i){var n;if(this.popupObj&&this.popupObj.element.classList.contains("e-popup")){var o=sf.base.closest(i.target,"."+t),r=(o=sf.base.isNullOrUndefined(o)?this.tableElement.querySelector("."+e):o).classList.contains(e),a=this.tableElement.querySelector("tr td."+s),l=this.tableElement.querySelectorAll("tr td.e-selected"),h=l[l.length-1],d=a&&sf.base.closest(a,"tbody")||h&&sf.base.closest(h,"tbody");!r&&this.leftCalendar.querySelectorAll("tr td."+s).length>0&&sf.base.removeClass(this.leftCalendar.querySelectorAll("tr td."+s),s),d&&d.focus(),n={Action:i.action,Key:i.key,Events:i,SelectDate:h?h.id:null,FocusedDate:a?a.id:null,classList:h?h.classList.toString():a?a.classList.toString():"e-cell",Id:a?a.id:h?h.id:null,TargetClassList:this.calendarElement.classList.toString(),IsLeftCalendar:r,FocusedDateClassList:a?a.classList.toString():null}}else n={Action:i.action,Key:i.key,Events:i};this.isDisposed||this.dotNetRef.invokeMethodAsync("InputKeyActionHandle",n),"select"!==i.action&&this.popupObj&&document.body.contains(this.popupObj.element)&&i.preventDefault()},o.prototype.getAppendToElement=function(e){var t=document.body;return"model"===e&&this.mobilePopupContainer?t=this.mobilePopupContainer:"body"===e||sf.base.isNullOrUndefined(e)||0===e.length||(t=sf.base.select(e,document)||t),t},o.prototype.renderPopup=function(e,t,i,n){this.options=n,this.popupHolder=t;var s=document.body.querySelector(".e-daterangepicker.e-popup-open");s&&sf.base.remove(s),this.createCalendar(e,n,i.appendTo),sf.base.Browser.isDevice&&(this.mobilePopupContainer=this.popupHolder.querySelector(".e-daterangepick-mob-popup-wrap"),document.body.appendChild(this.mobilePopupContainer)),this.getAppendToElement(i.appendTo).appendChild(this.popupContainer),this.presetHeight(),1e3===this.options.zIndex?this.popupObj.show(null,this.element):this.popupObj.show(null,null),this.setOverlayIndex(this.mobilePopupContainer,this.popupObj.element,this.modal,sf.base.Browser.isDevice),sf.base.Browser.isDevice&&(document.body.className+=" e-range-overflow",this.popupHolder.style.display="block",this.popupHolder.style.visibility="visible"),sf.base.EventHandler.add(document,"mousedown touchstart",this.documentHandler,this)},o.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(e)){var s=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(s-1).toString(),e.style.zIndex=s.toString()}},o.prototype.closePopup=function(e,t){this.options=t,this.closeEventCallback(e)},o.prototype.refreshPopup=function(){this.isPopupOpen()&&this.popupObj.refreshPosition(),1e3===this.options.zIndex?this.popupObj.show(null,this.element):this.popupObj.show(null,null)},o.prototype.CalendarScrollHandler=function(e){var t="Right"===e.scrollDirection||"Left"===e.scrollDirection;this.isTouchstart&&t&&(this.dotNetRef.invokeMethodAsync("ScrollToNextSection","Left"==e.scrollDirection),this.isTouchstart=!1)},o.prototype.TouchStartHandler=function(e){this.isTouchstart=!0},o.prototype.createCalendar=function(s,o,r){var a=this;this.popupContainer=s,o.isCustomWindow&&(this.calendarElement=this.popupContainer.firstElementChild,this.tableElement=this.calendarElement,this.calendarElement.querySelector("table tbody").className="");var l=this.popupContainer.getBoundingClientRect().width;sf.base.Browser.isDevice&&(this.modal=this.popupHolder.querySelector(".e-range-modal"),this.modal.style.display="block",document.body.appendChild(this.modal)),o.isCustomWindow&&(sf.base.Browser.isDevice?(this.deviceCalPrevIcon=this.calendarElement.querySelector("."+i+" .e-prev"),this.deviceCalNextIcon=this.calendarElement.querySelector("."+i+" .e-next"),this.calendarElement.querySelector("."+i+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+i+" .e-icon-container")),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector("."+i+" ."+n).appendChild(this.deviceCalNextIcon),this.calendarElement.querySelector("."+i+" ."+n).appendChild(this.deviceCalPrevIcon),sf.base.prepend([this.deviceCalPrevIcon],this.calendarElement.querySelector("."+i+" ."+n)),this.calendarElement.querySelector("."+i+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+i+" .e-footer-container"))):(this.leftCalPrevIcon=this.calendarElement.querySelector("."+e+" .e-prev"),this.leftCalNextIcon=this.calendarElement.querySelector("."+e+" .e-next"),this.leftTitle=this.calendarElement.querySelector("."+e+" .e-title"),this.calendarElement.querySelector("."+e+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+e+" .e-icon-container")),this.calendarElement.querySelector("."+e+" ."+n).appendChild(this.leftCalNextIcon),this.calendarElement.querySelector("."+e+" ."+n).appendChild(this.leftCalPrevIcon),sf.base.prepend([this.leftCalPrevIcon],this.calendarElement.querySelector("."+e+" ."+n)),this.rightCalPrevIcon=this.calendarElement.querySelector("."+t+" .e-prev"),this.rightCalNextIcon=this.calendarElement.querySelector("."+t+" .e-next"),this.rightTitle=this.calendarElement.querySelector("."+t+" .e-title"),this.calendarElement.querySelector("."+t+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+t+" .e-icon-container")),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector("."+t+" ."+n).appendChild(this.rightCalNextIcon),this.calendarElement.querySelector("."+t+" ."+n).appendChild(this.rightCalPrevIcon),sf.base.prepend([this.rightCalPrevIcon],this.calendarElement.querySelector("."+t+" ."+n)),this.calendarElement.querySelector("."+e+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+e+" .e-footer-container")),this.calendarElement.querySelector("."+t+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+t+" .e-footer-container")))),this.popupObj=new sf.popups.Popup(this.popupContainer,{relateTo:this.isMobile?document.body:this.containerElement,position:this.isMobile?sf.base.isUndefined(o.presets&&o.presets[0]&&o.presets[0].start&&o.presets[0].end&&o.presets[0].label)?{X:"center",Y:"center"}:{X:"left",Y:"bottom"}:o.enableRtl?{X:"left",Y:"bottom"}:{X:"right",Y:"bottom"},offsetX:this.isMobile||o.enableRtl?0:-l,offsetY:4,collision:this.isMobile?sf.base.isUndefined(o.presets&&o.presets[0]&&o.presets[0].start&&o.presets[0].end&&o.presets[0].label)?{X:"fit",Y:"fit"}:{X:"fit"}:{X:"fit",Y:"flip"},targetType:this.isMobile?"container":"relative",enableRtl:o.enableRtl,zIndex:o.zIndex,open:function(){sf.base.Browser.isDevice&&a.calendarElement&&(a.touchModule=new sf.base.Touch(a.calendarElement.children[1],{scroll:a.CalendarScrollHandler.bind(a)}),sf.base.EventHandler.add(a.calendarElement.children[1],"touchstart",a.TouchStartHandler,a)),a.calendarElement&&(a.leftCalendar=a.calendarElement.querySelector("."+e),a.rightCalendar=a.calendarElement.querySelector("."+t));var i=a.popupObj&&a.popupObj.element.querySelector(".e-date-range-container");if(!a.isMobile&&i){new sf.base.KeyboardEvents(a.leftCalendar,{eventName:"keydown",keyAction:a.keyInputHandler.bind(a),keyConfigs:a.defaultKeyConfigs}),new sf.base.KeyboardEvents(a.rightCalendar,{eventName:"keydown",keyAction:a.keyInputHandler.bind(a),keyConfigs:a.defaultKeyConfigs});var n=a.popupContainer.querySelector(".e-cancel.e-btn"),s=a.popupContainer.querySelector(".e-apply.e-btn");new sf.base.KeyboardEvents(n,{eventName:"keydown",keyAction:a.keyInputHandler.bind(a),keyConfigs:{tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),new sf.base.KeyboardEvents(s,{eventName:"keydown",keyAction:a.keyInputHandler.bind(a),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),a.leftCalendar.querySelector("table").focus()}},close:function(){a.popupHolder.appendChild(a.popupContainer),a.popupObj&&a.popupObj.destroy(),a.isDisposed||a.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),a.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||a.isDisposed||a.dotNetRef.invokeMethodAsync("HidePopup",null)}})},o.prototype.closeEventCallback=function(e){!e.cancel&&this.popupObj&&this.popupObj.hide(),sf.base.Browser.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.Browser.isDevice&&(sf.base.removeClass([document.body],"e-range-overflow"),sf.base.isNullOrUndefined(this.mobilePopupContainer)||(this.mobilePopupContainer.remove(),this.mobilePopupContainer=null)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentHandler)},o.prototype.documentHandler=function(e){if(!sf.base.isNullOrUndefined(this.popupObj)){var t=e.target;this.containerElement.contains(t)&&(sf.base.isNullOrUndefined(this.popupObj)||sf.base.closest(t,".e-daterangepicker.e-popup"))||"touchstart"!==e.type&&"mousedown"===e.type&&e.preventDefault(),sf.base.closest(t,".e-daterangepicker.e-popup")||sf.base.closest(t,".e-input-group")===this.containerElement||sf.base.closest(t,".e-daterangepicker.e-popup")&&!t.classList.contains("e-day")||this.isPopupOpen()&&document.body.contains(this.popupObj.element)&&this.applyFunction(e)}},o.prototype.applyFunction=function(e){"touchstart"!==e.type&&e.preventDefault(),document.activeElement!==this.element&&(this.element.focus(),sf.base.addClass([this.containerElement],["e-input-focus"])),this.dotNetRef.invokeMethodAsync("HidePopup",null),sf.base.closest(e.target,".e-input-group")||document.activeElement===this.element&&(sf.base.removeClass([this.containerElement],["e-input-focus"]),this.element.blur())},o.prototype.presetHeight=function(){var e=this.popupObj&&this.popupObj.element.querySelector(".e-presets"),t=this.popupObj&&this.popupObj.element.querySelector(".e-date-range-container");sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(t)||(e.style.height=t.getBoundingClientRect().height+"px")},o.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupContainer.getBoundingClientRect().height;return t>e?e:t},o.prototype.setScrollPosition=function(){if(!sf.base.isNullOrUndefined(this.popupContainer.querySelector(".e-active"))&&this.options.presets){var e=this.popupContainer.querySelector(".e-active");this.findScrollTop(e)}},o.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,s=e.getBoundingClientRect().height;n+e.offsetTop>t?this.popupContainer.scrollTop=i?n-(t/2+s/2):n:this.popupContainer.scrollTop=0},o.prototype.isPopupOpen=function(){return!(sf.base.isNullOrUndefined(this.popupObj)||!this.popupObj.element.classList.contains("e-popup"))},o.prototype.updateAriaActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},o.prototype.removeFocusDate=function(e,t){var i=e.querySelectorAll("tr td.e-focused-date");i.length>0&&sf.base.removeClass(i,s);for(var n=e.querySelectorAll("tr td"),o=0;o<n.length;o++)n[o].getAttribute("id").split("_")[0]==t&&(n[o].classList.contains("e-disabled")?sf.base.addClass(i,s):(sf.base.removeClass(n,s),sf.base.addClass([n[o]],s),sf.base.closest(n[o],"table").focus()))},o}();return{initialize:function(e,t,i,n,s){if(i){var r=new o(e,t,i,n,s);if(r.initialize(),!sf.base.isNullOrUndefined(sf.base.closest(i,"fieldset"))&&sf.base.closest(i,"fieldset").disabled){var a=s.enabled=!1;r.dotNetRef.invokeMethodAsync("UpdateFieldSetStatus",a)}}},renderPopup:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&i&&o.renderPopup(t,i,n,s)},updateScrollPosition:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.setScrollPosition()},updateAriaActiveDescendant:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateAriaActiveDescendant(t)},removeFocusDate:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(n)&&t&&n.removeFocusDate(t,i)},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(n)&&t&&n.closePopup(t,i)},refreshPopup:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.refreshPopup()},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s))}}}()},"./modules/sf-diagramcomponent.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Diagram=function(){"use strict";var e=function(){function e(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}(),t=function(e,t){this.width=e,this.height=t};function n(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var s=i[n].split(":");2===s.length&&(e.style[s[0].trim()]=s[1].trim())}}function s(e,t){for(var i=Object.keys(t),s=0;s<i.length;s++)"style"!==i[s]?e.setAttribute(i[s],t[i[s]]):n(e,t[i[s]])}function o(e,t,i){for(var n=e;n&&!(i?n.id===t:r(n,t));)n=n.parentNode;return n}function r(e,t){return(" "+("object"===i(e.className)?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}function a(e){var t=e;if(t)for(;null!==t.parentNode;){var i=t.classList;if(-1!=t.id.indexOf("_diagramlayer")||-1!=t.id.indexOf("_htmlLayer_div")||-1!=t.id.indexOf("_diagramPorts_svg")||-1!=t.id.indexOf("_diagramAdornerLayer"))return!0;if(i.contains("e-symbol-draggable"))return!0;t=t.parentNode}return!1}var l,h,d=function(){function e(e,t){var i=this;this.over=function(e){for(var t,n=document.getElementById("clonedNode"),s=i.symbolPaletteInstance.length-1;s>=0;s--)if(e.dragData.draggable.id===i.symbolPaletteInstance[s].id){t=i.symbolPaletteInstance[s].componentInstance;break}if(t&&t.invokeMethodAsync("SymbolPaletteDragEnter",e.target.id.split("_")[0]),n){sf.base.remove(n);var o=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");o[0].style.width="1px",o[0].style.height="1px"}},this.drop=function(e){for(var t,n=i.symbolPaletteInstance.length-1;n>=0;n--)if(e.dragData.draggable.id===i.symbolPaletteInstance[n].id){t=i.symbolPaletteInstance[n].componentInstance;break}var s=o(e.target,"e-diagram");if(s&&e.event.changedTouches&&e.event.changedTouches.length>0){var r=void 0;for(n=i.symbolPaletteInstance.length-1;n>=0;n--){r=i.symbolPaletteInstance[n].componentInstance;break}r&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,r,void 0,e),t&&t.invokeMethodAsync("SymbolPaletteDrop",s.id,!0)}else t&&t.invokeMethodAsync("SymbolPaletteDrop",s.id,!1);sf.base.remove(e.droppedElement)},this.out=function(e){for(var t,n=i.symbolPaletteInstance.length-1;n>=0;n--)if(e.target&&e.target.children[0].id===i.symbolPaletteInstance[n].id||e.target&&e.target.parentNode&&e.target.parentNode.parentNode&&e.target.parentNode.parentNode.parentElement&&e.target.parentNode.parentNode.parentElement.id===i.symbolPaletteInstance[n].id||i.draggable.target&&i.draggable.target.id==i.symbolPaletteInstance[n].id){t=i.symbolPaletteInstance[n].componentInstance;break}t&&(e.evt.changedTouches&&e.evt.changedTouches.length>0&&window.sfBlazor.Diagram.invokeDiagramEvents(e.evt,t,void 0,e),t.invokeMethodAsync("SymbolPaletteDragLeave"))},this.helper=function(e){var t=document.getElementsByClassName("e-control e-accordion")[0],i=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-dragclone",styles:'color:"transparent" height:"auto",  width:'+t.offsetWidth}),n=document.getElementById("previewID");return null===n&&("touchmove"!=e.sender.type||"touchmove"==e.sender.type&&a(e.sender.target))&&(n=e.sender.target),n?(i.setAttribute("id","helperElement"),document.body.appendChild(i),i):null},this.dragStart=function(e){e.bindEvents(e.dragElement)},this.drag=function(e){if(o(e.target,"e-diagram")){if(e.event.touches&&e.event.touches.length>0){var t=void 0;for(r=i.symbolPaletteInstance.length-1;r>=0;r--)if(e.element.id===i.symbolPaletteInstance[r].id){t=i.symbolPaletteInstance[r].componentInstance;break}t&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,t,void 0,e)}}else{for(var n=document.getElementById("previewID"),s=void 0,r=i.symbolPaletteInstance.length-1;r>=0;r--)if(e.element.id===i.symbolPaletteInstance[r].id){s=i.symbolPaletteInstance[r].allowDrag;break}if(n){n.style.visibility="";var a=n.cloneNode(!0);a.style.display="Block",a.style.visibility=!0,a.setAttribute("class","e-cloneproperties e-draganddrop e-dragclone"),a.setAttribute("id","clonedNode");var l=document.getElementById("helperElement");l&&l.children[0]&&l.removeChild(l.children[0]),s||(l.style.opacity="0"),l.appendChild(a)}}},this.dragStop=function(e){var t=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");if(t.length>0&&(t[0].style.width="1px",t[0].style.height="1px"),t.length>1)for(var n=t.length-1;n>0;n--)"helperElement"==t[n].id&&t[n].remove();if(!o(e.target,"e-diagram")){var s=document.getElementById("helperElement");s&&s.remove();for(var r=void 0,a=i.symbolPaletteInstance.length-1;a>=0;a--)if(e.element.id===i.symbolPaletteInstance[a].id){r=i.symbolPaletteInstance[a].componentInstance;break}r&&r.invokeMethodAsync("ElementDropToOutSideDiagram")}},this.symbolPaletteInstance=t,e&&this.initializeDrag(e)}return e.prototype.initializeDrag=function(e){var t=e.children[0];this.draggable=new sf.base.Draggable(t,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,preventDefault:!1});for(var i=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),n=0;n<i.length;n++)this.droppable=new sf.base.Droppable(i[n],{accept:".e-dragclone",drop:this.drop,over:this.over,out:this.out});for(var s=document.getElementsByClassName("e-acrdn-header-content"),o=0;o<s.length;o++)s[o].style.textDecoration="inherit"},e.prototype.destroy=function(){this.draggable.destroy()},e}(),c=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new i((function(t){t(e.value)})).then(r,a)}l((n=n.apply(e,t||[])).next())}))},p=function(e,t){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=!1,f=!1,g=!1,m=!1,v=!1,b=!1,y=!1,C=!1,w=!1,M=!1,S=0,x=!1,N=[],O=!1,E="",I={},T=!1,D=!1,j="Arial",A="black",z="Center",k=12,P="None",L="Wrap",B="WrapWithOverflow",R="CollapseSpace";return{createHtmlElement:function(e,t){var i=sf.base.createElement(e);return t&&this.setAttribute(i,t),i},setAttributeSvg:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):this.applyStyleAgainstCsp(e,t[i[n]])},applyStyleAgainstCsp:function(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var s=i[n].split(":");2===s.length&&(e.style[s[0].trim()]=s[1].trim())}},setCanvasSize:function(e,t,i){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",i.toString()))},getHTMLLayer:function(e){var t=null;window[e+"_htmlLayer"]?t=window[e+"_htmlLayer"]:(t=this.getDiagramElement(e).getElementsByClassName("e-html-layer")[0],window[e+"_htmlLayer"]=t);return t},getDiagramElement:function(e,t){var i;return t&&(i=document.getElementById(t)),"msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name?i?i.querySelector("#"+e):document.getElementById(e):i?i.querySelector("#"+CSS.escape(e)):document.getElementById(e)},createCanvas:function(e,t,i){var n=this.createHtmlElement("canvas",{id:e});return this.setCanvasSize(n,t,i),n},setAttribute:function(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)e.setAttribute(i[n],t[i[n]])},createMeasureElements:function(e,t,i,n,s,o,r,a,l,h,d){this.updateZoomPanTool(e),this.updateDrawingTool(t),this.updateInnerLayerSize(i,n,s,void 0,a,l,h,d),o&&r&&this.onAddWireEvents(o,r);if(window.measureElement)window.measureElement.usageCount+=1;else{var c=this.createHtmlElement("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),p=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"});c.appendChild(p);var u;u=this.createHtmlElement("img",{}),c.appendChild(u);var f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("xlink","http://www.w3.org/1999/xlink"),c.appendChild(f);var g=document.createElementNS("http://www.w3.org/2000/svg","path");f.appendChild(g);var m=document.createElementNS("http://www.w3.org/2000/svg","text");m.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),f.appendChild(m),window.measureElement=c,window.measureElement.usageCount=1,document.body.appendChild(c);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}},updateZoomPanTool:function(e){y=e},updateDrawingTool:function(e){C=e},updateGridlines:function(e,t,i,n){var s=document.getElementById(e);if(s&&(s.setAttribute("width",t.width.toString()),s.setAttribute("height",t.height.toString()),s.children.length>0))for(var o=0;o<s.children.length;o++)i&&i.length?s.children[o].setAttribute("d",i[o]):n&&n.length&&(s.children[o].setAttribute("cx",n[o].x.toString()),s.children[o].setAttribute("cy",n[o].y.toString()))},updatePageBreaks:function(e,t,i,n,s,o,r,a,l,h,d,c){var p=document.getElementById(e),u=document.getElementById(t);if(p&&p.children.length>0)for(var f=0;f<p.children.length;f++)p.children[f].setAttribute("x",i),p.children[f].setAttribute("y",n),p.children[f].setAttribute("width",s),p.children[f].setAttribute("height",o);if(u&&u.children.length>0){var g=0;for(f=0;f<u.children.length;f++)if(-1!=u.children[f].id.indexOf("_backgroundLayerrect"))u.children[f].setAttribute("x",i),u.children[f].setAttribute("y",n),u.children[f].setAttribute("width",s),u.children[f].setAttribute("height",o),u.children[f].setAttribute("transform",r);else if(c){var m=(a[0+g]+l)*d,v=(a[1+g]+h)*d,b=(a[2+g]+l)*d,y=(a[3+g]+h)*d;u.children[f].setAttribute("x1",m),u.children[f].setAttribute("y1",v),u.children[f].setAttribute("x2",b),u.children[f].setAttribute("y2",y),g+=4}}},updateInnerLayerSize:function(e,t,i,n,s,o,r,a,l,h,d,c,p){var u;h&&(t=(u=this.measureScrollValues(h)).width,i=u.height);var f=void 0;if(null!=e&&null!=t&&null!=i&&e.length>0)for(var g=void 0,m=0;m<e.length-1;m++)if(g=document.getElementById(e[m]),m>=e.length-6){if(-1!=e[m].indexOf("_pattern"))this.updateGridlines(e[m],o,r,a);else if(-1!=e[m].indexOf("gridline")&&s&&g){var v=s.scale,y=-s.tx*v,C=-s.ty*v,w="translate("+s.tx*v+","+s.ty*v+")";g.setAttribute("transform",w),g.children[0].setAttribute("x",y.toString()),g.children[0].setAttribute("y",C.toString())}else if(s&&g){v=s.scale;var M="translate("+s.tx*v+","+s.ty*v+"),scale("+v+")";g.setAttribute("transform",M),f=e[m].split("_")[0];var S=document.getElementById(f+"_diagram_PolygonHelper");S&&S.setAttribute("transform",M);var x=document.getElementById(f+"_diagram_ConnectorHelper");x&&x.setAttribute("transform",M);var N=document.getElementById(f+"_htmlLayer_div"),O="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+s.tx*v+"px,"+s.ty*v+"px) scale("+v+")";N.setAttribute("style",O);var E=document.getElementById(f+"_SelectorElement");if(l&&E&&E.children.length>0&&E.children.length==l.length)for(var I=0;I<E.children.length;I++)if("line"==E.children[I].tagName){var T=l[I],D=T.startPoint.x+T.x,j=T.startPoint.y+T.y,A=T.endPoint.x+T.x,z=T.endPoint.y+T.y;E.children[I].setAttribute("x1",D.toString()),E.children[I].setAttribute("y1",j.toString()),E.children[I].setAttribute("x2",A.toString()),E.children[I].setAttribute("y2",z.toString()),E.children[I].setAttribute("transform","rotate("+T.angle+" "+(T.x+T.width*T.pivotX)+" "+(T.y+T.height*T.pivotY)+")")}else if("path"==E.children[I].tagName){var k=l[I];E.children[I].setAttribute("transform","rotate("+k.angle+","+(k.x+k.width*k.pivotX)+","+(k.y+k.height*k.pivotY)+")translate("+k.x+","+k.y+")")}else if("rect"==E.children[I].tagName){var P=l[I];E.children[I].setAttribute("x",P.x),E.children[I].setAttribute("y",P.y),E.children[I].setAttribute("width",P.width),E.children[I].setAttribute("height",P.height),E.children[I].setAttribute("transform","rotate("+P.angle+","+(P.x+P.width*P.pivotX)+","+(P.y+P.height*P.pivotY)+")")}else"circle"==E.children[I].tagName&&(E.children[I].setAttribute("cx",l[I].cx),E.children[I].setAttribute("cy",l[I].cy),E.children[I].setAttribute("visibility",l[I].visible?"visible":"hidden"))}}else g&&(g.style.width=t,g.style.height=i);if(b&&(b=!1),!h&&null!=e&&e.length>0){var L=document.getElementById(e[e.length-1]);u=this.onChangeScrollValues(L,n)}if(null!=d&&null!=f){var B=f+"_backgroundImageLayer",R=f+"_backgroundLayer",U=(y=(s.tx+d.x)*s.scale,C=(s.ty+d.y)*s.scale,d.height*s.scale),H=d.width*s.scale,F="rotate(0 "+(y+0*H)+" "+(C+0*U)+")";this.updatePageBreaks(B,R,y,C,H,U,F,c,s.tx,s.ty,s.scale,p)}return u},onChangeScrollValues:function(e,t){return u&&(u=!1),null!=e&&null!=t&&null!=t.x&&null!=t.y?(f&&(f=!1,g=!0),e.scrollLeft=t.x,e.scrollTop=t.y,this.measureScrollValues(e.id)):null},measureScrollValues:function(t){var i=document.getElementById(t);return new e(i.scrollLeft,i.scrollTop,i.scrollWidth,i.scrollHeight)},measurePath:function(t){if(t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[2],n=this.getChildNode(i)[0];n.setAttribute("d",t);var s=n.getBBox(),o=new e(s.x,s.y,s.width,s.height);return window.measureElement.style.visibility="hidden",o}return new e(0,0,0,0)},openUrl:function(e){return c(this,void 0,void 0,(function(){return p(this,(function(t){return window.open(e,"_blank"),[2]}))}))},textEdit:function(e,t,i,n,o,r,a,l){var h=this,d=document.getElementById("diagram_editTextBoxDiv");e.id=l;var c=document.getElementById("diagram_editBox"),p=e.content;if(!d&&!c){d=this.createHtmlElement("div",{}),c=this.createHtmlElement("textarea",{});var u=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),f=0;if(u.length>0)for(var g=0;g<u.length;g++){u[g].children[0].id.split("_")[0]==i&&(f=g)}u[f].children[0].appendChild(d),d.appendChild(c),c.appendChild(document.createTextNode(p)),this.diagram_editTextBoxDiv=d,this.diagram_editBox=c}var m=e.bounds.width<o.width?e.bounds.width:o.width;m=90>m?90:m;var v=this.measureHtmlText(e.style,t,p,void 0,void 0,m);0==v.width&&0==v.height&&(v.width=50,v.height=12);var b=a?r.scale:1;v.width=Math.max(v.width,50),s(d,{id:"diagram_editTextBoxDiv",style:"position: absolute;left:"+((n.x+r.tx)*r.scale-v.width/2*b-2.5)+"px;top:"+((n.y+r.ty)*r.scale-v.height/2*b-3)+"px;width:"+(v.width+1)*b+"px;height:"+v.height*b+"px; containerName:temp;"});var y=e.style;s(c,{id:"diagram_editBox",style:"width:"+(v.width+1)*b+"px;height:"+v.height*b+"px;line-height: normal;resize: none;outline: none;overflow: hidden;;font-family:"+y.fontFamily+";font-size:"+y.fontSize*b+"px;text-align:"+e.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),c.style.fontWeight=y.bold?"bold":"",c.style.fontStyle=y.italic?"italic":"",c.style.lineHeight=(1.2*y.fontSize+"px;").toString();var C=document.getElementById(e.id+"_text");C&&C.setAttribute("visibility","hidden"),c.style.textDecoration=y.textDecoration?y.textDecoration:"",c.addEventListener("input",(function(i){h.inputChange(i,e,t,o,n,r,a)})),c.select(),window.annotation=e},inputChange:function(e,t,i,n,s,o,r){var a,l,h,d,c,p=this.diagram_editBox,u=this.diagram_editTextBoxDiv,f=p.value,g=f.split("\n");a=(a=n.width<t.bounds.width?n.width:t.bounds.width)>90?a:90,c=this.measureHtmlText(t.style,i,f,void 0,void 0,a),l=Number(p.style.fontSize.split("px")[0]),g.length>1&&""===g[g.length-1]&&(c.height=c.height+l);var m=r?o.scale:1;d=(90>(d=c.width)?90:d)*m,h=(12>c.height?12:c.height)*m,u.style.left=(s.x+o.tx)*o.scale-d/2-2.5+"px",u.style.top=(s.y+o.ty)*o.scale-h/2-3+"px",u.style.width=d+"px",u.style.height=h+"px",p.style.minHeight="12px",p.style.minWidth="90px",p.style.width=d+"px",p.style.height=h+"px"},measureHtmlText:function(e,t,i,n,s,o){var r={},a=this.createHtmlElement("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(a.style.fontWeight="bold"),e.italic&&(a.style.fontStyle="italic"),void 0!==n&&(a.style.width=n.toString()+"px"),void 0!==s&&(a.style.height=s.toString()+"px"),void 0!==o&&(a.style.maxWidth=o.toString()+"px"),a.style.fontFamily=e.fontFamily,a.style.fontSize=e.fontSize+"px",a.style.color=e.color,a.textContent=i,a.style.whiteSpace=this.whiteSpaceToString(t,e.textWrapping),a.style.wordBreak=void 0!==o?"break-word":this.wordBreakToString(e.textWrapping),document.body.appendChild(a),r.width=a.offsetWidth,r.height=a.offsetHeight,document.body.removeChild(a),r},getChildNode:function(e){var t,i=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[n]).nodeType&&i.push(t);else i=e.children;return i},measureBounds:function(e,t,i,n){return c(this,void 0,void 0,(function(){var s,o,r,a,l,h,d,c,u,f,g,m,v,b,y,C,w,M,S,x,N,O,I,T,D,j,A,z;return p(this,(function(p){switch(p.label){case 0:if(null!=n)for(o=document.getElementsByClassName("e-acrdn-panel e-content-hide"),s=[],z=0;z<o.length;z++)s[z]=o[z].style.display,o[z].style.display="block";if(r={},a={},l={},h={},d={},c="measureElement",e)for(M=Object.keys(e).map((function(t){return[e[t],t]})),window[c].style.visibility="visible",S=window[c].children[2],u=this.getChildNode(S)[0],O=0;O<M.length;O++)"Path"==M[O][0]?(m=M[O][1],u.setAttribute("d",m),g=u.getBBox(),A={x:g.x,y:g.y,width:g.width,height:g.height},a[m]=A):-1!=M[O][0].indexOf("GetBoundingClientRect")&&((f=document.getElementById(M[O][1]))&&(g=f.getBoundingClientRect(),a[M[O][0]]={x:g.x,y:g.y,width:g.width,height:g.height}),"GetBoundingClientRect"==M[O][0]&&(E=M[O][1],a.GetScrollerBounds=this.measureScrollValues(M[O][1])));if(t)for(M=Object.keys(t).map((function(e){return[t[e],e]})),O=0;O<M.length;O++)m=M[O][1],v=t[m].content,b=t[m].style,y=t[m].bounds,C=t[m].nodeSize,y.width=null==y.width?void 0:y.width,y.height=null==y.height?void 0:y.height,C.width=null==C.width?void 0:C.width,C.height=null==C.height?void 0:C.height,l[m]=this.measureText(y,b,v,y.width||C.width);return i&&(w=Object.keys(i).map((function(e){return[i[e],e]}))).length>0?(0,M={},[4,this.loadImage(w,0,M)]):[3,2];case 1:p.sent(),h=M,p.label=2;case 2:if(n&&(M=Object.keys(n).map((function(e){return[n[e],e]})),window[c].style.visibility="visible",S=window[c].children[2],M.length>0)){for(x={},N={},O=0;O<M.length;O++)I=M[O][0],T=document.getElementById(I),(D=T.cloneNode(!0)).id=D.id+"_copy",S.appendChild(D),j=D.getBoundingClientRect(),A=S.getBoundingClientRect(),N={x:j.left-A.left,y:j.top-A.top,width:j.width,height:j.height},x[M[O][1]]=N,S.removeChild(D);d=x}if(a.GetScrollerWidth=this.getScrollerWidth(),r.Path=a,r.Text=l,r.Image=h,r.Native=d,null!=s)for(z=0;z<o.length;z++)o[z].style.display=s[z].toString();return window[c].style.visibility="hidden",[2,r]}}))}))},measureText:function(e,t,i,n,s){var o,r,a={},l={width:0,height:0},h=this.getTextOptions(i,e,t,n);return o=this.wrapSvgText(h,s,n),r=this.wrapSvgTextAlign(h,o),l.width=r.width,r.width>=n&&"Wrap"!==h.textOverflow&&(l.width=n),l.height=o.length*h.fontSize*1.2,r.width>h.width&&"Wrap"!==h.textOverflow&&"NoWrap"===h.textWrapping&&(o[0].text=this.overFlow(h.content,h)),a.Bounds=l,a.WrapBounds=r,a.ChildNodes=o,a},getTextOptions:function(e,t,i,n){var s={fill:i.fill,stroke:i.strokeColor,strokeWidth:i.strokeWidth,dashArray:i.strokeDashArray,opacity:i.opacity,gradient:i.gradient,width:n||t.width,height:t.height};return s.fontSize=i.fontSize||k,s.fontFamily=i.fontFamily||j,s.textOverflow=i.textOverflow||L,s.textDecoration=i.textDecoration||P,s.doWrap=i.doWrap,s.whiteSpace=this.whiteSpaceToString(i.whiteSpace||R,i.textWrapping||B),s.content=e,s.textWrapping=i.textWrapping||B,s.breakWord=this.wordBreakToString(i.textWrapping||B),s.textAlign=this.textAlignToString(i.textAlign||z),s.color=i.color||A,s.italic=i.italic||D,s.bold=i.bold||T,s.dashArray="",s.strokeWidth=0,s.fill="",s},whiteSpaceToString:function(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var i="";switch(e){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i},wordBreakToString:function(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t},textAlignToString:function(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t},wrapSvgText:function(e,t,i){var n,s,o=[],r=0,a=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(n="",n+=a[0],r=0;r<a.length;r++)if((s=this.bBoxText(n,e))>=e.width&&n.length>0)o[o.length]={text:n,x:0,dy:0,width:s},n="";else{(n+=a[r+1]||"").indexOf("\n")>-1&&(o[o.length]={text:n,x:0,dy:0,width:this.bBoxText(n,e)},n="");var l=this.bBoxText(n,e);Math.ceil(l)+2>=e.width&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n=""),r===a.length-1&&n.length>0&&(o[o.length]={text:n,x:0,dy:0,width:l},n="")}else o=this.wordWrapping(e,t,i);else o[o.length]={text:a,x:0,dy:0,width:this.bBoxText(a,e)};return o},wordWrapping:function(e,t,i){var n=[],s="",o=0,r=0,a="nowrap"!==e.whiteSpace,l=t||e.content;if(null!=l){var h=l.split("\n"),d=void 0,c=void 0,p=void 0,u=void 0;for(o=0;o<h.length;o++)for(d="NoWrap"!==e.textWrapping?h[o].split(" "):"NoWrap"===e.textWrapping?[h[o]]:h,r=0;r<d.length;r++){c=(s+=((0!==r||1===d.length)&&a&&s.length>0?" ":"")+d[r])+" "+(d[r+1]||"");var f=this.bBoxText(c,e);Math.floor(f)>(i||e.width)-2&&s.length>0?(n[n.length]={text:s,x:0,dy:0,width:c===s?f:s===u?p:this.bBoxText(s,e)},s=""):r===d.length-1&&(n[n.length]={text:s,x:0,dy:0,width:f},s=""),u=c,p=f}}return n},wrapSvgTextAlign:function(e,t){var i,n,s={x:0,width:0},o=0;for(o=0;o<t.length;o++)n=i=t[o].width,i="left"===e.textAlign?0:"center"===e.textAlign?i>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-i/2:"right"===e.textAlign?-i:t.length>1?0:-i/2,t[o].dy=1.2*e.fontSize,t[o].x=i,s?(s.x=Math.min(s.x,i),s.width=Math.max(s.width,n)):s={x:i,width:n};return s},overFlow:function(e,t){var i,n=0,s=0,o=0,r="";i=e.length;var a=0;do{o>0&&(n=s),s=Math.floor(this.middleElement(n,i)),r+=e.substr(n,s),o=this.bBoxText(r,t)}while(o<=t.width);for(r=r.substr(0,n),a=n;a<i;a++)if(r+=e[a],(o=this.bBoxText(r,t))>=t.width){e=e.substr(0,r.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e},middleElement:function(e,t){return(e+t)/2},getScrollerWidth:function(){var e=this.createHtmlElement("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var i=this.createHtmlElement("div",{style:"width:100%"});e.appendChild(i);var n=i.getBoundingClientRect().width;return e.parentNode.removeChild(e),{x:0,y:0,width:t-n,height:0}},pathPoints:function(e){return c(this,void 0,void 0,(function(){var t,i,n,s;return p(this,(function(o){if(t={},e)for(i=Object.keys(e).map((function(t){return[e[t],t]})),n=0;n<i.length;n++)i.length>0&&(s=i[n][1],t[i[n][0]]=this.findSegmentPoints(s));return[2,t]}))}))},findSegmentPoints:function(e){var t,i,n=[];window.measureElement.style.visibility="visible";var s=window.measureElement.children[2],o=this.getChildNode(s)[0];o.setAttributeNS(null,"d",e);var r=o.getTotalLength();for(i=0;i<=r;i+=10)t=o.getPointAtLength(i),n.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",n},loadImage:function(e,t,i){return c(this,void 0,void 0,(function(){var n,o,r;return p(this,(function(a){switch(a.label){case 0:return n=new Promise((function(i,n){var o={};window.measureElement.style.visibility="visible",window.measureElement.children[1].setAttribute("src",e[t][0]),window.measureElement.style.visibility="hidden";var r=document.createElement("img");r.setAttribute("src",e[t][0]),s(r,{id:"imagesf"+t+"imageNode",style:"display: none;"}),document.body.appendChild(r),r.onload=function(e){var t=e.currentTarget;o={width:t.width,height:t.height},i(o)}})),o=i,r=e[t][1],[4,n];case 1:return o[r]=a.sent(),t!=e.length-1?[3,2]:[2,i];case 2:return t++,[4,this.loadImage(e,t,i)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},bBoxText:function(e,t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[2],s=this.getChildNode(i)[1];s.textContent=e,n(s,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var o=s.getBBox().width;return window.measureElement.style.visibility="hidden",o},endEdit:function(e){setTimeout((function(){var e=document.getElementById(i.id+"_text");e&&e.setAttribute("visibility","visible")}),100);var t=this.diagram_editBox,i=window.annotation,n=t.value,s=i.style,o=i.bounds,r=i.nodeSize;r.width=null==r.width?void 0:r.width,r.height=null==r.height?void 0:r.height;var a={},l={};return a[i.id]=this.measureText(o,s,n,o.width||r.width),a[i.id].Content=n,l.Text=a,this.diagram_editTextBoxDiv.remove(),l},onAddWireEvents:function(e,t){var i=this,n=document.getElementById(e);I[e]=t;var s=this;n.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),window.addEventListener("resize",(function(e){setTimeout((function(){s.invokeDiagramEvents(e,null,E)}),800)})),n.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),n.addEventListener("mouseup",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("mouseleave",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),n.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),n.addEventListener("touchend",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("scroll",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("mousewheel",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("wheel",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("keydown",(function(e){i.invokeDiagramEvents(e,t)})),n.addEventListener("keyup",(function(e){i.invokeDiagramEvents(e,t)}))},invokeDiagramEvents:function(e,t,i,n){var s,o="diagram_editTextBoxDiv",r=this[o],h={};if("resize"==e.type){var d=document.getElementById(i);if(!d){if(document.getElementsByClassName("e-diagram").length>0){var c=document.getElementsByClassName("e-diagram").length;i=document.getElementsByClassName("e-diagram")[c-1].id+"_content",d=document.getElementById(i),E=i}if(!d)return}t=I[i]}if("mousedown"!=e.type&&"touchstart"!=e.type||(v=!0,"touchstart"==e.type&&(N=this.getTouches(e),w=a(e.target)&&!y&&!e.target.id.indexOf("_icon"),!function(e){var t=e;if(t)for(;null!==t.parentNode;){var i=t.classList;if(i.contains("e-diagram-userhandle-circle")||i.contains("e-diagram-userhandle-path"))return!0;t=t.parentNode}return!1}(e.target)?(a(e.target)||document.getElementsByClassName("e-diagram-helper").length>0)&&(M=!0,l=setTimeout((function(){!sf.base.Browser.isDevice&&M&&(M=!1)}),300)):e.preventDefault())),"touchmove"==e.type&&l&&clearTimeout(l),("mouseup"==e.type||"touchend"==e.type||"mouseleave"==e.type)&&(v=!1,"touchend"==e.type)){var p=(new Date).getTime()-S;x=p<300&&p>0,S=(new Date).getTime(),l&&clearTimeout(l),e.cancelable&&(M||sf.base.Browser.isDevice&&(a(e.target)||document.getElementsByClassName("e-diagram-helper").length>0))&&e.preventDefault()}if("mouseleave"!=e.type&&"Escape"!=e.key&&("mousedown"!=e.type&&"touchstart"!=e.type||"diagram_editBox"==e.target.id)||!r||(window.isEscape="Escape"==e.key,s=this.endEdit(e,this),this[o]=r=document.getElementById("diagram_editTextBoxDiv"),e.currentTarget.focus()),h=this.getMouseEvents(e,i,n),"Escape"==e.key){var C=document.getElementById("helperElement");C&&(sf.base.remove(C),C.remove())}if("mousewheel"!=e.type&&"wheel"!=e.type||!e.ctrlKey){if(!r&&(("mousemove"==e.type||"touchmove"==e.type)&&!u||"mousemove"!=e.type&&"touchmove"!=e.type||!m))if(("mousemove"==e.type||"touchmove"==e.type&&!b)&&v&&!sf.base.Browser.isDevice&&y&&(u=!0,h.isPan=!0),n)t.invokeMethodAsync("InvokeDiagramEvents",h);else if("keydown"==e.type||"keyup"==e.type||"scroll"!=e.type||"scroll"==e.type&&!b)if("mousewheel"==e.type||"wheel"==e.type)if(t.invokeMethodAsync("InvokeDiagramEvents",h,s),e.shiftKey){var O=e.currentTarget.scrollWidth>e.currentTarget.clientWidth,T=0==e.currentTarget.scrollLeft,D=e.currentTarget.scrollLeft==e.currentTarget.scrollWidth-e.currentTarget.clientWidth;T&&e.wheelDelta>0||D&&e.wheelDelta<0||!O||e.preventDefault()}else{var j=e.currentTarget.scrollHeight>e.currentTarget.clientHeight,A=0==e.currentTarget.scrollTop,z=e.currentTarget.scrollTop==e.currentTarget.scrollHeight-e.currentTarget.clientHeight;A&&e.wheelDelta>0||z&&e.wheelDelta<0||!j||e.preventDefault()}else"touchmove"==e.type?(w||(h.type="scroll"),t.invokeMethodAsync("InvokeDiagramEvents",h,s)):"scroll"!=e.type||"scroll"==e.type&&!g?(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&(e.target.id.indexOf("_icon")||N.length>1&&e.touches.length>1||!y||"touchstart"!=e.type&&"touchmove"!=e.type&&"touchend"!=e.type&&"mousedown"!=e.type&&"mousemove"!=e.type&&"mouseup"!=e.type||!y))&&t.invokeMethodAsync("InvokeDiagramEvents",h,s):"scroll"==e.type&&g&&(g=!1)}else f?setTimeout((function(){f=!1}),1e3):(f=!0,t.invokeMethodAsync("InvokeDiagramEvents",h,s));"mouseup"!=e.type&&"mousemove"!=e.type&&"touchend"!=e.type&&"touchmove"!=e.type||!e.currentTarget||!e.currentTarget.id||this[o]||this.isForeignObject(e.target)||e.currentTarget.focus(),"mouseup"!=e.type&&"touchend"!=e.type&&"mouseleave"!=e.type||(w=!1,N=[])},isForeignObject:function(e,t){var i=e;if(i)for(;null!==i.parentNode;){if("string"==typeof i.className&&(!t&&-1!==i.className.indexOf("foreign-object")||t&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},getTouches:function(e){var t=[];if(e&&e.touches&&e.touches.length>0)for(var i=0;i<e.touches.length;i++)t.push({pageX:e.touches[i].pageX,pageY:e.touches[i].pageY,screenX:e.touches[i].screenX,screenY:e.touches[i].screenY,clientX:e.touches[i].clientX,clientY:e.touches[i].clientY});return t},getMouseEvents:function(e,t,i){var n={};if(-1!=e.type.indexOf("touch")?((n={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:x?2:1,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(n.clientX=n.offsetX=e.changedTouches[0].clientX,n.clientY=n.offsetY=e.changedTouches[0].clientY),i&&"out"==i.name&&(n.type="mouseleave"),"touchmove"==e.type&&e.cancelable&&(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&(N.length>1&&e.touches.length>1||(C||w||a(e.target))&&!y))&&(w=!0,e.preventDefault())):n={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button},t&&"resize"==e.type){var s=this.measureScrollValues(t),r=document.getElementById(t);n.diagramCanvasScrollBounds=s,n.diagramGetBoundingClientRect=r.getBoundingClientRect()}else if(i){if(i.target.id&&""!=i.target.id){var l=o(i.target,"e-diagram");if(l&&l.id&&""!=l.id){var h=l.id;s=this.measureScrollValues(h);n.diagramCanvasScrollBounds=s,n.diagramGetBoundingClientRect=document.getElementById(h+"_content").getBoundingClientRect()}}}else if(e.currentTarget&&e.currentTarget.id){s=this.measureScrollValues(e.currentTarget.id);n.diagramCanvasScrollBounds=s,n.diagramGetBoundingClientRect=e.currentTarget.getBoundingClientRect()}else if(e.target){s=this.measureScrollValues(e.target.id);n.diagramCanvasScrollBounds=s,n.diagramGetBoundingClientRect=e.target.getBoundingClientRect()}return"mousewheel"!=e.type&&"wheel"!=e.type||(e.ctrlKey&&e.preventDefault(),e.currentTarget.focus(),n.wheelDelta=e.wheelDelta,b=!0),"touchmove"==e.type&&e.touches.length>1&&(b=!0),"mousedown"!=e.type&&"touchstart"!=e.type||(m=!0),"mouseup"!=e.type&&"touchend"!=e.type||(m=!1),t||this.isForeignObject(e.target,!0)||"mousemove"!=e.type&&"mouseleave"!=e.type&&"mouseup"!=e.type&&(this.isForeignObject(e.target)||"mousedown"!=e.type&&"keydown"!=e.type&&"keyup"!=e.type)&&(!this.isForeignObject(e.target)||"mousedown"!=e.type||"keydown"!=e.type||"keyup"!=e.type)||b||e.preventDefault(),n},initialiseModule:function(e,t,i){return c(this,void 0,void 0,(function(){var n,s=this;return p(this,(function(o){return"symbolPaletteInstance",window.symbolPaletteInstance?(n={id:e.children[0].id,componentInstance:t,allowDrag:i},window.symbolPaletteInstance.push(n)):(n={id:e.children[0].id,componentInstance:t,allowDrag:i},window.symbolPaletteInstance=[],window.symbolPaletteInstance.push(n)),e.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),s.invokePaletteEvents(e,t)})),e.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),s.invokePaletteEvents(e,t)})),e.addEventListener("mouseup",(function(e){s.invokePaletteEvents(e,t)})),e.addEventListener("mouseleave",(function(e){s.invokePaletteEvents(e,t)})),e.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),s.invokePaletteEvents(e,t)})),e.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),s.invokePaletteEvents(e,t)})),e.addEventListener("touchend",(function(e){s.invokePaletteEvents(e,t)})),setTimeout((function(){this.symbolPaletteDragAndDropModule=new d(e,window.symbolPaletteInstance)}),100),[2]}))}))},invokePaletteEvents:function(e,t){var i;"touchstart"!=e.type&&"touchend"!=e.type&&e.target&&o(e.target,"e-acrdn-header")&&e.preventDefault(),"touchstart"==e.type&&(O=a(e.target)),"touchend"==e.type&&(O=!1);var n=this.palettegetMouseEvents(e);if(i=2===e.target.id.split("_").length?e.target.id.split("_")[0]:function(e,t,i){for(var n,s=e;s&&!r(s,i);){if(s.id&&-1!=s.id.indexOf(t)){n=s.id.split(t)[0];break}s=s.parentNode}return n}(e.target,"_Container","e-symbolpalette"),"mousemove"==e.type&&!u||"mousemove"!=e.type||!m){if(e&&e.target&&e.type){var s=document.getElementById(e.target.id),l=void 0;if(s){for(var h=0;h<s.classList.length;h++)if("e-symbol-draggable"==s.classList[h]){(l=e.target).classList.add("e-symbol-hover");break}var d=document.getElementsByClassName("e-symbol-hover");if(d&&d.length>0)for(var c=0;c<d.length;c++){var p=d[c];(l&&l!=p||null==l)&&p.classList.remove("e-symbol-hover")}}}if("touchmove"==e.type&&i&&O||"touchmove"!=e.type)t.invokeMethodAsync("InvokePaletteEvents",n,i);else{var f=document.getElementById("previewID");f&&f.parentNode&&f.parentNode.removeChild(f)}}},palettegetMouseEvents:function(e){var t={};return-1!=e.type.indexOf("touch")?((t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(t.offsetX=e.changedTouches[0].clientX,t.offsetY=e.changedTouches[0].clientY),"touchmove"==e.type&&(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&(O||a(e.target)))&&(O=!0,e.preventDefault())):t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type},t},exportDiagram:function(t,i,n,s,o,r,a,l){return c(this,void 0,void 0,(function(){var h,d=this;return p(this,(function(u){return h=this,[2,new Promise((function(u,f){return c(d,void 0,void 0,(function(){var d,c,f,g,m,v,b,y;return p(this,(function(p){switch(p.label){case 0:return d="data",i=i,s=s,c=t.margin||{},t.region=t&&0==t.region?"PageSettings":1==t.region?"Content":"ClipBounds",t.fileName=r,t.mode=l?"Download":"Data",t.format=0===a?"JPEG":1===a?"PNG":2===a?"SVG":a,t.orientation=t&&0===t.orientation?"Landscape":"Portrait",f=n,g=new e(n.x,n.y,n.width,n.height),(m=t.clipBounds)&&(f.x=m.x?m.x:f.x,f.y=m.y?m.y:f.y,f.width=m.width||f.width,f.height=m.height||f.height),c={top:c.top,bottom:c.bottom,right:c.right,left:c.left},v=t.fileName||"diagram",[4,h.setCanvas(t,f,g,c,v,s,i)];case 1:return null!==(d=p.sent())&&(o||"Data"===t.mode&&"SVG"===t.format?u(d):(b={id:i+"_ExportImage",src:d},t.margin={top:0,bottom:0,right:0,left:0},(y=h.createHtmlElement("img",b)).onload=function(){var e=h.getMultipleImage(y,t,i,!0,s);u(JSON.stringify(e))})),[2]}}))}))}))]}))}))},setCanvas:function(t,i,n,s,o,r,a){return c(this,void 0,void 0,(function(){var l,h,d,c,u;return p(this,(function(p){switch(p.label){case 0:return t.clipBounds=i,h=new e(n.x,n.y,n.width,n.height),"scaleX","scaleY","scaleOffsetX","scaleOffsetY",d=new e(i.x,i.y,i.width,i.height),this.setScaleValueforCanvas(t,i,r),[4,this.exportAsImage({clipBounds:i,margin:s,region:t.region,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},o,a,t,h,d,r,"Download"===t.mode)];case 1:return c=p.sent(),"SVG"!==t.format&&(u=l="JPEG"===t.format?c.toDataURL("image/jpeg"):"PNG"===t.format?c.toDataURL("image/png"):"BMP"===t.format?c.toDataURL("image/bmp"):c.toDataURL()),"Data"===t.mode?"SVG"===t.format?[2,c]:[2,l]:(this.canvasMultiplePage(t,c,s,u,o),[2,null])}}))}))},exportAsImage:function(e,t,i,n,s,o,r,a){return c(this,void 0,void 0,(function(){var l;return p(this,(function(h){switch(h.label){case 0:return[4,this.imageExport(e,t,i,n,s,o,r,a)];case 1:return(l=h.sent())instanceof Promise?(l.then((function(e){return e})),[2,l]):[2,l]}}))}))},imageExport:function(e,t,i,n,s,o,r,a){return c(this,void 0,void 0,(function(){var a;return p(this,(function(l){return a=this,document.getElementById(i),[2,new Promise((function(l,h){var d=e.clipBounds,c=e.margin,p=s.x,u=s.y,f=s.width,g=s.height,m=document.createElementNS("http://www.w3.org/2000/svg","svg");if("SVG"===n.format&&"ClipBounds"!==n.region)var v={x:String(o.x),y:String(o.y),width:String(o.width+c.right),height:String(o.height+c.bottom)};else v={x:String(o.x),y:String(o.y),width:String(o.width),height:String(o.height)};"SVG"===n.format&&m.setAttribute("transform","translate("+c.left+", "+c.top+")"),a.setAttributeSvg(m,v),v={x:String(p),y:String(u),width:String(f+c.left+c.right),height:String(g+c.top+c.bottom)};var b,y,C=document.getElementById(i+"_backgroundLayer_svg").cloneNode(!0),w=document.getElementById(i+"_diagramLayer_svg").cloneNode(!0);if(C){for(var M=0;M<C.childNodes.length;M++){if((N=C.childNodes[M]).id===i+"_backgroundImageLayer"&&(y=!0),N.id===i+"_backgroundLayer"){b=N;for(var S=N.childNodes.length-1;S>=0;S--){(x=N.childNodes[S]).id!==i+"_backgroundLayerrect"&&N.removeChild(x)}}}if(b&&C.removeChild(b),"PageSettings"!==n.region&&a.setAttributeSvg(C,v),m.appendChild(C),b){for(S=b.childNodes.length-1;S>=0;S--){var x=b.childNodes[S];y||x.setAttribute("fill","transparent"===r.background.background?"white":r.background.background)}m.appendChild(b)}if("PageSettings"!==n.region){a.setTransform(C,o);for(M=0;M<C.childNodes.length;M++){(N=C.childNodes[M]).id!==i+"_backgroundImageLayer"&&N.id!==i+"_backgroundLayer"||a.setTransform(N,o)}}}m.appendChild(w),a.setTransform(w,o);for(M=0;M<w.childNodes.length;M++){var N;(N=w.childNodes[M]).id===i+"_diagramlayer"&&a.setTransform(N,o)}var O=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(m)],{type:"image/svg+xml"}));if("SVG"===n.format){var E;"Data"===n.mode&&"SVG"===n.format&&(E=(new window.XMLSerializer).serializeToString(m),l(E));var I=[],T=(new window.XMLSerializer).serializeToString(m);I.push(T);var D,j=0;if("Download"===n.mode)for(j=0;j<I.length;j++)D=new Blob([I[j]],{type:"application/octet-stream"}),"msie"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(D,t+".svg"):a.triggerDownload("SVG",t,O)}else{var A=document.createElement("canvas"),z=A.getContext("2d"),k=new Image;k.onload=function(){A.height="Content"==e.region?k.height:d.height,A.width="Content"==e.region?k.width:d.width,r.background.imageSource?z.fillStyle="transparent":z.fillStyle="transparent"===r.background.background?"white":r.background.background,z.fillRect(0,0,A.width,A.height),n.fitToPage?z.drawImage(k,c.left,c.top,A.width-(c.left+c.right),A.height-(c.top+c.bottom)):z.drawImage(k,0,0,A.width,A.height),window.URL.revokeObjectURL(O),l(A)},k.src=O}}))]}))}))},triggerDownload:function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},canvasMultiplePage:function(e,t,i,n,s){var o=this,r=[],a=n.substring(n.indexOf(":")+1,n.indexOf(";")),l=a.substring(a.indexOf("/")+1),h=(l="jpeg"===l?void 0:l.toUpperCase())||"JPG";if(e.fitToPage)r=[n],this.exportImage(r,s,h,n);else{if(e.pageHeight=e.pageHeight?e.pageHeight:(void 0).height,e.pageWidth=e.pageWidth?e.pageWidth:(void 0).width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,i=e.margin||{},e.orientation&&("Landscape"===e.orientation&&e.pageHeight>e.pageWidth||"Portrait"===e.orientation&&e.pageWidth>e.pageHeight)){var d=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=d}e.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var c={id:void 0+"_printImage",src:n},p=this.createHtmlElement("img",c);p.onload=function(){r=o.getMultipleImage(p,e,!0),o.exportImage(r,s,h,n)}}},exportImage:function(e,t,i,n){for(var s=[],o=e instanceof HTMLElement?0:e.length,r=0;r<o;r++){for(var a=e[r].replace(/^data:[a-z]*;,/,"").split(","),l=atob(a[1]),h=new ArrayBuffer(l.length),d=new Uint8Array(h),c=0;c<l.length;c++)d[c]=l.charCodeAt(c);s.push(h)}for(var p=0;p<s.length;p++){var u=new Blob([s[p]],{type:"application/octet-stream"});if("msie"===sf.base.Browser.info.name)window.navigator.msSaveOrOpenBlob(u,t+"."+i);else{var f=window.URL.createObjectURL(u),g=document.createElement("a");g.download=t+"."+i.toLocaleLowerCase(),g.href=f,g.click()}}},setScaleValueforCanvas:function(e,t,i){var n="scaleX";e[n]=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||i.height,e.pageWidth=e.pageWidth||i.width;var s=e.orientation||i.orientation;if(s||(s="Portrait"),"Portrait"===s){if(e.pageWidth>e.pageHeight){var o=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=o}}else if(e.pageHeight>e.pageWidth){o=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=o}e.pageWidth&&e.pageHeight&&e.fitToPage&&(e.stretch="Meet");var r=e.pageHeight||t.height,a=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e[n]=a/t.width,e.scaleY=r/t.height,"Meet"===e.stretch?(e[n]=e.scaleY=Math.min(e[n],e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e[n])/2,e.scaleOffsetX=(e.pageWidth-t.width*e[n])/2):"Slice"===e.stretch&&(e[n]=e.scaleY=Math.max(e[n],e.scaleY)),t.width=a,t.height=r),t.x*=e[n],t.y*=e.scaleY},setTransform:function(e,t){e.setAttribute("transform","translate("+-t.x+", "+-t.y+")")},getPrintCanvasStyle:function(e,i){var n=0,s=0,o=new t;if(n=e.width,s=e.height,(i.pageHeight||i.pageWidth)&&(s=i.pageHeight?i.pageHeight:s,n=i.pageWidth?i.pageWidth:n),i.orientation&&("Landscape"===i.orientation&&s>n||"Portrait"===i.orientation&&n>s)){var r=n;n=s,s=r}return o.height=s,o.width=n,o},getMultipleImage:function(e,t,i){var n=[],s=this.createHtmlElement("div",{}),o=this.getPrintCanvasStyle(e,t),r=t.margin,a=r.left,l=r.top,h=r.right,d=r.bottom,c=0,p=o.width+c,u=o.height+0,f=0,g=0;if(t&&!t.fitToPage){s.style.height="auto",s.style.width="auto";var m=e.height,v=e.width,b=0,y=0,C=void 0,w=0,M=0,S=void 0,x=void 0;do{do{w=o.width,M=o.height,f+o.width>=v&&(w=v-f),g+o.height>=m&&(M=m-g),(S=(x=this.createCanvas(void 0+"_multiplePrint",o.width,o.height)).getContext("2d")).fillStyle="white",S.fillRect(0,0,o.width,o.height),S.drawImage(e,c+f,0+g,w,M,a,l,w-h-a,M-d-l),f+o.width>=v&&(f-=f-v),C="PNG"===t.format?x.toDataURL("image/png"):"JPEG"===t.format?x.toDataURL("image/jpeg"):x.toDataURL(),S.restore(),f+=p,i?n.push(C):this.printImage(s,C,b+""+y,p+"px;",u+"px;"),b++}while(f<v);y++,b=c=f=0,g+o.height>=m&&(g-=g-m),g+=u}while(g<m)}else{var N=this.getPrintCanvasStyle(e,t),O=N.width,E=N.height;(S=(x=this.createCanvas(void 0+"_diagram",O,E)).getContext("2d")).drawImage(e,0+a,0+l,e.width-(h+a),e.height-(l+d),0+a,0+l,O-(h+a),E-(l+d));C="PNG"===t.format?x.toDataURL("image/png"):"JPEG"===t.format?x.toDataURL("image/jpeg"):x.toDataURL();S.restore(),i?n.push(C):this.printImage(s,C,0)}return i?n:s},printImage:function(e,t,i,n,o){var r={class:"e-diagram-print-page",style:"width:"+n+"height:"+o},a=this.createHtmlElement("img",r),l=this.createHtmlElement("div",r);s(a,r={id:void 0+"_multiplePrint_img"+i,style:"float:left",src:t}),l.appendChild(a),e.appendChild(l)},print:function(e,t,i,n){return c(this,void 0,void 0,(function(){var s,o;return p(this,(function(r){switch(r.label){case 0:return s={width:i.width,height:i.height},e.mode="Data",n=n,t=t,[4,this.exportDiagram(e,t,i,n,!0,void 0,void 0,!1)];case 1:return o=r.sent(),e.fitToPage&&(e.pageWidth=s.width,e.pageHeight=s.height),this.printImages(o,e),[2,o]}}))}))},onBeforeWindowUnload:function(){h&&!h.closed&&(h.close(),window.removeEventListener("beforeunload",this.onBeforeWindowUnload))},onBeforePrintWindowUnload:function(){h&&(h.removeEventListener("beforeunload",this.onBeforePrintWindowUnload),window.removeEventListener("beforeunload",this.onBeforeWindowUnload))},printImages:function(e,t){var i=this,n={id:void 0+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var s=this.createHtmlElement("img",n);s.onload=function(){var e=i.getMultipleImage(s,t),n=window.open("");h=n,null!=n&&e instanceof HTMLElement&&(n.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),n.addEventListener("load",(function(e){setTimeout((function(){n.window.print()}),3e3)})),n.document.write("<center>"+e.innerHTML+"</center>"),n.document.close(),h.addEventListener("beforeunload",i.onBeforePrintWindowUnload),window.addEventListener("beforeunload",i.onBeforeWindowUnload))}},exportImages:function(e,t){var i=this,n=t&&t.region?t.region:"Content",o=t.margin||{};o={top:isNaN(o.top)?0:o.top,bottom:isNaN(o.bottom)?0:o.bottom,left:isNaN(o.left)?0:o.left,right:isNaN(o.right)?0:o.right};var r=this.getDiagramBounds(n,{});t.clipBounds&&(r.x=isNaN(t.clipBounds.x)?r.x:t.clipBounds.x,r.y=isNaN(t.clipBounds.y)?r.y:t.clipBounds.y,r.width=t.clipBounds.width||r.width,r.height=t.clipBounds.height||r.height);var a=document.createElement("img");s(a,{src:e});var l=this;a.onload=function(){var n=i.createCanvas(l.Diagram.id+"innerImage",r.width+(o.left+o.right),r.height+(o.top+o.bottom)),s=n.getContext("2d");if(s.fillStyle=l.diagram.pageSettings.background.color,s.fillRect(0,0,r.width+(o.left+o.right),r.height+(o.top+o.bottom)),s.drawImage(a,0,0,r.width,r.height,o.left,o.top,r.width,r.height),e=n.toDataURL(),t.printOptions)l.printImages(e,t);else{s.restore();var h=t.fileName||"diagram";i.canvasMultiplePage(t,n,o,e,h)}}},overviewModelBounds:function(){var e,t,i=document.getElementById("overview"),n=i.clientWidth,s=i.clientHeight,o=i.getBoundingClientRect(),r=window.screenX<0?-1*window.screenX:window.screenX,a=window.screenY<0?-1*window.screenY:window.screenY;if(0===n){var l=Math.floor(window.innerWidth-r-Math.floor(o.left));n=l>0?l:Math.floor(window.innerWidth)}if(0===s){var h=Math.floor(window.innerHeight-a-Math.floor(o.top));s=h>0?h:Math.floor(window.innerHeight)}return n>0&&(e=s),s>0&&(t=n),{height:e,width:t}},invokeOverviewEvents:function(e){var t=document.getElementById("overview"),i=this;t&&(t.addEventListener("mousedown",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("mouseup",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("mousemove",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("mouseleave",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("touchstart",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("touchmove",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("touchend",(function(t){i.overviewMouseEventArgs(t,e)})))},diagramOverview:function(e,t,i,n,s){var o=document.getElementById(e+"_diagramLayer_svg").cloneNode(!0),r=document.createElementNS("http://www.w3.org/2000/svg","svg");n.scale=1;var a=document.getElementById(e).clientHeight,l=document.getElementById(e).clientWidth,h=Math.max(Number(t.width),l),d=Math.max(Number(t.height),a).toString(),c=h.toString();i>=1&&(o.setAttribute("style","pointer-events: all;height:"+d+"px;width:"+c+"px;"),o.children[0].setAttribute("transform","translate("+-t.x+","+-t.y+"),scale("+n.scale+")")),r.setAttribute("height",d),r.setAttribute("width",c),r.appendChild(o);var p=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(r)],{type:"image/svg+xml"})),u=document.getElementById("overview_diagramlayer"),f=u.getContext("2d"),g=new Image;g.onload=function(){f.fillStyle="transparent",f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,u.width,u.height),f.setTransform(s,0,0,s,0,0),f.drawImage(g,0,0),window.URL.revokeObjectURL(p)},g.src=p;for(var m=document.getElementById(e+"_htmlLayer_div").cloneNode(!0),v=document.getElementById("overview_htmllayer_div");v.firstChild;)v.firstChild.remove();for(var b=0;b<m.children.length;b++){var y=m.children[b].cloneNode(!0);v.appendChild(y)}},overviewMouseEventArgs:function(e,t){var i=document.getElementById("overview"),n={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button,targetId:e.target.id,overviewGetBoundingClientRect:i.getBoundingClientRect(),targetCssClass:e.target.classList.value,touches:this.getTouches(e),offsetLeft:i.offsetLeft,offsetTop:i.offsetTop};t.invokeMethodAsync("InvokeOverviewEvents",n)}}}()},"./modules/sf-dialog.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Dialog=function(){"use strict";var e="e-dlg-target",t=function(){function t(e){this.popupObj=null,this.zIndex=1e3,this.height="auto",this.width="100%",this.resizeIconDirection="SouthEast",this.visible=!0,this.isModal=!1,this.enableRtl=!1,this.enableResize=!1,this.closeOnEscape=!0,this.allowDragging=!1,this.allowMaxHeight=!0,this.allowPrerender=!1,this.hasFocusableNode=!1,this.openedEnabled=!1,this.closedEnabled=!1,this.onDragEnabled=!1,this.onDragStartEnabled=!1,this.onDragStopEnabled=!1,this.resizingEnabled=!1,this.onResizeStartEnabled=!1,this.onResizeStopEnabled=!1,this.isOpenFullScreen=!1,this.enablePersistence=!1,this.dlgContainer=void 0,this.animationSettings={delay:0,duration:400,effect:"Fade"},this.position={X:"center",Y:"center"},window.sfBlazor=window.sfBlazor,this.updateContext(e),this.isInitialLoad=e.isInitial,window.sfBlazor.setCompInstance(this),this.initialize()}return t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t.prototype.initialize=function(){this.calculatezIndex=1e3===this.zIndex,this.render(),this.element.classList.remove("e-blazor-hidden"),this.setWidth(),this.setMinHeight(),this.enableResize&&(this.setResize(!0),("None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&this.getMinHeight()),this.bindEvent(this.element)},t.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":(sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}),"auto"===this.width&&this.refreshPosition())},t.prototype.setHeight=function(){sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.height)})},t.prototype.setMinHeight=function(){""!==this.minHeight&&sf.base.setStyleAttribute(this.element,{minHeight:sf.base.formatUnit(this.minHeight)})},t.prototype.render=function(){var e=this;if(this.checkPositionData(),this.targetEle=this.getTargetEle(this.target),sf.base.Browser.isDevice&&sf.base.addClass([this.element],"e-device"),sf.base.isNullOrUndefined(this.headerContent)&&(this.headerContent=this.element.querySelector(".e-dlg-header-content")),sf.base.isNullOrUndefined(this.contentEle)&&(this.contentEle=this.element.querySelector(".e-dlg-content")),this.setMaxHeight(),1e3===this.zIndex&&this.setzIndex(this.element,!1),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&this.setAllowDragging(),this.isModal&&sf.base.isNullOrUndefined(this.dlgContainer)&&(this.dlgContainer=this.element.parentElement,this.dlgOverlay=this.element.parentElement.getElementsByClassName("e-dlg-overlay")[0]),!sf.base.isNullOrUndefined(this.element.parentElement)&&(this.allowPrerender||!this.allowPrerender&&(!this.isInitialLoad||this.visible&&this.isInitialLoad))){var t=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=sf.base.createElement("div",{className:"e-dlg-ref-element"}),t.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}sf.base.isNullOrUndefined(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new sf.popups.Popup(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.targetEle,actionOnScroll:"none",enableRtl:this.enableRtl,position:{X:this.position.X,Y:this.position.Y},open:function(){e.enableResize&&e.resetResizeIcon(),e.openedEnabled?e.dotNetRef.invokeMethodAsync("OpenEvent",e.element.classList.toString()):e.focusContent()},close:function(){e.isModal&&(sf.base.addClass([e.dlgOverlay],"e-fade"),e.dlgContainer.style.display="none"),e.hasFocusableNode=!1,e.closedEnabled?e.dotNetRef.invokeMethodAsync("CloseEvent",e.element.classList.toString()):e.popupCloseHandler()}}),this.isModal&&this.positionChange()},t.prototype.checkPositionData=function(){sf.base.isNullOrUndefined(this.position)||(this.isNumberString(this.position.X)&&(this.position.X=parseFloat(this.position.X)),this.isNumberString(this.position.Y)&&(this.position.Y=parseFloat(this.position.Y)))},t.prototype.isNumberString=function(e){return!sf.base.isNullOrUndefined(e)&&"number"!=typeof e&&/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.getTargetEle=function(e){var t;return sf.base.isNullOrUndefined(e)||"string"!=typeof e||(t=document.querySelector(e)),sf.base.isNullOrUndefined(t)?document.body:t},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!sf.base.isNullOrUndefined(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,sf.base.Browser.isIE&&"auto"===this.height&&!sf.base.isNullOrUndefined(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setzIndex=function(e,t){this.zIndex=sf.popups.getZindexPartial(e),t&&(this.popupObj.zIndex=this.zIndex)},t.prototype.updatezIndex=function(){this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.calculatezIndex=this.element.style.zIndex===this.zIndex.toString()},t.prototype.updateTarget=function(){this.targetEle=this.getTargetEle(this.target),this.popupObj.relateTo=this.targetEle,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.targetEle.appendChild(this.dlgContainer),this.enableResize&&this.setResize(!1)},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var t=this.element.querySelector("."+this.resizeIconDirection);sf.base.isNullOrUndefined(t)||(t.style.bottom="-"+e.toString()+"px")}},t.prototype.getMouseEvtArgs=function(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type}},t.prototype.setAllowDragging=function(){var e=this,t=this;this.dragObj=new sf.base.Draggable(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(i){e.onDragStartEnabled&&t.dotNetRef.invokeMethodAsync("DragStartEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)}),i.bindEvents(i.dragElement)},drag:function(i){e.onDragEnabled&&t.dotNetRef.invokeMethodAsync("DragEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)})},dragStop:function(i){if(t.isModal){sf.base.isNullOrUndefined(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y);var n=document.querySelector("html").getAttribute("dir");t.element.style.position=sf.base.isNullOrUndefined(n)||"rtl"!==n?"relative":t.element.style.position}e.onDragStopEnabled&&t.dotNetRef.invokeMethodAsync("DragStopEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)}),t.element.classList.remove("e-restrict-left"),e.updatePersistData()}}),sf.base.isNullOrUndefined(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setEnableRTL=function(){var e=this.element.querySelector(".e-resize-handle");sf.base.isNullOrUndefined(e)||e.parentElement!==this.element||(sf.popups.removeResize(),this.setResize(!1))},t.prototype.setResize=function(e){if(this.enableResize){if(!sf.base.isNullOrUndefined(this.element.querySelector(".e-icons.e-resize-handle")))return;var t=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth;this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):!this.isModal||this.target!==document.body&&"body"!==this.target||this.element.classList.add("e-resize-viewport"),sf.popups.createResize({element:this.element,direction:this.resizeIconDirection,minHeight:parseInt(t.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:"body"===this.target||"document.body"===this.target?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else{if(e)return;sf.popups.removeResize(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove("e-restrict-left"):this.element.classList.remove("e-resize-viewport")}},t.prototype.getMinHeight=function(){var e="0px",t="0px";sf.base.isNullOrUndefined(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);var i=sf.base.select(".e-footer-content",this.element);sf.base.isNullOrUndefined(i)||(t=getComputedStyle(i).height);var n=parseInt(e.slice(0,e.indexOf("p")),10),s=parseInt(t.slice(0,t.indexOf("p")),10);return sf.popups.setMinHeight(n+30+(isNaN(s)?0:s)),n+30+s},t.prototype.changePosition=function(e){this.isModal&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)&&this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.updateContext(e),this.checkPositionData(),this.positionChange(),this.updatePersistData()},t.prototype.setOverlayZindex=function(e){var t;t=sf.base.isNullOrUndefined(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element);(sf.base.isNullOrUndefined(e)?this.element:e).focus(),this.hasFocusableNode=!0},t.prototype.getAutoFocusNode=function(e){var t=e.querySelector(".e-dlg-closeicon-btn"),i=e.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0],sf.base.isNullOrUndefined(n)){if(n=this.focusableElements(this.contentEle),!sf.base.isNullOrUndefined(n))return n;if(!sf.base.isNullOrUndefined(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=n;return t},t.prototype.getValidFocusNode=function(e){for(var t,i=0;i<e.length;i++){if(((t=e[i]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t},t.prototype.disableElement=function(e,t){var i=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null},t.prototype.focusableElements=function(e){if(!sf.base.isNullOrUndefined(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null},t.prototype.getMaxHeight=function(){return this.element.style.maxHeight},t.prototype.OnPropertyChanged=function(e){this.updateContext(e);for(var t=0,i=Object.keys(e);t<i.length;t++){switch(i[t]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}),this.refreshPosition(),this.updatePersistData();break;case"height":this.setHeight(),this.refreshPosition(),this.updatePersistData();break;case"minHeight":this.setMinHeight();break;case"target":this.updateTarget();break;case"zIndex":this.updatezIndex();break;case"allowDragging":this.allowDragging?this.setAllowDragging():this.destroyDraggable();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize(!1)}}},t.prototype.fullScreen=function(t){if(t){sf.base.addClass([this.element],"e-dlg-fullscreen"),this.element.style.top=document.scrollingElement.scrollTop+"px";var i=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=sf.base.isNullOrUndefined(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=i,sf.base.addClass([document.body],[e,"e-scroll-disabled"]),this.allowDragging&&!sf.base.isNullOrUndefined(this.dragObj)&&(this.dragObj.destroy(),this.dragObj=void 0)}else sf.base.removeClass([this.element],"e-dlg-fullscreen"),sf.base.removeClass([document.body],[e,"e-scroll-disabled"]),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&sf.base.isNullOrUndefined(this.dragObj)&&this.setAllowDragging()},t.prototype.show=function(t,i){if(this.isOpenFullScreen=t,!this.element.classList.contains("e-popup-open")||!sf.base.isNullOrUndefined(t)){sf.base.isNullOrUndefined(t)||this.fullScreen(t),this.element.style.maxHeight!==i&&(this.allowMaxHeight=!1,this.element.style.maxHeight=i),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay=this.element.parentElement.querySelector(".e-dlg-overlay")),this.isModal&&!sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",sf.base.removeClass([this.dlgOverlay],"e-fade"),sf.base.isNullOrUndefined(this.targetEle)?sf.base.addClass([document.body],[e,"e-scroll-disabled"]):(this.targetEle===document.body?this.dlgContainer.style.position="fixed":this.dlgContainer.style.position="absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",sf.base.addClass([this.targetEle],[e,"e-scroll-disabled"])));var n={name:"None"===this.animationSettings.effect&&"Enable"===sf.base.animationMode?"Fade":this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},s=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(s,!0),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?this.popupObj.show():this.popupObj.show(n)}},t.prototype.hide=function(){(this.isModal||this.isOpenFullScreen)&&sf.base.removeClass([this.targetEle,document.body],[e,"e-scroll-disabled"]);var t={name:"None"===this.animationSettings.effect&&"Enable"===sf.base.animationMode?"Fade":this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};return"None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?this.popupObj.hide():this.popupObj.hide(t),this.allowPrerender||this.destroyRefElement(),this.element.classList.toString()},t.prototype.refreshPosition=function(){this.isModal&&isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))?(this.element.style.top=this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.popupObj.refreshPosition()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.destroyDraggable=function(){sf.base.isNullOrUndefined(this.dragObj)||(this.dragObj.destroy(),this.dragObj=void 0)},t.prototype.destroyRefElement=function(){sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0)},t.prototype.destroy=function(t,i){this.updateContext(t);var n=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(!sf.base.isNullOrUndefined(this.cssClass)&&""!==this.cssClass){var s=this.cssClass.split(" ");sf.base.removeClass([this.element],s)}if(sf.base.Browser.isDevice&&sf.base.removeClass([this.element],"e-device"),sf.base.removeClass([this.getTargetEle(this.target)],[e,"e-scroll-disabled"]),this.unBindEvent(this.element),this.element.classList.contains("e-dlg-fullscreen")&&sf.base.removeClass([document.body],[e,"e-scroll-disabled"]),this.isModal&&sf.base.removeClass([sf.base.isNullOrUndefined(this.targetEle)?document.body:this.targetEle],"e-scroll-disabled"),this.element.classList.contains("e-dlg-resizable")&&this.element.classList.remove("e-dlg-resizable"),this.element.classList.contains("e-draggable")&&(this.dragObj.destroy(),this.dragObj=void 0),this.element.classList.contains("e-popup")&&(this.popupObj.destroy(),this.popupObj=void 0),this.destroyRefElement(),i)for(var o=0;o<this.element.children.length;o++)this.element.children[o].classList.add("e-hide");else if(!sf.base.isNullOrUndefined(this.element.children))for(o=0;o<=this.element.children.length;o++)o-=o,sf.base.detach(this.element.children[o]);for(o=0;o<n.length;o++)this.element.removeAttribute(n[o]);if(this.isModal){sf.base.detach(this.element.nextElementSibling);var r=this.element.parentElement;r.removeAttribute("class"),r.removeAttribute("style"),this.element.classList.remove("e-dlg-modal")}this.element.classList.remove("e-dialog")},t.prototype.bindEvent=function(e){sf.base.EventHandler.add(e,"keydown",this.keyDown,this),sf.base.Browser.isDevice&&sf.base.EventHandler.add(window,"orientationchange",this.orientationOnChange,this)},t.prototype.unBindEvent=function(e){sf.base.EventHandler.remove(e,"keydown",this.keyDown),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.orientationOnChange)},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.orientationOnChange=function(){var e=this;this.element.style.display="none",setTimeout((function(){sf.popups.setMaxWidth(e.targetEle.clientWidth),sf.popups.setMaxHeight(e.targetEle.clientHeight),e.setMaxHeight(),e.refreshPosition(),e.element.style.display=""}),250)},t.prototype.popupCloseHandler=function(){var e=document.activeElement;sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blur)||e.blur(),sf.base.isNullOrUndefined(this.storeActiveElement)||sf.base.isNullOrUndefined(this.storeActiveElement.focus)||this.storeActiveElement.focus()},t.prototype.windowResizeHandler=function(){sf.popups.setMaxWidth(this.targetEle.clientWidth),sf.popups.setMaxHeight(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.onResizeStart=function(e,t){var i=this.getMouseEvtArgs(e);this.onResizeStartEnabled&&this.dotNetRef.invokeMethodAsync("ResizeStartEvent",i)},t.prototype.onResizing=function(e,t){this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",this.getMouseEvtArgs(e))},t.prototype.onResizeComplete=function(e,t){this.onResizeStopEnabled&&this.dotNetRef.invokeMethodAsync("ResizeStopEvent",this.getMouseEvtArgs(e)),this.updatePersistData()},t.prototype.updatePersistData=function(){this.enablePersistence&&window.localStorage.setItem(this.dataId,JSON.stringify({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),X:parseFloat(this.element.style.left),Y:parseFloat(this.element.style.top)}))},t.prototype.getFocusElement=function(e){var t=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return t[t.length-1]},t.prototype.keyDown=function(e){var t=this;if(9===e.keyCode&&this.isModal){var i=void 0,n=void 0,s=this.element.querySelector(".e-footer-content");sf.base.isNullOrUndefined(s)||(n=s.querySelectorAll("button"),!sf.base.isNullOrUndefined(i)&&n.length>0&&(i=n[n.length-1]),sf.base.isNullOrUndefined(i)&&s.childNodes.length>0&&(i=this.getFocusElement(s))),sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(this.contentEle)&&(i=this.getFocusElement(this.contentEle)),sf.base.isNullOrUndefined(i)||document.activeElement!==i||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),sf.base.isNullOrUndefined(i)||i.focus())}if(27===e.keyCode&&this.closeOnEscape&&(document.querySelector(".e-popup-open:not(.e-dialog, .e-tooltip-wrap, .e-toolbar-pop)")||this.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type})),this.hasFocusableNode){var o=document.activeElement,r=["input","textarea"].indexOf(o.tagName.toLowerCase())>-1,a=!1;r||(a=o.hasAttribute("contenteditable")&&"true"===o.getAttribute("contenteditable")),(13===e.keyCode&&!e.ctrlKey&&"textarea"!==o.tagName.toLowerCase()&&r&&!sf.base.isNullOrUndefined(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===o.tagName.toLowerCase()||a)&&!sf.base.isNullOrUndefined(this.primaryButtonEle))&&setTimeout((function(){var e=t.element.querySelector(".e-footer-content button.e-btn.e-primary");null!==e&&e.click()}))}},t}();return{initialize:function(e){e.dataId&&new t(e)},getClassList:function(e){return e&&e.classList.toString()},getMaxHeight:function(e){return e&&window.sfBlazor.getCompInstance(e).getMaxHeight()},changePosition:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).changePosition(e)},updateAnimation:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).updateContext(e)},focusContent:function(e){e&&window.sfBlazor.getCompInstance(e).focusContent()},refreshPosition:function(e){e&&window.sfBlazor.getCompInstance(e).refreshPosition()},getDimension:function(e){return e&&window.sfBlazor.getCompInstance(e).getDimension()},popupCloseHandler:function(e){e&&window.sfBlazor.getCompInstance(e).popupCloseHandler()},propertyChanged:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).OnPropertyChanged(e)},show:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).show(e.fullScreen,e.maxHeight)},hide:function(e){return e&&window.sfBlazor.getCompInstance(e).hide()},destroy:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).destroy(e,e.isClient)}}}()},"./modules/sf-drop-down-button.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DropDownButton=function(){"use strict";var e="e-colorpicker-container",t=".e-colorpicker.e-modal",i="mousedown touchstart",n=function(){function n(e,t,i,n,s){this.isPopupClick=!1,this.dataId=n,this.cp_dataId=s,this.element=e,this.dotNetRef=i,this.popup=t,window.sfBlazor.setCompInstance(this),this.addScrollEvents(!0)}return n.prototype.openPopup=function(t){this.popup.style.visibility="hidden",document.body.appendChild(this.popup),t&&sf.splitbuttons.setBlankIconStyle(this.popup),this.popup.classList.remove("e-hidden"),this.popup.classList.remove("e-transparent");var n=sf.popups.getZindexPartial(this.element),s=this.element.parentElement.classList.contains(e);s&&window.sfBlazor.getCompInstance(this.cp_dataId).setPaletteWidth(this.popup.querySelector(".e-container"),!1,n);(this.setPosition(s),sf.base.EventHandler.remove(document,i,this.mouseDownHandler),this.addEventListener(),this.popup.style.zIndex=n+"",this.popup.style.visibility="",s)&&window.sfBlazor.getCompInstance(this.cp_dataId).setOffset(this.popup,n);if(this.popup.firstElementChild)if(this.popup.firstElementChild.firstElementChild&&s)this.popup.firstElementChild.firstElementChild.focus();else{var o=this.popup.firstElementChild.querySelector(".e-palette");o?o.focus():this.popup.firstElementChild.focus()}},n.prototype.setPosition=function(e){var t,i,n,s,o=this.popup.getBoundingClientRect();o.height,o.width;this.popup.style.display="none";var r=this.element.getBoundingClientRect();e&&sf.base.Browser.isDevice?(t=document.documentElement.clientWidth/2-o.width/2+pageXOffset,i=document.documentElement.clientHeight/2-o.height/2+pageYOffset):(t=r.left+pageXOffset,i=r.bottom+pageYOffset,s=r.top+pageYOffset,n=r.left+pageXOffset,s+r.height+o.height>document.documentElement.clientHeight?(i=s-(o.height+4))<0&&((i=0)+o.height<document.documentElement.clientHeight?n+r.width+o.width<document.documentElement.clientWidth?t=n+r.width:n-o.width<0?t=n:n-o.width>=0&&(t=n-o.width):i=r.bottom+pageYOffset):s+r.height+o.height<document.documentElement.clientHeight&&n+o.width>document.documentElement.clientWidth&&r.right-o.width>document.documentElement.clientLeft&&(t=t+r.width-o.width)),-1!==this.element.id.indexOf("imageEditor")&&sf.base.Browser.isDevice&&(t=document.documentElement.clientWidth/2-o.width/2+pageXOffset),this.popup.style.left=Math.ceil(t)+"px",this.popup.style.top=Math.ceil(i)+"px",this.popup.style.display="block"},n.prototype.mouseDownHandler=function(i){if(this.popup.parentElement){var n=i.target,s=!0,o=this.element.parentElement.classList.contains(e);if(o){var r=window.sfBlazor.getCompInstance(this.cp_dataId);(sf.base.closest(n,".e-apply")||sf.base.closest(n,".e-cancel"))&&r.removeZIndex()}if(!sf.base.Browser.isDevice&&n.classList.contains("e-hsv-model")){var a=n.parentElement.getBoundingClientRect(),l=this.element.getBoundingClientRect();s=i.clientX>=a.left&&i.clientX<=a.right&&i.clientY>=a.top&&i.clientY<=a.bottom||i.clientX>=l.left&&i.clientX<=l.right&&i.clientY>=l.top&&i.clientY<=l.bottom}if(!s||!sf.base.closest(n,"#"+this.getDropDownButton().id)&&!sf.base.closest(i.target,"#"+this.popup.id)&&!sf.base.closest(i.target,t)){if(o)(r=window.sfBlazor.getCompInstance(this.cp_dataId)).removeZIndex();this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),this.removeEventListener()}}else this.removeEventListener()},n.prototype.keydownHandler=function(t){var i=this.getElement(),n=this.element.parentElement.classList.contains(e),s=this.element.parentElement.classList.contains("e-rtl");n&&window.sfBlazor.getCompInstance(this.cp_dataId).paletteKeyDown(t,s);if(t.altKey)38===t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),i.focus(),this.removeEventListener());else{var o=this.popup.firstElementChild;if((27===t.keyCode||9===t.keyCode&&!n)&&(t.stopPropagation(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),27===t.keyCode&&t.preventDefault(),i.focus(),this.removeEventListener()),!o||!o.classList.contains("e-dropdown-menu"))return;if(13===t.keyCode)return t.preventDefault(),void(t.target.classList.contains("e-item")&&t.target.classList.contains("e-focused")?(i.focus(),this.removeEventListener()):t.stopPropagation());38!==t.keyCode&&40!==t.keyCode||(t.target.classList.contains("e-dropdown-menu")&&t.stopPropagation(),t.preventDefault(),sf.splitbuttons.upDownKeyHandler(o,t.keyCode))}},n.prototype.getElement=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.firstElementChild:this.element},n.prototype.getDropDownButton=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.getElementsByClassName("e-dropdown-btn")[0]:this.element},n.prototype.closePopup=function(){if(this.removeEventListener(),this.isPopupClick&&(this.getElement().focus(),this.isPopupClick=!1),this.element.parentElement.classList.contains(e)&&sf.base.Browser.isDevice){var i=this.popup;if(i&&i.firstElementChild){var n=document.querySelector(t),s=i.querySelector(".e-ctrl-btn");n&&!s&&n.remove()}}},n.prototype.dropDownClickHandler=function(t){if(this.element.parentElement.classList.contains(e)){var i=window.sfBlazor.getCompInstance(this.cp_dataId);sf.base.closest(t.target,".e-dropdown-btn")&&i.removeZIndex()}},n.prototype.scrollHandler=function(t){if(this.popup&&document.getElementById(this.popup.id)){var i=this.element.parentElement.classList.contains(e);if(this.setPosition(i),i)window.sfBlazor.getCompInstance(this.cp_dataId).setOffset(this.popup)}else{var n=this.getDropDownButton();n&&document.getElementById(n.id)||sf.base.EventHandler.remove(t.target,"scroll",this.scrollHandler)}},n.prototype.clickHandler=function(e){this.isPopupClick=!0},n.prototype.addEventListener=function(e){if(sf.base.EventHandler.add(document,i,this.mouseDownHandler,this),sf.base.EventHandler.add(this.popup,"click",this.clickHandler,this),sf.base.EventHandler.add(this.popup,"keydown",this.keydownHandler,this),sf.base.EventHandler.add(this.element,"click",this.dropDownClickHandler,this),e&&this.popup.firstElementChild){var t=this.popup.querySelector(".e-focused");t?t.focus():this.popup.firstElementChild.focus()}},n.prototype.removeEventListener=function(e){if(sf.base.EventHandler.remove(document,i,this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"click",this.dropDownClickHandler),this.popup.parentElement&&(sf.base.EventHandler.remove(this.popup,"click",this.clickHandler),sf.base.EventHandler.remove(this.popup,"keydown",this.keydownHandler),e)){var t=this.getDropDownButton();t&&document.getElementById(t.id)&&(this.addScrollEvents(!1),this.element.appendChild(this.popup))}},n.prototype.addScrollEvents=function(e){for(var t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++){var n=i[t];e?sf.base.EventHandler.add(n,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(n,"scroll",this.scrollHandler)}},n}();return{openPopup:function(e,t,i,s,o,r){var a=window.sfBlazor.getCompInstance(o);sf.base.isNullOrUndefined(e)||(sf.base.isNullOrUndefined(a)?(new n(e,t,i,o,r),a=window.sfBlazor.getCompInstance(o)):a.popup=t,a.openPopup(s))},addEventListener:function(e){var t=window.sfBlazor.getCompInstance(e);t.removeEventListener(),t.addEventListener(!0)},removeEventListener:function(e){window.sfBlazor.getCompInstance(e).removeEventListener(!0)},closePopup:function(e){window.sfBlazor.getCompInstance(e).closePopup()},setIconStyle:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.splitbuttons.setBlankIconStyle(i.popup,t)}}}()},"./modules/sf-dropdownlist.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DropDownList=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},t="e-list-group-item",i=function(){function i(e,t,i,n,s){var o=this;this.activeIndex=null,this.prevSelectPoints={},window.sfBlazor=window.sfBlazor,this.preStartIndex=0,this.startIndex=0,this.currentPage=0,this.virtualPopupHeight=0,this.isKeyBoardAction=!1,this.scrollPreStartIndex=0,this.isScrollActionMade=!1,this.preventScrollAction=!1,this.preventKeyAction=!1,this.isVirtualAction=!1,this.keyDownAction=!1,this.isUpwardScroll=!1,this.mouseScrollAction=!1,this.firstRender=!0,this.virtualListHeight=0,this.bindScrollEvent=function(){o.observe((function(e){return o.scrollListener(e)}))},this.sentinelInfo={up:{check:function(e,t){var i=e.top-o.containerRect.top;return t.entered=i>=0,i+o.listHeight*o.options.virtualizedItemsCount/2>=0},axis:"Y"},down:{check:function(e,t){o.popupContentEle.clientHeight;var i=e.bottom;return t.entered=e.bottom<=o.containerRect.bottom,i-o.listHeight*o.options.virtualizedItemsCount/2<=o.listHeight*o.options.virtualizedItemsCount/2},axis:"Y"}},this.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},this.dataId=e,this.containerElement=t,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return i.prototype.initialize=function(){this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},sf.base.Browser.isDevice?sf.base.EventHandler.add(window,"orientationchange",this.scrollHandler,this):(new sf.base.KeyboardEvents(this.containerElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.options.enableVirtualization&&sf.base.EventHandler.add(this.containerElement,"keyup",this.keyUpHandler,this)),"SfComboBox"===this.options.moduleName&&sf.base.EventHandler.add(this.element,"keydown",this.onFilterDown,this),sf.base.EventHandler.add(window,"resize",this.windowResize,this);var e=parseInt(this.options.popupWidth,10);parseInt(this.options.width,10);if("SfDropDownList"!==this.options.moduleName&&sf.base.Browser.isDevice&&(e>window.outerWidth||document.querySelector(".e-input-group").getBoundingClientRect().left+e>window.outerWidth)){var t=window.outerHeight.toString()+"px";this.containerElement.parentElement.style.height=t}},i.prototype.keyUpHandler=function(e){this.keyDownAction=!1},i.prototype.findListElement=function(e,t,i,n){var s=null;if(e)for(var o=[].slice.call(e.querySelectorAll(t)),r=0;r<o.length;r++)if(o[r].getAttribute(i)===n+""){s=o[r];break}return s},i.prototype.windowResize=function(){this.isPopupOpen()&&this.popupObj.refreshPosition(this.containerElement)},i.prototype.updateSelectionList=function(){if(!this.list.querySelector(".e-active")&&this.options.value){var e=this.findListElement(this.list,"li","data-value",this.options.value);e&&e.classList.add("e-active")}},i.prototype.scrollListener=function(t){var i=this;if(!this.preventScrollAction){var n=t.sentinel,s=this.preStartIndex;if(this.viewInfo=this.getInfoFromView(t.direction,n,t.offset,!1),this.isUpwardScroll=!1,this.preStartIndex===s||this.isKeyBoardAction){if(this.isScrollActionMade){this.preventKeyAction=!1,this.isScrollActionMade=!1;var o=this.list.querySelectorAll(".e-virtual-list").length,r=this.list.querySelector(".e-list-item"),a=t.offset.top-r.offsetHeight*o;this.list.getElementsByClassName("e-virtual-ddl-content")[0].style.transform="translate(0px,"+a+"px)"}}else this.isScrollActionMade=!1,this.currentPage=this.viewInfo.currentPage,this.virtualInfo=e({},this.viewInfo),this.preventKeyAction=!0,this.isVirtualAction=!0,setTimeout((function(){i.dotNetRef.invokeMethodAsync("VirtualScrollRefreshAsync",{virtualItemStartIndex:i.viewInfo.startIndex,virtualItemEndIndex:i.viewInfo.endIndex,listItemHeight:i.virtualListHeight,scrollTop:i.viewInfo.offsets.top,pageCount:i.getPageCount(i.popupObj.element,!0),isMouseScrollAction:i.mouseScrollAction}).then((function(){i.popupObj&&(i.list=i.popupObj.element.querySelector(".e-content")||sf.base.select(".e-content"),i.updateSelectionList(),i.liCollections=i.getItems()),i.isVirtualAction=!1,i.preventKeyAction=!1}))}),10);this.prevInfo=this.viewInfo,this.isKeyBoardAction=!1}},i.prototype.getInfoFromView=function(e,t,i,n){var s={direction:e,sentinelInfo:t,offsets:i,startIndex:this.preStartIndex,endIndex:this.preEndIndex},o=this.popupContentEle.getBoundingClientRect().height,r=0==this.listHeight?this.virtualListHeight:this.listHeight,a=i.top/r,l=o/r,h=a+l,d=this.options.virtualizedItemsCount/4,c=this.options.totalCount;if("down"===s.direction){var p=Math.round(h)-Math.round(d);if(sf.base.isNullOrUndefined(s.startIndex)||h>s.startIndex+Math.round(this.options.virtualizedItemsCount/2+d)&&s.endIndex!==c){s.startIndex=p>=0?Math.round(p):0,s.startIndex=s.startIndex>a?Math.floor(a):s.startIndex;var u=s.startIndex+this.options.virtualizedItemsCount;s.startIndex=u<h?Math.ceil(h)-this.options.virtualizedItemsCount:s.startIndex,s.endIndex=u<c?u:c,s.startIndex=u>=c?s.endIndex-this.options.virtualizedItemsCount>0?s.endIndex-this.options.virtualizedItemsCount:0:s.startIndex,s.currentPage=Math.ceil(s.endIndex/this.options.virtualizedItemsCount)}}else if("up"===s.direction){if(s.startIndex&&s.endIndex)if(a<Math.round((s.startIndex*r+d*r)/r)){var f=d>l?d:l+l/4;u=Math.round(a+f);s.endIndex=u<c?u:c;p=s.endIndex-this.options.virtualizedItemsCount;s.startIndex=p>0?p:0,s.endIndex=p<0?this.options.virtualizedItemsCount:s.endIndex,s.currentPage=Math.ceil(s.startIndex/this.options.virtualizedItemsCount)}}return n?this.scrollPreStartIndex=s.startIndex:(this.preStartIndex=s.startIndex,this.startIndex=s.startIndex,this.preEndIndex=s.endIndex),s},i.prototype.observe=function(e){this.containerRect=this.popupContentEle.getBoundingClientRect(),sf.base.EventHandler.add(this.popupContentEle,"wheel mousedown",this.popupScrollHandler,this),this.touchModule=new sf.base.Touch(this.popupContentEle,{scroll:this.popupScrollHandler.bind(this)}),sf.base.EventHandler.add(this.popupContentEle,"scroll",this.virtualScrollHandler(e),this)},i.prototype.popupScrollHandler=function(e){this.mouseScrollAction=!0,this.preventScrollAction=!1},i.prototype.virtualScrollHandler=function(e){var t=this,i="chrome"===sf.base.Browser.info.name?200:100,n=0,s=sf.base.debounce(e,i),o=sf.base.debounce(e,50);return function(e){var i=e.target.scrollTop,r=e.target.scrollLeft,a=n<i&&!t.isUpwardScroll?"down":"up";n=i;var l=t.sentinelInfo[a],h=t.scrollPreStartIndex,d={top:i,left:r};if(t.list.querySelectorAll(".e-virtual-list").length>0){t.getInfoFromView(a,l,d,!0);if(t.scrollPreStartIndex!=h&&!t.preventScrollAction)t.isScrollActionMade=!0,t.list.querySelector(".e-virtual-ddl-content").style.transform="translate(0px,"+i+"px)"}var c=s;"X"===l.axis&&(c=o),c({direction:a,sentinel:l,offset:{top:i,left:r},focusElement:document.activeElement})}},i.prototype.setAutoFillSelection=function(e){this.isAndroidAutoFill(e)||this.autoFillSelection(e)},i.prototype.onFilterDown=function(e){13!==e.keyCode&&40!==e.keyCode&&38!==e.keyCode&&9!==e.keyCode&&(this.prevSelectPoints=this.getSelectionPoints())},i.prototype.getSelectionPoints=function(){var e=this.element;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},i.prototype.autoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.element.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){var n=i+e.substr(i.length,e.length);this.element.value=n,this.element.setSelectionRange(t.start,this.element.value.length)}else this.element.value=e,this.element.setSelectionRange(0,this.element.value.length)},i.prototype.isAndroidAutoFill=function(e){if(sf.base.Browser.isAndroid){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,n=t.end,s=this.prevSelectPoints.start,o=t.start;return 0!==i&&(i===e.length&&s===e.length||s>o&&i>n||i===n&&s===o)}return!1},i.prototype.removeFillSelection=function(){var e=this.getSelectionPoints();this.element.setSelectionRange(e.end,e.end)},i.prototype.keyActionHandler=function(e){if(this.preventKeyAction&&this.options.enableVirtualization)e.preventDefault();else{var t={Action:e.action,Key:e.key,Events:e,Type:e.type};this.isDisposed||("space"===e.action&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault(),this.options.enableVirtualization&&this.keyDownAction||this.dotNetRef.invokeMethodAsync("KeyActionHandler",t)),("tab"!==e.action&&"close"!==e.action&&"space"!==e.action&&"enter"!==e.action&&"open"!==e.action&&("SfDropDownList"===this.options.moduleName||"home"!==e.action&&"end"!==e.action)||"enter"===e.action&&!sf.base.isNullOrUndefined(this.isPopupOpen()))&&e.preventDefault()}this.keyDownAction=!0},i.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),n=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+n)},i.prototype.setPopupPosition=function(e){var t,i=e,n=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),s=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],r=s.getBoundingClientRect().height,a=this.list.offsetHeight/2,l=sf.base.isNullOrUndefined(n)?s.offsetTop:n.offsetTop;if(o.offsetTop-a<l&&!sf.base.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!sf.base.isNullOrUndefined(n)){var h=this.list.offsetHeight/r,d=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(h-(this.liCollections.length-this.activeIndex))*r-i+d,this.list.scrollTop=n.offsetTop}else l>a?(t=a-r/2,this.list.scrollTop=l-a+r/2):t=l;return-(t=t+r+i-(r-this.containerElement.offsetHeight)/2)},i.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},i.prototype.getListHeight=function(){var e=sf.base.createElement("div",{className:"e-dropdownbase"}),t=sf.base.createElement("li",{className:"e-list-item"}),i=sf.base.formatUnit(this.options.popupHeight);e.style.height=parseInt(i,10).toString()+"px",e.appendChild(t),document.body.appendChild(e),this.virtualPopupHeight=e.getBoundingClientRect().height;var n=Math.ceil(t.getBoundingClientRect().height);return e.remove(),this.virtualListHeight=n,n},i.prototype.renderPopup=function(e,t,i,n,s,o){var r=this;this.options=s,this.popupHolder=t,this.popupContentEle=e.querySelector(".e-content"),this.list=t.querySelector(".e-content")||sf.base.select(".e-content",this.popupContainer),this.liCollections=this.getItems();var a,l=0;this.preventScrollAction=!0;var h,d=sf.base.formatUnit(this.options.popupHeight);if(this.wireListEvents(),e){var c=document.getElementById(e.id);c&&sf.base.remove(c)}if(document.body.appendChild(e),e.style.visibility="hidden",this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName?(this.filterInput=e.querySelector("input.e-input"),h=this.filterInput.parentElement,new sf.base.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.options.enableVirtualization&&sf.base.EventHandler.add(this.filterInput,"keyup",this.keyUpHandler,this)):this.filterInput=this.element),"auto"!==this.options.popupHeight){var p=0;if(sf.base.isNullOrUndefined(h)||(p=h.parentElement.getBoundingClientRect().height,d=(parseInt(d,10)-p).toString()+"px"),e.querySelector(".e-ddl-header")){var u=e.querySelector(".e-ddl-header"),f=Math.round(u.getBoundingClientRect().height);e.classList.contains("e-multi-column")&&(f+=13),d=(parseInt(d,10)-(f+p)).toString()+"px"}if(e.querySelector(".e-ddl-footer")){var g=e.querySelector(".e-ddl-footer");f=Math.round(g.getBoundingClientRect().height);e.classList.contains("e-multi-column")&&(f+=13),d=(parseInt(d,10)-(f+p)).toString()+"px"}this.list.style.maxHeight=(parseInt(d,10)-2).toString()+"px",e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)}else e.style.height="auto";if(this.list&&"SfAutoComplete"!==this.options.moduleName&&!this.list.classList.contains("e-nodata")&&this.setScrollPosition(),sf.base.Browser.isDevice&&!this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName)){l=this.getOffsetValue(e);var m=this.isEmptyList()?this.list:this.liCollections[0];a=-(parseInt(getComputedStyle(m).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))}this.popupCreation(e,l,a);var v=this.options.enableVirtualization&&this.options.hasItemTemplate?e.querySelectorAll("li.e-list-item:not(.e-virtual-list)"):e.querySelectorAll("li.e-list-item");this.listHeight=this.virtualListHeight=v.length>0?Math.ceil(v[0].getBoundingClientRect().height):0,this.virtualListHeight=this.virtualListHeight<this.listHeight?this.listHeight:this.virtualListHeight,this.options.enableVirtualization&&this.options.hasItemTemplate&&this.firstRender&&(this.dotNetRef.invokeMethodAsync("UpdateListHeight",this.listHeight),this.firstRender=!1),this.checkCollision(e),sf.base.Browser.isDevice&&(this.popupObj.element.classList.add("e-ddl-device"),("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.options.allowFiltering&&"SfDropDownList"===this.options.moduleName&&(this.popupObj.element.classList.add("e-ddl-device-filter"),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),sf.base.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;z-index:"+this.options.zIndex.toString()+";"}),sf.base.addClass([document.body,this.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition())),e.style.visibility="visible";var b=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if(this.options.allowFiltering&&"SfDropDownList"===this.options.moduleName&&sf.base.Browser.isDevice&&b&&(e.style.position="fixed"),sf.base.addClass([e],"e-popup-close"),sf.base.Browser.isDevice){if("SfDropDownList"===this.options.moduleName&&!this.options.allowFiltering||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)for(var y=0,C=this.popupObj.getScrollableParent(this.containerElement);y<C.length;y++){var w=C[y];sf.base.EventHandler.add(w,"scroll",this.scrollHandler,this)}this.isFilterLayout()&&sf.base.EventHandler.add(this.list,"scroll",this.listScroll,this)}if(null!==i&&null!==i.popup&&n){for(var M=0,S=Object.keys(i.popup);M<S.length;M++){switch(S[M]){case"collision":!i.popup.collision||this.popupObj.collision.X===i.popup.collision.X.toLowerCase()&&this.popupObj.collision.Y===i.popup.collision.Y.toLowerCase()||(this.popupObj.collision={X:i.popup.collision.X.toLowerCase(),Y:i.popup.collision.Y.toLowerCase()});break;case"position":!this.popupObj.position||this.popupObj.position.X===i.popup.position.X&&this.popupObj.position.Y===i.popup.position.Y||(this.popupObj.position={X:i.popup.position.X,Y:i.popup.position.Y});break;case"relateTo":this.popupObj.relateTo!==i.popup.relateTo&&(this.popupObj.relateTo=i.popup.relateTo);break;case"targetType":this.popupObj.targetType!==i.popup.targetType.toLowerCase()&&(this.popupObj.targetType=i.popup.targetType);break;case"offsetX":this.popupObj.offsetX!==i.popup.offsetX&&(this.popupObj.offsetX=i.popup.offsetX);break;case"offsetY":this.popupObj.offsetY!==i.popup.offsetY&&(this.popupObj.offsetY=i.popup.offsetY)}}this.popupObj.dataBind(),this.popupObj.refreshPosition(this.popupObj.relateTo,!0)}this.options.enableVirtualization&&(this.bindScrollEvent(),setTimeout((function(){r.updateSelectionList(),r.options.value&&r.options.scrollTop&&(r.list.scrollTop=r.options.scrollTop)}),10)),"SfDropDownList"!==this.options.moduleName&&sf.base.attributes(this.element,{"aria-expanded":"true"}),sf.base.attributes(this.element,{"aria-owns":this.element.id+"_popup"});var x=this.options.allowFiltering?this.filterInput.parentElement:this.containerElement;sf.base.addClass([x],["e-input-focus"]);this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),1e3===this.options.zIndex?this.element:null)},i.prototype.wireListEvents=function(){sf.base.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},i.prototype.unWireListEvents=function(){sf.base.EventHandler.remove(this.list,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},i.prototype.onMouseOver=function(e){var t=sf.base.closest(e.target,".e-list-item");this.setHover(t)},i.prototype.onMouseLeave=function(e){this.removeHover()},i.prototype.listScroll=function(){this.filterInput.blur()},i.prototype.scrollHandler=function(){this.isDisposed||this.dotNetRef.invokeMethodAsync("Hide")},i.prototype.setFloatingHeader=function(e){var i=this.popupContainer&&this.popupContainer.querySelector(".e-content");i&&i.classList.contains("e-nodata")&&this.fixedHeaderElement?(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null):this.list&&this.list.querySelector("li")&&(sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=sf.base.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(t)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),this.scrollStop(e))},i.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var i=(this.list?this.list.querySelectorAll(".e-list-item")[0].offsetWidth:0)-e;this.fixedHeaderElement.style.width=i.toString()+"px",sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var n=this.list.querySelector("."+t);this.fixedHeaderElement.innerHTML=n.innerHTML},i.prototype.scrollStop=function(e){for(var i=e.target,n=this.list.querySelectorAll("li"),s=parseInt(getComputedStyle(n[0],null).getPropertyValue("height"),10),o=Math.round(i.scrollTop/s);o>-1;o--){if(!sf.base.isNullOrUndefined(n[o])&&n[o].classList.contains(t)){var r=n[o];this.fixedHeaderElement.innerHTML=r.innerHTML,this.fixedHeaderElement.style.top=e.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},i.prototype.isFilterLayout=function(){return"SfDropDownList"===this.options.moduleName&&this.options.allowFiltering},i.prototype.setSearchBoxPosition=function(){var e=this.popupObj.element.querySelector("span.e-filter-parent").getBoundingClientRect().height,t=this.popupObj.element.querySelector(".e-ddl-footer"),i=this.popupObj.element.querySelector(".e-ddl-header");this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%";var n=t?t.getBoundingClientRect().height:0,s=i?i.getBoundingClientRect().height:0;this.list.style.maxHeight=this.list.style.height=window.innerHeight-(n+s+e+4)+"px"},i.prototype.checkCollision=function(e){(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&"SfDropDownList"!==this.options.moduleName)&&(sf.popups.isCollide(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"))},i.prototype.destroy=function(){sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.scrollHandler)},i.prototype.refreshPopup=function(e,t){if(this.isPopupOpen()){if(this.options.enableVirtualization&&e&&(this.preventScrollAction=!0,this.list.scrollTop=0,this.preStartIndex=0,this.virtualInfo=null,this.preStartIndex=0,0===this.listHeight&&t.totalCount>0)){var i=this.popupContainer.querySelectorAll("li.e-list-item:not(.e-virtual-list)");this.listHeight=i.length>0?Math.ceil(i[0].getBoundingClientRect().height):this.virtualListHeight}this.options.totalCount=t.totalCount,this.popupObj.refreshPosition(this.containerElement),this.popupObj.element.querySelector(".e-content").classList.contains("e-nodata")&&this.fixedHeaderElement&&(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null)}},i.prototype.popupCreation=function(e,i,n){var s=this;this.popupContainer=e,this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.containerElement,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.options.enableRtl,offsetX:n,position:{X:"left",Y:"bottom"},zIndex:this.options.zIndex,close:function(){sf.base.EventHandler.remove(s.list,"scroll",s.setFloatingHeader),sf.base.removeClass([s.containerElement],"e-icon-anim"),"SfAutoComplete"===s.options.moduleName&&(null==s.options.value&&(s.preStartIndex=0,s.preEndIndex=0),s.virtualInfo=null),s.fixedHeaderElement=null,s.popupHolder.appendChild(s.popupContainer),s.unWireListEvents();for(var e=0,t=s.popupObj.getScrollableParent(s.containerElement);e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",s.scrollHandler)}sf.base.Browser.isDevice&&s.isFilterLayout()&&(sf.base.removeClass([document.body,s.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(s.list,"scroll",s.listScroll)),s.options.enableVirtualization&&(sf.base.EventHandler.remove(s.popupContentEle,"scroll",s.virtualScrollHandler()),"SfDropDownList"===s.options.moduleName&&s.filterInput&&sf.base.EventHandler.remove(s.filterInput,"keyup",s.keyUpHandler)),s.popupObj&&s.popupObj.destroy(),!s.isDisposed&&document.body.contains(s.element)&&s.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){}))},open:function(){null==s.options.value&&"SfAutoComplete"===s.options.moduleName&&(s.preStartIndex=0);var e=s.list.querySelector("li")&&s.list.querySelector("li").classList.contains(t);!sf.base.isNullOrUndefined(s.list)&&s.list.classList.contains("e-nodata");sf.base.EventHandler.add(document,"mousedown",s.onDocumentClick,s),s.options.allowFiltering&&s.filterInput&&s.filterInput.focus(),e&&sf.base.EventHandler.add(s.list,"scroll",s.setFloatingHeader,s)},targetExitViewport:function(){sf.base.Browser.isDevice||s.isDisposed||s.dotNetRef.invokeMethodAsync("Hide")}})},i.prototype.isEmptyList=function(){return!sf.base.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},i.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);e.indexOf("%")>-1&&(e=(this.containerElement.offsetWidth*parseFloat(e)/100).toString()+"px");if(sf.base.Browser.isDevice&&!this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName)){var t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))+"px"}return e},i.prototype.onDocumentClick=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"[id='"+this.popupObj.element.id+"']")||this.containerElement.contains(e.target)?t===this.element||this.options.allowFiltering&&t===this.filterInput||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering&&sf.base.Browser.isDevice&&t===this.containerElement.querySelector(".e-ddl-icon")||e.preventDefault():!this.containerElement.classList.contains("e-input-focus")&&!this.isPopupOpen()||this.isDisposed||this.dotNetRef.invokeMethodAsync("Hide")},i.prototype.closePopup=function(e,t){if(this.options=t,this.options.refreshVirtualIndices&&(this.virtualInfo=null,this.preStartIndex=0),this.isPopupOpen()&&!e.cancel&&this.popupObj){"SfDropDownList"!==this.options.moduleName&&sf.base.attributes(this.element,{"aria-expanded":"false"}),this.element.removeAttribute("aria-owns"),this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:20,delay:0}))}},i.prototype.setScrollPosition=function(e){if(this.preventScrollAction=!0,!this.preventKeyAction)if(sf.base.isNullOrUndefined(e))this.isKeyBoardAction=!1,this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.mouseScrollAction=!1,this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,e.action);break;default:this.mouseScrollAction=!1,this.isKeyBoardAction="up"==e.action||"pageUp"==e.action||"open"==e.action,this.scrollTop(e.action)}},i.prototype.scrollBottom=function(e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=null),this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))||this.options.enableVirtualization){var s=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active");null==s&&this.options.enableVirtualization&&(s=this.list.querySelector(".e-list-item")),this.isUpwardScroll=!1;var o=this.list.querySelectorAll(".e-virtual-list").length,r=this.list.offsetHeight,a=this.list.querySelector("li")?this.list.querySelector("li").classList.contains(t):null,l=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,h=this.virtualInfo&&this.virtualInfo.startIndex?s.offsetTop+this.virtualInfo.startIndex*s.offsetHeight:s.offsetTop,d=h-o*s.offsetHeight+s.offsetHeight-this.list.scrollTop,c=this.list.scrollTop+d-r,p=!1;c=e?c+2*parseInt(getComputedStyle(this.list).paddingTop,10):c+parseInt(getComputedStyle(this.list).paddingTop,10);var u=h-o*s.offsetHeight+s.offsetHeight-this.list.scrollTop;if(u=a&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?u-this.fixedHeaderElement.offsetHeight:u,0===this.activeIndex)this.list.scrollTop=0,p=this.isKeyBoardAction;else if(d>r||!(u>0&&this.list.offsetHeight>u)){var f=s?s.getAttribute("data-value"):null,g="pageDown"==n?this.getPageCount(this.popupObj.element)-2:1;if(!this.options.enableVirtualization||this.isKeyBoardAction||i)if(this.isKeyBoardAction&&this.options.enableVirtualization&&l&&f===l&&"end"!=n&&!this.isVirtualAction){this.preventKeyAction=!0;var m="SfDropDownList"===this.options.moduleName&&"pageDown"==n&&this.filterInput?this.filterInput.offsetHeight:0;this.list.scrollTop+=s.offsetHeight*g+m,this.preventKeyAction=!this.IsScrollerAtEnd()&&this.preventKeyAction,this.isKeyBoardAction=!1,this.preventScrollAction=!1}else this.options.enableVirtualization&&"end"==n?(this.preventKeyAction=!1,this.isKeyBoardAction=!1,this.preventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):"pageDown"==n&&this.options.enableVirtualization&&!this.isVirtualAction?(this.preventKeyAction=!1,this.isKeyBoardAction=!1,this.preventScrollAction=!1,c+=s.offsetHeight*g,this.list.scrollTop=c):s.previousElementSibling&&s.previousElementSibling.classList.contains("e-virtual-list")&&this.virtualInfo&&this.virtualInfo.startIndex?this.list.scrollTop=this.virtualInfo.startIndex*this.listHeight:this.list.scrollTop=c;else this.list.scrollTop=this.virtualInfo&&this.virtualInfo.startIndex?this.virtualInfo.startIndex*this.listHeight:0;p=this.isKeyBoardAction}this.isKeyBoardAction=p}},i.prototype.scrollTop=function(e){if(void 0===e&&(e=null),this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var i=this.list.querySelectorAll(".e-virtual-list").length,n=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),s=this.virtualInfo&&this.virtualInfo.startIndex?n.offsetTop+this.virtualInfo.startIndex*n.offsetHeight:n.offsetTop,o=s-i*n.offsetHeight-this.list.scrollTop,r=this.list.querySelector("li").classList.contains(t),a=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;o=r&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o;var l=s-i*n.offsetHeight+n.offsetHeight-this.list.scrollTop,h=this.options.enableVirtualization&&"SfAutoComplete"===this.options.moduleName&&o<=0;if(0===this.activeIndex)this.list.scrollTop=0;else if(o<0||h||0==o&&"home"==e){var d=n?n.getAttribute("data-value"):null,c="pageUp"==e?this.getPageCount(this.popupObj.element)-2:1;this.options.enableVirtualization&&this.isKeyBoardAction&&a&&d===a&&"home"!=e&&!this.isVirtualAction?(this.isUpwardScroll=!0,this.preventKeyAction=!0,this.list.scrollTop-=n.offsetHeight*c,this.preventKeyAction=0!=this.list.scrollTop&&this.preventKeyAction,this.isKeyBoardAction=!1,this.preventScrollAction=!1):this.options.enableVirtualization&&"home"==e?(this.preventScrollAction=!1,this.preventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):("pageUp"==e&&this.options.enableVirtualization&&!this.isVirtualAction&&(this.preventKeyAction=!1,this.isKeyBoardAction=!1,this.preventScrollAction=!1,o-=n.offsetHeight*c),this.list.scrollTop=this.list.scrollTop+o)}else l>0&&this.list.offsetHeight>l||(this.list.scrollTop=s-(r&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},i.prototype.setHover=function(e){!e||e.classList.contains("e-hover")||e.classList.contains("e-virtual-list")||(this.removeHover(),sf.base.addClass([e],"e-hover"))},i.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&sf.base.removeClass(e,"e-hover")}},i.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},i.prototype.getPageCount=function(e,t){void 0===t&&(t=!1);var i=e&&e.querySelector(".e-content");if(i){var n=i.classList.contains("e-nodata")?null:getComputedStyle(i.querySelectorAll(".e-list-item")[0],null).getPropertyValue("height"),s=i.getBoundingClientRect().height/parseInt(n,10);return t?s:Math.round(s)}return 0},i}();return{initialize:function(e,t,n,s,o){if(n){var r=new i(e,t,n,s,o);if(r.initialize(),!sf.base.isNullOrUndefined(sf.base.closest(n,"fieldset"))&&sf.base.closest(n,"fieldset").disabled){var a=o.enabled=!1;r.dotNetRef.invokeMethodAsync("UpdateFieldSetStatus",a)}if(o.enableVirtualization)return{itemSize:r.getListHeight(),fullPopupHeight:window.outerHeight,virtualPopupHeight:r.virtualPopupHeight}}return{itemSize:0,fullPopupHeight:0,virtualPopupHeight:0}},renderPopup:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(a)&&t&&i&&a.renderPopup(t,i,n,s,o,r)},refreshPopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.refreshPopup(t,i)},refreshVirtualIndices:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.virtualInfo=null,i.preStartIndex=0,i.options.totalCount=t,i.preEndIndex=0)},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.closePopup(t,i)},updateScrollPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.preventKeyAction=!1,i.setScrollPosition(t),i.isVirtualAction=!1)},getPageCount:function(e,t){var i=window.sfBlazor.getCompInstance(e);return!sf.base.isNullOrUndefined(i)&&t?i.getPageCount(t):0},setAutoFillSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setAutoFillSelection(t)},removeFillSelection:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeFillSelection()},focusIn:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(t?i.containerElement.focus():i.element.focus())},focusOut:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(t?i.containerElement.blur():i.element.blur())},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(o)||(t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s)),o.destroy())}}}()},"./modules/sf-dropdowntree.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DropDownTree=function(){"use strict";var e="e-input-focus",t="e-icon-hide",i="e-show-chip",n="e-chip-input",s=function(){function s(e,t,i,n,s,o){window.sfBlazor=window.sfBlazor,this.dataId=e,this.inputWrapper=t,this.element=sf.base.select(".e-dropdowntree",t),this.options=s,this.popupDiv=i,window.sfBlazor.setCompInstance(this),this.dotNetRef=n,this.uniqueID=o}return s.prototype.initialize=function(){this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",space:"space",moveDown:"downarrow"},this.options.showClearButton&&(this.overAllClear=sf.base.select(".e-clear-icon",this.inputWrapper)),this.createOverFlowWrapper(),this.setDisable(),this.wireEvents()},s.prototype.createOverFlowWrapper=function(){(this.options.allowMultiSelection||this.options.showCheckBox)&&("Delimiter"!==this.options.mode&&this.createChip(),"Custom"!==this.options.mode&&(this.overFlowWrapper=sf.base.select(".e-overflow",this.inputWrapper),this.inputWrapper.insertBefore(this.overFlowWrapper,this.element),"Box"!==this.options.mode&&sf.base.addClass([this.overFlowWrapper],"e-show-text")))},s.prototype.renderPopup=function(){sf.base.addClass([this.inputWrapper],["e-icon-anim"]),this.popupEle=sf.base.select("#"+this.element.id+"_options_"+this.uniqueID),this.keyboardModule=new sf.base.KeyboardEvents(this.popupEle,{keyAction:this.popupKeyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),document.body.appendChild(this.popupEle),this.createPopup(this.popupEle),(this.options.allowMultiSelection||this.options.showCheckBox)&&"Delimiter"!==this.options.mode&&this.createChip(),sf.base.removeClass([this.popupEle],"e-ddt-icon-hide"),this.options.allowFiltering&&(this.filterContainer=sf.base.select(".e-filter-wrap",this.popupEle)),this.options.showCheckBox&&this.options.showSelectAll&&!this.popupDiv.classList.contains("e-no-data")&&(this.checkAllParent=sf.base.select(".e-selectall-parent"),this.checkBoxElement=sf.base.select(".e-checkbox-wrapper",this.checkAllParent),this.checkAllParent&&sf.base.EventHandler.add(this.checkAllParent,"mouseup",this.clickHandler,this)),sf.base.attributes(this.element,{"aria-expanded":"true"}),this.popupObj.show(null,1e3===this.options.zIndex?this.element:null),sf.base.removeClass([this.popupEle],"e-ddt-icon-hide"),this.updatePopupHeight(),this.popupObj.refreshPosition();var t=this.popupDiv.querySelectorAll("li");this.options.showCheckBox&&this.options.showSelectAll||this.popupDiv.classList.contains("e-no-data")||!(t.length>0)||this.popupDiv.querySelector("li").focus();this.options.allowFiltering&&(sf.base.removeClass([this.inputWrapper],[e]),this.filterInputEle=sf.base.select("#"+this.element.id+"_filter_"+this.uniqueID,this.filterContainer),this.filterInputEle.focus())},s.prototype.removeChip=function(e){var t=e.target.parentElement?e.target.parentElement.getAttribute("data-value"):"";this.dotNetRef.invokeMethodAsync("RemoveChip",null,t)},s.prototype.updateView=function(){!this.options.showCheckBox&&!this.options.allowMultiSelection||"Custom"===this.options.mode||this.inputFocus||("Box"!==this.options.mode?sf.base.addClass([this.inputWrapper,this.overFlowWrapper],"e-show-text"):sf.base.addClass([this.inputWrapper],i),this.options.value&&0!==this.options.value.length&&(this.inputWrapper.contains(this.chipWrapper)&&(this.chipWrapper.style.display="",sf.base.addClass([this.chipWrapper],t)),sf.base.addClass([this.element],n),this.updateOverFlowView()))},s.prototype.updateOverFlowView=function(){var e;if(this.overFlowWrapper.classList.remove("e-total-count"),sf.base.removeClass([this.overFlowWrapper],t),this.options.showClearButton&&(e=sf.base.select(".e-clear-icon",this.inputWrapper).offsetWidth),this.options.value&&this.options.value.length){var i,n="",s=void 0,o=void 0,r=void 0,a=1,l=void 0,h=void 0;this.overFlowWrapper.innerHTML="";var d=sf.base.createElement("span",{className:"e-remain"});this.overFlowWrapper.appendChild(d),d.innerText="+${count} more..".replace("${count}",this.options.value.length.toString());var c=d.offsetWidth;if(sf.base.remove(d),i=sf.base.select(".e-ddt-icon",this.inputWrapper).offsetWidth,!sf.base.isNullOrUndefined(this.options.value))if("Box"!=this.options.mode)for(var p=this.element.value.split(this.options.delimiterChar+" "),u=0;!sf.base.isNullOrUndefined(p[u]);u++){if(n+=0===u?"":this.options.delimiterChar+" ",n+=o=p[u],o=this.overFlowWrapper.innerHTML,this.overFlowWrapper.innerHTML=n,(l=this.overFlowWrapper.offsetWidth)+i+e>(s=this.inputWrapper.offsetWidth)){for(void 0!==r&&""!==r&&(o=r,u=a+1),this.overFlowWrapper.innerHTML=o,h=this.options.value.length-u,l=this.overFlowWrapper.offsetWidth;l+c+i+e>=s&&0!==l&&""!==this.overFlowWrapper.innerHTML;){var f=this.overFlowWrapper.innerHTML.split(this.options.delimiterChar);f.pop(),this.overFlowWrapper.innerHTML=f.join(this.options.delimiterChar),h++,l=this.overFlowWrapper.offsetWidth}break}l+c+i+e<=s?(r=n,a=u):0===u&&(r="",a=-1)}else{sf.base.addClass([this.chipWrapper],t),sf.base.addClass([this.overFlowWrapper],"e-chip-list");for(var g=this.chipWrapper.cloneNode(!0),m=sf.base.selectAll(".e-chips",g),v=0;v<m.length;v++){if(o=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(m[v]),n=this.overFlowWrapper.innerHTML,(l=this.overFlowWrapper.offsetWidth)+i+e>(s=this.inputWrapper.offsetWidth)){for(void 0!==r&&""!==r&&(o=r,v=a+1),this.overFlowWrapper.innerHTML=o,h=this.options.value.length-v,l=this.overFlowWrapper.offsetWidth;l+c+i+e>=s&&0!==l&&""!==this.overFlowWrapper.innerHTML;)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),h++,l=this.overFlowWrapper.offsetWidth;break}l+c+i+e<=s?(r=n,a=v):0===v&&(r="",a=-1)}var b=sf.base.selectAll(".e-chips",this.overFlowWrapper);for(v=0;v<b.length;v++){var y=sf.base.select(".e-chip-delete",b[v]);sf.base.EventHandler.add(y,"mousedown",this.removeChip,this)}}h>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(d,h,"+${count} more..","${count} selected")),"Box"!==this.options.mode||this.overFlowWrapper.classList.contains("e-total-count")||sf.base.addClass([d],"e-wrap-count")}else this.overFlowWrapper.innerHTML="",sf.base.addClass([this.overFlowWrapper],t)},s.prototype.updateRemainTemplate=function(e,t,i,n){return this.overFlowWrapper.firstChild&&3===this.overFlowWrapper.firstChild.nodeType&&""===this.overFlowWrapper.firstChild.nodeValue&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),e.innerHTML="",e.innerText=!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.options.mode?n.replace("${count}",t.toString()):i.replace("${count}",t.toString()),!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.options.mode?(sf.base.addClass([this.overFlowWrapper],"e-total-count"),sf.base.removeClass([this.overFlowWrapper],"e-wrap-count")):sf.base.removeClass([this.overFlowWrapper],"e-total-count"),e},s.prototype.setDisable=function(){this.options.disabled?(this.isPopupOpen&&this.hidePopup(),sf.base.addClass([this.inputWrapper],"e-disabled"),this.inputWrapper&&this.inputWrapper.classList.contains(e)&&sf.base.removeClass([this.inputWrapper],[e]),this.element.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true")):(sf.base.removeClass([this.inputWrapper],"e-disabled"),this.element.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false"))},s.prototype.clickHandler=function(e){var t=e.currentTarget&&e.currentTarget.classList.contains("e-selectall-parent")?e.currentTarget.firstElementChild.lastElementChild:e.target.firstElementChild.lastElementChild;if(this.checkBoxElement=sf.base.closest(t,".e-checkbox-wrapper"),!sf.base.isNullOrUndefined(this.checkBoxElement)){var i=sf.base.select(".e-frame",this.checkBoxElement);this.changeState(this.checkBoxElement,i.classList.contains("e-check")?"uncheck":"check",e)}e.preventDefault()},s.prototype.changeState=function(e,t,i){var n,s=e.getElementsByClassName("e-frame")[0];"check"!==t||s.classList.contains("e-check")?"uncheck"===t&&s.classList.contains("e-check")&&(n="false",this.isReverseUpdate||this.dotNetRef.invokeMethodAsync("OnSelectAllClick",t)):(n="true",this.isReverseUpdate||this.dotNetRef.invokeMethodAsync("OnSelectAllClick",t)),n="check"===t?"true":"false",sf.base.isNullOrUndefined(n)||e.setAttribute("aria-checked",n)},s.prototype.createChip=function(){this.inputWrapper.contains(this.chipWrapper)||(this.chipWrapper=sf.base.select(".e-chips-wrapper",this.inputWrapper),this.inputWrapper.insertBefore(this.chipWrapper,this.element),sf.base.addClass([this.inputWrapper],i),this.getValidMode()&&null!==this.options.value&&this.options.value&&0!==this.options.value.length?sf.base.addClass([this.element],n):(null===this.options.value||this.options.value&&0===this.options.value.length||this.checkBoxElement)&&sf.base.addClass([this.chipWrapper],t))},s.prototype.getValidMode=function(){return!(!this.options.allowMultiSelection&&!this.options.showCheckBox)&&("Box"===this.options.mode||!("Default"!==this.options.mode||!this.inputFocus))},s.prototype.createPopup=function(e){var t=this;this.popupObj=new sf.popups.Popup(e,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.options.zIndex,enableRtl:!sf.base.isNullOrUndefined(sf.base.select(".e-rtl")),position:{X:"left",Y:"bottom"},close:function(){t.isPopupOpen=!1,t.dotNetRef.invokeMethodAsync("UpdatePopupState")},open:function(){sf.base.EventHandler.add(document,"mousedown",t.onDocumentClick,t),t.isPopupOpen=!0},targetExitViewport:function(){sf.base.Browser.isDevice||t.hidePopup()}})},s.prototype.getHeight=function(){var e=sf.base.formatUnit(this.options.popupHeight);return e.indexOf("%")>-1&&(e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px"),e},s.prototype.updatePopupHeight=function(){var e=this.getHeight();this.popupEle.style.maxHeight=e;var t=sf.base.select(".e-ddt-header",this.popupEle),i=sf.base.select(".e-ddt-footer",this.popupEle);if(this.options.allowFiltering){var n=Math.round(this.filterContainer.getBoundingClientRect().height);e=sf.base.formatUnit(parseInt(e,10)-n+"px")}if(t){n=Math.round(t.getBoundingClientRect().height);e=sf.base.formatUnit(parseInt(e,10)-n+"px")}if(this.options.showCheckBox&&this.options.showSelectAll&&!this.popupDiv.classList.contains("e-no-data")){n=Math.round(this.checkAllParent.getBoundingClientRect().height);e=sf.base.formatUnit(parseInt(e,10)-n+"px")}if(i){n=Math.round(i.getBoundingClientRect().height);e=sf.base.formatUnit(parseInt(e,10)-n+"px")}var s=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);s+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=sf.base.formatUnit(parseInt(e,10)-s+"px"),this.popupDiv.style.maxHeight=e},s.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);return e.indexOf("%")>-1&&(e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px"),e},s.prototype.onDocumentClick=function(e){var t=e.target,i=sf.base.closest(t,".e-list-parent"),n=sf.base.closest(t,".e-filter-wrap"),s=sf.base.closest(t,".e-ddt-header"),o=sf.base.closest(t,".e-ddt-footer"),r=!!t.classList.contains("e-dropdown")||(sf.base.matches(t,".e-ddt .e-popup")||sf.base.matches(t,".e-ddt .e-treeview"));(this.overAllClear&&t==this.overAllClear||t.classList.contains("e-chip-delete"))&&(this.isClearIconClick=!0),this.isPopupOpen&&(!sf.base.isNullOrUndefined(this.inputWrapper)&&this.inputWrapper.contains(t)||i||r||n||s||o)||(this.options.allowMultiSelection||this.options.showCheckBox)&&(this.isPopupOpen&&t.classList.contains("e-chip-delete")||this.isPopupOpen&&(t.classList.contains("e-selectall-parent")||t.classList.contains("e-all-text")||t.classList.contains("e-frame")))?e.preventDefault():sf.base.isNullOrUndefined(this.inputWrapper)||this.inputWrapper.contains(t)||!this.inputFocus||this.focusOut(e)},s.prototype.wireEvents=function(){sf.base.EventHandler.add(this.inputWrapper,"focus",this.focusIn,this),sf.base.EventHandler.add(this.inputWrapper,"blur",this.focusOut,this),sf.base.EventHandler.add(this.inputWrapper,"mousemove",this.mouseIn,this),sf.base.EventHandler.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),this.keyboardModule=new sf.base.KeyboardEvents(this.inputWrapper,{keyAction:this.inputKeyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),window.addEventListener("resize",this.onWindowResize.bind(this))},s.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.inputWrapper,"focus",this.focusIn),sf.base.EventHandler.remove(this.inputWrapper,"blur",this.focusOut),sf.base.EventHandler.remove(this.inputWrapper,"mousemove",this.mouseIn),sf.base.EventHandler.remove(this.inputWrapper,"mouseout",this.onMouseLeave),window.removeEventListener("resize",this.onWindowResize.bind(this)),this.checkAllParent&&sf.base.EventHandler.remove(this.checkAllParent,"mouseup",this.clickHandler),this.keyboardModule&&this.keyboardModule.destroy()},s.prototype.mouseIn=function(){this.options.disabled||this.showOverAllClear()},s.prototype.onMouseLeave=function(){this.inputFocus||(this.overAllClear&&sf.base.addClass([this.overAllClear],t),sf.base.removeClass([this.inputWrapper],"e-show-clear"))},s.prototype.onWindowResize=function(){this.isPopupOpen&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())},s.prototype.inputKeyActionHandler=function(e){switch(e.action){case"escape":case"altUp":this.isPopupOpen&&this.hidePopup();break;case"shiftTab":case"tab":this.isPopupOpen&&this.hidePopup(),this.inputFocus&&this.focusOut(e);break;case"altDown":this.isPopupOpen||(this.showPopup(),e.preventDefault());break;case"moveDown":this.options.showSelectAll&&this.options.showCheckBox&&this.checkAllParent.focus()}},s.prototype.popupKeyActionHandler=function(e){switch(e.target){case this.filterInputEle:this.filterAction(e);break;case this.checkAllParent:this.checkAllAction(e);break;default:this.popupDiv.contains(e.target)&&this.treeAction(e)}},s.prototype.checkAllAction=function(e){switch(e.action){case"space":this.clickHandler(e);break;case"moveDown":this.popupDiv.querySelector("li").focus();break;case"shiftTab":e.preventDefault(),this.options.allowFiltering?this.filterInputEle.focus():this.inputWrapper.focus()}},s.prototype.treeAction=function(e){switch(e.action){case"escape":case"altUp":this.inputWrapper.focus(),e.preventDefault(),this.isPopupOpen&&this.hidePopup();break;case"tab":this.isPopupOpen&&this.hidePopup();break;case"shiftTab":e.preventDefault(),this.options.showSelectAll&&this.options.showCheckBox?this.checkAllParent.focus():this.options.allowFiltering?this.filterInputEle.focus():this.inputWrapper.focus()}},s.prototype.filterAction=function(e){switch(e.action){case"escape":case"altUp":this.inputWrapper.focus(),e.preventDefault(),this.isPopupOpen&&this.hidePopup();break;case"shiftTab":e.preventDefault(),this.inputWrapper.focus();break;case"tab":this.popupDiv.querySelector("li").focus(),e.preventDefault()}},s.prototype.showPopup=function(){this.options.disabled||this.isPopupOpen||(this.focusIn(),this.renderPopup())},s.prototype.focusIn=function(s){this.options.disabled||this.inputFocus||this.isClearIconClick?this.isClearIconClick=!1:(this.inputFocus=!0,sf.base.addClass([this.inputWrapper],[e]),(this.options.allowMultiSelection||this.options.showCheckBox)&&("Delimiter"!==this.options.mode&&this.inputFocus&&(this.chipWrapper&&this.options.value&&0!==this.options.value.length&&(sf.base.removeClass([this.chipWrapper],t),sf.base.addClass([this.element],n)),sf.base.addClass([this.inputWrapper],i),this.popupObj&&this.popupObj.refreshPosition()),"Custom"!==this.options.mode&&(this.inputWrapper.contains(this.overFlowWrapper)&&sf.base.addClass([this.overFlowWrapper],t),"Delimiter"===this.options.mode?(sf.base.removeClass([this.inputWrapper],i),sf.base.removeClass([this.element],n)):sf.base.addClass([this.inputWrapper],i),sf.base.removeClass([this.inputWrapper],"e-show-text"))))},s.prototype.focusOut=function(e){!this.options.disabled&&this.inputFocus&&(!sf.base.Browser.isIE&&"edge"!==sf.base.Browser.info.name||e.target!==this.inputWrapper)&&(e.target===this.inputWrapper&&this.isPopupOpen||(this.onFocusOut(),(this.options.allowMultiSelection||this.options.showCheckBox)&&this.updateView()))},s.prototype.onFocusOut=function(){this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.overAllClear&&!this.overAllClear.classList.contains(t)&&(sf.base.addClass([this.overAllClear],t),sf.base.removeClass([this.inputWrapper],"e-show-clear")),sf.base.removeClass([this.inputWrapper],[e]),(this.options.allowMultiSelection||this.options.showCheckBox)&&"Delimiter"!==this.options.mode&&"Custom"!==this.options.mode&&this.chipWrapper&&"Default"===this.options.mode&&(this.chipWrapper.style.display="",sf.base.addClass([this.chipWrapper],t),sf.base.removeClass([this.inputWrapper],i),sf.base.removeClass([this.element],n))},s.prototype.hidePopup=function(){var t={offsetX:this.popupObj.offsetX,offsetY:this.popupObj.offsetY,targetType:this.popupObj.targetType,collision:{X:this.popupObj.collision.X,Y:this.popupObj.collision.Y},position:{X:this.popupObj.position.X,Y:this.popupObj.position.Y}};this.dotNetRef.invokeMethodAsync("InvokePopupEvent",t),this.inputWrapper.classList.remove("e-icon-anim"),this.popupEle&&sf.base.addClass([this.popupEle],"e-ddt-icon-hide"),sf.base.attributes(this.element,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.popupObj.destroy(),this.popupObj=null,this.inputFocus&&(this.inputWrapper.focus(),this.options.allowFiltering&&sf.base.addClass([this.inputWrapper],[e])))},s.prototype.showOverAllClear=function(){this.options.disabled||(this.options.showClearButton&&(this.overAllClear=sf.base.select(".e-clear-icon",this.inputWrapper)),this.overAllClear&&(!!this.options.value&&!!this.options.value.length&&this.options.showClearButton?(sf.base.removeClass([this.overAllClear],[t,"e-clear-icon-hide"]),sf.base.addClass([this.inputWrapper],"e-show-clear")):(sf.base.addClass([this.overAllClear],t),sf.base.removeClass([this.inputWrapper],"e-show-clear"))))},s.prototype.onNodeSelected=function(e){this.options.value=e,this.showOverAllClear(),this.hidePopup()},s.prototype.clearIconClick=function(e){this.options.value=e,this.showOverAllClear(),(sf.base.isNullOrUndefined(this.options.value)||this.options.value&&0===this.options.value.length)&&(sf.base.removeClass([this.element],n),sf.base.addClass([this.overFlowWrapper],t),"Delimiter"!==this.options.mode&&(sf.base.addClass([this.chipWrapper],t),this.chipWrapper.style.display=""),sf.base.removeClass([this.inputWrapper],i)),(this.options.allowMultiSelection||this.options.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition()},s.prototype.updateSelectedValue=function(e){for(var n=sf.base.selectAll(".e-chip",this.inputWrapper),s=0;s<n.length;s++)n[s].removeAttribute("tabindex");var o=!!this.options.value&&!!this.options.value.length;"Delimiter"!==this.options.mode&&(this.options.allowMultiSelection||this.options.showCheckBox)&&o&&(sf.base.addClass([this.inputWrapper],i),this.chipWrapper.style.display="block");var r=this.getValidMode();"Custom"===this.options.mode||"Box"===this.options.mode||!this.options.allowMultiSelection&&!this.options.showCheckBox||r||this.chipWrapper&&(sf.base.addClass([this.chipWrapper],t),sf.base.removeClass([this.inputWrapper],i),this.chipWrapper.style.display=""),this.options.showClearButton&&this.inputFocus&&this.showOverAllClear(),e&&this.setChipWrapperClass(),(this.options.allowMultiSelection||this.options.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition()},s.prototype.setChipWrapperClass=function(){var e=!!this.options.allowMultiSelection||!!this.options.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!e&&(sf.base.removeClass([this.element],n),sf.base.detach(this.chipWrapper)),this.getValidMode()&&null!==this.options.value&&(sf.base.addClass([this.element],n),this.chipWrapper&&sf.base.removeClass([this.chipWrapper],t));var i=!!this.options.value&&!!this.options.value.length;this.chipWrapper&&"Box"===this.options.mode&&!i&&(sf.base.addClass([this.chipWrapper,this.overFlowWrapper],t),sf.base.removeClass([this.element],n),this.chipWrapper.style.display=""),(this.options.allowMultiSelection||this.options.showCheckBox)&&this.updateView()},s.prototype.onNodeChecked=function(e,t){var i=this.popupDiv.querySelectorAll("li"),n=sf.base.closest(this.checkBoxElement,".e-checkbox-wrapper");n&&"uncheck"===e.action&&(e.isInteracted||0===t.length)?(this.isReverseUpdate=!0,this.changeState(n,"uncheck"),this.isReverseUpdate=!1):n&&"check"===e.action&&t.length===i.length&&e.isInteracted&&(this.isReverseUpdate=!0,this.changeState(n,"check"),this.isReverseUpdate=!1)},s.prototype.updateMode=function(){if("Custom"!==this.options.mode)if("Delimiter"!==this.options.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var e=this.getValidMode();this.chipWrapper.classList.contains(t)&&e?(sf.base.removeClass([this.chipWrapper],t),sf.base.addClass([this.inputWrapper],i)):e||(sf.base.addClass([this.chipWrapper],t),sf.base.removeClass([this.inputWrapper],i),this.chipWrapper.style.display="");var s=null!==this.options.value&&0!==this.options.value.length;e&&s?sf.base.addClass([this.element],n):sf.base.removeClass([this.element],n)}else this.element.classList.contains(n)&&(sf.base.removeClass([this.element],n),this.chipWrapper&&(sf.base.addClass([this.chipWrapper],t),sf.base.addClass([this.overFlowWrapper],t),sf.base.removeClass([this.inputWrapper],i),this.chipWrapper.style.display=""))},s.prototype.updateProperties=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){switch(i[t]){case"showSelectAll":this.options.showSelectAll=e.showSelectAll;break;case"showCheckBox":this.options.showCheckBox=e.showCheckBox,this.createOverFlowWrapper();break;case"popupHeight":this.popupObj.height=this.options.popupHeight=e.popupHeight,this.updatePopupHeight();break;case"popupWidth":this.options.popupWidth=e.popupWidth,this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"zIndex":this.popupObj.zIndex=this.options.zIndex=e.zIndex;break;case"allowFiltering":this.options.allowFiltering=e.allowFiltering;break;case"allowMultiSelection":this.options.allowMultiSelection=e.allowMultiSelection,this.createOverFlowWrapper();break;case"disabled":this.options.disabled=e.disabled,this.setDisable();break;case"mode":if(!this.options.showCheckBox&&!this.options.allowMultiSelection)return;this.options.mode=e.mode,this.updateMode();break;case"showClearButton":this.options.showClearButton=e.showClearButton,this.overAllClear=sf.base.select(".e-clear-icon",this.inputWrapper)}}},s.prototype.destroy=function(){this.popupObj&&(sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick),this.popupObj.destroy(),this.popupObj=null),this.popupDiv=null,this.popupEle=null,this.unWireEvents()},s}();return{initialize:function(e,t,i,n,o,r){var a=new s(e,t,i,n,o,r);return sf.base.isNullOrUndefined(a)?0:(a.initialize(),sf.base.selectAll(".e-list-item",a.popupEle).length)},showPopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)){if(n.options.value=t,n.chipWrapper&&"Delimiter"!==n.options.mode&&n.options.value&&0!=n.options.value.length&&(n.chipWrapper.style.display="block"),!sf.base.isNullOrUndefined(i)){var s=document.elementFromPoint(i.clientX,i.clientY);if(s&&s.classList.contains("e-chip-delete"))return!1}return n.isPopupOpen||(n.showPopup(),n.inputFocus=!0,n.showOverAllClear()),n.isPopupOpen}return!1},hidePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)){if(n.options.value=t,!sf.base.isNullOrUndefined(i)){var s=document.elementFromPoint(i.clientX,i.clientY);if(s&&s.classList.contains("e-chip-delete"))return}n.isPopupOpen&&(n.hidePopup(),n.showOverAllClear())}},onNodeSelected:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.onNodeSelected(t)},clearIconClick:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.clearIconClick(t),i&&n.inputFocus&&n.onFocusOut())},updateSelectedValue:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.options.value=t,n.updateSelectedValue(i))},onNodeChecked:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(n)?0:(n.onNodeChecked(t,i),sf.base.selectAll(".e-list-item",n.popupEle).length)},getTreeItemsId:function(e){var t=[],i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i))for(var n=sf.base.selectAll("li",i.popupDiv),s=void 0,o=0;o<n.length;o++)s=n[o].getAttribute("data-uid").toString(),t.push(s);return t},updateProperties:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateProperties(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-filemanager.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.FileManager=function(){"use strict";var e="e-blur",t=function(){function t(e,t,i,n){this.element=t,this.properties=n,this.dataId=e,this.treeviewEle=t.querySelector(".e-navigation .e-treeview"),this.dotnetRef=i,this.isMac=navigator.platform.toUpperCase().indexOf("MAC")>=0,sf.base.isNullOrUndefined(this.element)||(this.ctrlId=this.element.id,window.sfBlazor.setCompInstance(this)),this.bindKeyboardEvent(),this.bindTreeViewKeyBoardEvent(),this.wireEvents()}return t.prototype.fmDialogOpen=function(){this.dotnetRef.invokeMethodAsync("FileManagerShowDialog")},t.prototype.unWireMobileEvents=function(){sf.base.isNullOrUndefined(this.clickObj)||this.clickObj.destroy()},t.prototype.wireMobileEvents=function(){var e,t=this;e="Details"===this.properties.view?this.element.querySelector(".e-view-container .e-grid .e-gridcontent"):this.element.querySelector(".e-view-container .e-large-icons"),sf.base.isNullOrUndefined(e)||(this.clickObj=new sf.base.Touch(e,{tapHold:function(e){var i,n;n="Details"===t.properties.view?(i=sf.base.closest(e.originalEvent.target,".e-row"))?i.getAttribute("data-rowindex"):null:(i=sf.base.closest(e.originalEvent.target,"li.e-list-item"))?i.getAttribute("data-uid"):null,null!=i&&null!=n&&t.dotnetRef.invokeMethodAsync("ChangeMobileMultiSelection",n)}}))},t.prototype.wireEvents=function(){var e=this.element.querySelector("#"+this.properties.id+"_grid");e&&sf.base.EventHandler.add(e,"dblclick",this.gridBlur,this);var t=this.element.querySelector("#"+this.properties.id+"_largeicons");this.properties.virtualization&&t&&sf.base.EventHandler.add(t.firstElementChild,"scroll",this.onVirtualScroll,this)},t.prototype.unWireEvents=function(){var e=this.element.querySelector("#"+this.properties.id+"_grid");e&&sf.base.EventHandler.remove(e,"dblclick",this.gridBlur);var t=this.element.querySelector("#"+this.properties.id+"_largeicons");this.properties.virtualization&&t&&sf.base.EventHandler.remove(t.firstElementChild,"scroll",this.onVirtualScroll)},t.prototype.adjustHeight=function(){var e=sf.base.select("#"+this.element.id+"_toolbar",this.element),t=e?e.offsetHeight:0,i=this.element.querySelector(".e-address").offsetHeight,n=this.element.clientHeight-t-i;return sf.base.formatUnit(this.element.clientHeight-t)+" "+sf.base.formatUnit(n)},t.prototype.createDragObj=function(e){var t,i;"LargeIcons"===this.properties.view?(t=this.element.querySelector(".e-large-icons"),i=".e-large-icon"):(t=this.element.querySelector(".e-grid.e-control"),i=".e-row"),this.properties.draggable||e?(this.dragObj&&this.dragObj.destroy(),t&&this.dragObjProperty(this.dragObj,t,".e-fullrow")):this.properties.draggable||this.dragObj.destroy(),this.treeviewEle?(this.treeDragObj&&this.treeDragObj.destroy(),this.dragObjProperty(this.treeDragObj,this.treeviewEle,i)):this.properties.draggable||this.treeDragObj.destroy()},t.prototype.dragObjProperty=function(e,t,i){var n=this;new sf.base.Draggable(t,{cursorAt:{left:44,top:18},enableTailMode:!0,enableTapHold:!0,dragArea:this.element,dragTarget:i,drag:this.draggingHandler.bind(this),dragStart:function(e){n.dragStartHandler(e)},dragStop:this.dragStopHandler.bind(this),enableAutoScroll:!0,helper:this.dragHelper.bind(this)})},t.prototype.dragHelper=function(e){var t=e.sender.target;return this.getModule(t),"largeiconsview"===this.activeModule||"navigationpane"===this.activeModule?this.dragLi=sf.base.closest(t,".e-list-item"):"detailsview"===this.activeModule&&(this.dragLi=sf.base.closest(t,"tr.e-row"),"false"==this.dragLi.getAttribute("aria-selected")&&t.click()),this.dragLi?(this.createVirtualDragElement(),this.virtualDragElement):null},t.prototype.createVirtualDragElement=function(){this.updateViewElement(),this.updateDragValues(),this.cloneIcon=sf.base.createElement("div",{className:"e-fe-icon "+this.dragType}),this.cloneName=sf.base.createElement("div",{className:"e-fe-name",innerHTML:this.dragName});var e=sf.base.createElement("div",{className:"e-fe-content"});e.appendChild(this.cloneIcon),e.appendChild(this.cloneName);var t=sf.base.createElement("div",{className:"e-fe-clone"});if(t.appendChild(e),this.dragCount>1){var i=sf.base.createElement("span",{className:"e-fe-count",innerHTML:this.dragCount.toString(10)});t.appendChild(i)}this.virtualDragElement=t,this.element.appendChild(this.virtualDragElement)},t.prototype.getModule=function(e){e&&(sf.base.closest(e,".e-row")?this.activeModule="detailsview":sf.base.closest(e,".e-large-icon")?this.activeModule="largeiconsview":this.activeModule="navigationpane")},t.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="X"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var s=e.target.getBoundingClientRect();i=s?"X"===t?s.left:s.top:null}return Math.ceil(i)},t.prototype.removeDestroyElement=function(){this.dragObj.intDestroy(this.dragStartArgs.event),this.dragCancel()},t.prototype.TriggerDragEvent=function(e){e&&this.removeDestroyElement()},t.prototype.UpdateGridFocus=function(e){if("Details"==this.properties.view){this.updateViewElement();var t=this.viewElem.querySelectorAll(".e-focused"),i=this.viewElem.querySelector('[data-rowindex="'+e.toString()+'"]');if(t)for(var n=0;n<t.length;n++)sf.base.closest(t[n],"tr").getAttribute("data-rowindex")!=e.toString()&&(sf.base.closest(t[n],"tr").removeAttribute("tabindex"),sf.base.removeClass([t[n]],["e-focus","e-focused"]));sf.base.isNullOrUndefined(i)||(this.viewElem.setAttribute("tabindex","-1"),i.setAttribute("tabindex","0"),sf.base.addClass([i],["e-focus","e-focused"]))}},t.prototype.TriggerDragStartEvent=function(e){if(e)this.removeDestroyElement();else{this.dragStartArgs.bindEvents(this.dragStartArgs.dragElement);var t=this.dragStartArgs;t.cancel=!1,this.getModule(this.dragStartArgs.target);var i=this.element.querySelector(".e-navigation .e-treeview ul li").getAttribute("data-uid");(!this.properties.draggable||"navigationpane"===this.activeModule&&sf.base.closest(this.dragStartArgs.target,"li").getAttribute("data-uid")===i)&&(t.cancel=!0),this.removeBlur(),t.cancel?this.removeDestroyElement():t.cancel||(this.updateViewElement(),this.blurActive(),this.updateDragValues())}},t.prototype.dragStartHandler=function(e){this.dragStartArgs=e,window.sfBlazor.setCompInstance(this),this.UpdateXY(e),this.dotnetRef.invokeMethodAsync("DragStartCall",this.dragLeft,this.dragTop)},t.prototype.blurActive=function(){for(var t=0,i=this.viewElem.querySelectorAll(".e-active");t<i.length;)i[t].classList.add(e),t++},t.prototype.updateViewElement=function(){"LargeIcons"===this.properties.view?this.viewElem=this.element.querySelector(".e-large-icons"):this.viewElem=this.element.querySelector(".e-gridcontent")},t.prototype.getIconClass=function(e){return e.querySelector(".e-list-img")?"e-fe-image":e.querySelector(".e-list-icon").classList[1]},t.prototype.updateDragValues=function(){var e;"largeiconsview"===this.activeModule?(e=this.viewElem.querySelectorAll(".e-active"),this.dragName=e.length>0?e[0].querySelector(".e-list-text").textContent:"",this.dragType=e.length>0?this.getIconClass(e[0]):""):"detailsview"===this.activeModule?null!=(e=this.viewElem.querySelectorAll('tr[aria-selected="true"]'))&&e.length>0&&(this.dragName=e.length>0?e[0].querySelector(".e-fe-text").textContent:"",this.dragType=e.length>0?e[0].querySelector(".e-fe-icon").classList[1]:""):"navigationpane"===this.activeModule&&(this.dragName=this.dragLi.querySelector(".e-list-text").textContent,this.dragType="e-fe-folder"),null!=e&&(this.dragCount=e.length)},t.prototype.getTargetModule=function(e){e&&(sf.base.closest(e,".e-gridcontent")?this.targetModule="detailsview":sf.base.closest(e,".e-large-icons")?this.targetModule="largeiconsview":e.classList.contains("e-fullrow")||e.classList.contains("e-icon-expandable")?this.targetModule="navigationpane":sf.base.closest(e,".e-address-list-item")?this.targetModule="breadcrumbbar":this.targetModule="")},t.prototype.draggingHandler=function(t){var i=!1;this.updateDragValues(),this.cloneIcon.setAttribute("class","e-fe-icon "+this.dragType),this.cloneName.innerHTML=this.dragName;var n=null;this.blurActive(),this.getTargetModule(t.target),this.removeDropTarget(),this.removeBlur("hover"),"navigationpane"===this.targetModule?((n=sf.base.closest(t.target,"li")).classList.add("e-hover","e-fe-drop-folder"),i=!0):"detailsview"===this.targetModule?((n=sf.base.closest(t.target,"tr"))&&n.querySelector(".e-fe-folder")&&!n.classList.contains(e)?n.classList.add("e-fe-drop-folder"):!n||n.querySelector(".e-fe-folder")||n.classList.contains(e)||n.classList.add("e-fe-drop-file"),i=!0):"largeiconsview"===this.targetModule?((n=sf.base.closest(t.target,"li"))&&n.querySelector(".e-fe-folder")&&!n.classList.contains(e)&&n.classList.add("e-hover","e-fe-drop-folder"),i=!0):"breadcrumbbar"===this.targetModule&&(i=!0),this.element.classList.remove("e-fe-drop","e-no-drop"),this.element.classList.add(i?"e-fe-drop":"e-no-drop"),this.UpdateXY(t),this.dotnetRef.invokeMethodAsync("DraggingCall",this.dragLeft,this.dragTop)},t.prototype.UpdateXY=function(e){this.dragLeft=this.getXYValue(e.event,"X"),this.dragTop=this.getXYValue(e.event,"Y")},t.prototype.dragStopHandler=function(e){var t,i,n=!1;if(e.cancel=!1,this.removeDropTarget(),this.element.classList.remove("e-fe-drop","e-no-drop"),this.dragCancel(),this.getTargetModule(e.target),""===this.targetModule&&e.target&&e.target.classList.contains("e-view-container")&&(n=!0),this.removeBlur("hover"),"largeiconsview"!==this.targetModule&&"navigationpane"!==this.targetModule&&"breadcrumbbar"!==this.targetModule||!e.target)"detailsview"===this.targetModule&&e.target&&(i=(t=sf.base.closest(e.target,"tr"))?t.getAttribute("data-rowindex"):null);else{t=sf.base.closest(e.target,"li");var s="breadcrumbbar"===this.targetModule?"data-utext":"data-uid";i=t?t.getAttribute(s):null}null==i&&(n=!0);var o=this.treeviewEle?this.dragLi.getAttribute("data-uid"):null;"detailsview"===this.activeModule&&(o=this.dragLi.getAttribute("data-rowindex")),this.UpdateXY(e),this.dotnetRef.invokeMethodAsync("DragStopCall",o,i,this.targetModule,this.activeModule,n,this.dragLeft,this.dragTop),this.dragCount=0,this.dragName="",this.dragType=""},t.prototype.dragCancel=function(){this.removeBlur();var e=sf.base.select(".e-fe-clone",this.element);e&&sf.base.detach(e)},t.prototype.gridBlur=function(e){var t=e.target;"TD"===t.tagName&&t.blur()},t.prototype.removeItemClass=function(e){for(var t=this.element.querySelectorAll("."+e),i=0;i<t.length;i++)t[i].classList.remove(e)},t.prototype.removeDropTarget=function(){this.removeItemClass("e-fe-drop-folder"),this.removeItemClass("e-fe-drop-file")},t.prototype.removeBlur=function(t){for(var i=t?this.element.querySelectorAll(".e-hover"):this.element.querySelectorAll("."+e),n=0;n<i.length;)i[n].classList.remove(t?"e-hover":e),n++},t.prototype.bindTreeViewKeyBoardEvent=function(){var e=this.element.querySelector(".e-navigation"),t={altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:this.isMac?"cmd+x":"ctrl+x",ctrlC:this.isMac?"cmd+c":"ctrl+c",ctrlV:this.isMac?"cmd+v":"ctrl+v",f2:"f2",shiftF10:"shift+f10"};if(e)new sf.base.KeyboardEvents(e,{keyAction:this.treeviewKeydownHandler.bind(this),keyConfigs:t,eventName:"keydown"})},t.prototype.bindKeyboardEvent=function(){if("Details"===this.properties.view){var e={altEnter:"alt+enter",esc:"escape",tab:"tab",moveDown:"downarrow",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",ctrlUp:"ctrl+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",end:"end",home:"home",moveUp:"uparrow",del:"delete",ctrlX:this.isMac?"cmd+x":"ctrl+x",ctrlC:this.isMac?"cmd+c":"ctrl+c",ctrlV:this.isMac?"cmd+v":"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftdel:"shift+delete",ctrlD:"ctrl+d",f2:"f2",ctrlA:this.isMac?"cmd+a":"ctrl+a",enter:"enter"},t=this.element.querySelector("#"+this.properties.id+"_grid");t&&this.bindKeyboardEvents(e,t)}else if("LargeIcons"===this.properties.view){e={altN:"alt+n",f5:"f5",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2",ctrlU:"ctrl+u",end:"end",home:"home",tab:"tab",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",ctrlUp:"ctrl+uparrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftLeft:"shift+leftarrow",shiftRight:"shift+rightarrow",shiftUp:"shift+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csLeft:"ctrl+shift+leftarrow",csRight:"ctrl+shift+rightarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",ctrlA:this.isMac?"cmd+a":"ctrl+a",enter:"enter",altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:this.isMac?"cmd+x":"ctrl+x",ctrlC:this.isMac?"cmd+c":"ctrl+c",ctrlV:this.isMac?"cmd+v":"ctrl+v",f2:"f2",shiftdel:"shift+delete",back:"backspace",ctrlD:"ctrl+d"};var i=this.element.querySelector("#"+this.properties.id+"_largeicons");i&&this.bindKeyboardEvents(e,i)}},t.prototype.bindKeyboardEvents=function(e,t){this.keyboardModule=new sf.base.KeyboardEvents(t,{keyAction:this.keyupHandler.bind(this),keyConfigs:e,eventName:"keyup"}),this.keyboardDownModule=new sf.base.KeyboardEvents(t,{keyAction:this.keydownHandler.bind(this),keyConfigs:e,eventName:"keydown"})},t.prototype.getRowValue=function(){var e=this.element.querySelector("#"+this.element.id+"_largeicons").querySelectorAll(".e-list-item"),t=1;if(e)for(var i=0,n=e.length-1;i<n&&e[i].getBoundingClientRect().top===e[i+1].getBoundingClientRect().top;i++)t++;return t},t.prototype.onVirtualScroll=function(){var e=this.element.querySelector("#"+this.element.id+"_largeicons");this.scrollPosition=sf.base.isNullOrUndefined(this.scrollPosition)?0:this.scrollPosition;var t=e.firstElementChild.scrollTop<=0?0:e.firstElementChild.scrollTop;if(this.virtualChildEleTop=this.listItemHeight*Math.floor(t/this.listItemHeight),this.virtualChildEleTop!==parseFloat(this.virtualChildEle.style.top))if(this.virtualChildEle.style.top=this.virtualChildEleTop+"px",t>this.scrollPosition){var i=Math.round(this.virtualChildEleTop/this.listItemHeight-this.listDiff);this.dotnetRef.invokeMethodAsync("OnVirtualScroll",i,!0)}else{i=Math.round(this.listDiff-this.virtualChildEleTop/this.listItemHeight);this.dotnetRef.invokeMethodAsync("OnVirtualScroll",i,!1)}this.listDiff=Math.round(this.virtualChildEleTop/this.listItemHeight),this.scrollPosition=t},t.prototype.calculateItemCount=function(e){var t=this.element.querySelector("#"+this.element.id+"_largeicons"),i=t.firstElementChild.clientWidth-17,n=t.querySelectorAll(".e-list-item"),s=parseInt(window.getComputedStyle(n[0]).getPropertyValue("margin-right"),10)+parseInt(window.getComputedStyle(n[0]).getPropertyValue("margin-left"),10),o=parseInt(window.getComputedStyle(n[0]).getPropertyValue("margin-top"),10)+parseInt(window.getComputedStyle(n[0]).getPropertyValue("margin-bottom"),10),r=Math.floor(parseFloat(sf.base.formatUnit(i))/(n[0].offsetWidth+s));this.listItemHeight=n[0].getBoundingClientRect().height+o,this.columnItemCount=Math.round(parseFloat(sf.base.formatUnit(t.clientHeight))/n[0].offsetHeight)+1;var a=r*this.columnItemCount;this.lastRowCount=e%r?e%r:r;var l=e<r?this.listItemHeight:Math.round(e/r)*this.listItemHeight;return t.querySelector(".e-virtual-parent").style.height=l+"px",this.virtualChildEle=t.querySelector(".e-virtual-child"),this.virtualChildEle.style.top="0px",this.virtualChildEleTop=0,this.listDiff=0,t.firstElementChild.scrollTop=0,a+" "+r+" "+this.lastRowCount},t.prototype.keyupHandler=function(e){e.preventDefault();var t=0;"LargeIcons"===this.properties.view&&(t=this.getRowValue());var i=null;switch(e.action){case"altN":i="NewFolder";break;case"f5":i="Refresh";break;case"ctrlShift1":i="DetailsView";break;case"ctrlShift2":i="LargeIconsView";break;case"ctrlU":this.element.querySelector("#"+this.element.id+"_tb_upload")&&(i="Upload");break;case"altEnter":i="Details";break;case"del":case"shiftdel":i="Delete";break;case"enter":i="Open";break;case"ctrlC":i="Copy";break;case"ctrlV":i="Paste";break;case"ctrlX":i="Cut";break;case"ctrlD":i="Download";break;case"f2":i="Rename";break;case"ctrlA":i="SelectAll";break;case"home":i="Home";break;case"end":i="End";break;case"moveDown":i="MoveDown_"+t.toString();break;case"moveLeft":i="MoveLeft";break;case"moveRight":i="MoveRight";break;case"moveUp":i="MoveUp_"+t.toString();break;case"esc":i="Esc";break;case"ctrlLeft":i="ControlLeft";break;case"ctrlRight":i="ControlRight";break;case"ctrlEnd":i="ControlEnd";break;case"ctrlHome":i="ControlHome";break;case"shiftHome":i="ShiftHome";break;case"shiftEnd":i="ShiftEnd";break;case"shiftLeft":i="ShiftLeft";break;case"shiftRight":i="ShiftRight";break;case"csHome":i="ControlShiftHome";break;case"csEnd":i="ControlShiftEnd";break;case"csLeft":i="ControlShiftLeft";break;case"csRight":i="ControlShiftRight";break;case"ctrlUp":i="ControlUp_"+t.toString();break;case"shiftUp":i="ShiftUp_"+t.toString();break;case"csUp":i="ControlShiftUp_"+t.toString();break;case"ctrlDown":i="ControlDown_"+t.toString();break;case"shiftDown":i="ShiftDown_"+t.toString();break;case"csDown":i="ControlShiftDown_"+t.toString();break;case"space":i="Space";break;case"csSpace":i="ControlShiftSpace";break;case"shiftSpace":i="ShiftSpace";break;case"ctrlSpace":i="ControlSpace";break;case"tab":i="Tab"}i&&this.dotnetRef.invokeMethodAsync("PerformKeyboardAction",i)},t.prototype.treeviewKeydownHandler=function(e){if(e.preventDefault(),null==this.element.querySelector(".e-dialog.e-popup-open")){var t=null;switch(e.action){case"altEnter":t="Details";break;case"esc":t="Esc";break;case"del":t="Delete";break;case"ctrlC":t="Copy";break;case"ctrlV":t="Paste";break;case"ctrlX":t="Cut";break;case"shiftF10":t="Download";break;case"f2":t="Rename"}t&&this.dotnetRef.invokeMethodAsync("PerformTreeViewKeyboardAction",t)}},t.prototype.keydownHandler=function(e){if(null==this.element.querySelector(".e-dialog.e-popup-open"))switch(e.action){case"end":case"home":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":case"moveDown":case"moveUp":case"ctrlD":case"altN":case"f5":case"ctrlShift1":case"ctrlShift2":case"ctrlU":e.preventDefault()}},t}();return{initialize:function(e,i,n,s,o){new t(e,i,n,s);var r=window.sfBlazor.getCompInstance(e),a=i.getElementsByClassName("e-content");return sf.base.isNullOrUndefined(a[0])||"flex"!=a[0].style.display||a[0].style.removeProperty("display"),!sf.base.isNullOrUndefined(r)&&s.draggable&&r.createDragObj(),r.isMobile=o,r.adjustHeight()},dragStartActionContinue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.TriggerDragStartEvent(t)},wireMobileEvents:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.wireMobileEvents(),t.createDragObj(!0))},dragActionContinue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.TriggerDragEvent(t)},focusItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&"LargeIcons"===i.properties.view){var n=i.element.querySelector('.e-list-item.e-large-icon[data-uid="'+t+'"]');n&&n.focus()}},getItemCount:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i))return i.calculateItemCount(t)},updateProperties:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i))return i.properties=t,i.unWireEvents(),i.wireEvents(),i.isMobile&&(i.unWireMobileEvents(),i.wireMobileEvents()),i.adjustHeight()},uploadOpen:function(e,t,i){var n=window.sfBlazor.getCompInstance(e),s=(sf.base.isNullOrUndefined(i)?n.element:document.querySelector(i)).querySelector("#"+t);s&&!sf.base.Browser.isIos?s.click():n.fmDialogOpen()},triggerBlur:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||"TD"!==document.activeElement.tagName||document.activeElement.blur()},updateFocus:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.UpdateGridFocus(t)},updateView:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.properties.view=t,i.keyboardDownModule.destroy(),i.keyboardModule.destroy(),i.bindKeyboardEvent(),i.isMobile&&(i.unWireMobileEvents(),i.wireMobileEvents()),"LargeIcons"===t&&i.properties.virtualization&&i.wireEvents()),i.properties.draggable&&i.createDragObj()},updateGridRow:function(e,t){if(e){for(var i=e.querySelectorAll('tr.e-row[tabindex="0"]'),n=0;n<i.length;n++)i[n].removeAttribute("tabindex");var s=e.querySelector('[data-rowindex="'+t+'"]');s&&(s.setAttribute("tabindex","0"),s.focus())}},focusToolbar:function(e,t){var i=window.sfBlazor.getCompInstance(e),n=i.element.querySelector(t);!sf.base.isNullOrUndefined(i)&&n&&n.children[0].focus()},saveFile:function(e,t,i){var n=window.sfBlazor.getCompInstance(i),s={action:"download",path:e.path,names:e.names,data:e.data,customData:e.customData},o=sf.base.createElement("form",{id:n.element.id+"_downloadForm",attrs:{action:t,method:"post",name:"downloadForm",download:""}}),r=sf.base.createElement("input",{id:n.element.id+"_hiddenForm",attrs:{name:"downloadInput",value:JSON.stringify(s),type:"hidden"}});o.appendChild(r),document.body.appendChild(o),document.forms.namedItem("downloadForm").submit(),document.body.removeChild(o)},download:function(e,t){var i=new Blob([t],{type:"application/octet-stream"}),n=document.createElement("a");n.href=URL.createObjectURL(i),n.download=e,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},getTargetElement:function(e,t,i){var n,s,o=document.elementFromPoint(t,i),r=sf.base.closest(o,'li[role="treeitem"]');if(o)if(o.classList.contains("e-yscroll")&&o.classList.contains("e-content")||o.classList.contains("e-list-parent")&&o.classList.contains("e-ul")||o.classList.contains("e-view-container")||o.classList.contains("e-large-icons")||o.classList.contains("e-virtual-parent")||sf.base.closest(o,".e-empty.e-view-container"))s={IsFile:!1,RowIndex:null,IsFolder:!1,IsLayout:!0,IsTree:!1};else if(r){s={IsFile:!1,RowIndex:null,TargetID:r.getAttribute("data-uid"),IsFolder:!0,IsLayout:!1,IsTree:!0}}else{if("Details"===e)s={IsFile:a=!(n=sf.base.closest(o,"tr")).querySelector(".e-fe-grid-icon .e-fe-icon").classList.contains("e-fe-folder"),RowIndex:parseInt(n.getAttribute("data-rowindex"),10),IsFolder:!a,IsLayout:!1,IsTree:!1};else if("LargeIcons"===e){var a,l=(n=sf.base.closest(o,"li")).querySelector(".e-list-icon");s={IsFile:a=!l||!l.classList.contains("e-fe-folder"),RowIndex:null,TargetID:n.getAttribute("data-uid"),IsFolder:!a,IsLayout:!1,IsTree:!1}}}else s={IsFile:!1,RowIndex:null,IsFolder:!1,IsLayout:!1,IsTree:!1};return s},removeRefElement:function(e){var t=window.sfBlazor.getCompInstance(e),i=sf.base.select(".e-dlg-ref-element",t.element);sf.base.detach(i.parentElement)}}}()},"./modules/sf-floating-action-button.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Fab=function(){"use strict";var e=function(){function e(e){this.sfBlazor=window.sfBlazor,this.updateContext(e),this.sfBlazor.setCompInstance(this),this.initialize()}return e.prototype.updateContext=function(e){sf.base.extend(this,this,e)},e.prototype.initialize=function(){this.checkTarget(),this.setClientProps(!0),this.bindEvent(),this.visible&&this.element.classList.remove("e-fab-hidden")},e.prototype.checkTarget=function(){this.targetEle=null,sf.base.isNullOrUndefined(this.target)||"string"!=typeof this.target||(this.targetEle=document.querySelector(this.target)),this.isFixed=sf.base.isNullOrUndefined(this.targetEle),!this.isFixed&&this.targetEle.appendChild(this.element),this.isFixed?this.element.classList.add("e-fab-fixed"):this.element.classList.remove("e-fab-fixed")},e.prototype.bindEvent=function(){sf.base.EventHandler.add(window,"resize",this.resizeHandler,this)},e.prototype.unBindEvent=function(){sf.base.EventHandler.remove(window,"resize",this.resizeHandler)},e.prototype.resizeHandler=function(){this.getOffset(),(this.isMiddle||this.isCenter)&&this.dotNetRef.invokeMethodAsync("UpdatePosition",this.yOffset,this.xOffset)},e.prototype.setClientProps=function(e){this.getOffset();var t={yOffset:this.isMiddle?this.yOffset:"",xOffset:this.isCenter?this.xOffset:""};e&&(t.isFixed=this.isFixed?"Fixed":"Absolute"),this.clientProps=JSON.stringify(t)},e.prototype.getOffset=function(){this.isMiddle&&(this.yOffset=((this.targetEle?this.targetEle.clientHeight:window.innerHeight)-this.element.offsetHeight)/2+"px",this.element.style.setProperty("--fabVertDist",this.yOffset)),this.isCenter&&(this.xOffset=((this.targetEle?this.targetEle.clientWidth:window.innerWidth)-this.element.offsetWidth)/2+"px",this.element.style.setProperty("--fabHorzDist",this.xOffset))},e.prototype.destroy=function(){this.unBindEvent()},e.prototype.validateTarget=function(e){this.updateContext(e),this.checkTarget(),this.setClientProps(!0)},e.prototype.setPosition=function(e){this.updateContext(e),this.setClientProps(!1)},e}();return{initialize:function(t){return t.dataId?new e(t).clientProps:{}},validateTarget:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.validateTarget(e),t.clientProps}return{}},setPosition:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.setPosition(e),t.clientProps}return{}},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()}}}()},"./modules/sf-gantt.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Gantt=function(){"use strict";var e=function(){function e(e,t){this.previousCount=-1,this.timelineScrollLeft=0,this.parent=e,this.chartRootElement=t.querySelector(".e-chart-root-container"),this.chartElement=t.querySelector(".e-gantt-chart-pane"),this.element=t.querySelector(".e-chart-scroll-container"),this.timelineHeaderElement=t.querySelector(".e-timeline-header-container"),this.chartVirtualTable=this.element.querySelector(".e-virtualtable"),this.timelineVirtualTrack=this.timelineHeaderElement.querySelector(".e-virtualtrack"),this.dependencyViewContainer=t.querySelector(".e-gantt-dependency-view-container"),this.holidayContainer=t.querySelector(".e-holiday-container"),this.addEventListeners(),this.ChartHeight(t,this.chartRootElement)}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.element,"scroll",this.onScroll,this),sf.base.EventHandler.add(this.chartElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane"),i=e.element.querySelector(".e-chart-scroll-container");sf.base.EventHandler.remove(i,"scroll",this.onScroll),sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.mouseDownHandler)},e.prototype.gridScrollHandler=function(e){this.element.scrollTop=e,this.parent.isFromTreeGrid=!0},e.prototype.showHideSpinner=function(e){var t=this.parent;e&&!this.parent.spinnerShown?(this.parent.dotNetRef.invokeMethodAsync("ShowSpinner"),this.parent.spinnerShown=!0):!e&&this.parent.spinnerShown&&(t.dotNetRef.invokeMethodAsync("HideSpinner"),t.spinnerShown=!1)},e.prototype.getTimelineLeft=function(){var e=this.parent.element,t=this.timelineVirtualTrack.offsetWidth-3*e.offsetWidth;return this.timelineScrollLeft==(this.parent.enableRTL?-t:t)?this.timelineScrollLeft:this.parent.enableRTL?this.timelineScrollLeft+e.offsetWidth:this.timelineScrollLeft>e.offsetWidth?this.timelineScrollLeft-e.offsetWidth:0},e.prototype.updateSpinner=function(e){var t,i=this;this.showHideSpinner(!0),window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout((function(){e&&(t=i.getTimelineLeft(),i.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",t,i.parent.element.offsetWidth).then((function(){i.updateChartElementStyle()}))),i.element.querySelector(".e-chart-rows-container").style.visibility="visible",i.showHideSpinner(!1),window.clearTimeout(this.isScrolling)}),1e3)},e.prototype.getTopPosition=function(){var e=this.element.querySelector(".e-virtualtable"),t=e.style.transform.split(","),i=t.length>1?t[1].trim().split(")")[0]:e.style.transform.substring(e.style.transform.lastIndexOf("(")+1,e.style.transform.lastIndexOf(")"));return parseFloat(i)},e.prototype.getContentHeight=function(){var e=this.element.scrollHeight,t=this.chartElement.offsetHeight;return t<e?t:e},e.prototype.updateTopPosition=function(){var e,t=this.parent.treeGrid.element.querySelector(".e-content"),i=this.parent.chartScrollModule.getContentHeight(),n=t.scrollTop;this.parent.chartScrollModule&&this.parent.options.enableRowVirtualization?e=n-this.parent.chartScrollModule.getTopPosition():e=n;sf.base.isNullOrUndefined(this.holidayContainer)||(this.holidayContainer.style.height=i+"px",this.holidayContainer.style.top=e+"px")},e.prototype.updateScrollTopPosition=function(){var e=this.parent.treeGrid.element.querySelector(".e-content");sf.base.isNullOrUndefined(e)||this.element.scrollTop==e.scrollTop||(this.element.scrollTop=e.scrollTop)},e.prototype.onScroll=function(){var e=this.parent;if(e.scrollbarUpdate=!0,this.element.scrollLeft!==this.parent.chartPreviousScroll.left&&(sf.base.isNullOrUndefined(this.parent.taskbarEditModule)||(this.parent.taskbarEditModule.LongPress=!1)),this.element.scrollTop!==e.chartPreviousScroll.top&&this.parent.options.enableRowVirtualization&&(this.element.scrollTop-e.chartPreviousScroll.top>40||e.chartPreviousScroll.top-this.element.scrollTop>40)&&this.updateSpinner(!1),this.element.scrollLeft!==this.parent.chartPreviousScroll.left){if(this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,e.options.enableTimelineVirtualization){var t=this.parent.chartPreviousScroll.left,i=this.element.scrollLeft;!this.parent.enableRTL&&(this.element.scrollLeft-this.parent.chartPreviousScroll.left>50||this.parent.chartPreviousScroll.left-this.element.scrollLeft>50)||this.parent.enableRTL&&(Math.abs(i)-Math.abs(t)>50||Math.abs(t)-Math.abs(i)>50)?(this.appendDummyTable(),this.updateSpinner(!0)):this.updateVirtualContent()}this.parent.chartPreviousScroll.left=this.element.scrollLeft}this.element.scrollTop!==this.parent.chartPreviousScroll.top&&(this.parent.isFromTreeGrid||this.parent.treeGridModule.updateScrollTop(this.element.scrollTop),this.parent.chartPreviousScroll.top=this.element.scrollTop,this.updateTopPosition(),this.parent.isFromTreeGrid=!1)},e.prototype.updateContent=function(){var e=this;this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var t=this.parent.element,i=Math.round(this.timelineScrollLeft/(2*t.offsetWidth));if(this.previousCount!=i){this.calculateScrollLeft();var n=this.getTimelineLeft();e.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",n,t.offsetWidth).then((function(){e.updateChartElementStyle()}))}this.previousCount=i},e.prototype.updateVirtualContent=function(){this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var e=this.parent.element,t=Math.round(this.timelineScrollLeft/e.offsetWidth);this.previousCount!=t&&(this.appendDummyTable(),this.timelineScrollLeft-=e.offsetWidth,this.updateSpinner(!0)),this.previousCount=t},e.prototype.updateChartElementStyle=function(){var e=this.getTimelineLeft(),t=3*this.parent.element.offsetWidth;if(this.timelineVirtualTrack.offsetWidth>t){var i=new DOMMatrixReadOnly(this.chartVirtualTable.style.transform).m42;this.chartVirtualTable.style.transform="translate("+e+"px,"+i+"px)";var n=this.parent.enableRTL?t+Math.abs(e):t+e,s=this.parent.enableRTL?e:-e;sf.base.isNullOrUndefined(this.chartTaskTable)||(this.chartTaskTable.style.setProperty(this.parent.enableRTL?"right":"left",s+"px"),this.chartTaskTable.style.width=n+"px"),sf.base.isNullOrUndefined(this.dependencyViewContainer)||(this.dependencyViewContainer.style.left=-e+"px")}else this.timelineVirtualTrack.offsetWidth<t&&!sf.base.isNullOrUndefined(this.chartTaskTable)&&(this.chartTaskTable.style.width=this.timelineVirtualTrack.offsetWidth+"px")},e.prototype.calculateScrollLeft=function(){var e=this.parent.element,t=3*e.offsetWidth,i=this.timelineVirtualTrack.offsetWidth>t?this.timelineVirtualTrack.offsetWidth-t:t,n=Math.abs(this.timelineScrollLeft);this.timelineScrollLeft>=i?this.timelineScrollLeft=i:n>=i&&this.parent.enableRTL?this.timelineScrollLeft=-i:this.element.scrollLeft<this.parent.chartPreviousScroll.left&&!this.parent.enableRTL?this.timelineScrollLeft<=e.offsetWidth&&(this.timelineScrollLeft=0):this.timelineScrollLeft<0&&!this.parent.enableRTL&&(this.timelineScrollLeft=0)},e.prototype.appendDummyTable=function(){this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var e=this.timelineHeaderElement.querySelectorAll(".e-virtualtable");this.element.querySelector(".e-chart-rows-container").style.visibility="hidden",this.calculateScrollLeft();for(var t=this.getTimelineLeft(),i=0;i<e.length;i++){var n=e[i],s=new DOMMatrixReadOnly(n.style.transform).m42;n.style.transform="translate("+t+"px,"+s+"px)"}},e.prototype.mouseDownHandler=function(e){var t=e.target,i=!1,n=this.parent.getParentElement(t,"e-gantt-chart"),s=this.parent.getParentElement(t,"e-chart-row");if(null!=s&&(i=!!s.querySelector(".e-chart-empty-row")),null!=n){var o=null,r=null;if(this.parent.getParentElement(t,"e-timeline-header-container"))o="Header";else if(this.parent.getParentElement(t,"e-content")){if(!sf.base.isNullOrUndefined(e.target.classList)&&(e.target.classList.contains("e-connector-line")||e.target.classList.contains("e-rg-rangdiv")))return;o="Content",r=this.parent.getParentElement(t,"e-chart-row-cell")?this.parent.getParentElement(e.target,"e-chart-row-cell").getAttribute("data-uid"):null}"Header"!=o&&"Content"!=o||this.parent.dotNetRef.invokeMethodAsync("ChartMouseDownHandler",o,r,i)}},e.prototype.setScrollLeft=function(e,t){e=-1==t&&this.parent.enableRTL?-e:e,this.element.scrollLeft=e,this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,this.parent.chartPreviousScroll.left=this.element.scrollLeft},e.prototype.setScrollTop=function(e){this.element.scrollTop=e,this.parent.treeGrid.element.querySelector(".e-content").scrollTop=e},e.prototype.ChartHeight=function(e,t){this.toolbarElement=e.querySelector("#"+e.id+"_Gantt_Toolbar"),this.viewPortHeight=this.parent.height-this.parent.toolbarHeight-this.timelineHeaderElement.offsetHeight,t.style.height="calc(100% - "+this.timelineHeaderElement.offsetHeight+"px)"},e.prototype.destroy=function(e){this.removeEventListeners(e)},e}(),t=function(){function e(e,t){this.parent=e,this.content=t,this.treegridPane=this.parent.element.querySelector(".e-grid"),this.addEventListeners()}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this),sf.base.EventHandler.add(this.treegridPane,sf.base.Browser.touchStartEvent,this.treeMouseDownHandler,this),sf.base.EventHandler.add(window,"resize",this.windowResize,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gridcontent");sf.base.EventHandler.remove(this.treegridPane,sf.base.Browser.touchStartEvent,this.treeMouseDownHandler),sf.base.EventHandler.remove(t,"scroll",this.scrollHandler),sf.base.EventHandler.remove(window,"resize",this.windowResize)},e.prototype.scrollHandler=function(e){this.content.scrollTop!==this.parent.treegridPreviousScroll.top&&this.parent.chartScrollModule.gridScrollHandler(this.content.scrollTop),this.parent.treegridPreviousScroll.top=this.content.scrollTop},e.prototype.treeMouseDownHandler=function(e){if(null!=this.parent.getParentElement(e.target,"e-grid")){var t=null,i=null;if(this.parent.getParentElement(e.target,"e-gridcontent"))t="GridContent",i=this.parent.getParentElement(e.target,"e-row")?this.parent.getParentElement(e.target,"e-row").getAttribute("data-uid"):null;else if(this.parent.getParentElement(e.target,"e-headercontent")){t="Header";var n=!0}"Header"!=t&&"GridContent"!=t||this.parent.dotNetRef.invokeMethodAsync("TreeMouseDownHandler",t,i,n)}},e.prototype.windowResize=function(){if(sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("WindowResize"),this.parent.options.enableTimelineVirtualization){var e=this.parent.chartScrollModule.timelineHeaderElement;e&&(e.style.width=this.parent.chartScrollModule.element.offsetWidth-this.parent.scrollWidth+"px"),this.parent.chartScrollModule.updateContent()}},e.prototype.updateScrollTop=function(e){this.content.scrollTop=e,this.parent.treegridPreviousScroll.top=this.content.scrollTop},e.prototype.destroy=function(e){this.removeEventListeners(e)},e}(),i="e-taskbar-main-container",n="e-active-container",s=function(){return(s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},o=function(){function e(e){this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0,this.restrictTaskbarEdit=!1,this.restrictConnectorLineEdit=!1,this.dblClick=0,this.parent=e,this.initPublicProp(),this.ganttChartTableBody=this.parent.element.querySelector("#"+this.parent.element.id+"_chartContentBody"),this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.chartBodyContainer=this.parent.element.querySelector(".e-chart-root-container"),this.addEventListeners()}return e.prototype.initPublicProp=function(){this.taskBarEditElement=null,this.taskBarEditRecord=null,this.taskBarEditAction=null,this.dragMouseLeave=!1,this.isMouseDragging=!1,this.isTaskbarHold=!1,this.taskbarTouchEditing=!1,this.connectorPointWidth=null,this.connectorSecondAction=null,this.toPredecessorText=null,this.highlightedSecondElement=null,this.falseLine=null},e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseDown,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave,this),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp,this),sf.base.EventHandler.add(this.chartBodyContainer,"click",this.click,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane"),i=e.element.querySelector(".e-chart-root-container");sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.ganttMouseDown),sf.base.EventHandler.remove(t,sf.base.Browser.touchMoveEvent,this.ganttMouseMove),sf.base.EventHandler.remove(t,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp),sf.base.EventHandler.remove(i,"click",this.click)},e.prototype.checkPointerType=function(e){return-1!==e.type.indexOf("pointer")&&"safari"===sf.base.Browser.info.name&&parseInt(sf.base.Browser.info.version)>12},e.prototype.isTaskbarDragAndDrop=function(e){return!sf.base.isNullOrUndefined(e.querySelector(".e-gantt-taskbar-draganddrop"))},e.prototype.ganttMouseDown=function(e){this.taskbarCanDrag=!1;var t=this.parent.getOffsetRect(this.chartBodyContainer);this.event=this.getCoordinate(e),this.parent.enableRTL?this.mouseDownX=Math.abs(e.pageX-(t.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseDownX=this.event.pageX-t.left+this.parent.chartPreviousScroll.left;var n=e.target,s=n.classList.contains("e-chart-row-cell"),o=this.getElementByPosition(e),r=this.parent.getParentElement(o,"e-chart-row-cell"),a=null;if(sf.base.isNullOrUndefined(r)||(a=r.querySelector(".e-taskbar-main-container")),this.taskBarRow=this.parent.getParentElement(o,"e-chart-row"),sf.base.isNullOrUndefined(this.taskBarRow)||(this.parent.options.allowTaskbarDragAndDrop=this.isTaskbarDragAndDrop(this.parent.element)),this.updateTaskBarEditElement(e),!this.taskBarEditAction&&null==a&&this.parent.options.allowSchedulingOnDrag){if(this.chartEmptyRowElement=sf.base.createElement("div",{className:"e-chart-empty-row"}),sf.base.isNullOrUndefined(this.taskBarRow)||(this.taskBarRow.appendChild(this.chartEmptyRowElement),this.emptyRow=this.taskBarRow.querySelector(".e-chart-empty-row")),this.emptyRow){var l=document.querySelectorAll(".e-row");this.dataGuid=this.taskBarRow.getAttribute("data-rowindex");var h=l[this.dataGuid].querySelector(".e-treegridexpand");this.parentRow=!!h,this.parentRow?this.taskBarRow.style.cursor="no-drop":(this.taskBarRow.style.position="relative",this.taskBarRow.style.cursor="crosshair",this.emptyRow.style.left="0px",this.emptyRow.style.backgroundColor="transparent",this.emptyRow.style.top=(n.offsetHeight-(Math.floor(.62*n.offsetHeight)-2))/2-1+"px",this.emptyRow.style.height=Math.floor(.62*n.offsetHeight)+"px",this.parent.dotNetRef.invokeMethodAsync("ChartRowMouseDownHandler",this.dataGuid),this.isDown=!0)}this.longPress(!0)}else!this.taskBarEditAction&&this.taskBarRow&&s&&this.parent.options.allowSchedulingOnDrag&&(this.taskBarRow.style.cursor="no-drop");var d=this.parent.getParentElement(o,i);sf.base.isNullOrUndefined(d)||sf.base.isNullOrUndefined(this.taskbarCurrentEditElement)||d!=this.taskbarCurrentEditElement||(this.taskbarCanDrag=!0,this.checkPointerType(e)&&(e.stopPropagation(),this.parent.element.querySelector(".e-chart-scroll-container").style.overflow="hidden"));this.dblClick++,this.dblClick>=2&&(this.dblClick=1)},e.prototype.click=function(e){var t=this.getElementByPosition(e);this.taskbarCurrentEditElement=this.parent.getParentElement(t,i)},e.prototype.ganttMouseLeave=function(e){this.dragMouseLeave=!0},e.prototype.ganttChartMouseUp=function(e){var t=this;this.isTaskbarHold=!1,this.taskBarRow&&(this.isDown=!1,this.taskBarRow.style.cursor="");var i=-1;if(this.parent.options.allowTaskbarDragAndDrop&&this.parent.options.enableRowVirtualization){var n=document.elementFromPoint(e.clientX,e.clientY).getBoundingClientRect().x-5,s=document.elementFromPoint(n,e.clientY),o=this.parent.getParentElement(s,"e-chart-row");i=sf.base.isNullOrUndefined(o)?i:Number(o.getAttribute("data-rowindex"))}this.taskBarEditAction&&this.isMouseDragging?(this.dragMouseLeave?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null,i),this.taskBarEditRecord=this.previousItem,this.updateItemPosition()):this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord,i).then((function(e){null!=t.taskBarEditRecord&&null!=e&&(t.taskBarEditRecord.left=e.left,t.taskBarEditRecord.width=e.width,t.taskBarEditRecord.progress=e.progress,t.taskBarEditRecord.progressWidth=e.progressWidth),t.updateItemPosition()})),this.checkPointerType(e)&&(this.parent.element.querySelector(".e-chart-scroll-container").style.overflow="scroll auto")):this.taskBarEditElement&&this.taskbarTouchEditing||this.taskBarEditAction?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null,i),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()):this.tappedPoint?this.taskbarCurrentEditElement=null:!this.taskBarEditAction&&this.emptyRow&&!this.parentRow&&this.parent.options.allowSchedulingOnDrag&&(this.emptyRow.style.border="none",sf.base.isNullOrUndefined(this.chartEmptyRowElement)||sf.base.remove(this.chartEmptyRowElement),this.parent.dotNetRef.invokeMethodAsync("UpdateTaskbarResizedData",this.dataGuid),this.taskBarRow=null,this.emptyRow=null);this.removeCloneElement(),this.stopScrollTimer(),this.longPress(!1)},e.prototype.updateItemPosition=function(){this.setItemPosition(),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()},e.prototype.createResizeElement=function(){var e=sf.base.createElement("div");e.classList.add("e-gantt-chart-resize-indicator"),e.style.setProperty("width",this.taskBarEditElement.style.width);var t=this.parent.enableRTL?"right":"left";if(e.style.setProperty(t,this.taskBarEditElement.style.left),this.parent.options.enableTimelineVirtualization&&this.parent.options.enableRowVirtualization){var i=this.parent.chartScrollModule.getTimelineLeft(),n=e.style.left,s=n.substring(0,n.length-2);e.style.left=parseInt(s)+(this.parent.enableRTL?i:-i)+"px"}this.parent.element.querySelector(".e-chart-rows-container").appendChild(e)},e.prototype.createTaskbarClone=function(e){var t=this.parent.element.querySelector(".e-gantt-clone-taskbar"),i=e.cloneNode(!0);if(!t){if(i.classList.add("e-gantt-clone-taskbar"),i.style.setProperty("top",e.parentElement.offsetTop+1+"px"),"LeftResizing"===this.taskBarEditAction)i.querySelector(".e-taskbar-left-resizer").classList.add("e-left-resize-gripper");if("RightResizing"===this.taskBarEditAction)i.querySelector(".e-taskbar-right-resizer").classList.add("e-right-resize-gripper");if("ProgressResizing"===this.taskBarEditAction)i.querySelector(".e-child-progress-resizer").classList.add("e-progress-resize-gripper");var n=i.querySelector(".e-left-connectorpoint-outer-div"),s=i.querySelector(".e-right-connectorpoint-outer-div");sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(s)||(n.style.setProperty("visibility","hidden"),s.style.setProperty("visibility","hidden"))}(this.cloneTaskbarElement=i,this.parent.options.allowTaskbarDragAndDrop&&(this.cloneTaskbarElement.style.zIndex="999"),this.cloneTaskbarElement.style.setProperty("opacity","40%"),this.taskBarEditElement=this.cloneTaskbarElement,sf.base.isNullOrUndefined(i))||(this.parent.options.enableRowVirtualization&&this.parent.options.allowTaskbarDragAndDrop?this.parent.element.querySelector(".e-chart-scroll-container").appendChild(i):e.parentElement.appendChild(i))},e.prototype.removeCloneElement=function(){var e=this.parent.element.querySelector(".e-gantt-chart-resize-indicator"),t=this.parent.element.querySelector(".e-gantt-clone-taskbar");(sf.base.isNullOrUndefined(e)||e.remove(),sf.base.isNullOrUndefined(t))||(t.parentElement.querySelector("."+i).style.removeProperty("z-index"),t.remove())},e.prototype.updateTaskBarEditElement=function(e){var t=this,n=this.getElementByPosition(e),s=this.parent.getParentElement(n,i);if(this.taskBarEditElement=s,this.taskBarEditElement&&!this.tappedPoint){var o=s.style.cursor;("mousedown"===e.type||"touchstart"===e.type||"click"===e.type||this.checkPointerType(e))&&(this.dataGuid=this.taskBarEditElement.getAttribute("rowuniqueid"),this.parent.dotNetRef.invokeMethodAsync("GetConnectorValues").then((function(e){t.connectorPointWidth=e})),this.taskBarEditAction=this.getTaskBarAction(e,o),this.parent.isTaskbarEditingEventMapped&&this.parent.dotNetRef.invokeMethodAsync("OnTaskbarEditing",this.dataGuid,this.taskBarEditAction).then((function(e){t.restrictTaskbarEdit=e})),this.parent.dotNetRef.invokeMethodAsync("GetEditedRecord",this.dataGuid,this.taskBarEditAction).then((function(i){t.taskBarEditRecord=i,t.updateMouseDownProperties(e)})),this.isTaskbarHold=!0)}else if(this.taskBarEditElement&&this.tappedPoint){var r=s.getAttribute("rowuniqueid");this.parent.dotNetRef.invokeMethodAsync("RenderConnectorLine",this.tappedPoint,this.dataGuid,r),this.initPublicProp()}},e.prototype.updateMouseDownProperties=function(e){var t=this.getCoordinate(e);if(t.pageX||t.pageY){var i=this.parent.getOffsetRect(this.chartBodyContainer);this.parent.enableRTL?this.mouseDownX=Math.abs(t.pageX-(i.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseDownX=t.pageX-i.left+Math.abs(this.parent.chartPreviousScroll.left),this.mouseDownY=t.pageY-i.top+this.parent.chartPreviousScroll.top}},e.prototype.getTaskBarAction=function(e,t){var i=this.getElementByPosition(e),n=(this.taskBarEditRecord,"");return i.classList.contains("e-taskbar-left-resizer")?n="LeftResizing":i.classList.contains("e-taskbar-right-resizer")?n="RightResizing":i.classList.contains("e-child-progress-resizer")||sf.base.closest(i,".e-child-progress-resizer")?n="ProgressResizing":i.classList.contains("e-connectorpoint-left-hover")?(n="ConnectorPointLeftDrag",("touchstart"===e.type||"click"===e.type||this.checkPointerType(e))&&(this.tappedPoint="ConnectorPointLeftDrag")):i.classList.contains("e-connectorpoint-right-hover")?(n="ConnectorPointRightDrag",("touchstart"===e.type||"click"===e.type||this.checkPointerType(e))&&(this.tappedPoint="ConnectorPointRightDrag")):"Auto"===this.parent.options.taskMode&&(sf.base.closest(i,".e-gantt-parent-taskbar")||sf.base.closest(i,".e-gantt-parent-milestone"))&&"default"!=t?n="ParentDrag":sf.base.closest(i,".e-gantt-child-taskbar")&&"default"!=t?n="ChildDrag":sf.base.closest(i,".e-gantt-milestone")&&"default"!=t&&(n="MilestoneDrag"),n},e.prototype.getElementByPosition=function(e){var t=this.getCoordinate(e);return t.pageX=null!=t.pageX?t.pageX:0,t.pageY=null!=t.pageY?t.pageY:0,document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset)},e.prototype.getCoordinate=function(e){var t={};if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchleave"===e.type){var i=e;t.pageX=i.changedTouches[0].pageX,t.pageY=i.changedTouches[0].pageY}else{i=e;t.pageX=i.pageX,t.pageY=i.pageY}return t},e.prototype.ganttMouseMove=function(e){if("touchmove"!==e.type&&"click"!==e.type&&!this.checkPointerType(e)||this.taskbarCanDrag){if(this.isDown&&!this.taskBarEditAction&&!this.parentRow&&"mousemove"==e.type||this.LongPress&&this.isDown){var t=e.target,i=this.parent.getParentElement(t,"e-chart-scroll-container");this.parent.chartPreviousScroll.left>0&&i.scrollWidth-this.chartBodyContainer.offsetWidth>this.parent.chartPreviousScroll.left&&e.preventDefault();var n=this.parent.getOffsetRect(this.chartBodyContainer),s=this.getCoordinate(e);if(this.parent.enableRTL?this.mouseMoveX=Math.abs(s.pageX-(n.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseMoveX=s.pageX-n.left+this.parent.chartPreviousScroll.left,this.emptyRow){var o=document.getElementById(this.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(o))o.style.left=this.event.pageX-10+"px",o.style.top=this.event.pageY-80+"px",sf.base.select(".e-arrow-tip",o).style.left="2px";(this.mouseMoveX-this.mouseDownX>2||this.mouseDownX-this.mouseMoveX>2)&&(this.mouseMoveX>this.mouseDownX?(this.taskBarWidth=this.mouseMoveX-this.mouseDownX,this.taskBarRight=this.mouseDownX+this.taskBarWidth,this.parent.dotNetRef.invokeMethodAsync("UpdateTaskbarResizingData",this.dataGuid,this.mouseDownX,this.taskBarRight)):(this.taskBarWidth=this.mouseDownX-this.mouseMoveX,this.taskBarRight=this.mouseDownX-this.taskBarWidth,this.parent.dotNetRef.invokeMethodAsync("UpdateTaskbarResizingData",this.dataGuid,this.taskBarRight,this.mouseDownX))),this.emptyRow.style.width=this.taskBarWidth+"px",this.parent.enableRTL?this.emptyRow.style.left=this.mouseMoveX<this.mouseDownX?i.scrollWidth-this.mouseDownX+"px":i.scrollWidth-this.taskBarRight+"px":this.emptyRow.style.left=this.mouseMoveX>this.mouseDownX?this.mouseDownX+"px":this.taskBarRight+"px",this.emptyRow.style.backgroundColor="";var r=0;(r=this.parent.enableRTL?Math.abs(Math.abs(this.mouseMoveX)-Math.abs(this.parent.chartPreviousScroll.left)+n.left):this.mouseMoveX-this.parent.chartPreviousScroll.left+n.left)+20>n.left+this.chartBodyContainer.offsetWidth?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):r+40>n.left+this.chartBodyContainer.offsetWidth&&this.parent.enableRTL&&0==this.parent.chartPreviousScroll.left?(this.parent.chartPreviousScroll.left=-1,this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):r-10<n.left?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("left")):null!=this.scrollTimer&&this.stopScrollTimer()}}if(this.taskBarEditAction&&this.taskBarEditRecord&&this.isTaskbarHold){n=this.parent.getOffsetRect(this.chartBodyContainer),s=this.getCoordinate(e);this.parent.enableRTL?this.mouseMoveX=Math.abs(s.pageX-(n.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseMoveX=s.pageX-n.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=s.pageY-n.top+this.parent.chartPreviousScroll.top,this.dragMouseLeave=!1,this.isMouseDragCheck(),this.isMouseDragging&&(this.taskBarEditingAction(e,!1),1===this.dblClick&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&("ProgressResizing"!==this.taskBarEditAction&&this.createResizeElement(),this.taskBarEditElement.style.setProperty("z-index","4"),this.createTaskbarClone(this.taskBarEditElement),this.dblClick++))}var a=sf.base.closest(e.target,".e-taskbar-main-container");a&&"default"!=a.style.cursor&&(this.parent.options.allowTaskbarEditing&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction?a.style.cursor="move":a.style.cursor="auto")}},e.prototype.isMouseDragCheck=function(){if(!this.isMouseDragging&&this.taskBarEditAction&&(this.mouseDownX!==this.mouseMoveX&&(this.mouseDownX+3<this.mouseMoveX||this.mouseDownX-3>this.mouseMoveX)||this.mouseDownY!==this.mouseMoveY&&(this.mouseDownY+3<this.mouseMoveY||this.mouseDownY-3>this.mouseMoveY))){this.isMouseDragging=!0;var e=this.taskBarEditRecord;this.previousItem=s({},e),this.taskBarEditElement.setAttribute("aria-grabbed","true")}},e.prototype.updateMouseMoveProperties=function(e){var t=this.parent.getOffsetRect(this.chartBodyContainer),i=this.getCoordinate(e),n="ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction,s=!("ChildDrag"!==this.taskBarEditAction&&"MilestoneDrag"!==this.taskBarEditAction||!this.parent.options.allowTaskbarDragAndDrop);if((i.pageX||i.pageY)&&(this.parent.enableRTL?this.mouseMoveX=Math.abs(i.pageX-(t.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseMoveX=i.pageX-t.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=i.pageY-t.top+this.parent.chartPreviousScroll.top),this.taskBarEditRecord.width>3&&("ProgressResizing"!==this.taskBarEditAction||0!==this.taskBarEditRecord.progress&&100!==this.taskBarEditRecord.progress)||n){var o=0;o=this.parent.enableRTL?Math.abs(Math.abs(this.mouseMoveX)-Math.abs(this.parent.chartPreviousScroll.left)+t.left):this.mouseMoveX-this.parent.chartPreviousScroll.left+t.left;var r=this.mouseMoveY-this.parent.chartPreviousScroll.top+t.top;o+20>t.left+this.chartBodyContainer.offsetWidth?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):o+40>t.left+this.chartBodyContainer.offsetWidth&&this.parent.enableRTL&&0==this.parent.chartPreviousScroll.left?(this.parent.chartPreviousScroll.left=-1,this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):o-10<t.left?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("left")):(n||s)&&r>t.top+this.chartBodyContainer.offsetHeight-80?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("bottom")):(n||s)&&r-25<t.top?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("top")):null!=this.scrollTimer&&this.stopScrollTimer()}e.preventDefault()},e.prototype.longPress=function(e){var t=this;e?t.longPressTimer=window.setTimeout((function(){t.LongPress=!0}),1e3):(t.LongPress=!1,window.clearTimeout(t.longPressTimer))},e.prototype.startScrollTimer=function(e){var t=this;this.parent.chartScrollModule.previousCount=0,this.stopScrollTimer();var i=0,n=this.parent.element.querySelector(".e-chart-root-container");this.scrollTimer=window.setInterval((function(){if(-1==Math.sign(t.timerCount)&&(i=-1,t.timerCount=Math.abs(t.timerCount)),"right"===e)t.timerCount=t.timerCount+1>=t.parent.totalTimelineWidth?t.parent.totalTimelineWidth:t.timerCount+1;else if("bottom"!==e||sf.base.isNullOrUndefined(n))t.timerCount=t.timerCount-1<0?0:t.timerCount-1;else{var s=t.parent.options.enableRowVirtualization?parseFloat(n.querySelector(".e-virtualtrack").style.height):parseFloat(n.querySelector(".e-chart-rows-container").style.height);t.timerCount=t.timerCount+1>=s?s:t.timerCount+1}"bottom"===e||"top"===e?t.parent.chartScrollModule.setScrollTop(t.timerCount):(t.parent.chartScrollModule.setScrollLeft(t.timerCount,i),t.parent.options.enableTimelineVirtualization&&t.parent.chartScrollModule.updateContent()),"ConnectorPointLeftDrag"!==t.taskBarEditAction&&"ConnectorPointRightDrag"!==t.taskBarEditAction||t.drawFalseLine()}),0)},e.prototype.stopScrollTimer=function(){window.clearInterval(this.scrollTimer),this.scrollTimer=null},e.prototype.taskBarEditingAction=function(e,t){this.restrictTaskbarEdit||this.updateMouseMoveProperties(e),"ProgressResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"LeftResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"RightResizing"!==this.taskBarEditAction&&"ParentResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ParentDrag"!==this.taskBarEditAction&&"ChildDrag"!==this.taskBarEditAction&&"MilestoneDrag"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||"touchmove"==e.type&&!this.checkPointerType(e)||this.restrictConnectorLineEdit||(this.updateConnectorLineSecondProperties(e),this.triggerDependencyEvent(e),this.drawFalseLine()):this.enableDragging(e):this.enableRightResizing(e):this.enableLeftResizing(e):this.performProgressResize(e),this.restrictTaskbarEdit||this.setItemPosition(),"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&this.parent.dotNetRef.invokeMethodAsync("UpdateResizingData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord),this.taskbarTouchEditing=!0,this.updateTooltip(e)},e.prototype.updateTooltip=function(e){var t=document.getElementById(this.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(t)){var i=this.taskBarEditRecord,n=i.width,s=i.progressWidth,o=this.parent.getOffsetRect(this.taskBarEditElement),r=this.parent.tooltipModule.getPointerPosition(e),a=sf.base.select(".e-arrow-tip",t),l=a.offsetWidth/2+(t.offsetWidth-t.clientWidth);if(a.style.left="2px","ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction)return;"LeftResizing"===this.taskBarEditAction?t.style.left=o.left-l+"px":"RightResizing"===this.taskBarEditAction||"ParentResizing"===this.taskBarEditAction?t.style.left=(this.parent.enableRTL?o.left-n-l:o.left+n-l)+"px":"ProgressResizing"===this.taskBarEditAction?t.style.left=(this.parent.enableRTL?o.left-s-l:o.left+s-l)+"px":t.style.left=r.x-l+"px",this.parent.options.allowTaskbarDragAndDrop&&(t.style.top=Math.abs(o.top-(t.offsetHeight+10))+"px")}},e.prototype.setItemPosition=function(){var e=this.taskBarEditRecord,t=this.parent.enableRTL?"right":"left";if(null!=e&&null!=this.taskBarEditElement&&(null!=sf.base.closest(this.taskBarEditElement,"tr.e-chart-row")||this.parent.options.allowTaskbarDragAndDrop&&this.parent.options.enableRowVirtualization)){var n="MilestoneDrag"===this.taskBarEditAction||e.isMilestone?this.milestoneHeight:e.width,s=n-10,o=n-2,r=e.progress/100*e.width,a=this.taskBarEditElement.classList.contains(i)||"ChildDrag"===this.taskBarEditAction||"LeftResizing"===this.taskBarEditAction?this.taskBarEditElement:sf.base.closest(this.taskBarEditElement,"tr.e-chart-row").querySelector("."+i),l=this.taskBarEditElement.querySelector(".e-gantt-child-progressbar"),h=this.taskBarEditElement.querySelector(".e-gantt-child-taskbar"),d=this.taskBarEditElement.querySelector(".e-child-progress-resizer"),c=this.taskBarEditElement.querySelector(".e-taskbar-right-resizer"),p=(this.taskBarEditElement.querySelector(".e-gantt-parent-taskbar"),this.taskBarEditElement.querySelector(".e-gantt-parent-progressbar")),u=this.taskBarEditElement.querySelector(".e-right-connectorpoint-outer-div");this.parent.biggerMode&&(s=n-24,o=n+10);var f=this.parent.element.querySelector(".e-chart-rows-container").querySelector(".e-gantt-chart-resize-indicator");if(!sf.base.isNullOrUndefined(f)&&("ChildDrag"===this.taskBarEditAction||"ParentDrag"===this.taskBarEditAction||"RightResizing"===this.taskBarEditAction||"LeftResizing"===this.taskBarEditAction)&&(f.style.width=n+"px",f.style.setProperty(t,e.left+"px"),this.parent.options.enableTimelineVirtualization&&this.parent.options.enableRowVirtualization)){var g=this.parent.chartScrollModule.getTimelineLeft();f.style.left=e.left+(this.parent.enableRTL?g:-g)+"px"}a.classList.contains("e-gantt-clone-taskbar")&&"ParentResizing"!==this.taskBarEditAction&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&(a.style.width=n+"px",a.style.setProperty(t,e.left+"px"),!this.parent.options.allowTaskbarDragAndDrop||"ChildDrag"!==this.taskBarEditAction&&"MilestoneDrag"!==this.taskBarEditAction||(a.style.top=e.top+"px")),u&&u.style.setProperty(t,o+"px"),c&&c.style.setProperty(t,s+"px"),"MilestoneDrag"===this.taskBarEditAction||e.isMilestone?(a.style.setProperty(t,e.left-n/2+2+"px"),sf.base.isNullOrUndefined(f)||f.style.setProperty("left",e.left-n/2+"px")):"ProgressResizing"===this.taskBarEditAction?(h.style.setProperty(t,e.left+e.progressWidth-10+"px"),sf.base.isNullOrUndefined(l)||(l.style.width=e.progressWidth+"px",l.style.borderBottomRightRadius=this.progressBorderRadius+"px",l.style.borderTopRightRadius=this.progressBorderRadius+"px",d.style.setProperty(t,e.progressWidth-8+"px"))):a.classList.contains("e-gantt-clone-taskbar")&&"RightResizing"===this.taskBarEditAction&&!sf.base.isNullOrUndefined(h)?(h.style.width=n+"px",sf.base.isNullOrUndefined(l)||(l.style.width=r+"px",c.style.setProperty(t,s+"px"),d.style.setProperty(t,r-8+"px"))):"ParentDrag"===this.taskBarEditAction?sf.base.isNullOrUndefined(l)||(p.style.width=e.progressWidth+"px"):(a.classList.contains("e-gantt-clone-taskbar")&&!sf.base.isNullOrUndefined(h)&&(h.style.width=n+"px"),a.classList.contains("e-gantt-clone-taskbar")&&!sf.base.isNullOrUndefined(l)&&(c.style.setProperty(t,s+"px"),l.style.width=r+"px",d.style.setProperty(t,r-8+"px")))}},e.prototype.enableLeftResizing=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX<t.left+t.width?(i=this.mouseDownX-this.mouseMoveX,t.left>0&&(t.left=this.previousItem.left-i,t.width=this.previousItem.width+i)):this.mouseMoveX>t.left+t.width&&(i=this.mouseDownX-this.mouseMoveX,t.left=this.previousItem.left-i,t.width=3):this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-this.mouseDownX,t.left<t.left+t.width&&this.previousItem.left+i<=this.previousItem.left+this.previousItem.width&&(t.left=this.previousItem.left+i,t.width=this.previousItem.width-i)):(i=this.mouseMoveX-this.mouseDownX,t.left=this.previousItem.left+i,t.width=3),this.updateEditPosition(e,t),t.left=this.previousItem.left+this.previousItem.width-t.width},e.prototype.enableRightResizing=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseDownX-this.mouseMoveX>3?(i=this.mouseDownX-this.mouseMoveX,t.width=this.previousItem.width-i):this.mouseMoveX<t.left&&(t.width=3):this.mouseMoveX>t.left&&(i=this.mouseMoveX-this.mouseDownX,t.width=this.previousItem.width+i),this.updateEditPosition(e,t)},e.prototype.enableDragging=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?(i=this.mouseDownX-this.mouseMoveX)>0&&(t.left=this.previousItem.left-i):(i=this.mouseMoveX-this.mouseDownX,t.left=this.previousItem.left+i);var n=this.chartBodyContainer.querySelector(".e-task-table"),s=t.left<0?0:t.left+t.width>=n.offsetWidth?n.offsetWidth-t.width:t.left;this.parent.options.allowTaskbarDragAndDrop&&(t.top=this.previousItem.top+Math.abs(15-this.mouseMoveY)),t.left=s},e.prototype.performProgressResize=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseMoveX<t.left+t.width&&t.left>0?(i=this.mouseMoveX-t.left,t.progressWidth=i):this.mouseMoveX>=t.left+t.width?t.progressWidth=t.width:t.progressWidth=0:this.mouseMoveX>t.left&&this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-t.left,t.progressWidth=i):this.mouseMoveX<=t.left?t.progressWidth=0:t.progressWidth=t.width;var n=t.progressWidth>t.width?t.width:t.progressWidth;n=t.progressWidth<0?0:t.progressWidth,t.progressWidth=n;var s=t.width-t.progressWidth;this.progressBorderRadius=s<=4?4-s:0},e.prototype.updateEditPosition=function(e,t){this.updateIsMilestone(t)},e.prototype.updateIsMilestone=function(e){e.width<=3?(e.width=3,e.isMilestone=!0):e.isMilestone=!1},e.prototype.updateConnectorLineSecondProperties=function(e){var t=this.getElementByPosition(e),n=this.parent.getParentElement(t,i);this.connectorSecondAction=null;var s=0;this.parent.getParentElement(t,"e-connectorpoint-left")?(this.connectorSecondAction="ConnectorPointLeftDrag",this.toPredecessorText="Start"):this.parent.getParentElement(t,"e-connectorpoint-right")?(this.connectorSecondAction="ConnectorPointRightDrag",this.toPredecessorText="Finish"):(this.connectorSecondAction=null,this.toPredecessorText=null),this.taskBarEditElement!==n&&this.taskBarEditElement!==this.highlightedSecondElement&&(this.parent.options.enableRowVirtualization&&(s=this.getTopPosition(this.parent.element)),(this.parent.options.enableRowVirtualization&&0==this.elementOffsetLeft||!this.parent.options.enableRowVirtualization)&&(this.elementOffsetLeft=this.taskBarEditElement.offsetLeft,this.elementOffsetTop=this.taskBarEditElement.offsetTop+s,this.elementOffsetWidth=this.taskBarEditElement.offsetWidth,this.elementOffsetHeight=this.taskBarEditElement.offsetHeight,this.showHideTaskBarEditingElements(n,this.highlightedSecondElement))),sf.base.isNullOrUndefined(this.connectorSecondAction)&&!sf.base.isNullOrUndefined(this.connectorSecondElement)&&(this.connectorSecondElement.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-allow-block"),this.connectorSecondElement.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-allow-block")),this.connectorSecondElement=this.connectorSecondAction?n:null,this.toDataGuid=sf.base.isNullOrUndefined(this.connectorSecondElement)?null:this.connectorSecondElement.getAttribute("rowuniqueid")},e.prototype.getTopPosition=function(e){var t,i=e.querySelector(".e-virtualtable"),n=i.style.transform.split(",");if(n.length>1)t=n[1].trim().split(")")[0];else{var s=i.style.transform;t=s.substring(s.lastIndexOf("(")+1,s.lastIndexOf(")"))}return parseFloat(t)},e.prototype.showHideTaskBarEditingElements=function(e,t){if((t=t||this.taskBarEditElement)&&e!==t&&(t.querySelector(".e-taskbar-left-resizer")&&(t.querySelector(".e-taskbar-left-resizer").classList.remove("e-left-resize-gripper"),t.querySelector(".e-taskbar-right-resizer").classList.remove("e-right-resize-gripper"),t.querySelector(".e-child-progress-resizer")&&t.querySelector(".e-child-progress-resizer").classList.remove("e-progress-resize-gripper")),t.querySelector(".e-connectorpoint-left")||t.parentElement.querySelector(".e-connectorpoint-left"))){var i=sf.base.isNullOrUndefined(t.querySelector(".e-connectorpoint-left"))?t.parentElement:t;i.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-left-hover"),i.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-right-hover")}},e.prototype.triggerDependencyEvent=function(e,t){var i=this;this.parent.dotNetRef.invokeMethodAsync("DrawConnectorLine",this.taskBarEditAction,this.connectorSecondAction,this.toDataGuid).then((function(t){if(t){var n=document.getElementById(i.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(n)){var s=i.parent.tooltipModule.getPointerPosition(e),o=sf.base.select(".e-arrow-tip",n).offsetWidth/2+(n.offsetWidth-n.clientWidth);n.style.left=s.x-o+"px",n.style.visibility="visible"}}else{var r=i.getElementByPosition(e);(r.classList.contains("e-connectorpoint-left")||r.classList.contains("e-connectorpoint-right"))&&r.classList.add("e-connectorpoint-allow-block")}}))},e.prototype.drawFalseLine=function(){var e,t=this.mouseDownX,i=this.mouseDownY,n=this.mouseMoveX,s=this.mouseMoveY,o=Math.sqrt((t-n)*(t-n)+(i-s)*(i-s)),r=180*Math.atan2(s-i,n-t)/Math.PI,a="rotate("+(this.parent.enableRTL?-r:r)+"deg)",l=0;sf.base.isNullOrUndefined(document.querySelectorAll(".e-chart-row")[0])||(l=document.querySelectorAll(".e-chart-row")[0].offsetWidth),"ConnectorPointLeftDrag"===this.taskBarEditAction&&(e=this.parent.enableRTL?l-(this.elementOffsetLeft+this.elementOffsetWidth+this.connectorPointWidth/2)-Math.abs(this.parent.chartPreviousScroll.left):this.elementOffsetLeft-this.connectorPointWidth/2-Math.abs(this.parent.chartPreviousScroll.left)),"ConnectorPointRightDrag"===this.taskBarEditAction&&(e=this.parent.enableRTL?l-(this.elementOffsetLeft-this.connectorPointWidth/2)-Math.abs(this.parent.chartPreviousScroll.left):this.elementOffsetLeft+this.elementOffsetWidth+this.connectorPointWidth/2-Math.abs(this.parent.chartPreviousScroll.left));var h=this.elementOffsetTop+this.elementOffsetHeight/2+this.chartBodyContainer.offsetTop-this.parent.chartPreviousScroll.top;this.removeFalseLine(!1),this.falseLine=document.createElement("div"),this.falseLine.className="e-gantt-false-line",this.falseLine.id="ganttfalseline"+this.parent.element.id,this.falseLine.style.position="absolute",this.falseLine.style.transform=a,this.falseLine.style.borderTopWidth="1px",this.falseLine.style.borderTopStyle="dashed",this.falseLine.style.zIndex="5",this.falseLine.style.width=o-3+"px",this.falseLine.style.top=h+"px",this.parent.enableRTL?(this.falseLine.style.left="auto",this.falseLine.style.right=e+"px",this.falseLine.style.transformOrigin="100% 0%"):(this.falseLine.style.right="auto",this.falseLine.style.left=e+"px",this.falseLine.style.transformOrigin="0% 100%"),this.chartBodyContainer.appendChild(this.falseLine)},e.prototype.removeFalseLine=function(e){this.falseLine&&(sf.base.remove(this.falseLine),this.falseLine=null,e&&(this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0))},e.prototype.destroy=function(e){this.stopScrollTimer(),this.removeEventListeners(e)},e}(),r=function(){function e(e){this.parent=e,this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.addEventListeners()}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane");sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.ganttMouseMove),sf.base.EventHandler.remove(t,sf.base.Browser.touchMoveEvent,this.ganttMouseMove)},e.prototype.ganttMouseMove=function(e){this.tooltipMouseEvent=e},e.prototype.tooltipOpened=function(e){var t=document.getElementById(e.element.id);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),n=this.parent.getOffsetRect(this.chartPane),s=n.top+this.chartPane.offsetHeight,o=n.left+this.chartPane.offsetWidth,r=i.x,a=i.y;if(o<r+t.offsetWidth+10)for(;o<r+t.offsetWidth+10;)r=o-t.offsetWidth-10,t.style.left=r+"px";else r+=10,t.style.left=r+"px";window.innerHeight<t.offsetHeight+a&&(a=a-t.offsetHeight-10),s<a+t.offsetHeight+20?a=a-t.offsetHeight-10:a+=10,t.style.top=a+"px",t.style.visibility="visible"}},e.prototype.predecessorTooltipOpened=function(e){var t=document.getElementById(e.element.id);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),n=this.parent.getOffsetRect(this.chartPane),s=n.top+this.chartPane.offsetHeight,o=n.left+this.chartPane.offsetWidth,r=i.x,a=i.y;if(o<r+t.offsetWidth+10)for(;o<r+t.offsetWidth+10;)r=o-t.offsetWidth-10,t.style.left=r+"px";else r=r,t.style.left=r+"px";if(window.innerHeight<t.offsetHeight+a&&(a=a-t.offsetHeight-10),s<a+t.offsetHeight+20?a=a-t.offsetHeight-10:a+=10,document.getElementsByClassName("e-arrow-tip e-tip-bottom").length>0)document.getElementsByClassName("e-arrow-tip e-tip-bottom")[0].style.left=i.x-t.offsetLeft+"px";t.style.visibility="visible"}},e.prototype.getPointerPosition=function(e){var t,i;return sf.base.isNullOrUndefined(sf.base.getValue("pageX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("pageY",e))?sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageY",e))?sf.base.isNullOrUndefined(sf.base.getValue("clientX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("clientY",e))||(t=sf.base.getValue("clientX",e)+document.body.scrollLeft+document.documentElement.scrollLeft,i=sf.base.getValue("clientY",e)+document.body.scrollTop+document.documentElement.scrollTop):(t=sf.base.getValue("touches[0].pageX",e),i=sf.base.getValue("touches[0].pageY",e)):(t=sf.base.getValue("pageX",e),i=sf.base.getValue("pageY",e)),{x:t,y:i}},e.prototype.destroy=function(e){this.removeEventListeners(e)},e}(),a=function(){function i(e,t,i,n){this.toolbarHeight=0,this.chartPreviousScroll={top:0,left:0},this.treegridPreviousScroll={top:0,left:0},window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=n,this.isFromTreeGrid=!1,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this),this.enableRTL=i.enableRtl,this.enableAdaptiveUI=i.enableAdaptiveUI}return i.prototype.getOffsetRect=function(e){var t=e.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.clientTop||document.body.clientTop||0,o=document.documentElement.clientLeft||document.body.clientLeft||0,r=t.top+i-s,a=this.enableRTL?t.right+n-o:t.left+n-o;return{top:Math.round(r),left:Math.round(a),width:t.width,height:t.height}},i.prototype.getParentElement=function(e,t,i){for(var n=e;n&&!(i?n.id===t:n.classList.contains(t));)n=n.parentElement;return n},i.prototype.destroy=function(){e.prototype.destroy(this),o.prototype.destroy(this),r.prototype.destroy(this),t.prototype.destroy(this)},i}(),l=function(){function e(e){this.activeElementName=null,this.activeElement=null,this.parent=e}return e.prototype.taskbarFocus=function(e){var t=e.querySelector(".e-gantt-child-taskbar"),s=e.querySelector(".e-gantt-parent-taskbar"),o=e.querySelector(".e-gantt-milestone"),r=e.querySelector(".e-gantt-parent-milestone");return this.activeElementName=i,o?(this.activeElement=o,o.focus(),e.querySelector("."+i).querySelector(".e-gantt-milestone").classList.add(n)):r?(this.activeElement=r,r.focus(),e.querySelector("."+i).querySelector(".e-gantt-parent-milestone").classList.add(n)):t?(this.activeElement=t,t.focus(),e.querySelector("."+i).querySelector(".e-gantt-child-taskbar").classList.add(n)):(this.activeElement=s,s.focus(),e.querySelector("."+i).querySelector(".e-gantt-parent-taskbar").classList.add(n)),"isNextTaskbar"},e.prototype.RightLabelFocus=function(e){var t=e.querySelector(".e-right-label-container");return this.activeElementName="e-right-label-container",this.activeElement=t,t.focus(),t.querySelector(".e-label").classList.add(n),"isNextRightLabel"},e.prototype.LeftLabelFocus=function(e){var t=e.querySelector(".e-left-label-container");return this.activeElementName="e-left-label-container",this.activeElement=t,t.focus(),t.querySelector(".e-label").classList.add(n),"isNextLeftLabel"},e}();return{initialize:function(e,t,i,n,s,o){var r={taskMode:i.taskMode,allowTaskbarEditing:i.allowTaskbarEditing,enableRowVirtualization:i.enableRowVirtualization,enableTimelineVirtualization:i.enableTimelineVirtualization,allowSchedulingOnDrag:i.allowSchedulingOnDrag,enableRtl:i.enableRtl,enableAdaptiveUI:i.enableAdaptiveUI},l=new a(e,t,r,n);this.dotnetRef=n;var h={};this.instance=window.sfBlazor.getCompInstance(e);var d=l.element.querySelector("#"+l.element.id+"_Gantt_Splitter");return l.height=h.height=t.offsetHeight,l.isMobileDevice=sf.base.Browser.isDevice,l.width=h.width=t.offsetWidth,l.toolbarElement=t.querySelector("#"+t.id+"_Gantt_Toolbar"),sf.base.isNullOrUndefined(l.toolbarElement)||(l.toolbarHeight=h.toolbarHeight=l.toolbarElement.offsetHeight),document.body.classList.contains("e-bigger")?l.biggerMode=h.biggerMode=!0:this.instance.enableAdaptiveUI&&(l.biggerMode=h.biggerMode=!0,document.body.classList.add("e-bigger")),d.style.height="calc(100% - "+l.toolbarHeight+"px)",h.ganttOffsetSize=this.ChartInitialize(i.timelineWidth,i.milestoneHeight,i.taskbarEvent,i.connectorLineEvent),this.getTreeGrid(e,s,o),h},refreshGantt:function(e){var t=window.sfBlazor.getCompInstance(e);return document.body.classList.contains("e-bigger")?t.biggerMode=!0:t.biggerMode=!1,t.biggerMode},adjustTable:function(e,t,i,n){var s,o=e.chartScrollModule,r=o.chartVirtualTable,a=o.chartRootElement.querySelector(".e-virtualtrack");if(e.options.enableRowVirtualization){var l=document.getElementById("treeGrid"+e.element.id+"_gridcontrol").querySelector(".e-gridcontent"),h=void 0,d=void 0;i?(d=l.querySelectorAll(".e-virtualtrack")[1],h=l.querySelectorAll(".e-virtualtable")[0]):(h=l.querySelector(".e-virtualtable"),d=l.querySelector(".e-virtualtrack")),s=new DOMMatrixReadOnly(r.style.transform);var c=new DOMMatrixReadOnly(h.style.transform);sf.base.isNullOrUndefined(h)||sf.base.isNullOrUndefined(r)||(a.style.height=d.style.height,""==r.style.transform?r.style.transform=h.style.transform:r.style.transform="translate("+s.m41+"px,"+c.m42+"px)")}if(e.options.enableTimelineVirtualization){var p=3*e.element.offsetWidth;s=new DOMMatrixReadOnly(r.style.transform);var u=t<p?0:t<s.m41?t-p:s.m41;a.style.width=o.timelineVirtualTrack.offsetWidth+"px",r.style.transform="translate("+u+"px,"+s.m42+"px)",sf.base.isNullOrUndefined(o.dependencyViewContainer)||(o.dependencyViewContainer.style.left=-u+"px")}},setChartHeight:function(e,t,i,n){var s,o=window.sfBlazor.getCompInstance(e),r=0,a={chartHeight:0,viewPortHeight:0},l=o.chartScrollModule,h=o.element.querySelector(".e-gridcontent"),d=o.element.querySelector(".e-holiday-container");i?n&&(s=h.querySelectorAll(".e-virtualtrack")[1]):s=h.querySelector(".e-virtualtrack");var c=o.element.querySelector(".e-gridcontent").querySelector(".e-content");if(c.setAttribute("tabindex","0"),o.element.querySelector(".e-gridcontent").querySelector(".e-table").setAttribute("role","treegrid"),sf.base.isNullOrUndefined(s)&&(s=o.element.querySelector("#treeGrid"+o.element.id+"_gridcontrol_content_table")),s&&s.clientHeight){var p=o.element.querySelector("#treeGrid"+o.element.id+"_gridcontrol"),u=s.clientHeight+"px",f=l.chartRootElement;l.chartTaskTable=f.querySelector(".e-task-table");var g=l.chartTaskTable.clientHeight,m=f.getElementsByClassName("e-chart-rows-container")[0],v=p.querySelectorAll(".e-content")[0].clientHeight,b=l.timelineHeaderElement;v<s.clientHeight?(r=s.clientHeight,m.style.height=o.options.enableRowVirtualization?g+"px":u,b.style.width="calc(100% - "+(o.isMobileDevice?0:o.scrollWidth)+"px)",c.style.cssText+="width: calc(100% + "+(o.scrollWidth+1)+"px);",this.viewPortHeight=v):(r=v,m.style.height=l.element.clientHeight-1+"px",b.style.width="100%",c.style.cssText+="width: calc(100% + 1px);",this.viewPortHeight=m.clientHeight),a.chartHeight=o.options.enableRowVirtualization?r-g:r,a.viewPortHeight=this.viewPortHeight}return!sf.base.isNullOrUndefined(o)&&o.enableRTL&&(o.element.querySelector(".e-gridheader").style.paddingLeft="0"),this.adjustTable(o,t,i,n),sf.base.isNullOrUndefined(d)||l.updateTopPosition(),l.updateScrollTopPosition(),a},treegridHeaderAlign:function(e,t){if(t){sf.base.addClass(e.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div"),sf.base.addClass(e.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div");var i=e.element.querySelector(".e-gridheader").offsetHeight;e.element.querySelector(".e-gridcontent").style.height="calc(100% - "+i+"px)"}else sf.base.removeClass(e.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div"),sf.base.removeClass(e.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div")},getTreeGrid:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);this.hideTreeGridScrollBar(n,i),sf.base.isNullOrUndefined(n.treeGridElement)||(this.instance.treeGrid=n.treeGridElement.blazor_instance),this.treegridHeaderAlign(n,t)},hideTreeGridScrollBar:function(e,i){e.treeGridElement=e.element.querySelector("#treeGrid"+e.element.id);var n=e.treeGridElement.querySelector(".e-content"),s=n.querySelector(".e-table"),o=e.treeGridElement.querySelector(".e-headercontent");i?(e.treeGridModule=new t(e,n),e.scrollWidth=this.getScrollbarWidth(e.element),n.clientHeight>s.clientHeight?n.style.cssText+="width: calc(100% + 1px);":n.clientHeight<s.clientHeight?(e.scrollWidth=e.isMobileDevice?16:e.scrollWidth,n.style.cssText+="width: calc(100% + "+(e.scrollWidth+1)+"px);"):n.classList.add("e-gantt-scroll-padding")):(n&&(n.style.height="100%",e.element.querySelector(".e-gridcontent").style.height="calc(100% - "+e.element.querySelector(".e-gridheader").offsetHeight+"px)",e.treeGridModule=new t(e,n)),e.scrollWidth=this.getScrollbarWidth(e.element),n.clientHeight>s.clientHeight?n.style.cssText+="width: calc(100% + 1px);":n.clientHeight<s.clientHeight?(e.scrollWidth=e.isMobileDevice?16:e.scrollWidth,n.style.cssText+="width: calc(100% + "+(e.scrollWidth+1)+"px);"):n.classList.add("e-gantt-scroll-padding"),n.style.cssText+="overflow: auto;",o.style.width="calc(100% + 1px)")},getScrollbarWidth:function(e){var t=e,i=document.createElement("div");i.style.visibility="hidden",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar";var n=document.createElement("div");i.appendChild(n),t.appendChild(i);var s=i.offsetWidth-n.offsetWidth;return i.parentNode.removeChild(i),s},getOffsetLeft:function(e){var t=this.instance.element.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.clientLeft||document.body.clientLeft||0,s=t.left+i-n;return Math.round(s)},tooltipOpened:function(e,t){this.instance.tooltipModule.tooltipOpened(t)},predecessorTooltipOpened:function(e,t){this.instance.tooltipModule.predecessorTooltipOpened(t)},setTooltipVisibility:function(){var e=document.getElementById(this.instance.element.id+"_editingtooltip_content");sf.base.isNullOrUndefined(e)||(e.style.visibility="visible")},removeEmptyRowElement:function(){sf.base.isNullOrUndefined(this.instance.taskbarEditModule.chartEmptyRowElement)||(sf.base.remove(this.instance.taskbarEditModule.chartEmptyRowElement),this.instance.taskbarEditModule.chartEmptyRowElement=null)},ChartInitialize:function(t,i,n,s){return this.instance.totalTimelineWidth=t,this.instance.isTaskbarEditingEventMapped=n,this.instance.isConnectorLineEventMapped=s,this.instance.keyboardModule=new l(this.instance),this.instance.options.allowTaskbarEditing&&(this.instance.taskbarEditModule=new o(this.instance),this.instance.taskbarEditModule.milestoneHeight=i),this.instance.tooltipModule=new r(this.instance),this.instance.chartScrollModule=new e(this.instance,this.instance.element),this.instance.spinnerShown=!1,{viewPortHeight:this.instance.element.querySelector(".e-gridcontent").querySelector(".e-content").clientHeight,chartWidth:this.instance.element.querySelector(".e-gantt-chart-pane").offsetWidth}},UpdateScroll:function(e,t){this.scrollBarElement=this.instance.element.querySelector(".e-chart-scroll-container"),this.instance.chartScrollModule.previousCount=-1;var i=this.scrollBarElement.scrollLeft;i=this.instance.enableRTL&&-1==Math.sign(i)?-i:i,(this.scrollBarElement.offsetWidth<t||i>t)&&(this.scrollBarElement.scrollLeft=this.instance.enableRTL?-t:t)},chartFocusOutHandler:function(e,t){var i=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+e+"]"),s=i.querySelector("."+n)?i.querySelector("."+n).parentElement:null;s&&(s.querySelector(".e-label").classList.remove(n),s.blur())},focusOutHandler:function(e){var t=e.querySelector("."+n);sf.base.isNullOrUndefined(t)||t.classList.remove(n),sf.base.isNullOrUndefined(e.classList)||e.classList.remove(n)},resetPrivateProperties:function(e){this.instance.taskbarEditModule.tappedPoint=null},setActiveElement:function(e,t){this.instance.keyboardModule.activeElement=e,this.instance.keyboardModule.activeElementName=t},tabFocusHandler:function(e,t,s,o){var r=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+e+"]"),a="isNextLeftLabel",l=r.querySelector("."+n)?r.querySelector("."+n).parentElement:null;if("ArrowDown"!=o&&"ArrowUp"!=o||null!=l){if(l){if(null==l&&null!=this.instance.keyboardModule.activeElement){if("Tab"==o||"ArrowRight"==o){switch(this.instance.keyboardModule.activeElementName){case"e-left-label-container":a=this.instance.keyboardModule.taskbarFocus(r);break;case i:a=this.instance.keyboardModule.RightLabelFocus(r);break;default:this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,a="isFirstGridCell"}return a}switch(this.instance.keyboardModule.activeElementName){case"e-left-label-container":this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,a="isLastGridCell";break;case i:a=this.instance.keyboardModule.LeftLabelFocus(r);break;default:a=this.instance.keyboardModule.taskbarFocus(r)}return a}return l.classList.contains("e-left-label-inner-div")?s?(l.querySelector(".e-label").classList.remove(n),l.blur(),this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell"):this.instance.keyboardModule.taskbarFocus(r):l.classList.length?l.classList.contains("e-right-label-inner-div")?s?this.instance.keyboardModule.taskbarFocus(r):"ArrowRight"==o||"Tab"==o?(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isFirstGridCell"):(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell"):"":s?r.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(r):(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell"):r.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(r):"ArrowRight"==o||"Tab"==o?(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isFirstGridCell"):(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell")}return a=!s&&"ArrowLeft"!=o&&r.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(r):s&&r.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(r):this.instance.keyboardModule.taskbarFocus(r)}switch(this.focusOutHandler(this.instance.keyboardModule.activeElement),this.instance.keyboardModule.activeElementName){case i:this.instance.keyboardModule.taskbarFocus(r);break;case"e-left-label-container":this.instance.keyboardModule.LeftLabelFocus(r);break;default:this.instance.keyboardModule.RightLabelFocus(r)}return""},updateScrollLeft:function(e,t,i){var n=this.instance.element.querySelector(".e-chart-scroll-container");if(null!=i){var s=this.instance.element.querySelector(".e-row").offsetHeight,o=i*s;(n.offsetHeight-s/2+n.scrollTop<o||n.scrollTop>o)&&(n.scrollTop=o)}if(t=t>0?t:0,t=n.scrollWidth<=t?n.scrollWidth:t,n.offsetWidth+n.scrollLeft<t||n.scrollLeft>t){var r=t-50;n.scrollLeft=this.instance.enableRTL?-r:r}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);null!=t&&null!=t.dotNetRef&&t.destroy()}}}()},"./modules/sf-grid.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Grid=function(){"use strict";var e,t,n=null;function s(){if(null!==n)return n;var e,t=document.createElement("div");return t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth|0,document.body.removeChild(t),n=e}function o(e,t){for(var i=e[t+"ElementSibling"],n=0,s=["e-gridheader","e-gridfooter","e-groupdroparea","e-gridpager","e-toolbar"];i;)s.some((function(e){return i.classList.contains(e)}))&&(n+=i.offsetHeight),i=i[t+"ElementSibling"];return n}function r(e,t,i){for(var n=e;n&&!(i?n.id===t:n.classList.contains(t));)n=n.parentElement;return n}function a(e,t){for(var i=-1,n=0,s=t.length;n<s;n++)if(t[n].isEqualNode(e)){i=n;break}return i}function l(e,t){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function h(e){var t={};return t.x=sf.base.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=sf.base.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,t}function d(e,t){for(var i=[],n=0,s=e.length;n<s;n++){var o=t(e[n],n);sf.base.isNullOrUndefined(o)||i.push(o)}return i}function c(e){var t=e.querySelector("#"+e.id+"EditConfirm");return e.querySelectorAll(".e-updatedtd").length&&(!t||t.classList.contains("e-popup-close"))}function p(e){return e.options.enableVirtualization&&e.options.groupCount>0&&(e.options.offline||""===e.options.url)}function u(e,t){for(var i=[].slice.call(e.querySelectorAll(t)),n=0;n<i.length;n++)sf.base.remove(i[n])}function f(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];for(var s=0,o=e.length;s<o;s++)t?(sf.base.classList(e[s],i.slice(),[]),e[s].setAttribute("aria-selected","true")):(sf.base.classList(e[s],[],i.slice()),e[s].removeAttribute("aria-selected"))}!function(e){e.timer=null}(e||(e={}));var g=function(){function e(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.infiniteScrollTop=0,this.infiniteDataRequested=!1,this.infiniteScollDirection="",this.maxPage=0,this.infiniteInitialRender=!0,this.rowElements=[],this.isLazyChildLoad=!1,this.currentRowIndex=0,this.parent=e,this.addEventListener(),this.setHeight(),this.setPadding()}return e.prototype.setHeight=function(){var e=0,t=this.parent.element.querySelector(".e-content");if(this.parent.options.frozenRows&&"auto"!==this.parent.options.height&&!this.parent.options.height.match(/%/g)){var i=this.parent.element.querySelector(".e-headercontent").querySelector("tbody");e=i?i.offsetHeight:0,t.style.height=sf.base.formatUnit(parseInt(this.parent.options.height)-e)}},e.prototype.removeUnwantedScroll=function(e,t){void 0===t&&(t=0);var i=!1,n=this.parent.content.offsetWidth>=this.parent.getContentTable().offsetWidth,s=0!=this.parent.options.frozenRows&&0==this.parent.options.frozenColumns,o=this.parent.element.querySelector(".e-movablescrollbar");o&&o.offsetHeight;0==this.parent.options.frozenColumns||sf.base.isNullOrUndefined(this.getMovableContent())||(i=this.getMovableContent().offsetWidth>=this.getMovableContentTable().offsetWidth+t-2||0==this.getMovableContent().offsetWidth);var r=this.parent.content.scrollWidth>this.parent.content.offsetWidth?this.parent.content.scrollHeight+17:this.parent.content.scrollHeight;return"Height"===e&&this.parent.content.offsetHeight>=r||!("Width"!==e||!(i||s&&n))&&("100%"==this.parent.options.height&&(this.frozenContentElement().style.borderBottom="none"),!0)},e.prototype.getMovableContent=function(){return this.parent.element.querySelector(".e-movablecontent")},e.prototype.getMovableContentTable=function(){return this.parent.element.querySelector(".e-movablecontent .e-table")},e.prototype.frozenContentElement=function(){return this.parent.element.querySelector(".e-frozencontent")},e.prototype.getScrollbar=function(){return this.parent.element.querySelector(".e-scrollbar")},e.prototype.setPadding=function(){var t=this.parent.element.querySelector(".e-gridheader");if(!sf.base.isNullOrUndefined(t)&&("auto"!=this.parent.options.height||"None"!=this.parent.options.frozenName||0!=this.parent.options.frozenColumns)){if(this.removeUnwantedScroll("Height"))return this.content.style.overflow=this.parent.options.frozenColumns&&this.parent.options.enableColumnVirtualization?"hidden auto":"auto",t.querySelector(".e-headercontent").style.borderRightWidth="",void(t.style.paddingRight="");var i=e.getScrollBarWidth()-this.getThreshold(),n=this.getCssProperties();this.parent.options.enableRtl?t.style["padding-right"]="":t.style["padding-left"]="";var s=this.parent.element.querySelector(".e-content");!this.parent.options.enableVirtualization&&"auto"==s.style.overflowY&&this.parent.options.frozenColumns>0&&"auto"==this.parent.options.height&&(i=0),t.style[n.padding]=i>0?i+"px":"0px",t.querySelector(".e-headercontent").style[n.border]=i>0?"1px":"0px"}},e.prototype.removePadding=function(e){var t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector(".e-headercontent");i.style[t.border]="",i.parentElement.style[t.padding]="";this.parent.getFooterContent()},e.prototype.refresh=function(){if("100%"===this.parent.options.height){var e,t=this.parent.element.querySelector(".e-gridcontent"),i=o(e=t,"previous")+o(e,"next");t.style.height="calc(100% - "+i+"px)"}},e.prototype.getThreshold=function(){return"mozilla"===sf.base.Browser.info.name?.5:1},e.prototype.addEventListener=function(){this.wireEvents()},e.prototype.onContentScroll=function(e){var t=this,i=e,n=i.classList.contains("e-headercontent");return function(e){if(null!==t.content.querySelector("tbody")&&!t.parent.options.isPreventScrollEvent){var s=e.target,o=s.scrollLeft;s.scrollWidth;t.updateFrozenShadow(s);var r=t.parent.getColumns().filter((function(e){return e.isFrozen&&"Right"===e.freeze}));t.content.scrollTop>0&&t.parent.options.frozenRows?t.parent.element.classList.add("e-top-shadow"):t.parent.element.classList.remove("e-top-shadow"),Math.round(s.scrollWidth-s.scrollLeft)===s.offsetWidth&&r.length>0?t.parent.element.classList.remove("e-right-shadow"):t.parent.element.classList.add("e-right-shadow");var a=s.classList.contains("e-summarycontent");if(t.parent.options.enableInfiniteScrolling&&!t.parent.options.isEdit&&(t.isLazyChildLoad||t.infiniteScrollHandler(s)),t.parent.options.groupCount>0&&t.parent.options.enableLazyLoading){var l=t.previousValues.top<s.scrollTop;t.lazyLoadInfiniteScrollHandler(s,l)}if(t.previousValues.left!==o){i.scrollLeft=o;var h=0!=t.parent.options.frozenColumns?t.parent.element.querySelector(".e-movablefootercontent"):t.parent.element.querySelector(".e-summarycontent");h&&(h.scrollLeft=o),a&&(t.header.scrollLeft=o),t.previousValues.left=o}else t.previousValues.top=n?s.scrollTop:t.previousValues.top}}},e.prototype.onFreezeContentScroll=function(e){var t=this,i=e;return function(e){if(null!==t.content.querySelector("tbody")){var n=e.target.scrollTop;t.previousValues.top!==n&&(i.scrollTop=n,t.previousValues.top=n)}}},e.prototype.updateFrozenShadow=function(e){var t=this.parent.getColumns().filter((function(e){return e.isFrozen&&"Left"===e.freeze})),i=this.parent.getColumns().filter((function(e){return e.isFrozen&&"Right"===e.freeze}));0!==e.scrollLeft&&(this.parent.options.frozenColumns>0&&0==i.length||t.length>0)?this.parent.element.classList.add("e-left-shadow"):this.parent.element.classList.contains("e-left-shadow")&&this.parent.element.classList.remove("e-left-shadow")},e.prototype.onCustomScrollbar=function(e,t){var i,n=this,s=e,o=t;return function(e){if(null!==n.content.querySelector("tbody")){var t=e.target,r=t.scrollLeft;n.previousValues.left!==r&&(n.updateFrozenShadow(t),n.parent.options.aggregatesCount&&(i=n.parent.element.querySelector(".e-movablefootercontent")),s.scrollLeft=r,o.scrollLeft=r,i&&(i.scrollLeft=r),n.previousValues.left=r)}}},e.prototype.onWheelScroll=function(e){var t=this,i=e;return function(e){if(null!==t.content.querySelector("tbody")){var n=i.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);t.previousValues.top!==n&&(e.preventDefault(),t.parent.getContent().querySelector(".e-frozencontent").scrollTop=n,i.scrollTop=n,t.previousValues.top=n)}}},e.prototype.onTouchScroll=function(e){var t=this,i=e;return function(e){if("mouse"!==e.pointerType){var n=t.parent.options.frozenColumns>0,s=t.getPointXY(e),o=i.scrollLeft+(t.pageXY.x-s.x),r=n?t.parent.getHeaderContent().querySelector(".e-movableheader"):t.parent.getHeaderContent().querySelector(".e-headercontent"),a=n?t.parent.getContent().querySelector(".e-movablecontent"):t.parent.getContent().querySelector(".e-content");if(!(t.previousValues.left===o||o<0||r.scrollWidth-r.clientWidth<o)){if(event.cancelable&&e.preventDefault(),r.scrollLeft=o,a.scrollLeft=o,n)t.parent.element.querySelector(".e-movablescrollbar").scrollLeft=o;t.pageXY.x=s.x,t.previousValues.left=o}}}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){this.content=this.parent.getContent(),this.header=this.parent.getHeaderContent();var t=this.content.parentElement.querySelector(".e-movablescrollbar");if(this.parent.options.frozenColumns>0&&this.parent.options.enableColumnVirtualization?(sf.base.EventHandler.add(t,"scroll",this.onCustomScrollbar(this.content,this.header),this),sf.base.EventHandler.add(this.content,"scroll",this.onCustomScrollbar(t,this.header),this),sf.base.EventHandler.add(this.header,"scroll",this.onCustomScrollbar(t,this.content),this)):(sf.base.EventHandler.add(this.content,"scroll",this.onContentScroll(this.header),this),sf.base.EventHandler.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.options.aggregatesCount){var i=this.parent.options.frozenColumns?this.parent.element.querySelector(".e-movablefootercontent"):this.parent.element.querySelector(".e-summarycontent");sf.base.isNullOrUndefined(i)||sf.base.EventHandler.add(i,"scroll",this.onContentScroll(this.content),this)}this.parent.options.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var n,s,o,r,a,l=this.parent.getContent().querySelector(".e-table");r=function(){n=e.header.scrollLeft,s=l.scrollHeight,o=e.parent.getContent().clientHeight},a=function(){e.parent.options.enableVirtualization||(s<o&&sf.base.addClass(l.querySelectorAll("tr:last-child td"),"e-lastrowcell"),e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top),e.parent.options.enableColumnVirtualization||(e.content.scrollLeft=n),e.parent.options.frozenColumns&&e.parent.getHeaderContent()&&(e.parent.getHeaderContent().scrollLeft=e.parent.getContent().scrollLeft)},requestAnimationFrame((function(){try{a(null,r())}catch(e){a(e)}}))},e.prototype.getCssProperties=function(e){var t={},i=sf.base.isNullOrUndefined(e)?this.parent.options.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t},e.prototype.getScrollableParent=function(e){if(null===e)return null;var t=sf.base.isNullOrUndefined(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===e.tagName||"ARTICLE"===e.tagName?e:this.getScrollableParent(e.parentNode)},e.prototype.addStickyListener=function(e){this.gridParentElement=this.getScrollableParent(this.parent.element.parentElement),e&&(this.gridParentElement?sf.base.EventHandler.add("HTML"===this.gridParentElement.tagName||"ARTICLE"===this.gridParentElement.tagName?document:this.gridParentElement,"scroll",this.makeStickyHeader,this):sf.base.EventHandler.remove(this.gridParentElement,"scroll",this.makeStickyHeader))},e.prototype.makeStickyHeader=function(){if(this.parent.options.enableStickyHeader&&this.parent.element&&!sf.base.isNullOrUndefined(this.gridParentElement)&&this.parent.getContent()){var e=this.parent.getContent().parentElement.getBoundingClientRect();if(e){var t=this.parent.getHeaderContent().parentElement,i=this.parent.element.querySelector(".e-toolbar"),n=this.parent.element.querySelector(".e-groupdroparea"),s=this.parent.element.querySelector(".e-ccdlg"),o=this.parent.element.querySelector(".e-cc-toolbar"),r=t.offsetHeight+(i?i.offsetHeight:0)+(n?n.offsetHeight:0),a=this.gridParentElement.getBoundingClientRect().top,l=e.top-(a<0?0:a),h=e.left;if(l<r&&e.bottom>0){t.classList.add("e-sticky");var d=0;n&&(this.setSticky(n,d,e.width,h,!0),d+=n.getBoundingClientRect().height-2),i&&(this.setSticky(i,d,e.width,h,!0),d+=i.getBoundingClientRect().height-2),this.setSticky(t,d,e.width,h,!0)}else if(t.classList.contains("e-sticky")&&this.setSticky(t,null,null,null,!1),n&&this.setSticky(n,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),s){var c=sf.popups.calculateRelativeBasedPosition(o,s).top+o.getBoundingClientRect().height,p=s.style.display;s.style.display="block";var u=s.getBoundingClientRect(),f=o.getBoundingClientRect().left-e.left-u.width+o.clientWidth+2;s.style.display=p,this.setSticky(s,c,u.width,f,!1)}}}},e.prototype.setSticky=function(e,t,i,n,s){s?e.classList.add("e-sticky"):e.classList.remove("e-sticky"),e.style.width=null!=i?i+"px":"",e.style.top=null!=t?t-2+"px":"",e.style.left=null!==n?parseInt(e.style.left,10)!==n?n+"px":e.style.left:""},e.prototype.infiniteScrollHandler=function(e){var t=this,i=e.scrollLeft!==this.previousValues.left,n=e.classList.contains("e-content"),s="chrome"===sf.base.Browser.info.name?200:100;if(n&&!i){var o=e.scrollHeight-e.scrollTop,r=Math.round(o),a=o<e.clientHeight?Math.ceil(o):Math.floor(o);this.rowElements=this.parent.getDataRows(),a>e.clientHeight&&(a-=1);var l=a===e.clientHeight||r===e.clientHeight,h=this.parent.options.allowGrouping&&!this.parent.options.enableLazyLoading&&this.parent.options.groupCount>0&&this.parent.options.currentPage>=1&&!this.infiniteInitialRender;l&&!this.infiniteDataRequested&&!this.infiniteInitialRender&&(this.parent.options.currentPage<=this.maxPage-1||this.parent.options.totalItemCount!=this.rowElements.length&&!this.infiniteInitialRender&&!this.parent.options.infiniteCacheMode)?(setTimeout((function(){t.parent.dotNetRef.invokeMethodAsync("LoadInfiniteData",{requestType:"InfiniteScrolling"},l,!1,!1,null,null,0)}),s),this.infiniteScrollTop=this.calculateScrollPosition("down"),this.infiniteScollDirection="down",this.infiniteDataRequested=!0):0===e.scrollTop&&(1!==this.parent.options.currentPage&&this.parent.options.currentPage>1||h)&&this.parent.options.infiniteCacheMode&&(setTimeout((function(){t.parent.dotNetRef.invokeMethodAsync("LoadInfiniteData",{requestType:"InfiniteScrolling"},l,!0,!1,null,null,0)}),s),this.infiniteScrollTop=this.calculateScrollPosition("up"),this.infiniteScollDirection="up"),this.infiniteInitialRender=!1}},e.prototype.lazyLoadInfiniteScrollHandler=function(e,t){var i,n,s=this,o=[].slice.call(this.parent.getContent().getElementsByClassName("e-lazyload-middle-down")),r=[].slice.call(this.parent.getContent().getElementsByClassName("e-lazyload-last-down")),a=!1,l=!1,h=0,d=this.currentRowIndex,c="chrome"===sf.base.Browser.info.name?200:100;if(t&&o.length>0){var p=this.findRowElementsInGrid(o);a=p.rowEntered,h=p.rowIndex,i=p.row,a&&(this.currentRowIndex=h)}if(!t&&r.length>0)for(var u=0;u<r.length;u++){var f=r[parseInt(u.toString(),10)].getBoundingClientRect().top,g=r[u].rowIndex,m=this.parent.getContent().parentElement.scrollHeight;if(this.isLazyChildLoad=!1,f>0&&f<m){l=!0,g=(n=r[parseInt(u.toString(),10)]).rowIndex,l&&(this.currentRowIndex=g);break}}if((t&&a||!t&&l)&&this.currentRowIndex!=d&&!this.isLazyChildLoad){var v=sf.base.isNullOrUndefined(i)?null:i.getAttribute("data-uid"),b=sf.base.isNullOrUndefined(n)?null:n.getAttribute("data-uid"),y=a||l;setTimeout((function(){s.parent.dotNetRef.invokeMethodAsync("LoadInfiniteData",{requestType:"InfiniteScrolling"},!1,!1,y,v,b,h)}),c),this.isLazyChildLoad=!0}},e.prototype.findRowElementsInGrid=function(e){for(var t,i=!1,n=0,s=0;s<e.length;s++)n=e[parseInt(s.toString(),10)].rowIndex,this.isRowEnteredInGrid(n)&&(i=!0,t=e[s]);return{rowEntered:i,rowIndex:n,row:t}},e.prototype.isRowEnteredInGrid=function(e){var t=this.parent.getContent().scrollTop/this.parent.getRowHeight();return e<t+this.parent.getContent().offsetHeight/this.parent.getRowHeight()&&e>t},e.prototype.calculateScrollPosition=function(e){var t=0,i=this.parent.getContent();if("down"===e)if(this.parent.options.allowGrouping&&!sf.base.isNullOrUndefined(this.parent.options.initGroupingField)&&this.parent.options.initGroupingField.length>0&&!this.parent.options.infiniteCacheMode){t+=this.parent.getContentTable().querySelectorAll("tr:not(.e-row)").length*this.parent.getRowHeight()}else{var n=this.parent.options.pageSize*(this.parent.options.infiniteMaxBlocks-1);n=0==n?this.parent.options.pageSize:n;for(var o=0,r=0;o<i.offsetHeight;)o=++r*this.parent.getRowHeight();t+=(n-(r-=1.5))*this.parent.getRowHeight()}else"up"===e&&(t+=this.parent.options.pageSize*this.parent.getRowHeight()+s()+10);return t},e.prototype.resetInfniniteScrollPositions=function(){var e=this,t=this.parent.getContent();if(this.infiniteInitialRender&&(this.maxPage=Math.ceil(this.parent.options.totalItemCount/this.parent.options.pageSize)),["Refresh","Filtering","ClearFiltering","Sorting","sorting","Searching","Grouping","UnGrouping","Reorder","RowDragAndDrop","refresh","filtering","searching","grouping","ungrouping","reorder","GroupExpandCollapse",null].some((function(t){return e.parent.options.requestType===t}))&&(this.infiniteInitialRender=!0,t.scrollTop=0,this.infiniteScollDirection=""),"Delete"==this.parent.options.requestType){var i=t.scrollTop+t.offsetHeight>=t.scrollHeight;this.infiniteInitialRender=!!i||this.infiniteInitialRender}"down"!==this.infiniteScollDirection&&"up"!==this.infiniteScollDirection||(this.infiniteDataRequested=!1,(this.parent.options.currentPage<=this.maxPage-1||0===t.scrollTop)&&this.parent.options.infiniteCacheMode&&"InfiniteScrolling"===this.parent.options.requestType&&(t.scrollTop=this.infiniteScrollTop)),this.isLazyChildLoad&&(this.isLazyChildLoad=!1)},e.prototype.infiniteOnDataReady=function(){var e=this;this.maxPage=Math.ceil(this.parent.options.totalItemCount/this.parent.options.pageSize),this.parent.options.allowGrouping&&!this.parent.options.enableLazyLoading&&this.parent.options.groupCount>0&&(this.maxPage=this.maxPage+1),["Refresh","Filtering","Sorting","sorting","Searching","Grouping","UnGrouping","Reorder","RowDragAndDrop","refresh","filtering","searching","grouping","ungrouping","reorder","GroupExpandCollapse",null].some((function(t){return e.parent.options.requestType===t}))&&(this.infiniteDataRequested=!1)},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.parent.options.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.onContentScroll))},e.getScrollBarWidth=function(){return s()},e}(),m=function(){function e(e){this.parent=e}return e.prototype.refreshFreeze=function(e){if("textwrap"===e.case||"refreshHeight"===e.case){var t=void 0,i=void 0,n=void 0,s=this.getFrozenHeader(),o=this.getMovableHeader(),r=this.parent.getContent(),a=this.parent.options.wrapMode;"textwrap"===e.case?("Both"===a||e.isModeChg?(t=s.querySelectorAll("tr"),i=o.querySelectorAll("tr"),"LeftRight"==this.parent.options.frozenName&&(n=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll("tr"))):(t=s.querySelector("Content"===a?"tbody":"thead").querySelectorAll("tr"),i=o.querySelector("Content"===a?"tbody":"thead").querySelectorAll("tr")),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||this.setWrapHeight(t,i,e.isModeChg,!1,!1,n),this.refreshStackedHdrHgt()):"refreshHeight"===e.case&&("LeftRight"===this.parent.options.frozenName&&(n=r.querySelector(".e-frozen-right-content").querySelectorAll("tr")),this.setWrapHeight(r.querySelector(".e-frozencontent").querySelectorAll("tr"),r.querySelector(".e-movablecontent").querySelectorAll("tr"),e.isModeChg,!1,!1,n),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||("LeftRight"==this.parent.options.frozenName&&(n=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll("tr")),this.setWrapHeight(s.querySelectorAll("tr"),o.querySelectorAll("tr"),e.isModeChg,!1,!1,n)))}},e.prototype.updateResizeHandler=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.setWrapHeight=function(e,t,i,n,s,o){for(var r,a,l,h,d=this.parent.options.allowTextWrap,c=this.parent.options.wrapMode,p=this.parent.getHeaderContent().querySelector("thead"),u=this.parent.getHeaderContent().querySelector("tbody"),f=[],g=[],m=[],v=0,b=e.length;v<b;v++)sf.base.isNullOrUndefined(e[v])||sf.base.isNullOrUndefined(t[v])||(o&&(m[v]=o[v].getBoundingClientRect().height),f[v]=e[v].getBoundingClientRect().height,g[v]=t[v].getBoundingClientRect().height);for(v=0,b=e.length;v<b;v++)(i&&("Header"===c&&n||"Content"===c&&p.contains(e[v])||"Header"===c&&u.contains(e[v]))||s)&&(o[v]&&(o[v].style.height=null),e[v].style.height=null,t[v].style.height=null),r=f[v],a=g[v],l=m[v]?m[v]:0,0!=this.parent.options.rowHeight?h=this.parent.options.rowHeight:(h=Math.max(r,a,l),t[v].style.height=h+"px",e[v].style.height=h+"px"),o&&(o[v].style.height=h+"px");d&&this.setFrozenHeight()},e.prototype.setFrozenHeight=function(e){if(!this.parent.options.isPreventScrollEvent){var t=this.parent.element.querySelector(".e-content"),i=this.parent.element.querySelectorAll(".e-frozenscrollbar"),n=this.parent.element.querySelector(".e-movablescrollbar"),o=this.parent.element.querySelector(".e-movablechild"),r=this.parent.element.querySelector(".e-content");if(sf.base.isNullOrUndefined(t)||(e=Array.from(t.getElementsByClassName("e-table")[0].querySelectorAll("col")).filter((function(e){return"width: auto"==e.getAttribute("style")})).length>0&&e?e:0),n&&"100%"!==this.parent.options.height&&"auto"!==this.parent.options.height){var a=parseInt(this.parent.options.height.split?this.parent.options.height.split("px")[0]:this.parent.options.height,10)-n.offsetHeight;r.style.height=a+"px"}if((this.parent.options.enableVirtualization&&this.parent.options.enableColumnVirtualization||this.parent.options.enableColumnVirtualization)&&i){for(var l=this.parent.options.columns,h=0,d=0;d<l.length;d++)l[d].visible&&!sf.base.isNullOrUndefined(l[d].width)&&(h+=parseFloat(l[d].width.split?l[d].width.split("px")[0]:l[d].width.toString()));o.style.width=h+s()+"px"}else sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(o)||(n.style.width=t.offsetWidth+"px",o.style.width=t.getElementsByClassName("e-table")[0].offsetWidth+e+s()+"px");sf.base.isNullOrUndefined(t)||(this.parent.options.enableVirtualization&&!this.parent.options.enableColumnVirtualization&&(t.style.width=this.parent.element.querySelector(".e-movableheader").offsetWidth+"px"),this.parent.scrollModule.setPadding())}},e.prototype.updateStackedFrozenHeight=function(e,t){for(var i,n,s=0,o=e.length;s<o;s++)i=this.getRowSpan(e[s]),n=this.getRowSpan(t[s]),i.min>1?this.updateStackedHdrRowHgt(s,i.max,e[s],t):n.min>1&&this.updateStackedHdrRowHgt(s,n.max,t[s],e)},e.prototype.refreshStackedHdrHgt=function(){var e,t,i,n=this.getFrozenHeader().querySelectorAll(".e-columnheader"),s=this.getMovableHeader().querySelectorAll(".e-columnheader");"LeftRight"==this.parent.options.frozenName?(t=this.parent.element.querySelectorAll(".e-frozenheader")[0].querySelectorAll(".e-columnheader"),e=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll(".e-columnheader"),(i=s.length>t.length?s.length>e.length?s:e:t.length>e.length?t:e)==e?(this.updateStackedFrozenHeight(t,i),this.updateStackedFrozenHeight(e,s)):i==t?(this.updateStackedFrozenHeight(t,s),this.updateStackedFrozenHeight(e,i)):(this.updateStackedFrozenHeight(t,i),this.updateStackedFrozenHeight(e,s))):this.updateStackedFrozenHeight(n,s),this.parent.options.allowResizing&&this.updateResizeHandler()},e.prototype.getRowSpan=function(e){for(var t,i,n,s=0,o=e.childElementCount;s<o;s++)0===s&&(i=e.children[0].rowSpan),t=e.children[s].rowSpan,i=Math.min(t,i),n=Math.max(t,i);return{min:i,max:n}},e.prototype.updateStackedHdrRowHgt=function(e,t,i,n){for(var s=0,o=0;o<t;o++)s+=n[e+o].style.height?parseInt(n[e+o].style.height,10):n[e+o].offsetHeight;i.style.height=s+"px"},e.prototype.getFrozenHeader=function(){return this.frozenHeader},e.prototype.getMovableHeader=function(){return this.movableHeader},e.prototype.refreshRowHeight=function(){this.parent.options.rowHeight},e.prototype.clearWrapHeight=function(){var e=function(e,t){for(var i=0,n=e.length;i<n;i++)sf.base.isNullOrUndefined(e[i])||sf.base.isNullOrUndefined(t[i])||(e[i].style.height=null,t[i].style.height=null)};this.parent.options.frozenColumns&&((this.parent.options.frozenRows||"Both"==this.parent.options.wrapMode||"Header"==this.parent.options.wrapMode)&&e(this.parent.element.querySelector(".e-frozenheader").querySelectorAll("tr"),this.parent.element.querySelector(".e-movableheader").querySelectorAll("tr")),e(this.parent.element.querySelector(".e-frozencontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-movablecontent").querySelectorAll("tr"))),this.parent.options.frozenRows&&0==this.parent.options.frozenColumns&&e(this.parent.element.querySelector(".e-headercontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-content").querySelectorAll("tr"))},e}(),v=function(){function e(e){this.parent=e}return e.prototype.setMinwidthBycalculation=function(e){var t=0,i=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)||"auto"===e.width||""===e.width}));if(i.length){t=sf.base.isNullOrUndefined(this.parent.options.width)||"auto"===this.parent.options.width||"100%"===this.parent.options.width?this.parent.element.getBoundingClientRect().width-e:("string"==typeof this.parent.options.width?parseInt(this.parent.options.width,10):this.parent.options.width)-e;for(var n=0,s=0,o=0,r=i;o<r.length;o++){var a=r[o];n+=sf.base.isNullOrUndefined(a.minWidth)?0:"string"==typeof a.minWidth?parseInt(a.minWidth,10):a.minWidth}for(var l={},h=0;h<i.length;h++)0===e&&this.parent.options.allowResizing&&this.isWidthUndefined()&&h!==i.length-1&&this.setUndefinedColumnWidth(i),0!==e&&t<n?(l[i[h].field]=i[h].minWidth+"px",s+=parseInt(i[h].minWidth.toString(),10)):0!==e&&t>n&&(l[i[h].field]="",s+=0);this.parent.dotNetRef.invokeMethodAsync("SetMinWidth",l),this.parent.options.frozenColumns&&this.parent.freezeModule.setFrozenHeight(s)}},e.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))},e.prototype.setColumnWidth=function(e,t,i,n,s){if(void 0===n&&(n=!0),void 0===s&&(s=!1),!(this.parent.getColumns(s).length<1)){var o;o=this.parent.options.enableColumnVirtualization?this.parent.options.virtualizedColumns.findIndex((function(t){return t.uid==e.uid}))+this.parent.getIndentCount():sf.base.isNullOrUndefined(t)?this.parent.getNormalizedColumnIndex(e.uid):t;var r=this.getWidth(e),a=this.getTableWidth(this.parent.getColumns(s));null!==r&&(this.setWidth(r,o),"auto"!==this.parent.options.width&&-1===this.parent.options.width.toString().indexOf("%")&&this.setMinwidthBycalculation(a),this.parent.options.enableColumnVirtualization&&"resize"===i?(this.parent.options.virtualizedColumns.filter((function(t){return t.uid==e.uid}))[0].width=r,this.parent.virtualContentModule.refreshOffsets(),this.parent.virtualContentModule.setVirtualHeight()):this.parent.options.enableColumnVirtualization&&s&&(this.parent.options.columns.filter((function(t){return t.uid==e.uid}))[0].width=r,this.parent.virtualContentModule.refreshOffsets()),(this.parent.options.allowResizing&&"resize"===i||this.parent.options.frozenColumns&&this.parent.options.allowResizing)&&this.setWidthToTable(null,!1,"resize"),n&&(r.toString().indexOf("px")>0&&(r=r.toString().replace("px","")),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{index:o,width:r,columnUid:e.uid})))}},e.prototype.setWidth=function(e,t,i){var n=this;if("string"==typeof e&&-1!==e.indexOf("%")&&(!Boolean(window.chrome)||!Boolean(window.chrome.webstore))&&this.parent.options.allowGrouping){var s=this.parent.element.offsetWidth;e=parseInt(e,10)/100*s}var o,a,l=this.parent.getHeaderTable(),h=this.parent.getContentTable(),d=sf.base.formatUnit(e),c=this.parent.options.frozenColumns,p=this.parent.getHeaderContent().querySelector(".e-movableheader"),u=this.parent.getContent().querySelector(".e-movablecontent"),f=0;if(0!=this.parent.options.frozenRightCount||0!=this.parent.options.frozenLeftCount){this.parent.updateColumnLevelFrozen();var g=this.parent.options.enableColumnVirtualization?t:this.parent.frozenColumnModel.findIndex((function(e){return e.uid==n.parent.columnModel[t].uid}));if("Left"==this.parent.options.frozenName&&(b=g<this.parent.options.frozenLeftCount?l:p),"Right"==this.parent.options.frozenName)b=g>=(f=this.parent.options.columns.length-this.parent.options.frozenRightCount)?l:p;else if("LeftRight"==this.parent.options.frozenName){f=this.parent.options.columns.length-this.parent.options.frozenRightCount-this.parent.options.frozenLeftCount;var m=this.parent.getHeaderContent().querySelector(".e-frozen-right-header");b=g<this.parent.options.frozenLeftCount?l:g<this.parent.options.frozenLeftCount+f?p:m}if(!(o=this.getColumnLevelFrozenColgroup(g,this.parent.options.frozenLeftCount,f,b)))return}else if(c&&t>=c&&p&&p.querySelector("colgroup"))o=p.querySelector("colgroup").children[t-c];else if(this.parent.options.enableColumnVirtualization&&c&&p.scrollLeft>0){var v=p.querySelector("colgroup");o=v.children[v.children.length-1-t]}else o=l.querySelector("colgroup").children[t];if(o&&!i?o.style.width=d:o&&i&&(o.style.width=" "),0!=this.parent.options.frozenRightCount||0!=this.parent.options.frozenLeftCount){var b;g=this.parent.options.enableColumnVirtualization?t:this.parent.frozenColumnModel.findIndex((function(e){return e.uid==n.parent.columnModel[t].uid}));if("Left"==this.parent.options.frozenName&&(b=g<this.parent.options.frozenLeftCount?h:u),"Right"==this.parent.options.frozenName&&(b=g>=(f=this.parent.options.columns.length-this.parent.options.frozenRightCount)?h:u),"LeftRight"==this.parent.options.frozenName){var y=this.parent.getContent().querySelector(".e-frozen-right-content");b=g<this.parent.options.frozenLeftCount?h:g<this.parent.options.frozenLeftCount+f?u:y}a=this.getColumnLevelFrozenColgroup(g,this.parent.options.frozenLeftCount,f,b)}else a=h.querySelector("colgroup").children[t];if(a&&!i?a.style.width=d:a&&i&&(a.style.width=" "),0!=this.parent.options.aggregatesCount){var C=void 0;if(c&&t>=c){var w=this.parent.getFooterContent().querySelector(".e-movablefootercontent"),M=sf.base.isNullOrUndefined(w)?null:w.querySelector("colgroup");C=sf.base.isNullOrUndefined(M)?null:M.children[t-c]}else{var S=this.parent.getFooterContent().querySelector("colgroup");C=sf.base.isNullOrUndefined(S)?null:S.children[t]}a&&C&&!i?C.style.width=d:a&&C&&i&&(C.style.width=" ")}for(var x=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),N=[],O=0;O<x.length;O++)if(r(x[O],"e-grid").id===this.parent.element.id)for(var E=0;E<x[O].querySelector("colgroup").children.length;E++)N.push(x[O].querySelector("colgroup").children[E]);x.length&&N.length&&(N[t].style.width=d),0==this.parent.options.frozenColumns||this.parent.options.enableColumnVirtualization||this.parent.freezeModule.setFrozenHeight()},e.prototype.getColumnLevelFrozenColgroup=function(e,t,i,n){if(!n||!n.querySelector("colgroup"))return null;var s=this.parent.options.enableColumnVirtualization?this.parent.options.virtualizedColumns:this.parent.frozenColumnModel,o=[].slice.call(n.querySelector("colgroup").children);return"Left"===s[e].freeze&&s[e].isFrozen?o[e]:"Right"===s[e].freeze&&s[e].isFrozen?o[e-(t+i)]:o[e-t]},e.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)&&sf.base.isNullOrUndefined(e.minWidth)})).length;return this.parent.getColumns().length===e},e.prototype.getWidth=function(e){if(!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},e.prototype.getTableWidth=function(e){for(var t=0,i=0,n=e;i<n.length;i++){var s=n[i],o=this.getWidth(s);"auto"===s.width&&(o=0),!1!==s.visible&&null!==o&&(t+=parseInt(o.toString(),10))}return t},e.prototype.calcMovableOrFreezeColWidth=function(e){var t=0!=this.parent.frozenColumnModel.length?this.parent.frozenColumnModel.slice():this.parent.getColumns().slice(),i=0;if(!this.parent.options.frozenLeftColumnsCount&&!this.parent.options.frozenRightColumnsCount){for(var n=0;n<t.length;n++)t[n].index<this.parent.options.actualFrozenColumns&&!t[n].isFrozen&&i++;this.parent.options.actualFrozenColumns=i}var s=this.parent.options.frozenLeftColumnsCount||this.parent.options.actualFrozenColumns,o=t.length-this.parent.options.frozenColumns;return"movable"===e?(this.parent.options.frozenRightColumnsCount&&t.splice(s+o,t.length),s&&t.splice(0,s)):"freeze-left"===e?t.splice(s,t.length):"freeze-right"===e&&t.splice(0,s+o),sf.base.formatUnit(this.getTableWidth(t))},e.prototype.setWidthToFrozenLeftTable=function(e){var t=sf.base.isNullOrUndefined(e)?this.calcMovableOrFreezeColWidth("freeze-left"):e;t=this.parent.getContent().querySelector(".e-frozen-left-content").classList.contains("e-frozenborderdisabled")?"0":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t,this.parent.resizeModule.leftFrozenTableWidth=t,this.parent.getFooterContent()&&!sf.base.isNullOrUndefined(this.parent.getFooterContent().querySelector(".e-frozen-left-footercontent"))&&(this.parent.getFooterContent().querySelector(".e-frozen-left-footercontent").style.width=t)},e.prototype.setWidthToFrozenRightTable=function(e){var t=sf.base.isNullOrUndefined(e)?this.calcMovableOrFreezeColWidth("freeze-right"):e;t=this.parent.getContent().querySelector(".e-frozen-right-content").classList.contains("e-frozenborderdisabled")?"0":t,this.parent.options.enableColumnVirtualization||(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(".e-table").style.width=t,this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(".e-table").style.width=t,this.parent.resizeModule.rightFrozenTableWidth=t,this.parent.getFooterContent()&&!sf.base.isNullOrUndefined(this.parent.getFooterContent().querySelector(".e-frozen-right-footercontent"))&&(this.parent.getFooterContent().querySelector(".e-frozen-right-footercontent").style.width=t))},e.prototype.setWidthToMovableTable=function(e){var t="";if(sf.base.isNullOrUndefined(e)){var i=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)})).length>=1,n=this.parent.getColumns().filter((function(e){return"auto"===e.width})).length>=1;"number"!=typeof this.parent.options.width||i||n?i||n||(t=this.calcMovableOrFreezeColWidth("movable")):t=sf.base.formatUnit(this.parent.options.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5)}else t=e;this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild&&!this.parent.options.enableColumnVirtualization&&(this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild.style.width=t),this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild&&!this.parent.options.enableColumnVirtualization&&(this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild.style.width=t),this.parent.options.enableColumnVirtualization||(this.parent.getContent().querySelector(".e-movablecontent").firstElementChild.style.width=t,this.parent.resizeModule.tableWidth=t)},e.prototype.setWidthToFrozenEditTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e},e.prototype.setWidthToMovableEditTable=function(){var e=this.calcMovableOrFreezeColWidth("movable");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e},e.prototype.setPersistedWidth=function(e){this.parent.options.frozenColumns?0!=this.parent.options.frozenRightColumnsCount||0!=this.parent.options.frozenLeftColumnsCount?(0!=this.parent.options.frozenLeftColumnsCount&&this.setWidthToFrozenLeftTable(e.leftFrozenTableWidth),0!=this.parent.options.frozenRightColumnsCount&&this.setWidthToFrozenRightTable(e.rightFrozenTableWidth),this.setWidthToMovableTable(e.tableWidth)):(this.setWidthToFrozenLeftTable(e.leftFrozenTableWidth),this.setWidthToMovableTable(e.tableWidth)):(this.parent.getHeaderTable().style.width=e.tableWidth,this.parent.getContentTable().style.width=e.tableWidth,0!=this.parent.options.aggregatesCount&&(this.parent.getFooterContent().querySelector(".e-table").style.width=e.tableWidth))},e.prototype.setWidthToTable=function(e,t,i){var n;void 0===e&&(e=null),void 0===t&&(t=!1),void 0===i&&(i=""),n=this.parent.options.enableColumnVirtualization&&"resize"===i?sf.base.formatUnit(this.getTableWidth(this.parent.options.virtualizedColumns)):sf.base.formatUnit(this.getTableWidth(null!=e?e:this.parent.getColumns())),this.parent.options.frozenColumns||(this.parent.options.hasDetailTemplate&&this.setWidth("30",0),t&&(n=""),this.parent.resizeModule.tableWidth=n,this.parent.getHeaderTable().style.width=n,this.parent.getContentTable().style.width=n,0==this.parent.options.aggregatesCount||sf.base.isNullOrUndefined(this.parent.getFooterContent().querySelector(".e-table"))||(this.parent.getFooterContent().querySelector(".e-table").style.width=n));var s=this.parent.element.querySelector(".e-table.e-inline-edit");s&&this.parent.options.frozenColumns?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):s&&(s.style.width=n)},e}(),b=function(){function e(e){var t=this;this.dragStart=function(e){var i=t.parent;document.body.classList.add("e-prevent-select");var n=i.element.querySelector(".e-gridpopup");n&&(n.style.display="none"),t.parent.reorderModule.dragStart({target:e.target,column:t.column,event:e.event}),t.parent.groupModule.columnDragStart({target:e.target,column:t.column,event:e.event}),e.bindEvents(e.dragElement)},this.drag=function(e){var i=t.parent,n=e.target;if(n){var s=sf.base.closest(n,".e-grid"),o=sf.base.closest(n,".e-gridcontent"),r=sf.base.closest(n,".e-gridpager"),a=t.parent.element.querySelector(".e-cloneproperties");if((!s||s.getAttribute("id")!==i.element.getAttribute("id")||o||r)&&(sf.base.classList(a,["e-notallowedcur"],["e-defaultcur"]),i.options.allowReordering&&(i.options.enableColumnVirtualization?(i.element.querySelector(".e-reorderuparrow-virtual").style.display="none",i.element.querySelector(".e-reorderdownarrow-virtual").style.display="none"):(i.element.querySelector(".e-reorderuparrow").style.display="none",i.element.querySelector(".e-reorderdownarrow").style.display="none")),!i.options.groupReordering))return;i.options.allowReordering&&t.parent.reorderModule.drag({target:e.target,column:t.column,event:e.event}),i.options.allowGrouping&&t.parent.groupModule.columnDrag({target:e.target})}},this.dragStop=function(e){var i,n=t.parent;document.body.classList.remove("e-prevent-select");var s=n.element.querySelector(".e-gridpopup");s&&(s.style.display="none"),(!r(e.target,"e-headercell")&&!r(e.target,"e-groupdroparea")||!n.options.allowReordering&&r(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&r(e.target,"e-groupdroparea"))&&(sf.base.remove(e.helper),i=!0),n.options.allowReordering&&t.parent.reorderModule.dragStop({target:e.target,event:e.event,column:t.column,cancel:i})},this.drop=function(e){var i=t.parent,n=(e.droppedElement.getAttribute("e-mappinguid"),sf.base.closest(e.target,".e-grid"));sf.base.remove(e.droppedElement),n&&n.getAttribute("id")!==i.element.getAttribute("id")||!i.options.allowReordering&&!i.options.allowGrouping||(i.options.allowReordering&&t.parent.reorderModule.headerDrop({target:e.target}),i.options.allowGrouping&&i.options.showDropArea&&t.parent.groupModule.columnDrop({target:e.target,droppedElement:e.droppedElement}))},this.helper=function(e){var i=t.parent,n=e.sender.target,s=sf.base.closest(n,".e-headercell:not(.e-stackedHeaderCell)");if(s){var o=(s.querySelector(".e-headercelldiv")||s.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),a=i.getColumnByUid(o);if(!sf.base.isNullOrUndefined(a)&&!a.allowGrouping&&!a.allowReordering)return!1}var l=r(n,"e-headercell");if(i.getContent().classList.contains("e-freezeline-moving")||!i.options.allowReordering&&!i.options.allowGrouping||!sf.base.isNullOrUndefined(l)&&l.querySelectorAll(".e-checkselectall").length>0)return!1;var h=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),d=n.classList.contains("e-headercell")?n:l;if(!d||!i.options.allowReordering&&d.classList.contains("e-stackedheadercell"))return!1;var c,p=d.offsetHeight,u=d.querySelector(".e-headercelldiv")||d.querySelector(".e-stackedheadercelldiv");if(u){if(c=d.querySelector(".e-stackedheadercelldiv")?i.getStackedHeaderColumnByHeaderText(u.innerText.trim(),i.options.columns):i.getColumnByUid(u.getAttribute("e-mappinguid")),t.column=c,t.column.lockColumn)return!1;h.setAttribute("e-mappinguid",u.getAttribute("e-mappinguid"))}return h.innerText=u?sf.base.isNullOrUndefined(c.headerText)?c.field:c.headerText:d.innerText,h.style.width=d.offsetWidth+"px",h.style.height=d.offsetHeight+"px",h.style.lineHeight=(p-6).toString()+"px",i.element.appendChild(h),h},this.parent=e,(this.parent.options.allowGrouping||this.parent.options.allowReordering)&&(this.initializeHeaderDrag(),this.initializeHeaderDrop())}return e.prototype.initializeHeaderDrag=function(){var e=this.parent;if(this.parent.options.allowReordering||this.parent.options.allowGrouping&&this.parent.options.showDropArea)for(var t=[].slice.call(e.getHeaderContent().querySelectorAll(".e-columnheader")),i=0,n=t.length;i<n;i++)this.draggable=new sf.base.Draggable(t[i],{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isPreventSelect:!1})},e.prototype.initializeHeaderDrop=function(){var e=this.parent;this.droppable=new sf.base.Droppable(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.destroy=function(){sf.base.isNullOrUndefined(this.draggable)||this.draggable.destroy(),sf.base.isNullOrUndefined(this.droppable)||this.droppable.destroy()},e}(),y=function(){function e(e){var t=this;this.drop=function(e){t.parent.groupModule.columnDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowGrouping&&this.initializeContentDrop()}return e.prototype.initializeContentDrop=function(){var e=this.parent;new sf.base.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e}(),C=function(){function e(e){this.parent=e,e.options.allowReordering&&this.createReorderElement()}return e.prototype.chkDropPosition=function(e,t){var i=this.parent.getColumnByUid(t.firstElementChild.getAttribute("e-mappinguid")),n=!i||!i.lockColumn;return(e.parentElement.isEqualNode(t.parentElement)||this.parent.options.frozenColumns&&Array.prototype.indexOf.call(sf.base.closest(e,"thead").children,e.parentElement)===Array.prototype.indexOf.call(sf.base.closest(t,"thead").children,t.parentElement))&&this.targetParentContainerIndex(e,t)>-1&&n},e.prototype.chkDropAllCols=function(e,t){for(var i,n=this.getHeaderCells();!i&&n.length>0;)i=e!==n.pop()&&this.targetParentContainerIndex(e,t)>-1;return i},e.prototype.findColParent=function(e,t,i){i=i;for(var n=0,s=t.length;n<s;n++){if(e===t[n])return!0;if(t[n].columns){var o=i.length;if(i.push(t[n]),this.findColParent(e,t[n].columns,i))return!0;i.splice(o,i.length-o)}}return!1},e.prototype.getColumnsModel=function(e){for(var t=[],i=[],n=0,s=e.length;n<s;n++)t.push(e[n]),e[n].columns&&(i=i.concat(e[n].columns));return i.length&&(t=t.concat(this.getColumnsModel(i))),t},e.prototype.headerDrop=function(e){var t=this.parent,i=this.element.querySelector(".e-headercelldiv")||this.element.querySelector(".e-stackedheadercelldiv");this.parent.options.enableColumnVirtualization&&(i=this.draggedHeader.querySelector(".e-headercelldiv")||this.draggedHeader.querySelector(".e-stackedheadercelldiv"));var n=i.getAttribute("e-mappinguid"),s=t.getColumnByUid(n);if(sf.base.closest(e.target,"th")&&(sf.base.isNullOrUndefined(s)||s.allowReordering&&!s.lockColumn)){var o=sf.base.closest(e.target,".e-headercell"),r=(o.querySelector(".e-headercelldiv")||o.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");if(!sf.base.isNullOrUndefined(r)){var l=t.getColumnByUid(r);if(sf.base.isNullOrUndefined(l)||!l.allowReordering||l.lockColumn)return}if(o&&this.chkDropPosition(this.element,o)&&this.chkDropAllCols(this.element,o))if(this.parent.options.enableColumnVirtualization){var h=this.parent.options.columns,d=this.draggedHeader.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),c=this.parent.getColumns(!1,!0).filter((function(e){return e.uid===d})),p=null,u=c[0],f=o.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");h.some((function(e,t){return e.uid===f&&(p=t,e.uid===f)}));sf.base.isNullOrUndefined(p)||this.moveColumns(p,u)}else{var g=this.targetParentContainerIndex(this.element,o),m=this.element.firstElementChild.getAttribute("e-mappinguid");if(this.destElement=o,m)this.moveColumns(g,this.parent.getColumnByUid(m));else{var v=this.getHeaderCells(),b=a(this.element,v),y=(h=this.getColumnsModel(this.parent.options.columns))[b];this.moveColumns(g,y)}}}},e.prototype.isActionPrevent=function(e){return c(e.element)},e.prototype.moveColumns=function(e,t,i,n){var s=this.parent;if(!this.isActionPrevent(s)){var o=this.getColParent(t,this.parent.options.columns),r=o?o.columns:this.parent.options.columns,a=l(t,r);if(this.parent.options.frozenColumns&&o&&!i){for(var h=0;h<r.length;h++)if(r[h].field===t.field){a=h;break}var d=this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute("e-mappinguid"));if(d){for(h=0;h<r.length;h++)if(r[h].field===d.field){e=h;break}}else for(h=0;h<r.length;h++)r[h].headerText===this.destElement.innerText.trim()&&(e=h)}s.options.allowReordering&&a!==e&&-1!==a&&-1!==e&&(r.splice(e,0,r.splice(a,1)[0]),s.getColumns(!0),!1!==n&&setTimeout((function(){s.dotNetRef.invokeMethodAsync("ColumnReordered",{requestType:"reorder",fromIndex:e,toIndex:a,toColumnUid:t.uid})}),10))}},e.prototype.targetParentContainerIndex=function(e,t){var i=this.getHeaderCells();"None"!==this.parent.options.frozenName&&this.parent.updateColumnLevelFrozen();var n=this.parent.options.columns,s="None"==this.parent.options.frozenName?this.getColumnsModel(n):this.parent.frozenColumnModel.slice(),o=this.getColParent(s[a(e,i)],n);return n=o?o.columns:n,l(s[a(t,i)],n)},e.prototype.getHeaderCells=function(){return[].slice.call(this.parent.element.getElementsByClassName("e-headercell"))},e.prototype.getColParent=function(e,t){var i=[];return this.findColParent(e,t,i),i[i.length-1]},e.prototype.reorderSingleColumn=function(e,t){var i=this.parent.getColumnByField(e),n=this.parent.getColumnByField(t);if((sf.base.isNullOrUndefined(i)||i.allowReordering&&!i.lockColumn)&&(sf.base.isNullOrUndefined(n)||n.allowReordering&&!i.lockColumn)){var s=this.parent.getColumnByField(t),o=this.getColParent(s,this.parent.options.columns),r=l(s,o?o.columns:this.parent.options.columns);r>-1&&this.moveColumns(r,this.parent.getColumnByField(e),!0)}},e.prototype.reorderMultipleColumns=function(e,t){var i=this.parent.getColumnIndexByField(t),n=this.parent.getColumnByField(t);if(!(i<0)&&(sf.base.isNullOrUndefined(n)||n.allowReordering&&!n.lockColumn)){for(var s=0;s<e.length;s++){var o=this.parent.getColumnByField(e[s]);if(!sf.base.isNullOrUndefined(o)&&(!o.allowReordering||o.lockColumn))return}for(s=0;s<e.length;s++){o=this.parent.getColumnByIndex(i);var r=this.getColParent(o,this.parent.options.columns),a=l(o,r?r.columns:this.parent.options.columns);a>-1&&this.moveColumns(a,this.parent.getColumnByField(e[s]),!0,!1),this.parent.getColumnIndexByField(e[s+1])>=a&&i++}var h=this.parent.getColumns();this.parent.dotNetRef.invokeMethodAsync("ColumnReordered",{fromColumnUid:e.map((function(e){return h.filter((function(t){return t.field===e}))[0].uid})),toColumnUid:n.uid,isMultipleReorder:!0,requestType:"reorder",type:"actionBegin"})}},e.prototype.moveTargetColumn=function(e,t){t>-1&&this.moveColumns(t,e,!0)},e.prototype.reorderSingleColumnByTarget=function(e,t){var i=this.parent.getColumnByField(e);this.moveTargetColumn(i,t)},e.prototype.reorderMultipleColumnByTarget=function(e,t){for(var i=0;i<e.length;i++)this.reorderSingleColumnByTarget(e[i],t)},e.prototype.reorderColumns=function(e,t){"string"==typeof e?(this.reorderSingleColumn(e,t),this.fromCol=e):(this.reorderMultipleColumns(e,t),this.fromCol=e[0])},e.prototype.reorderColumnByIndex=function(e,t){var i=this.parent.getColumnByIndex(e);this.moveTargetColumn(i,t)},e.prototype.reorderColumnByTargetIndex=function(e,t){"string"==typeof e?this.reorderSingleColumnByTarget(e,t):this.reorderMultipleColumnByTarget(e,t)},e.prototype.createReorderElement=function(){var e=this.parent.element.querySelector(".e-headercontent");this.upArrow=e.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow",attrs:{style:"display:none"}})),this.downArrow=e.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow",attrs:{style:"display:none"}})),this.parent.options.enableColumnVirtualization&&(this.upArrow.classList.replace("e-reorderuparrow","e-reorderuparrow-virtual"),this.downArrow.classList.replace("e-reorderdownarrow","e-reorderdownarrow-virtual"))},e.prototype.destroy=function(){this.parent.element;this.upArrow&&sf.base.remove(this.upArrow),this.downArrow&&sf.base.remove(this.downArrow)},e.prototype.keyPressHandler=function(e){this.parent;e.action},e.prototype.drag=function(e){var t=this.parent,i=e.target,n=t.element.querySelector(".e-cloneproperties");if(e.column.allowReordering&&!e.column.lockColumn){var s=sf.base.closest(i,".e-headercell:not(.e-stackedHeaderCell)"),o=this.x>h(e.event).x+t.getContent().firstElementChild.scrollLeft;if(sf.base.removeClass(t.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"]),this.setDisplay("none"),this.stopTimer(),sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]),this.updateScrollPostion(e.event),s&&!s.isEqualNode(this.element)){i=s;var a=(s.querySelector(".e-headercelldiv")||s.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),l=t.getColumnByUid(a);this.chkDropPosition(this.element,i)&&this.chkDropAllCols(this.element,i)&&l.allowReordering?(this.updateArrowPosition(i,o),sf.base.classList(i,["e-allowDrop","e-reorderindicate"],[])):t.options.allowGrouping&&r(e.target,"e-groupdroparea")||sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"])}}else sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"])},e.prototype.updateScrollPostion=function(e){var t=this,i=(this.parent.options.frozenColumns,h(e).x),n=this.parent.element.getBoundingClientRect(),s=n.left,o=n.right,r=this.parent.getContent();"None"!==this.parent.options.frozenName?this.updateFrozenScrollPosition(i,n):i>s&&i<s+35?this.timer=window.setInterval((function(){t.setScrollLeft(r,!0)}),50):i<o&&i>o-35&&(this.timer=window.setInterval((function(){t.setScrollLeft(r,!1)}),50))},e.prototype.updateFrozenScrollPosition=function(e,t){var i=this,n=this.parent.getContent().querySelector(".e-movablecontent"),s=this.parent.element.querySelector(".e-movableheader").getBoundingClientRect(),o=this.parent.options.frozenLeftCount||this.parent.options.actualFrozenColumns,r=this.parent.options.frozenRightCount?s.right:t.right,a=o?s.left:t.left;e>a&&e<a+35?this.timer=window.setInterval((function(){i.setScrollLeft(n,!0)}),50):e<r&&e>r-35&&(this.timer=window.setInterval((function(){i.setScrollLeft(n,!1)}),50))},e.prototype.setScrollLeft=function(e,t){var i=e.scrollLeft;e.scrollLeft=e.scrollLeft+(t?-5:5),i!==e.scrollLeft&&this.setDisplay("none")},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.updateArrowPosition=function(e,t){var i=e.getBoundingClientRect(),n=this.parent.element.getBoundingClientRect();t&&i.left<n.left||!t&&i.right>n.right||(this.upArrow.style.top=i.top+i.height-n.top-7+"px",this.downArrow.style.top=i.top-n.top-2+"px",this.upArrow.style.left=this.downArrow.style.left=(t?i.left:i.right)-n.left-4+"px",this.parent.options.enableColumnVirtualization&&(this.upArrow.style.left=this.downArrow.style.left=Number(this.upArrow.style.left.replace("px",""))+this.parent.getContent().scrollLeft+"px"),this.setDisplay(""))},e.prototype.dragStart=function(e){var t=this.parent;document.body.classList.add("e-prevent-select");var i=e.target;this.element=i.classList.contains("e-headercell")?i:r(i,"e-headercell"),sf.base.isNullOrUndefined(this.element)&&(this.element=e.event.target.classList.contains("e-headercell")?e.event.target:r(e.event.target,"e-headercell")),this.draggedHeader=this.element.cloneNode(!0),e.column.allowReordering&&!e.column.lockColumn&&(this.x=h(e.event).x+t.getContent().firstElementChild.scrollLeft)},e.prototype.dragStop=function(e){var t=this.parent;this.parent.options.allowGrouping&&"touchend"===e.event.type&&sf.base.EventHandler.remove(window,"touchmove",this.parent.groupModule.preventTouchOnWindow),document.body.classList.remove("e-prevent-select"),this.setDisplay("none"),this.stopTimer(),e.cancel,sf.base.removeClass(t.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"])},e.prototype.setDisplay=function(e){this.upArrow.style.display=e,this.downArrow.style.display=e},e.prototype.getModuleName=function(){return"reorder"},e}(),w="e-rhandler",M="e-rsuppress",S="e-ricon",x="e-rhelper",N="th.e-headercell",O="e-rcursor",E=function(){function e(e){this.tapped=!1,this.isDblClk=!0,this.parent=e,this.widthService=new v(this.parent)}return e.prototype.autoFitColumns=function(e){var t=!!this.parent.options.enableColumnVirtualization,i=[];i=null==e||e.length<=0?this.parent.options.frozenColumns>0?this.parent.autofitFrozenColumns(!0):this.parent.getColumns(t).map((function(e){return e.field||e.uid})):"string"==typeof e?[e]:e,this.findColumn(i),this.parent.options.frozenColumns>0&&this.widthService.setWidthToTable()},e.prototype.autoFit=function(){var e;(e=this.parent.options.frozenColumns||this.parent.options.actualFrozenColumns>0?this.parent.autofitFrozenColumns():this.parent.getColumns().filter((function(e){return!0===e.autoFit})).map((function(e){return e.field||e.uid}))).length>0&&this.autoFitColumns(e)},e.prototype.resizeColumn=function(e,t,i){var n,s,o,r=this.parent,a=0,l=0,h=!!this.parent.options.enableColumnVirtualization,d=i||this.parent.getUidByColumnField(e,h);d=d||e;var c,p,u,f=this.parent.getNormalizedColumnIndex(d,h),g=this.parent.getColumnIndexByField(e,h);g=-1===g?this.parent.getColumnIndexByUid(e,h):g;var m=this.parent.getColumnByIndex(g,h),v=r.options.frozenColumns;if(sf.base.isNullOrUndefined(r.getFooterContent())||(o=r.getFooterContent().querySelector(".e-table")),v)if(m.isFrozen||this.parent.options.actualFrozenColumns>0&&t<v){m.isFrozen&&"Right"==m.freeze?(n=r.getHeaderContent().querySelector(".e-frozen-right-header"),s=r.getContent().querySelector(".e-frozen-right-content")):(n=r.getHeaderTable(),s=r.getContentTable());var b=(c=n.querySelector('[e-mappinguid="'+d+'"]').parentElement.cloneNode(!0)).getAttribute("aria-colindex");p=s.querySelectorAll('[aria-colindex="'+b+'"]'),o&&(u=o.querySelectorAll("td:nth-child("+(f+1)+")"))}else{n=r.getHeaderContent().querySelector(".e-movableheader").children[0],s=r.getContent().querySelector(".e-movablecontent").children[0];b=(c=n.querySelector('[e-mappinguid="'+d+'"]').parentElement.cloneNode(!0)).getAttribute("aria-colindex");p=s.querySelectorAll('[aria-colindex="'+b+'"]'),o&&(u=(o=r.getFooterContent().querySelector(".e-movablefootercontent").children[0]).querySelectorAll("td:nth-child("+(f-v+1)+")"))}else n=r.getHeaderTable(),s=r.getContentTable(),c=n.querySelector('[e-mappinguid="'+d+'"]').parentElement.cloneNode(!0),p=s.querySelectorAll("td:nth-child("+(f+1)+"):not(.e-groupcaption)"),o&&(u=o.querySelectorAll("td:nth-child("+(f+1)+"):not(.e-groupcaption)"));var y=n.querySelector("tr").querySelectorAll(".e-grouptopleftcell");if(y.length>0)for(var C=0;C<y.length;C++)l+=y[C].offsetWidth;var w=s.querySelector(".e-detailrowcollapse")||s.querySelector(".e-detailrowexpand");this.parent.options.hasDetailTemplate&&w&&(l+=w.offsetWidth);var M=[c],S=[],x=[];if(o)for(C=0;C<u.length;C++)x[C]=u[C].cloneNode(!0);for(C=0;C<p.length;C++)S[C]=p[C].cloneNode(!0);var N=this.createTable(n,M,"e-gridheader"),O=this.createTable(s,S,"e-gridcontent"),E=null;x.length&&(E=this.createTable(o,x,"e-gridfooter"));var I=r.getColumns(h)[g].width=sf.base.formatUnit(Math.max(N,O,E));if(this.widthService.setColumnWidth(r.getColumns(h)[g]),!1===r.getColumns(h).some((function(e){return(null===e.width||void 0===e.width||e.width.length<=0)&&e.visible}))){var T=r.getColumns(h);for(C=0;C<T.length;C++)T[C].visible&&(a+=parseFloat(T[C].width))}var D=a+l;a>0&&!r.options.frozenColumns&&(this.parent.options.hasDetailTemplate&&this.widthService.setWidth("30",0),n.style.width=sf.base.formatUnit(D),s.style.width=sf.base.formatUnit(D),sf.base.isNullOrUndefined(o)||(o.style.width=sf.base.formatUnit(D)));var j=n.offsetWidth;r.getContent().scrollWidth>j?(n.classList.add("e-tableborder"),s.classList.add("e-tableborder")):(n.classList.remove("e-tableborder"),s.classList.remove("e-tableborder")),sf.base.isNullOrUndefined(o)||o.classList.add("e-tableborder"),this.parent.freezeModule.refreshRowHeight(),I.toString().indexOf("px")>0&&(I=I.replace("px","")),this.parent.options.isResizedGrid=!0,this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:I,columnUid:d})},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.widthService=null,this.unwireEvents())},e.prototype.getModuleName=function(){return"resize"},e.prototype.findColumn=function(e){for(var t=function(t){var n=e[t],s=!!i.parent.options.enableColumnVirtualization,o=i.parent.getColumnIndexByField(n,s);o=-1===o?i.parent.getColumnIndexByUid(n,s):o;var r=i.parent.getColumns(s)[o];o>-1&&!sf.base.isNullOrUndefined(r)&&!0===r.visible&&(i.parent.options.allowGrouping&&!sf.base.isNullOrUndefined(i.parent.options.initGroupingField)&&i.parent.options.initGroupingField.some((function(e){return e==r.field}))&&!i.parent.options.showGroupedColumn||i.resizeColumn(n,o))},i=this,n=0;n<e.length;n++)t(n)},e.prototype.createTable=function(e,t,i){var n=sf.base.createElement("div");n.className=this.parent.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute";var s=sf.base.createElement("div");s.className=i;var o=sf.base.createElement("table");o.className=e.className,o.classList.add("e-resizetable"),o.style.cssText="table-layout: auto;width: auto";for(var r=sf.base.createElement("tr"),a=0;a<t.length;a++){var l=r.cloneNode();l.className=e.querySelector("tr").className,l.appendChild(t[a]),o.appendChild(l)}s.appendChild(o),n.appendChild(s),document.body.appendChild(n);var h=o.getBoundingClientRect().width;return document.body.removeChild(n),Math.ceil(h)},e.prototype.render=function(){this.unwireEvents(),this.wireEvents(),this.setHandlerHeight()},e.prototype.refreshHeight=function(){for(var e=this.getResizeHandlers(),t=0;t<e.length;t++)e[t].parentElement.offsetHeight>0&&(e[t].style.height=e[t].parentElement.offsetHeight+"px");this.setHandlerHeight()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.getHeaderContent(),"dblclick",this.callAutoFit,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.getHeaderContent(),"dblclick",this.callAutoFit)},e.prototype.getResizeHandlers=function(){return this.parent.options.frozenColumns?[].slice.call(this.parent.getHeaderContent().querySelectorAll("."+w)):[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+w))},e.prototype.setHandlerHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+M)),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.callAutoFit=function(e){if(e.target.classList.contains("e-rhandler")){var t=this.getTargetColumn(e);if(t.columns)return;this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid),sf.base.closest(e.target,N).classList.add("e-resized")}},e.prototype.resizeStart=function(e){if(e.target.classList.contains("e-rhandler")){var t=[],i={};if(!this.helper){if(0===this.getScrollBarWidth()){if(this.parent.options.allowGrouping)for(var n=0;n<this.parent.options.groupCount;n++)this.widthService.setWidth("30px",n);for(var s=0,o=this.refreshColumnWidth();s<o.length;s++){var r=o[s];this.widthService.setColumnWidth(r,null,null,!1),i={width:""==r.width?0:r.width,columnUid:r.uid},t.push(i)}this.widthService.setWidthToTable()}this.refreshStackedColumnWidth(),this.element=e.target,this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),"Right"===this.column.freeze?this.parent.options.enableRtl?this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString()):this.minMove=parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.parent.options.enableRtl?this.minMove=parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString()),this.minMove+=this.pageX}sf.base.Browser.isDevice&&!this.helper.classList.contains(S)?(this.helper.classList.add(S),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this)):(sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.resizeEnd,this),this.parent.dotNetRef.invokeMethodAsync("ResizeStarted",{columnUid:this.column.uid,columnList:t}))}},e.prototype.preventResizeAction=function(e){e?this.cancelResizeAction():(sf.base.EventHandler.add(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing,this),this.updateCursor("add"))},e.prototype.cancelResizeAction=function(e){e&&(sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),sf.base.Browser.isDevice&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart)),sf.base.detach(this.helper),this.refresh()},e.prototype.getWidth=function(e,t,i){return t&&e<t?t:i&&e>i?i:e},e.prototype.updateResizeEleHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.getColData=function(e,t){return{width:parseFloat(sf.base.isNullOrUndefined(this.widthService.getWidth(e))||"auto"===this.widthService.getWidth(e)?"0":this.widthService.getWidth(e).toString())+t,minWidth:e.minWidth?parseFloat(e.minWidth.toString()):null,maxWidth:e.maxWidth?parseFloat(e.maxWidth.toString()):null}},e.prototype.resizing=function(e){if(!sf.base.isNullOrUndefined(this.column)){var t=0;sf.base.isNullOrUndefined(this.column)&&(t=r(this.element,"th").offsetWidth),this.parent.options.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight(),this.parent.scrollModule.refresh());var i=this.getPointX(e),n=this.parent.options.enableRtl?-(i-this.pageX):i-this.pageX;"Right"===this.column.freeze&&this.column.isFrozen&&(n=this.parent.options.enableRtl?i-this.pageX:this.pageX-i);var s=this.getColData(this.column,n);s.width||(s.width=sf.base.closest(this.element,"th").offsetWidth);var o=this.getWidth(s.width,s.minWidth,s.maxWidth);if(("Right"!==this.column.freeze&&(!this.parent.options.enableRtl&&this.minMove>=i-10||this.parent.options.enableRtl&&this.minMove<=i+10)||"Right"==this.column.freeze&&(this.parent.options.enableRtl&&this.minMove>=i-10||!this.parent.options.enableRtl&&this.minMove<=i+10))&&(o=this.column.minWidth?parseFloat(this.column.minWidth.toString()):10,this.pageX=i=this.minMove),o!==parseFloat(sf.base.isNullOrUndefined(this.column.width)||"auto"===this.column.width?t.toString():this.column.width.toString())){this.pageX=i,this.column.width=sf.base.formatUnit(o);var a=[this.column],l=[this.column];this.column.columns&&(a=this.getSubColumns(this.column,[]),a=this.calulateColumnsWidth(a,!1,n),l=this.calulateColumnsWidth(a,!0,n));for(var h=0,d=l;h<d.length;h++){var c=d[h];this.widthService.setColumnWidth(c,null,"resize")}this.updateHelper()}this.isDblClk=!1}},e.prototype.calulateColumnsWidth=function(e,t,i){for(var n=[],s=0,o=e;s<o.length;s++){for(var r=o[s],a=0,l=0;l<e.length;l++)a+=parseFloat(e[l].width.toString());var h=this.getColData(r,parseFloat(r.width)*i/a),d=this.getWidth(h.width,h.minWidth,h.maxWidth);d!==parseFloat(r.width.toString())&&(t&&(r.width=sf.base.formatUnit(d<1?1:d)),n.push(r))}return n},e.prototype.getSubColumns=function(e,t){for(var i=0,n=e.columns;i<n.length;i++){var s=n[i];!1!==s.visible&&s.allowResizing&&(s.columns?this.getSubColumns(s,t):t.push(s))}return t},e.prototype.resizeEnd=function(e){if(this.helper){sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),sf.base.detach(this.helper);this.parent.getContent();sf.base.closest(this.element,".e-headercell").classList.add("e-resized"),r(this.element,"e-frozenheader")?this.isFrozenColResized=!0:this.isFrozenColResized=!1,this.parent.options.frozenColumns&&(this.parent.freezeModule.refreshRowHeight(),this.parent.freezeModule.setFrozenHeight()),this.parent.options.allowTextWrap&&this.updateResizeEleHeight();var t=this.column.width.toString();t=t.replace("px",""),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:t,columnUid:this.column.uid,allowStopEvent:!0,tableWidth:this.tableWidth,leftFrozenTableWidth:this.leftFrozenTableWidth,rightFrozenTableWidth:this.rightFrozenTableWidth}),this.parent.options.enableColumnVirtualization||this.parent.updateColumnWidth(this.parent.columnModel),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0}},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.refreshColumnWidth=function(){for(var e=this.parent.getColumns(),t=0,i=[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell"));t<i.length;t++)for(var n=i[t],s=0,o=e;s<o.length;s++){var r=o[s];if(n.querySelector("[e-mappinguid]")&&n.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===r.uid&&r.visible){r.width=n.getBoundingClientRect().width?n.getBoundingClientRect().width:r.width;break}}return e},e.prototype.refreshStackedColumnWidth=function(){for(var e=0,t=this.parent.getStackedColumns(this.parent.options.columns);e<t.length;e++){var i=t[e];i.width=this.getStackedWidth(i,0)}},e.prototype.getStackedWidth=function(e,t){for(var i=0,n=e.columns;i<n.length;i++){var s=n[i];!1!==s.visible&&(s.columns?this.getStackedWidth(s,t):t+=s.width)}return t},e.prototype.getTargetColumn=function(e){var t=sf.base.closest(e.target,N),i=(t=t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");return this.parent.getColumnByUid(i)},e.prototype.updateCursor=function(e){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(var i=0,n=t;i<n.length;i++){n[i].classList[e](O)}},e.prototype.refresh=function(){this.column=null,this.pageX=null,this.element=null,this.helper=null},e.prototype.appendHelper=function(){this.helper=sf.base.createElement("div",{className:x}),this.parent.element.appendChild(this.helper),this.setHelperHeight()},e.prototype.setHelperHeight=function(){for(var e=this.parent.getContent().offsetHeight-(this.parent.options.frozenColumns?0:this.getScrollBarWidth()),t=sf.base.closest(this.element,N),i=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),n=i.indexOf(t.parentElement);n<i.length;n++)e+=i[n].offsetHeight;var s=this.calcPos(t);r(t,"e-frozen-right-header")?s.left+=this.parent.options.enableRtl?t.offsetWidth-2:-1:s.left+=this.parent.options.enableRtl?-1:t.offsetWidth-2,this.helper.style.cssText="height: "+e+"px; top: "+s.top+"px; left:"+Math.floor(s.left)+"px;"},e.prototype.getScrollBarWidth=function(e){var t=this.parent.getContent();return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?s():0},e.prototype.removeHelper=function(e){var t=e.target.classList;t.contains(w)||t.contains(S)||!this.helper||(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.detach(this.helper),this.refresh())},e.prototype.updateHelper=function(){var e=sf.base.closest(this.element,N),t=Math.floor(this.calcPos(e).left+(this.parent.options.enableRtl?-1:e.offsetWidth-2));if(r(e,"e-frozen-right-header")&&(t=Math.floor(this.calcPos(e).left+(this.parent.options.enableRtl?e.offsetWidth-2:-1))),t>this.parentElementWidth&&(t=this.parentElementWidth-2),this.parent.options.frozenColumns){var i=sf.base.closest(e,".e-table").offsetLeft;t<i&&(t=i)}this.helper.style.left=t+"px"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),n=e.ownerDocument,s=r(e,"e-grid")||n.documentElement;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return s&&s!==e&&1===s.nodeType&&(t=s.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left}},e.prototype.doubleTapEvent=function(e){this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(this.timeoutHandler(),300))},e.prototype.getUserAgent=function(){var e=sf.base.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},e.prototype.timeoutHandler=function(){this.tapped=null},e}(),I=function(){function e(e){var t=this;this.visualElement=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(e){var i=t.parent,n=e.sender.target,s=n.classList.contains("e-groupheadercell")?n:r(n,"e-groupheadercell");return!(!s||!n.classList.contains("e-drag")&&t.parent.options.groupReordering)&&(t.column=i.getColumnByField(s.firstElementChild.getAttribute("ej-mappingname")),t.visualElement.textContent=s.textContent,t.visualElement.style.width=s.offsetWidth+2+"px",t.visualElement.style.height=s.offsetHeight+2+"px",t.visualElement.setAttribute("e-mappinguid",t.column.uid),i.element.appendChild(t.visualElement),t.visualElement)},this.dragStart=function(e){t.parent.element.classList.add("e-ungroupdrag"),document.body.classList.add("e-prevent-select"),e.bindEvents(e.dragElement)},this.drag=function(e){var i=e.target,n=t.parent.element.querySelector(".e-cloneproperties");t.parent.options.groupReordering||(sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]),r(i,"e-gridcontent")||r(i,"e-headercell")||sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(e){document.body.classList.remove("e-prevent-select"),t.parent.element.classList.remove("e-ungroupdrag"),!(r(e.target,"e-gridcontent")||r(e.target,"e-gridheader"))&&sf.base.remove(e.helper)},this.preventTouchOnWindow=function(e){e.preventDefault()},this.drop=function(e){var i=t.parent,n=i.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));i.element.querySelector(".e-groupdroparea").classList.remove("e-hover"),sf.base.remove(e.droppedElement),i.options.allowGrouping&&sf.base.EventHandler.remove(window,"touchmove",t.preventTouchOnWindow),t.parent.element.querySelector(".e-groupdroparea").removeAttribute("aria-dropeffect"),t.parent.element.querySelector("[aria-grabbed=true]").setAttribute("aria-grabbed","false"),sf.base.isNullOrUndefined(n)||!1===n.allowGrouping||r(i.getColumnHeaderByUid(n.uid),"e-grid").getAttribute("id")!==i.element.getAttribute("id")||i.dotNetRef.invokeMethodAsync("GroupColumn",n.field,"Group")},this.parent=e,this.parent.options.allowGrouping&&this.parent.options.showDropArea&&this.initDragAndDrop()}return e.prototype.columnDrag=function(e){this.parent.options.groupReordering;var t=this.parent,i=t.element.querySelector(".e-cloneproperties"),n=t.getColumnByUid(i.getAttribute("e-mappinguid"));r(e.target,"e-groupdroparea")&&sf.base.classList(i,["e-defaultcur"],["e-notallowedcur"]),sf.base.EventHandler.add(window,"touchmove",this.preventTouchOnWindow),(r(e.target,"e-groupdroparea")||t.options.allowReordering&&r(e.target,"e-headercell"))&&(n.allowGrouping||!r(e.target,"e-groupdroparea"))||sf.base.classList(i,["e-notallowedcur"],["e-defaultcur"]),t.options.showDropArea&&(e.target.classList.contains("e-groupdroparea")?t.element.querySelector(".e-groupdroparea").classList.add("e-hover"):t.element.querySelector(".e-groupdroparea").classList.remove("e-hover"))},e.prototype.columnDragStart=function(e){if(!e.target.classList.contains("e-stackedheadercell")){var t=this.parent.element.querySelector(".e-groupdroparea");t&&t.setAttribute("aria-dropeffect","copy");var i=e.target.classList.contains("e-headercell")?e.target:r(e.target,"e-headercell");sf.base.isNullOrUndefined(i)&&(i=e.event.target.classList.contains("e-headercell")?e.event.target:r(e.event.target,"e-headercell")),i.setAttribute("aria-grabbed","true")}},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"===e.droppedElement.getAttribute("action")){var i=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));if(sf.base.isNullOrUndefined(i)||!1===i.allowGrouping||r(t.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id"))return;t.dotNetRef.invokeMethodAsync("GroupColumn",i.field,"Ungroup")}},e.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},e.prototype.initializeGHeaderDrag=function(){var e=this.parent.element.querySelector(".e-groupdroparea");if(e)new sf.base.Draggable(e,{dragTarget:this.parent.options.groupReordering?".e-drag":".e-groupheadercell",distance:this.parent.options.groupReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isPreventSelect:!1})},e.prototype.initializeGHeaderDrop=function(){this.parent;var e=this.parent.element.querySelector(".e-groupdroparea");if(e)new sf.base.Droppable(e,{accept:".e-dragclone",drop:this.drop})},e.prototype.getModuleName=function(){return"group"},e.prototype.getGHeaderCell=function(e){return this.element&&this.element.querySelector('[ej-mappingname="'+e+'"]')?this.element.querySelector('[ej-mappingname="'+e+'"]').parentElement:null},e}(),T=function(){function e(e){this.mediaCol=[],this.media={},this.mediaBindInstance={},this.mediaColVisibility={},this.parent=e}return e.prototype.renderColumnChooser=function(){var e=this.parent.element.querySelector("#"+this.parent.element.id+"_ccdlg");e.style.maxHeight="430px";var t=e.style.display;e.style.display="block";var i,n=this.parent.element.querySelector(".e-cc-toolbar");this.parent.getHeaderContent().parentElement.classList.contains("e-sticky")?(i=n.getBoundingClientRect(),e.classList.add("e-sticky")):i=sf.popups.calculateRelativeBasedPosition(n,e),e.style.display=t;var s,o=i.top+n.getBoundingClientRect().height;s=this.parent.options.enableRtl?this.parent.element.querySelector(".e-columnchooser-btn").offsetLeft:i.left-250+n.clientWidth+2,this.parent.dotNetRef.invokeMethodAsync("GetChooserPosition",s.toString(),o.toString())},e.prototype.setMediaColumns=function(e){var t=this.parent.getColumns();if(!sf.base.isNullOrUndefined(t)){for(var i=0;i<t.length;i++)""!==t[i].hideAtMedia&&(sf.base.isNullOrUndefined(t[i].visible)||t[i].visible||e)&&this.pushMediaColumn(t[i],i);this.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:this.mediaColVisibility}),this.mediaColVisibility={}}},e.prototype.windowResized=function(){var e=this;setTimeout((function(){!sf.base.isNullOrUndefined(e.mediaColVisibility)&&Object.keys(e.mediaColVisibility).length>0&&(e.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:e.mediaColVisibility,invokedByMedia:!0}),e.mediaColVisibility={})}),100)},e.prototype.pushMediaColumn=function(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid]),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])},e.prototype.mediaQueryUpdate=function(e,t){var i=this.parent.getColumns()[e];this.mediaCol.some((function(e){return e.uid===i.uid}))&&(this.mediaColVisibility[i.uid]=t.matches)},e.prototype.updateMediaColumns=function(e){for(var t=Object.keys(e),i=function(e){var i=-1;n.mediaCol.some((function(n){return i++,n.uid===t[e]}))?n.mediaCol.splice(i,1):n.pushMediaColumn(n.parent.getColumnByUid(t[e]),n.parent.getColumnIndexByUid(t[e]))},n=this,s=0;s<t.length;s++)i(s)},e.prototype.removeMediaListener=function(){for(var e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])},e}(),D=function(){function e(e){this.key=null,this.uid=null,this.parent=e}return e.prototype.renderColumnMenu=function(e,t,i){this.key=i,this.uid=e;var n=this.parent.getColumnHeaderByUid(e).querySelector(".e-columnmenu"),s=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0];s.style.position="absolute";var o=s.getElementsByTagName("ul")[0];if(sf.base.isNullOrUndefined(o))return{Left:1,Top:1};var r={top:0,left:0};o.style.visibility="hidden",s.style.display="block";var a=o.getBoundingClientRect();o.classList.add("e-transparent"),o.style.visibility="",s.style.display="";var l=this.getHeaderCell(n);return this.parent.options.enableRtl?r=sf.popups.calculatePosition(l,"left","bottom"):(r=sf.popups.calculatePosition(l,"right","bottom")).left-=a.width,r.left-=pageXOffset,r.top-=pageYOffset,t&&(sf.base.EventHandler.add(o,"mouseover",this.appendFilter,this),sf.base.EventHandler.add(o,"keydown",this.appendFilter,this)),{Left:-1!==Math.sign(r.left)?Math.ceil(r.left):0,Top:Math.ceil(r.top)}},e.prototype.setPosition=function(){var e=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0],t=sf.base.isNullOrUndefined(e)?null:e.getElementsByTagName("ul")[0];if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(this.uid)&&!sf.base.Browser.isDevice){var i=this.parent.getColumnHeaderByUid(this.uid).querySelector(".e-columnmenu"),n=this.getHeaderCell(i).getBoundingClientRect(),s=n.left+pageXOffset,o=n.bottom+pageYOffset,r=t.getBoundingClientRect(),a=document.documentElement;n.bottom+r.height>a.clientHeight&&o-n.height-r.height>a.clientTop&&(o=o-n.height-r.height),n.left+r.width>a.clientWidth&&n.right-r.width>a.clientLeft&&(s=s+n.width-r.width),s=s-t.getBoundingClientRect().width+n.width,e.style.left=Math.ceil(s+1)+"px",e.style.top=Math.ceil(o+1)+"px"}},e.prototype.appendFilter=function(e){var t=this,i=!1;setTimeout((function(){sf.base.closest(e.target,"#"+t.key)&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))||e.target.parentElement.id==t.key&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))?i=!0:!sf.base.closest(e.target,"#"+t.key)&&t.parent.element.querySelector(".e-filter-popup")&&(i=!1),t.parent.dotNetRef.invokeMethodAsync("FilterMouseOverHandler",t.uid,i)}),10)},e.prototype.getHeaderCell=function(e){return sf.base.closest(e,"th.e-headercell")},e}(),j=function(){function e(e){this.parent=e}return e.prototype.filterPopupRender=function(e,t,i,n){var s=this.parent.element.querySelector("#"+e);if(!sf.base.isNullOrUndefined(s))if(n){sf.base.EventHandler.add(s,"mousedown",this.mouseDownHandler,this),s.style.maxHeight="excel"==i?"800px":"350px";var o=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0].getElementsByTagName("ul")[0],a=sf.base.isNullOrUndefined(o.querySelector(".e-icon-filter"))?o.getElementsByClassName("e-menu-item e-focused")[0]:o.querySelector(".e-icon-filter").parentElement,l=this.parent.element.querySelector(".e-filter-popup"),h=this.parent.element.getBoundingClientRect(),d=a.getBoundingClientRect(),c=d.left-h.left,p=d.top-h.top,u=s.style.display;s.style.display="block",h.height<p?p=p-l.offsetHeight+d.height:h.height<p+l.offsetHeight&&(p=h.height-l.offsetHeight),window.innerHeight<l.offsetHeight+p+h.top&&(p=window.innerHeight-l.offsetHeight-h.top),c+=this.parent.options.enableRtl?-l.offsetWidth:d.width,h.width<=c+l.offsetWidth?c-=d.width+l.offsetWidth:c<0&&(c+=l.offsetWidth+d.width),s.style.display=u,this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",c.toString(),p.toString())}else{var f=[].slice.call(this.parent.element.querySelector(".e-headercontent").querySelectorAll("div[e-mappinguid="+t+"]"))[1];s.style.maxHeight="excel"==i?"800px":"350px";u=s.style.display;s.style.display="block";var g=sf.popups.calculateRelativeBasedPosition(f,s);this.parent.options.enableColumnVirtualization&&this.parent.virtualContentModule.virtualEle.filterTranslateX&&!r(f,"e-frozenheader")&&(g.left+=this.parent.virtualContentModule.virtualEle.filterTranslateX),s.style.display=u;c=g.left-250+f.clientWidth;var m=g.top+f.getBoundingClientRect().height-5;c<1?c=250+c-16:c-=4;var v=this.parent.element.offsetWidth;if(v-c<250)c-=250-(v-c);this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",c.toString(),m.toString())}},e.prototype.mouseDownHandler=function(e){(e&&sf.base.closest(e.target,".e-filter-popup")||e.currentTarget&&e.currentTarget.activeElement&&r(e.currentTarget.activeElement,"e-filter-popup")||r(e.target,"e-popup")||r(e.target,"e-popup-wrapper"))&&!sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("PreventColumnMenuClose",!0)},e}(),A=function(){function e(e){this.parent=e}return e.prototype.createTooltip=function(e,t){for(var n,o,r={},a=function(){var i=l.parent.getContent(),a=e[h].fieldName,d=e[h].uid,c=e[h].message;if(a=a.replace(/[.]/g,"___"),o=l.parent.options.hasTemplateInEditSettings||sf.base.isNullOrUndefined(d)?l.parent.element.querySelector("#"+a)||document.querySelector("#"+a):l.parent.getContent().querySelectorAll("[e-mappinguid="+d+"]")[0]||document.querySelectorAll("[e-mappinguid="+d+"_Dialog]")[0],sf.base.isNullOrUndefined(o)){var p=l.parent.columnModel.filter((function(e){return e.field.split(a).length>1}));sf.base.isNullOrUndefined(p)||0==p.length||(a=p[0].field.replace(/[.]/g,"___"),o=l.parent.getContent().querySelectorAll("[e-mappinguid="+d+"]")[0]||document.querySelectorAll("[e-mappinguid="+d+"_Dialog]")[0])}var u=i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth,f="Dialog"!==l.parent.options.editMode,g=l.parent.options.enableAdaptiveUI?"_adaptive_dialogEdit_wrapper":"_dialogEdit_wrapper";if(!o)return{value:void 0};var m=sf.base.closest(o,".e-rowcell"),v=sf.base.closest(o,".e-row"),b=void 0,y=!1,C=Math.round(l.parent.getContent().clientHeight/l.parent.getRowHeight())-1,w=[].slice.call(l.parent.getContent().querySelectorAll(".e-row"));l.parent.options.enableVirtualization&&l.parent.options.allowGrouping&&l.parent.options.groupCount>0&&t&&(w=[].slice.call(l.parent.getContent().querySelectorAll("tr"))).pop(),"Batch"===l.parent.options.editMode&&C>1&&w.length>=C&&w[w.length-1].getAttribute("data-rowindex")===v.getAttribute("data-rowindex")&&(y=!0),f&&(l.parent.options.frozenRows,(C>1&&w.length>=C&&("Bottom"===l.parent.options.newRowPosition&&t||!sf.base.isNullOrUndefined(m)&&m.classList.contains("e-lastrowcell")&&!v.classList.contains("e-addedrow"))||y)&&(b=!0));var M=f?l.parent.getContentTable():document.querySelector("#"+l.parent.element.id+g).querySelector(".e-dlg-content"),S=M.getBoundingClientRect(),x=f?l.parent.element.getBoundingClientRect().left:S.left,N=sf.base.closest(o,"td"),O=N?N.getBoundingClientRect():o.parentElement.getBoundingClientRect(),E=d+"_Error",I=void 0;(I=l.parent.options.hasTemplateInEditSettings||sf.base.isNullOrUndefined(d)?l.parent.element.querySelector("#"+a+"_Error")||document.querySelector("#"+a+"_Error"):l.parent.getContent().querySelectorAll("[e-mappinguid="+E+"]")[0]||document.querySelectorAll("[e-mappinguid="+E+"]")[0]).style.top=O.bottom-S.top+M.scrollTop+9+"px",I.style.left=O.left-x+M.scrollLeft+O.width/2+"px",I.style.maxWidth="auto",f&&S.left<x&&(I.style.left=parseInt(I.style.left,10)-S.left+x+"px");var T=void 0;(T=b?I.querySelector(".e-tip-bottom"):I.querySelector(".e-tip-top"),(l.parent.options.frozenColumns||l.parent.options.frozenRows)&&"Dialog"!==l.parent.options.editMode)&&(("Normal"===l.parent.options.editMode?sf.base.closest(o,".e-editcell"):sf.base.closest(o,".e-table")).style.position="relative",I.style.position="absolute");I.style.display="block",I.querySelector(".e-error").innerText=c,!b&&f&&i.getBoundingClientRect().bottom<O.bottom+O.height&&(i.scrollTop=i.scrollTop+I.offsetHeight+T.scrollHeight);var D=parseInt(document.defaultView.getComputedStyle(I,null).getPropertyValue("font-size"),10);if(I.getBoundingClientRect().width<O.width&&I.querySelector("label").getBoundingClientRect().height/(1.2*D)>=2&&(I.style.width=I.style.maxWidth),!l.parent.options.frozenColumns&&!l.parent.options.frozenRows||"Normal"!==l.parent.options.editMode&&"Batch"!==l.parent.options.editMode?I.style.left=parseInt(I.style.left,10)-I.offsetWidth/2+"px":I.style.left=N.offsetLeft+(N.offsetWidth/2-I.offsetWidth/2)+"px",f&&!u&&!l.parent.options.allowPaging||l.parent.options.frozenColumns||l.parent.options.frozenRows){i.style.position="static";var j=sf.popups.calculateRelativeBasedPosition(N,I);I.style.top=j.top+O.height+9+"px"}if(b){if(!u||l.parent.options.frozenColumns||"auto"===l.parent.options.height||l.parent.options.frozenRows||l.parent.options.enableVirtualization)I.style.bottom=O.height+9+"px";else{var A=i.scrollWidth>i.offsetWidth?s():0,z=-1===l.parent.options.height.toString().indexOf("%")?parseInt(l.parent.options.height,10):i.offsetHeight;I.style.bottom=z-i.querySelector("table").offsetHeight-A+O.height+9+"px"}I.style.top=null}n=b?"bottom":"top",a.includes("___")&&sf.base.isNullOrUndefined(d)&&(a=a.replace("___","."));var k=sf.base.isNullOrUndefined(d)?l.parent.getColumnByField(a).uid:d;r[k]="top: "+I.style.top+"; bottom: "+I.style.bottom+"; left: "+I.style.left+"; \n            max-width: "+I.style.maxWidth+"; width: "+I.style.width+"; text-align: center; position: "+I.style.position+";"},l=this,h=0;h<e.length;h++){var d=a();if("object"===i(d))return d.value}this.parent.dotNetRef.invokeMethodAsync("ShowValidationPopup",r,n)},e}(),z=function(){function e(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.clipBoardTextArea=sf.base.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard","aria-hidden":"true"}}),this.parent.element.appendChild(this.clipBoardTextArea)}return e.prototype.pasteHandler=function(){var e=this,t=this.parent,i=sf.base.closest(document.activeElement,".e-rowcell");if(i&&t.options.allowEditing&&"Batch"===t.options.editMode&&"Cell"===t.options.selectionMode&&"Flow"!==t.options.cellSelectionMode&&(!i.classList.contains("e-editedbatchcell")||"Box"!==t.options.cellSelectionMode)){this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var n=window.scrollX,s=window.scrollY;this.clipBoardTextArea.focus(),setTimeout((function(){e.activeElement.focus(),window.scrollTo(n,s);t.dotNetRef.invokeMethodAsync("InvokeCopyPasteAction",{clipboardText:e.clipBoardTextArea.value},"Paste")}),10)}},e.prototype.pasteAction=function(e,t,i,n){n||""==e||this.paste(e,t,i)},e.prototype.paste=function(e,t,i){var n,s,o,r=this.parent,a=i,l=t;if(r.options.allowEditing&&"Batch"===r.options.editMode&&"Cell"===r.options.selectionMode&&"Flow"!==r.options.cellSelectionMode){var h,d,c=e.split("\n"),p=r.getDataRows(),u=this.parent.options.frozenColumns;u&&(d=r.getMovableDataRows());for(var f=0;f<c.length;f++){if(h=c[f].split("\t"),a=i,f===c.length-1&&""===c[f]||sf.base.isUndefined(r.getRowByIndex(l))){a++;break}for(var g=0;g<h.length;g++){if(o=r.getCellFromIndex(l,a),u){var m=p[l],v=d[l];o=!!m.querySelector('[data-colindex="'+a+'"]')||v.querySelector('[data-colindex="'+a+'"]')}if(!o){a++;break}n=r.getColumnByIndex(a),s=h[g],!n.allowEditing||n.isPrimaryKey||n.template||r.dotNetRef.invokeMethodAsync("InvokePasteAction",{cellValue:s},l,a,n.field),a++}l++}}},e.prototype.pasteData=function(e,t,i,n,s){if(!s){this.parent.editModule&&this.parent.dotNetRef.invokeMethodAsync("UpdateCell",e,t,i);var o=this.parent.getCellFromIndex(e,n);o&&sf.base.classList(o,["e-focus","e-focused"],[])}},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){var t=this.parent.options.frozenColumns;this.clipBoardTextArea.value=this.copyContent="";var i=void 0,n=this.parent.getRows();if(t&&(i=this.parent.getMovableDataRows()),"Cell"!==this.parent.options.selectionMode){var s=this.parent.getSelectedRowIndexes();if(e){for(var o=[],a=0;a<this.parent.getVisibleColumns().length;a++)o[a]=this.parent.getVisibleColumns()[a].headerText;this.getCopyData(o,!1,"\t",e),this.copyContent+="\n"}for(a=0;a<s.length;a++){a>0&&(this.copyContent+="\n"),1!=parseInt(n[0].getAttribute("aria-rowindex"))&&"Both"!==this.parent.options.selectionMode&&(s[a]=s[a]-parseInt(n[0].getAttribute("aria-rowindex"))+1);var l=[].slice.call(n[s[a]].querySelectorAll(".e-rowcell:not(.e-hide)"));t&&l.push.apply(l,[].slice.call(i[s[a]].querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(l,!1,"\t",e)}}else{var h=this.checkBoxSelection();if(h.status){if(e){var d=[];for(a=0;a<h.colIndexes.length;a++)d.push(this.parent.getColumnHeaderByIndex(h.colIndexes[a]));this.getCopyData(d,!1,"\t",e),this.copyContent+="\n"}for(a=0;a<h.rowIndexes.length;a++){a>0&&(this.copyContent+="\n");l=[].slice.call(n[h.rowIndexes[a]].querySelectorAll(".e-cellselectionbackground"));t&&l.push.apply(l,[].slice.call(i[h.rowIndexes[a]].querySelectorAll(".e-cellselectionbackground"))),this.getCopyData(l,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),!0,"\n",e)}this.parent.options.isClipboardEventBinded?this.parent.dotNetRef.invokeMethodAsync("InvokeCopyPasteAction",{clipboardText:this.copyContent},"Copy"):this.clipBoardData(!1,this.copyContent)}else if(r(document.activeElement,"e-grid")){var c=document.activeElement;document.execCommand("copy"),this.clipBoardTextArea.blur(),c.focus()}},e.prototype.clipBoardData=function(e,t){var i=document.activeElement;this.copyContent=""!=t?t:this.copyContent,e||(this.clipBoardTextArea.value=this.copyContent,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0,document.queryCommandSupported("copy")&&(document.execCommand("copy"),this.clipBoardTextArea.blur(),i.focus()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1))},e.prototype.getCopyData=function(e,t,i,n){for(var s="string"!=typeof e[0],o=0;o<e.length;o++)n&&t&&(this.copyContent+=this.parent.getColumns()[parseInt(e[o].getAttribute("data-colindex"),10)].headerText+"\n"),s?e[o].classList.contains("e-hide")||(!e[o].classList.contains("e-gridchkbox")&&Object.keys(e[o].querySelectorAll(".e-check")).length?this.copyContent+=!0:!e[o].classList.contains("e-gridchkbox")&&Object.keys(e[o].querySelectorAll(".e-uncheck")).length?this.copyContent+=!1:this.copyContent+=e[o].innerText):this.copyContent+=e[o],o<e.length-1&&(this.copyContent+=i)},e.prototype.copy=function(e){if(document.queryCommandSupported("copy")){document.activeElement;this.setCopyData(e)}},e.prototype.getSelectedRowCellIndexes=function(){var e,t=this.parent,i=[],n=t.getRows();t.options.frozenColumns&&(e=t.getMovableDataRows());for(var s=function(s){var o=n[s].querySelectorAll(".e-cellselectionbackground");if(t.options.frozenColumns&&!o.length&&(o=e[s].querySelectorAll(".e-cellselectionbackground")),o.length){var r=[];o.forEach((function(e){r.push(parseInt(e.getAttribute("data-colindex")))})),i.push({rowIndex:s,cellIndexes:r})}},o=0;o<n.length;o++)s(o);return i},e.prototype.checkBoxSelection=function(){var e,t={status:!1};if("Cell"===this.parent.options.selectionMode){e=this.getSelectedRowCellIndexes();var i=void 0,n=[],s=void 0;for(s=0;s<e.length&&(e[s].cellIndexes.length&&n.push(e[s].rowIndex),!e[s].cellIndexes.length||(i||(i=JSON.stringify(e[s].cellIndexes.sort())),i===JSON.stringify(e[s].cellIndexes.sort())));s++);n.sort((function(e,t){return e-t})),s===e.length&&(t={status:!0,rowIndexes:n,colIndexes:e[0].cellIndexes})}return t},e}(),k=function(){function e(e){this.parent=e,this.wireEvents()}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getContent(),"scroll",this.scrollHandler,this),sf.base.EventHandler.add(this.parent.element,"mousemove",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.parent.element,"mouseout",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.parent.element,"keydown",this.onKeyPressed,this)},e.prototype.unWireevents=function(){sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.scrollHandler),sf.base.EventHandler.remove(this.parent.element,"mousemove",this.mouseMoveHandler),sf.base.EventHandler.remove(this.parent.element,"mouseout",this.mouseMoveHandler),sf.base.EventHandler.remove(this.parent.element,"keydown",this.onKeyPressed)},e.prototype.open=function(e){this.close(),this.ctrlId=sf.base.getUniqueID(this.parent.element.getAttribute("id")),sf.base.isNullOrUndefined(this.toolTipElement)&&(this.toolTipElement=sf.base.createElement("div",{className:"e-tooltip-wrap e-popup e-lib e-control e-popup-open",styles:'width: "auto", height: "auto", position: "absolute"',attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}})),sf.base.attributes(e,{"aria-describedby":this.ctrlId+"_content","data-tooltip-id":this.ctrlId+"_content"}),this.renderToolTip(),this.setPosition(e)},e.prototype.renderToolTip=function(){var e=sf.base.createElement("div",{className:"e-tip-content"});e.innerHTML=this.content,this.toolTipElement.appendChild(e);var t=sf.base.createElement("div",{className:"e-arrow-tip e-tip-bottom",styles:"top: 99.9%"});t.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),t.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom",styles:"top: -6px"})),this.toolTipElement.appendChild(t),document.body.appendChild(this.toolTipElement)},e.prototype.setPosition=function(e){var t={top:0,left:0},i=this.toolTipElement.querySelector(".e-arrow-tip"),n=sf.popups.calculatePosition(e,"Center","Top");t.top-=this.toolTipElement.offsetHeight+i.offsetHeight,t.left-=this.toolTipElement.offsetWidth/2,this.toolTipElement.style.top=n.top+t.top+"px",this.toolTipElement.style.left=n.left+t.left+"px";var s=r(this.parent.element,"e-dialog");s&&(this.toolTipElement.style.zIndex=(parseInt(s.style.zIndex,10)+1).toString())},e.prototype.close=function(){if(this.toolTipElement){var e=this.parent.element.querySelector('[aria-describedby="'+this.ctrlId+'_content"]');sf.base.isNullOrUndefined(e)?sf.base.isNullOrUndefined(this.parent.element.querySelector("form"))||(sf.base.isNullOrUndefined(document.getElementById(this.ctrlId+"_content"))||document.getElementById(this.ctrlId+"_content").remove(),this.toolTipElement=null):(e.removeAttribute("aria-describedby"),e.removeAttribute("data-tooltip-id"),this.toolTipElement=null),sf.base.isNullOrUndefined(document.getElementById(this.ctrlId+"_content"))||(document.getElementById(this.ctrlId+"_content").remove(),this.toolTipElement=null)}},e.prototype.getTooltipStatus=function(e){var t,i=this.parent.getHeaderTable(),n=this.parent.getContentTable(),s=this.createTable(i,"e-gridheader","header"),o=this.createTable(n,"e-gridcontent","content"),r=e.classList.contains("e-headercell")?s:o,a=e.classList.contains("e-headercell")?"th":"tr";return r.querySelector(a).className=e.className,r.querySelector(a).innerText=e.innerText,t=r.querySelector(a).getBoundingClientRect().width,document.body.removeChild(s),document.body.removeChild(o),e.firstElementChild?t>e.getBoundingClientRect().width||e.firstElementChild.offsetWidth<e.firstElementChild.scrollWidth:t>e.getBoundingClientRect().width||e.offsetWidth<e.scrollWidth},e.prototype.mouseMoveHandler=function(e){if(this.isEllipsisTooltip()){if(this.parent.options.allowTextWrap){var t=this.parent.options.wrapMode;if("Header"==t&&r(e.target,"e-gridheader")||"Content"==t&&r(e.target,"e-gridcontent")||"Both"==t)return}var i=r(e.target,"e-ellipsistooltip");this.prevElement===i&&"mouseout"!==e.type||this.close();var n=e.target.tagName;if(i&&"mouseout"!==e.type&&(!sf.base.Browser.isDevice||-1===["A","BUTTON","INPUT"].indexOf(n))){if(i.getAttribute("data-tooltip-id"))return;if(this.getTooltipStatus(i)){if(i.getElementsByClassName("e-headertext").length){var s=this.parent.getColumnByUid(i.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));this.content=sf.base.isNullOrUndefined(s.description)?i.getElementsByClassName("e-headertext")[0].innerText:s.description}else this.content=i.innerText;this.prevElement=i,this.open(i)}}}this.hoverFrozenRows(e)},e.prototype.hoverFrozenRows=function(e){if(this.parent.options.frozenColumns){var t=r(e.target,"e-row"),i=[].slice.call(this.parent.element.querySelectorAll(".e-frozenhover"));if(i.length&&"mouseout"===e.type)for(var n=0;n<i.length;n++)i[n].classList.remove("e-frozenhover");else if(t){var s=[].slice.call(this.parent.element.querySelectorAll('tr[data-rowindex="'+t.getAttribute("data-rowindex")+'"]'));if(s.splice(s.indexOf(t),1),"true"!=t.getAttribute("aria-selected"))for(n=0;n<s.length;n++)s[n].classList.add("e-frozenhover");else for(n=0;n<s.length;n++)s[n].classList.remove("e-frozenhover")}}},e.prototype.isEllipsisTooltip=function(){var e=this.parent.getColumns();if("EllipsisWithTooltip"===this.parent.options.clipMode)return!0;for(var t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1},e.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.close()},e.prototype.createTable=function(e,t,i){var n=sf.base.createElement("div");n.className=this.parent.element.className,n.style.cssText="display: inline-block;visibility:hidden;position:absolute";var s=sf.base.createElement("div");s.className=t;var o=sf.base.createElement("table");o.className=e.className,o.style.cssText="table-layout: auto;width: auto";var r="header"===i?"th":"td",a=sf.base.createElement("tr"),l=sf.base.createElement(r);return a.appendChild(l),o.appendChild(a),s.appendChild(o),n.appendChild(s),document.body.appendChild(n),n},e.prototype.onKeyPressed=function(e){"Tab"!==e.key&&"ShiftTab"!==e.key||this.close()},e.prototype.destroy=function(){this.close(),this.unWireevents()},e}(),P=function(){function e(e){var t=this;this.isOverflowBorder=!0,this.istargetGrid=!1,this.dataRowElements=[],this.helper=function(e){var i=t.parent,n=t.draggable.currentStateTarget;t.draggable.queryPositionInfo=function(e){return i.options.enableRtl&&sf.base.isNullOrUndefined(i.options.rowDropTarget)&&(e.left=this.position.left-(this.parentClientRect.left+this.borderWidth.left)-i.element.querySelector(".e-cloneproperties").clientWidth+i.element.querySelector(".e-rowdragdrop").clientWidth/2+"px"),e};var s=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone",styles:'height:"auto", z-index:2, width:'+i.element.offsetWidth}),o=sf.base.createElement("table",{styles:"width:"+i.element.offsetWidth}),a=sf.base.createElement("tbody");if(document.getElementsByClassName("e-griddragarea").length||i.options.rowDropTarget&&!e.sender.target.classList.contains("e-selectionbackground")&&"Single"!==i.options.selectionType||!i.options.rowDropTarget&&!r(e.sender.target,"e-rowdragdrop")||i.options.rowDropTarget&&"Single"===i.options.selectionType&&null===t.draggable.currentStateTarget.parentElement.getAttribute("data-rowindex"))return!1;i.options.rowDropTarget&&"Row"===i.options.selectionMode&&"Single"===i.options.selectionType&&null!==t.draggable.currentStateTarget.parentElement.getAttribute("data-rowindex")&&i.dotNetRef.invokeMethodAsync("SelectRow",parseInt(t.draggable.currentStateTarget.parentElement.getAttribute("data-rowindex"),10),!1,-1),t.startedRow=sf.base.closest(n,"tr").cloneNode(!0),sf.base.isNullOrUndefined(t.startedRow.querySelector(".e-rowcell.e-focus"))||sf.base.removeClass([t.startedRow.querySelector(".e-rowcell.e-focus")],["e-focus","e-focused"]);var l=i.getSelectedRows();u(t.startedRow,".e-indentcell"),u(t.startedRow,".e-detailrowcollapse"),u(t.startedRow,".e-detailrowexpand"),t.removeCell(t.startedRow,"e-gridchkbox");var h=new RegExp("e-active","g");if(t.startedRow.innerHTML=t.startedRow.innerHTML.replace(h,""),a.appendChild(t.startedRow),i.getSelectedRows().length>1&&t.startedRow.hasAttribute("aria-selected")){var d=sf.base.createElement("span",{className:"e-dropitemscount",innerHTML:""+l.length});s.appendChild(d)}var c=sf.base.closest(n,"tr").querySelector(".e-icon-rowdragicon");return c&&c.classList.add("e-dragstartrow"),o.appendChild(a),s.appendChild(o),i.element.appendChild(s),s},this.dragStart=function(e){var i=t.parent;if(document.body.classList.add("e-prevent-select"),!document.getElementsByClassName("e-griddragarea").length){var n=t.parent.element.querySelector(".e-dropitemscount");t.parent.getSelectedRows().length>1&&n&&(n.style.left=t.parent.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px");var s=parseInt(t.startedRow.getAttribute("data-rowindex"),10),o=sf.base.isNullOrUndefined(t.startedRow.getAttribute("data-uid"))?null:t.startedRow.getAttribute("data-uid");t.parent.dotNetRef.invokeMethodAsync("RowDragStartEvent",s,o),e.bindEvents(e.dragElement),t.dragStartData=t.rowData;var r=document.getElementById(i.options.rowDropTarget);i.options.rowDropTarget&&r&&r.blazor__instance&&"function"==typeof r.blazor__instance.getModuleName&&"grid"===r.blazor__instance.getModuleName()&&r.blazor__instance.getContent().classList.add("e-allowRowDrop")}},this.drag=function(e){var i=t.parent;if(t.istargetGrid=!1,t.destinationGrid=t.parent,t.parent.options.rowDropTarget){var n=document.getElementById(i.options.rowDropTarget);t.destinationGrid=sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.blazor__instance)?t.parent:n.blazor__instance,r(e.target,"e-grid")&&(t.istargetGrid=t.parent.options.rowDropTarget===r(e.target,"e-grid").id)}var s=t.parent.element.querySelector(".e-cloneproperties"),o=t.getElementFromPosition(s,e.event);sf.base.classList(s,["e-defaultcur"],["e-notallowedcur","e-movecur"]),t.isOverflowBorder=!0;var a=r(o,"e-grid")?sf.base.closest(e.target,"tr"):null;if(e.target){if(t.stopTimer(),i.element.classList.add("e-rowdrag"),t.dragTarget=a&&r(o,"e-grid").id===s.parentElement.id?i.options.groupCount>0?parseInt(a.getAttribute("data-rowindex"),10):a.rowIndex:parseInt(t.startedRow.getAttribute("data-rowindex"),10),i.options.rowDropTarget)r(o,"e-gridcontent")?r(s.parentElement,"e-grid").id===r(o,"e-grid").id?sf.base.classList(s,["e-notallowedcur"],["e-defaultcur"]):sf.base.classList(s,["e-defaultcur"],["e-notallowedcur"]):r(o,"e-droppable")?sf.base.classList(s,["e-defaultcur"],["e-notallowedcur"]):sf.base.classList(s,["e-notallowedcur"],["e-defaultcur"]);else{var l=r(o,"e-grid");l&&l.id===s.parentElement.id?sf.base.classList(s,["e-movecur"],["e-defaultcur"]):sf.base.classList(s,["e-notallowedcur"],["e-movecur"])}if(!i.options.rowDropTarget||!i.options.rowDropTarget&&e.target.classList.contains("e-selectionbackground")){if(r(o,"e-grid")&&t.updateScrollPostion(e.event,o),t.isOverflowBorder&&parseInt(t.startedRow.getAttribute("data-rowindex"),10)!==t.dragTarget)t.moveDragRows(e,t.startedRow,a);else{var h=t.parent.getRows(),d=!sf.base.isNullOrUndefined(a)&&t.startedRow.getAttribute("data-uid")!==h[h.length-1].getAttribute("data-uid");if(a&&!sf.base.isNullOrUndefined(t.parent.getRowByIndex(h.length-1))&&t.parent.getRowByIndex(h.length-1).getAttribute("data-uid")===a.getAttribute("data-uid")&&d&&!i.options.groupCount){var c=sf.base.createElement("div",{className:"e-lastrow-dragborder"}),p=t.parent.getContent();c.style.width=t.parent.getContent().offsetWidth-t.getScrollWidth()+"px",t.borderIndex=Number(r(a,"e-row").getAttribute("data-rowindex")),p.parentElement.querySelectorAll(".e-lastrow-dragborder").length||(p.classList.add("e-grid-relative"),p.parentElement.appendChild(c),c.style.bottom=t.parent.options.allowPaging?t.parent.element.querySelector(".e-pager").offsetHeight+t.getScrollWidth()+"px":t.getScrollWidth()+"px")}t.removeBorder(a)}i.options.groupCount&&(sf.base.isNullOrUndefined(a)||a.querySelector("td.e-groupcaption")||t.startedRow.getAttribute("caption-uid")===a.getAttribute("caption-uid")||!i.options.groupCount?t.addorRemoveDashedBorder(e,!1,t.dataRowElements):(t.addorRemoveDashedBorder(e,!1,t.dataRowElements),t.dataRowElements=t.parent.getDataRows().filter((function(e){return e.getAttribute("caption-uid")===a.getAttribute("caption-uid")})),t.addorRemoveDashedBorder(e,!0,t.dataRowElements))),t.isOverflowBorder||t.addorRemoveDashedBorder(e,!1,t.dataRowElements)}i.options.rowDropTarget&&t.istargetGrid&&(t.updateScrollPostion(e.event,o),t.moveDragRows(e,t.startedRow,a))}},this.dragStop=function(e){document.body.classList.remove("e-prevent-select"),c(t.parent.element)||t.processDragStop(e)},this.emptyTargertInGrid=function(e){var i=t.parent,n=i.getContent().getElementsByClassName("e-dragborder"),s=i.getHeaderContent().getElementsByClassName("e-firstrow-dragborder"),o=i.getContent().parentElement.getElementsByClassName("e-lastrow-dragborder"),a=!e.classList.contains("e-rowdragdrop")&&!e.classList.contains("e-icon-rowdragicon"),l=sf.base.isNullOrUndefined(i.options.rowDropTarget)&&!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(s)&&0===n.length&&0===s.length&&sf.base.isNullOrUndefined(r(e,"e-rowcell"))&&a;return!(t.parent.options.rowDropTarget||l||t.isOverflowBorder||sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(o)||0!==s.length||0!==o.length)||l},this.processDragStop=function(e){var i=t.parent,n=t.getElementFromPosition(e.helper,e.event),s=n&&!n.classList.contains("e-dlg-overlay")?n:e.target;i.element.classList.remove("e-rowdrag");var o=document.getElementById(i.options.rowDropTarget),a=i.element.querySelector(".e-dragstartrow");if(t.parent.options.allowRowDragAndDrop&&t.parent.options.rowDropTarget&&!r(s,"e-grid")){var l=t.getElementXPath(s),h=s.id,d=parseInt(t.startedRow.getAttribute("data-rowindex"),10),c=s.getBoundingClientRect();i.dotNetRef.invokeMethodAsync("ReorderRows",d,0,"add",!1,l,h,c,null,!0,!1,null,null)}if(i.options.rowDropTarget&&o&&o.blazor__instance&&"function"==typeof o.blazor__instance.getModuleName&&"grid"===o.blazor__instance.getModuleName()&&o.blazor__instance.getContent().classList.remove("e-allowRowDrop"),!r(s,"e-gridcontent")||s.classList.contains("e-lastrow-dragborder")||t.emptyTargertInGrid(s))return t.dragTarget=null,sf.base.remove(e.helper),t.stopTimer(),t.removeBorder(n),i.options.groupCount&&t.addorRemoveDashedBorder(e,!1,t.dataRowElements),void(a&&a.classList.remove("e-dragstartrow"));if(t.parent.options.allowRowDragAndDrop&&!t.parent.options.rowDropTarget){t.stopTimer(),t.parent.getContent().classList.remove("e-grid-relative"),t.removeBorder(n),i.options.groupCount&&t.addorRemoveDashedBorder(e,!1,t.dataRowElements),a&&a.classList.remove("e-dragstartrow");var p=t.getElementXPath(e.target),u=s.id,f=parseInt(t.startedRow.getAttribute("data-rowindex"),10),g=sf.base.isNullOrUndefined(t.startedRow.getAttribute("data-uid"))?null:t.startedRow.getAttribute("data-uid"),m=sf.base.isNullOrUndefined(sf.base.closest(e.target,"tr"))?null:sf.base.closest(e.target,"tr").getAttribute("data-uid"),v=f<t.borderIndex?t.borderIndex:t.borderIndex+1;if(Number.isNaN(v))return;setTimeout((function(){i.dotNetRef.invokeMethodAsync("ReorderRows",f,v,"delete",!0,p,u,null,null,!1,!1,g,m)}),10),t.dragTarget=null}},this.removeCell=function(e,t){return[].slice.call(e.querySelectorAll("td")).filter((function(i){i.classList.contains(t)&&e.deleteCell(i.cellIndex)}))},this.drop=function(e){t.columnDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowRowDragAndDrop&&this.initializeDrag()}return e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.initializeDrag=function(){var e=this.parent;this.draggable=new sf.base.Draggable(e.getContent(),{dragTarget:".e-rowcelldrag, .e-rowdragdrop, .e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isPreventSelect:!1}),this.droppable=new sf.base.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.updateScrollPostion=function(e,t){var i=this,n=h(e).y,s=this.destinationGrid.getContent().getBoundingClientRect(),o=this.destinationGrid.getRowHeight()-15,r=this.destinationGrid.getContent();if(s.top+o>=n){var a=-this.destinationGrid.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){i.setScrollDown(r,a,!0)}),200)}else if(s.top+this.destinationGrid.getContent().clientHeight-o-20<=n){var l=this.destinationGrid.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){i.setScrollDown(r,l,!0)}),200)}},e.prototype.setScrollDown=function(e,t,i){e.scrollTop=e.scrollTop+t},e.prototype.moveDragRows=function(e,t,i){var n=this.parent.element.querySelector(".e-cloneproperties"),s=sf.base.closest(e.target,"tr");if(r(s,"e-gridcontent")&&(!this.parent.options.rowDropTarget&&r(n.parentElement,"e-grid").id===r(s,"e-grid").id||this.istargetGrid)){var o=s||this.startedRow;this.setBorder(o,e.event,t,i)}},e.prototype.setBorder=function(e,t,i,n){var s=this.parent.element;this.istargetGrid&&(s=this.destinationGrid.element);var o=this.parent.element.querySelector(".e-cloneproperties");if(this.parent.options.groupCount?this.removeBorder(e):(this.removeFirstRowBorder(e),this.removeLastRowBorder(e)),r(e,"e-gridcontent")&&(r(o.parentElement,"e-grid").id===r(e,"e-grid").id||this.istargetGrid)){sf.base.removeClass(s.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"),["e-dragborder"]);var a=[],l=parseInt(n.getAttribute("data-rowindex"),10);if(n&&0===l){if(this.parent.options.groupCount&&!n.classList.contains("e-groupcaption"))e=n,a=[].slice.call(e.querySelectorAll(".e-groupcaption,.e-summarycell,.e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"));else{var h=sf.base.createElement("div",{className:"e-firstrow-dragborder"}),d=this.destinationGrid.getHeaderContent();d.classList.add("e-grid-relative"),h.style.width=s.offsetWidth-this.getScrollWidth()+"px",d.querySelectorAll(".e-firstrow-dragborder").length||d.appendChild(h)}this.borderIndex=-1}else n&&parseInt(i.getAttribute("data-rowindex"),10)>l||this.parent.options.rowDropTarget?(this.parent.options.groupCount&&this.parent.options.enableVirtualization&&(l=this.parent.getDataRows().indexOf(n)),this.parent.options.groupCount&&!n.classList.contains("e-groupcaption")?(e=n,sf.base.isNullOrUndefined(e)||e.classList.contains("e-detailrow")||(a=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")))):(e=this.destinationGrid.getRowByIndex(l-1),sf.base.isNullOrUndefined(e)||e.classList.contains("e-detailrow")||(a=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))))):sf.base.isNullOrUndefined(e)||e.classList.contains("e-detailrow")||(a=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")));a.length>0&&(this.borderIndex=Number(r(a[0],"e-row").getAttribute("data-rowindex")),this.parent.options.groupCount||f(a,!0,"e-dragborder"))}},e.prototype.addorRemoveDashedBorder=function(e,t,i){if(!(i.length<=0)){var n,s,o=i[0],r=i[i.length-1];n=[].slice.call(o.querySelectorAll(".e-rowcell:not(.e-hide),.e-rowdragdrop,.e-detailrowcollapse")),s=[].slice.call(r.querySelectorAll(".e-rowcell:not(.e-hide),.e-rowdragdrop,.e-detailrowcollapse")),f(n,t,"e-dragtop"),f(s,t,"e-dragbottom"),this.updateDragClasses(t,i)}},e.prototype.updateDragClasses=function(e,t){for(var i=0;i<t.length;i++){var n=[];(n=[].slice.call(t[i].querySelectorAll(".e-rowcell:not(.e-hide),.e-rowdragdrop,.e-detailrowcollapse"))).length&&(e?(n[0].classList.add("e-dragleft"),n[n.length-1].classList.add("e-dragright")):(n[0].classList.remove("e-dragleft"),n[n.length-1].classList.remove("e-dragright")))}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent();return e.scrollWidth>e.offsetWidth?s():0},e.prototype.removeFirstRowBorder=function(e){this.destinationGrid.element.getElementsByClassName("e-firstrow-dragborder").length>0&&e&&0!==e.rowIndex&&this.destinationGrid.element.getElementsByClassName("e-firstrow-dragborder")[0].remove()},e.prototype.removeLastRowBorder=function(e){var t=e&&!sf.base.isNullOrUndefined(this.destinationGrid.getRowByIndex(this.destinationGrid.getRows().length-1))&&this.destinationGrid.getRowByIndex(this.destinationGrid.getRows().length-1).getAttribute("data-uid")!==e.getAttribute("data-uid");this.destinationGrid.element.getElementsByClassName("e-lastrow-dragborder").length>0&&e&&t&&this.destinationGrid.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()},e.prototype.removeBorder=function(e){(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),e=this.destinationGrid.getRows().filter((function(e){return e.querySelector("td.e-dragborder")}))[0])&&f([].slice.call(e.querySelectorAll(".e-dragborder")),!1,"e-dragborder")},e.prototype.getElementFromPosition=function(e,t){var i,n=h(t);return e.style.display="none",i=document.elementFromPoint(n.x,n.y),e.style.display="",i},e.prototype.getElementXPath=function(e){if(!e)return null;if(e.id)return"//[@id="+e.id+"]"+(""!=e.className?"."+e.className.toLowerCase():"");if("BODY"===e.tagName)return"/html/body";var t=[].slice.call(e.parentElement.childNodes).filter((function(t){return t.nodeName===e.nodeName})),i=t.indexOf(e);return this.getElementXPath(e.parentNode)+"/"+e.tagName.toLowerCase()+(""!=e.className?"."+e.className.toLowerCase():"")+(t.length>1?"["+(i+1)+"]":"")},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("data-rowindex"),10):0},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"!==e.droppedElement.getAttribute("action")){var i=sf.base.closest(e.target,"tr"),n=void 0;if("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id===t.element.id||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id!==t.element.id)return this.removeTargetGridBorder(this.parent),void this.removeTargetGridBorder(this.destinationGrid);if(e.droppedElement.parentElement.id!==t.element.id&&(n=e.droppedElement.parentElement.blazor__instance),n.element.id!==t.element.id&&n.options.rowDropTarget!==t.element.id)return;var s=this.getTargetIdx(i);isNaN(s)&&(s=0),t.options.allowPaging&&(s=s+t.options.currentPage*t.options.pageSize-t.options.pageSize);var o=this.getElementXPath(e.target),r=e.target.id,a=e.target.getBoundingClientRect();this.removeTargetGridBorder(this.parent),t.options.tValue==n.options.tValue?(t.dotNetRef.invokeMethodAsync("ReorderRows",0,s,"add",!1,o,r,a,n.dotNetRef,!1,!1,null,null),n.dotNetRef.invokeMethodAsync("ReorderRows",0,s,"delete",!1,o,r,a,null,!1,!1,null,null)):n.dotNetRef.invokeMethodAsync("ReorderRows",0,s,"delete",!1,o,r,a,null,!1,!0,null,null)}},e.prototype.removeTargetGridBorder=function(e){sf.base.isNullOrUndefined(e)||(e.element.getElementsByClassName("e-firstrow-dragborder").length>0&&e.element.getElementsByClassName("e-firstrow-dragborder")[0].remove(),e.element.getElementsByClassName("e-lastrow-dragborder").length>0&&e.element.getElementsByClassName("e-lastrow-dragborder")[0].remove(),sf.base.removeClass(e.element.querySelectorAll(".e-rowcell.e-dragborder,.e-detailrowcollapse.e-dragborder"),["e-dragborder"]))},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(sf.base.isNullOrUndefined(this.draggable)||this.draggable.destroy(),sf.base.isNullOrUndefined(this.droppable)||this.droppable.destroy())},e}(),L=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(this.parent.getContent().parentElement,"touchstart",this.mouseDownHandler,this)},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(this.parent.getContent().parentElement,"touchstart",this.mouseDownHandler)},e.prototype.mouseDownHandler=function(e){var t,i=e.target,n=this.parent,s=r(i,"e-grid");if(!(s&&s.id!==n.element.id||r(i,"e-headercontent")&&!this.parent.options.frozenRows)){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),r(i,"e-rowcell")&&!e.shiftKey&&!e.ctrlKey){if(!(n.options.cellSelectionMode.indexOf("Box")>-1||(n.options.allowDragSelection&&!n.options.enableAutoFill&&n.options.cellSelectionMode.indexOf("Flow"))>-1)||this.isRowType()||this.isSingleSel()?this.isCellDrag=!1:(this.isCellDrag=!0,t=!0),(n.options.allowRowDragAndDrop||n.options.allowDragSelection&&!n.options.enableAutoFill)&&!n.options.isEdit){if(!n.options.allowDragSelection&&(!this.isRowType()||sf.base.closest(i,"td").classList.contains("e-selectionbackground"))||this.isSingleSel())return n.options.allowDragSelection&&document.body.classList.add("e-disableuserselect"),void(this.isDragged=!1);t=!0,this.element=sf.base.createElement("div",{className:"e-griddragarea"}),this.element.style.left="0px",this.element.style.top="0px",this.element.style.zIndex="10",n.getContent().appendChild(this.element)}t&&(this.isAutoFillSel=!1,this.enableDrag(e,!0))}this.updateStartEndCells(),(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e),document.body.style.cursor="crosshair")}},e.prototype.mouseUpHandler=function(e){if(document.body.classList.remove("e-disableuserselect"),sf.base.isNullOrUndefined(this.element)||sf.base.isNullOrUndefined(this.element.parentNode)||sf.base.remove(this.element),this.isCellDrag||sf.base.isNullOrUndefined(this.prevStartDIndex)&&sf.base.isNullOrUndefined(this.prevEndIndex)?!this.parent.options.allowDragSelection||this.parent.options.enableAutoFill||!this.isDragged||this.isAutoFillSel||sf.base.isNullOrUndefined(this.startDragIndex)||sf.base.isNullOrUndefined(this.endDragIndex)||sf.base.isNullOrUndefined(this.endDragCellIndex)||(this.isDragged=!1,this.parent.dotNetRef.invokeMethodAsync("DragCellSelection",this.startDragIndex,this.startDragCellIndex,this.endDragIndex,this.endDragCellIndex,!1)):this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.prevStartDIndex,this.prevEndIndex,!1),this.isDragged=!1,document.body.style.cursor="default",this.prevStartDIndex=void 0,this.prevEndIndex=void 0,this.startDragIndex=void 0,this.startDragCellIndex=void 0,this.endDragIndex=void 0,this.endDragCellIndex=void 0,"Batch"==this.parent.options.editMode&&this.parent.options.enableAutoFill){if(!sf.base.isNullOrUndefined(this.endRowIndex)&&!sf.base.isNullOrUndefined(this.endColIndex)&&!this.isAutoFillSel&&this.isInitialSelect){this.parent.dotNetRef.invokeMethodAsync("ClearSelection");var t=this.updateAutofillPosition(this.endColIndex,this.endRowIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",t,"UpdateAutofillBox"),this.assignCells(),this.selectCellByRow(),this.isInitialSelect=!1}if(this.isAutoFillSel){var i=this;this.assignCells(),setTimeout((function(){i.selectCellByRow()}),10),this.expandAFBorder(e,!0);var n=this.createBorder(this.startRowIndex,this.startColIndex,this.endRowIndex,this.endColIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",n,"UpdateAutofillBorder");t=this.updateAutofillPosition(this.endColIndex,this.endRowIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",t,"UpdateAutofillBox")}}sf.base.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(this.parent.getContent(),"touchmove",this.mouseMoveHandler),this.parent.options.frozenRows&&(sf.base.EventHandler.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(this.parent.getHeaderContent(),"touchmove",this.mouseMoveHandler)),sf.base.EventHandler.remove(document.body,"mouseup",this.mouseUpHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(document.body,"touchend",this.mouseUpHandler)},e.prototype.enableDrag=function(e,t){var i=this.parent;if(t){var n=sf.base.closest(e.target,"tr");this.startDragIndex=parseInt(n.getAttribute("data-rowindex"),10),this.startDragCellIndex=parseInt(r(e.target,"e-rowcell").getAttribute("data-colindex"),10)}document.body.classList.add("e-disableuserselect");var s=i.element.getBoundingClientRect(),o=h(e);this.x=o.x-s.left,this.y=o.y-s.top,sf.base.EventHandler.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(i.getContent(),"touchmove",this.mouseMoveHandler,this),this.parent.options.frozenRows&&(sf.base.EventHandler.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(i.getHeaderContent(),"touchmove",this.mouseMoveHandler,this)),sf.base.EventHandler.add(document.body,"mouseup",this.mouseUpHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(document.body,"touchend",this.mouseUpHandler,this)},e.prototype.mouseMoveHandler=function(e){this.parent.options.allowDragSelection||"touchmove"==e.type||e.preventDefault();var t,i,n=this.parent.element.getBoundingClientRect(),s=this.x,o=this.y,a=h(e),l=a.x-n.left,d=a.y-n.top,c="touchmove"==e.type?e.touches[0].pageX:e.pageX,p="touchmove"==e.type?e.touches[0].pageY:e.pageY,u=p+2;if(i=sf.base.isNullOrUndefined(e.touches)||sf.base.isNullOrUndefined(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY))?sf.base.closest(e.target,"tr"):sf.base.closest(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY),"tr"),this.isDragged=!0,!this.isCellDrag||this.parent.options.allowDragSelection&&!this.parent.options.enableAutoFill&&this.isCellDrag){i||(i=sf.base.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,sf.base.isNullOrUndefined(e.touches)?e.clientY:e.touches[0].clientY),"tr")),s>l&&(t=l,l=s,s=t),o>d&&(t=d,d=o,o=t,u=p-2);for(var f=[".e-gridheader",".e-groupdroparea",".e-toolbar"],g=0,m=0;m<f.length;m++){var v=this.parent.element.querySelector(f[m]);v&&(g+=v.offsetHeight)}var b=this.parent.element.querySelector(".e-yscroll"),y=0;b&&(y+=b.scrollTop);var C=this.parent.element.querySelector(".e-content");this.element.style.left=s+C.scrollLeft+"px",this.element.style.top=o-g+y+"px",this.element.style.width=l-s+"px",this.element.style.height=d-o+"px"}if(i&&!e.ctrlKey&&!e.shiftKey){var w=parseInt(i.getAttribute("data-rowindex"),10);if(this.isCellDrag||!sf.base.isNullOrUndefined(this.prevStartDIndex)&&this.prevStartDIndex==this.startDragIndex&&this.prevEndIndex==w){if(this.parent.options.allowDragSelection&&!this.parent.options.enableAutoFill&&this.isCellDrag){var M;O=!1;(M=sf.base.isNullOrUndefined(e.touches)||sf.base.isNullOrUndefined(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY))?sf.base.closest(e.target,"td"):sf.base.closest(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY),"td"))||(M=document.elementFromPoint(c,u)),M&&(sf.base.isNullOrUndefined(this.prevStartDIndex)&&(O=!0),this.prevStartDIndex=this.startDragIndex,this.endDragIndex=w,this.endDragCellIndex=parseInt(M.getAttribute("data-colindex"),10),this.isAutoFillSel||(!O||isNaN(w)||isNaN(parseInt(M.getAttribute("data-colindex"),10))?this.performDragCellSelection(this.startDragIndex,this.startDragCellIndex,w,parseInt(M.getAttribute("data-colindex"),10)):this.parent.dotNetRef.invokeMethodAsync("DragCellSelection",this.startDragIndex,this.startDragCellIndex,w,parseInt(M.getAttribute("data-colindex"),10),!0)))}else if("Batch"==this.parent.options.editMode&&this.parent.options.enableAutoFill&&this.startCell){var S=r(e.target,"e-rowcell");if(S&&!S.classList.contains("e-editedbatchcell"))if(this.startAFCell=this.startCell,this.endAFCell=S,this.endCell=S,this.isAutoFillSel)this.expandAFBorder(e,!1);else{this.assignCells();var x=this.createBorder(this.startRowIndex,this.startColIndex,this.endRowIndex,this.endColIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",x,"UpdateAutofillBorder"),this.isInitialSelect=!0}}}else{var N=-1,O=!1,E=this.parent.getSelectedRowIndexes();sf.base.isNullOrUndefined(this.prevStartDIndex)?(N=-1,O=!0):(w>=this.prevStartDIndex&&E.indexOf(w)>=0||this.prevStartDIndex>w&&E.indexOf(this.startDragIndex)>=0)&&(N=this.prevEndIndex),this.prevStartDIndex=this.startDragIndex,this.prevEndIndex=w,O&&!isNaN(w)?this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.startDragIndex,w,!0):this.performDragSelection(this.startDragIndex,w,N)}}},e.prototype.performDragCellSelection=function(e,t,i,n){var s=e,o=i;e>i&&(s=i,o=e),this.selectCellsByRange(s,o,t,n)},e.prototype.selectCellsByRange=function(e,t,i,n){for(var s,o,r=this.parent.getHeaderContent().querySelectorAll("tr.e-row[data-uid]"),a=this.parent.getContent().querySelectorAll("tr.e-row[data-uid]"),l=Array.from(r).concat(Array.from(a)),h=0;h<l.length;h++){var d=[].slice.call(l[h].querySelectorAll(".e-rowcell"));l[h].removeAttribute("aria-selected"),f.apply(void 0,[d,!1].concat(["e-aria-selected","e-active"]))}var c=[];if(e>t){var p=e;e=t,t=p}if(i>n){var u=i;i=n,n=u}for(h=e;h<=t;h++){this.parent.options.cellSelectionMode.indexOf("Box")<0?(s=h===e?i:0,o=h===t?n:this.getLastColIndex(h)):(s=i,o=n);for(var g=s<o?s:o,m=s>o?s:o;g<=m;g++)c.push(this.getCellIndex(h,g));f.apply(void 0,[c,!0].concat(["e-aria-selected","e-active"]))}},e.prototype.getCellIndex=function(e,t){var i=this.parent.getHeaderContent().querySelectorAll("tr.e-row[data-uid]"),n=this.parent.getContent().querySelectorAll("tr.e-row[data-uid]"),s=Array.from(i).concat(Array.from(n));return s[e]&&s[e].querySelectorAll(".e-rowcell")[t]},e.prototype.getLastColIndex=function(e){var t=this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute("data-colindex"),10)},e.prototype.updateAutofillPosition=function(e,t,i){void 0===i&&(i=!1);var n=this.parent.getRowByIndex(t).querySelector('[data-colindex="'+e+'"]'),s=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),o="",r="",a="";if(s&&!i&&(n=s[s.length-1]),n&&n.offsetParent){var l=n.getBoundingClientRect(),h=n.offsetParent.getBoundingClientRect(),d=this.isLastCell(n)?4:0,c=this.isLastRow(n)?3:0;this.parent.options.enableRtl?r=h.right-l.right+l.width-4-d+"px":o=l.left-h.left+l.width-4-d+"px",a=l.top-h.top+l.height-5-c+"px"}return{Left:o,Right:r,Top:a}},e.prototype.createBorder=function(e,t,i,n,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=!1);var o,r,a,l=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),h=this.parent.getRowByIndex(e),d=h.querySelector('[data-colindex="'+t+'"]'),c=[].slice.call(d.parentElement.querySelectorAll('[data-colindex="'+t+'"]')),p="",u="",f="";null!=i&&null!=n?(o=this.parent.getRowByIndex(i).querySelector('[data-colindex="'+n+'"]'),r=[].slice.call(o.parentElement.querySelectorAll('[data-colindex="'+n+'"]'))):(h,o=d,r=c),l&&!s&&(c=[].slice.call(l[0].parentElement.querySelectorAll('[data-colindex="'+(l[0].cellIndex-this.parent.getIndentCount())+'"]')),r=[].slice.call(l[l.length-1].parentElement.querySelectorAll('[data-colindex="'+(l[l.length-1].cellIndex-this.parent.getIndentCount())+'"]'))),this.startCell||(this.startCell=c[0]),this.endCells=r[0];var g=c[0],m=r[0],v=g.getBoundingClientRect(),b=m.getBoundingClientRect(),y=g.offsetParent.getBoundingClientRect(),C=this.isLastRow(m)?2:0,w=this.parent.options.frozenRows&&this.isFirstRow(g)?1.5:0,M=this.parent.options.frozenColumns&&this.isFirstCell(g)?1:0;return this.parent.options.enableRtl?(p=y.right-v.right-M+"px",f=v.right-b.left+M+1+"px"):(u=v.left-y.left-M+"px",f=b.right-v.left+M+1+"px"),a=v.top-y.top-w+"px","2px",{Right:p,Width:f,BorderWidth:"2px",Left:u,Height:b.top-v.top>0?b.top-y.top+b.height+1-(v.top-y.top)-C+w+"px":b.height+w-C+1+"px",Top:a}},e.prototype.expandAFBorder=function(e,t){for(var i=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),n=parseInt(r(this.startCell,"e-row").getAttribute("data-rowindex"),10),s=parseInt(this.startCell.getAttribute("data-colindex"),10),o=parseInt(r(this.endCell,"e-row").getAttribute("data-rowindex"),10),a=parseInt(this.endCell.getAttribute("data-colindex"),10),l=parseInt(r(i[i.length-1],"e-row").getAttribute("data-rowindex"),10)-parseInt(r(i[0],"e-row").getAttribute("data-rowindex"),10),h=parseInt(r(i[0],"e-row").getAttribute("data-rowindex"),10),d=this.parent.getRowByIndex(h),c=0,p=0,u=d.cells.length;p<u;p++)d.cells[p].classList.contains("e-cellselectionbackground")&&c++;switch(c=(c-=1)>=0?c:0,!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!r(e.target,"e-rowcell"):this.startAFCell=this.parent.getCellFromIndex(n,s),this.endAFCell=this.parent.getCellFromIndex(n+l,s+c),this.drawAFBorders();break;case s+c<a&&a-s-c+1>o-n-l&&a-s-c+1>n-o:if(this.endAFCell=this.parent.getCellFromIndex(n+l,a),o=parseInt(r(this.endAFCell,"e-row").getAttribute("data-rowindex"),10),a=parseInt(this.endAFCell.getAttribute("data-colindex"),10),t){var f=parseInt(this.endCells.getAttribute("data-colindex"),10);for(p=n;p<=o;p++)for(var g=this.getAutoFillCells(p,s),m=0,v=f+1;v<=a;v++)m>c&&(m=0),this.updateValue(p,v,g[m]),m++}else this.drawAFBorders();break;case s>a&&s-a+1>o-n-l&&s-a+1>n-o:if(this.startAFCell=this.parent.getCellFromIndex(n,a),this.endAFCell=this.endCells,t)for(p=n;p<=n+l;p++){(g=this.getAutoFillCells(p,s)).reverse();for(m=0,v=this.startCellIndex-1;v>=a;v--)m>c&&(m=0),this.updateValue(p,v,g[m]),m++}else this.drawAFBorders();break;case n>o:if(this.startAFCell=this.parent.getCellFromIndex(o,s),this.endAFCell=this.endCells,t){var b=y=parseInt(this.endCells.parentElement.getAttribute("data-rowindex"),10);for(p=n-1;p>=o;p--){b===this.startIndex-1&&(b=y);g=this.getAutoFillCells(b,s),m=0;b--;for(v=this.startCellIndex;v<=this.startCellIndex+c;v++)this.updateValue(p,v,g[m]),m++}}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(o,s+c),t){var y=parseInt(this.endCells.parentElement.getAttribute("data-rowindex"),10);for(b=this.startIndex,p=y+1;p<=o;p++){b===y+1&&(b=this.startIndex);g=this.getAutoFillCells(b,s);b++;m=0;for(var C=this.startCellIndex;C<=this.startCellIndex+c;C++)this.updateValue(p,C,g[m]),m++}}else this.drawAFBorders()}},e.prototype.drawAFBorders=function(){if(this.startCell){var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,n=t.top-e.top>=0&&(r(this.startAFCell,"e-movablecontent")||r(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,s=(r(this.startAFCell,"e-movablecontent")||r(this.startAFCell,"e-movableheader"))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(r(this.endAFCell,"e-movablecontent")||r(this.endAFCell,"e-frozencontent"))?2:1,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),h=this.startAFCell.offsetParent.parentElement.scrollTop,d=this.startAFCell.offsetParent.parentElement.scrollLeft,c=h-this.startAFCell.offsetTop,p=d-this.startAFCell.offsetLeft;c=c>0?Math.floor(c)-1:0,p=p>0?p:0;var u,f,g,m=e.left-l.left,v="",b="",y="",C="",w="",M="";if(this.parent.options.enableRtl){var S=r(this.startAFCell,"e-movablecontent")||r(this.startAFCell,"e-movableheader")?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;b=l.right-t.right-2+t.width+"px",C=l.right-e.right-s+S-1+"px",w=t.left-l.left-.5+"px",M=parseInt(b,10)-parseInt(C,10)-s+1+"px"}else v=m-s+p-1+d+"px",y=t.left-l.left-2+t.width+d+"px",w=m+p-.5+d+"px",M=parseInt(y,10)-parseInt(v,10)-s+1+"px";g=f=e.top-a.top-n+"px";var x={BorderLeftAutofillLeft:v,BorderLeftAutofillTop:f,BorderLeftAutofillHeight:u=t.top-e.top>0?t.top-a.top+t.height+1-(e.top-a.top)+n-o-c+"px":t.height+n-o-c+"px",BorderLeftAutofillRight:b,BorderRightAutofillLeft:y,BorderRightAutofillHeight:parseInt(u,10)+"px",BorderRightAutofillRight:C,BorderRightAutofillTop:g,BorderTopAutofillLeft:w,BorderTopAutofillTop:g,BorderTopAutofillWidth:M,BorderBottomAutofillLeft:w,BorderBottomAutofillTop:parseFloat(f)+parseFloat(u)-i-1+"px",BorderBottomAutofillWidth:M};this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",x,"UpdateAutofillPosition")}},e.prototype.updateValue=function(e,t,i){var n=this.parent.getColumnByIndex(t),s=parseInt(r(i,"e-row").getAttribute("data-rowindex"),10),o=this.parent.getColumnByIndex(i.cellIndex-this.parent.getIndentCount()),a=i.innerText;this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillCell",e,n.field,o.field,s,a)},e.prototype.getAutoFillCells=function(e,t){return[].slice.call(this.parent.getDataRows()[e].querySelectorAll(".e-cellselectionbackground"))},e.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("data-rowindex"),10),this.startCellIndex=parseInt(r(this.startCell,"e-rowcell").getAttribute("data-colindex"),10))},e.prototype.assignCells=function(){this.startRowIndex=parseInt(this.startAFCell.parentElement.getAttribute("data-rowindex"),10),this.endRowIndex=parseInt(this.endAFCell.parentElement.getAttribute("data-rowindex"),10),this.startColIndex=parseInt(this.startAFCell.getAttribute("data-colindex"),10),this.endColIndex=parseInt(this.endAFCell.getAttribute("data-colindex"),10),this.startRowIndex>this.endRowIndex&&(this.startRowIndex=this.endRowIndex,this.endRowIndex=parseInt(this.startAFCell.parentElement.getAttribute("data-rowindex"),10)),this.endColIndex<this.startColIndex&&(this.startColIndex=this.endColIndex,this.endColIndex=parseInt(this.startAFCell.getAttribute("data-colindex"),10))},e.prototype.selectCellByRow=function(){for(var e=this.startRowIndex;e<=this.endRowIndex;e++)for(var t=this.startColIndex;t<=this.endColIndex;t++)this.parent.dotNetRef.invokeMethodAsync("SelectCellByRow",e,t)},e.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]==e},e.prototype.isLastRow=function(e){var t=[].slice.call(sf.base.closest(e,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return t[t.length-1]==e.parentElement},e.prototype.isFirstRow=function(e){var t=[].slice.call(sf.base.closest(e,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]},e.prototype.isFirstCell=function(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e},e.prototype.performDragSelection=function(e,t,i){var n=e,s=t;e>t&&(n=t,s=e),-1!=i&&this.clearSelectionExceptDragIndexes(n,s),this.selectRangeOfRows(n,s)},e.prototype.selectRangeOfRows=function(e,t){for(var i=this.parent.getHeaderContent().querySelectorAll("tr.e-row[data-uid]"),n=this.parent.getContent().querySelectorAll("tr.e-row[data-uid]"),s=Array.from(i).concat(Array.from(n)),o=function(e){var t=r.parent.options.enableVirtualization?s.filter((function(t){return parseInt(t.getAttribute("data-rowindex"),10)==e}))[0]:s[e];r.selectRow(t,!1)},r=this,a=e;a<=t;a++)o(a)},e.prototype.selectRow=function(e,t){if(!sf.base.isNullOrUndefined(e)){e.setAttribute("aria-selected","true");var i=[].slice.call(e.querySelectorAll(".e-rowcell"));f.apply(void 0,[i,!0].concat(["e-aria-selected","e-active"])),t||i[0].classList.contains("e-gridchkbox")&&i[0].querySelector(".e-frame").classList.replace("e-uncheck","e-check")}},e.prototype.clearSelectionByRow=function(e){var t=[].slice.call(e.querySelectorAll(".e-rowcell"));e.removeAttribute("aria-selected"),f.apply(void 0,[t,!1].concat(["e-aria-selected","e-active"])),t[0].classList.contains("e-gridchkbox")&&t[0].querySelector(".e-frame").classList.replace("e-check","e-uncheck")},e.prototype.clearSelectionExceptDragIndexes=function(e,t){for(var i=this.parent.getRows(),n=0;n<i.length;n++){var s=this.parent.options.enableVirtualization?parseInt(i[n].getAttribute("data-rowindex"),10):n;if(s<e||s>t){var o=this.parent.options.enableVirtualization?i.filter((function(e){return parseInt(e.getAttribute("data-rowindex"),10)==s}))[0]:i[s];this.clearSelectionByRow(o)}}},e.prototype.isRowType=function(){return"Row"===this.parent.options.selectionMode||"Both"===this.parent.options.selectionMode},e.prototype.isSingleSel=function(){return"Single"===this.parent.options.selectionType},e}(),B=function(){function e(e,t){var i=this;this.fromWheel=!1,this.touchMove=!1,this.options={},this.sentinelInfo={up:{check:function(e,t){var n=e.top-i.containerRect.top;return t.entered=n>=0,n+i.options.pageHeight/2>=0},axis:"Y"},down:{check:function(e,t){i.options.container.clientHeight;var n=e.bottom;return t.entered=e.bottom<=i.containerRect.bottom,n-i.containerRect.top-i.options.pageHeight/2<=i.options.pageHeight/2},axis:"Y"},right:{check:function(e,t){var n=e.right;return t.entered=n<i.containerRect.right,n-i.containerRect.width<=i.containerRect.right},axis:"X"},left:{check:function(e,t){var n=e.left;return t.entered=n>0,n+i.containerRect.width>=i.containerRect.left},axis:"X"}},this.element=e,this.options=t}return e.prototype.observe=function(e,t){var i=this;this.options.virtualScrollHandler=this.virtualScrollHandler(e,t),this.containerRect=this.options.container.getBoundingClientRect(),sf.base.EventHandler.add(this.options.container,"wheel",(function(){return i.fromWheel=!0}),this),sf.base.EventHandler.add(this.options.container,"scroll",this.options.virtualScrollHandler,this),sf.base.isNullOrUndefined(r(this.element,"e-gridcontent"))||sf.base.isNullOrUndefined(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"))||sf.base.EventHandler.add(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"),"scroll",this.options.virtualScrollHandler,this)},e.prototype.disconnect=function(){var e=this;this.containerRect=this.options.container.getBoundingClientRect(),sf.base.EventHandler.remove(this.options.container,"wheel",(function(){return e.fromWheel=!0})),sf.base.EventHandler.remove(this.options.container,"scroll",this.options.virtualScrollHandler),sf.base.isNullOrUndefined(r(this.element,"e-gridcontent"))||sf.base.isNullOrUndefined(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"))||sf.base.EventHandler.remove(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"),"scroll",this.options.virtualScrollHandler)},e.prototype.check=function(e){var t=this.sentinelInfo[e];return t.check(this.element.getBoundingClientRect(),t)},e.prototype.virtualScrollHandler=function(e,t){var i=this,n="chrome"===sf.base.Browser.info.name?200:100,s=0,o=0,r=sf.base.debounce(e,n),a=sf.base.debounce(e,50);return function(e){var n=e.target.scrollTop,l=e.target.scrollLeft,h=s<n?"down":"up",d=e.target.classList.contains("e-movablescrollbar"),c=!0,p=i.options.container.querySelectorAll(".e-masked-row").length>0;h=o===l?h:o<l?"right":"left",i.PreventAdjustTable=d||s==n&&l==o?"horizontal":h,d&&(h=o<l?"right":"left"),"down"==h?c=!!(p&&i.options.totalItems<100)||n-s<30:"up"==h?c=s-n<30:"right"==h?c=l-o<20:"left"==h&&(c=o-l<20),d||(s=n),o=l;var u=i.sentinelInfo[h];if(-1!==i.options.axes.indexOf(u.axis)){var f=i.check(h),g=i.options.container.querySelectorAll(".e-masked-row").length&&"X"!=u.axis,m=i.options.overscanCount>0&&"X"!=u.axis;if((u.entered||(sf.base.isNullOrUndefined(i.blazorActiveKey)||""==i.blazorActiveKey)&&!i.fromWheel&&g)&&t(i.element,u,c,h,{top:n,left:l},i.fromWheel,f),f||g||m){var v=r;"X"===u.axis&&(v=a),v({direction:h,sentinel:u,offset:{top:n,left:l},focusElement:document.activeElement,isWheelScroll:i.fromWheel})}g||(i.fromWheel=!1)}}},e.prototype.setPageHeight=function(e){this.options.pageHeight=e},e}(),R=function(){function e(e){var t=this;this.prevHeight=0,this.preStartIndex=0,this.preventEvent=!1,this.actions=["filtering","clearfiltering","searching","grouping","ungrouping","Filtering","ClearFiltering","Searching","Grouping","Ungrouping","UnGrouping"],this.offsets={},this.tmpOffsets={},this.offsetKeys=[],this.currentInfo={},this.blazorActiveKey="",this.nextRowToNavigate=0,this.startIndex=0,this.selectedCellNavigation=-1,this.selectedRowNavigation=-1,this.selectedRowIndex=-1,this.focusColumnIndex=-1,this.isScrollIntoview=!1,this.scrollInfo={},this.bindScrollEvent=function(){t.observer.observe((function(e){(t.parent.options.enableVirtualization||t.parent.options.enableColumnVirtualization)&&t.scrollListener(e)}),t.onEntered());var e=t.parent;if(e.options.enablePersistence&&e.scrollPosition){t.content.scrollTop=e.scrollPosition.top;var i={direction:"down",sentinel:t.observer.sentinelInfo.down,offset:e.scrollPosition,focusElement:e.element,isWheelScroll:t.observer.options.isWheelScroll};t.scrollListener(i),e.options.enableColumnVirtualization&&(t.content.scrollLeft=e.scrollPosition.left)}},this.parent=e,this.contentPanel=this.parent.element.querySelector(".e-gridcontent"),this.vHelper=new F(e),this.virtualEle=new H(e),this.addEventListener()}return e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getTable=function(){return this.contentPanel.querySelector(".e-table")},e.prototype.renderTable=function(){this.header=this.parent.virtualHeaderModule,this.virtualEle.table=this.getTable(),this.virtualEle.content=this.content=this.getPanel().querySelector(".e-content"),this.virtualEle.renderWrapper(Number(this.parent.options.height)),this.virtualEle.renderPlaceHolder();var e={container:this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:!0,axes:this.parent.options.enableColumnVirtualization?["X","Y"]:["Y"],totalItems:this.parent.options.totalItemCount,overscanCount:this.parent.options.overscanCount};this.observer=new B(this.virtualEle.wrapper,e),this.parent.dotNetRef.invokeMethodAsync("SetRowHeight",this.parent.getRowHeight())},e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this)},e.prototype.removeEventListener=function(){sf.base.isNullOrUndefined(this.observer)||this.observer.disconnect(),this.getPanel().firstElementChild.scrollTop=0,this.getPanel().firstElementChild.scrollLeft=0,sf.base.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler)},e.prototype.handleScrollEnd=function(e,t,i){if(!i){var n=this.virtualEle.extractTranslateY(this.virtualEle.wrapper.style.transform).replace("px","");this.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",e,t,this.selectedRowIndex,this.isScrollIntoview,this.focusColumnIndex,n)}},e.prototype.ensurePageSize=function(){var e=this.parent.getRowHeight(),t=2*~~((this.parent.options.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height)/e),i=this.parent.options.pageSize+this.parent.options.overscanCount<t?t:this.parent.options.pageSize;this.parent.dotNetRef.invokeMethodAsync("SetPageSizeAndCIndex",{pageSize:i,startColumnIndex:this.startColIndex,endColumnIndex:this.endColIndex,VTableWidth:this.getColumnOffset(this.endColIndex)-this.getColumnOffset(this.startColIndex-1)+""}),this.parent.options.pageSize=i,this.observer.options.pageHeight=2*this.getBlockHeight()},e.prototype.scrollListener=function(e){var t=this;if(this.parent.options.enablePersistence&&(this.parent.scrollPosition=e.offset),this.preventEvent)this.preventEvent=!1;else{var i=e.sentinel,n=this.preStartIndex,s=this.parent.getColumnIndexesInView(),o=this.currentInfo=this.getInfoFromView(e.direction,i,e.offset),r=this.parent.options.enableColumnVirtualization&&this.parent.options.enableRtl?-1*this.getColumnOffset(o.columnIndexes[0]-1,!0):this.getColumnOffset(o.columnIndexes[0]-1,!0);if(this.parent.options.enableColumnVirtualization&&JSON.stringify(s)!==JSON.stringify(o.columnIndexes)){for(var a=this.parent.options.virtualizedColumns,l=0;l<a.length;l++)a[l].autoFit&&this.parent.resizeModule.autoFitColumns(a[l].field);var h=this.parent.options.enableColumnVirtualization&&this.parent.options.enableRtl?-1*this.getColumnOffset(this.startColIndex-1,!0):this.getColumnOffset(this.startColIndex-1,!0),d=this.parent.options.enableColumnVirtualization&&this.parent.options.enableRtl?-1*this.getColumnOffset(this.endColIndex,!0)+h+"":this.getColumnOffset(this.endColIndex,!0)-h+"",c=sf.base.isNullOrUndefined(o.endIndex)?0:(o.endIndex-this.parent.options.pageSize)*(this.parent.options.rowHeight?this.parent.options.rowHeight:this.parent.getRowHeight());this.movableTranslateY=sf.base.isNullOrUndefined(this.movableTranslateY)?0:this.movableTranslateY;var p={requestType:"virtualscroll",isHeaderNavigated:t.isHeaderNavigated,selectedRowNavigation:t.selectedRowNavigation,selectedCellNavigation:t.selectedCellNavigation,isScrollByFocus:t.isScrollByFocus,startColumnIndex:o.columnIndexes[0],endColumnIndex:o.columnIndexes[o.columnIndexes.length-1],axis:"X",VTablewidth:d,translateX:r,translateY:t.parent.options.enableVirtualMaskRow&&t.parent.options.enableVirtualization?t.parent.options.frozenColumns?t.movableTranslateY:t.translateMaskY+t.movableTranslateY:0};clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout((function(){t.handleScrollEnd(p,c,e.isWheelScroll)}),100),setTimeout((function(){t.parent.dotNetRef.invokeMethodAsync("RemoveValidationPopup"),e.isWheelScroll&&t.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",p,c,t.selectedRowIndex,t.isScrollIntoview,t.focusColumnIndex,t.virtualEle.extractTranslateY(t.virtualEle.wrapper.style.transform).replace("px","")),t.isScrollByFocus=!1}),0)}else"left"!==this.currentInfo.direction&&"right"!==this.currentInfo.direction||!this.parent.options.enableVirtualMaskRow||this.virtualEle.adjustTable(r,this.translateMaskY);if(this.parent.setColumnIndexesInView(this.parent.options.enableColumnVirtualization?o.columnIndexes:[]),this.nextRowToNavigate=""!=this.blazorActiveKey?this.nextRowToNavigate:0,this.preStartIndex!==n&&this.parent.options.enableVirtualization){this.parent.options.currentPage=o.currentPage;var u=t.isScrollIntoview;setTimeout((function(){t.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",{requestType:"virtualscroll",nextRowToNavigate:t.nextRowToNavigate,virtualStartIndex:o.endIndex-t.parent.options.pageSize,virtualEndIndex:o.endIndex,axis:"Y",RHeight:t.parent.getRowHeight()},(o.endIndex-t.parent.options.pageSize)*(t.parent.options.rowHeight?t.parent.options.rowHeight:t.parent.getRowHeight()),t.selectedRowIndex,u,t.focusColumnIndex,t.virtualEle.extractTranslateY(t.virtualEle.wrapper.style.transform).replace("px",""))}),0),t.isScrollIntoview=!1}else t.selectedRowIndex>=0&&this.preStartIndex===n&&t.isScrollIntoview&&("up"===this.currentInfo.direction||"down"===this.currentInfo.direction)&&(t.parent.dotNetRef.invokeMethodAsync("SelectRow",t.selectedRowIndex,t.isScrollIntoview,t.focusColumnIndex),t.selectedRowIndex=-1,t.isScrollIntoview=!1);this.prevInfo=o,this.blazorActiveKey=""}},e.prototype.setColVTableWidthAndTranslate=function(e){if(this.parent.options.enableColumnVirtualization&&this.prevInfo&&JSON.stringify(this.currentInfo.columnIndexes)!==JSON.stringify(this.prevInfo.columnIndexes)||e&&e.refresh){var t=this.getColumnOffset(this.startColIndex-1),i=this.getColumnOffset(this.endColIndex)-t+"";if(0===this.parent.options.frozenColumns&&(this.header.virtualEle.setWrapperWidth(i),this.virtualEle.setWrapperWidth(i),this.parent.getContentTable().parentElement.style.width=i+"px"),this.header.virtualEle.adjustTable(this.movableTranslateX,0),this.parent.options.enableColumnVirtualization&&"X"===e.axis)if(this.parent.options.enableVirtualization){var n=this.virtualEle.extractTranslateY(this.virtualEle.wrapper.style.transform);this.virtualEle.adjustTable(this.movableTranslateX,parseInt(n.replace("px","")))}else this.virtualEle.adjustTable(this.movableTranslateX,0)}},e.prototype.refreshOnDataChange=function(){this.getPanel().firstElementChild.scrollTop=0,this.getPanel().firstElementChild.scrollLeft=0,this.parent.options.enableColumnVirtualization&&this.header.virtualEle.adjustTable(0,0),this.virtualEle.adjustTable(0,0),this.refreshOffsets(),this.refreshVirtualElement()},e.prototype.keyDownHandler=function(e){this.blazorActiveKey="ArrowDown"===e.key||"ArrowUp"===e.key?e.key:"",sf.base.isNullOrUndefined(this.observer)||(this.observer.blazorActiveKey=this.blazorActiveKey)},e.prototype.focusCell=function(e,t,i){var n=this.parent.getRowHeight(),o=this.parent.getContent(),a=e.getBoundingClientRect(),l=o.getBoundingClientRect();"MoveRightCell"==t?-1==this.selectedCellNavigation?this.selectedCellNavigation=Number(e.getAttribute("data-colindex")):this.selectedCellNavigation+1==Number(e.getAttribute("data-colindex"))&&this.selectedCellNavigation++:"MoveLeftCell"==t&&(-1==this.selectedCellNavigation?this.selectedCellNavigation=Number(e.getAttribute("data-colindex")):this.selectedCellNavigation-1==Number(e.getAttribute("data-colindex"))&&this.selectedCellNavigation--),"MoveDownCell"==t||"MoveUpCell"==t?e.focus({preventScroll:!0}):"MoveRightCell"!=t&&"MoveLeftCell"!=t||(sf.base.isNullOrUndefined(r(e,"e-row"))?this.isHeaderNavigated=!0:(this.isHeaderNavigated=!1,this.selectedRowNavigation=Number(r(e,"e-row").getAttribute("data-rowindex"))),this.isScrollByFocus=!0,e.focus()),"MoveDownCell"==t&&a.bottom>l.top+l.height-s()?o.scrollTop=o.scrollTop+n:"MoveUpCell"==t&&a.bottom<l.top+n&&(this.isScrollFromFocus=!0,o.scrollTop=o.scrollTop-n),("AltW"==i||"CtrlHome"==i||"CtrlEnd"==i||"Home"==i||"End"==i||null==i&&null==t)&&e.focus()},e.prototype.getInfoFromView=function(e,t,i){var n={direction:e,sentinelInfo:t,offsets:i,startIndex:this.preStartIndex,endIndex:this.preEndIndex},s=this.parent.options.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height;n.page=this.getPageFromTop(i.top+s,n),n.blockIndexes=this.vHelper.getBlockIndexes(n.page),n.columnIndexes="X"===t.axis?this.vHelper.getColumnIndexes():this.parent.getColumnIndexesInView();var o=this.parent.getRowHeight(),r=i.top/o,a=s/o,l=r+a,h=this.parent.options.pageSize/4,d=this.parent.options.groupCount?this.getVisibleGroupedRowCount():this.count;if("down"!==n.direction||this.isScrollFromFocus){if("up"===n.direction&&(n.startIndex&&n.endIndex||this.parent.options.enableVirtualMaskRow)){var c=Math.round((n.startIndex*o+h*o)/o);if(this.parent.options.enableVirtualMaskRow)if(a=Math.ceil(a),r<c||Math.ceil(r)>this.preStartIndex){var p=Math.ceil(r)>0?Math.ceil(r):0,u=d-this.parent.options.pageSize-this.parent.options.pageSize/2,f=d-this.parent.options.pageSize;n.startIndex=r<d&&u<=r&&!(f<=l&&l<=d)?p>0?p-this.parent.options.pageSize/2:0:p>0?p+this.parent.options.pageSize>d?d-this.parent.options.pageSize:p:0,n.startIndex=n.startIndex>0?n.startIndex-1:n.startIndex;v=n.startIndex+this.parent.options.pageSize;n.endIndex=n.startIndex<=0?this.parent.options.pageSize:v<d?v:d,n.startIndex=n.startIndex<0||this.parent.options.totalItemCount<=this.parent.options.pageSize?0:n.startIndex,n.currentPage=Math.ceil(n.startIndex/this.parent.options.pageSize),this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=n.startIndex,this.preEndIndex=n.endIndex}else this.isScrollFromFocus=!1,this.preStartIndex=this.preStartIndex,this.preEndIndex=this.preEndIndex;if(r<c&&!this.parent.options.enableVirtualMaskRow){var g=h>a?h:a+a/4;v=Math.round(r+g);n.endIndex=v<d?v:d;m=n.endIndex-this.parent.options.pageSize;n.startIndex=m>0?m:0,n.endIndex=m<0?this.parent.options.pageSize:n.endIndex,n.currentPage=Math.ceil(n.startIndex/this.parent.options.pageSize)}b=this.parent.getSelectedRowIndexes(!0);this.nextRowToNavigate=b.length>0?b[0]+1:-1}}else{var m=Math.round(l)-Math.round(h);if(this.parent.options.enableVirtualMaskRow)if(a=Math.ceil(a)-1,Math.ceil(r)-this.preStartIndex>=a){n.startIndex=Math.ceil(r)>=0?Math.ceil(r):0;var v=n.startIndex+this.parent.options.pageSize;n.endIndex=v<d?v:d,n.startIndex=v>=d?n.endIndex-this.parent.options.pageSize<0?0:n.endIndex-this.parent.options.pageSize:n.startIndex,n.currentPage=Math.ceil(n.endIndex/this.parent.options.pageSize),this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=n.startIndex,this.preEndIndex=n.endIndex}else this.isScrollFromFocus=!1,this.preStartIndex=this.preStartIndex,this.preEndIndex=this.preEndIndex;if(!this.parent.options.enableVirtualMaskRow&&sf.base.isNullOrUndefined(n.startIndex)||l>n.startIndex+Math.round(this.parent.options.pageSize/2+h)&&n.endIndex!==d){n.startIndex=m>=0?Math.round(m):0,n.startIndex=n.startIndex>r?Math.floor(r):n.startIndex;var v=n.startIndex+this.parent.options.pageSize;n.startIndex=v<l?Math.ceil(l)-this.parent.options.pageSize:n.startIndex,n.endIndex=v<d?v:d,n.startIndex=v>=d?n.endIndex-this.parent.options.pageSize>0?n.endIndex-this.parent.options.pageSize:0:n.startIndex,n.currentPage=Math.ceil(n.endIndex/this.parent.options.pageSize)}var b=this.parent.getSelectedRowIndexes(!0);this.nextRowToNavigate=b.length>0?b[0]-1:-1}return this.parent.options.enableVirtualMaskRow||(this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=n.startIndex,this.preEndIndex=n.endIndex),n},e.prototype.onDataReady=function(){var e=this,t=this;if(this.observer.options.totalItems=this.parent.options.totalItemCount,this.bindScrollEvent(),this.count=this.parent.options.totalItemCount,this.maxPage=Math.ceil(this.count/this.parent.options.pageSize),["Refresh","Filtering","ClearFiltering","Searching","Grouping","UnGrouping","Reorder","RowDragAndDrop","refresh","filtering","clearfiltering","searching","grouping","ungrouping","reorder","GroupExpandCollapse","InfiniteScrolling",null].some((function(t){return e.parent.options.requestType===t}))&&this.refreshOffsets(),this.setVirtualHeight(),this.parent.scrollModule.refresh(),this.resetScrollPosition(this.parent.options.requestType),this.setColVTableWidthAndTranslate(),(this.parent.options.enableVirtualMaskRow&&this.parent.options.enableVirtualization||this.parent.options.enableLazyLoading)&&"GroupExpandCollapse"!=this.parent.options.requestType){var i=this.parent.options.rowHeight,n=(this.currentInfo.endIndex-this.parent.options.pageSize)*(i||this.parent.getRowHeight());n="NaN"==n.toString()?0:n,this.parent.options.overscanCount>0&&this.currentInfo.startIndex>this.parent.options.overscanCount&&this.currentInfo.endIndex!=this.parent.options.totalItemCount?n-=(this.parent.options.pageSize+this.parent.options.overscanCount)*(i||this.parent.getRowHeight()):n-=this.parent.options.pageSize*(i||this.parent.getRowHeight()),0==this.count&&(n=0),sf.base.isNullOrUndefined(this.currentInfo.startIndex)||0==this.currentInfo.startIndex||sf.base.isNullOrUndefined(this.currentInfo.endIndex)||this.currentInfo.endIndex===this.parent.options.totalItemCount||(n-=20),setTimeout((function(){t.translateMaskY=n,t.translateMaskX=sf.base.isNullOrUndefined(t.translateMaskX)?0:t.translateMaskX,0==t.parent.options.frozenColumns?t.virtualEle.wrapper.style.transform="translate("+t.translateMaskX+"px,"+n+"px)":t.virtualEle.wrapper.style.transform="translate(0px,"+n+"px)"}),0)}this.prevInfo=this.prevInfo?this.prevInfo:this.vHelper.getData()},e.prototype.setVirtualHeight=function(){var e=this.parent.options.columns.filter((function(e){return e.visible})),t=this.parent.options.enableColumnVirtualization?this.getColumnOffset(e.length-1)+"px":"100%",i=0,n=this.parent.options.totalItemCount*this.parent.getRowHeight(),s=this.parent.options.pageSize*this.parent.getRowHeight();this.parent.options.enableVirtualMaskRow?i=this.parent.options.frozenColumns&&this.parent.options.enableColumnVirtualization?n-2*s:n:this.parent.options.groupCount?i=this.parent.options.visibleGroupedRowsCount*this.parent.getRowHeight():this.parent.options.enableVirtualization&&(i=this.parent.options.frozenColumns&&this.parent.options.enableColumnVirtualization?n-s:n),this.virtualEle.setVirtualHeight(i,t),this.parent.options.enableColumnVirtualization&&this.header.virtualEle.setVirtualHeight(1,t)},e.prototype.getPageFromTop=function(e,t){var i=this,n=p(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),s=0;this.offsets[n],this.prevHeight;return this.offsetKeys.some((function(o){var r=Number(o),a=e<=i.offsets[o]||r===n&&e>i.offsets[o];return a&&(t.block=r%2==0?1:0,s=Math.max(1,Math.min(i.vHelper.getPage(r),i.maxPage))),a})),s},e.prototype.getTranslateY=function(e,t,i,n){void 0===i&&((i={page:this.getPageFromTop(e+t,{})}).blockIndexes=this.vHelper.getBlockIndexes(i.page));var s=(i.blockIndexes[0]||1)-1,o=this.getOffset(s),r=this.getOffset(i.blockIndexes[i.blockIndexes.length-1]);n&&(i=this.prevInfo);var a=o>e?this.getOffset(s-1):r<e+t?this.getOffset(s+1):o,l=this.offsets[i.blockIndexes[i.blockIndexes.length-1]]-this.tmpOffsets[i.blockIndexes[0]];return a+l>this.offsets[p(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks()]&&0==this.parent.options.groupCount&&(a-=a+l-this.offsets[this.getTotalBlocks()]),a},e.prototype.getOffset=function(e){return Math.min(0|this.offsets[e],0|this.offsets[this.maxBlock])},e.prototype.onEntered=function(){var e=this;return function(t,i,n,s,o,r,a){var l=e;e.observer.options.isWheelScroll=r,sf.base.Browser.isIE&&!r&&a&&e.preventEvent;var h="X"===i.axis,d=e.prevInfo.offsets?e.prevInfo.offsets.top:null,c=e.content.getBoundingClientRect().height,p=h?e.getColumnOffset(e.vHelper.getColumnIndexes()[0]-1,!0):e.getColumnOffset(e.prevInfo.columnIndexes[0]-1);p=e.parent.options.enableColumnVirtualization&&e.parent.options.enableRtl?-1*p:p;var u=e.getTranslateY(o.top,c,h&&d===o.top?e.prevInfo:void 0,!0);if(e.currentInfo&&e.currentInfo.startIndex&&h){var f=sf.base.isNullOrUndefined(e.currentInfo.endIndex)?0:e.currentInfo.endIndex;u=(f-e.parent.options.pageSize)*e.parent.getRowHeight()}if(e.movableTranslateX=e.vHelper.cOffsets[e.startColIndex-1]?e.vHelper.cOffsets[e.startColIndex-1]:p,e.movableTranslateX=e.parent.options.enableColumnVirtualization&&e.parent.options.enableRtl?-1*e.movableTranslateX:e.movableTranslateX,e.movableTranslateX=e.parent.options.enableColumnVirtualization&&e.parent.options.frozenColumns&&e.vHelper.mOffsets[e.startColIndex-1]?e.vHelper.mOffsets[e.startColIndex-1]:e.movableTranslateX,e.movableTranslateY=e.parent.options.pageSize*(e.parent.options.rowHeight>0?e.parent.options.rowHeight:e.parent.getRowHeight()),e.parent.options.enableVirtualMaskRow){if(e.offsets[e.maxBlock]>=u&&e.currentInfo.endIndex!=e.parent.options.totalItemCount)if("right"==s||"left"==s){var g=e.parent.getColumnIndexesInView(),m=e.getInfoFromView(s,i,o);JSON.stringify(g)!==JSON.stringify(m.columnIndexes)&&e.virtualEle.adjustTable(e.movableTranslateX,e.translateMaskY+e.movableTranslateY)}else{var v=e.parent.options.enableColumnVirtualization?e.parent.options.enableVirtualMaskRow?4:2:0;setTimeout((function(){var e=u;l.parent.options.enableVirtualMaskRow&&"down"==s&&(e=l.content.scrollTop-2*(l.parent.options.overscanCount+l.parent.options.pageSize)*(0!=l.parent.options.rowHeight?l.parent.options.rowHeight:l.parent.getRowHeight())),l.virtualEle.adjustTable(p,Math.min(n?l.translateMaskY:"down"==s?e:u,l.offsets[l.maxBlock-v]))}),0)}}else e.currentInfo.endIndex==e.parent.options.totalItemCount&&"down"==s?(u=0!=e.parent.options.rowHeight?e.parent.options.rowHeight*e.currentInfo.startIndex:e.parent.getRowHeight()*e.currentInfo.startIndex,e.virtualEle.adjustTable(e.movableTranslateX,Math.min(u,e.offsets[e.maxBlock]))):h&&"up"!=s||"horizontal"==e.observer.PreventAdjustTable||e.virtualEle.adjustTable(e.movableTranslateX,Math.min(u,e.offsets[e.maxBlock]));h&&e.setColVTableWidthAndTranslate({refresh:!0,axis:"X"})}},e.prototype.getBlockSize=function(){return this.parent.options.pageSize>>1},e.prototype.getBlockHeight=function(){return this.getBlockSize()*this.parent.getRowHeight()},e.prototype.getGroupedTotalBlocks=function(){if(this.parent.options.enableLazyLoading&&this.parent.options.enableVirtualization)return this.getTotalBlocks();var e=this.getVisibleGroupedRowCount();return Math.floor(e/this.getBlockSize()<1?1:e/this.getBlockSize())},e.prototype.getVisibleGroupedRowCount=function(){return Number(this.virtualEle.placeholder.style.height.substring(0,this.virtualEle.placeholder.style.height.indexOf("p")))/this.parent.getRowHeight()},e.prototype.getTotalBlocks=function(){return Math.ceil(sf.base.isNullOrUndefined(this.count)?0:this.count/this.getBlockSize())},e.prototype.getColumnOffset=function(e,t){return 0|this.vHelper.cOffsets[e]},e.prototype.resetScrollPosition=function(e){var t=sf.base.isNullOrUndefined(e)?e:e.toLowerCase();if(this.actions.some((function(t){return t===e}))||this.parent.options.filterCount>0&&!sf.base.isNullOrUndefined(t)&&("save"==t||"delete"==t)||!sf.base.isNullOrUndefined(this.parent.options.initGroupingField)&&this.parent.options.initGroupingField.length>0&&!sf.base.isNullOrUndefined(t)&&("sorting"==t||"save"==t||"delete"==t)){var i=this.content;this.preventEvent=0!==i.scrollTop,i.scrollTop=0}},e.prototype.refreshOffsets=function(){this.parent;var e=0,t=this.getBlockSize(),i=p(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();this.prevHeight=this.offsets[i],this.maxBlock=i%2==0?i-2:i-1,this.offsets={};for(var n=[],s={},o=Array.apply(null,Array(i)).map((function(){return++e})),r=0;r<o.length;r++){var a=(s[o[r]]||[]).length,l=p(this.parent)?n.length%t:this.count%t,h=!p(this.parent)&&o[r]in s?a*this.parent.getRowHeight():l&&o[r]===i?l*this.parent.getRowHeight():this.getBlockHeight();this.offsets[o[r]]=(0|this.offsets[o[r]-1])+h,this.tmpOffsets[o[r]]=0|this.offsets[o[r]-1]}this.offsetKeys=Object.keys(this.offsets),this.parent.options.enableColumnVirtualization&&this.vHelper.refreshColOffsets()},e.prototype.updateTransform=function(e,t,i){var n=this;setTimeout((function(){n.translateMaskX=e,i&&(n.translateMaskY=t),n.virtualEle.adjustTable(e,n.translateMaskY)}),500)},e.prototype.refreshColumnIndexes=function(){this.vHelper.refreshColOffsets();var e=this.vHelper.getColumnIndexes();this.parent.setColumnIndexesInView(e),this.parent.dotNetRef.invokeMethodAsync("SetColumnIndexes",e[0],e[e.length-1])},e.prototype.refreshVirtualElement=function(){this.vHelper.refreshColOffsets(),this.setVirtualHeight()},e}(),U=function(){function e(e){this.parent=e,this.vHelper=new F(this.parent),this.virtualEle=new H(this.parent),this.headerPanel=this.parent.element.querySelector(".e-gridheader")}return e.prototype.getPanel=function(){return this.headerPanel},e.prototype.getTable=function(){return this.headerPanel.querySelector(".e-table")},e.prototype.renderTable=function(){this.vHelper.refreshColOffsets(),this.parent.setColumnIndexesInView(this.vHelper.getColumnIndexes(this.getPanel().querySelector(".e-headercontent"))),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.getPanel().querySelector(".e-headercontent"),this.virtualEle.content.style.position="relative",this.virtualEle.renderWrapper(),this.virtualEle.renderPlaceHolder()},e}(),H=function(){function e(e){this.parent=e}return e.prototype.renderWrapper=function(e){this.wrapper=this.content.querySelector(".e-virtualtable"),this.wrapper.setAttribute("styles","min-height:"+sf.base.formatUnit(e)),this.content.querySelector(".e-gridcontent")&&(this.movableHeaderWrapper=this.content.querySelector(".e-virtualtable")),null!=this.content.querySelector(".e-gridcontent")&&(this.movableContentWrapper=this.content.querySelector(".e-virtualtable"))},e.prototype.renderPlaceHolder=function(){this.placeholder=this.content.lastElementChild},e.prototype.adjustTable=function(e,t){this.filterTranslateX=e,this.parent.options.enableColumnVirtualization&&!this.parent.options.enableVirtualization&&t>0&&(t=0);var i=[].slice.call(this.content.querySelectorAll(".e-leftfreeze,.e-rightfreeze,.e-fixedfreeze")),n=0,s=0;if(this.parent.getHeaderContent().querySelectorAll(".e-fixedfreeze").length&&(n=this.parent.leftrightColumnWidth("left"),s=this.parent.leftrightColumnWidth("right")),i.length)for(var o=0;o<i.length;o++){var r=i[parseInt(o.toString())],a=null;if(r.classList.contains("e-rowcell"))if(!sf.base.isNullOrUndefined(r.getAttribute("data-colindex"))&&r.querySelector("[e-mappinguid]")){var l=r.querySelector("[e-mappinguid]").getAttribute("e-mappinguid");a=this.parent.getColumnByUid(l)}else{var h=parseInt(r.getAttribute("data-colindex"));a=this.parent.getColumnByIndex(parseInt(h.toString()),!0)}else if(r.classList.contains("e-headercell")||r.classList.contains("e-filterbarcell")){l=r.classList.contains("e-filterbarcell")?r.getAttribute("e-mappinguid"):r.querySelector("[e-mappinguid]").getAttribute("e-mappinguid");a=this.parent.getColumnByUid(l)}"Left"===a.freeze?r.style.left=a.translateLeftRightValue-e+"px":"Right"===a.freeze?r.style.right=a.translateLeftRightValue+e+"px":"Fixed"===a.freeze&&(r.style.left=n-e+"px",r.style.right=s+e+"px")}t=this.parent.options.enableVirtualization?t:0,this.wrapper.style.transform="translate("+e+"px, "+t+"px)"},e.prototype.extractTranslateY=function(e){var t=e.match(/translate\([^,]+,([^)]+)\)/);return t&&t[1]?t[1].trim():"0"},e.prototype.setWrapperWidth=function(e,t){this.wrapper.style.width=e?e+"px":t?"100%":""},e.prototype.setVirtualHeight=function(e,t){this.parent.options.enableVirtualization&&(this.placeholder.style.height=e+"px"),this.placeholder.style.width=t},e}(),F=function(){function e(e){this.cOffsets={},this.mOffsets={},this.data={},this.groups={},this.parent=e}return e.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},e.prototype.getPage=function(e){return e%2==0?e/2:(e+1)/2},e.prototype.getData=function(){return{page:this.parent.options.currentPage,blockIndexes:this.getBlockIndexes(this.parent.options.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},e.prototype.getColumnIndexes=function(e){var t=this;void 0===e&&(e=this.parent.getHeaderContent()),sf.base.isNullOrUndefined(this.parent.getContent())||(e=this.parent.getContent());for(var i=this.parent.getColumns().filter((function(e){return e.isFrozen&&"Left"===e.freeze})),n=this.parent.getColumns().filter((function(e){return e.isFrozen&&"Right"===e.freeze})),s=0,o=0;o<i.length;o++)s+=parseInt(i[o].width);for(o=0;o<n.length;o++)parseInt(n[o].width);var r=[],a=this.parent.options.enableColumnVirtualization&&this.parent.options.enableRtl?-1*e.scrollLeft|0:e.scrollLeft+s|0,l=Object.keys(this.cOffsets),h=this.parent.options.needClientAction?this.parent.options.frozenColumns&&this.parent.options.enableColumnVirtualization?this.parent.getHeaderContent().offsetWidth:e.getBoundingClientRect().width:parseInt(this.parent.options.width);a=Math.min(this.cOffsets[l.length-1]-h,a);var d=sf.base.Browser.isDevice?2*h:h/2,c=a+h+(0===a?d:0);return l.some((function(e,i,n){var s=Number(e),o=t.cOffsets[e];return a-d<=o&&c+d>=o&&r.push(s),c+d<o})),r.length||this.parent.options.frozenColumns||(r=[],c+=this.cOffsets[this.getColumnIndexes()[0]],l.some((function(e,i,n){var s=Number(e),o=t.cOffsets[e];return a-d<=o&&c+d>=o&&r.push(s),c+d<o}))),1!=r.length||this.parent.options.frozenColumns?(this.parent.virtualContentModule.startColIndex=r[0],this.parent.virtualContentModule.endColIndex=r[r.length-1]):(this.parent.virtualContentModule.startColIndex=r[0],this.parent.virtualContentModule.endColIndex=r[0]+1,r.push(r[0]+1)),r},e.prototype.refreshColOffsets=function(){var e=0;this.cOffsets={},this.mOffsets={};var t=this.parent.options.groupCount,i=this.parent.options.columns;this.parent.options.enableColumnVirtualization&&(i=i.filter((function(e){return e.visible})));for(var n=i.length,s=Array.apply(null,Array(n)).map((function(){return e++})),o=0;o<s.length;o++)this.cOffsets[s[o]]=(0|this.cOffsets[s[o]-1])+(i[o].visible?parseInt(i[o].width,10):0);if(this.parent.options.frozenColumns){var r=0;if(this.parent.options.actualFrozenColumns){for(var a=0,l=0;l<i.length&&(!i[l].isFrozen&&i[l].index<this.parent.options.frozenColumns);l++)a++;d=i.slice(a,n)}else var h=i.filter((function(e){return e.isFrozen&&("Left"===e.freeze||"Right"===e.freeze)})),d=i.filter((function(e){return!h.some((function(t){return t===e}))}));for(var c=d.length,p=Array.apply(null,Array(c)).map((function(){return r++})),u=0;u<p.length;u++)p[u]=p[u]+t,this.mOffsets[p[u]]=(0|this.mOffsets[p[u]-1])+(d[u].visible?parseInt(d[u].width,10):0)}},e}(),Y="th.e-headercell",q=".e-rowcell",_=".e-filterbarcell",W="e-frozen-helper",V="e-frozen-cursor",X="data-colindex",Q=function(){function e(e){this.currentBorderIndex=-1,this.originalBorderIndex=-1,this.visibleLtoROrderedColumns=[],this.visibleRtoLOrderedColumns=[],this.widthCollection=[],this.visibleFrozenColumns=[],this.visibleFrozenLeftColumns=[],this.domRtoLOrderedColumns=[],this.domLtoROrderedColumns=[],this.parent=e,this.parent.options.allowFreezeLineMoving&&this.wireEvents()}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getContent(),sf.base.Browser.touchStartEvent,this.dragStart,this),sf.base.EventHandler.add(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.dragStart,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.parent.getContent(),sf.base.Browser.touchStartEvent,this.dragStart),sf.base.EventHandler.remove(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.dragStart)},e.prototype.dragStart=function(e){if(e.target.classList.contains(V)){this.currentCursorElement=e.target,this.parent.getContent().classList.add("e-freezeline-moving"),this.isLeftCursorDragging=!!((this.currentCursorElement.classList.contains("e-frozen-left-cursor")||this.currentCursorElement.classList.contains("e-frozen-fixedleft-cursor")||this.currentCursorElement.classList.contains("e-frozen-fixedright-cursor"))&&!this.currentCursorElement.classList.contains("e-frozen-default-cursor")||this.currentCursorElement.classList.contains("e-frozen-default-cursor")&&this.currentCursorElement.classList.contains("e-frozen-right-cursor")),this.isLeftFixedCursorDragging=!!this.currentCursorElement.classList.contains("e-frozen-fixedleft-cursor"),this.isRightFixedCursorDragging=!!this.currentCursorElement.classList.contains("e-frozen-fixedright-cursor"),this.appendHelper();var t,i=sf.base.closest(this.currentCursorElement,Y);if(sf.base.isNullOrUndefined(i))if(i=sf.base.closest(this.currentCursorElement,q),sf.base.isNullOrUndefined(i))t=sf.base.closest(this.currentCursorElement,_).getAttribute("e-mappinguid");else{var n=i.getAttribute(X);t=this.parent.getHeaderContent().querySelector("["+X+'="'+n+'"]').firstElementChild.getAttribute("e-mappinguid")}else t=i.firstElementChild.getAttribute("e-mappinguid");var s=this.parent.getColumns().filter((function(e){return e.uid==t}))[0].index;this.setColumnsForBorderUpdate(),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.dragEnd,this),this.parent.dotNetRef.invokeMethodAsync("InvokeFreezeLineMoving",{fromIndex:s})}},e.prototype.appendHelper=function(){this.helperElement=sf.base.createElement("div",{className:W}),this.setHelperHeight(),this.parent.element.appendChild(this.helperElement)},e.prototype.setHelperHeight=function(){var e=this.parent.getContent().offsetHeight,t=sf.base.closest(this.currentCursorElement,Y);if(sf.base.isNullOrUndefined(t)){var i=sf.base.closest(this.currentCursorElement,q);if(sf.base.isNullOrUndefined(i)){var n=sf.base.closest(this.currentCursorElement,_).getAttribute("e-mappinguid");t=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+n+"]")[0].parentElement}else{var s=i.getAttribute(X);t=this.parent.getHeaderContent().querySelector("["+X+'="'+s+'"]')}}for(var o=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr")),r=o.indexOf(t.parentElement);r<o.length;r++)e+=o[r].offsetHeight;this.parent.getContent().scrollWidth>this.parent.getContent().clientWidth&&(e-=16);var a=this.calcPos(t),l=this.calcPos(this.parent.getHeaderContent()).top;this.currentCursorElement.classList.contains("e-frozen-default-cursor")?a.left=this.isLeftCursorDragging?a.left:a.left+t.offsetWidth-2:t.classList.contains("e-rightfreeze")?a.left+=this.parent.options.enableRtl?t.offsetWidth-2:-1:a.left+=this.parent.options.enableRtl?-1:t.offsetWidth-2,this.helperElement.style.cssText="height: "+e+"px; top: "+l+"px; left:"+Math.floor(a.left)+"px;"},e.prototype.calcPos=function(e){for(var t={top:0,left:0,right:0},i=e.getBoundingClientRect(),n=e.ownerDocument,s=r(e,"e-grid")||n.documentElement;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return s&&s!==e&&1===s.nodeType&&(t=s.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left,right:i.right-t.right}},e.prototype.preventFreezeLineMoving=function(e){e?this.cancelFreezeLineMoving():sf.base.EventHandler.add(this.parent.element,sf.base.Browser.touchMoveEvent,this.freezeLineDragging,this)},e.prototype.cancelFreezeLineMoving=function(){this.unwireEvents(),sf.base.detach(this.helperElement),this.setDefaultValue()},e.prototype.setDefaultValue=function(){this.parent.getContent().classList.remove("e-freezeline-moving"),this.addOrRemoveClasses("remove"),this.helperElement=null,this.currentBorderIndex=-1,this.currentCursorElement=null,this.borderCells=null,this.widthCollection=[]},e.prototype.freezeLineDragging=function(e){this.helperElement&&(this.scrollHorizontally(),this.updateHelper(e),this.updateBorder())},e.prototype.setColumnsForBorderUpdate=function(){var e=this,t=this.parent.getColumns(),i=t.filter((function(e){return"Left"==e.freeze&&e.isFrozen}));this.visibleFrozenLeftColumns=i.filter((function(e){return e.visible}));var n=t.filter((function(e){return"Right"==e.freeze&&e.isFrozen})),s=n.filter((function(e){return e.visible}));if(this.parent.options.actualFrozenColumns>0){var o=t.slice(0,this.parent.options.actualFrozenColumns);this.visibleFrozenColumns=o.filter((function(e){return e.visible}));var r=(a=t.filter((function(t){return t.index>e.parent.options.actualFrozenColumns-1&&(!t.isFrozen||t.isFrozen&&"Fixed"==t.freeze)}))).filter((function(e){return e.visible}));this.isLeftCursorDragging?(this.visibleLtoROrderedColumns=[].concat(this.visibleFrozenColumns,this.visibleFrozenLeftColumns,r,s),this.domLtoROrderedColumns=[].concat(o,i,a,n),this.widthCollection=this.pushColumnWidth(this.visibleLtoROrderedColumns,this.widthCollection)):(this.visibleRtoLOrderedColumns=[].concat(s.reverse(),r.reverse(),this.visibleFrozenLeftColumns.reverse(),this.visibleFrozenColumns.reverse()),this.domRtoLOrderedColumns=[].concat(n.reverse(),a.reverse(),i.reverse(),o.reverse()),this.widthCollection=this.pushColumnWidth(this.visibleRtoLOrderedColumns,this.widthCollection))}else{var a;r=(a=t.filter((function(e){return!e.isFrozen||e.isFrozen&&"Fixed"==e.freeze}))).filter((function(e){return e.visible}));this.isLeftCursorDragging?(this.domLtoROrderedColumns=[].concat(i,a,n),this.visibleLtoROrderedColumns=[].concat(this.visibleFrozenLeftColumns,r,s),this.widthCollection=this.pushColumnWidth(this.visibleLtoROrderedColumns,this.widthCollection)):(this.domRtoLOrderedColumns=[].concat(n.reverse(),a.reverse(),i.reverse()),this.visibleRtoLOrderedColumns=[].concat(s.reverse(),r.reverse(),this.visibleFrozenLeftColumns.reverse()),this.widthCollection=this.pushColumnWidth(this.visibleRtoLOrderedColumns,this.widthCollection))}},e.prototype.updateBorder=function(){var e;if(-1==this.currentBorderIndex)if(sf.base.isNullOrUndefined(r(this.currentCursorElement,"e-rowcell")))if(sf.base.isNullOrUndefined(r(this.currentCursorElement,"e-filterbarcell")))this.currentBorderIndex=Number(r(this.currentCursorElement,"e-headercell").getAttribute(X));else{var t=r(this.currentCursorElement,"e-filterbarcell").getAttribute("e-mappinguid"),i=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+t+"]")[0].parentElement;this.currentBorderIndex=Number(i.getAttribute(X))}else this.currentBorderIndex=Number(r(this.currentCursorElement,"e-rowcell").getAttribute(X));var n=this.isLeftFixedCursorDragging||this.isRightFixedCursorDragging?this.convertWidthToNumber(this.helperElement.style.left)+this.parent.getContent().scrollLeft:this.isLeftCursorDragging?this.convertWidthToNumber(this.helperElement.style.left):-this.calcPos(this.helperElement).right;if(n<this.widthCollection[0]/2)e=0,this.frozenDefaultBorderClass=this.isLeftCursorDragging?"e-frozen-left-border":"e-frozen-right-border";else if(n>this.widthCollection[0]/2&&n<this.widthCollection[0])e=0,this.frozenDefaultBorderClass=this.isLeftCursorDragging?"e-frozen-right-border":"e-frozen-left-border";else{this.frozenDefaultBorderClass="default";for(var s=0;s<this.widthCollection.length&&s+1!=this.widthCollection.length;s++)if(n>this.widthCollection[s]&&n<this.widthCollection[s+1]){var o=(this.widthCollection[s+1]-this.widthCollection[s])/2;e=n<this.widthCollection[s]+o?s:s+1;break}}if(!sf.base.isNullOrUndefined(e)&&this.currentBorderIndex!=e||"default"!=this.frozenDefaultBorderClass&&e==this.currentBorderIndex){this.addOrRemoveClasses("remove"),this.currentBorderIndex=e;var a=this.isLeftCursorDragging?this.visibleLtoROrderedColumns[this.currentBorderIndex].uid:this.visibleRtoLOrderedColumns[this.currentBorderIndex].uid,l=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+a+"]");if(l.length)for(s=0;s<l.length;s++)l[s].classList.contains("e-headercelldiv")&&(this.borderHeaderCell=l[s].parentElement);if(this.parent.getHeaderContent().querySelector(".e-filterbar")){var h=this.parent.getHeaderContent().querySelectorAll(".e-filterbarcell");for(s=0;s<h.length;s++)h[s].getAttribute("e-mappinguid")==a&&(this.filterBarCell=h[s])}this.originalBorderIndex=Number(this.borderHeaderCell.getAttribute(X)),this.borderCells=this.parent.getContent().querySelectorAll("["+X+'="'+this.originalBorderIndex+'"]'),this.addOrRemoveClasses("add")}},e.prototype.addOrRemoveClasses=function(e){var t=this.isLeftCursorDragging?"e-frozen-right-border":"e-frozen-left-border";sf.base.isNullOrUndefined(this.borderCells)||("add"==e?(t="default"==this.frozenDefaultBorderClass?t:this.frozenDefaultBorderClass,sf.base.addClass(this.borderCells,t),this.borderHeaderCell.classList.add(t),sf.base.isNullOrUndefined(this.filterBarCell)||this.filterBarCell.classList.add(t)):"default"!=this.frozenDefaultBorderClass?(sf.base.removeClass(this.borderCells,["e-frozen-left-border","e-frozen-right-border"]),this.borderHeaderCell.classList.remove("e-frozen-right-border"),this.borderHeaderCell.classList.remove("e-frozen-left-border"),sf.base.isNullOrUndefined(this.filterBarCell)||(this.filterBarCell.classList.remove("e-frozen-right-border"),this.filterBarCell.classList.remove("e-frozen-left-border"))):(sf.base.removeClass(this.borderCells,t),this.borderHeaderCell.classList.remove(t),sf.base.isNullOrUndefined(this.filterBarCell)||this.filterBarCell.classList.remove(t)))},e.prototype.convertWidthToNumber=function(e){return Number(e.toString().replace("px",""))},e.prototype.pushColumnWidth=function(e,t){for(var i=0,n=0;n<e.length;n++){var s=this.convertWidthToNumber(e[n].width);t.push(i+s),i=t[t.length-1]}return t},e.prototype.scrollHorizontally=function(){if(0!=this.parent.options.frozenColumns){var e=this.parent.getContent();if(e.scrollWidth>e.clientWidth){this.parent.element.querySelector(".e-movablescrollbar"),this.parent.element.querySelector(".e-movablechild");e.scrollLeft=this.isLeftFixedCursorDragging||this.isRightFixedCursorDragging?e.scrollLeft:this.isLeftCursorDragging?0:e.offsetWidth}}},e.prototype.updateHelper=function(e){var t=this.getCurrentScreenX(e),i=this.calcPos(this.currentCursorElement).left,n=t-(this.parent.element.getBoundingClientRect().left+i),o=this.parent.getContent().offsetWidth,r=i+n,a=this.parent.getContent().querySelector(".e-movablecontent");if(a||(a=this.parent.getContent()),!this.isLeftCursorDragging||this.isLeftFixedCursorDragging||this.isRightFixedCursorDragging){if(!this.isLeftFixedCursorDragging&&!this.isRightFixedCursorDragging){var l=this.calcPos(a).left;r=(r=r<l?l+1:r)>o-s()?o-s()-1:r}}else{var h=this.calcPos(a).right;r=r>o+h?o+h-1:r}this.helperElement.style.left=r+"px",this.helperElement.style.zIndex="10"},e.prototype.getCurrentScreenX=function(e){return e.touches&&e.touches.length?e.touches[0].screenX:e.screenX},e.prototype.dragEnd=function(e){if(this.helperElement){sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.freezeLineDragging),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.dragEnd);var t=this.getServerParams(),i=this.parent.options.actualFrozenColumns;if(this.parent.options.actualFrozenColumns>0&&!t.isFrozen)for(var n=0;n<t.frozenColumnsUidCollection.length;n++)for(var s=0;s<this.visibleFrozenColumns.length;s++)this.visibleFrozenColumns[s].uid==t.frozenColumnsUidCollection[n]&&i--;var o=!!(this.currentCursorElement.classList.contains("e-frozen-default-cursor")||this.isLeftCursorDragging&&"e-frozen-left-border"==this.frozenDefaultBorderClass||!this.isLeftCursorDragging&&"e-frozen-right-border"==this.frozenDefaultBorderClass);sf.base.detach(this.helperElement),this.setDefaultValue(),this.checkForServerCall(t.isFrozen,t.frozenColumnsUidCollection,t.endIndex,t.freezeDirection,t.freezeLineMovingDirection)&&this.parent.dotNetRef.invokeMethodAsync("InvokeFreezeLineMoved",{frozenColumnsUidCollection:t.frozenColumnsUidCollection,freezeDirection:t.freezeDirection,freezeLineMovingDirection:t.freezeLineMovingDirection,isFrozen:t.isFrozen,fromIndex:t.startIndex,toIndex:t.endIndex,frozenColumnsCount:i,hasGridStructureChanges:o})}},e.prototype.getServerParams=function(){var e,t,i,n=[],s=-1,o=-1;if(!sf.base.isNullOrUndefined(this.borderCells)){var a=this.convertWidthToNumber(this.helperElement.style.left),l=this.calcPos(this.currentCursorElement).left,h=sf.base.closest(this.currentCursorElement,q);if(sf.base.isNullOrUndefined(h)&&(h=sf.base.closest(this.currentCursorElement,Y),sf.base.isNullOrUndefined(h))){var d=r(this.currentCursorElement,"e-filterbarcell").getAttribute("e-mappinguid");h=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+d+"]")[0].parentElement}if(s=Number(h.getAttribute(X)),o=Number(this.borderCells[0].getAttribute(X)),this.isLeftCursorDragging)if(e="Left",(this.isLeftFixedCursorDragging||this.isRightFixedCursorDragging)&&(e="Fixed"),a>l){t=!this.isLeftFixedCursorDragging,i="Right";for(var c=0==this.parent.options.frozenColumns||0==this.parent.options.actualFrozenColumns&&0==this.visibleFrozenLeftColumns.length?0:s+1,p=this.currentCursorElement.classList.contains("e-frozen-default-cursor")&&"e-frozen-left-border"==this.frozenDefaultBorderClass?-1:o,u=c;u<=p;u++)this.domLtoROrderedColumns[u].visible&&n.push(this.domLtoROrderedColumns[u].uid)}else if(t=!!this.isLeftFixedCursorDragging,i="Left","e-frozen-left-border"!=this.frozenDefaultBorderClass)for(u=s;u>o;u--)this.domLtoROrderedColumns[u].visible&&n.push(this.domLtoROrderedColumns[u].uid);else for(u=s;-1!=u;u--)this.domLtoROrderedColumns[u].visible&&n.push(this.domLtoROrderedColumns[u].uid);else{var f=this.domRtoLOrderedColumns.reverse();if(a<l){if(t=!0,e="Right",i="Left","e-frozen-right-border"!=this.frozenDefaultBorderClass){s=this.currentCursorElement.classList.contains("e-frozen-default-cursor")?s+1:s;for(u=o;u<s;u++)f[u].visible&&n.push(f[u].uid)}}else if(t=!1,e="Left",i="Right","e-frozen-right-border"==this.frozenDefaultBorderClass)for(u=s;u<=o;u++)f[u].visible&&n.push(f[u].uid);else for(u=s;u<o;u++)f[u].visible&&n.push(f[u].uid)}}return{startIndex:s,endIndex:o,freezeDirection:e,isFrozen:t,freezeLineMovingDirection:i,frozenColumnsUidCollection:n}},e.prototype.checkForServerCall=function(e,t,i,n,s){var o=!0,r=this.parent.columnModel.slice(0,this.parent.options.actualFrozenColumns);if(r=(r=r.filter((function(e){return e.visible}))).concat(this.parent.columnModel.filter((function(e){return e.isFrozen&&e.visible}))),e)for(var a=0;a<this.parent.columnModel.length;a++)for(var l=0;l<t.length;l++)if(t[l]==this.parent.columnModel[a].uid){for(var h=!0,d=0;d<r.length;d++)r[d].uid==t[l]&&(h=!1);h&&r.push(this.parent.columnModel[a])}for(var c=0,p=0;p<r.length;p++)c+=+r[p].width;if(this.parent.element.offsetWidth<=c&&(o=!1),!sf.base.isNullOrUndefined(this.parent.getContent().querySelector(".e-movablecontent"))){var u=this.parent.getMovableDataRows()[0].getElementsByTagName("td"),f=this.parent.getFrozenDataRows()[0].getElementsByTagName("td"),g=i.toString();("Right"==s&&u[u.length-1].getAttribute("data-colindex")==g||"Left"==s&&u[0].getAttribute("data-colindex")==g||f[0].getAttribute("data-colindex")==g&&"Right"==n&&"Left"==s)&&(o=!1)}return o},e}(),Z=function(){function i(t,i,n,s){var o=this;if(this.columnModel=[],this.frozenColumnModel=[],window.sfBlazor=window.sfBlazor,this.editedCellIndex=null,this.firstFocusableTemplateElement=null,this.lastFocusableTemplateElement=null,this.inViewIndexes=[],this.isRendered=!1,this.isGridFirstRender=!1,this.nColumnOffsets=[],this.getFrozenLeftColumns=function(){var e=[];return this.getColumns().filter((function(e){return e.isFrozen&&"Left"===e.freeze})).map((function(t){return e.push(t)})),e},this.getFrozenRightColumns=function(){var e=[];return this.getColumns().filter((function(e){return e.isFrozen&&"Right"===e.freeze})).map((function(t){return e.push(t)})),e},this.tapEvent=function(t){if(this.resizeModule.getUserAgent())if(e.timer){clearTimeout(e.timer),e.timer=null;var i=document.createEvent("MouseEvents");i.initEvent("dblclick",!0,!0),t.target.dispatchEvent(i)}else e.timer=setTimeout((function(){e.timer=null}),300)},this.element=i,!sf.base.isNullOrUndefined(this.element)){if(this.dotNetRef=s,this.dataId=t,this.options=n,this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-gridcontent .e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.element.offsetWidth<=0)var r=setInterval((function(){o.element.offsetWidth>0&&(o.initModules(),clearInterval(r))}),500);else this.initModules();this.addScrollEvents(!0),sf.base.isNullOrUndefined(this.element)||(this.element.blazor__instance=this,window.sfBlazor.setCompInstance(this))}}return i.prototype.initModules=function(){this.scrollModule=new g(this),this.freezeModule=new m(this),this.headerDragDrop=new b(this),this.contentDragDrop=new y(this),this.reorderModule=new C(this),this.groupModule=new I(this),this.resizeModule=new E(this),this.frozenDragDropModule=new Q(this),this.editModule=new A(this),this.columnChooserModule=new T(this),this.clipboardModule=new z(this),this.columnMenuModule=new D(this),this.filterModule=new j(this),this.virtualContentModule=new R(this),this.virtualHeaderModule=new U(this),this.toolTipModule=new k(this),this.rowDragAndDropModule=new P(this),this.selectionModule=new L(this),this.widthService=new v(this),this.isRendered=this.options.isPrerendered,this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:G,eventName:"keydown"}),this.options.enableColumnVirtualization&&this.virtualHeaderModule.renderTable(),(this.options.enableVirtualization||this.options.enableColumnVirtualization)&&this.virtualContentModule.renderTable(),this.options.allowResizing&&this.resizeModule.render(),this.options.isFreezeLineMoved&&this.freezeLineMovedAction(),this.options.needClientAction?this.clientActions():this.contentReady(),this.lastRowBorderCheck(),this.wireEvents(),this.options.enableColumnVirtualization||this.updateColumnWidth(this.options.columns)},i.prototype.getHeaderContent=function(){return this.header},i.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},i.prototype.getContent=function(){return this.content},i.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},i.prototype.getFooterContent=function(){return this.footer},i.prototype.getColumns=function(e,t){void 0===e&&(e=!1),this.columnModel=[];var i=this.options.enableColumnVirtualization&&e?this.options.virtualizedColumns:this.options.columns;return e&&this.options.frozenColumns>0?(i=this.getOrderedFrozenColumns(),this.columnModel=i):this.updateColumnModel(i),this.columnModel},i.prototype.getOrderedFrozenColumns=function(){var e=[],t=this.getColumns();return t.filter((function(e){return e.isFrozen&&"Left"===e.freeze})).map((function(t){return e.push(t)})),t.filter((function(e){return!e.isFrozen||e.isFrozen&&"Fixed"===e.freeze})).map((function(t){return e.push(t)})),t.filter((function(e){return e.isFrozen&&"Right"===e.freeze})).map((function(t){return e.push(t)})),e},i.prototype.autofitFrozenColumns=function(e){var t=[],i=this.getColumns();i.filter((function(t){return(e||t.autoFit)&&t.isFrozen&&"Left"===t.freeze})).map((function(e){return t.push(e.field||e.uid)})),i.filter((function(t){return(e||t.autoFit)&&!t.isFrozen})).map((function(e){return t.push(e.field||e.uid)})),i.filter((function(t){return(e||t.autoFit)&&t.isFrozen&&"Right"===t.freeze})).map((function(e){return t.push(e.field||e.uid)}));return t},i.prototype.freezeLineMovedAction=function(){this.options.isFreezeLineMoved=!1;var e=this.getContent().querySelector(".e-movablecontent");(sf.base.isNullOrUndefined(e)&&(e=this.getContent()),""!=e.querySelector("table").style.width)&&(0==this.options.frozenLeftColumnsCount&&0==this.options.frozenRightColumnsCount||this.updateColumnLevelFrozen(),new v(this).setWidthToTable());e.scrollLeft=0,sf.base.isNullOrUndefined(this.element.querySelector(".e-movablescrollbar"))||(this.element.querySelector(".e-movablescrollbar").scrollLeft=0)},i.prototype.addScrollEvents=function(e){if(this.options.showColumnMenu){for(var t=sf.popups.getScrollableParent(this.element),i=0;i<t.length;i++)t[i]instanceof HTMLElement&&(e?sf.base.EventHandler.add(t[i],"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(t[i],"scroll",this.scrollHandler));e?sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(this.content,"scroll",this.scrollHandler)}},i.prototype.scrollHandler=function(e){if(!sf.base.isNullOrUndefined(this.element)&&!sf.base.isNullOrUndefined(this.element.blazor__instance))return this.columnMenuModule.setPosition()},i.prototype.updateColumnLevelFrozen=function(){var e=this.columnModel;this.options.enableColumnVirtualization&&(e=e.filter((function(e){return e.visible})));var t=[],i=[],n=[];if(0!=this.options.frozenRightCount||0!=this.options.frozenLeftCount||0!=this.options.frozenColumns){for(var s=0,o=e.length;s<o;s++){var r=e[s];"Left"===r.freeze&&r.isFrozen||r.index<this.options.frozenColumns?t.push(r):"Right"===r.freeze&&r.isFrozen?i.push(r):n.push(r)}this.frozenColumnModel=t.concat(n).concat(i)}},i.prototype.updateColumnModel=function(e){if(!sf.base.isNullOrUndefined(e))for(var t=0,i=e.length;t<i;t++)null!=e[t].columns&&e[t].columns.length>0?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t])},i.prototype.updateColumnWidth=function(e){this.nColumnOffsets=[];var t=0;if(!this.options.enableColumnVirtualization)for(var i=0,n=e.length;i<n;i++)t=parseInt(t.toString())+(e[i].visible?parseInt(e[i].width):0),this.nColumnOffsets.push(t)},i.prototype.getColumnByIndex=function(e,t){var i;return void 0===t&&(t=!1),this.getColumns(t).some((function(t,n){return i=t,n===e})),i},i.prototype.getDataRows=function(){if(sf.base.isNullOrUndefined(this.getContentTable().querySelector("tbody")))return[];var e=[].slice.call(this.getContentTable().querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderTable().querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.addMovableRows=function(e,t){for(var i=0,n=t.length;i<n;i++)e.push(t[i]);return e},i.prototype.generateDataRows=function(e){for(var t=[],i=0,n=e.length;i<n;i++)e[i].classList.contains("e-row")&&!e[i].classList.contains("e-hiddenrow")&&t.push(e[i]);return t},i.prototype.getMovableDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-movablecontent").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.getFrozenDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-frozencontent").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.leftrightColumnWidth=function(e){var t="left"===e?this.getFrozenLeftColumns():"right"===e?this.getFrozenRightColumns():[],i=0;return t.filter((function(e){e.visible&&(i+=parseInt(e.width.toString(),10))})),i},i.prototype.getFrozenRightDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.getRowByIndex=function(e){return this.getDataRows()[e]},i.prototype.getCellFromIndex=function(e,t){return this.getDataRows()[e]&&this.getDataRows()[e].querySelectorAll(".e-rowcell")[t]},i.prototype.isMovableGrid=function(e,t){var i=this.getColumns(t);if(this.options.actualFrozenColumns>0)return e>=this.options.actualFrozenColumns;var n=[];return i.forEach((function(e){e.isFrozen&&n.push(e.index)})),-1==n.indexOf(e)},i.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().querySelectorAll(".e-headercell")[e]},i.prototype.getRows=function(){return[].slice.call(this.getContentTable().querySelectorAll("tr.e-row[data-uid]"))},i.prototype.getSelectedRows=function(){return this.getRows().filter((function(e){return"true"===e.getAttribute("aria-selected")}))},i.prototype.getSelectedRowIndexes=function(e){for(var t=[],i=this.getRows(),n=0;n<i.length;n++)if(i[n].hasAttribute("aria-selected")&&"true"===i[n].getAttribute("aria-selected")){var s=this.options.allowDragSelection&&this.options.enableVirtualization||e?parseInt(i[n].getAttribute("data-rowindex"),10):n;t.push(s)}return t},i.prototype.getVisibleColumns=function(){for(var e=[],t=0,i=this.columnModel;t<i.length;t++){var n=i[t];n.visible&&e.push(n)}return e},i.prototype.getColumnByField=function(e){return d(this.getColumns(),(function(t,i){if(t.field===e)return t}))[0]},i.prototype.getColumnIndexByField=function(e,t){void 0===t&&(t=!1);for(var i=this.getColumns(t),n=0;n<i.length;n++)if(i[n].field===e)return n;return-1},i.prototype.getColumnByUid=function(e){return d(this.getColumns().concat(this.getStackedColumns(this.options.columns)),(function(t,i){if(t.uid===e)return t}))[0]},i.prototype.getStackedColumns=function(e,t){void 0===t&&(t=[]);for(var i=0,n=e;i<n.length;i++){var s=n[i];s.columns&&(t.push(s),this.getStackedColumns(s.columns,t))}return t},i.prototype.getColumnIndexByUid=function(e,t){void 0===t&&(t=!1);var i=d(this.getColumns(t),(function(t,i){if(t.uid===e)return i}))[0];return sf.base.isNullOrUndefined(i)?-1:i},i.prototype.getColumnHeaderByUid=function(e){return this.getHeaderContent().querySelector("[e-mappinguid="+e+"]").parentElement},i.prototype.getUidByColumnField=function(e,t){return void 0===t&&(t=!1),d(this.getColumns(t),(function(t,i){if(t.field===e)return t.uid}))[0]},i.prototype.getStackedHeaderColumnByHeaderText=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.field===e||n.headerText===e){this.stackedColumn=n;break}n.columns&&this.getStackedHeaderColumnByHeaderText(e,n.columns)}return this.stackedColumn},i.prototype.getNormalizedColumnIndex=function(e,t){return void 0===t&&(t=!1),this.getColumnIndexByUid(e,t)+this.getIndentCount()},i.prototype.getIndentCount=function(){var e=0;return this.options.allowGrouping&&(e+=this.options.groupCount),this.options.hasDetailTemplate&&e++,this.options.allowRowDragAndDrop&&!this.options.hasDropTarget&&e++,e},i.prototype.isPercentageWidth=function(){for(var e=this.getVisibleColumns(),t=0,i=0,n=0;n<e.length;n++)sf.base.isNullOrUndefined(e[n].width)?i++:-1!==e[n].width.toString().indexOf("%")&&t++;return t===e.length&&!i},i.prototype.recalcIndentWidth=function(){if(this.isRendered&&this.getHeaderTable().querySelector(".e-emptycell")&&(this.options.groupCount||this.options.hasDetailTemplate||!this.options.allowRowDragAndDrop||!this.options.hasDropTarget)&&this.getContentTable()&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")){var e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,t=e/30;if(t>=1&&(e=30/t),this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true"),this.isPercentageWidth()){var i=e/30;i>=1&&(e=(e=30/i)>5?3.5:e),this.dotNetRef.invokeMethodAsync("SetIndentWidth",e+"%")}else this.dotNetRef.invokeMethodAsync("SetIndentWidth",e+"px")}},i.prototype.resetColumnWidth=function(){if(("auto"===this.options.width||"string"==typeof this.options.width)&&this.getColumns().filter((function(e){return(!e.width||"auto"===e.width)&&e.minWidth})).length>0){var e=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(e)}},i.prototype.contentReady=function(e,t){void 0===e&&(e=null);var i=document.getElementsByTagName("main")[0];if(!sf.base.isNullOrUndefined(i)&&i.parentElement.classList.contains("page")&&(this.element.style.width,1)&&(i.style.width="100%"),this.getColumns().some((function(e){return e.autoFit}))){var n=this;n.element.querySelector(".e-emptyrow")&&n.options.frozenColumns?setTimeout((function(){n.resizeModule.autoFit()}),100):this.resizeModule.autoFit()}this.options.allowResizing&&this.isGridFirstRender&&this.options.isColumnResized&&(new v(this).setWidthToTable(),this.isGridFirstRender=!1);!this.isGridFirstRender&&this.options.frozenColumns&&(this.options.enablePersistence||t)&&new v(this).setWidthToTable();this.options.isColumnReordered&&!sf.base.isNullOrUndefined(this.getContent().querySelector(".e-movablecontent"))&&""!=this.getContent().querySelector(".e-movablecontent").querySelector("table").style.width&&new v(this).setWidthToTable();if(this.options.frozenColumns&&this.options.enableColumnVirtualization&&(this.freezeModule.setFrozenHeight(),0!=this.options.aggregatesCount)){for(var s=this.element.querySelectorAll(".e-summaryrow"),o=0,a=0;a<s.length;a++)if(s[a].querySelectorAll(".e-templatecell").length>0){o=s[a].offsetHeight;break}for(a=0;a<s.length;a++)s[a].style.height=o+"px"}if((this.options.enableVirtualization||this.options.enableColumnVirtualization)&&this.virtualContentModule.onDataReady(),this.recalcIndentWidth(),this.resetColumnWidth(),this.lastRowBorderCheck(),"Paging"===e&&(r(document.activeElement,"e-grid")||this.element.focus()),this.options.enableStickyHeader){this.scrollModule.addStickyListener(!0);var l=this.element.querySelector(".e-groupdroparea");!sf.base.isNullOrUndefined(l)&&l.classList.contains("e-sticky")&&""===l.style.top&&l.classList.remove("e-sticky")}this.options.enableInfiniteScrolling&&(this.scrollModule.infiniteOnDataReady(),this.scrollModule.resetInfniniteScrollPositions()),sf.base.isNullOrUndefined(this.toolTipModule.toolTipElement)||this.toolTipModule.close(),this.getColumns().filter((function(e){return e.isFrozen&&"Right"===e.freeze})).length>0&&this.element.classList.add("e-right-shadow"),this.options.frozenRows>0&&(this.element.querySelector(".e-frozenrow-border").style.width=this.getContent().scrollHeight>this.getContent().offsetHeight?this.element.offsetWidth-17+"px":this.element.offsetWidth+"px")},i.prototype.lastRowBorderCheck=function(){this.options.enableVirtualization||this.getContent().querySelector(".e-table").scrollHeight<this.getContent().clientHeight&&this.dotNetRef.invokeMethodAsync("LastRowBorder",!0)},i.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"focus",this.gridFocus,this),sf.base.EventHandler.add(document,"click",this.documentClickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.gridKeyDownHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this),sf.base.EventHandler.add(this.getContent(),"touchstart",this.tapEvent,this),sf.base.EventHandler.add(window,"resize",this.windowResized,this),sf.base.EventHandler.add(this.element,"contextmenu",this.mouseDownHandler,this),this.options.allowEditing&&sf.base.EventHandler.add(this.element,"dblclick",this.doubleClickHandler,this)},i.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"focus",this.gridFocus),sf.base.EventHandler.remove(document,"click",this.documentClickHandler),sf.base.EventHandler.remove(this.element,"keydown",this.gridKeyDownHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler),sf.base.EventHandler.remove(this.element,"dblclick",this.doubleClickHandler),sf.base.EventHandler.remove(this.getContent(),"touchstart",this.tapEvent),sf.base.EventHandler.remove(window,"resize",this.windowResized),sf.base.EventHandler.remove(this.element,"contextmenu",this.mouseDownHandler)},i.prototype.windowResized=function(){var e=this;setTimeout((function(){var t=e.element.querySelector(".e-content.e-yscroll");e.options.frozenColumns&&(e.options.width,1)&&e.options.allowTextWrap&&e.freezeModule.refreshRowHeight(),!sf.base.isNullOrUndefined(t)&&t.scrollHeight>t.clientHeight?e.element.querySelector(".e-gridheader").style.paddingRight=s()-e.scrollModule.getThreshold()+"px":e.scrollModule.setPadding(),e.columnChooserModule.windowResized()}),100)},i.prototype.doubleClickHandler=function(e){"TD"==e.target.tagName&&e.target.blur(),this.toolTipModule.close()},i.prototype.setOptions=function(e,t){var i=sf.base.extend(t,{});if(this.options=e,!i.allowResizing&&e.allowResizing&&this.resizeModule.render(),(!i.allowGrouping&&e.allowGrouping||!i.allowReordering&&e.allowReordering||e.showDropArea)&&(this.headerDragDrop.initializeHeaderDrag(),this.headerDragDrop.initializeHeaderDrop(),this.groupModule.initializeGHeaderDrag(),this.groupModule.initializeGHeaderDrop()),!i.allowGrouping&&e.allowGrouping&&this.contentDragDrop.initializeContentDrop(),!i.allowRowDragAndDrop&&e.allowRowDragAndDrop?this.rowDragAndDropModule.initializeDrag():i.allowRowDragAndDrop&&!e.allowRowDragAndDrop&&this.rowDragAndDropModule.destroy(),this.isRendered||(this.isRendered=this.options.isPrerendered),i.groupCount!=e.groupCount){var n=this.getHeaderTable().querySelector(".e-emptycell");if(!n)return;n.removeAttribute("indentRefreshed")}},i.prototype.documentClickHandler=function(e){var t=r(e.target,"e-cc-toolbar"),i=r(e.target,"e-gridform"),n=r(e.target,"e-toolbar-item"),s=r(e.target,"e-rowcell");if(this.virtualContentModule.selectedCellNavigation=-1,r(e.target,"e-inline-edit")){var o=r(e.target,"e-rowcell");this.editedCellIndex=null==o?null:o.cellIndex}else sf.base.isNullOrUndefined(r(e.target,"e-popup-open"))&&(this.editedCellIndex=null);this.options.enableAdaptiveUI||this.targetIsFilterDialog(e)||e.target.classList.contains("e-cc-cancel")||e.target.classList.contains("e-choosercheck")||e.target.classList.contains("e-icon-filter")||t||!this.element.querySelectorAll(".e-filter-popup.e-popup-open").length&&!this.element.querySelectorAll(".e-ccdlg.e-popup-open").length||(null!=this.element.querySelector(".e-datetimepicker")&&this.element.querySelector(".e-datetimepicker").blur(),this.dotNetRef.invokeMethodAsync("FilterPopupClose")),!sf.base.isNullOrUndefined(i)||s||n||this.targetIsFilterDialog(e)||!this.element.querySelector(".e-gridform")||this.dotNetRef.invokeMethodAsync("UpdateChanges"),sf.base.Browser.isDevice||this.toolTipModule.close()},i.prototype.targetIsFilterDialog=function(e){var t=r(r(e.target,"e-filter-popup"),"e-popup-open"),i=r(r(e.target,"e-ddl"),"e-popup-open"),n=r(r(e.target,"e-selectall"),"e-ftrchk"),s=r(e.target,"e-chkcancel-icon"),o=r(e.target,"e-datepicker"),a=r(e.target,"e-timepicker"),l=r(e.target,"e-daterangepicker")||r(e.target,"e-zoomin"),h=e.target.classList.contains("e-check")||e.target.classList.contains("e-uncheck"),d=r(r(e.target,"e-ccdlg"),"e-popup-open");return!!(t||i||n||s||o||a||l||h||d)},i.prototype.documentKeyHandler=function(e){if(e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&(this.element.focus(),this.dotNetRef.invokeMethodAsync("GridFocus",e)),e.altKey&&87===e.keyCode&&!sf.base.isNullOrUndefined(this.element)){var t=!sf.base.isNullOrUndefined(r(e.target,"e-pager"));this.dotNetRef.invokeMethodAsync("GridKeyDown",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey},!1,t,this.editedCellIndex,null,null,!1)}},i.prototype.iterateTemplateElementsForward=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(0==i.tabIndex){this.firstFocusableTemplateElement=i;break}if(!sf.base.isNullOrUndefined(i.children)&&0!=i.children.length){this.iterateTemplateElementsForward(i.children);break}}return this.firstFocusableTemplateElement},i.prototype.iterateTemplateElementsBackward=function(e){for(var t=e.length-1;t>=0;t--){var i=e[t];if(0==i.tabIndex){this.lastFocusableTemplateElement=i;break}if(!sf.base.isNullOrUndefined(i.children)&&0!=i.children.length){this.iterateTemplateElementsBackward(i.children);break}}return this.lastFocusableTemplateElement},i.prototype.keyDownHandler=function(e){var t,i,n=r(e.target,"e-grid"),s=e.target.tagName,o=!sf.base.isNullOrUndefined(r(e.target,"e-pager")),a=!1,l=!1;if(!(n&&n.id!==this.element.id||"Shift"==e.key||"Control"==e.key||"Alt"==e.key)&&("INPUT"!=s&&"TEXTAREA"!=s||"Delete"!=e.code)){if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.querySelector(".e-templatecell"))&&!sf.base.isNullOrUndefined(r(e.target,"e-templatecell"))){var h=r(e.target,"e-rowcell");if(sf.base.isNullOrUndefined(h)||!h.firstElementChild)return;t=h.cellIndex,i=Number(r(e.target,"e-row").getAttribute("data-rowIndex"));var d=h.firstElementChild.children,c=this.iterateTemplateElementsForward(d),p=this.iterateTemplateElementsBackward(d),u=!e.shiftKey&&"Tab"==e.code,f=e.shiftKey&&"Tab"==e.code,g="Escape"==e.code;(e.target==c&&f||e.target==p&&u||g||null==c&&null==p&&!e.target.classList.contains("e-templatecell")&&(u||f))&&(l=!0)}e.target.classList.contains("e-searchinput")&&"Enter"==e.key&&(a=!0);var m=this.isPopUpOpened(e);!m||"Escape"!=e.key&&"Enter"!=e.key||"BODY"!=document.activeElement.tagName||e.target.focus(),"Escape"==e.key&&m&&"true"===e.target.getAttribute("aria-expanded")||(sf.base.isNullOrUndefined(r(e.target,"e-rowcell"))||(this.editedCellIndex=r(e.target,"e-rowcell").cellIndex==this.editedCellIndex?this.editedCellIndex:null),this.dotNetRef.invokeMethodAsync("GridKeyDown",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey},a,o,this.editedCellIndex,i,t,l))}},i.prototype.isPopUpOpened=function(e){var t=e.target.classList.contains("e-datepicker"),i=e.target.classList.contains("e-datetimepicker"),n=e.target.classList.contains("e-timepicker"),s=e.target.classList.contains("e-daterangepicker"),o=e.target.classList.contains("e-multiselect"),r=e.target.classList.contains("e-ddl"),a=e.target.classList.contains("e-autocomplete"),l=e.target.classList.contains("e-combobox");return t||i||n||s||o||r||a||l},i.prototype.gridKeyDownHandler=function(e){var t=r(e.target,"e-filter-popup"),i=e.target.tagName;(this.toolTipModule.close(),!sf.base.isNullOrUndefined(t)&&t.classList.contains("e-popup-open")&&"Escape"!=e.key)&&(e.stopPropagation(),"Tab"!=e.key&&"shiftTab"!=e.key&&"Enter"!=e.key&&"shiftEnter"!=e.key||"INPUT"!=i&&"TEXTAREA"!=i||((g=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.target.dispatchEvent(g)));var n=!1;if(this.options.hasTemplateInEditSettings&&r(e.target,"e-normaledit")){var s=this.element.querySelector(".e-normaledit").querySelectorAll("input"),o=this.element.querySelector(".e-normaledit").querySelectorAll("textarea"),a=Array.from(s).concat(Array.from(o));if(n=!0,!sf.base.isNullOrUndefined(a)){var l=a[0],h=a[a.length-1],d=e.shiftKey&&"Tab"===e.key,c=!e.shiftKey&&"Tab"===e.key;(document.activeElement===l&&d||document.activeElement===h&&c)&&(n=!1)}}if(("Tab"==e.key||"Escape"==e.key||"shiftTab"==e.key||"Enter"==e.key||"shiftEnter"==e.key)&&("INPUT"==i||"TEXTAREA"==i||e.target.classList.contains("e-datepicker")||e.target.classList.contains("e-datetimepicker"))||e.target.classList.contains("e-rowcell")&&"F2"==e.key){var p=e.target;"Tab"===e.key&&(p.classList.contains("e-datepicker")||p.classList.contains("e-datetimepicker"))||"Enter"===e.key&&p.classList.contains("e-autocomplete")||p.blur()}"Shift"!=e.key&&"Control"!=e.key&&"Alt"!=e.key||e.stopPropagation();var u=/(Mac)/i.test(navigator.platform);if(67===e.keyCode&&(e.ctrlKey||u&&e.metaKey)?this.clipboardModule.copy():72===e.keyCode&&(e.ctrlKey||u&&e.metaKey)&&e.shiftKey&&this.clipboardModule.copy(!0),86===e.keyCode&&(e.ctrlKey||u&&e.metaKey)&&!this.options.isEdit){var f=r(e.target,"e-rowcell");sf.base.isNullOrUndefined(f)||f.classList.contains("e-templatecell")||e.stopPropagation(),this.clipboardModule.pasteHandler()}var g,m=this.element.querySelector(".e-normaledit");if(!sf.base.isNullOrUndefined(m)&&"Tab"==e.key){var v=Array.from(m.querySelectorAll(".e-rowcell")).filter((function(e){return!(e.classList.contains("e-hide")||e.querySelector(".e-disabled"))}));if(n)return;(!e.shiftKey&&v[v.length-1]==r(e.target,"e-rowcell")||e.shiftKey&&v[0]==r(e.target,"e-rowcell"))&&(this.dotNetRef.invokeMethodAsync("EndEdit",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey}),e.preventDefault())}this.element.querySelector(".e-batchrow")&&("Tab"!=e.key&&"shiftTab"!=e.key&&"Enter"!=e.key&&"shiftEnter"!=e.key&&"Escape"!=e.key&&e.stopPropagation(),("Tab"==e.key||"shiftTab"==e.key||"Enter"==e.key||"shiftEnter"==e.key)&&(e.preventDefault(),("INPUT"==i||"TEXTAREA"==i)&&((g=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.target.dispatchEvent(g))))},i.prototype.mouseDownHandler=function(e){var t=r(e.target,"e-grid");if(!t||t.id===this.element.id)if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),-1!==e.button&&2!==e.button&&r(e.target,"e-headercell")||2!==e.button&&r(e.target,"e-detailcell")||r(e.target,"e-detailrowexpand")||r(e.target,"e-detailrowcollapse")||e.target.classList.contains("e-content")||e.target.classList.contains("e-headercontent")||sf.base.closest(e.target,".e-groupdroparea")||sf.base.closest(e.target,".e-gridpopup")||sf.base.closest(e.target,".e-summarycell")||sf.base.closest(e.target,".e-rhandler")||sf.base.closest(e.target,".e-filtermenudiv")||sf.base.closest(e.target,".e-filterbarcell")||sf.base.closest(e.target,".e-groupcaption"))this.dotNetRef.invokeMethodAsync("MouseDownHandler",null,null);else{var i=null,n=null,s=r(r(e.target,"e-gridform"),"e-grid");r(e.target,"e-editcell")||s&&s.id==t.id?i="Edit":r(e.target,"e-pager")?i="Pager":r(e.target,"e-headercontent")?(i="Header",n=r(e.target,"e-headercell")?r(e.target,"e-headercell").getAttribute("data-uid"):null):r(e.target,"e-content")&&(i="Content",n=r(e.target,"e-rowcell")?r(e.target,"e-rowcell").getAttribute("data-uid"):null),"Header"!=i&&"Content"!=i&&"Pager"!=i&&"Edit"!=i||this.dotNetRef.invokeMethodAsync("MouseDownHandler",i,n)}},i.prototype.gridFocus=function(e){!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridform"))&&this.element.querySelector(".e-gridform").classList.contains("e-editing")||this.dotNetRef.invokeMethodAsync("GridFocus",e)},i.prototype.keyActionHandler=function(e){var t,i=this,n=e.target.tagName;t=!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridform"))&&this.element.querySelector(".e-gridform").classList.contains("e-editing")&&"SELECT"==n,("pageUp"===e.action||"pageDown"===e.action||"ctrlAltPageUp"===e.action||"ctrlAltPageDown"===e.action||"altPageUp"===e.action||"altPageDown"===e.action||"altDownArrow"===e.action&&!t||"ctrlPlusP"===e.action)&&e.preventDefault();var s=this.isPopUpOpened(e),o=r(e.target,"e-autocomplete");if(!sf.base.isNullOrUndefined(o)){var a=o.id+"_popup";if(!sf.base.isNullOrUndefined(document.getElementById(a)))return}r(e.target,"e-unboundcelldiv")&&"enter"===e.action&&e.target.classList.contains("e-Savebutton")||"enter"===e.action&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridform"))&&this.element.querySelector(".e-gridform").classList.contains("e-editing")&&"Batch"!==this.options.editMode&&(s&&"false"===e.target.getAttribute("aria-expanded")||!s)&&setTimeout((function(){e.target.blur(),i.dotNetRef.invokeMethodAsync("EndEdit",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey})}),40)},i.prototype.destroy=function(e){this.unWireEvents(),this.frozenDragDropModule.unwireEvents(),e&&this.virtualContentModule.removeEventListener(),this.addScrollEvents(!1),this.toolTipModule.destroy(),this.keyModule.destroy(),this.columnChooserModule.removeMediaListener(),this.selectionModule.removeEventListener(),this.rowDragAndDropModule.destroy(),this.headerDragDrop.destroy()},i.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},i.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},i.prototype.getRowHeight=function(){return this.options.rowHeight?this.options.rowHeight:function(e){if(void 0!==t)return t;var i=sf.base.createElement("table",{className:"e-table",styles:"visibility: hidden"});i.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(i);var n=i.querySelector("td").getBoundingClientRect();return e.removeChild(i),t=Math.ceil(n.height)}(this.element)},i.prototype.clientActions=function(){!this.options.enableVirtualization&&!this.options.enableColumnVirtualization||12!==this.options.pageSize&&"auto"!==this.options.width||this.virtualContentModule.ensurePageSize(),this.getColumns().some((function(e){return""!==e.hideAtMedia}))&&this.columnChooserModule.setMediaColumns()},i.prototype.print=function(){this.removeColGroup();var e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no");e.moveTo(0,0),e.resizeTo(screen.availWidth,screen.availHeight),sf.base.print(this.element,e)},i.prototype.removeColGroup=function(){var e=this.options.groupCount,t=this.element,i="#"+this.element.id;if(e){for(var n=t.querySelectorAll(".e-groupcaption"),s=n[e-1].getAttribute("colspan"),o=0;o<n.length;o++)n[o].setAttribute("colspan",s);var r=t.querySelectorAll("colgroup"+i+"colGroup"),a=t.querySelector(".e-content").querySelectorAll("colgroup");this.hideColGroup(r,e),this.hideColGroup(a,e)}},i.prototype.hideColGroup=function(e,t){for(var i=0;i<e.length;i++)for(var n=0;n<t;n++)e[i].children[n].style.display="none"},i.prototype.getModuleName=function(){return"grid"},i}(),G={pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",enter:"enter"};return{initialize:function(e,t,i,n){sf.base.enableBlazorMode(),new Z(e,t,i,n)},contentReady:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.element.blazor__instance)){var o=s.element.blazor__instance;if(o.setOptions(t,o.options),o.options=t,o.scrollModule.setPadding(),o.contentReady(i,n),o.options.isColumnWidthChanged)new v(o).setWidthToTable();"100%"==t.height&&o.scrollModule.refresh()}},refreshPivotRowHeight:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.freezeModule.refreshFreeze({case:"textwrap"})},customFilterDialog:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)){var s=document.querySelector("#"+t);if(s.style.maxHeight="100%",s.style.border="1px",s.style.top="0px",i){var o=n.element.querySelector(".e-sfcontextmenu");o.querySelector("li").style.paddingLeft="0px",o.querySelector(".e-caret").style.paddingRight="8px"}}},setCustomFilterDialogPadding:function(e,t){document.querySelector("#"+t).style.padding="16px"},searchClear:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)){var s=document.querySelector("#"+t);s.value=sf.base.isNullOrUndefined(i)?"":i,s.focus()}},updateTableWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;if(n.options.columns=t,n.options.allowResizing&&n.options.isResizedGrid){var s=new v(n),o=t.some((function(e){return""==e.width||null==e.width}));s.setWidthToTable(t,o)}}},preventResizeAction:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.resizeModule.preventResizeAction(t)},preventFreezeLineMoving:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.frozenDragDropModule.preventFreezeLineMoving(t)},freezeLineMovedActions:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.options.actualFrozenColumns=t.actualFrozenColumns,n.options.columns=t.columns,n.options.frozenRightCount=t.frozenRightCount,n.options.frozenLeftCount=t.frozenLeftCount,n.options.frozenLeftColumnsCount=t.frozenLeftColumnsCount,n.options.frozenColumns=t.frozenColumns,n.options.isColumnReordered=t.isColumnReordered,n.freezeLineMovedAction(),n.freezeModule.setFrozenHeight()}},frozenHeight:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)){var s=n.element.blazor__instance;s.freezeModule.setFrozenHeight(),t.allowTextWrap&&(s.freezeModule.refreshRowHeight(),s.freezeModule.refreshFreeze({case:"textwrap"})),t.allowResizing&&s.freezeModule.updateResizeHandler()}},updateVirtualColumns:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;if(n.options.virtualizedColumns=t,n.options.allowResizing&&0==n.options.frozenColumns&&""!=n.getContent().querySelector("table").style.width)new v(n).setWidthToTable(null,!1,"resize")}},updateOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.setOptions(t,n.options)}},virtualHeight:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)){var s=n.element.blazor__instance;s.options=t,s.options.totalItemCount=i,s.virtualContentModule.refreshOffsets(),s.virtualContentModule.setVirtualHeight()}},lazyGroupExpand:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.setOptions(t,n.options),n.options=t,n.options.enableVirtualization&&n.virtualContentModule.onDataReady(),n.options.enableInfiniteScrolling&&(n.scrollModule.infiniteOnDataReady(),n.scrollModule.isLazyChidLoad=!1)}},viewRefresh:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=void 0;n=new v(i);var s=(t=t.filter((function(e){return e.visible}))).some((function(e){return""==e.width||null==e.width}));i.parent.getColumns(),i.options.frozenColumns&&i.parent.updateColumnLevelFrozen(),n.setWidthToTable(t,s)}},virtualDisconnect:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||sf.base.isNullOrUndefined(i.element.blazor__instance.virtualContentModule)||(i.element.blazor__instance.options.enableVirtualization=t.enableVirtualization,i.element.blazor__instance.virtualContentModule.observer.disconnect())},reorderColumns:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||n.element.blazor__instance.reorderModule.reorderColumns(t,i)},reorderColumnByIndex:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||n.element.blazor__instance.reorderModule.reorderColumnByIndex(t,i)},reorderColumnByTargetIndex:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||n.element.blazor__instance.reorderModule.reorderColumnByTargetIndex(t,i)},renderColumnChooser:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.columnChooserModule.renderColumnChooser()},renderColumnMenu:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)?{Left:1,Top:1}:s.element.blazor__instance.columnMenuModule.renderColumnMenu(t,i,n)},renderAdaptiveMenuItems:function(e){var t=window.sfBlazor.getCompInstance(e),i=document.getElementsByClassName("e-"+t.element.id+"-column-menu")[0],n=sf.base.isNullOrUndefined(i)?null:i.getElementsByTagName("ul")[0],o=document.getElementById(t.element.id+"_responsivetoolbaritems"),r=o.getBoundingClientRect(),a=r.left+pageXOffset,l=r.bottom+pageYOffset,h=n.getBoundingClientRect(),d=document.documentElement;r.bottom+h.height>d.clientHeight&&l-r.height-h.height>d.clientTop&&(l=l-r.height-h.height),r.left+h.width>d.clientWidth&&r.right-h.width>d.clientLeft&&(a=a+r.width-h.width),a="0"==o.getAttribute("data-index")?a-n.getBoundingClientRect().width+h.width:a-n.getBoundingClientRect().width+r.width-s(),i.style.left=Math.ceil(a+1)+"px",i.style.top=Math.ceil(l+1)+"px"},filterPopupRender:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(o.element)||sf.base.isNullOrUndefined(o.element.blazor__instance)||o.element.blazor__instance.filterModule.filterPopupRender(t,i,n,s)},clientHeight:function(e){var t=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)?0:Math.max(t.element.blazor__instance.content.clientHeight,window.innerHeight||0)},clientTransformUpdate:function(e,t,i,n){void 0===n&&(n=!1);var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)||s.element.blazor__instance.virtualContentModule.updateTransform(t,i,n)},autoFitColumns:function(e,t,i,n,s){void 0===s&&(s=!1);var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o.element)&&!sf.base.isNullOrUndefined(o.element.blazor__instance)){var r=o.element.blazor__instance;if(n&&(r.options.columns=t,r.resizeModule.autoFitColumns(i)),s)new v(r).setPersistedWidth(t[0])}},autoFit:function(e){var t=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(t.element)&&!sf.base.isNullOrUndefined(t.element.blazor__instance)){var i=t.element.blazor__instance;i.resizeModule.autoFit(),i.scrollModule.setPadding()}},refreshColumnIndex:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.options.columns=t,n.virtualContentModule.refreshColumnIndexes()}},focus:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e),r=o.element.querySelector('[data-uid="'+i+'"]'),a=r.classList.contains("e-recordplusexpand")||r.classList.contains("e-recordpluscollapse");if(!sf.base.isNullOrUndefined(o.element)&&!sf.base.isNullOrUndefined(o.element.blazor__instance)&&!sf.base.isNullOrUndefined(r)){var l=o.element.blazor__instance;!l.options.enableVirtualization||l.options.enableVirtualization&&!sf.base.isNullOrUndefined(n)&&("UpdateRecord"===n||"ScrollSelect"===n)||l.options.enableColumnVirtualization&&!sf.base.isNullOrUndefined(n)&&"ScrollSelect"===n||a?r.focus():l.virtualContentModule.focusCell(r,n,s)}},handleCheckBoxSelection:function(e){var t=window.sfBlazor.getCompInstance(e);if(t.element.querySelectorAll(".e-ftrchk.e-chkfocus").length>0)for(var i=t.element.querySelectorAll(".e-ftrchk.e-chkfocus"),n=r(document.activeElement,"e-ftrchk"),s=0;s<i.length;s++)(sf.base.isNullOrUndefined(n)||i[s].getAttribute("uid")!=n.getAttribute("uid")&&!n.classList.contains("e-selectall"))&&i[s].classList.remove("e-chkfocus")},focusFilterCheckBox:function(e,t,i){var n=window.sfBlazor.getCompInstance(e),s=n.element.querySelector(".e-selectall");i?(s.classList.contains("e-chkfocus")||r(s,"e-ftrchk").classList.add("e-chkfocus"),n.element.querySelector(".e-selectall").focus()):n.element.querySelector('[uid="'+t+'"]').querySelector(".e-chk-hidden").focus()},focusFilterDialogElements:function(e,t){var i=window.sfBlazor.getCompInstance(e),n=document.activeElement,s=i.element.querySelectorAll(".e-ftrchk"),o="Tab"==t||"ShiftTab"==t;if(i.element.querySelectorAll(".e-ftrchk.e-chkfocus").length>0)for(var a=i.element.querySelectorAll(".e-ftrchk.e-chkfocus"),l=0;l<a.length;l++)a[l].classList.remove("e-chkfocus");if(n.classList.contains("e-chk-hidden")&&o&&!sf.base.isNullOrUndefined(r(n,"e-ftrchk")))r(document.activeElement,"e-ftrchk").classList.add("e-chkfocus");else if("ArrowDown"!=t||sf.base.isNullOrUndefined(r(n,"e-searchbox")))if("ArrowDown"!=t&&"ArrowUp"!=t||!n.classList.contains("e-chk-hidden")){if(("ArrowDown"==t||"ArrowUp"==t)&&n.classList.contains("e-primary")&&n.classList.contains("e-flat")){!sf.base.isNullOrUndefined(i.element.querySelector(".e-flat:not(.e-primary)"))&&"ArrowDown"==t?i.element.querySelector(".e-flat:not(.e-primary)").focus():"ArrowUp"==t&&(s[s.length-1].classList.add("e-chkfocus"),s[s.length-1].querySelector(".e-chk-hidden").focus())}else if("ArrowUp"==t&&n.classList.contains("e-flat")&&!n.classList.contains("e-primary")){!sf.base.isNullOrUndefined(i.element.querySelector(".e-primary.e-flat"))&&i.element.querySelector(".e-primary.e-flat").focus()}}else{var h=Array.from(r(n,"e-checkboxlist").children),d=h.indexOf(r(document.activeElement,"e-ftrchk"));if(d<h.length-1&&"ArrowDown"==t)h[d+1].classList.add("e-chkfocus"),h[d+1].querySelector(".e-chk-hidden").focus();else if(d==h.length-1&&"ArrowDown"==t){!sf.base.isNullOrUndefined(i.element.querySelector(".e-primary.e-flat"))&&i.element.querySelector(".e-primary.e-flat").focus()}else if(d-1>=0&&"ArrowUp"==t)h[d-1].classList.add("e-chkfocus"),h[d-1].querySelector(".e-chk-hidden").focus();else if("ArrowUp"==t&&s[0].querySelector(".e-chk-hidden")==n){!sf.base.isNullOrUndefined(i.element.querySelector(".e-searchinput.e-input"))&&i.element.querySelector(".e-searchinput.e-input").focus()}}else i.element.querySelector(".e-ftrchk").classList.add("e-chkfocus"),i.element.querySelector(".e-ftrchk").querySelector(".e-chk-hidden").focus()},blurActiveElement:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||sf.base.isNullOrUndefined(r(document.activeElement,"e-grid"))||document.activeElement.blur()},iterateElements:function(e,t,i){for(var n=e.children.length-1;n>=0;n--){if(e.children[n].classList.contains("sf-grid")&&!i){var s=sf.base.isNullOrUndefined(t.querySelector(".e-pagercontainer")),o=sf.base.isNullOrUndefined(t.querySelector(".e-lastpage"));return void(s?t.querySelectorAll(".e-rowcell:not(.e-hide)")[t.querySelectorAll(".e-rowcell:not(.e-hide)").length-1].focus():s||o?!s&&o&&t.querySelectorAll(".e-numericitem")&&t.querySelectorAll(".e-numericitem")[t.querySelectorAll(".e-numericitem").length-1].focus():t.querySelector(".e-lastpage").focus())}if(0==e.children[n].tabIndex)return void e.children[n].focus();if(!sf.base.isNullOrUndefined(e.children[n].children)&&0!=e.children[n].children.length&&(this.iterateElements(e.children[n],t,i),!document.activeElement.classList.contains("e-detailcell")))return}},focusDetailTemplateElements:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!(sf.base.isNullOrUndefined(n.element)&&sf.base.isNullOrUndefined(n.element.blazor__instance)&&sf.base.isNullOrUndefined(r(document.activeElement,"e-grid")))){var s=document.activeElement.querySelector(".e-grid"),o=sf.base.isNullOrUndefined(s);if("Tab"==t)document.activeElement.blur();else if("ShiftTab"==t){var a=r(document.activeElement,"e-detailcell").firstElementChild;if(0!=a.children.length&&i&&this.iterateElements(a,s,o),document.activeElement.classList.contains("e-detailcell")){var l=document.activeElement.parentElement.previousElementSibling.querySelectorAll(".e-rowcell:not(.e-hide)");return void l[l.length-1].focus()}}}},updateFilterBarCell:function(e,t,i){var n=window.sfBlazor.getCompInstance(e).element.querySelector(".e-filterbar");sf.base.isNullOrUndefined(n)||t.forEach((function(e,t){var s=n.querySelectorAll("#"+e+"_filterBarcell");s.length>0&&(s[0].value=i[t])}))},focusFilterBar:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e),o=s.element.querySelector(".e-filterbar");if(!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.element.blazor__instance)&&!sf.base.isNullOrUndefined(o))if("Tab"==t){if(document.activeElement.classList.contains("e-headercell")){var r=o.querySelector(".e-textbox.e-input:not([disabled])");if(i){var a=o.querySelector(".e-fltrinputdiv").querySelector("input");sf.base.isNullOrUndefined(a)?o.querySelector(".e-fltrinputdiv").children[0].focus():a.focus()}else sf.base.isNullOrUndefined(r)||r.focus()}}else if("ShiftTab"==t){if(document.activeElement.classList.contains("e-rowcell")||document.activeElement.classList.contains("e-recordplusexpand")){r=o.querySelectorAll(".e-textbox.e-input:not([disabled])");if(i){var l=o.querySelectorAll(".e-fltrinputdiv"),h=l[l.length-1].querySelector("input");sf.base.isNullOrUndefined(h)?l[l.length-1].children[0].focus():h.focus()}else sf.base.isNullOrUndefined(r)||r[r.length-1].focus()}}else if("ArrowUp"==t||"ArrowDown"==t)if(document.activeElement.classList.contains("e-groupcaption")||document.activeElement.classList.contains("e-recordplusexpand"))o.querySelector(".e-textbox.e-input:not([disabled])").focus();else if(i){a=o.querySelectorAll(".e-fltrinputdiv")[-1==n?document.activeElement.getAttribute("data-colIndex"):n].querySelector("input");sf.base.isNullOrUndefined(a)?o.querySelectorAll(".e-fltrinputdiv")[-1==n?document.activeElement.getAttribute("data-colIndex"):n].children[0].focus():a.focus()}else o.querySelectorAll(".e-input")[-1==n?document.activeElement.getAttribute("data-colIndex"):n].focus()},focusFirstGroupHeader:function(e){var t=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(t.element)&&!sf.base.isNullOrUndefined(t.element.blazor__instance)){var i=t.element.querySelector(".e-groupheadercell");sf.base.isNullOrUndefined(i)||i.focus()}},focusExcelInput:function(e,t){var i=window.sfBlazor.getCompInstance(e),n=document.querySelector("#"+t+"_excelDlg");sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||sf.base.isNullOrUndefined(n)||setTimeout((function(){n.querySelector("#"+i.element.id+"_SearchBox").focus()}),10)},refreshOnDataChange:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.virtualContentModule.refreshOnDataChange()},updateAutofillPosition:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)?null:n.element.blazor__instance.selectionModule.updateAutofillPosition(t,i)},createBorder:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)?null:n.element.blazor__instance.selectionModule.createBorder(t,i)},removePersistItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var n=i.element.blazor__instance;n.getHeaderTable().style.width="",n.getContentTable().style.width="",0!=n.options.aggregatesCount&&(n.getFooterContent().querySelector(".e-table").style.width=""),n.options.frozenColumns>0&&(n.element.querySelector(".e-movableheader").querySelector(".e-table").style.width="",n.element.querySelector(".e-movablecontent").querySelector(".e-table").style.width="")}localStorage.removeItem(t)},focusChild:function(e,t,i){var n=window.sfBlazor.getCompInstance(e),s=n.element.querySelector('[data-uid="'+i+'"]').firstElementChild.children,o=n.iterateTemplateElementsForward(s);return sf.base.isNullOrUndefined(o)?n.element.querySelector('[data-uid="'+i+'"]').focus():o.focus(),!sf.base.isNullOrUndefined(o)},exportSave:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);var o=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.destroy(t)},validation:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||n.element.blazor__instance.editModule.createTooltip(t,i)},focusCell:function(e,t,i,n){void 0===n&&(n=!1);var s=window.sfBlazor.getCompInstance(e);i&&!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.element.blazor__instance)&&s.element.blazor__instance.options.frozenColumns&&(s.element.querySelector(".e-frozencontent").style.height=s.element.querySelector(".e-movablecontent").getBoundingClientRect().height+"px");var o="#"+t.replace(/[.]/g,"___");if(n)for(var r=[].slice.call(s.element.querySelectorAll("form")),a=void 0,l=0;l<r.length;l++)(a=r[l].querySelector("td:not(.e-hide)")).style.height=sf.base.closest(a,".e-row").getBoundingClientRect().height+"px";var h=s.element.querySelector(o);if(""!==t&&null===h&&o.includes("___")&&(o=o.split("___").pop(),h=s.element.querySelector("#"+o)),""===t&&s.element.querySelector("input.e-boolcell"))s.element.querySelector("input.e-boolcell").focus();else if(""!==t&&h){var d=s.getContent().querySelector("tbody").classList.contains("e-addedrow"),c=s.options.enableVirtualization&&s.options.allowEditing&&s.options.isEdit&&!d;h.focus({preventScroll:c})}},CurrentPageFocus:function(e,t,i){var n=window.sfBlazor.getCompInstance(e).element.querySelector(".e-numericcontainer");"PreviousPage"==t||n.querySelectorAll(".e-link:last-child")[0].innerText!=i?n.querySelector(".e-link").focus():n.querySelectorAll(".e-link:last-child")[0].focus()},pagerFocus:function(e,t){var i=window.sfBlazor.getCompInstance(e).element.querySelector(".e-gridpager").querySelector(".e-pagercontainer"),n=i.querySelector(".e-numericcontainer"),s=i.querySelector(".e-firstpage.e-pager-default"),o=i.querySelector(".e-prevpage.e-pager-default");if("ArrowDown"===t)return s?(s.focus(),"FirstPage"):o?(s.focus(),"PreviousPage"):(n.querySelectorAll(".e-link")[1].focus(),"1");if("ArrowRight"==t)return null!=s&&s.classList.contains("e-focused")?(o.focus(),"PreviousPage"):null!=o&&o.classList.contains("e-focused")||null!=i.querySelector(".e-pp.e-focused")?null==i.querySelector(".e-pp")||i.querySelector(".e-pp").classList.contains("e-focused")?(n.querySelectorAll(".e-link")[0].focus(),n.querySelectorAll(".e-link")[0].innerText):(i.querySelector(".e-pp").focus(),"PreviousPagerCount"):n.querySelectorAll(".e-link.e-focused").length>0&&null!=i.querySelector(".e-link.e-focused")&&null!=i.querySelector(".e-link.e-focused").nextElementSibling?(n.querySelector(".e-link.e-focused").nextElementSibling.focus(),n.querySelector(".e-link.e-focused").nextElementSibling.innerText):n.querySelectorAll(".e-link.e-focused").length>0&&null!=i.querySelector(".e-np")&&null==i.querySelector(".e-np.e-focused")?(i.querySelector(".e-np").focus(),"NextPagerCount"):n.querySelectorAll(".e-link.e-focused").length>0||i.querySelectorAll(".e-np.e-focused").length>0?null!=i.querySelector(".e-nextpage")?(i.querySelector(".e-nextpage").focus(),"NextPage"):(n.querySelector(".e-link.e-focused").focus(),n.querySelector(".e-link.e-focused").innerText):(i.querySelector(".e-nextpage.e-focused"),i.querySelector(".e-lastpage").focus(),"LastPage");if("ArrowLeft"==t){if(null!=o&&o.classList.contains("e-focused"))return s.focus(),"FirstPage";if(o&&i.querySelector(".e-pp.e-focused"))return o.focus(),"PreviousPage";if(n.querySelectorAll(".e-link")[0].classList.contains("e-focused"))return null!=i.querySelector(".e-pp")?(i.querySelector(".e-pp").focus(),"PreviousPagerCount"):o?(o.focus(),"PreviousPage"):(n.querySelectorAll(".e-link")[0].focus(),"1");if(n.querySelectorAll(".e-link.e-focused").length>0)return n.querySelector(".e-link.e-focused").previousElementSibling.focus(),n.querySelector(".e-link.e-focused").previousElementSibling.innerText;if(i.querySelectorAll(".e-nextpage.e-focused").length>0&&null!=i.querySelector(".e-np"))return i.querySelector(".e-np").focus(),"NextPagerCount";if(i.querySelectorAll(".e-nextpage.e-focused").length>0||i.querySelectorAll(".e-np.e-focused").length>0){var r=n.querySelectorAll(".e-link").length;return n.querySelectorAll(".e-link")[r-1].focus(),n.querySelectorAll(".e-link:last-child")[0].innerText}return null!=i.querySelector(".e-lastpage.e-focused")?(i.querySelector(".e-nextpage").focus(),"NextPage"):s.classList.contains(".e-disabled")?"0":(s.focus(),"FirstPage")}return"0"},setFrozenHeight:function(e){e.querySelector(".e-frozencontent").style.height=e.querySelector(".e-movablecontent").offsetHeight-s()+"px"},printGrid:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.print()},updateMediaColumns:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.columnChooserModule.updateMediaColumns(t)},copyToClipBoard:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.clipboardModule.copy(t)},preventCopyToClipBoard:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e),o=s.clipboardModule;sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)||("Copy"===n?o.clipBoardData(t,i):"Paste"===n&&o.pasteAction(i,o.getSelectedRowCellIndexes()[0].rowIndex,o.getSelectedRowCellIndexes()[0].cellIndexes[0],t))},preventPasteAction:function(e,t,i,n,s,o){var r=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(r.element)||sf.base.isNullOrUndefined(r.element.blazor__instance)||r.element.blazor__instance.clipboardModule.pasteData(t,i,n,s,o)},setMediaColumns:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.columnChooserModule.setMediaColumns(t)},gridFocus:function(e){var t=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(t.element)){var i=t.element.querySelectorAll(".e-groupheadercell").length;if(0!=t.element.querySelectorAll(".e-toolbar-item").length){var n=t.element.querySelectorAll(".e-toolbar-item:not(.e-overlay)"),s=null;if(!sf.base.isNullOrUndefined(n)&&0!=n.length){var o=n.length-1;if(!sf.base.isNullOrUndefined(n[o].querySelector(".e-tbar-btn"))){for(var a=o;a>=0;a--)if(!sf.base.isNullOrUndefined(n[a].querySelector(".e-tbar-btn"))&&0==n[a].querySelector(".e-tbar-btn").tabIndex){s=n[a].querySelector(".e-tbar-btn");break}return void s.focus()}if(!sf.base.isNullOrUndefined(n[o].querySelector(".e-searchinput.e-input")))return void n[o].querySelector(".e-searchinput.e-input").focus()}}else{if(i>0&&(document.activeElement.classList.contains("e-headercell")||document.activeElement.classList.contains("e-recordplusexpand")||document.activeElement.classList.contains("e-recordpluscollapse"))){var l=t.element.querySelectorAll(".e-ungroupbutton");return void l[l.length-1].focus()}if(0==i&&t.options.allowGrouping&&document.activeElement.classList.contains("e-headercell"))return void t.element.querySelector(".e-groupdroparea").focus()}r(document.activeElement,"e-grid")&&t.element.focus()}},isMacDevice:function(){return-1!==navigator.userAgent.indexOf("Mac OS")},updateClonedMaskTranslates:function(e){var t=window.sfBlazor.getCompInstance(e).element.blazor__instance.getContent(),i=t.querySelector(".e-masked-table"),n=t.scrollHeight-i.getBoundingClientRect().height,s=t.scrollTop<=n?t.scrollTop:n;i.style.transform="translate(0px,"+s+"px)"},refreshScrollLeftPosition:function(e){var t=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(t.element)&&!sf.base.isNullOrUndefined(t.element.blazor__instance)){var i=t.element.blazor__instance.getContent(),n=i.scrollLeft;i.scrollLeft=n+20}},refreshGridPageSize:function(e){window.sfBlazor.getCompInstance(e).scrollModule.refresh()},scrollIntoView:function(e,t,i,n,s){void 0===s&&(s=!1);var o=window.sfBlazor.getCompInstance(e).element.blazor__instance,r=o.getContent(),a=r.scrollTop;o.virtualContentModule.focusColumnIndex=t,s?r.scrollTop=r.scrollHeight:-1!=i&&(r.scrollTop=-1!=n?i*n:i*o.getRowHeight(),o.virtualContentModule.selectedRowIndex=i,o.virtualContentModule.isScrollIntoview=!0,0==i&&0==a||a==r.scrollTop&&"left"!==o.virtualContentModule.scrollInfo.direction&&"right"!==o.virtualContentModule.scrollInfo.direction?(o.dotNetRef.invokeMethodAsync("SelectRow",i,o.virtualContentModule.isScrollIntoview,o.virtualContentModule.focusColumnIndex),o.virtualContentModule.selectedRowIndex=-1):i>=o.options.totalItemCount&&(o.virtualContentModule.selectedRowIndex=o.options.totalItemCount-1)),r=o.options.frozenColumns?o.scrollModule.getMovableContent():r;var l=o.virtualContentModule.vHelper.cOffsets,h=o.nColumnOffsets;setTimeout((function(){if(o.options.frozenColumns||-1==t||(o.options.enableColumnVirtualization?r.scrollLeft=l[t-1]:r.scrollLeft=h[t-1]),o.options.enableColumnVirtualization&&t>0&&o.options.frozenColumns){var e=t-(o.virtualContentModule.movableColumnIndex+1);r.scrollLeft=l[e]}}),20)}}}()},"./modules/sf-heatmap.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.HeatMap=function(){"use strict";var e=function(){function e(e,t){this.tapCount=0,this.isDoubleClick=!1,this.previousTargetID="",this.isSelectionRectCreated=!1,this.mouseClick=!1,this.checkCtrlKey=!1,this.tooltipRender=!0,this.isCellTapHold=!1,this.rect=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.resizeTimer=0,this.previousCellID="",window.sfBlazor=window.sfBlazor,this.element=e,this.dataId=e.id,window.sfBlazor.setCompInstance(this),this.dotnetRef=t}return e.prototype.initialize=function(e){var t=this;this.enableMultiSelect=e.EnableMultiSelect,this.allowSelection=e.AllowSelection,this.isRectType=e.IsRectType;var i=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,"click touchend",this.heatMapMouseClick,this),sf.base.EventHandler.add(this.element,"dblclick touchend",this.heatMapDoubleMouseClick,this),sf.base.EventHandler.add(this.element,"mousedown touchstart",this.heatMapMouseDown,this),sf.base.EventHandler.add(this.element,"mouseup touchend",this.heatMapMouseUp,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.heatMapMouseMove,this),sf.base.EventHandler.add(this.element,i,this.heatMapMouseLeave,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.heatMapMouseMove,this);var n=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,n,this.resizeBound.bind(this),this);var s=this.getElementBounds(this.element);return this.touchInstance=new sf.base.Touch(this.element,{tapHold:function(e){t.isCellTapHold=!0,t.isSelectionRectCreated=!0,t.cellTap(e)}}),"width:"+s.width+", height:"+s.height+", parentHeight:"+s.parentHeight},e.prototype.cellTap=function(e){this.allowSelection&&this.dotnetRef.invokeMethodAsync("HeatMapMouseClick",this.getEventArgs(e.originalEvent),this.getElementBounds(this.element),this.isCellTapHold,this.isSelectionRectCreated,!1)},e.prototype.heatMapMouseClick=function(e){var t=this;this.singleClickTimeout=setTimeout((function(){t.isDoubleClick||t.dotnetRef.invokeMethodAsync("HeatMapMouseClick",t.getEventArgs(e),t.getElementBounds(t.element),t.isCellTapHold,t.isSelectionRectCreated,!1)}),200),this.isSelectionRectCreated=!1},e.prototype.heatMapDoubleMouseClick=function(e){var t=this;if("touchend"===e.type){this.tapCount=this.tapCount>1?0:this.tapCount+1;var i=this;sf.base.isNullOrUndefined(this.tapCountTimer)&&(this.tapCountTimer=setTimeout((function(){window.clearTimeout(i.tapCountTimer),i.tapCountTimer=null,i.tapCount=0}),1e3))}(this.tapCount>1&&this.previousTargetID===e.target.id||"dblclick"===e.type)&&(this.isDoubleClick=!0,setTimeout((function(){t.isDoubleClick=!1}),1e3),this.dotnetRef.invokeMethodAsync("HeatMapMouseClick",this.getEventArgs(e),this.getElementBounds(this.element),this.isCellTapHold,this.isSelectionRectCreated,!0),this.isSelectionRectCreated=!1,this.previousTargetID="",clearTimeout(this.singleClickTimeout)),this.previousTargetID=e.target.id},e.prototype.heatMapMouseUp=function(e){var t=this;this.startRectValue=null;var i=document.getElementById(this.element.id+"_selectedCells"),n=null;i&&(this.mouseClick=!1,n=i.getBoundingClientRect(),i.remove(),this.isSelectionRectCreated&&!e.ctrlKey&&"touchend"===e.type&&(this.isCellTapHold=!0)),"touchend"===e.type&&this.tooltipfadeOut(e),this.tooltipRender=!0,this.initialX!=(e.changedTouches?e.changedTouches[0].clientX:e.clientX)&&null==n||"touchend"==e.type&&this.isCellTapHold?this.isCellTapHold=!0:this.isCellTapHold=!1,this.allowSelection&&this.isRectType&&("touchend"===e.type?setTimeout((function(){t.dotnetRef.invokeMethodAsync("HeatMapMouseUp",t.getEventArgs(e),n,t.getElementBounds(t.element),t.isCellTapHold,t.checkCtrlKey)}),200):this.dotnetRef.invokeMethodAsync("HeatMapMouseUp",this.getEventArgs(e),n,this.getElementBounds(this.element),this.isCellTapHold,this.checkCtrlKey))},e.prototype.heatMapMouseDown=function(e){if(this.allowSelection&&this.isRectType&&(-1!=e.target.id.indexOf(this.element.id+"_HeatMapRect_")||-1!=e.target.id.indexOf(this.element.id+"_HeatMapRectLabels_"))){""!=this.previousCellID&&"touchstart"!=e.type&&"touchmove"!=e.type&&this.selectionHighLight(e.target.id),this.mouseClick=!0,this.initialX=e.changedTouches?e.changedTouches[0].clientX:e.clientX,this.initialY=e.changedTouches?e.changedTouches[0].clientY:e.clientX;var t=void 0;null!=document.querySelector("#selectedCellStyles")&&0!=document.querySelector("#selectedCellStyles").length?(t=document.getElementById("selectedCellStyles")).innerHTML=".selectedCell {opacity: 0.3;}":((t=document.createElement("style")).id="selectedCellStyles",t.innerHTML=".selectedCell {opacity: 0.3;}"),document.body.appendChild(t)}},e.prototype.heatMapMouseLeave=function(e){var t=document.getElementById(this.element.id+"_selectedCells"),i=null;this.mouseClick&&(this.previousCellID=""),t&&(i=t.getBoundingClientRect(),t.remove(),this.startRectValue=null,this.mouseClick=!1),this.tooltipRender=!0,this.initialX=null,this.initialY=null,this.dotnetRef.invokeMethodAsync("HeatMapMouseLeave",this.getEventArgs(e),i,this.getElementBounds(this.element),this.isCellTapHold,this.checkCtrlKey)},e.prototype.heatMapMouseMove=function(e){var t=!0;if("touchstart"!=e.type&&"touchmove"!=e.type||e.preventDefault(),this.allowSelection&&this.enableMultiSelect&&this.isRectType&&!sf.base.isNullOrUndefined(this.initialX)&&!sf.base.isNullOrUndefined(this.initialY)&&this.mouseClick){var i=this.getEventArgs(e),n=0,s=0,o=void 0,r=void 0;"touchstart"===i.type||"touchmove"===i.type?(o=i.changedTouches.clientX,r=i.changedTouches.clientY):(o=i.clientX,r=i.clientY);var a=this.getElementBounds(document.getElementById(this.element.id+"_Container_RectGroup"));if(this.initialX>a.left&&this.initialY>a.top){var l=document.getElementById(this.element.id+"_svg").getBoundingClientRect();sf.base.isNullOrUndefined(this.startRectValue)&&(this.startRectValue=this.svgPoint(this.svg,o,r),this.checkCtrlKey=e.ctrlKey);var h=this.svgPoint(this.svg,o,r);if(h.x<a.right&&h.x>a.left&&h.y<a.bottom&&h.y>a.top&&(s=Math.abs((h.x<a.right?h.x:a.right)-this.startRectValue.x),n=Math.abs((h.y<a.bottom?h.y:a.bottom)-this.startRectValue.y),h.x=h.x>this.startRectValue.x?this.startRectValue.x:h.x,h.y=h.y>this.startRectValue.y?this.startRectValue.y:h.y,"touchstart"!==i.type&&"touchmove"!==i.type||(this.tooltipRender=!0,this.tooltipfadeOut(e)),this.enableMultiSelect&&(h.x=h.x-l.x,h.y=h.y-l.y,this.rect.setAttributeNS(null,"x",h.x.toString()),this.rect.setAttributeNS(null,"y",h.y.toString()),this.rect.setAttributeNS(null,"id",this.element.id+"_selectedCells"),this.rect.setAttributeNS(null,"width",s.toString()),this.rect.setAttributeNS(null,"height",n.toString()),this.rect.setAttributeNS(null,"fill","#87ceeb"),this.rect.setAttributeNS(null,"stroke-dasharray","0"),this.rect.setAttributeNS(null,"opacity","0.5"),this.rect.setAttributeNS(null,"stroke","#0000ff"),document.getElementById(this.element.id+"_Container_RectGroup").appendChild(this.rect),s>0||n>0))){this.isSelectionRectCreated=!0,this.tooltipRender=!1;var d=document.getElementById(this.element.id+"_tooltip_svg");if(d&&d.remove(),t=!1,!e.ctrlKey&&(-1!=e.target.id.indexOf(this.element.id+"_HeatMapRect_")||-1!=e.target.id.indexOf(this.element.id+"_HeatMapRectLabels_"))){""!=this.previousCellID&&this.selectionHighLight(e.target.id);for(var c=document.getElementById(this.element.id+"_Container_RectGroup"),p=document.getElementById(this.element.id+"_Container_TextGroup"),u=0;u<c.childNodes.length;u++){var f=c.childNodes[u];!sf.base.isNullOrUndefined(f.id)&&f.id.indexOf("HeatMapRect")>-1&&f.classList.add("selectedCell")}for(u=0;u<p.childNodes.length;u++){f=p.childNodes[u];!sf.base.isNullOrUndefined(f.id)&&f.id.indexOf("_HeatMapRectLabels_")>-1&&(f.removeAttribute("opacity"),f.setAttribute("style","opacity:0.3"),f.classList.add("selectedCell"))}}}}}!this.allowSelection||this.enableMultiSelect||!this.mouseClick||"touchmove"!=e.type&&"mousemove"!=e.type||""!=this.previousCellID&&"0.3"==document.getElementById(this.previousCellID).getAttribute("opacity")&&(this.previousCellID=""),this.dotnetRef.invokeMethodAsync("HeatMapMouseMove",this.getEventArgs(e),this.getElementBounds(this.element),t,sf.base.Browser.isDevice)},e.prototype.svgPoint=function(e,t,i){var n=this.svg.createSVGPoint();return n.x=t,n.y=i,e.getScreenCTM()?n.matrixTransform(e.getScreenCTM().inverse()):n},e.prototype.selectionHighLight=function(e){if(-1!=e.indexOf(this.element.id+"_HeatMapRectLabels_")){var t=e.replace(this.element.id+"_HeatMapRectLabels_",this.element.id+"_HeatMapRect_"),i=parseInt(t.split("_")[2]);i++;var n=t.slice(0,t.lastIndexOf("_")+1)+i.toString();this.previousCellID=n,document.getElementById(this.previousCellID)&&this.setOpacity(document.getElementById(this.previousCellID),"1")}else document.getElementById(this.previousCellID)&&this.setOpacity(document.getElementById(this.previousCellID),"1"),this.previousCellID=e},e.prototype.tooltipfadeOut=function(e){var t=this;if(this.tooltipTimer&&(window.clearTimeout(this.tooltipTimer),this.tooltipTimer=null),"touchstart"===e.type||"touchend"===e.type){var i=window.sfBlazor.getCompInstance(this.element.id);this.tooltipTimer=setTimeout((function(){sf.base.isNullOrUndefined(i.tooltip)||sf.base.isNullOrUndefined(i.tooltip.element)||sf.base.isNullOrUndefined(i.tooltip.element.firstElementChild)||i.tooltip.fadeOut(),t.dotnetRef.invokeMethodAsync("RemoveTooltip",!0,e.target.id),""!=t.previousCellID&&(t.previousCellID=""),t.selectionHighLight(e.target.id),window.clearTimeout(t.tooltipTimer),t.tooltipTimer=null}),1500),e&&"touchmove"===e.type&&e.preventDefault()}},e.prototype.resizeBound=function(){var e,t,i=this;if(!sf.base.isNullOrUndefined(this.element)&&!sf.base.isNullOrUndefined(document.getElementById(this.element.id+"_svg"))){var n=document.getElementById(this.element.id+"_svg");n.style.display="none";var s=this.getElementBounds(this.element);e=s.width,t=s.height,n.style.removeProperty("display")}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,this.resizeTimer&&clearTimeout(this.resizeTimer),this.element&&(this.resizeTimer=setTimeout((function(){return i.dotnetRef.invokeMethodAsync("ResizeBound",t,e)}),500)))},e.prototype.setMouseXY=function(e,t,i){var n=document.getElementById(i).getBoundingClientRect(),s=document.getElementById(i).getBoundingClientRect();this.mouseY=t-s.top-Math.max(n.top-s.top,0),this.mouseX=e-s.left-Math.max(n.left-s.left,0)},e.prototype.renderTooltip=function(e,t,i,n,s,o,r,a,l,h,d,c,p){if(this.tooltipRender){var u=document.getElementById(t+"_svg"),f=!(u&&parseInt(u.getAttribute("opacity"),10)>0),g="string"==typeof i?JSON.parse(i):i;r||o||this.updateCellHighlight(i.id,s),sf.base.isNullOrUndefined(p)||(g.inverted=!p,g.enableAnimation=!1),d&&"TailwindDark"==d&&(g.fill="#F9FAFB"),d&&"Bootstrap5Dark"==d&&(g.fill="#E9ECEF");var m=window.sfBlazor.getCompInstance(e);g.content=g.xLabel+g.yLabel+g.value,f&&!sf.base.isNullOrUndefined(m)&&(g.content=g.displayText,g.location={x:g.x+g.width/2,y:g.y+g.height/2},g.areaBounds={height:n.height+n.y,width:n.width,x:n.x},g.opacity="Tailwind"==d||"TailwindDark"===d||"Bootstrap5"===d||"Bootstrap5Dark"===d?1:.75,g.theme=d,g.fill=l,g.header=c,m.tooltip=new sf.svgbase.Tooltip(g),m.tooltip.enableAnimation=!1,m.tooltip.border.width=sf.base.isNullOrUndefined(h)?m.tooltip.border.width:h.width,m.tooltip.border.color=sf.base.isNullOrUndefined(h)?m.tooltip.border.color:h.color,m.tooltip.appendTo("#"+t)),sf.base.isNullOrUndefined(m.tooltip)||(sf.base.isNullOrUndefined(a)||(m.tooltip.textStyle.color=a.color||m.tooltip.textStyle.color,m.tooltip.textStyle.fontFamily=a.fontFamily||m.tooltip.textStyle.fontFamily,m.tooltip.textStyle.fontStyle=a.fontStyle||m.tooltip.textStyle.fontStyle,m.tooltip.textStyle.fontWeight=a.fontWeight||m.tooltip.textStyle.fontWeight,m.tooltip.textStyle.size=a.size||m.tooltip.textStyle.size),d&&"Tailwind"==d&&(m.tooltip.textStyle.color="#FFFFFF",m.tooltip.textStyle.fontWeight="500",m.tooltip.textStyle.size="12px",m.tooltip.textStyle.fontFamily="Inter"),d&&"TailwindDark"==d&&(m.tooltip.textStyle.color="#1F2937",m.tooltip.textStyle.fontWeight="500",m.tooltip.textStyle.size="12px",m.tooltip.textStyle.fontFamily="Inter"),d&&"Bootstrap5"==d&&(m.tooltip.border.width=0,m.tooltip.border.color="",m.tooltip.fill="",m.tooltip.opacity=.75,m.tooltip.textStyle.opacity=1,m.tooltip.textStyle.color=null,m.tooltip.textStyle.fontWeight="Normal",m.tooltip.textStyle.size="13px",m.tooltip.textStyle.fontFamily="Segoe UI"),d&&"Bootstrap5Dark"==d&&(m.tooltip.textStyle.color="#212529",m.tooltip.textStyle.fontWeight="500",m.tooltip.textStyle.size="14px",m.tooltip.textStyle.fontFamily="system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'"),d&&"Material3"==d&&(m.tooltip.textStyle.color="#F4EFF4",m.tooltip.textStyle.fontWeight="400",m.tooltip.textStyle.size="14px",m.tooltip.textStyle.fontFamily="Roboto"),d&&"Material3Dark"==d&&(m.tooltip.textStyle.color="#313033",m.tooltip.textStyle.fontWeight="400",m.tooltip.textStyle.size="14px",m.tooltip.textStyle.fontFamily="Roboto"),g.toolTipX=g.x+g.width/2,g.toolTipY=g.y+g.height/2,g.content=g.displayText,m.tooltip.location=new sf.svgbase.TooltipLocation(g.toolTipX,g.toolTipY),m.tooltip.content=[g.content],m.tooltip.dataBind())}},e.prototype.removeOpacity=function(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(!sf.base.isNullOrUndefined(n.id)&&n.id.indexOf("HeatMapRect")>-1){document.getElementById(n.id).classList.remove("selectedCell");var s=parseInt(n.id.replace(e+"_HeatMapRect_",""),10),o=document.getElementById(e+"_HeatMapRectLabels_"+(s-1));o.classList.remove("selectedCell"),o.setAttribute("style","opacity: 1")}}},e.prototype.setSelectionProperty=function(e,t,i){this.allowSelection=e,this.enableMultiSelect=t,this.isRectType=i},e.prototype.updateCellHighlight=function(e,t){this.previousCellID!==e&&(""!=this.previousCellID&&this.setOpacity(document.getElementById(this.previousCellID),"1"),t&&(this.setOpacity(document.getElementById(e),"0.65"),this.previousCellID=e))},e.prototype.setOpacity=function(e,t){e.setAttribute("opacity",t)},e.prototype.getElementBounds=function(e){var t,i,n,s,o,r,a;if(null!=e){var l=e.getBoundingClientRect();t=l.width,i=l.height,a=e.parentElement?e.parentElement.offsetHeight:l.height,r=l.left,n=l.top,o=l.right,s=l.bottom}return{width:Math.ceil(t),height:Math.ceil(i),parentHeight:Math.ceil(a),left:Math.ceil(r),top:Math.ceil(n),right:Math.ceil(o),bottom:Math.ceil(s)}},e.prototype.stringToNumber=function(e,t){return sf.base.isNullOrUndefined(e)?null:-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10)},e.prototype.getEventArgs=function(e){var t=e.changedTouches?e.changedTouches[0].clientX:e.clientX,i=e.changedTouches?e.changedTouches[0].clientY:e.clientY,n=sf.base.isNullOrUndefined(e.currentTarget)?e.target.id:e.currentTarget.id;this.setMouseXY(t,i,n);var s=e.touches,o=[];if(e.type.indexOf("touch")>-1)for(var r=0,a=s.length;r<a;r++)o.push({pageX:s[r].clientX,pageY:s[r].clientY,pointerId:e.pointerId||0});var l=e.type.indexOf("touchend")>-1&&!sf.base.isNullOrUndefined(document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY))?document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY).id:e.target.id;return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:l,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:o,pointerId:e.pointerId,ctrlKey:e.ctrlKey}},e.prototype.destroy=function(){var e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,"click",this.heatMapMouseClick),sf.base.EventHandler.remove(this.element,"dblclick touchend",this.heatMapDoubleMouseClick),sf.base.EventHandler.remove(this.element,"mousedown touchstart",this.heatMapMouseDown),sf.base.EventHandler.remove(this.element,"mouseup touchend",this.heatMapMouseUp),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.heatMapMouseMove),sf.base.EventHandler.remove(this.element,e,this.heatMapMouseLeave),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.heatMapMouseMove);var t=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,t,this.resizeBound.bind(this)),this.element=null,this.svg=null,this.startRectValue=null,this.touchInstance.destroy(),this.touchInstance=null,this.svg=null},e}();return{initialize:function(t,i,n){new e(t,i);var s=window.sfBlazor.getCompInstance(t.id);return s?s.initialize(n):null},removeOpacity:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.removeOpacity(e,t)},getElementSize:function(e,t){var i=window.sfBlazor.getCompInstance(t);if(i&&i.element){var n=i.getElementBounds(e);return"width:"+n.width+", height:"+n.height+", parentHeight:"+n.parentHeight}return null},setSelectionProperty:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.setSelectionProperty(t,i,n)},renderTooltipTemplate:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=document.getElementById(e+"_Tooltip"),o=document.getElementById(e+"_HeatmapBorder");if(s&&o){var r,a=Number(o.getAttribute("x")),l=Number(o.getAttribute("y")),h=Number(o.getAttribute("width")),d=s.getBoundingClientRect(),c=void 0;i-d.height<l?(c=t+d.width/2>h?(h-d.width).toString()+"px":t-d.width/2<a?s.style.left=a.toString()+"px":(t-d.width/2).toString()+"px",r=i.toString()+"px"):t+d.width/2>h?(c=(h-d.width).toString()+"px",r=(i-d.height).toString()+"px"):t-d.width/2<a?(c=a.toString()+"px",r=(i-d.height).toString()+"px"):(c=(t-d.width/2).toString()+"px",r=(i-d.height).toString()+"px"),s.style.left=c||"0",s.style.top=r||"0",s.style.visibility="visible"}}},renderTooltip:function(e,t,i,n,s,o,r,a,l,h,d,c,p,u){var f=window.sfBlazor.getCompInstance(e);f&&f.element&&f.renderTooltip(e,t,n,s,o,r,a,l,h,d,c,p,u)},fadeOut:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){if(sf.base.isNullOrUndefined(n)||!sf.base.isNullOrUndefined(n)&&sf.base.isNullOrUndefined(n.tooltip))return;var s=document.getElementById(n.dataId+"_tooltip_svg");""==n.previousCellID||t||(document.getElementById(n.previousCellID)&&n.setOpacity(document.getElementById(n.previousCellID),"1"),n.previousCellID=""),i||s&&n.tooltip.fadeOut()}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t.element&&t&&t.destroy()}}}()},"./modules/sf-image-editor.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ImageEditor=function(){"use strict";var e,t,n,s,o,r,a,l,h,d,c,p=function(){function e(e){this.croppedDegree=0,this.cropDestPoints={startX:0,startY:0,width:0,height:0},this.tempFlipPanPoint={x:0,y:0},this.isPreventScaling=!1,this.isInitCrop=!1,this.isTransformCrop=!1,this.parent=e,this.addEventListener()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("crop",this.cropping,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("crop",this.cropping),this.parent.off("destroyed",this.destroy)},e.prototype.cropping=function(e){switch(this.updateCropPvtVar(),e.prop){case"cropImg":this.cropImg(e.value.isRotateCrop);break;case"cropCircle":this.cropCircle(e.value.context,e.value.isSave,e.value.isFlip);break;case"setCurrSelPoints":this.setCurrSelPoints(e.value.isSetDimension);break;case"updateRotatePan":this.updateRotatePan();break;case"crop":this.crop(e.value.obj);break;case"calcRatio":this.calcRatio(e.value.obj,e.value.dimension);break;case"isObjInImage":this.isObjInImage(e.value.obj,e.value.object);break;case"getCurrFlipState":this.getCurrFlipState(e.value.panObj);break;case"getPreviousCropCurrentObj":e.value.obj.prevObj=this.prevCropCurrObj;break;case"setPreviousCropCurrentObj":this.prevCropCurrObj=e.value.obj;break;case"setCropDestPoints":this.cropDestPoints=e.value.point;break;case"getTempFlipPanPoint":e.value.obj.point=this.tempFlipPanPoint;break;case"setTempFlipPanPoint":sf.base.isNullOrUndefined(e.value.isAdd)?this.tempFlipPanPoint=e.value.point:(this.tempFlipPanPoint.x+=e.value.point.x,this.tempFlipPanPoint.y+=e.value.point.y);break;case"getPreventScaling":e.value.obj.bool=this.isPreventScaling;break;case"adjustStraightenForShapes":this.adjustStraightenForShapes(e.value.type,e.value.isInitialRotated);break;case"resizeWrapper":this.resizeWrapper();break;case"setTransformCrop":this.isTransformCrop=e.value.bool;break;case"setInitCrop":this.isInitCrop=e.value.bool;break;case"reset":this.reset()}},e.prototype.getModuleName=function(){return"crop"},e.prototype.updateCropPvtVar=function(){var e=this.parent;e.lowerCanvas&&(this.lowerContext=e.lowerCanvas.getContext("2d")),e.upperCanvas&&(this.upperContext=e.upperCanvas.getContext("2d"))},e.prototype.reset=function(){this.prevCropCurrObj=null,this.croppedDegree=0,this.cropDestPoints={startX:0,startY:0,width:0,height:0},this.tempFlipPanPoint={x:0,y:0},this.isPreventScaling=!1,this.isInitCrop=!1,this.isTransformCrop=!1},e.prototype.cropImg=function(e){for(var t=this.parent,i=sf.base.isNullOrUndefined(e),n=t.element.querySelector("#"+t.element.id+"_nonaspectratio"),s=t.activeObj.activePoint,o=t.img,r=!1,a=0,l=t.rotateFlipColl.length;a<l;a++){var h=t.rotateFlipColl[a];90!==h&&-90!==h||(r=!0)}if(t.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),(i||n)&&(this.croppedDegree=t.transform.degree),i&&0!==t.transform.degree||r){this.updateCropObj();var d={startX:o.destLeft,startY:o.destTop,width:o.destWidth,height:o.destHeight};t.notify("transform",{prop:"setCurrDestinationPoint",onPropertyChange:!1,value:{point:d}}),this.rotateCrop()}else if(i&&""!==t.transform.currFlipState){this.updateCropObj();d={startX:o.destLeft,startY:o.destTop,width:o.destWidth,height:o.destHeight};t.notify("transform",{prop:"setCurrDestinationPoint",onPropertyChange:!1,value:{point:d}}),this.flipCrop()}else{this.adjustStraightenForShapes("initial",!1),t.notify("draw",{prop:"setTempZoomFactor",onPropertyChange:!1,value:{tempZoomFactor:t.transform.zoomFactor}});var c=this.calcRatio();if(i||!e){this.updateCropObj(),t.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1}),t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1});d={startX:o.destLeft,startY:o.destTop,width:o.destWidth,height:o.destHeight};t.notify("transform",{prop:"setCurrDestinationPoint",onPropertyChange:!1,value:{point:d}}),t.currSelectionPoint=sf.base.extend({},t.activeObj,{},!0),this.cropDestPoints={startX:o.destLeft,startY:o.destTop,width:o.destWidth,height:o.destHeight}}var p={width:0,height:0};t.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:s.width*c.width,height:s.height*c.height,obj:p,isImgShape:null}});var u=p;this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.img={srcLeft:s.startX*c.width-o.destLeft*c.width,srcTop:s.startY*c.height-o.destTop*c.height,srcWidth:s.width*c.width,srcHeight:s.height*c.height,destLeft:(t.lowerCanvas.clientWidth-u.width)/2,destTop:(t.lowerCanvas.clientHeight-u.height+1)/2,destWidth:u.width,destHeight:u.height};var f=this.lowerContext.filter;t.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter="none";var g=sf.base.extend({},t.activeObj,{},!0);this.cropObjColl(),t.transform.straighten=0,t.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}});var m=sf.base.extend([],t.objColl,[],!0);for(a=0,l=m.length;a<l;a++)this.isObjInImage(m[a])&&(t.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:m[a].shape,obj:m[a],canvas:null}}),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}));t.activeObj=g,this.cropFreehandDrawColl(),t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),t.currSelectionPoint&&"crop-circle"===t.currSelectionPoint.shape?this.cropCircle(this.lowerContext):t.isCircleCrop=!1,this.lowerContext.filter=f,t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.currObjType.isCustomCrop=!1,t.pan(!1),t.transform.defaultZoomFactor=0}},e.prototype.adjustStraightenForShapes=function(e,t){for(var i=this.parent,n=i.img.destLeft+i.img.destWidth/2,s=i.img.destTop+i.img.destHeight/2,o=0,r=i.objColl;o<r.length;o++){var a=r[o];if(-1!==["rectangle","ellipse","text","image"].indexOf(a.shape)&&(t||0!==a.rotatedAngle)){var l=a.activePoint,h=l.startX,d=l.startY,c=l.width,p=l.height,u="initial"===e?a.rotatedAngle:-a.rotatedAngle,f=h+c/2-n,g=d+p/2-s,m=Math.cos(u),v=Math.sin(u),b=m*f-v*g+n-h-c/2,y=v*f+m*g+s-d-p/2;a.activePoint.startX+=b,a.activePoint.startY+=y,a.activePoint.endX+=b,a.activePoint.endY+=y}}},e.prototype.updateCropObj=function(){this.parent.afterCropActions=[];var e={currObj:{}};this.parent.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:e}});var t=e.currObj;t.straighten=this.parent.transform.straighten,this.parent.cropObj=sf.base.extend({},t,{},!0)},e.prototype.rotateCrop=function(){var e=this.parent,t=this.getCurrFlipState(),i=e.activeObj.shape||"";e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.currSelectionPoint=sf.base.extend({},e.activeObj,{},!0),e.objColl.push(e.activeObj),e.activeObj=sf.base.extend({},e.objColl[e.objColl.length-1],{},!0);var n=sf.base.extend({},e.objColl[e.objColl.length-1],{},!0),s=sf.base.extend({},e.currSelectionPoint,{},!0),o={bool:null};e.notify("transform",{prop:"getPreventSelect",onPropertyChange:!1,value:{obj:o}}),e.notify("transform",{prop:"setPreventSelect",onPropertyChange:!1,value:{bool:!0}});var r=sf.base.extend([],e.rotateFlipColl,[],!0);this.panToSelRangle(!0),n=sf.base.extend({},e.objColl[e.objColl.length-1],{},!0),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n}}),e.objColl.pop(),e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.objColl.push(e.activeObj);var a=e.transform.straighten;0!==a&&(e.transform.straighten=0,e.straightenBaseImageCanvas(),e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}})),this.resetZoom();var l=sf.base.extend([],e.afterCropActions,[],!0);this.revertTransform("initial",r),0!==a&&(e.transform.straighten="horizontal"===t||"vertical"===t?-a:a,e.straightenBaseImageCanvas(),e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}})),n=sf.base.extend({},e.objColl[e.objColl.length-1],{},!0),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n}}),e.objColl.pop(),e.transform.degree=0;var h={isIntersect:null};e.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),e.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:h}});for(var d=0;0!==a&&h.isIntersect&&50!=++d;)e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.025,zoomPoint:null},isResize:null}),e.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),e.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:h}});this.cropImg(!0),this.revertTransform("reverse",r),e.afterCropActions=l,e.currSelectionPoint=s,e.notify("transform",{prop:"setPreventSelect",onPropertyChange:!1,value:{bool:o.bool}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),"crop-circle"===i&&this.cropCircle(this.lowerContext),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1})},e.prototype.revertTransform=function(e,t){var i=this.parent,n={isRotate:!1};if("initial"===e)for(var s=t.length-1;s>=0;s--){switch(r=t[s]){case 90:i.notify("transform",{prop:"rotate",value:{degree:-90,obj:n}});break;case-90:i.notify("transform",{prop:"rotate",value:{degree:90,obj:n}});break;default:i.notify("transform",{prop:"flipImage",value:{direction:i.toPascalCase(r.toString())}})}}else{this.updateFlipState();s=0;for(var o=t.length;s<o;s++){var r;switch(r=t[s]){case 90:i.notify("transform",{prop:"rotate",value:{degree:90,obj:n}});break;case-90:i.notify("transform",{prop:"rotate",value:{degree:-90,obj:n}});break;default:i.notify("transform",{prop:"flipImage",value:{direction:i.toPascalCase(r.toString())}})}}}},e.prototype.updateFlipState=function(){for(var e=this.parent,t=e.objColl,i=0,n=t.length;i<n;i++)t[i].shapeFlip="";var s=e.pointColl;for(i=0;i<e.freehandCounter;i++)s[i].shapeFlip=""},e.prototype.resetZoom=function(){var e=this.parent;if(e.transform.zoomFactor>0){var t=e.transform.zoomFactor,i=e.isUndoRedo;e.setProperties({zoomSettings:{zoomFactor:10*t}},!0),e.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:e.zoomSettings.zoomFactor}});for(var n=0;n<10*t;n++)e.isUndoRedo=!0,e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null},isResize:null});e.isUndoRedo=i,e.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1})}},e.prototype.flipCrop=function(){var e=this.parent;e.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!0}}),e.panPoint.totalPannedPoint.x+=this.tempFlipPanPoint.x,e.panPoint.totalPannedPoint.y+=this.tempFlipPanPoint.y;var t=e.transform.currFlipState,i={flipColl:null};e.notify("transform",{prop:"getFlipColl",onPropertyChange:!1,value:{obj:i}});var n=i.flipColl;if(e.notify("transform",{prop:"setFlipColl",onPropertyChange:!1,value:{flipColl:[]}}),e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.objColl.push(e.activeObj),0===e.transform.degree){var s=-e.cropObj.totalPannedPoint.x,o=-e.cropObj.totalPannedPoint.y;e.img.destLeft+=s,e.img.destTop+=o,e.notify("transform",{prop:"drawPannImage",value:{point:{x:s,y:o}}}),e.activeObj=sf.base.extend({},e.objColl[e.objColl.length-1],{},!0),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:e.activeObj}}),e.objColl.pop(),e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.objColl.push(e.activeObj)}this.resetZoom(),e.currSelectionPoint=sf.base.extend({},e.objColl[e.objColl.length-1],{},!0),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height);var r=this.lowerContext.filter;e.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.updateFlipState(),e.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:this.getCurrFlipState()}}),e.notify("freehand-draw",{prop:"flipFHDColl",onPropertyChange:!1,value:{value:this.getCurrFlipState()}}),e.activeObj=sf.base.extend({},e.objColl[e.objColl.length-1],{},!0),e.objColl.pop(),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.cropImg(!0),e.notify("transform",{prop:"setReverseRotate",onPropertyChange:!1,value:{bool:!0}}),this.lowerContext.setTransform(1,0,0,1,0,0),e.notify("draw",{prop:"setDestPoints",onPropertyChange:!1}),e.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,context:null,isPreventCircleCrop:null}}),e.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=r,e.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),e.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,context:null,isPreventCircleCrop:null}}),e.transform.currFlipState=t,e.notify("transform",{prop:"setFlipColl",onPropertyChange:!1,value:{flipColl:n}}),this.lowerContext.filter="none",this.updateFlipState(),e.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:this.getCurrFlipState()}}),e.notify("freehand-draw",{prop:"flipFHDColl",onPropertyChange:!1,value:{value:this.getCurrFlipState()}}),e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=r,(e.currSelectionPoint&&"crop-circle"===e.currSelectionPoint.shape||e.isCircleCrop)&&this.cropCircle(this.lowerContext),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!1}}),e.notify("draw",{prop:"resetPanPoints",onPropertyChange:!1}),this.tempFlipPanPoint={x:0,y:0}},e.prototype.cropObjColl=function(){var e,t,i,n=this.parent;if(n.objColl.length>0)for(var s=0,o=n.objColl.length;s<o;s++){e=(i=n.objColl[s]).activePoint;var r=n.activeObj.activePoint,a=r.startX,l=r.startY,h=r.width,d=r.height;t=i.shape,i.imageRatio={startX:(e.startX-a)/h,startY:(e.startY-l)/d,endX:(e.endX-a)/h,endY:(e.endY-l)/d,width:h/e.width,height:d/e.height};var c=void 0,p=void 0;switch(t){case"text":p=0===(c=0===i.shapeDegree?n.transform.degree:n.transform.degree-i.shapeDegree)||180===Math.abs(c)?e.width:e.height,i.textSettings.fontRatio=p/i.textSettings.fontSize;break;case"line":case"arrow":this.cropPointCollection(s),"arrow"===t&&n.notify("shape",{prop:"updateArrowRatio",onPropertyChange:!1,value:{obj:i}});break;case"path":this.cropPointCollection(s)}}},e.prototype.cropPointCollection=function(e){var t,i,n,s,o=this.parent,r=o.objColl[e].shape,a=o.activeObj.activePoint,l=o.img,h=l.destLeft,d=l.destTop,c=l.destWidth,p=l.destHeight;"path"===r?(t=a.startX,i=a.startY,n=a.width,s=a.height):(t=h,i=d,n=c,s=p);for(var u=o.objColl[e].pointColl,f=0,g=u.length;f<g;f++)u[f].ratioX=(u[f].x-t)/n,u[f].ratioY=(u[f].y-i)/s},e.prototype.cropFreehandDrawColl=function(){for(var e=this.parent,t=e.activeObj.activePoint,i=t.startX,n=t.startY,s=t.width,o=t.height,r=0;r<e.freehandCounter;r++){e.points=sf.base.extend([],e.pointColl[r].points,[]),e.notify("freehand-draw",{prop:"setPointCounter",onPropertyChange:!1,value:{value:0}});for(var a=e.points.length,l=0;l<a;l++)e.points[l].ratioX=(e.points[l].x-i)/s,e.points[l].ratioY=(e.points[l].y-n)/o}e.notify("freehand-draw",{prop:"updateCropPtsForSel",onPropertyChange:!1})},e.prototype.resetAnnotations=function(){var e=this.parent;e.objColl=[],e.pointColl=[],e.freehandCounter=0,e.notify("freehand-draw",{prop:"resetStraightenPoint"})},e.prototype.setCurrSelPoints=function(e){var t=this.parent;t.allowDownScale=!1;var i=this.cropDestPoints,n=this.lowerContext.filter,s=t.isCropTab;t.img={srcLeft:0,srcTop:0,srcWidth:t.baseImgCanvas.width,srcHeight:t.baseImgCanvas.height,destLeft:i.startX,destTop:i.startY,destWidth:i.width,destHeight:i.height};var o=t.img,r=t.currSelectionPoint;this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),e&&t.notify("draw",{prop:"setDestPoints",onPropertyChange:!1}),t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,context:null,isPreventCircleCrop:null}}),0===this.croppedDegree&&0===t.transform.degree&&r&&"crop-circle"!==r.shape&&"crop-square"!==r.shape&&(o.destLeft=i.startX,o.destTop=i.startY,o.destWidth=i.width,o.destHeight=i.height),0===t.transform.degree&&(o.destLeft+=t.panPoint.totalPannedInternalPoint.x,o.destTop+=t.panPoint.totalPannedInternalPoint.y),t.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=n,t.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,context:null,isPreventCircleCrop:!0}});var a=sf.base.extend([],t.objColl,null,!0),l=sf.base.extend([],t.pointColl,null,!0),h={straightenPoint:null};if(t.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:h}}),this.resetAnnotations(),sf.base.isNullOrUndefined(t.activeObj.shape)&&t.cropObj.activeObj.shape&&(t.activeObj=sf.base.extend({},t.cropObj.activeObj,null,!0)),this.panToSelRangle(),t.isCropTab=s,t.objColl=a,t.pointColl=l,t.freehandCounter=t.pointColl.length,h.straightenPoint.x&&h.straightenPoint.y&&t.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:h.straightenPoint.x,y:h.straightenPoint.y,ratioX:h.straightenPoint.ratioX,ratioY:h.straightenPoint.ratioY}}),t.cropObj.activeObj.shape){var d={startX:o.destLeft,startY:o.destTop,width:o.destWidth,height:o.destHeight};if(r&&r.activePoint){var c=r.activePoint,p=c.startX,u=c.startY,f=c.width,g=c.height;o.destLeft=p,o.destTop=u,o.destWidth=f,o.destHeight=g}t.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),o.destLeft=d.startX,o.destTop=d.startY,o.destWidth=d.width,o.destHeight=d.height,t.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),a=sf.base.extend([],t.objColl,null,!0),l=sf.base.extend([],t.pointColl,null,!0),t.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:h}}),this.resetAnnotations();var m={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:m}});var v=m.selPointColl;t.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),t.cropObj.filter=this.lowerContext.filter;var b=sf.base.extend({},t.currSelectionPoint,null,!0);t.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:null}}),t.activeObj=sf.base.extend({},b,null,!0);var y=sf.base.extend({},t.activeObj,null,!0);if(t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.currSelectionPoint=null,t.isCircleCrop=!1,0!==t.transform.degree&&(sf.base.isNullOrUndefined(t.activeObj.shape)&&t.cropObj.activeObj.shape&&(t.activeObj=sf.base.extend({},t.cropObj.activeObj,null,!0)),t.notify("transform",{prop:"drawPannedImage",value:{xDiff:0,yDiff:0}}),t.panPoint.currentPannedPoint={x:0,y:0}),t.objColl=a,t.pointColl=l,t.freehandCounter=t.pointColl.length,h.straightenPoint.x&&h.straightenPoint.y&&t.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:h.straightenPoint.x,y:h.straightenPoint.y,ratioX:h.straightenPoint.ratioX,ratioY:h.straightenPoint.ratioY}}),t.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:v}}}),t.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),t.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.adjustStraightenForShapes("reverse",!1),t.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:!0}}),t.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),0===t.transform.degree?t.notify("transform",{prop:"drawPannImage",onPropertyChange:!1,value:{point:{x:0,y:0}}}):(sf.base.isNullOrUndefined(t.activeObj.shape)&&t.cropObj.activeObj.shape&&(t.activeObj=sf.base.extend({},t.cropObj.activeObj,null,!0)),t.notify("transform",{prop:"drawPannedImage",value:{xDiff:0,yDiff:0}}),t.panPoint.currentPannedPoint={x:0,y:0}),t.activeObj=y,t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),t.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:null}}),this.isInitCrop||0!==t.transform.degree||""===t.cropObj.currFlipState||0===t.cropObj.cropZoom)this.isInitCrop=!1;else{this.isInitCrop=!0;var C={activeObj:null};t.notify("draw",{prop:"getStraightenActObj",onPropertyChange:!1,value:{obj:C}}),t.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),t.notify("draw",{prop:"setStraightenActObj",onPropertyChange:!1,value:{activeObj:C.activeObj}}),t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"croptransform",isApplyBtn:!1,isCropping:null,isZooming:null,cType:null}})}}else{this.adjustStraightenForShapes("reverse",!0),t.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:!0}});var w=this.lowerContext.filter;this.lowerContext.filter="none",t.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),t.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=w,t.currSelectionPoint=null}document.querySelector(".e-ie-straighten-value-span")&&(document.querySelector(".e-ie-straighten-value-span").innerHTML=t.transform.straighten.toString()+"&#176")},e.prototype.panToSelRangle=function(e){var t=this.parent,i=t.cropObj.totalPannedClientPoint,n=0!==t.transform.degree?e?-i.x:i.x:0,s=0!==t.transform.degree?e?-i.y:i.y:0;0!==t.transform.degree&&(t.panPoint.currentPannedPoint={x:n,y:s},t.notify("transform",{prop:"drawPannedImage",value:{xDiff:n,yDiff:s}}),t.panPoint.currentPannedPoint={x:0,y:0})},e.prototype.cropCircle=function(e,t,i){var n=this.parent,s=n.img,o=s.destLeft,r=s.destTop,a=s.destWidth,l=s.destHeight;i&&""!==n.transform.currFlipState&&n.notify("draw",{prop:"setTransform",onPropertyChange:!1,value:{context:e,value:n.transform.currFlipState,isReverse:null}});var h=e.filter;e.filter="none",e.globalCompositeOperation="destination-in",e.beginPath();var d=sf.base.isNullOrUndefined(t)?o+a/2:e.canvas.width/2,c=sf.base.isNullOrUndefined(t)?r+l/2:e.canvas.height/2,p=t?e.canvas.width/2:a/2;e.arc(d,c,p,0,2*Math.PI),e.closePath(),e.fill(),e.restore(),e.globalCompositeOperation="source-over",n.currObjType.isActiveObj=n.isCircleCrop=!0,e.filter=h,i&&""!==n.transform.currFlipState&&n.notify("draw",{prop:"setTransform",onPropertyChange:!1,value:{context:e,value:n.transform.currFlipState,isReverse:null}})},e.prototype.getCurrCropState=function(e,t){var i=this.parent,n="",s=[],o={flipColl:null};if(i.notify("transform",{prop:"getFlipColl",onPropertyChange:!1,value:{obj:o}}),"initial"===e)if(180===Math.abs(i.transform.degree))n=o.flipColl.length>1?this.getCurrFlipState():i.transform.currFlipState;else{for(var r=0,a=i.rotateFlipColl.length;r<a;r++)"number"==typeof i.rotateFlipColl[r]?s.push("number"):"string"==typeof i.rotateFlipColl[r]&&s.push("string");s.length>1&&"string"===s[s.length-1]&&"number"===s[s.length-2]?"horizontal"===i.transform.currFlipState?n="vertical":"vertical"===i.transform.currFlipState&&(n="horizontal"):s.length>1&&"number"===s[s.length-1]&&"string"===s[s.length-2]&&(n=o.flipColl.length>1?this.getCurrFlipState():i.transform.currFlipState)}else n=this.getCurrFlipState(),!t&&this.isInitialRotate()||-90!==i.transform.degree&&-270!==i.transform.degree||("horizontal"===n?n="vertical":"vertical"===n&&(n="horizontal"));return""===n&&(n=o.flipColl.length>1?this.getCurrFlipState():i.transform.currFlipState),n},e.prototype.isInitialRotate=function(){var e=!1;return this.parent.rotateFlipColl.length>0&&"number"==typeof this.parent.rotateFlipColl[0]&&(e=!0),e},e.prototype.updateRotatePan=function(){var e=this.parent;if(!sf.base.isNullOrUndefined(e.panPoint.currentPannedPoint)){var t="",i=e.transform.degree,n=e.panPoint.currentPannedPoint,s=n.x,o=n.y;t=e.rotateFlipColl.length>0&&"number"==typeof e.rotateFlipColl[0]&&i<0?this.getCurrCropState("reverse",!0):this.getCurrFlipState(),i%90==0&&i%180!=0?90===i||-90===i&&("horizontal"===t||"vertical"===t)||-270===i&&(""===t||"verticalHorizontal"===t||"horizontalVertical"===t)?("horizontal"===t||""===t?e.img.destLeft+=o:e.img.destLeft-=o,""===t||"vertical"===t?e.img.destTop-=s:e.img.destTop+=s):270!==i&&(-270!==i||"horizontal"!==t&&"vertical"!==t)&&(-90!==i||""!==t&&"verticalHorizontal"!==t&&"horizontalVertical"!==t)||(""===t||"horizontal"===t?e.img.destLeft-=o:e.img.destLeft+=o,""===t||"vertical"===t?e.img.destTop+=s:e.img.destTop-=s):180!==i&&-180!==i||(""===t||"vertical"===t?e.img.destLeft-=s:e.img.destLeft+=s,""===t||"horizontal"===t?e.img.destTop-=o:e.img.destTop+=o)}},e.prototype.crop=function(e){var t=this,i=this.parent,n=i.activeObj.activePoint,s=n.startX,o=n.startY,r=n.endX,a=n.endY;if(!i.disabled&&i.isImageLoaded){var l={isCropToolbar:i.isCropToolbar};i.currObjType.isUndoAction&&!l.isCropToolbar&&i.notify("undo-redo",{prop:"refreshUrc",value:{bool:null}});var h={cancel:!1,startPoint:{x:s,y:o},endPoint:{x:r,y:a},preventScaling:!1};!l.isCropToolbar&&sf.base.isBlazor()&&i.events&&!0===i.events.cropping.hasDelegate?"resize-toolbar"===i.currentToolbar?(i.dotNetRef.invokeMethodAsync("CropEventAsync","OnCrop",h,null),this.cropEvent(h,e,l)):i.dotNetRef.invokeMethodAsync("CropEventAsync","OnCrop",h,null).then((function(i){t.cropEvent(i,e,l)})):(l.isCropToolbar||i.trigger("cropping",h),this.cropEvent(h,e,l))}},e.prototype.cropEvent=function(e,t,i){var n,s=this.parent;if(!e.cancel&&(n=s.activeObj.shape?s.activeObj.shape.split("-"):[],!s.disabled&&s.activeObj.horTopLine&&(s.currObjType.isCustomCrop||n.length>0&&"crop"===n[0]))){t.isCrop=!0;var o=sf.base.extend({},s.cropObj,{},!0),r=sf.base.extend({},this.prevCropCurrObj,{},!0);e.preventScaling?this.isPreventScaling=!0:this.isPreventScaling=!1,this.cropImg(),s.notify("freehand-draw",{prop:"resetStraightenPoint"}),s.isCropTab=!1,s.transform.zoomFactor=0,s.setProperties({zoomSettings:{zoomFactor:1}},!0),s.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:s.zoomSettings.zoomFactor}}),sf.base.Browser.isDevice||this.updateUndoRedoColl(r,o,i),s.notify("transform",{prop:"setCropDimension",onPropertyChange:!1,value:{width:s.cropObj.destPoints.width,height:s.cropObj.destPoints.height}});var a=s.element.querySelector("#"+s.element.id+"_aspectratio"),l=s.element.querySelector("#"+s.element.id+"_nonaspectratio");s.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),!sf.base.isBlazor()&&!i.isCropToolbar&&sf.base.isNullOrUndefined(a)&&sf.base.isNullOrUndefined(l)?s.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}}):i.isCropToolbar||"resize-toolbar"!==s.currentToolbar&&s.updateToolbar(s.element,"imageLoaded"),this.resizeWrapper(),sf.base.Browser.isDevice&&this.updateUndoRedoColl(r,o,i),e={startPoint:e.startPoint,endPoint:e.endPoint},!i.isCropToolbar&&sf.base.isBlazor()&&s.events&&!0===s.events.cropped.hasDelegate&&s.dotNetRef.invokeMethodAsync("CropEventAsync","Cropped",null,e)}},e.prototype.updateUndoRedoColl=function(e,t,i){var n=this.parent,s={prevCurrSelectionPoint:n.prevCurrSelectionPoint};e.currSelectionPoint=sf.base.extend({},s.prevCurrSelectionPoint,{},!0),n.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"crop",previousObj:e,previousObjColl:e.objColl,previousPointColl:e.pointColl,previousSelPointColl:e.selPointColl,previousCropObj:t,previousText:null,currentText:null,previousFilter:null,isCircleCrop:n.isCircleCrop}}),i.isCropToolbar||n.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})},e.prototype.resizeWrapper=function(){var e=this.parent;if(sf.base.Browser.isDevice&&!sf.base.isBlazor()){var t=e.element,i=t.querySelector("#"+t.id+"_contextualToolbarArea");""!==i.style.position||this.isTransformCrop||(i.style.position="absolute",e.isStraightening=!1,e.update(),e.notify("filter",{prop:"setAdjustmentValue",value:{adjustmentValue:e.canvasFilter}}))}else if(sf.base.Browser.isDevice&&sf.base.isBlazor()&&!this.isTransformCrop){e.isStraightening=!1,e.update();var n=e.element.querySelector("#"+e.element.id+"_canvasWrapper");n&&(n.style.height=parseInt(n.style.height)+2+"px"),e.notify("filter",{prop:"setAdjustmentValue",value:{adjustmentValue:e.canvasFilter}})}},e.prototype.calcRatio=function(e,t){var i=this.parent,n=i.transform.degree,s=i.img,o=s.destWidth,r=s.destHeight,a=t||i.baseImgCanvas,l=a.width,h=a.height,d=0===n||n%180==0?l/o:h/o,c=0===n||n%180==0?h/r:l/r;return e&&(e.width=d,e.height=c),{width:d,height:c}},e.prototype.isObjInImage=function(e,t){var i=this.parent.img,n=i.destLeft,s=i.destTop,o=i.destWidth,r=i.destHeight,a=e.activePoint,l=a.startX,h=a.endX,d=a.startY,c=a.endY,p=l>=n&&h<=n+o||l<=n&&h>=n||l<=n+o&&h>=n+o||d>=s&&c<=s+r||d<=s&&c>=s||d<=s+r&&c>=s+r;return t&&(t.isInside=p),p},e.prototype.getCurrFlipState=function(e){var t=this.parent,i={panRegion:""},n={collection:t.rotateFlipColl};t.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:t.rotateFlipColl,isRotateFlipCollection:!0,obj:n}}),t.rotateFlipColl=n.collection;for(var s=0,o=t.rotateFlipColl.length;s<o;s++)t.notify("transform",{prop:"setCurrPanRegion",onPropertyChange:!1,value:{region:i.panRegion,type:t.rotateFlipColl[s],obj:i}});return e&&(e.panRegion=i.panRegion),i.panRegion},e}(),u=function(){function e(e){this.isInitialLoading=!1,this.fileName="",this.isErrorImage=!1,this.isShapeTextInserted=!1,this.isRotateZoom=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.tempTextSettings={text:"Enter Text",fontFamily:"",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.tempAdjValue="",this.tempFilter="",this.tempUndoRedoStep=0,this.tempFreehandCounter=0,this.tempCurrFhdIndex=0,this.tempZoomFactor=null,this.isCancelAction=!1,this.rotatedFlipCropSel=!1,this.zoomCrop={width:0,height:0},this.isImageEdited=!1,this.isFileChanged=!1,this.isNewPath=!1,this.isResizeSelect=!1,this.arrowDimension={bar:{width:10,height:32,ratioX:null,ratioY:null},arrow:{width:24,height:24,ratioX:null,ratioY:null},arrowSolid:{width:32,height:32,ratioX:null,ratioY:null},circle:{width:10,height:10,ratioX:null,ratioY:null},square:{width:20,height:20,ratioX:null,ratioY:null}},this.origDim={width:0,height:0},this.isImageApply=!1,this.imgCanvasPoints=[],this.isCropSelect=!1,this.isDownScale=!1,this.preventStraightening=!1,this.parent=e,this.addEventListener()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("draw",this.draw,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("draw",this.draw),this.parent.off("destroyed",this.destroy)},e.prototype.draw=function(e){switch(this.updatePrivateVariables(),e.prop){case"drawObject":this.drawObject(e.value.canvas,e.value.obj,e.value.isCropRatio,e.value.points,e.value.isPreventDrag,e.value.saveContext,e.value.isPreventSelection);break;case"updateActiveObject":this.updateActiveObject(e.value.actPoint,e.value.obj,e.value.isMouseMove,e.value.x,e.value.y);break;case"clearOuterCanvas":this.clearOuterCanvas(e.value.context);break;case"setDestPoints":this.setDestPoints();break;case"updateCurrTransState":this.updateCurrTransState(e.value.type,e.value.isPreventDestination,e.value.isRotatePan);break;case"currTransState":this.currTransState(e.value.type,e.value.isPreventDestination,e.value.context,e.value.isPreventCircleCrop);break;case"setTransform":this.setTransform(e.value.context,e.value.value,e.value.isReverse);break;case"render-image":this.renderImage(e.value.isMouseWheel,e.value.isPreventClearRect,e.value.isFrame,e.value.isStraighten);break;case"draw-image-to-canvas":this.drawImgToCanvas(e.value.dimension);break;case"update-canvas":this.updateCanvas();break;case"performCancel":this.performCancel(e.value.isContextualToolbar);break;case"updateFlipPan":this.updateFlipPan(e.value.tempSelectionObj);break;case"select":this.select(e.value.type,e.value.startX,e.value.startY,e.value.width,e.value.height);break;case"callUpdateCurrTransState":this.callUpdateCurrTransState();break;case"resetPanPoints":this.resetPanPoints();break;case"setClientTransDim":this.setClientTransDim(e.value.isPreventDimension);break;case"redrawImgWithObj":this.redrawImgWithObj();break;case"setCurrentObj":this.setCurrentObj(e.value.obj,e.value.isUndoRedo);break;case"performPointZoom":this.performPointZoom(e.value.x,e.value.y,e.value.type,e.value.isResize);break;case"open":this.open(e.value.data);break;case"isInitialLoading":this.isInitialLoading=e.value.isInitialLoading;break;case"isInitialLoaded":this.getInitialLoaded(e.value.object);break;case"fileSelect":this.fileSelect(e.value.inputElement,e.value.args);break;case"getFileName":e.value.obj.fileName=this.fileName,e.value.obj.fileType=this.fileType;break;case"getErrorImage":e.value.obj.isErrorImage=this.isErrorImage;break;case"getInitialZoomValue":e.value.obj.initialZoomValue=this.initZoomValue;break;case"setShapeTextInsert":this.isShapeTextInserted=e.value.bool;break;case"resetCurrentSelectionPoint":this.currSelPoint=null;break;case"setRotateZoom":this.isRotateZoom=e.value.isRotateZoom;break;case"setTempStrokeSettings":this.tempStrokeSettings=e.value.tempStrokeSettings;break;case"setTempTextSettings":this.tempTextSettings=e.value.tempTextSettings;break;case"setTempAdjustmentValue":this.tempAdjValue=e.value.tempAdjustmentValue;break;case"getTempAdjustmentValue":e.value.obj.value=this.tempAdjValue;break;case"setTempFilter":this.tempFilter=e.value.tempFilter;break;case"setTempUndoRedoStep":this.tempUndoRedoStep=e.value.tempUndoRedoStep;break;case"setTempFreehandCounter":this.tempFreehandCounter=e.value.tempFreehandCounter;break;case"setTempCurrentFreehandDrawIndex":this.tempCurrFhdIndex=e.value.tempCurrentFreehandDrawIndex;break;case"setTempZoomFactor":this.tempZoomFactor=e.value.tempZoomFactor;break;case"setCancelAction":this.isCancelAction=e.value.bool;break;case"getRotatedFlipCropSelection":e.value.bool.isSelected=this.rotatedFlipCropSel;break;case"getPrevActObj":e.value.obj.prevActObj=this.prevActObj;break;case"setPrevActObj":this.prevActObj=e.value.prevActObj;break;case"setZoomCropWidth":this.zoomCrop.width=e.value.width,this.zoomCrop.height=e.value.height;break;case"setImageEdited":this.isImageEdited=!0;break;case"reset":this.reset();break;case"dlgBtnClick":this.dlgBtnClick();break;case"dlgCloseBtnClick":this.dlgCloseBtnClick();break;case"setNewPath":this.isNewPath=e.value.bool;break;case"getNewPath":e.value.obj.isNewPath=this.isNewPath;break;case"getArrowDimension":e.value.obj.arrowDimension=this.arrowDimension;break;case"setArrowDimension":this.arrowDimension=e.value.arrowDimension;break;case"moveToSelectionRange":this.moveToSelectionRange(e.value.type,e.value.activeObj);break;case"setResizeSelect":this.isResizeSelect=e.value.bool;break;case"applyFrame":this.applyFrame(e.value.ctx,e.value.frame,e.value.preventImg);break;case"drawImage":this.drawImage();break;case"downScaleImgCanvas":this.downScaleImgCanvas(e.value.ctx,e.value.isImgAnnotation,e.value.isHFlip,e.value.isVFlip);break;case"downScale":this.downScale(e.value.canvas,e.value.width,e.value.height);break;case"resetFrameZoom":this.resetFrameZoom(e.value.isOk);break;case"triggerFrameChange":e.value.obj.frameChangeEventArgs=this.triggerFrameChange(e.value.prevFrameSettings);break;case"setImageApply":this.isImageApply=e.value.bool;break;case"zoomToSel":this.zoomToSel(e.value.activeObj,e.value.isToolbar);break;case"getStraightenActObj":e.value.obj.activeObj=this.straightenActObj;break;case"setStraightenActObj":this.straightenActObj=e.value.activeObj;break;case"updateImgCanvasPoints":this.updateImgCanvasPoints();break;case"isLinesIntersect":e.value.obj.isIntersect=this.isLinesIntersect(e.value.obj);break;case"getImageCanvasPoints":e.value.obj.points=this.imgCanvasPoints;break;case"setDestForStraighten":this.setDestForStraighten();break;case"setTempDestForStraighten":this.tempStraightenDestPoints=sf.base.extend({},this.straightenDestPoints,{},!0);break;case"getStraightenInitZoom":e.value.obj.zoomFactor=this.straightenInitZoom;break;case"setStraightenInitZoom":this.straightenInitZoom=e.value.zoomFactor;break;case"isPointsInsideImg":e.value.obj.bool="inside"!==this.checkPointPosition(e.value.x,e.value.y,this.imgCanvasPoints[0].x,this.imgCanvasPoints[0].y,this.imgCanvasPoints[1].x,this.imgCanvasPoints[1].y,this.imgCanvasPoints[2].x,this.imgCanvasPoints[2].y,this.imgCanvasPoints[3].x,this.imgCanvasPoints[3].y);break;case"setIsCropSelect":this.isCropSelect=e.value.bool;break;case"updateCropSelection":this.updateCropSelection();break;case"updateCropSelObj":this.updateCropSelObj();break;case"redrawDownScale":this.redrawDownScale();break;case"updateFinetune":this.updateFinetune();break;case"isSelOutsideImg":e.value.obj.bool=this.isSelOutsideImg();break;case"resetStraightenDestPoints":this.straightenDestPoints=null;break;case"checkPointPosition":e.value.obj.position=this.checkPointPosition(e.value.obj.x,e.value.obj.y,e.value.obj.x1,e.value.obj.y1,e.value.obj.x2,e.value.obj.y2,e.value.obj.x3,e.value.obj.y3,e.value.obj.x4,e.value.obj.y4)}},e.prototype.getModuleName=function(){return"draw"},e.prototype.updatePrivateVariables=function(){var e=this.parent;e.lowerCanvas&&(this.lowerContext=e.lowerCanvas.getContext("2d")),e.upperCanvas&&(this.upperContext=e.upperCanvas.getContext("2d")),sf.base.isNullOrUndefined(this.tempZoomFactor)&&(this.tempZoomFactor=e.transform.zoomFactor),""===this.tempTextSettings.fontFamily&&(this.tempTextSettings.fontFamily=e.fontFamily.default)},e.prototype.reset=function(){this.isInitialLoading=this.isErrorImage=this.isNewPath=this.isResizeSelect=!1,this.isShapeTextInserted=!1,this.isImageApply=!1,this.initZoomValue=null,this.tempFilter="",this.origDim={width:0,height:0},this.currSelPoint=null,this.isRotateZoom=!1,this.tempAdjValue="",this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.tempTextSettings={text:"Enter Text",fontFamily:this.parent.fontFamily.default,fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.tempUndoRedoStep=this.tempFreehandCounter=this.tempCurrFhdIndex=0,this.tempZoomFactor=null,this.isCancelAction=!1,this.rotatedFlipCropSel=!1,this.prevActObj=null,this.tempStraightenDestPoints=null,this.arrowDimension={bar:{width:10,height:32,ratioX:null,ratioY:null},arrow:{width:24,height:24,ratioX:null,ratioY:null},arrowSolid:{width:32,height:32,ratioX:null,ratioY:null},circle:{width:10,height:10,ratioX:null,ratioY:null},square:{width:20,height:20,ratioX:null,ratioY:null}},this.straightenActObj=null,this.imgCanvasPoints=[],this.straightenInitZoom=null,this.straightenDestPoints=null,this.isCropSelect=this.isDownScale=this.preventStraightening=!1},e.prototype.redrawDownScale=function(){var e=this.parent;if(e.transform.zoomFactor&&e.transform.zoomFactor<0){var t=sf.base.extend({},e.activeObj,{},!0);e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isDownScale=!0,this.renderImage(),this.isDownScale=!1,t.shape&&this.drawObject("duplicate",t)}},e.prototype.updateFinetune=function(){var e=this.parent;if(e.transform.zoomFactor&&e.transform.zoomFactor<0){var t=this.lowerContext.filter;this.lowerContext.filter="none",e.notify("draw",{prop:"redrawDownScale"});var i=e.inMemoryCanvas.getContext("2d"),n=this.lowerContext,s=n.getImageData(0,0,n.canvas.width,n.canvas.height);e.inMemoryCanvas.width=s.width,e.inMemoryCanvas.height=s.height,i.putImageData(s,0,0),this.lowerContext.filter=t,e.notify("draw",{prop:"redrawDownScale"})}},e.prototype.drawImage=function(){this.applyFrame(this.lowerContext,this.parent.frameObj.type)},e.prototype.drawObject=function(e,t,i,n,s,o,r){var a,l=this.parent,h=l.activeObj,d=l.activeObj.activePoint;(this.upperContext.clearRect(0,0,l.upperCanvas.width,l.upperCanvas.height),"original"===(e=e.toLowerCase())?a=this.lowerContext:"duplicate"===e?a=this.upperContext:o&&(a=o),!s&&h.shape&&this.setDragLimit(),l.currObjType.shape)&&("crop"===l.currObjType.shape.split("-")[0].toLowerCase()&&i&&this.drawCropRatio());if(h=l.activeObj,d=l.activeObj.activePoint,sf.base.isNullOrUndefined(h.strokeSettings)){var c={strokeSettings:{}};l.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:c}}),h.strokeSettings=c.strokeSettings}if(sf.base.isNullOrUndefined(h.strokeSettings.strokeWidth)&&(h.strokeSettings.strokeWidth=2),t&&(l.activeObj=sf.base.extend({},t,{},!0)),n&&(d.startX=n.startX,d.startY=n.startY,d.endX=n.endX,d.endY=n.endY,d.width=n.width,d.height=n.height),this.updateActiveObject(),h=l.activeObj,d=l.activeObj.activePoint,!sf.base.isNullOrUndefined(d.startX)||!sf.base.isNullOrUndefined(d.startY)){if(l.currObjType.isText){var p={keyHistory:""};l.notify("shape",{prop:"getKeyHistory",onPropertyChange:!1,value:{obj:p}}),h.keyHistory=p.keyHistory}var u=!1;if("original"!==e){h.shape&&"crop"===h.shape.split("-")[0]&&(u=!0),u&&(n?(d.startX=n.startX,d.startY=n.startY,d.endX=n.endX,d.endY=n.endY,d.width=n.width,d.height=n.height):d=h.activePoint,this.upperContext.fillStyle="rgb(0, 0, 0, 0.25)",this.upperContext.fillRect(0,0,l.lowerCanvas.width,l.lowerCanvas.height),this.upperContext.clearRect(d.startX,d.startY,d.width,d.height)),!sf.base.isNullOrUndefined(r)||a!==this.lowerContext&&a!==this.upperContext||(this.rotateContext("initial",a),this.drawOuterSelection(a),this.rotateContext("reverse",a))}l.currObjType.isActiveObj=!0;var f={keyHistory:""};l.notify("shape",{prop:"getKeyHistory",onPropertyChange:!1,value:{obj:f}}),t?this.drawShapeObj(e,t.shape,o,r):""!==f.keyHistory&&l.currObjType.isText?this.drawShapeObj(e,"text",o,r):h.shape?this.drawShapeObj(e,h.shape,o,r):this.drawShapeObj(e,void 0,o,r),"duplicate"===e&&u&&"crop-circle"!==h.shape&&"none"!==l.frameObj.type&&(this.applyFrame(this.upperContext,l.frameObj.type),this.drawCornerCircles(this.upperContext))}},e.prototype.rotateContext=function(e,t){var i=this.parent,n=i.activeObj,s=n.shape,o=n.rotatedAngle,r=i.img,a=r.destLeft,l=r.destTop,h=r.destWidth,d=r.destHeight,c=i.activeObj.activePoint,p=c.startX,u=c.startY,f=c.width,g=c.height;if("line"!==s&&"arrow"!==s){var m,v,b="initial"===e?o:-o;0!==i.transform.straighten||i.isCropTab?(m=a+h/2,v=l+d/2):(m=p+f/2,v=u+g/2),t.translate(m,v),t.rotate(b),t.translate(-m,-v)}},e.prototype.setDragLimit=function(){var e=this.parent,t=e.activeObj.activePoint,i=e.activeObj,n=i.shape,s=i.rotatedAngle;if(t&&"image"!==n&&"line"!==n&&0===s){var o=e.img,r=o.destLeft,a=o.destTop,l=o.destWidth,h=o.destHeight;t.startX<r?(t.startX=r,t.endX=Math.min(t.startX+t.width,r+l)):t.endX>r+l&&(t.endX=r+l,t.startX=Math.max(t.endX-t.width,r)),t.startY<a?t.startY=a:t.endY>a+h&&(t.endY=a+h,t.startY=Math.max(t.endY-t.height,a)),e.activeObj=this.updateWidthHeight(e.activeObj)}},e.prototype.drawCropRatio=function(){var e,t,i,n,s=this.parent,o=s.activeObj.activePoint,r=s.lowerCanvas.clientWidth,a=s.lowerCanvas.clientHeight,l=s.img,h=l.destLeft,d=l.destTop,c=l.destWidth,p=l.destHeight;if(s.transform.zoomFactor>0&&this.currSelPoint){var u=sf.base.extend({},s.activeObj,{},!0);this.drawCustomSelection("crop-custom",null,null,null,null),0!==s.transform.straighten&&(o=s.activeObj.activePoint),s.transform.degree%90==0&&s.transform.degree%180!=0?n=i=o.width<o.height?o.width:o.height:(i=h+h+c<=r?o.width:0===s.transform.straighten?r-h:o.width,n=d+d+p<=a?o.height:0===s.transform.straighten?a-d:o.height),s.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),s.activeObj=u,s.currObjType.shape=u.shape,this.upperContext.clearRect(0,0,s.upperCanvas.width,s.upperCanvas.height),s.currObjType.isCustomCrop=!1}else i=c,n=p,h<0&&(i+=h),d<0&&(n+=d),"crop-square"!==s.currObjType.shape.toLowerCase()&&"crop-circle"!==s.currObjType.shape.toLowerCase()&&(h+c>s.lowerCanvas.width&&(i-=h+c-s.lowerCanvas.width),d+p>s.lowerCanvas.height&&(n-=d+p-s.lowerCanvas.height));switch(s.currObjType.shape.toLowerCase()){case"crop-square":case"crop-circle":s.notify("selection",{prop:"setDragDirection",onPropertyChange:!1,value:{width:i,height:n}}),o=s.activeObj.activePoint,s.lowerCanvas.width<o.endX-o.startX&&(o.startX=7.5,o.endX=s.lowerCanvas.width-7.5),s.lowerCanvas.height<o.endY-o.startY&&(o.startY=7.5,o.endY=s.lowerCanvas.height-7.5),i===c&&n===p&&(o.startX+=h,o.startY+=d,o.endX+=h,o.endY+=d),s.lowerCanvas.width>s.lowerCanvas.height?(o.height=o.endY-o.startY,o.width=o.height,o.endX=o.startX+o.width):(o.width=o.endX-o.startX,o.height=o.width,o.endY=o.startY+o.height);break;case"crop-3:2":e=3,t=2;break;case"crop-4:3":e=4,t=3;break;case"crop-5:4":e=5,t=4;break;case"crop-7:5":e=7,t=5;break;case"crop-16:9":e=16,t=9;break;case"crop-2:3":e=2,t=3;break;case"crop-3:4":e=3,t=4;break;case"crop-4:5":e=4,t=5;break;case"crop-5:7":e=5,t=7;break;case"crop-9:16":e=9,t=16}if(void 0!==e&&void 0!==t&&(s.notify("selection",{prop:"calcShapeRatio",onPropertyChange:!1,value:{x:e,y:t,imgWidth:i,imgHeight:n}}),i===c&&n===p&&this.updatePoints(),o=s.activeObj.activePoint),o.startX<h){var f=h-o.startX+7.5;o.startX+=f,o.endX+=f}if(o.startY<d){f=d-o.startY+7.5;o.startY+=f,o.endY+=f}s.activeObj=this.updateWidthHeight(s.activeObj),this.adjToCenter(),this.enlargeToImg(),0!==s.transform.straighten&&(this.adjToStraighten(),this.updateActiveObject(s.activeObj.activePoint,s.activeObj));var g={isIntersect:null,arr:null},m=0;if(o=s.activeObj.activePoint,0!==s.transform.straighten)for(;this.isLinesIntersect(g)&&m<100;){m++;f=1*o.width/100;o.startX+=f,o.endX-=f,f=1*o.height/100,o.startY+=f,o.endY-=f,o.width=o.endX-o.startX,o.height=o.endY-o.startY,this.updateActiveObject(o,s.activeObj)}this.straightenInitZoom=s.transform.zoomFactor,this.straightenActObj=sf.base.extend({},s.activeObj,{},!0),s.notify("draw",{prop:"resetStraightenDestPoints"}),s.notify("draw",{prop:"setDestForStraighten"})},e.prototype.adjToCenter=function(){var e=this.parent,t=e.activeObj.activePoint,i=e.img,n=i.destLeft,s=i.destTop,o=i.destWidth,r=i.destHeight,a=e.lowerCanvas.width/2-(t.endX-t.width/2),l=e.lowerCanvas.height/2-(t.endY-t.height/2);if(t.startX+=a,t.endX+=a,t.startY+=l,t.endY+=l,t.startX<(n>=7.5?n:7.5)){var h=(n>=7.5?n:0)-t.startX;t.startX+=h,t.endX+=h}else if(t.endX>n+o){h=t.endX-(n+o);t.startX-=h,t.endX-=h}if(t.startY<(s>=7.5?s:7.5)){h=(s>=7.5?s:0)-t.startY;t.startY+=h,t.endY+=h}else if(t.endY>s+r){h=t.endY-(s+r);t.startY-=h,t.endY-=h}},e.prototype.enlargeToImg=function(){var e=this.parent;if(0!==e.transform.straighten&&e.transform.degree%90==0&&e.transform.degree%180!=0)for(var t=e.activeObj.activePoint,i=sf.base.extend({},t,{},!0),n=0;;){n++;var s=5*t.width/100;t.startX-=s,t.endX+=s,s=5*t.height/100,t.startY-=s,t.endY+=s,t.width=t.endX-t.startX,t.height=t.endY-t.startY,this.updateActiveObject(t,e.activeObj);var o={isIntersect:null,arr:null};if(this.updateImgCanvasPoints(),this.isLinesIntersect(o),o.arr[0]||o.arr[1]||o.arr[2]||o.arr[3]||t.startX<7.5||t.startY<7.5||100===n){s=1*(t=sf.base.extend({},i,{},!0)).width/100,t.startX+=s,t.endX-=s,s=1*t.height/100,t.startY+=s,t.endY-=s,t.width=t.endX-t.startX,t.height=t.endY-t.startY,this.updateActiveObject(t,e.activeObj);break}i=sf.base.extend({},t,{},!0)}},e.prototype.updateActiveObject=function(e,t,i,n,s){var o=this.parent;e=e||sf.base.extend({},o.activeObj.activePoint,{},!0),t=t||sf.base.extend({},o.activeObj,{},!0),e.width=e.endX-e.startX,e.height=e.endY-e.startY;var r=e.startX,a=e.startY,l=e.endX,h=e.endY;n=n||0,s=s||0;var d=e.width/2,c=e.height/2;t.horTopLine={startX:r+n,startY:a-s,endX:l+n,endY:h+s},t.horBottomLine={startX:r-n,startY:h-s,endX:l-n,endY:h+s},t.verLeftLine={startX:r+n,startY:a-s,endX:r-s,endY:h-s},t.verRightLine={startX:l+n,startY:a+s,endX:l-n,endY:h+s},t.topLeftCircle={startX:r,startY:a,radius:t.horTopLine.endX?7.5:0},t.topCenterCircle={startX:r+d,startY:a,radius:t.horTopLine.endX?7.5:0},t.topRightCircle={startX:l,startY:a,radius:t.horTopLine.endX?7.5:0},t.centerLeftCircle={startX:r,startY:a+c,radius:t.horTopLine.endX?7.5:0},t.centerRightCircle={startX:l,startY:a+c,radius:t.horTopLine.endX?7.5:0},t.bottomLeftCircle={startX:r,startY:h,radius:t.horTopLine.endX?7.5:0},t.bottomCenterCircle={startX:r+d,startY:h,radius:t.horTopLine.endX?7.5:0},t.bottomRightCircle={startX:l,startY:h,radius:t.horTopLine.endX?7.5:0},0===t.rotatedAngle&&(t.rotationCirclePoint={x:t.bottomCenterCircle.startX,y:t.bottomCenterCircle.startY+25},t.rotationCirclePoint.ratioX=(t.rotationCirclePoint.x-o.img.destLeft)/o.img.destWidth,t.rotationCirclePoint.ratioY=(t.rotationCirclePoint.y-o.img.destTop)/o.img.destHeight),t.activePoint=e,sf.base.isNullOrUndefined(i)&&(o.activeObj=sf.base.extend({},t,{},!0))},e.prototype.drawOuterSelection=function(e,t){var i,n=this.parent,s=n.activeObj.activePoint,o=n.activeObj;e.lineWidth=.5;var r,a=sf.base.extend({},o,{},!0);if(o.shape&&(i=o.shape.split("-")),(i&&"crop"===i[0]||void 0===o.shape)&&!t&&(this.upperContext.fillStyle="rgb(0, 0, 0, 0.25)",this.upperContext.fillRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height),this.upperContext.clearRect(s.startX,s.startY,s.width,s.height)),e.strokeStyle=n.themeColl[n.theme].primaryColor,e.fillStyle=n.themeColl[n.theme].secondaryColor,(r=0===a.shapeDegree?n.transform.degree:n.transform.degree-a.shapeDegree)<0&&(r=360+r),"arrow"===o.shape||"line"===o.shape)e.beginPath(),e.moveTo(s.startX,s.startY),e.lineTo(s.endX,s.endY),e.stroke();else if("path"===o.shape){e.beginPath();var l=sf.base.extend({},n.activeObj,{},!0);if(l.pointColl[0]&&(e.moveTo(l.pointColl[0].x,l.pointColl[0].y),l.pointColl.length>1))for(var h=1,d=l.pointColl.length;h<d;h++)s.endX=l.pointColl[h].x,s.endY=l.pointColl[h].y,e.lineTo(s.endX,s.endY);var c={shape:null};n.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:c}}),"path"===c.shape&&(n.activeObj=o=l),e.lineTo(s.endX,s.endY),e.stroke()}else this.drawCornerCircles(e);if(n.selectionSettings.showCircle&&(void 0===i||"crop"!==i[0])){var p=e.strokeStyle,u=e.fillStyle;e.strokeStyle=n.selectionSettings.strokeColor,e.fillStyle=n.selectionSettings.fillColor,"text"===o.shape?(e.lineWidth*=2,e.beginPath(),this.drawRotationArcLine(e),e.lineTo(o.rotationCirclePoint.x,o.rotationCirclePoint.y),e.stroke(),e.fill(),e.closePath(),e.beginPath(),e.moveTo(o.rotationCirclePoint.x,o.rotationCirclePoint.y),e.arc(o.rotationCirclePoint.x,o.rotationCirclePoint.y,o.bottomCenterCircle.radius,0,2*Math.PI),e.stroke(),e.fill(),e.closePath(),e.lineWidth/=2):this.drawCenterCircles(e),e.strokeStyle=p,e.fillStyle=u}a.rotationCircleLine=o.rotationCircleLine,n.activeObj=sf.base.extend({},a,{},!0)},e.prototype.drawArrowHead=function(e,t){switch(t?this.parent.activeObj.start:this.parent.activeObj.end){case"arrowSolid":t?this.arrowSolid(e,!0):this.arrowSolid(e,!1);break;case"arrow":t?this.arrow(e,!0):this.arrow(e,!1);break;case"circleSolid":t?this.arrowCircleSolid(e,!0):this.arrowCircleSolid(e,!1);break;case"circle":t?this.arrowCircle(e,!0):this.arrowCircle(e,!1);break;case"bar":t?this.arrowBar(e,!0):this.arrowBar(e,!1);break;case"square":case"squareSolid":t?this.arrowSquareStart(e):this.arrowSquareEnd(e)}},e.prototype.drawShapeObj=function(e,t,i,n){var s,o=this.parent,r=o.activeObj.activePoint,a=o.activeObj,l=a.strokeSettings,h=l.strokeColor,d=l.fillColor,c=l.strokeWidth,p=void 0!==t?t:o.currObjType.shape;o.currObjType.shape=p,"original"===e.toLowerCase()?s=this.lowerContext:"duplicate"===e.toLowerCase()?s=this.upperContext:i&&(s=i);var u=o.currObjType.shape.toLowerCase();-1!==["rectangle","ellipse","line","arrow","path","image"].indexOf(u)&&(a.shape=o.currObjType.shape),s.strokeStyle=h,s.fillStyle="text"===t||"freehanddraw"===t?h:d;var f,g=r.width/3,m=r.height/3,v=r.endX-r.startX,b=r.endY-r.startY;this.rotateContext("initial",s);var y,C=s.fillStyle;switch(o.currObjType.shape.toLowerCase()){case"rectangle":this.drawSquareLines(s),sf.base.isNullOrUndefined(n)&&s===this.upperContext&&this.drawOuterSelection(s);break;case"ellipse":v=Math.abs(v),b=Math.abs(b),s.beginPath(),s.ellipse(r.startX+v/2,r.startY+b/2,v/2,b/2,0,0,2*Math.PI,!1),""!==d&&(s.fillStyle=d,s.fill()),s.ellipse(r.startX+v/2,r.startY+b/2,Math.abs(v/2-c),Math.abs(b/2-c),0,0,2*Math.PI,!1),s.fillStyle=h,s.fill("evenodd"),s.closePath(),sf.base.isNullOrUndefined(n)&&s===this.upperContext&&this.drawOuterSelection(s);break;case"crop-circle":s===this.lowerContext&&(s=this.upperContext),this.shapeCircle(s,v,b);break;case"line":this.shapeLine(s,r.startX,r.startY,r.endX,r.endY),sf.base.isNullOrUndefined(n)&&s===this.upperContext&&this.drawOuterSelection(s);break;case"arrow":(f=0===a.shapeDegree?o.transform.degree:o.transform.degree-a.shapeDegree)<0&&(f=360+f),s.fillStyle=s.strokeStyle,sf.base.isNullOrUndefined(a.triangleDirection)&&(a.triangleDirection="right"),sf.base.isNullOrUndefined(a.start)&&(a.start="none"),sf.base.isNullOrUndefined(a.end)&&(a.end="arrowSolid"),this.drawArrowHead(s,!0),this.drawArrowHead(s,!1),"none"===a.end&&this.shapeLine(s,r.startX,r.startY,r.endX,r.endY),s.fillStyle=C,sf.base.isNullOrUndefined(n)&&s===this.upperContext&&this.drawOuterSelection(s);break;case"path":if((y=sf.base.extend({},o.activeObj,{},!0)).pointColl.length>1){var w={shape:null};if(o.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:w}}),"path"===w.shape)for(var M={x:0,y:0},S=0,x=y.pointColl.length;S<x;S++)sf.base.isNullOrUndefined(y.pointColl[S+1])?(M.x=y.activePoint.endX,M.y=y.activePoint.endY):(M.x=y.pointColl[S+1].x,M.y=y.pointColl[S+1].y),r.startX=y.pointColl[S].x,r.startY=y.pointColl[S].y,r.endX=M.x,r.endY=M.y,o.activeObj=this.updateWidthHeight(o.activeObj),this.shapeLine(s,r.startX,r.startY,r.endX,r.endY);else for(S=1,x=y.pointColl.length;S<x;S++)r.startX=y.pointColl[S-1].x,r.startY=y.pointColl[S-1].y,r.endX=y.pointColl[S].x,r.endY=y.pointColl[S].y,o.activeObj=this.updateWidthHeight(o.activeObj),this.shapeLine(s,r.startX,r.startY,r.endX,r.endY);o.activeObj=a=y}else this.shapeLine(s,r.startX,r.startY,r.endX,r.endY);s===this.upperContext&&this.drawOuterSelection(s);break;case"text":this.shapeText(s);break;case"image":this.shapeImage(s),sf.base.isNullOrUndefined(n)&&s===this.upperContext&&this.drawOuterSelection(s);break;case"crop-square":case"crop-3:4":case"crop-4:3":case"crop-6:9":case"crop-9:6":case"crop-9:16":case"crop-16:9":s===this.lowerContext&&(s=this.upperContext),this.drawSelection(g,m),o.currObjType.shape="";break;default:this.drawSelection(g,m)}this.rotateContext("reverse",s)},e.prototype.updatePoints=function(){var e=this.parent,t=e.activeObj.activePoint,i=e.img,n=i.destLeft,s=i.destTop;t.startX+=n,t.startY+=s,t.endX+=n,t.endY+=s,e.activeObj=this.updateWidthHeight(e.activeObj)},e.prototype.updateWidthHeight=function(e){var t=e.activePoint,i=t.startX,n=t.startY,s=t.endX,o=t.endY;return e.activePoint.width=s-i,e.activePoint.height=o-n,e},e.prototype.drawCornerCircles=function(e){var t=this.parent,i=t.activeObj;if(e.beginPath(),e.rect(i.activePoint.startX,i.activePoint.startY,i.activePoint.width,i.activePoint.height),e.stroke(),e.closePath(),t.selectionSettings.showCircle){var n=e.strokeStyle,s=e.fillStyle;e.strokeStyle=t.selectionSettings.strokeColor,e.fillStyle=t.selectionSettings.fillColor,e.lineWidth*=2,e.beginPath(),e.moveTo(i.topLeftCircle.startX,i.topLeftCircle.startY),e.arc(i.topLeftCircle.startX,i.topLeftCircle.startY,i.topLeftCircle.radius,0,2*Math.PI),e.moveTo(i.topRightCircle.startX,i.topRightCircle.startY),e.arc(i.topRightCircle.startX,i.topRightCircle.startY,i.topRightCircle.radius,0,2*Math.PI),e.moveTo(i.bottomLeftCircle.startX,i.bottomLeftCircle.startY),e.arc(i.bottomLeftCircle.startX,i.bottomLeftCircle.startY,i.bottomLeftCircle.radius,0,2*Math.PI),e.moveTo(i.bottomRightCircle.startX,i.bottomRightCircle.startY),e.arc(i.bottomRightCircle.startX,i.bottomRightCircle.startY,i.bottomRightCircle.radius,0,2*Math.PI),e.stroke(),e.fill(),e.closePath(),e.lineWidth/=2,e.strokeStyle=n,e.fillStyle=s}},e.prototype.drawCenterCircles=function(e){var t=this.parent,i=t.activeObj.activePoint,n=t.activeObj;if(e.lineWidth*=2,e.beginPath(),"arrow"===n.shape||"line"===n.shape)e.moveTo(i.startX,i.startY),e.arc(i.startX,i.startY,n.topCenterCircle.radius,0,2*Math.PI),e.moveTo(i.endX,i.endY),e.arc(i.endX,i.endY,n.bottomCenterCircle.radius,0,2*Math.PI);else if("path"===n.shape){var s=sf.base.extend({},t.activeObj,{},!0);if(s.pointColl.length>1)for(var o=1,r=s.pointColl.length;o<r;o++)i.startX=s.pointColl[o-1].x,i.startY=s.pointColl[o-1].y,i.endX=s.pointColl[o].x,i.endY=s.pointColl[o].y,e.moveTo(i.startX,i.startY),e.arc(i.startX,i.startY,n.topCenterCircle.radius,0,2*Math.PI),e.moveTo(i.endX,i.endY),e.arc(i.endX,i.endY,n.bottomCenterCircle.radius,0,2*Math.PI);var a={shape:null};t.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:a}}),"path"===a.shape&&(t.activeObj=n=s),e.moveTo(i.startX,i.startY),e.arc(i.startX,i.startY,n.topCenterCircle.radius,0,2*Math.PI),e.moveTo(i.endX,i.endY),e.arc(i.endX,i.endY,n.bottomCenterCircle.radius,0,2*Math.PI)}else this.drawRotationArcLine(e),e.lineTo(n.rotationCirclePoint.x,n.rotationCirclePoint.y);e.stroke(),e.fill(),e.closePath(),"arrow"!==n.shape&&"line"!==n.shape&&"path"!==n.shape&&(e.beginPath(),e.moveTo(n.rotationCirclePoint.x,n.rotationCirclePoint.y),e.arc(n.rotationCirclePoint.x,n.rotationCirclePoint.y,n.bottomCenterCircle.radius,0,2*Math.PI),e.stroke(),e.fill(),e.closePath()),e.lineWidth/=2},e.prototype.drawRotationArcLine=function(e){var t,i=this.parent,n=i.activeObj;sf.base.isNullOrUndefined(n.rotationCircleLine)&&(n.rotationCircleLine=22.5);var s=!1,o=!1;if((t=0===n.shapeDegree?i.transform.degree:i.transform.degree-n.shapeDegree)<0&&(t=360+t),n.flipObjColl)for(var r=0,a=n.flipObjColl.length;r<a;r++){var l=n.flipObjColl[r].toLowerCase();"horizontal"===l?s=!0:"vertical"===l&&(o=!0)}switch(t){case 0:case 360:o?(n.rotationCirclePoint={x:n.topCenterCircle.startX,y:n.topCenterCircle.startY-n.rotationCircleLine},e.moveTo(n.rotationCirclePoint.x,n.rotationCirclePoint.y+n.rotationCircleLine)):(n.rotationCirclePoint={x:n.bottomCenterCircle.startX,y:n.bottomCenterCircle.startY+n.rotationCircleLine},e.moveTo(n.rotationCirclePoint.x,n.rotationCirclePoint.y-n.rotationCircleLine));break;case 90:case-270:s?(n.rotationCirclePoint={x:n.centerRightCircle.startX+n.rotationCircleLine,y:n.centerLeftCircle.startY},e.moveTo(n.rotationCirclePoint.x-n.rotationCircleLine,n.rotationCirclePoint.y)):(n.rotationCirclePoint={x:n.centerLeftCircle.startX-n.rotationCircleLine,y:n.centerLeftCircle.startY},e.moveTo(n.rotationCirclePoint.x+n.rotationCircleLine,n.rotationCirclePoint.y));break;case 180:case-180:o?(n.rotationCirclePoint={x:n.bottomCenterCircle.startX,y:n.bottomCenterCircle.startY+n.rotationCircleLine},e.moveTo(n.rotationCirclePoint.x,n.rotationCirclePoint.y-n.rotationCircleLine)):(n.rotationCirclePoint={x:n.topCenterCircle.startX,y:n.topCenterCircle.startY-n.rotationCircleLine},e.moveTo(n.rotationCirclePoint.x,n.rotationCirclePoint.y+n.rotationCircleLine));break;case 270:case-90:s?(n.rotationCirclePoint={x:n.centerLeftCircle.startX-n.rotationCircleLine,y:n.centerLeftCircle.startY},e.moveTo(n.rotationCirclePoint.x+n.rotationCircleLine,n.rotationCirclePoint.y)):(n.rotationCirclePoint={x:n.centerRightCircle.startX+n.rotationCircleLine,y:n.centerLeftCircle.startY},e.moveTo(n.rotationCirclePoint.x-n.rotationCircleLine,n.rotationCirclePoint.y))}},e.prototype.drawSquareLines=function(e){var t,i=this.parent.activeObj,n=i.activePoint,s=n.startX,o=n.startY,r=n.width,a=n.height,l=i.strokeSettings,h=l.fillColor,d=l.strokeColor,c=l.strokeWidth;i.shape&&(t=i.shape.split("-")),"crop"===t[0]?e.strokeStyle="#fff":e.strokeStyle=d,e.beginPath(),e.rect(s,o,r,a),""!==h&&(e.fillStyle=h,e.fill()),e.rect(s+c,o+c,r-2*c,a-2*c),e.fillStyle=d,e.fill("evenodd"),e.closePath()},e.prototype.drawSelection=function(e,t){var i=this.parent,n=i.activeObj,s=n.activePoint,o=s.startX,r=s.startY,a=s.endX,l=s.endY;this.upperContext.strokeStyle=i.themeColl[i.theme].primaryColor,this.upperContext.beginPath(),n.horTopInnerLine={startX:o,startY:r+t,endX:a,endY:l+t},n.horBottomInnerLine={startX:o,startY:r+2*t,endX:a,endY:l+2*t},n.verLeftInnerLine={startX:o+e,startY:r,endX:o+e,endY:l},n.verRightInnerLine={startX:o+2*e,startY:r,endX:o+2*e,endY:l},this.upperContext.moveTo(n.horTopInnerLine.startX,n.horTopInnerLine.startY),this.upperContext.lineTo(n.horTopInnerLine.endX,n.horTopInnerLine.startY),this.upperContext.moveTo(n.horBottomInnerLine.startX,n.horBottomInnerLine.startY),this.upperContext.lineTo(n.horBottomInnerLine.endX,n.horBottomInnerLine.startY),this.upperContext.moveTo(n.verLeftInnerLine.startX,n.verLeftInnerLine.startY),this.upperContext.lineTo(n.verLeftInnerLine.endX,n.verLeftInnerLine.endY),this.upperContext.moveTo(n.verRightInnerLine.startX,n.verRightInnerLine.startY),this.upperContext.lineTo(n.verRightInnerLine.endX,n.verRightInnerLine.endY),this.upperContext.stroke(),this.upperContext.closePath()},e.prototype.shapeCircle=function(e,t,i){var n=this.parent,s=n.activeObj.activePoint,o=s.startX,r=s.startY,a=s.endX,l=s.endY,h=s.width;e.strokeStyle=n.themeColl[n.theme].primaryColor,e.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height),e.fillStyle="rgb(0, 0, 0, 0.25)",e.fillRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height);var d=e.lineWidth;e.lineWidth=2,e.beginPath(),e.ellipse(n.activeObj.horTopLine.startX+t/2,n.activeObj.horTopLine.startY+i/2,t/2,i/2,0,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.save(),e.beginPath(),e.arc((a-o)/2+o,(l-r)/2+r,h/2,0,2*Math.PI),e.closePath(),e.clip(),e.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height),e.restore(),e.lineWidth=d,this.drawOuterSelection(e,!0),n.currObjType.shape=""},e.prototype.shapeLine=function(e,t,i,n,s){var o=e.lineWidth;e.lineWidth=this.parent.activeObj.strokeSettings.strokeWidth,e.beginPath(),e.moveTo(t,i),e.lineTo(n,s),e.stroke(),e.lineWidth=o},e.prototype.manipulateSaveCtx=function(e,t,i){if(e!==this.lowerContext&&e!==this.upperContext){var n={width:0,height:0};this.parent.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:n,dimension:{width:e.canvas.width,height:e.canvas.height}}});t&&(t*=n.width),i&&(i*=n.height)}return{x:t,y:i}},e.prototype.arrow=function(e,t){var i=this.parent.activeObj,n=i.activePoint,s=n.startX,o=n.startY,r=n.endX,a=n.endY,l=i.strokeSettings.strokeWidth;e.lineWidth=l;var h=this.arrowDimension.arrow.width,d=this.arrowDimension.arrow.height,c=this.manipulateSaveCtx(e,h,d);h=c.x+l,d=c.y+l,this.dx=r-s,this.dy=a-o,e.fillStyle=i.strokeSettings.strokeColor;var p=Math.atan2(this.dy,this.dx),u="arrow"===i.start,f="arrow"===i.end,g="circle"===i.end||"square"===i.end;((t&&"left"===i.triangleDirection||"right"===i.triangleDirection)&&(u&&"none"===i.end||u&&!g)||!t&&(f&&"none"===i.start||!u&&!g))&&this.shapeLine(e,s,o,r,a),t&&"left"===i.triangleDirection||!t&&"right"===i.triangleDirection?(e.translate(r,a),e.rotate(p),this.shapeLine(e,0,0,-h,d/2),this.shapeLine(e,0,0,-h,-d/2),e.rotate(-p),e.translate(-r,-a)):(t&&"right"===i.triangleDirection||!t&&"left"===i.triangleDirection)&&(e.translate(s,o),e.rotate(p),this.shapeLine(e,0,0,h,d/2),this.shapeLine(e,0,0,h,-d/2),e.rotate(-p),e.translate(-s,-o))},e.prototype.arrowSolid=function(e,t){var i=this.parent.activeObj,n=i.strokeSettings.strokeWidth,s=i.activePoint,o=s.startX,r=s.startY,a=s.endX,l=s.endY,h=this.arrowDimension.arrowSolid.width,d=this.arrowDimension.arrowSolid.height,c=this.manipulateSaveCtx(e,h,d);h=c.x+n,d=c.y+n,this.dx=a-o,this.dy=l-r;var p=Math.atan2(this.dy,this.dx),u="arrowSolid"===i.start,f="arrowSolid"===i.end,g="circle"===i.end||"square"===i.end;(t&&u&&"none"===i.end||u&&!g||!t&&(f&&"none"===i.start||!u&&!g))&&this.shapeLine(e,o,r,a,l),t&&"left"===i.triangleDirection||!t&&"right"===i.triangleDirection?(e.translate(a,l),e.rotate(p),e.beginPath(),e.moveTo(n,0),e.lineTo(d/2-h,d/2),e.lineTo(d/2-h,-d/2),e.closePath(),e.fill(),e.rotate(-p),e.translate(-a,-l),i.rotatedAngle=p):(t&&"right"===i.triangleDirection||!t&&"left"===i.triangleDirection)&&(e.translate(o,r),e.rotate(p),e.beginPath(),e.moveTo(0-n,0),e.lineTo(h-d/2,d/2),e.lineTo(h-d/2,-d/2),e.closePath(),e.fill(),e.rotate(-p),e.translate(-o,-r),i.rotatedAngle=p)},e.prototype.arrowSquareStart=function(e){var t=this.parent.activeObj,i=t.strokeSettings.strokeWidth,n=t.activePoint,s=n.startX,o=n.startY,r=n.endX,a=n.endY,l="square"===t.start,h="circle"===t.end,d="squareSolid"===t.start,c="circleSolid"===t.end;(l&&"none"===t.end||l&&!h&&"square"!==t.start||d&&c)&&this.shapeLine(e,s,o,r,a),e.lineWidth=i,e.beginPath(),e.fillStyle=t.strokeSettings.strokeColor;var p=this.arrowDimension.square.width,u=this.arrowDimension.square.height,f=this.manipulateSaveCtx(e,p,u);p=f.x+i,u=f.y+i,this.dx=r-s,this.dy=a-o;var g=Math.atan2(this.dy,this.dx);"left"===t.triangleDirection?(e.translate(r,a),e.rotate(g),"squareSolid"===t.start&&e.fillRect(u/2-p,-u/2,p,u),e.strokeRect(u/2-p,-u/2,p,u),e.rotate(-g),e.translate(-r,-a),this.squareStartIntersectX1=r-u/2*Math.cos(g),this.squareStartIntersectY1=a-u/2*Math.sin(g),"square"===t.start&&"square"!==t.end&&"circle"!==t.end?this.shapeLine(e,s,o,this.squareStartIntersectX1,this.squareStartIntersectY1):"square"===t.start&&"circle"===t.end?this.shapeLine(e,this.endCircleIntersectX1,this.endCircleIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1):"squareSolid"===t.start&&"squareSolid"===t.end&&this.shapeLine(e,s,o,r,a)):"right"===t.triangleDirection&&(e.lineWidth=i,e.fillStyle=t.strokeSettings.strokeColor,"squareSolid"===t.start&&"squareSolid"===t.end&&this.shapeLine(e,s,o,r,a),e.translate(s,o),e.rotate(g),"squareSolid"===t.start&&e.fillRect(u/2-p,-u/2,p,u),e.strokeRect(u/2-p,-u/2,p,u),e.rotate(-g),e.translate(-s,-o),t.rotatedAngle=g,this.squareStartIntersectX1=s+u/2*Math.cos(g),this.squareStartIntersectY1=o+u/2*Math.sin(g),"square"===t.start&&"square"!==t.end&&"circle"!==t.end&&this.shapeLine(e,r,a,this.squareStartIntersectX1,this.squareStartIntersectY1),"square"===t.start&&"circle"===t.end&&this.shapeLine(e,this.endCircleIntersectX1,this.endCircleIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1))},e.prototype.arrowSquareEnd=function(e){var t=this.parent.activeObj,i=t.activePoint,n=i.startX,s=i.startY,o=i.endX,r=i.endY,a=t.strokeSettings.strokeWidth,l=this.arrowDimension.square.width,h=this.arrowDimension.square.height,d=this.manipulateSaveCtx(e,l,h);l=d.x+a,h=d.y+a,this.dx=o-n,this.dy=r-s;var c=Math.atan2(this.dy,this.dx);e.lineWidth=a,"right"===t.triangleDirection?(e.fillStyle=t.strokeSettings.strokeColor,"squareSolid"===t.end&&"none"===t.start&&this.shapeLine(e,n,s,o,r),e.translate(o,r),e.rotate(c),"squareSolid"===t.end&&e.fillRect(h/2-l,-h/2,l,h),e.strokeRect(h/2-l,-h/2,l,h),e.rotate(-c),e.translate(-o,-r),t.rotatedAngle=c,this.squareEndIntersectX1=o-h/2*Math.cos(c),this.squareEndIntersectY1=r-h/2*Math.sin(c),"square"===t.end&&"square"!==t.start&&"circle"!==t.start?this.shapeLine(e,n,s,this.squareEndIntersectX1,this.squareEndIntersectY1):"circle"===t.start&&"square"===t.end?this.shapeLine(e,this.squareEndIntersectX1,this.squareEndIntersectY1,this.startCircleIntersectX1,this.startCircleIntersectY1):"square"===t.start&&"square"===t.end&&this.shapeLine(e,this.squareEndIntersectX1,this.squareEndIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1)):"left"===t.triangleDirection&&(e.translate(n,s),e.rotate(c),"squareSolid"===t.end&&e.fillRect(h/2-l,-h/2,l,h),e.strokeRect(h/2-l,-h/2,l,h),e.rotate(-c),e.translate(-n,-s),t.rotatedAngle=c,this.squareEndIntersectX1=n+h/2*Math.cos(c),this.squareEndIntersectY1=s+h/2*Math.sin(c),"square"===t.end&&"square"!==t.start&&"circle"!==t.start?this.shapeLine(e,o,r,this.squareEndIntersectX1,this.squareEndIntersectY1):"circle"===t.start&&"square"===t.end?this.shapeLine(e,this.squareEndIntersectX1,this.squareEndIntersectY1,this.startCircleIntersectX1,this.startCircleIntersectY1):"square"===t.start&&"square"===t.end&&this.shapeLine(e,this.squareEndIntersectX1,this.squareEndIntersectY1,this.squareStartIntersectX1,this.squareStartIntersectY1))},e.prototype.arrowCircle=function(e,t){var i=this.parent,n=i.activeObj,s=n.activePoint,o=s.startX,r=s.startY,a=s.endX,l=s.endY,h=n.strokeSettings.strokeWidth;if(t&&"left"===n.triangleDirection||!t&&"right"===n.triangleDirection){e.lineWidth=h;var d=this.arrowDimension.circle.width;d=this.manipulateSaveCtx(e,d,null).x+h,e.beginPath(),e.arc(a,l,d,0,2*Math.PI),e.stroke(),e.closePath(),this.dx=a-o,this.dy=l-r;var c=this.dx*this.dx+this.dy*this.dy;if((v=(m=2*(this.dx*(o-a)+this.dy*(r-l)))*m-4*c*((o-a)*(o-a)+(r-l)*(r-l)-d*d))>=0){e.fillStyle=n.strokeSettings.strokeColor;var p=(-m-Math.sqrt(v))/(2*c),u=o+this.dx*p,f=r+this.dy*p;t?(this.startCircleIntersectX1=u,this.startCircleIntersectY1=f,e.beginPath(),e.fill(),e.beginPath(),"circle"===n.start&&"circle"===n.end?this.shapeLine(e,this.startCircleIntersectX1,this.startCircleIntersectY1,this.endCircleIntersectX1,this.endCircleIntersectY1):"circle"===n.start&&"circle"!==n.end&&"square"!==n.end&&this.shapeLine(e,o,r,this.startCircleIntersectX1,this.startCircleIntersectY1),e.stroke(),e.closePath()):(this.endCircleIntersectX1=u,this.endCircleIntersectY1=f,"circle"===n.end&&"circle"!==n.start&&"square"!==n.start&&this.shapeLine(e,o,r,this.endCircleIntersectX1,this.endCircleIntersectY1))}var g=Math.atan2(this.dy,this.dx);i.activeObj.rotatedAngle=g}else if(t&&"right"===n.triangleDirection||!t&&"left"===n.triangleDirection){e.lineWidth=h;d=this.arrowDimension.circle.width;d=this.manipulateSaveCtx(e,d,null).x+h,e.beginPath(),e.arc(o,r,d,0,2*Math.PI),e.stroke(),e.closePath(),this.dx=o-a,this.dy=r-l;var m,v;c=this.dx*this.dx+this.dy*this.dy;if((v=(m=2*(this.dx*(a-o)+this.dy*(l-r)))*m-4*c*((a-o)*(a-o)+(l-r)*(l-r)-d*d))>=0){e.fillStyle=n.strokeSettings.strokeColor;p=(-m-Math.sqrt(v))/(2*c),u=a+this.dx*p,f=l+this.dy*p;t?(this.startCircleIntersectX1=u,this.startCircleIntersectY1=f,"circle"===n.start&&"circle"===n.end?this.shapeLine(e,this.endCircleIntersectX1,this.endCircleIntersectY1,this.startCircleIntersectX1,this.startCircleIntersectY1):"circle"===n.start&&"circle"!==n.end&&"square"!==n.end&&this.shapeLine(e,a,l,this.startCircleIntersectX1,this.startCircleIntersectY1)):(this.endCircleIntersectX1=u,this.endCircleIntersectY1=f,e.beginPath(),e.fill(),e.beginPath(),"circle"===n.end&&"circle"!==n.start&&"square"!==n.start&&this.shapeLine(e,a,l,this.endCircleIntersectX1,this.endCircleIntersectY1))}g=Math.atan2(this.dy,this.dx);i.activeObj.rotatedAngle=g}},e.prototype.arrowCircleSolid=function(e,t){var i=this.parent.activeObj,n=i.activePoint,s=n.startX,o=n.startY,r=n.endX,a=n.endY,l="circleSolid"===i.start,h=i.strokeSettings.strokeWidth;if(t&&"left"===i.triangleDirection||!t&&"right"===i.triangleDirection){e.lineWidth=h,e.beginPath(),e.fillStyle=i.strokeSettings.strokeColor,(t&&l&&"none"===i.end||l&&"circle"!==i.end&&"square"!==i.end||!t&&"circleSolid"===i.end&&"none"===i.start)&&this.shapeLine(e,s,o,r,a);var d=this.arrowDimension.circle.width;d=this.manipulateSaveCtx(e,d,null).x+h,this.dx=r-s,this.dy=a-o,e.save(),e.beginPath(),e.arc(r,a,d,0,2*Math.PI),e.stroke(),e.fill(),e.closePath(),i.rotatedAngle=Math.atan2(this.dy,this.dx)}else if(t&&"right"===i.triangleDirection||!t&&"left"===i.triangleDirection){e.lineWidth=h,e.beginPath(),e.fillStyle=i.strokeSettings.strokeColor,(t&&l&&"none"===i.end||l&&"circle"!==i.end&&"square"!==i.end||!t&&"circleSolid"===i.end&&"none"===i.start)&&this.shapeLine(e,s,o,r,a);d=this.arrowDimension.circle.width;d=this.manipulateSaveCtx(e,d,null).x+h,this.dx=r-s,this.dy=a-o,e.save(),e.beginPath(),e.arc(s,o,d,0,2*Math.PI),e.stroke(),e.fill(),e.closePath(),i.rotatedAngle=Math.atan2(this.dy,this.dx)}},e.prototype.arrowBar=function(e,t){var i=this.parent,n=i.activeObj,s=n.activePoint,o=s.startX,r=s.startY,a=s.endX,l=s.endY,h=n.strokeSettings.strokeWidth;if(t&&"left"===n.triangleDirection||!t&&"right"===n.triangleDirection){e.lineWidth=h,e.beginPath(),e.fillStyle=n.strokeSettings.strokeColor,(t&&"bar"===n.start&&"none"===n.end||"bar"===n.start&&"circle"!==n.end&&"square"!==n.end||!t&&("bar"===n.end&&"none"===n.start||"bar"===n.end&&"circle"!==n.start&&"square"!==n.start))&&this.shapeLine(e,o,r,a,l);var d=this.arrowDimension.bar.width,c=this.arrowDimension.bar.height;d=(u=this.manipulateSaveCtx(e,d,c)).x+h,c=u.y+h,this.dx=a-o,this.dy=l-r;var p=Math.atan2(this.dy,this.dx);e.translate(a,l),e.rotate(p),e.fillRect(c/4-d,-c/2,d,c),e.rotate(-p),e.translate(-a,-l),n.rotatedAngle=p}else if(t&&"right"===n.triangleDirection||!t&&"left"===n.triangleDirection){e.lineWidth=h,e.beginPath(),e.fillStyle=n.strokeSettings.strokeColor,(t&&"bar"===n.start&&"none"===n.end||"bar"===n.start&&"circle"!==n.end&&"square"!==n.end||!t&&"bar"===n.end&&"none"===n.start)&&this.shapeLine(e,o,r,a,l);var u;d=this.arrowDimension.bar.width,c=this.arrowDimension.bar.height;d=(u=this.manipulateSaveCtx(e,d,c)).x+h,c=u.y+h,this.dx=a-o,this.dy=l-r;p=Math.atan2(this.dy,this.dx);e.translate(o,r),e.rotate(p),e.fillRect(c/4-d,-c/2,d,c),e.rotate(-p),e.translate(-o,-r),i.activeObj.rotatedAngle=p}},e.prototype.shapeImage=function(e){var t=this.parent,i=t.activeObj,n=i.activePoint,s=n.startX,o=n.startY,r=n.width,a=n.height,l=i.imageCanvas.getContext("2d");if(e===this.lowerContext&&this.isImageApply){var h={width:0,height:0};t.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i.imageElement.width,height:i.imageElement.height,obj:h,isImgShape:null}}),(r<h.width/5||a<h.height/5)&&(l.clearRect(0,0,i.imageCanvas.width,i.imageCanvas.height),t.notify("selection",{prop:"applyTransformToImg",onPropertyChange:!1,value:{ctx:l}}),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("selection",{prop:"setImageClarity",onPropertyChange:!1,value:{bool:!1}}),this.isImageApply=!1)}var d={startX:0,startY:0,width:0,height:0};d.width=r,d.height=a,4===i.flipObjColl.length&&(i.flipObjColl=[],i.shapeFlip=""),d.startX=(r-d.width)/2+s,d.startY=(a-d.height)/2+o;var c=e.globalAlpha;e.globalAlpha=i.opacity,i.rotateFlipColl&&i.rotateFlipColl.length>0?this.rotateImage(e):e.drawImage(i.imageCanvas,d.startX,d.startY,d.width,d.height),e.globalAlpha=c,t.currObjType.isText=!1},e.prototype.shapeText=function(e){var t=this.parent,i=e.filter,n=t.activeObj,s=n.activePoint,o=s.startX,r=s.startY,a=s.width,l=s.height,h=n.keyHistory.split("\n"),d=n.textSettings,c=d.fontFamily,p=d.bold,u=d.italic,f=n.textSettings.fontSize,g=((f+.25*f)*h.length-f*h.length)/h.length;e.filter="none";for(var m=0;m<h.length;m++){var v=h[m],b=(m+1)*f*.85+m*g;-360===t.transform.degree&&(t.transform.degree=0),0===t.transform.degree||180===t.transform.degree?f>l&&(f=n.textSettings.fontSize=l-.1*l):f>a&&(f=n.textSettings.fontSize=a-.1*a),e.strokeStyle=n.strokeSettings.strokeColor,e.fillStyle=n.strokeSettings.strokeColor;var y="";p&&(y="bold "),u&&(y="italic "),p&&u&&(y="italic bold "),e.font=y+f+"px "+c,4===n.flipObjColl.length&&(n.flipObjColl=[],n.shapeFlip=""),n.rotateFlipColl&&n.rotateFlipColl.length>0?this.rotateText(e):e.fillText(v,o+.1*f,r+b)}e.filter=i,t.currObjType.isText=!1},e.prototype.updateActPoint=function(e,t){var i=this.parent,n=i.activeObj,s=n.activePoint;return"horizontal"===e.toLowerCase()?s.startX<=t.canvas.width/2?(s.startX=t.canvas.width/2+(t.canvas.width/2-s.endX),s.endX=s.startX+s.width,this.updateActiveObject(s,n),i.activeObj=n):s.startX>=t.canvas.width/2&&(s.startX=t.canvas.width-s.endX,s.endX=s.startX+s.width,this.updateActiveObject(s,n),i.activeObj=n):"vertical"===e.toLowerCase()&&(s.startY<=t.canvas.height/2?(s.startY=t.canvas.height/2+(t.canvas.height/2-s.endY),s.endY=s.startY+s.height,this.updateActiveObject(s,n),i.activeObj=n):s.startY>=t.canvas.height/2&&(s.startY=t.canvas.height-s.endY,s.endY=s.startY+s.height,this.updateActiveObject(s,n),i.activeObj=n)),s},e.prototype.rotateImage=function(e){var t,i=this.parent,n=i.activeObj,s=sf.base.extend({},i.activeObj,null,!0);-450===(t=0===n.shapeDegree?i.transform.degree:i.transform.degree-n.shapeDegree)&&(t=-90),t<0&&(t=360+t);var o={startX:0,startY:0,width:0,height:0};o.width=t%90==0&&t%180!=0?n.activePoint.height:n.activePoint.width,o.height=t%90==0&&t%180!=0?n.activePoint.width:n.activePoint.height,o.startX=n.activePoint.startX,o.startY=n.activePoint.startY;var r,a=o.startX,l=o.startY,h=[];e.save();for(var d=0,c=n.rotateFlipColl.length;d<c;d++){var p=n.rotateFlipColl[d];h.push(p),"number"==typeof p?(-450===(r=0===n.shapeDegree?p:p-n.shapeDegree)&&(r=-90),r<0&&(r=360+r),o.width=r%90==0&&r%180!=0?n.activePoint.height:n.activePoint.width,o.height=r%90==0&&r%180!=0?n.activePoint.width:n.activePoint.height,e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(Math.PI/180*p),e.translate(-e.canvas.height/2,-e.canvas.width/2),r%90==0&&r%270!=0||0===r?(l=e.canvas.width-(n.activePoint.startX+n.activePoint.width),l+=(n.activePoint.width-o.height)/2,a=o.startY):r%270==0&&(a=e.canvas.height-(n.activePoint.startY+n.activePoint.height),a+=(n.activePoint.height-o.width)/2,l=o.startX),o.startX=a,o.startY=l,n.activePoint.startX=a,n.activePoint.startY=l,n.activePoint.endX=n.activePoint.startX+o.width,n.activePoint.endY=n.activePoint.startY+o.height,n=this.updateWidthHeight(n)):("horizontal"===p&&t%90==0&&t%180!=0?p="vertical":"vertical"===p&&t%90==0&&t%180!=0&&(p="horizontal"),"horizontal"===p?(e.translate(e.canvas.width,0),e.scale(-1,1),n.activePoint=this.updateActPoint("horizontal",e)):"vertical"===p&&(e.translate(0,e.canvas.height),e.scale(1,-1),n.activePoint=this.updateActPoint("vertical",e)),o.startX=n.activePoint.startX,o.startY=n.activePoint.startY),o.startX=n.activePoint.startX,o.startY=n.activePoint.startY,a=o.startX,l=o.startY}0!==n.rotatedAngle&&i.notify("shape",{prop:"setPointCollForShapeRotation",onPropertyChange:!1,value:{obj:n}}),e.drawImage(n.imageCanvas,o.startX,o.startY,o.width,o.height),e.restore(),i.activeObj=s,360!==i.transform.degree&&-360!==i.transform.degree||(i.transform.degree=0)},e.prototype.rotateText=function(e){var t,i=this.parent,n=i.activeObj,s=sf.base.extend({},i.activeObj,null,!0),o=i.activeObj.activePoint;-450===(t=0===n.shapeDegree?i.transform.degree:i.transform.degree-n.shapeDegree)&&(t=-90),t<0&&(t=360+t);var r={startX:0,startY:0,width:0,height:0};r.width=t%90==0&&t%180!=0?o.height:o.width,r.height=t%90==0&&t%180!=0?o.width:o.height,r.startX=o.startX,r.startY=o.startY;var a,l=r.startX,h=r.startY,d=[];e.save();for(var c=0,p=n.rotateFlipColl.length;c<p;c++){var u=n.rotateFlipColl[c];d.push(u),"number"==typeof u?(-450===(a=0===n.shapeDegree?u:u-n.shapeDegree)&&(a=-90),a<0&&(a=360+a),r.width=a%90==0&&a%180!=0?o.height:o.width,r.height=a%90==0&&a%180!=0?o.width:o.height,e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(Math.PI/180*u),e.translate(-e.canvas.height/2,-e.canvas.width/2),a%90==0&&a%270!=0||0===a?(h=e.canvas.width-o.endX,l=o.startY):a%270==0&&(l=e.canvas.height-o.endY,h=o.startX),r.startX=l,r.startY=h,o.startX=l,o.startY=h,o.endX=o.startX+r.width,o.endY=o.startY+r.height,n=this.updateWidthHeight(n)):("horizontal"===u&&t%90==0&&t%180!=0?u="vertical":"vertical"===u&&t%90==0&&t%180!=0&&(u="horizontal"),"horizontal"===u?(e.translate(e.canvas.width,0),e.scale(-1,1)):"vertical"===u&&(e.translate(0,e.canvas.height),e.scale(1,-1)),n.activePoint=o=this.updateActPoint(u,e),r.startX=o.startX,r.startY=o.startY),r.startX=o.startX,r.startY=o.startY,l=r.startX,h=r.startY}0!==n.rotatedAngle&&i.notify("shape",{prop:"setPointCollForShapeRotation",onPropertyChange:!1,value:{obj:n}}),h+=.4*n.textSettings.fontSize,this.textFlipDegree(e,l,h),e.restore(),i.activeObj=s,360!==i.transform.degree&&-360!==i.transform.degree||(i.transform.degree=0)},e.prototype.textFlipDegree=function(e,t,i){for(var n=this.parent.activeObj,s=n.keyHistory.split("\n"),o=n.textSettings.fontSize,r=.85*o+(o*s.length-o*s.length)/s.length,a=0,l=s.length;a<l;a++){var h=s[a];a>0&&(1===a&&(r-=.85*o),r+=o+.15*o),e.fillText(h,t+.15*o,i+r+(a>0?.25*o:.35*-o))}},e.prototype.clearOuterCanvas=function(e){var t=this.parent,i=t.img,n=i.destLeft,s=i.destTop,o=i.destWidth,r=i.destHeight,a=n>0?n:0,l=s>0?s:0;e.clearRect(0,0,a,t.lowerCanvas.height),e.clearRect(n+o,0,t.lowerCanvas.width-(n+o),t.lowerCanvas.height),e.clearRect(0,0,t.lowerCanvas.width,l),e.clearRect(0,s+r,t.lowerCanvas.width,t.lowerCanvas.height-(s+r)),""!==t.transform.currFlipState&&(t.img.destLeft=n,t.img.destTop=s)},e.prototype.setDestPoints=function(){var e,t=this.parent,i=t.transform,n=i.degree,s=i.zoomFactor;if(n%90==0&&n%180!=0){var o={width:0,height:0};t.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:t.img.srcHeight,height:t.img.srcWidth,obj:o,isImgShape:null}}),e=o,this.isRotateZoom&&(e.width+=e.width*s,e.height+=e.height*s,t.img.destWidth=e.height,t.img.destHeight=e.width),t.img.destLeft=(t.lowerCanvas.clientWidth-e.height)/2,t.img.destTop=(t.lowerCanvas.clientHeight-e.width+1)/2,t.img.destWidth=e.height,t.img.destHeight=e.width}else{o={width:0,height:0};t.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:t.img.srcWidth,height:t.img.srcHeight,obj:o,isImgShape:null}}),e=o,this.isRotateZoom&&(e.width+=e.width*s,e.height+=e.height*s,t.img.destWidth=e.width,t.img.destHeight=e.height),t.img.destLeft=(t.lowerCanvas.clientWidth-e.width)/2,t.img.destTop=(t.lowerCanvas.clientHeight-e.height+1)/2,t.img.destWidth=e.width,t.img.destHeight=e.height}},e.prototype.updateCurrTransState=function(e,t,i,n){var s=this.parent,o=s.img.destLeft,r=s.img.destTop;"initial"===e&&(this.lowerContext.setTransform(1,0,0,1,0,0),sf.base.isNullOrUndefined(t)&&this.setDestPoints()),s.isCircleCrop||s.currSelectionPoint&&"crop-circle"===s.currSelectionPoint.shape?(this.currTransState(e,!0,null,i),0===s.transform.degree&&""===s.transform.currFlipState&&0===s.transform.straighten&&sf.base.isNullOrUndefined(n)&&(s.img.destLeft=o,s.img.destTop=r),i&&(s.img.destLeft+=s.panPoint.totalPannedClientPoint.x,s.img.destTop+=s.panPoint.totalPannedClientPoint.y),s.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),i&&(s.img.destLeft-=s.panPoint.totalPannedClientPoint.x,s.img.destTop-=s.panPoint.totalPannedClientPoint.y)):(this.currTransState(e,null,null,i),0===s.transform.degree&&""===s.transform.currFlipState&&0===s.transform.straighten&&sf.base.isNullOrUndefined(n)&&(s.img.destLeft=o,s.img.destTop=r))},e.prototype.currTransState=function(e,t,i,n){var s=this.parent;i=i||this.lowerContext,"initial"===e?this.setTransformColl(i,e):"reverse"===e&&(this.setTransformColl(i,e),this.setClientTransDim(t),(s.isCircleCrop||s.currSelectionPoint&&"crop-circle"===s.currSelectionPoint.shape&&sf.base.isNullOrUndefined(n))&&(n&&(s.img.destLeft+=s.panPoint.totalPannedClientPoint.x,s.img.destTop+=s.panPoint.totalPannedClientPoint.y),s.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),n&&(s.img.destLeft-=s.panPoint.totalPannedClientPoint.x,s.img.destTop-=s.panPoint.totalPannedClientPoint.y)))},e.prototype.setTransformColl=function(e,t){var i=this.parent;if("initial"===t)for(var n=0,s=i.rotateFlipColl.length;n<s;n++)this.setTransform(e,i.rotateFlipColl[n]);else if("reverse"===t)for(n=i.rotateFlipColl.length-1;n>=0;n--)this.setTransform(e,i.rotateFlipColl[n],!0)},e.prototype.setTransform=function(e,t,i){var n=this.parent;switch(i&&90===t?t=-90:i&&-90===t&&(t=90),"horizontal"===t&&n.transform.degree%90==0&&n.transform.degree%180!=0?t="vertical":"vertical"===t&&n.transform.degree%90==0&&n.transform.degree%180!=0&&(t="horizontal"),n.notify("transform",{prop:"setReverseRotate",onPropertyChange:!1,value:{bool:!0}}),n.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!0}}),sf.base.isNullOrUndefined(i)&&e.clearRect(0,0,e.canvas.width,e.canvas.height),t){case 90:case-90:e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(Math.PI/180*t),e.translate(-e.canvas.width/2,-e.canvas.height/2);break;case"horizontal":e.translate(e.canvas.width,0),e.scale(-1,1);break;case"vertical":e.translate(0,e.canvas.height),e.scale(1,-1)}n.notify("transform",{prop:"setReverseRotate",onPropertyChange:!1,value:{bool:!1}}),n.notify("transform",{prop:"setReverseFlip",onPropertyChange:!1,value:{isReverseFlip:!1}})},e.prototype.drawImgToCanvas=function(e){var t=this.parent;this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.img.destWidth=e.width,t.img.destHeight=e.height,this.isInitialLoading&&(t.notify("filter",{prop:"initFilter",onPropertyChange:!1}),this.isInitialLoading=!1);var i=this.lowerContext.filter;this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.drawImage(),(t.currSelectionPoint&&"crop-circle"===t.currSelectionPoint.shape||t.isCircleCrop)&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),this.lowerContext.filter=i},e.prototype.renderImage=function(e,t,i,n){var s=this.parent;this.lowerContext.filter;s.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),sf.base.isNullOrUndefined(t)&&(this.upperContext.clearRect(0,0,s.lowerCanvas.width,s.lowerCanvas.height),this.lowerContext.clearRect(0,0,s.lowerCanvas.width,s.lowerCanvas.height)),e?this.setTransformColl(this.lowerContext,"initial"):(0!==s.transform.zoomFactor&&(this.isRotateZoom=!0),this.updateCurrTransState("initial",null,null,n)),s.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),this.drawImage(),s.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),e?this.setTransformColl(this.lowerContext,"reverse"):(this.updateCurrTransState("reverse",null,null,n),this.isRotateZoom=!1),i?(s.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),s.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}})):(s.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),s.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}})),this.clearOuterCanvas(this.lowerContext),(s.isCircleCrop||s.currSelectionPoint&&"crop-circle"===s.currSelectionPoint.shape)&&s.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})},e.prototype.imageOnLoad=function(e){var t=this,i=this.parent,n=this;i.baseImg.src=e,i.baseImg.onload=function(){if(i.notify("filter",{prop:"update-finetunes",onPropertyChange:!1}),n.lowerContext.drawImage(i.baseImg,0,0,n.parent.lowerCanvas.width,n.parent.lowerCanvas.height),sf.popups.hideSpinner(i.element),i.element.style.opacity="1",n.updateBaseImgCanvas(),n.updateCanvas(),i.currObjType.isUndoZoom&&(i.currObjType.isUndoZoom=!1,n.parent.lowerCanvas.style.display="block"),i.isUndoRedo=t.isErrorImage=!1,sf.base.isBlazor())i.updateToolbar(i.element,"imageLoaded","initial"),sf.base.Browser.isDevice&&(i.element.querySelector(".e-bottom-toolbar-area").style.display="block",i.element.querySelector(".e-canvas-wrapper").style.height=i.element.offsetHeight-2*i.toolbarHeight-1+"px");else if(sf.base.Browser.isDevice){i.notify("toolbar",{prop:"destroy-top-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"destroy-bottom-toolbar",onPropertyChange:!1});var e={isApplyBtn:!1,isDevice:sf.base.Browser.isDevice,isOkBtn:null,isResize:null,isFrame:null,isMainToolbar:!0};i.notify("toolbar",{prop:"init-main-toolbar",onPropertyChange:!1,value:e}),i.notify("toolbar",{prop:"create-bottom-toolbar",onPropertyChange:!1})}else{i.notify("toolbar",{prop:"destroy-top-toolbar",onPropertyChange:!1});e={isApplyBtn:!1,isDevice:!1,isOkBtn:null};i.notify("toolbar",{prop:"init-main-toolbar",onPropertyChange:!1,value:e})}},i.baseImg.onerror=function(){sf.popups.hideSpinner(i.element),n.isErrorImage=!0,n.errorLoading()}},e.prototype.errorLoading=function(){var e=this.parent,t={fileName:null,fileType:null,isValidImage:!1};sf.base.isBlazor()&&e.events&&!0===e.events.fileOpened.hasDelegate?e.dotNetRef.invokeMethodAsync("FileOpenEventAsync","FileOpened",t):e.trigger("fileOpened",t)},e.prototype.updateBaseImgCanvas=function(){var e=this.parent;e.baseImgCanvas.width=e.baseImg.width,e.baseImgCanvas.height=e.baseImg.height,e.baseImgCanvas.getContext("2d").drawImage(e.baseImg,0,0)},e.prototype.updateCanvas=function(){var e=this.parent,t={fileName:this.fileName,fileType:this.fileType,isValidImage:!0};e.img.srcWidth=e.baseImgCanvas.width,e.img.srcHeight=e.baseImgCanvas.height;var i={width:0,height:0};e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:e.img.srcWidth,height:e.img.srcHeight,obj:i,isImgShape:null}});var n=i;e.img.destLeft=(e.lowerCanvas.clientWidth-n.width)/2,e.img.destTop=(e.lowerCanvas.clientHeight-n.height+1)/2,this.drawImgToCanvas(n),this.origDim.width=e.img.destWidth,this.origDim.height=e.img.destHeight,this.zoomCrop.width=e.img.destWidth,this.zoomCrop.height=e.img.destHeight,e.notify("transform",{prop:"setCropDimension",onPropertyChange:!1,value:{width:e.img.destWidth,height:e.img.destHeight}});var s={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};e.notify("crop",{prop:"setCropDestPoints",onPropertyChange:!1,value:{point:s}});var o=this.lowerContext.filter;this.lowerContext.filter="none",e.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=o,e.img.destWidth>0&&e.img.destHeight>0&&(e.isImageLoaded=!0),e.isUndoRedo&&""!==e.transform.currFlipState&&e.notify("transform",{prop:"flipImage",onPropertyChange:!1,value:{direction:e.toPascalCase(e.transform.currFlipState)}}),e.disabled&&e.element.setAttribute("class","e-disabled"),e.isImageLoaded&&"0.5"!==e.element.style.opacity&&(sf.base.isBlazor()&&e.events&&!0===e.events.fileOpened.hasDelegate?e.dotNetRef.invokeMethodAsync("FileOpenEventAsync","FileOpened",t):e.trigger("fileOpened",t)),(1!==e.zoomSettings.zoomFactor||e.zoomSettings.zoomPoint)&&e.zoom(e.zoomSettings.zoomFactor,e.zoomSettings.zoomPoint),sf.base.isNullOrUndefined(this.initZoomValue)&&(this.initZoomValue=e.zoomSettings.zoomFactor),this.isImageEdited=!1},e.prototype.resetFrameZoom=function(e){var t=this.parent;if(!sf.base.isNullOrUndefined(t.tempFrameZoomLevel)){var i=t.tempFrameZoomLevel;t.tempFrameZoomLevel=null,t.notify("transform",{prop:"resetZoom",onPropertyChange:!1}),t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:i,zoomPoint:null,isResize:!0}});var n=t.cancelCropSelection;e&&n&&(n.previousObj.frameObj=sf.base.extend({},t.frameObj,null,!0),n.currentObj.frameObj=sf.base.extend({},t.frameObj,null,!0),n.previousObj.frame=n.currentObj.frame=t.frameObj.type),this.updateCropSelObj(),t.cancelCropSelection=null}},e.prototype.performCancel=function(e){var t=this.parent,i=t.isStraightening;e=e||!1;var n={bool:!1};if(t.allowDownScale=!0,t.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:n}}),JSON.stringify(t.frameObj)!==JSON.stringify(t.tempFrameObj)&&(sf.base.extend(t.frameObj,t.tempFrameObj),this.renderImage(null,null,!0)),this.resetFrameZoom(!1),n.bool)t.notify("freehand-draw",{prop:"cancelFhd",onPropertyChange:!1}),sf.base.isBlazor()?t.updateToolbar(t.element,"destroyQuickAccessToolbar"):t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}});else if("block"===t.textArea.style.display||"inline-block"===t.textArea.style.display)t.textArea.style.display="none",t.textArea.value="",t.textArea.style.transform="",this.prevActObj?(t.activeObj=this.prevActObj,this.prevActObj=null):(t.activeObj.strokeSettings=this.tempStrokeSettings,t.activeObj.textSettings=this.tempTextSettings),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),this.isShapeTextInserted&&t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}}),sf.base.isBlazor()?t.updateToolbar(t.element,"imageLoaded"):t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),t.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:t.activeObj}});else if(!sf.base.isBlazor()&&(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&!i)&&document.querySelector("#"+t.element.id+"_sliderWrapper")||sf.base.isBlazor()&&!t.element.querySelector(".e-ie-contextual-slider").classList.contains("e-hidden")||t.currObjType.isFiltered){this.lowerContext.filter=this.tempAdjValue,t.canvasFilter=this.tempAdjValue,t.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.tempAdjValue}}),t.initialAdjustmentValue=this.tempAdjValue,this.lowerContext.filter.split(" ").length>1&&"1"===this.lowerContext.filter.split(" ")[0].split("(")[1].split(")")[0]&&t.notify("filter",{prop:"setBrightnessAdjusted",onPropertyChange:!1,value:{isBrightnessAdjusted:!1}}),t.currentFilter=this.tempFilter,t.notify("filter",{prop:"setBevelFilter",onPropertyChange:!1,value:{bevelFilter:this.lowerContext.filter}}),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.redrawImgWithObj(),t.currObjType.isFiltered=!1;var s={tempAdjustmentLevel:null};t.notify("filter",{prop:"getTempAdjustmentLevel",onPropertyChange:!1,value:{obj:s}}),t.notify("filter",{prop:"setAdjustmentLevel",onPropertyChange:!1,value:{adjustmentLevel:sf.base.extend({},s.tempAdjustmentLevel,{},!0)}}),t.notify("undo-redo",{prop:"setUndoRedoStep",onPropertyChange:!1,value:{step:this.tempUndoRedoStep}}),t.upperCanvas.style.cursor=t.cursor="default",t.currObjType.isCustomCrop=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.clearOuterCanvas(this.lowerContext),(t.currSelectionPoint&&"crop-circle"===t.currSelectionPoint.shape||t.isCircleCrop)&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}});var o={type:"main",isApplyBtn:null,isCropping:null,isZooming:null};sf.base.isBlazor()?t.updateToolbar(t.element,"imageLoaded"):(t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:o})),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}})}else if(e&&(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&!i)){o={type:"main",isApplyBtn:null,isCropping:null,isZooming:null};sf.base.isBlazor()?t.updateToolbar(t.element,"imageLoaded"):t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:o})}else this.cancelItems(),t.transform.zoomFactor>0?(t.togglePan=!0,t.notify("selection",{prop:"setDragCanvas",value:{bool:!0}})):(t.togglePan=!1,t.notify("selection",{prop:"setDragCanvas",value:{bool:!1}}));this.isShapeTextInserted=!1,this.isNewPath=!1,sf.base.isBlazor()||(t.notify("toolbar",{prop:"refresh-dropdown-btn",value:{isDisabled:!1}}),t.notify("toolbar",{prop:"setCurrentToolbar",value:{type:"main"}}))},e.prototype.cancelItems=function(){var e,t=this.parent,i=!1,n=t.element.id,s=t.element.querySelector("#"+n+"_aspectratio"),o=t.element.querySelector("#"+n+"_nonaspectratio");if(void 0!==t.activeObj.shape&&(e=t.activeObj.shape.split("-")),(void 0===e&&t.currObjType.isCustomCrop||void 0!==e&&"crop"===e[0])&&(i=!0),i&&t.isCropTab&&(t.isCropTab=!1,t.transform.zoomFactor=t.transform.defaultZoomFactor),t.isResize&&(s||o||"resize-toolbar"===t.currentToolbar)){var r={width:null,height:null};t.notify("selection",{prop:"getNumTextValue",onPropertyChange:!1,value:{obj:r}});var a={x:r.width,y:r.height},l=t.element.querySelector("#"+t.element.id+"_aspectratio"),h=t.element.querySelector(".e-ie-toolbar-aspect-ratio-btn");if(a&&a.x&&a.y&&!sf.base.isNullOrUndefined(t.aspectWidth))if(l||h&&!h.classList.contains("e-hidden"))t.notify("transform",{prop:"resizeImage",value:{width:t.aspectWidth,height:t.aspectHeight}});else{var d=t.currObjType.isUndoAction;t.currObjType.isUndoAction=!1,t.notify("transform",{prop:"resizeCrop",value:{width:t.aspectWidth,height:t.aspectHeight}}),t.currObjType.isUndoAction=d}var c={prevCropObj:t.prevCropObj},p={prevObj:t.prevObj};if(t.notify("toolbar",{prop:"getPrevCropObj",onPropertyChange:!1,value:{obj:c}}),t.notify("toolbar",{prop:"getPrevObj",onPropertyChange:!1,value:{obj:p}}),c.prevCropObj&&p.prevObj){t.objColl=[],t.pointColl=[],t.freehandCounter=0,t.cropObj=sf.base.extend({},c.prevCropObj,{},!0),this.setCurrentObj(p.prevObj),t.objColl=p.prevObj.objColl,t.pointColl=p.prevObj.pointColl,t.freehandCounter=t.pointColl.length,t.transform.straighten=0,t.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}});var u=t.currSelectionPoint?sf.base.extend({},t.currSelectionPoint,{},!0):null;t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-t.transform.zoomFactor,zoomPoint:null,isResize:!0}}),t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:p.prevObj.defaultZoom,zoomPoint:null,isResize:!0}}),t.currSelectionPoint=u,p.prevObj.zoomFactor&&t.setProperties({zoomSettings:{zoomFactor:p.prevObj.zoomFactor}},!0),t.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:t.zoomSettings.zoomFactor}})}t.isResize=!1,t.notify("transform",{prop:"setResizedImgAngle",onPropertyChange:!1,value:{angle:null}});var f=t.isCropTab;t.isCropTab=!1,this.updateCropSelObj(),t.isCropTab=f}switch(!0){case t.togglePen:this.cancelPen();break;case"text"===t.activeObj.shape:this.cancelText(i);break;case-1!==["rectangle","ellipse","line","arrow","path","image"].indexOf(t.activeObj.shape):this.cancelShape();break;case i:this.cancelSelection();break;default:t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}})}t.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),t.upperCanvas.style.cursor=t.cursor="default",t.currObjType.isCustomCrop=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null};sf.base.isBlazor()?t.updateToolbar(t.element,"imageLoaded"):t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:!1,isZooming:null}})},e.prototype.cancelPen=function(){var e=this.parent;this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.togglePen=!1,e.upperCanvas.style.cursor=e.cursor="default";var t=sf.base.extend([],e.pointColl,[],!0);e.pointColl={};for(var i=0;i<this.tempFreehandCounter;i++)e.pointColl[i]=t[i];e.freehandCounter=this.tempFreehandCounter,e.notify("freehand-draw",{prop:"setCurrentFreehandDrawIndex",value:{value:this.tempCurrFhdIndex}}),e.activeObj.strokeSettings=this.tempStrokeSettings,e.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:e.activeObj.strokeSettings,strokeColor:null,fillColor:null,strokeWidth:null}}),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),e.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!1}})},e.prototype.cancelText=function(e){var t=this.parent;if(t.notify("shape",{prop:"setTextSettings",onPropertyChange:!1,value:{textSettings:this.tempTextSettings,fontFamily:null,fontSize:null}}),t.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:this.tempStrokeSettings,strokeColor:null,fillColor:null,strokeWidth:null}}),sf.base.isNullOrUndefined(t.activeObj.currIndex))t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height);else{var i={appliedUndoRedoColl:[]};t.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:i}});var n=i.appliedUndoRedoColl.length,s=i.appliedUndoRedoColl[n-1];this.prevActObj&&s&&s.currentObjColl.length&&s.currentObjColl[s.currentObjColl.length-1].currIndex===this.prevActObj.currIndex?(t.activeObj=this.prevActObj,this.prevActObj=null):(t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height)),t.activeObj.shape&&"Enter Text"===t.activeObj.keyHistory?(t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("shape",{prop:"draw-shape-text"}),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}})):t.activeObj.shape&&(t.notify("shape",{prop:"redraw-text"}),t.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:t.activeObj}}),e||void 0===t.activeObj.topLeftCircle||t.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}}),t.clearSelection())}sf.base.isBlazor()?t.updateToolbar(t.element,"destroyQuickAccessToolbar"):t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),this.tempTextSettings={text:"Enter Text",fontFamily:t.fontFamily.default,fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1}},e.prototype.cancelShape=function(){var e=this.parent;if(e.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:this.tempStrokeSettings,strokeColor:null,fillColor:null,strokeWidth:null}}),sf.base.isNullOrUndefined(e.activeObj.currIndex))e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height);else if(this.isNewPath)e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),this.renderImage();else{var t={appliedUndoRedoColl:[]};e.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:t}});for(var i=void 0,n=0,s=t.appliedUndoRedoColl.length;n<s;n++)for(var o=t.appliedUndoRedoColl[n].currentObjColl,r=0,a=o.length;r<a;r++)if(this.prevActObj&&this.prevActObj.currIndex&&o[r].currIndex===this.prevActObj.currIndex){i=o[0];break}this.prevActObj&&i?(e.activeObj=this.prevActObj,this.prevActObj=null,e.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:e.activeObj}}),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"cancel"}}),e.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}})):(e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height))}e.currObjType.isDragging=!1,sf.base.isBlazor()?e.updateToolbar(e.element,"destroyQuickAccessToolbar"):e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1})},e.prototype.cancelSelection=function(){var e=this.parent;if(e.cancelCropSelection){var t={value:e.tempStraighten};e.transform.straighten=t.value,e.straightenBaseImageCanvas(),e.notify("freehand-draw",{prop:"resetStraightenPoint"}),e.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:e.activeObj}}),e.notify("crop",{prop:"resizeWrapper"}),this.updateCropSelObj(),this.tempStraightenDestPoints&&JSON.stringify(this.tempStraightenDestPoints)!==JSON.stringify(this.straightenDestPoints)&&(this.straightenDestPoints=sf.base.extend({},this.tempStraightenDestPoints,{},!0))}},e.prototype.updateCropSelObj=function(){var e=this.parent;e.cancelCropSelection&&(e.cropObj=sf.base.extend({},e.cancelCropSelection.previousCropObj,{},!0),e.afterCropActions=e.cancelCropSelection.previousObj.afterCropActions,e.notify("undo-redo",{prop:"undoDefault",onPropertyChange:!1,value:{obj:e.cancelCropSelection}}),e.currSelectionPoint=sf.base.extend({},e.cancelCropSelection.previousCropObj.activeObj,!0),e.currSelectionPoint&&sf.base.isNullOrUndefined(e.currSelectionPoint.shape)&&(e.currSelectionPoint=null),this.clearOuterCanvas(this.lowerContext),(e.isCircleCrop||e.currSelectionPoint&&"crop-circle"===e.currSelectionPoint.shape)&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}))},e.prototype.updateCropSelection=function(){var e=this.parent,t={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:t}});var i=t.currObj;i.objColl=sf.base.extend([],e.objColl,[],!0),i.pointColl=sf.base.extend([],e.pointColl,[],!0),i.afterCropActions=sf.base.extend([],e.afterCropActions,[],!0);var n={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:n}}),i.selPointColl=sf.base.extend([],n.selPointColl,[],!0),e.cancelCropSelection={operation:"cropTransform",previousObj:i,currentObj:i,previousObjColl:i.objColl,currentObjColl:i.objColl,previousPointColl:i.pointColl,currentPointColl:i.pointColl,previousSelPointColl:i.selPointColl,currentSelPointColl:i.selPointColl,previousCropObj:sf.base.extend({},e.cropObj,{},!0),currentCropObj:sf.base.extend({},e.cropObj,{},!0),previousText:null,currentText:null,filter:null,isCircleCrop:e.isCircleCrop}},e.prototype.updateFlipPan=function(e){var t=this.parent;if(""!==t.transform.currFlipState){var i=this.lowerContext.filter;t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.notify("transform",{prop:"rotatedFlip",onPropertyChange:!1}),this.lowerContext.filter="none",t.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=i,this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),e&&this.drawObject("duplicate",e)}},e.prototype.select=function(e,t,i,n,s){var o=this.parent;if(e=e.toLowerCase(),!o.disabled&&o.isImageLoaded){o.allowDownScale=!1;var r={currObj:{}};o.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var a=r.currObj;a.objColl=sf.base.extend([],o.objColl,[],!0),a.pointColl=sf.base.extend([],o.pointColl,[],!0),a.afterCropActions=o.afterCropActions;var l={selPointColl:null};o.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),a.selPointColl=sf.base.extend([],l.selPointColl,[],!0),o.notify("crop",{prop:"setPreviousCropCurrentObj",onPropertyChange:!1,value:{obj:a}}),o.transform.zoomFactor>0&&o.activeObj.shape&&"crop"===o.activeObj.shape.split("-")[0]&&sf.base.isNullOrUndefined(this.currSelPoint)&&(this.currSelPoint=sf.base.extend({},o.activeObj,{},!0));var h=!1,d=void 0;void 0!==o.activeObj.shape&&(d=o.activeObj.shape.split("-")),(void 0===d&&o.currObjType.isCustomCrop||void 0!==d&&"crop"===d[0])&&(h=!0);var c={currObj:{}};o.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:c}});var p=c.currObj;if(p.objColl=sf.base.extend([],o.objColl,[],!0),p.pointColl=sf.base.extend([],o.pointColl,[],!0),p.afterCropActions=sf.base.extend([],o.afterCropActions,[],!0),o.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),o.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),o.notify("shape",{prop:"setKeyHistory",onPropertyChange:!1,value:{keyHistory:""}}),this.upperContext.clearRect(0,0,o.upperCanvas.width,o.upperCanvas.height),o.upperCanvas.style.display="block",o.currSelectionPoint||0!==o.transform.defaultZoomFactor||0!==o.transform.degree&&0!==o.panPoint.totalPannedInternalPoint.x&&0!==o.panPoint.totalPannedInternalPoint.y&&!h){if(o.isCircleCrop=!1,0!==o.transform.defaultZoomFactor&&!this.isResizeSelect){var u=o.isCropTab;o.isCropTab=!1,o.notify("transform",{prop:"resetZoom",onPropertyChange:!1}),o.isCropTab=u,this.resetPanPoints()}o.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),o.isCropTab=!0,o.isCircleCrop=!1,this.isResizeSelect||o.notify("crop",{prop:"setCurrSelPoints",onPropertyChange:!1,value:{isSetDimension:!0}}),o.transform.zoomFactor=o.transform.cropZoomFactor,sf.base.isNullOrUndefined(o.cropObj.activeObj.shape)&&(o.currObjType.shape="crop-"+e,this.drawNewSelection(e,t,i,n,s))}else this.isCropSelect?this.isCropSelect=!1:(o.notify("crop",{prop:"adjustStraightenForShapes",onPropertyChange:!1,value:{type:"reverse",isInitialRotated:!0}}),o.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),this.renderImage()),"custom"===e&&(o.currObjType.shape=""),this.drawNewSelection(e,t,i,n,s)}},e.prototype.drawNewSelection=function(e,t,i,n,s){var o,r=this.parent,a="crop-"+e.toLowerCase();"crop-custom"===a?""!==r.currObjType.shape&&"crop-custom"!==r.currObjType.shape||(this.drawCustomSelection("crop-custom",t,i,n,s),this.adjToStraighten(),this.updateSelectionInsert(),r.isStraightening&&(this.straightenActObj=sf.base.extend({},r.activeObj,{},!0),this.straightenInitZoom=r.transform.zoomFactor)):"crop-canvas"===a?(r.upperCanvas.style.display="block",r.notify("selection",{prop:"setDragCanvas",value:{bool:!0}})):(r.currObjType.isCustomCrop=!1,r.currObjType.shape=a,n&&s?o={startX:t,startY:i,endX:t+n,endY:i+s,width:n,height:s}:n&&"crop-circle"===a&&(o={startX:t,startY:i,endX:t+n,endY:i+n,width:n,height:n}),r.activeObj.shape=a,this.updateSelectionInsert(o))},e.prototype.updateSelectionInsert=function(e){var t=this,i=this.parent,n=i.activeObj.activePoint,s={shapeSettingsObj:{}};i.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:s}});var o={type:i.getSelectionType(s.shapeSettingsObj.type),startX:s.shapeSettingsObj.startX,startY:s.shapeSettingsObj.startY,width:s.shapeSettingsObj.width,height:s.shapeSettingsObj.height},r={action:"insert",previousSelectionSettings:o,currentSelectionSettings:o};sf.base.isBlazor()&&i.events&&!0===i.events.onSelectionResizeStart.hasDelegate?i.dotNetRef.invokeMethodAsync("SelectionEventAsync","OnSelectionResizeStart",r).then((function(s){i.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:s.currentSelectionSettings}}),"Custom"===s.currentSelectionSettings.type?t.drawObject("duplicate",i.activeObj,null,null,!0):(0===n.startX&&0===n.startY&&0===n.width&&0===n.height||(e={startX:n.startX,startY:n.startY,endX:n.endX,endY:n.endY,width:n.width,height:n.height}),t.drawObject("duplicate",null,!0,e))})):(i.trigger("selectionChanging",r),i.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:r.currentSelectionSettings}}),"Custom"===r.currentSelectionSettings.type?this.drawObject("duplicate",i.activeObj,null,null,!0):(0===n.startX&&0===n.startY&&0===n.width&&0===n.height||(e={startX:n.startX,startY:n.startY,endX:n.endX,endY:n.endY,width:n.width,height:n.height}),this.drawObject("duplicate",null,!0,e)))},e.prototype.drawCustomSelection=function(e,t,i,n,s){var o=this.parent,r=o.activeObj.activePoint;if(o.currObjType.isCustomCrop=!0,this.upperContext.clearRect(0,0,o.upperCanvas.width,o.upperCanvas.height),o.currObjType.shape=o.activeObj.shape=e.toLowerCase(),sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(s)){if(sf.base.isNullOrUndefined(o.transform.zoomFactor)||0===o.transform.zoomFactor){var a=o.img,l=a.destLeft,h=a.destTop,d=a.destWidth,c=a.destHeight,p=o.lowerCanvas.width,u=o.lowerCanvas.height,f=r;l>=0&&h>=0?(f.startX=l,f.startY=h,f.endX=l+d,f.endY=h+c):l>=0?(f.startX=l,f.startY=7.5,f.endX=l+d,f.endY=u-15):h>=0?(f.startX=7.5,f.startY=h,f.endX=p-15,f.endY=h+c):(f.startX=7.5,f.startY=7.5,f.endX=p-15,f.endY=u-15)}else{var g=o.img,m=g.destLeft,v=g.destTop,b=g.destWidth,y=g.destHeight,C=o.lowerCanvas.width,w=o.lowerCanvas.height,M=r;M.startX=Math.max(m>0?m:7.5,m),M.startY=Math.max(v>0?v:7.5,v),M.endX=Math.min(m+b+15<C?m+b-15:C-15,m+b),M.endY=Math.min(v+y+15<w?v+y-15:w-15,v+y)}var S=o.img,x=S.destLeft,N=S.destTop,O=S.destWidth,E=S.destHeight,I=o.lowerCanvas.clientWidth,T=o.lowerCanvas.clientHeight,D=r;if(D.startX=Math.max(D.startX,x),D.startY=Math.max(D.startY,N),D.endX=Math.min(D.endX,x+O),D.endY=Math.min(D.endY,N+E),o.transform.straighten>0?(this.imgCanvasPoints[0].x>D.startX&&(D.startX=this.imgCanvasPoints[0].x),this.imgCanvasPoints[0].y>D.startY&&(D.startY=this.imgCanvasPoints[0].y),this.imgCanvasPoints[2].x<D.endX&&(D.endX=this.imgCanvasPoints[2].x),this.imgCanvasPoints[2].y<D.endY&&(D.endY=this.imgCanvasPoints[2].x)):o.transform.straighten<0&&(this.imgCanvasPoints[3].x>D.startX&&(D.startX=this.imgCanvasPoints[3].x),this.imgCanvasPoints[3].y<D.startY&&(D.startY=this.imgCanvasPoints[3].y),this.imgCanvasPoints[1].x<D.endX&&(D.endX=this.imgCanvasPoints[1].x),this.imgCanvasPoints[1].y>D.endY&&(D.endY=this.imgCanvasPoints[1].x)),D.startX===x&&x+O>I&&(D.endX=I-15),D.startY===N&&N+E>T&&(D.endY=T-15),o.activeObj.activePoint.startX>o.activeObj.activePoint.endX){var j=o.activeObj.activePoint.startX;o.activeObj.activePoint.startX=o.activeObj.activePoint.endX,o.activeObj.activePoint.endX=j}if(o.activeObj.activePoint.startY>o.activeObj.activePoint.endY){j=o.activeObj.activePoint.startY;o.activeObj.activePoint.startY=o.activeObj.activePoint.endY,o.activeObj.activePoint.endY=j}o.activeObj=this.updateWidthHeight(o.activeObj),this.updateActiveObject(r,o.activeObj),this.adjActObj()}else r.startX=t,r.startY=i,r.endX=t+n,r.endY=i+s,r.width=n,r.height=s;this.updateSelectionInsert()},e.prototype.adjToStraighten=function(){var e=this.parent;if(0!==e.transform.straighten&&e.isStraightening){var t=e.activeObj.activePoint;t.startX+=7.5,t.startY+=7.5,t.endX-=7.5,t.endY-=7.5,e.activeObj=this.updateWidthHeight(e.activeObj)}},e.prototype.adjActObj=function(){var e=this.parent;if(0!==e.transform.straighten)for(var t=e.activeObj.activePoint,i=sf.base.extend({},t,{},!0),n=0;;){n++;var s={isIntersect:null,arr:null};if(e.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),e.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:s}}),s.arr[0]||s.arr[1]||s.arr[2]||s.arr[3]||100===n){t=sf.base.extend({},i,{},!0);break}i=sf.base.extend({},t,{},!0),t.startX-=5,t.endX+=5,t.width=t.endX-t.startX,this.updateActiveObject(t,e.activeObj)}},e.prototype.callUpdateCurrTransState=function(){var e=this.parent,t=sf.base.extend([],e.objColl,[],!0),i=sf.base.extend({},e.activeObj,{},!0);e.objColl=[],e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isRotateZoom=!0,this.updateCurrTransState("initial"),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),0===e.transform.degree&&e.rotateFlipColl.length>0&&(e.img.destLeft+=e.panPoint.totalPannedPoint.x,e.img.destTop+=e.panPoint.totalPannedPoint.y),e.img.destLeft+=e.panPoint.totalPannedInternalPoint.x,e.img.destTop+=e.panPoint.totalPannedInternalPoint.y;var n=this.lowerContext.filter;0===e.transform.degree&&e.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),this.drawImage(),this.updateCurrTransState("reverse"),0===e.transform.degree&&e.rotateFlipColl.length>0&&(e.img.destLeft+=e.panPoint.totalPannedPoint.x,e.img.destTop+=e.panPoint.totalPannedPoint.y),this.isRotateZoom=!1,e.objColl=t;var s=e.togglePen;e.togglePen=!1,this.lowerContext.filter="none",e.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),e.img.destLeft+=e.panPoint.totalPannedInternalPoint.x,e.img.destTop+=e.panPoint.totalPannedInternalPoint.y,e.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),e.img.destLeft-=e.panPoint.totalPannedInternalPoint.x,e.img.destTop-=e.panPoint.totalPannedInternalPoint.y,e.togglePen=s,this.lowerContext.filter=n,e.activeObj=i},e.prototype.resetPanPoints=function(){this.parent.panPoint.totalPannedPoint={x:0,y:0},this.parent.panPoint.totalPannedClientPoint={x:0,y:0},this.parent.panPoint.totalPannedInternalPoint={x:0,y:0}},e.prototype.setClientTransDim=function(e){var t=this.parent;if(t.transform.degree%90==0&&t.transform.degree%180!=0){t.img.destLeft=(t.lowerCanvas.width-t.img.destHeight)/2,t.img.destTop=(t.lowerCanvas.height-t.img.destWidth)/2;var i=t.img.destWidth;t.img.destWidth=t.img.destHeight,t.img.destHeight=i}else sf.base.isNullOrUndefined(e)&&(t.img.destLeft=(t.lowerCanvas.width-t.img.destWidth)/2,t.img.destTop=(t.lowerCanvas.height-t.img.destHeight)/2)},e.prototype.redrawImgWithObj=function(){var e=this.parent,t={canvasFilter:e.canvasFilter};if(this.lowerContext.filter=t.canvasFilter,0!==e.rotateFlipColl.length){var i=sf.base.extend({},e.panPoint.totalPannedInternalPoint,{},!0),n={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};this.callUpdateCurrTransState(),e.panPoint.totalPannedInternalPoint=i,e.img.destLeft=n.startX,e.img.destTop=n.startY,e.img.destWidth=n.width,e.img.destHeight=n.height}else this.callUpdateCurrTransState();e.isCircleCrop&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})},e.prototype.setCurrentObj=function(e,t){var i=this.parent,n=!!e;n||(i.cropObj.aspectWidth=i.aspectWidth,i.cropObj.aspectHeight=i.aspectHeight,i.cropObj.frame=i.frameObj.type),e=e||i.cropObj,i.transform.cropZoomFactor=e.cropZoom,i.transform.defaultZoomFactor=e.defaultZoom,this.straightenInitZoom=e.straightenZoom,n?e.activeObj.shape&&"crop"===e.activeObj.shape.split("-")[0]?i.transform.zoomFactor=e.cropZoom:i.transform.zoomFactor=e.defaultZoom:i.transform.zoomFactor=e.cropZoom,i.setProperties({zoomSettings:{zoomFactor:e.zoomFactor}},!0),i.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:e.previousZoomValue}}),i.panPoint.totalPannedPoint=sf.base.extend({},e.totalPannedPoint,{},!0),i.panPoint.totalPannedClientPoint=sf.base.extend({},e.totalPannedClientPoint,{},!0),i.panPoint.totalPannedInternalPoint=sf.base.extend({},e.totalPannedInternalPoint,{},!0);var s=sf.base.extend({},e.tempFlipPanPoint,{},!0);i.notify("crop",{prop:"setTempFlipPanPoint",onPropertyChange:!1,value:{point:s}}),i.rotateFlipColl=sf.base.extend([],e.rotateFlipColl,[],!0),i.transform.degree=e.degree,i.frameObj.type=e.frame,i.transform.currFlipState=e.currFlipState,i.notify("filter",{prop:"setAdjustmentLevel",onPropertyChange:!1,value:{adjustmentLevel:e.adjustmentLevel}}),i.notify("filter",{prop:"setTempAdjVal"}),i.currentFilter=e.currentFilter,i.notify("filter",{prop:"setTempFilVal"}),(i.transform.straighten!==e.straighten||t)&&(i.transform.straighten=e.straighten,i.straightenBaseImageCanvas()),i.img={destLeft:e.destPoints.startX,destTop:e.destPoints.startY,destWidth:e.destPoints.width,destHeight:e.destPoints.height,srcLeft:e.srcPoints.startX,srcTop:e.srcPoints.startY,srcWidth:e.srcPoints.width,srcHeight:e.srcPoints.height},i.aspectWidth=e.aspectWidth,i.aspectHeight=e.aspectHeight,e.afterCropActions&&(i.afterCropActions=e.afterCropActions),this.lowerContext.filter=e.filter,i.notify("filter",{prop:"setBrightnessAdjusted",onPropertyChange:!1,value:{isBrightnessAdjusted:e.isBrightAdjust}});var o,r=i.isCircleCrop;sf.base.isNullOrUndefined(i.currSelectionPoint)?o=null:(o=sf.base.extend({},i.currSelectionPoint,{},!0),i.currSelectionPoint=null),i.isCircleCrop=!1,this.drawCropSelectionImage(e,!1),0!==i.transform.degree&&(""===i.transform.currFlipState?i.notify("transform",{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}):i.notify("transform",{prop:"drawPannedImage",value:{xDiff:0,yDiff:0}}),i.img.destLeft=e.destPoints.startX,i.img.destTop=e.destPoints.startY,i.panPoint.totalPannedClientPoint=sf.base.extend({},e.totalPannedClientPoint,{},!0),i.panPoint.totalPannedInternalPoint=sf.base.extend({},e.totalPannedInternalPoint,{},!0)),i.activeObj=sf.base.extend({},e.activeObj,{},!0),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),0!==i.activeObj.activePoint.width&&0!==i.activeObj.activePoint.height&&this.drawObject("duplicate",null,null,null,!0);var a=sf.base.extend({},e.activeObj,{},!0),l=!1;if(i.afterCropActions.length>0){var h={collection:i.afterCropActions};i.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:i.afterCropActions,isRotateFlipCollection:null,obj:h}}),i.afterCropActions=h.collection}var d=sf.base.extend([],i.afterCropActions,[],!0);if(!n&&d.length>0){l=!0;for(var c=0,p=d.length;c<p;c++)"horizontalflip"!==d[c]&&"verticalflip"!==d[c]||(i.activeObj=sf.base.extend({},o,{},!0),this.rotatedFlipCropSel=!0),i.notify("transform",{prop:"updateTransform",onPropertyChange:!1,value:{text:d[c]}});a=sf.base.extend({},i.activeObj,{},!0),this.resetPanPoints(),i.activeObj=a,this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),0!==i.activeObj.activePoint.width&&0!==i.activeObj.activePoint.height&&this.drawObject("duplicate",null,null,null,!0),e.degree!==i.transform.degree&&(i.transform.cropZoomFactor=null,i.transform.zoomFactor=0),i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),this.rotatedFlipCropSel&&(this.rotatedFlipCropSel=!1)}i.afterCropActions=d,this.isCancelAction||l||(i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.img.destLeft=e.destPoints.startX,i.img.destTop=e.destPoints.startY),i.activeObj=a,i.isCircleCrop=r,sf.base.isNullOrUndefined(o)?i.currSelectionPoint=null:(i.currSelectionPoint=sf.base.extend({},o,{},!0),i.currSelectionPoint&&sf.base.isNullOrUndefined(i.currSelectionPoint.shape)&&(i.currSelectionPoint=null))},e.prototype.drawCropSelectionImage=function(e,t){var i=this.parent,n=this.lowerContext.filter;i.clearContext(this.lowerContext),i.clearContext(this.upperContext),this.lowerContext.setTransform(1,0,0,1,0,0),t?this.updateCurrTransState("initial"):this.setTransformColl(this.lowerContext,"initial"),i.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),this.drawImage(),t?this.updateCurrTransState("reverse"):this.setTransformColl(this.lowerContext,"reverse"),i.img.destLeft=i.cropObj.destPoints.startX,i.img.destTop=i.cropObj.destPoints.startY;var s=sf.base.extend({},e.activeObj,{},!0);if(this.lowerContext.filter="none",this.isCancelAction)i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}});else if(i.img={destLeft:e.destPoints.startX,destTop:e.destPoints.startY,destWidth:e.destPoints.width,destHeight:e.destPoints.height,srcLeft:e.srcPoints.startX,srcTop:e.srcPoints.startY,srcWidth:e.srcPoints.width,srcHeight:e.srcPoints.height},0!==e.activeObj.activePoint.width&&0!==e.activeObj.activePoint.height){var o={startX:i.img.destLeft,startY:i.img.destTop,width:i.img.destWidth,height:i.img.destHeight};i.img.destLeft=e.activeObj.activePoint.startX,i.img.destTop=e.activeObj.activePoint.startY,i.img.destWidth=e.activeObj.activePoint.width,i.img.destHeight=e.activeObj.activePoint.height,i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.img.destLeft=o.startX,i.img.destTop=o.startY,i.img.destWidth=o.width,i.img.destHeight=o.height}i.activeObj=s,this.lowerContext.filter=n},e.prototype.performPointZoom=function(e,t,i,n,s){var o=this.parent,r=o.img,a=r.destLeft,l=r.destTop,h=(e-a)/r.destWidth,d=(t-l)/r.destHeight,c=o.isUndoRedo;o.isUndoRedo=!0,o.setProperties({zoomSettings:{zoomPoint:{x:e,y:t}}},!0);var p=s||("zoomIn"===i?.1:-.1);o.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:p,zoomPoint:null,isResize:n}}),o.isUndoRedo=c,this.panToPoint(e,t,h,d)},e.prototype.panToPoint=function(e,t,i,n){var s=this.parent;if(s.transform.zoomFactor>0){var o=s.img.destLeft,r=s.img.destTop,a=sf.base.extend({},s.activeObj,{},!0);if(0===s.transform.degree)s.img.destLeft=e-i*s.img.destWidth,s.img.destTop=t-n*s.img.destHeight,this.drawZoomPanImage(s.img.destLeft-o,s.img.destTop-r);else{var l=s.isCropTab;s.isCropTab=!0;var h=sf.base.extend([],s.objColl,[],!0),d=sf.base.extend([],s.pointColl,[],!0),c={straightenPoint:null};s.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:c}}),s.objColl=[],s.pointColl=[],s.freehandCounter=0,s.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:null,y:null,ratioX:null,ratioY:null}});var p={selPointColl:null};s.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:p}});var u=p.selPointColl;s.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),s.panPoint.currentPannedPoint={x:e-i*s.img.destWidth-o,y:t-n*s.img.destHeight-r},s.notify("transform",{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}),s.isCropTab=l,s.objColl=h,s.pointColl=d,s.freehandCounter=s.pointColl.length,c.straightenPoint.x&&c.straightenPoint.y&&s.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:c.straightenPoint.x,y:c.straightenPoint.y,ratioX:c.straightenPoint.ratioX,ratioY:c.straightenPoint.ratioY}}),s.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:u}}}),s.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:s.panPoint.currentPannedPoint.x,yDiff:s.panPoint.currentPannedPoint.y,panRegion:""}}),s.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:s.panPoint.currentPannedPoint.x,yDiff:s.panPoint.currentPannedPoint.y,panRegion:""}})}this.adjustPanning(a),s.activeObj=a,0!==s.activeObj.activePoint.width&&0!==s.activeObj.activePoint.height&&this.drawObject("duplicate",null,null,null,!0)}},e.prototype.adjustPanning=function(e){var t=this.parent,i=e.activePoint,n=i.startX,s=i.startY,o=i.width,r=i.height;if(0!==o&&0!==r){var a=t.img,l=a.destLeft,h=a.destTop,d=a.destWidth,c=a.destHeight,p={x:0,y:0};if(l>n?p.x=l-n:l+d<n+o&&(p.x=l+d-(n+o)),h>s?p.y=h-s:h+c<s+r&&(p.y=h+c-(s+r)),0===t.transform.degree)t.img.destLeft-=p.x,t.img.destTop-=p.y,this.drawZoomPanImage(t.img.destLeft-l,t.img.destTop-h);else{var u=t.isCropTab;t.isCropTab=!0;var f=sf.base.extend([],t.objColl,[],!0),g=sf.base.extend([],t.pointColl,[],!0);t.objColl=[],t.pointColl=[],t.freehandCounter=0;var m={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:m}});var v=m.selPointColl;t.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),t.img.destLeft-=p.x,t.img.destTop-=p.y,t.panPoint.currentPannedPoint={x:t.img.destLeft-l,y:t.img.destTop-h},t.notify("transform",{prop:"rotatePan",onPropertyChange:!1,value:{isCropSelection:null,isDefaultZoom:null}}),t.isCropTab=u,t.objColl=f,t.pointColl=g,t.freehandCounter=t.pointColl.length,t.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:v}}}),t.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:t.panPoint.currentPannedPoint.x,yDiff:t.panPoint.currentPannedPoint.y,panRegion:""}}),t.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:t.panPoint.currentPannedPoint.x,yDiff:t.panPoint.currentPannedPoint.y,panRegion:""}})}}},e.prototype.panToSel=function(){var e=this.parent,t=sf.base.extend({},e.activeObj,{},!0),i=(e.img,t.activePoint),n=i.startX,s=i.startY,o=i.width,r=i.height,a={straightenPoint:null};if(e.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:a}}),a.straightenPoint.x&&a.straightenPoint.y){var l=n+o/2-a.straightenPoint.x,h=s+r/2-a.straightenPoint.y;0===e.transform.degree?(e.img.destLeft+=l,e.img.destTop+=h,e.notify("transform",{prop:"drawPannImage",value:{point:{x:l,y:h}}})):(e.panPoint.currentPannedPoint={x:l,y:h},e.notify("transform",{prop:"drawPannedImage",value:{xDiff:l,yDiff:h}}),e.panPoint.currentPannedPoint={x:0,y:0},e.notify("transform",{prop:"setTempPanMove",value:{point:null}})),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:t}});var d=e.img,c=d.destLeft,p=d.destTop,u=d.destWidth,f=d.destHeight,g=this.imgCanvasPoints;g.forEach((function(e){e.x=e.ratioX*u+c,e.y=e.ratioY*f+p})),this.imgCanvasPoints=g;var m=0;if(!sf.base.isBlazor()&&3===e.transform.straighten&&!this.preventStraightening||sf.base.isBlazor()&&5===e.transform.straighten&&!this.preventStraightening){this.preventStraightening=!0;var v=e.prevStraightenedDegree;e.prevStraightenedDegree=e.transform.straighten,e.setStraighten(0),sf.base.isBlazor()?e.setStraighten(5):e.setStraighten(3),e.prevStraightenedDegree=v,this.preventStraightening=!1}for(;this.isLinesIntersect()&&0!==e.transform.straighten&&360!==e.transform.straighten&&m<100;)m++,this.performPointZoom(e.activeObj.activePoint.startX+e.activeObj.activePoint.width/2,e.activeObj.activePoint.startY+e.activeObj.activePoint.height/2,"zoomIn",!1,.025),this.updateImgCanvasPoints()}},e.prototype.drawZoomPanImage=function(e,t){var i=this.parent;i.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:e,yDiff:t,panRegion:""}}),i.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:e,yDiff:t,panRegion:""}}),this.renderImage(!0);var n={width:0,height:0};i.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i.img.srcWidth,height:i.img.srcHeight,obj:n,isImgShape:null}});var s=n;s.width+=s.width*i.transform.zoomFactor,s.height+=s.height*i.transform.zoomFactor,i.panPoint.totalPannedPoint.x+=e,i.panPoint.totalPannedPoint.y+=t,i.notify("crop",{prop:"setTempFlipPanPoint",onPropertyChange:!1,value:{point:{x:0,y:0}}})},e.prototype.openNewImage=function(){var e=this.parent,t=e.element.id,n=e.inMemoryCanvas.getContext("2d");sf.popups.showSpinner(e.element),e.element.style.opacity="0.5";var s=document.querySelector("#"+t+"_currPos");s&&(s.style.display="none");var o={defToolbarItems:null};if(sf.base.isBlazor())e.element.querySelector("#"+t+"_toolbarArea")&&(e.toolbarHeight=e.element.querySelector("#"+t+"_toolbarArea").clientHeight);else if(e.notify("toolbar",{prop:"getDefToolbarItems",value:{obj:o}}),0===o.defToolbarItems.length&&sf.base.isNullOrUndefined(document.getElementById(t+"_toolbar"))){var r=e.element.querySelector("#"+t+"_toolbarArea").clientHeight;e.notify("toolbar",{prop:"setToolbarHeight",value:{height:r}})}if(e.reset(),e.update(),e.transform.degree=0,e.transform.zoomFactor=0,e.isImageLoaded=!1,e.currSelectionPoint=null,"string"===i(this.openURL)){var a=this.openURL.split(".");if(a.length>1?(a=a[a.length-2].split("/"),this.fileName=a[a.length-1]):this.fileName="ImageEditor",this.fileType=this.getFileExtensionFromURL(this.openURL),this.fileType){this.fileType=e.toPascalCase(this.fileType);var l=this.fileType.toLowerCase();"jpg"!==l&&"jpeg"!==l||(this.fileType="Jpeg",l="jpeg"),"jpeg"!==l&&"png"!==l&&"svg"!==l&&(this.fileType=null)}this.imageOnLoad(this.openURL)}else this.fileName="ImageEditor",this.fileType=null,e.lowerCanvas=document.querySelector("#"+t+"_lowerCanvas"),e.upperCanvas=document.querySelector("#"+t+"_upperCanvas"),this.lowerContext=e.lowerCanvas.getContext("2d"),this.upperContext=e.upperCanvas.getContext("2d"),e.clearContext(this.lowerContext),e.clearContext(this.upperContext),e.clearContext(n),e.inMemoryCanvas.width=this.openURL.width,e.inMemoryCanvas.height=this.openURL.height,n.putImageData(this.openURL,0,0),e.baseImg.src=e.inMemoryCanvas.toDataURL()},e.prototype.dlgBtnClick=function(){this.parent.export(),this.applyDialogOption()},e.prototype.dlgCloseBtnClick=function(){this.applyDialogOption()},e.prototype.applyDialogOption=function(){var e=this.parent;this.isFileChanged?(e.isImageLoaded=this.isFileChanged=!1,e.reset(),this.checkToolbarTemplate(this.inputElem,this.openURL)):(this.reset(),this.openNewImage()),sf.base.isBlazor()||sf.base.getComponent(document.getElementById(e.element.id+"_dialog"),"dialog").destroy(),this.isImageEdited=!1},e.prototype.showDialogPopup=function(){var e=this.parent,t={key:"ConfirmDialogHeader"};e.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:t}});var i={key:"ConfirmDialogContent"};e.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:i}});var n={key:"Yes"};e.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:n}});var s={key:"No"};e.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:s}}),e.element.querySelector("#"+e.element.id+"_dialog").style.display="block",new sf.popups.Dialog({header:t.value,closeOnEscape:!0,content:"<span>"+i.value+"</span>",target:document.getElementById("target"),width:"285px",isModal:!0,animationSettings:{effect:"Zoom"},close:this.dlgCloseBtnClick.bind(this),buttons:[{click:this.dlgCloseBtnClick.bind(this),buttonModel:{content:s.value,iconCss:"e-icons e-close"}},{click:this.dlgBtnClick.bind(this),buttonModel:{content:n.value,isPrimary:!0,iconCss:"e-icons e-check"}}]}).appendTo("#"+e.element.id+"_dialog")},e.prototype.restoreOldImage=function(){this.parent.isImageLoaded?(this.reset(),this.openNewImage()):this.openNewImage()},e.prototype.open=function(e){document.getElementById(this.parent.element.id+"_dropArea").style.display="none",this.parent.disabled||(this.openURL=e,this.restoreOldImage())},e.prototype.getInitialLoaded=function(e){e.isInitialLoaded=this.isInitialLoading},e.prototype.getFileExtensionFromURL=function(e){var t=e.lastIndexOf(".");return-1!==t?e.slice(t+1).toLowerCase():null},e.prototype.fileSelect=function(e,t){var i=this.parent;if(document.getElementById(i.element.id+"_dropArea").style.display="none",!i.disabled){var n=void 0,s=void 0;t.target?s=n=t.target.files[0]:n=s=t.filesData[0].rawFile;var o=void 0;if(s.name){var r=s.name.split(".");o=r[r.length-1].toLowerCase()}if(o&&-1===["jpg","jpeg","png","svg"].indexOf(o))return void this.errorLoading();if(sf.popups.showSpinner(i.element),i.element.style.opacity="0.5",this.inputElem=e,o=s.name&&s.name.split(".")[1]){var a=i.toPascalCase(o);this.fileType="JPG"===a||"Jpg"===a?"Jpeg":a}else this.fileType=null;var l=window.URL.createObjectURL(n);this.openURL=l,i.isImageLoaded&&!i.isChangesSaved&&(this.isImageEdited||i.pointColl.length>0||i.objColl.length>0)?(this.isFileChanged=!0,sf.base.isBlazor()?i.dotNetRef.invokeMethodAsync("UpdateDialog",!0):this.showDialogPopup()):this.checkToolbarTemplate(e,l)}},e.prototype.checkToolbarTemplate=function(e,t){var i=this.parent;sf.base.isNullOrUndefined(i.toolbarTemplate)&&(i.reset(),i.update()),this.fileName=e.value.split("\\")[e.value.split("\\").length-1],this.fileName=this.fileName.split(".")[0],this.imageOnLoad(t.toString()),e.value=""},e.prototype.moveToSelectionRange=function(e,t){var i=this.parent;if(i.activeObj.shape){for(var n=!1,s=0,o=i.rotateFlipColl.length;s<o;s++){var r=i.rotateFlipColl[s];if(90===r||-90===r){n=!0;break}}if(n){if(0===i.transform.degree)return;var a=i.transform.zoomFactor;i.objColl.push(i.activeObj),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1});var l=i.objColl[i.objColl.length-1];if("rotateleft"===e||"rotateright"===e)if(i.transform.degree%90==0&&i.transform.degree%180!=0)if(l.activePoint.width<t.activePoint.height)for(s=2;s<i.zoomSettings.maxZoomFactor;s++){if(l.activePoint.width>=t.activePoint.height||this.isSelectionBiggerThanCanvas(l)||this.isSelectionOutsideCanvas(l)){sf.base.isNullOrUndefined(a)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null},isResize:null});break}a+=.1,i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:a,zoomPoint:null},isResize:null})}else for(s=2;s<i.zoomSettings.maxZoomFactor;s++){if(l.activePoint.width>=t.activePoint.height||this.isSelectionBiggerThanCanvas(l)||this.isSelectionOutsideCanvas(l)){sf.base.isNullOrUndefined(a)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null,isResize:null}});break}a-=.1,i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:a,zoomPoint:null},isResize:null})}else if(l.activePoint.height<t.activePoint.width)for(s=2;s<i.zoomSettings.maxZoomFactor;s++){if(l.activePoint.height>=t.activePoint.width||this.isSelectionBiggerThanCanvas(l)||this.isSelectionOutsideCanvas(l)){sf.base.isNullOrUndefined(a)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null},isResize:null});break}a+=.1,i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:a,zoomPoint:null},isResize:null})}else for(s=2;s<i.zoomSettings.maxZoomFactor;s++){if(l.activePoint.height>=t.activePoint.width||this.isSelectionBiggerThanCanvas(l)||this.isSelectionOutsideCanvas(l)){sf.base.isNullOrUndefined(a)||i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null},isResize:null});break}a-=.1,i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:a,zoomPoint:null},isResize:null})}var h=i.lowerCanvas.clientWidth/2-Math.floor(l.activePoint.startX+l.activePoint.width/2),d=i.lowerCanvas.clientHeight/2-Math.floor(l.activePoint.startY+l.activePoint.height/2);sf.base.isNullOrUndefined(i.activeObj.shape)&&(i.activeObj=sf.base.extend({},t,{},!0)),0===i.transform.degree?(i.img.destLeft+=h,i.img.destTop+=d,i.notify("transform",{prop:"drawPannImage",value:{point:{x:h,y:d}}})):(i.panPoint.currentPannedPoint={x:h,y:d},i.notify("transform",{prop:"drawPannedImage",value:{xDiff:h,yDiff:d}}),i.panPoint.currentPannedPoint={x:0,y:0}),i.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:null}}),i.activeObj=sf.base.extend({},i.objColl[i.objColl.length-1]),i.objColl.pop(),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}})}}},e.prototype.isSelectionBiggerThanCanvas=function(e){var t=!1,i=this.parent,n=e.activePoint,s=n.startX,o=n.startY,r=n.endX,a=n.endY,l=i.img,h=l.destLeft,d=l.destTop,c=l.destWidth,p=l.destHeight;return(s<=h||o<=d||r>=h+c||a>=d+p)&&(t=!0),t},e.prototype.isSelectionOutsideCanvas=function(e){var t=!1,i=this.parent;return(e.activePoint.height<i.lowerCanvas.height-i.toolbarHeight||e.activePoint.width<i.lowerCanvas.width)&&(t=!0),t},e.prototype.downScaleImgCanvas=function(e,t,i,n){var s=this.parent,o=t?s.activeObj.imageCanvas:s.baseImgCanvas,r=t?s.activeObj.imageElement:s.baseImg,a=t?s.activeObj.activePoint.width:s.img.destWidth,l=t?s.activeObj.activePoint.height:s.img.destHeight,h={width:0,height:0};if(s.transform.degree%90==0&&s.transform.degree%180!=0?s.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:r.height,height:r.width,obj:h,isImgShape:t}}):s.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:r.width,height:r.height,obj:h,isImgShape:t}}),t||s.allowDownScale&&!s.isCropTab&&!s.isCropToolbar&&0!==r.width&&0!==r.height&&.75*h.width>a&&.75*h.height>l){var d=s.createElement("canvas",{id:s.element.id+"_downScaleCanvas",attrs:{name:"canvasImage"}});d.width=t?r.width:s.img.srcWidth,d.height=t?r.height:s.img.srcHeight,t?d.getContext("2d").drawImage(r,0,0,d.width,d.height):d.getContext("2d").drawImage(o,s.img.srcLeft,s.img.srcTop,s.img.srcWidth,s.img.srcHeight,0,0,d.width,d.height),(t||this.isDownScale)&&this.downScale(d,a,l,t),t?(e.canvas.width=d.width,e.canvas.height=d.height,i&&n?(e.translate(s.activeObj.imageCanvas.width,0),e.scale(-1,1),e.translate(0,s.activeObj.imageCanvas.height),e.scale(1,-1)):i?(sf.base.isNullOrUndefined(s.activeObj.isHorImageFlip)||!s.activeObj.isHorImageFlip?(s.activeObj.isHorImageFlip=!0,e.translate(s.activeObj.imageCanvas.width,0),e.scale(-1,1)):s.activeObj.isHorImageFlip&&(s.activeObj.isHorImageFlip=!1),s.activeObj.isVerImageFlip&&(e.translate(0,s.activeObj.imageCanvas.height),e.scale(1,-1))):n&&(sf.base.isNullOrUndefined(s.activeObj.isVerImageFlip)||!s.activeObj.isVerImageFlip?(s.activeObj.isVerImageFlip=!0,e.translate(0,s.activeObj.imageCanvas.height),e.scale(1,-1)):s.activeObj.isVerImageFlip&&(s.activeObj.isVerImageFlip=!1),s.activeObj.isHorImageFlip&&(e.translate(s.activeObj.imageCanvas.width,0),e.scale(-1,1))),e.drawImage(d,0,0),e.setTransform(1,0,0,1,0,0)):s.isFinetuning?(e.save(),e.setTransform(1,0,0,1,0,0),e.drawImage(s.inMemoryCanvas,0,0),e.restore()):e.drawImage(d,0,0,d.width,d.height,s.img.destLeft,s.img.destTop,d.width,d.height)}else!sf.base.isNullOrUndefined(t)&&t||0===s.baseImgCanvas.width||0===s.baseImgCanvas.height||e.drawImage(s.baseImgCanvas,s.img.srcLeft,s.img.srcTop,s.img.srcWidth,s.img.srcHeight,s.img.destLeft,s.img.destTop,s.img.destWidth,s.img.destHeight)},e.prototype.downScale=function(e,t,i,n){var s=this.parent;if(!n||!s.isStraightening){for(var o=e.width,r=e.height,a=o/(t=Math.round(t)),l=r/(i=Math.round(i)),h=Math.ceil(a/2),d=Math.ceil(l/2),c=e.getContext("2d"),p=c.getImageData(0,0,o,r),u=c.createImageData(t,i),f=p.data,g=u.data,m=0;m<i;m++)for(var v=0;v<t;v++){for(var b=4*(v+m*t),y=0,C=0,w=0,M=0,S=0,x=0,N=0,O=(m+.5)*l,E=Math.floor(m*l),I=Math.ceil((m+1)*l),T=E;T<I;T++)for(var D=Math.abs(O-(T+.5))/d,j=(v+.5)*a,A=D*D,z=Math.floor(v*a),k=Math.ceil((v+1)*a),P=z;P<k;P++){var L=Math.abs(j-(P+.5))/h,B=Math.sqrt(A+L*L);if(!(B>=1)){var R=4*(P+T*o);N+=(y=2*B*B*B-3*B*B+1)*f[R+3],w+=y,M+=(y=y*f[R+3]/250)*f[R],S+=y*f[R+1],x+=y*f[R+2],C+=y}}g[b]=M/C,g[b+1]=S/C,g[b+2]=x/C,g[b+3]=N/w}e.width=n?s.activeObj.activePoint.width:s.lowerCanvas.width,e.height=n?s.activeObj.activePoint.height:s.lowerCanvas.height,c.putImageData(u,0,0)}},e.prototype.drawImgToCtx=function(e,t){var i=this.parent;e.canvas.id!==i.element.id+"_tempCanvas"&&e!==this.upperContext&&sf.base.isNullOrUndefined(t)&&this.downScaleImgCanvas(e,null,null,null)},e.prototype.getFrameColor=function(e,t,i){var n=this.parent.frameObj.color;if(e.gradientColor){var s=t.createLinearGradient(i.startX,i.startY,i.startX+i.width,i.startY+i.height);s.addColorStop(0,e.color),s.addColorStop(1,e.gradientColor),n=s}else n=e.color;return n},e.prototype.applyFrame=function(e,t,i){var n,s=this.parent;s.frameObj.type=t;var o={width:1,height:1},r={startX:s.img.destLeft-e.lineWidth,startY:s.img.destTop-e.lineWidth,width:s.img.destWidth+2*e.lineWidth,height:s.img.destHeight+2*e.lineWidth},a={type:s.frameObj.type,color:s.frameObj.color,size:s.frameObj.size,inset:s.frameObj.inset,offset:s.frameObj.offset/2,radius:s.frameObj.radius,amount:s.frameObj.amount,border:s.frameObj.border,gradientColor:s.frameObj.gradientColor},l=s.transform.zoomFactor;if(e.canvas.id===s.element.id+"_tempCanvas"){var h=e.canvas.width,d=e.canvas.height,c={width:0,height:0};s.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:c,dimension:{width:h,height:d}}}),o=c,a.size*=(o.width+o.height)/2,a.inset*=(o.width+o.height)/2,a.offset*=(o.width+o.height)/2,a.radius*=(o.width+o.height)/2,r={startX:0,startY:0,width:e.canvas.width,height:e.canvas.height},s.notify("export",{prop:"updateSaveContext",onPropertyChange:!1,value:{context:e}})}else e===this.upperContext&&s.activeObj.shape?r={startX:s.activeObj.activePoint.startX-e.lineWidth,startY:s.activeObj.activePoint.startY-e.lineWidth,width:s.activeObj.activePoint.width+2*e.lineWidth,height:s.activeObj.activePoint.height+2*e.lineWidth}:sf.base.isNullOrUndefined(i)&&e.clearRect(0,0,e.canvas.width,e.canvas.height);var p=(o.width+o.height)/2*40,u=(o.width+o.height)/2*50;if(e!==this.upperContext&&(a.size+=a.size*l,a.inset+=a.inset*l,a.offset+=a.offset*l,a.radius+=a.radius*l,p+=p*l,u+=u*l),e!==this.upperContext||!s.activeObj.shape||!("mat"===t&&(r.width-2*a.size<0||r.height-2*a.size<0)||"bevel"===t&&(r.width-2*a.size<40||r.height-2*a.size<40)||"inset"===t&&(r.startX+r.width-a.offset-(r.startX+a.offset)<0||r.startY+r.height-a.offset-(r.startY+a.offset)<0)||"hook"===t&&(r.width-2*a.size<50||r.height-2*a.size<50))){var f={bevelFilter:e.filter},g=e.filter;if(s.currSelectionPoint&&"crop-circle"===s.currSelectionPoint.shape||s.isCircleCrop||e===this.lowerContext&&s.isCropTab)this.drawImgToCtx(e,i);else{switch(t){case"none":this.drawImgToCtx(e,i);break;case"mat":for(this.drawImgToCtx(e,i);(r.width-2*a.size<0||r.height-2*a.size<0)&&a.size>0;)a.size-=20;e.filter="none",e.fillStyle=this.getFrameColor(a,e,r),e.beginPath(),e.rect(r.startX,r.startY,r.width,r.height),e.rect(r.startX+a.size,r.startY+a.size,r.width-2*a.size,r.height-2*a.size),e.fill("evenodd"),e.closePath();break;case"bevel":for(e.filter="none",e.fillStyle=this.getFrameColor(a,e,r),e.beginPath(),e.fillRect(r.startX,r.startY,r.width,r.height),e.closePath(),r.startX+=a.size,r.startY+=a.size,r.width-=2*a.size,r.height-=2*a.size;(r.width-2*a.size<40||r.height-2*a.size<40)&&a.size>0;)r.startX-=a.size,r.startY-=a.size,r.width+=2*a.size,r.height+=2*a.size,a.size-=20,r.startX+=a.size,r.startY+=a.size,r.width-=2*a.size,r.height-=2*a.size;e.fillStyle=this.getFrameColor(a,e,r),e.save(),e.beginPath(),e.moveTo(r.startX+p,r.startY),e.lineTo(r.startX+r.width-p,r.startY),e.quadraticCurveTo(r.startX+r.width,r.startY,r.startX+r.width,r.startY+p),e.lineTo(r.startX+r.width,r.startY+r.height-p),e.quadraticCurveTo(r.startX+r.width,r.startY+r.height,r.startX+r.width-p,r.startY+r.height),e.lineTo(r.startX+p,r.startY+r.height),e.quadraticCurveTo(r.startX,r.startY+r.height,r.startX,r.startY+r.height-p),e.lineTo(r.startX,r.startY+p),e.quadraticCurveTo(r.startX,r.startY,r.startX+p,r.startY),e.closePath(),e.clip(),e.filter="none"===g?s.canvasFilter:g,e.canvas.id===s.element.id+"_tempCanvas"?(i=null,e.filter="none",e.drawImage(s.inMemoryCanvas,0,0),e.filter="none"===g?s.canvasFilter:g):(e.clearRect(0,0,e.canvas.width,e.canvas.height),i?(i=null,0!==s.transform.zoomFactor&&(this.isRotateZoom=!0),s.notify("filter",{prop:"getBevelFilter",onPropertyChange:!1,value:{obj:f}}),e.filter=f.bevelFilter,this.updateCurrTransState("initial"),this.drawImgToCtx(e,i),this.updateCurrTransState("reverse"),this.isRotateZoom=!1,s.frameObj.type="none",e.filter="none",s.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),s.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:e,points:null}}),s.frameObj.type="bevel",e.filter="none"===g?s.canvasFilter:g):(s.notify("filter",{prop:"getBevelFilter",onPropertyChange:!1,value:{obj:f}}),e.filter=f.bevelFilter,this.drawImgToCtx(e,i))),e.restore();break;case"line":this.drawImgToCtx(e,i),n=e.lineWidth,e.lineWidth=a.size/10;for(var m=0;m<s.frameObj.amount;m++){m>0&&(r.startX+=a.offset,r.startY+=a.offset,r.width-=2*a.offset,r.height-=2*a.offset);var v=r.startY+r.height-a.inset-a.radius,b=r.startY+a.inset+a.radius,y=r.startX+r.width-a.inset-a.radius,C=r.startX+a.inset+a.radius,w=r.startX+a.inset+a.radius,M=r.startX+r.width-a.inset-a.radius,S=r.startY+a.inset+a.radius,x=r.startY+r.height-a.inset-a.radius;v>=b&&y>=C&&w<=M&&S<=x&&(e.filter="none",e.strokeStyle=this.getFrameColor(a,e,r),"dashed"===a.border?e.setLineDash([2.5*e.lineWidth,1.5*e.lineWidth]):"dotted"===a.border&&e.setLineDash([e.lineWidth,e.lineWidth]),e.beginPath(),e.moveTo(r.startX+a.inset+a.radius,r.startY+a.inset),e.lineTo(r.startX+r.width-a.inset-a.radius,r.startY+a.inset),e.arcTo(r.startX+r.width-a.inset,r.startY+a.inset,r.startX+r.width-a.inset,r.startY+a.inset+a.radius,a.radius),e.lineTo(r.startX+r.width-a.inset,r.startY+r.height-a.inset-a.radius),e.arcTo(r.startX+r.width-a.inset,r.startY+r.height-a.inset,r.startX+r.width-a.inset-a.radius,r.startY+r.height-a.inset,a.radius),e.lineTo(r.startX+a.inset+a.radius,r.startY+r.height-a.inset),e.arcTo(r.startX+a.inset,r.startY+r.height-a.inset,r.startX+a.inset,r.startY+r.height-a.inset-a.radius,a.radius),e.lineTo(r.startX+a.inset,r.startY+a.inset+a.radius),e.arcTo(r.startX+a.inset,r.startY+a.inset,r.startX+a.inset+a.radius,r.startY+a.inset,a.radius),e.closePath(),e.stroke(),e.setLineDash([]))}e.lineWidth=n;break;case"inset":this.drawImgToCtx(e,i),e.filter="none",e.strokeStyle=this.getFrameColor(a,e,r),n=e.lineWidth,e.lineWidth=a.size/10,e.beginPath(),e.moveTo(r.startX+a.offset,r.startY+a.inset),e.lineTo(r.startX+r.width-a.offset,r.startY+a.inset),e.moveTo(r.startX+r.width-a.inset,r.startY+a.offset),e.lineTo(r.startX+r.width-a.inset,r.startY+r.height-a.offset),e.moveTo(r.startX+r.width-a.offset,r.startY+r.height-a.inset),e.lineTo(r.startX+a.offset,r.startY+r.height-a.inset),e.moveTo(r.startX+a.inset,r.startY+r.height-a.offset),e.lineTo(r.startX+a.inset,r.startY+a.offset),e.stroke(),e.closePath(),e.lineWidth=n;break;case"hook":this.drawImgToCtx(e,i),e.filter="none",e.strokeStyle=this.getFrameColor(a,e,r),n=e.lineWidth,e.lineWidth=a.size/10,e.beginPath(),e.moveTo(r.startX+a.inset+u,r.startY+a.inset),e.lineTo(r.startX+a.inset,r.startY+a.inset),e.lineTo(r.startX+a.inset,r.startY+a.inset+u),e.moveTo(r.startX+r.width-a.inset-u,r.startY+a.inset),e.lineTo(r.startX+r.width-a.inset,r.startY+a.inset),e.lineTo(r.startX+r.width-a.inset,r.startY+a.inset+u),e.moveTo(r.startX+r.width-a.inset-u,r.startY+r.height-a.inset),e.lineTo(r.startX+r.width-a.inset,r.startY+r.height-a.inset),e.lineTo(r.startX+r.width-a.inset,r.startY+r.height-a.inset-u),e.moveTo(r.startX+a.inset+u,r.startY+r.height-a.inset),e.lineTo(r.startX+a.inset,r.startY+r.height-a.inset),e.lineTo(r.startX+a.inset,r.startY+r.height-a.inset-u),e.stroke(),e.lineWidth=n}(s.isCircleCrop||s.currSelectionPoint&&"crop-circle"===s.currSelectionPoint.shape)&&s.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:e,isSave:e.canvas.id===s.element.id+"_tempCanvas"||null,isFlip:null}}),e.filter=g}}},e.prototype.triggerFrameChange=function(e){var t=this,i=this.parent,n={cancel:!1,previousFrameSetting:e,currentFrameSetting:{type:i.toPascalCase(i.frameObj.type),color:i.frameObj.color,gradientColor:i.frameObj.gradientColor,size:i.frameObj.size,inset:i.frameObj.inset,offset:i.frameObj.offset,borderRadius:i.frameObj.radius,frameLineStyle:i.toPascalCase(i.frameObj.border),lineCount:i.frameObj.amount}};return sf.base.isBlazor()?i.events&&!0===i.events.frameChanging.hasDelegate?i.dotNetRef.invokeMethodAsync("OnFrameChangingAsync","FrameChanging",n,null).then((function(e){if(!e.cancel){t.setFrameObj(e.currentFrameSetting);var n={currObj:{}};if(i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}}),i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:n.currObj,previousObjColl:n.currObj.objColl,previousPointColl:n.currObj.pointColl,previousSelPointColl:n.currObj.selPointColl,previousCropObj:sf.base.extend({},i.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),i.element.querySelector(".e-ie-toolbar-e-frame-color")&&(i.element.querySelector(".e-ie-toolbar-e-frame-color"+i.DDBPREVIEW).style.background=i.frameObj.color),i.element.querySelector(".e-ie-toolbar-e-frame-gradient")){var s=document.querySelector(".e-dropdown-popup.e-frame-gradient-dd-btn");s&&s.querySelector(".e-nocolor-item").classList.remove("e-selected"),i.element.querySelector(".e-ie-toolbar-e-frame-gradient"+i.DDBPREVIEW).classList.remove("e-nocolor-item"),""===i.frameObj.gradientColor?i.element.querySelector(".e-ie-toolbar-e-frame-gradient"+i.DDBPREVIEW).classList.add("e-nocolor-item"):i.element.querySelector(".e-ie-toolbar-e-frame-gradient"+i.DDBPREVIEW).style.background=i.frameObj.gradientColor}i.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),i.curFrameObjEvent={currentFrameSetting:e.currentFrameSetting},i.isFrameBtnClick=!0}})):n.cancel||this.setFrameObj(n.currentFrameSetting):(i.trigger("frameChange",n),n.cancel||this.setFrameObj(n.currentFrameSetting)),n},e.prototype.setFrameObj=function(e){var t=this.parent;t.frameObj.type=e.type.toLowerCase(),t.frameObj.color=e.color,t.frameObj.gradientColor=e.gradientColor,t.frameObj.size=e.size,t.frameObj.inset=e.inset,t.frameObj.offset=e.offset,t.frameObj.radius=e.borderRadius,t.frameObj.border=e.frameLineStyle.toLowerCase(),t.frameObj.amount=e.lineCount},e.prototype.zoomToSel=function(e,t){var i=this.parent;if(this.straightenActObj&&JSON.stringify(this.straightenActObj.activePoint)===JSON.stringify(e.activePoint))if(i.activeObj=sf.base.extend({},this.straightenActObj,null,!0),0===i.transform.straighten){var n=i.img.destWidth,s=i.img.destHeight;for(i.transform.straighten=360;;){if(sf.base.isNullOrUndefined(this.straightenInitZoom)||!(Math.round(i.transform.zoomFactor*Math.pow(10,3))/Math.pow(10,3)>Math.round(this.straightenInitZoom*Math.pow(10,3))/Math.pow(10,3))){this.performDummyZoom();break}if(this.setZoomPan("out"),n===i.img.destWidth&&s===i.img.destHeight){this.performDummyZoom();break}0===i.transform.degree&&(i.transform.zoomFactor-=.025,i.transform.cropZoomFactor-=.025)}i.transform.straighten=0,i.img={destLeft:i.img.destLeft,destTop:i.img.destTop,destWidth:i.img.destWidth,destHeight:i.img.destHeight,srcLeft:i.img.srcLeft,srcTop:i.img.srcTop,srcWidth:i.img.srcWidth,srcHeight:i.img.srcHeight}}else sf.base.isNullOrUndefined(this.straightenInitZoom)&&(this.straightenInitZoom=i.transform.zoomFactor),this.straightenInitZoom-i.transform.zoomFactor>0?i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-(this.straightenInitZoom-i.transform.zoomFactor),zoomPoint:null,isResize:!0}}):this.straightenInitZoom-i.transform.zoomFactor<0&&i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:this.straightenInitZoom-i.transform.zoomFactor,zoomPoint:null,isResize:!0}}),i.activeObj=sf.base.extend({},e,null,!0),i.transform.zoomFactor+=.001,this.calcStraightenedPoints(t);else this.straightenActObj=sf.base.extend({},e,null,!0),i.activeObj=sf.base.extend({},this.straightenActObj,null,!0),this.straightenInitZoom=i.transform.zoomFactor,this.calcStraightenedPoints(t)},e.prototype.isDestPointSmall=function(){var e=this.parent,t=e.img,i={startX:t.destLeft,startY:t.destTop,width:t.destWidth,height:t.destHeight};e.notify("shape",{prop:"straightenShapes",onPropertyChange:!1});var n=!1;return this.straightenDestPoints.destWidth&&this.straightenDestPoints.destHeight&&(t.destWidth<this.straightenDestPoints.destWidth||t.destHeight<this.straightenDestPoints.destHeight)&&(n=!0),t.destLeft=i.startX,t.destTop=i.startY,t.destWidth=i.width,t.destHeight=i.height,e.img=t,n},e.prototype.calcStraightenedPoints=function(e){var t=this.parent,i=t.img.destWidth,n=t.img.destHeight;sf.base.isNullOrUndefined(t.transform.zoomFactor)&&(t.transform.zoomFactor+=.025),this.updateImgCanvasPoints();for(var s=function(){if(!(o.isLinesIntersect()||o.isSelOutsideImg()||e&&o.isDestPointSmall()))return o.performDummyZoom(),"break";if(t.activeObj=sf.base.extend({},o.straightenActObj,null,!0),o.setZoomPan("in"),i===t.img.destWidth&&n===t.img.destHeight)return o.performDummyZoom(),"break";0===t.transform.degree&&(t.transform.zoomFactor+=.025,t.transform.cropZoomFactor+=.025);var s=o.imgCanvasPoints,r=t.img.destLeft,a=t.img.destTop,l=t.img.destWidth,h=t.img.destHeight;s.forEach((function(e){e.x=e.ratioX*l+r,e.y=e.ratioY*h+a})),o.imgCanvasPoints=s},o=this;;){if("break"===s())break}},e.prototype.performDummyZoom=function(){var e=this.parent;e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.025,zoomPoint:null,isResize:!0}}),e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.025,zoomPoint:null,isResize:!0}});var t=10*e.transform.zoomFactor;t<1&&(t=1+t/10),e.setProperties({zoomSettings:{zoomFactor:t}},!0),e.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:t}}),this.panToSel()},e.prototype.setZoomPan=function(e){var t=this.parent,i={maxDimension:null};0===t.transform.degree?(t.notify("transform",{prop:"cropZoom",onPropertyChange:!1,value:{value:"in"===e?.025:-.025,selectionObj:t.activeObj,obj:i}}),t.img.destWidth=i.maxDimension.width,t.img.destHeight=i.maxDimension.height):(t.transform.zoomFactor+="in"===e?.025:-.025,t.transform.cropZoomFactor+="in"===e?.025:-.025,this.updateCurrTransState("initial"),this.isRotateZoom=!0,this.setDestPoints(),this.isRotateZoom=!1,this.updateCurrTransState("reverse"))},e.prototype.updateImgCanvasPoints=function(){var e=this.parent,t=this.getImagePoints(),i={width:0,height:0},n=e.baseImgCanvas.width,s=e.baseImgCanvas.height;e.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:i,dimension:{width:n,height:s}}});var o,r,a,l,h=i;n=e.transform.degree%90==0&&e.transform.degree%180!=0?h.height:h.width,s=e.transform.degree%90==0&&e.transform.degree%180!=0?h.width:h.height;var d=e.img,c=d.destLeft,p=d.destTop,u=d.destWidth,f=d.destHeight;e.transform.straighten>0?(o={x:c+t[0].x/n,y:p},r={x:c+u,y:p+t[1].y/s},a={x:c+u-t[0].x/n,y:p+f},l={x:c,y:p+f-t[1].y/s}):(o={x:c,y:p+t[0].y/s},r={x:c+t[1].x/n,y:p},a={x:c+u,y:p+f-t[0].y/s},l={x:c+u-t[1].x/n,y:p+f}),o.ratioX=(o.x-c)/u,o.ratioY=(o.y-p)/f,r.ratioX=(r.x-c)/u,r.ratioY=(r.y-p)/f,a.ratioX=(a.x-c)/u,a.ratioY=(a.y-p)/f,l.ratioX=(l.x-c)/u,l.ratioY=(l.y-p)/f,this.imgCanvasPoints=[o,r,a,l]},e.prototype.isLinesIntersect=function(e){var t=this.parent.activeObj.activePoint,i=this.imgCanvasPoints,n=this.doIntersect({x:t.startX,y:t.startY},{x:t.endX,y:t.startY},i[0],i[1]),s=this.doIntersect({x:t.endX,y:t.startY},{x:t.endX,y:t.endY},i[1],i[2]),o=this.doIntersect({x:t.startX,y:t.endY},{x:t.endX,y:t.endY},i[2],i[3]),r=this.doIntersect({x:t.startX,y:t.startY},{x:t.startX,y:t.endY},i[3],i[0]),a=this.isInsideRect(i[0]),l=this.isInsideRect(i[1]),h=this.isInsideRect(i[2]),d=this.isInsideRect(i[3]);return e&&(e.arr=[n,s,o,r]),n||s||o||r||a||l||h||d||i[0].x>t.startX&&i[1].x<t.endX&&i[2].x<t.endX&&i[3].x>t.startX&&i[0].y<t.startY&&i[1].y<t.startY&&i[2].y>t.endY&&i[3].y>t.endY||i[0].x<t.startX&&i[1].x>t.endX&&i[2].x>t.endX&&i[3].x<t.startX&&i[0].y>t.startY&&i[1].y>t.startY&&i[2].y<t.endY&&i[3].y<t.endY},e.prototype.isSelOutsideImg=function(){var e=this.parent,t=this.imgCanvasPoints,i=e.activeObj.activePoint;return"inside"!==this.checkPointPosition(i.startX,i.startY,t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y)||"inside"!==this.checkPointPosition(i.endX,i.startY,t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y)||"inside"!==this.checkPointPosition(i.startX,i.endY,t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y)||"inside"!==this.checkPointPosition(i.endX,i.endY,t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y)},e.prototype.calcTriangleArea=function(e,t,i,n,s,o){return Math.abs((e*(n-o)+i*(o-t)+s*(t-n))/2)},e.prototype.checkPointPosition=function(e,t,i,n,s,o,r,a,l,h){var d=this.calcTriangleArea(e,t,i,n,l,h),c=this.calcTriangleArea(e,t,l,h,r,a),p=this.calcTriangleArea(e,t,r,a,s,o),u=this.calcTriangleArea(e,t,s,o,i,n),f=this.calcTriangleArea(i,n,s,o,r,a)+this.calcTriangleArea(r,a,l,h,i,n);return d+c+p+u>f?"outside":d+c+p+u!==f||0!==d&&0!==c&&0!==p&&0!==u?"inside":"on"},e.prototype.getImagePoints=function(){var e=[],t=this.parent,i=t.transform.degree,n=t.baseImg.width,s=t.baseImg.height,o={dim:null,width:s,height:n,angle:t.transform.straighten};o.dim=t.getRotatedCanvasDim(o.width,o.height,o.angle);var r=i%90==0&&i%180!=0?s:n,a=i%90==0&&i%180!=0?n:s,l=(i%90==0&&i%180!=0?o.dim.width:t.baseImgCanvas.width)/2,h=(i%90==0&&i%180!=0?o.dim.height:t.baseImgCanvas.height)/2,d=l-r/2,c=h-a/2,p=l+r/2,u=h+a/2,f=l,g=h,m=t.transform.straighten*(Math.PI/180),v={x:Math.cos(m)*(d-f)-Math.sin(m)*(c-g)+f,y:Math.sin(m)*(d-f)+Math.cos(m)*(c-g)+g},b={x:Math.cos(m)*(p-f)-Math.sin(m)*(c-g)+f,y:Math.sin(m)*(p-f)+Math.cos(m)*(c-g)+g},y={x:Math.cos(m)*(p-f)-Math.sin(m)*(u-g)+f,y:Math.sin(m)*(p-f)+Math.cos(m)*(u-g)+g},C={x:Math.cos(m)*(d-f)-Math.sin(m)*(u-g)+f,y:Math.sin(m)*(d-f)+Math.cos(m)*(u-g)+g};return e.push(v),e.push(b),e.push(y),e.push(C),e},e.prototype.doIntersect=function(e,t,i,n){var s=this.initiation(e,t,i),o=this.initiation(e,t,n),r=this.initiation(i,n,e),a=this.initiation(i,n,t);return s!==o&&r!==a||(!(0!==s||!this.onSegment(e,i,t))||(!(0!==o||!this.onSegment(e,n,t))||(!(0!==r||!this.onSegment(i,e,n))||!(0!==a||!this.onSegment(i,t,n)))))},e.prototype.initiation=function(e,t,i){var n=(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y);return 0===n?0:n>0?1:2},e.prototype.onSegment=function(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)},e.prototype.isInsideRect=function(e){var t=this.parent.activeObj.activePoint,i=!1;return e.x>=t.startX&&e.x<=t.endX&&e.y>=t.startY&&e.y<=t.endY&&(i=!0),i},e.prototype.setDestForStraighten=function(){var e=this.parent;if(sf.base.isNullOrUndefined(this.straightenDestPoints)){var t=e.img,i=t.destLeft,n=t.destTop,s=t.destWidth,o=t.destHeight;e.notify("shape",{prop:"straightenShapes",onPropertyChange:!1}),this.straightenDestPoints=sf.base.extend({},e.img,{},!0),e.img.destLeft=i,e.img.destTop=n,e.img.destWidth=s,e.img.destHeight=o}},e}(),f=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("export",this.export,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("export",this.export),this.parent.off("destroyed",this.destroy)},e.prototype.export=function(e){if(sf.base.isBlazor()){var t={shape:""};this.parent.notify("selection",{prop:"getCurrentDrawingShape",onPropertyChange:!1,value:{obj:t}}),""!==t.shape&&(this.parent.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),this.parent.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))}else this.parent.notify("toolbar",{prop:"refreshShapeDrawing",onPropertyChange:!1});switch(this.updatePvtVar(),e.prop){case"export":this.exportImg(e.value.type,e.value.fileName);break;case"exportToCanvas":this.exportToCanvas(e.value.object);break;case"drawAnnotation":this.drawAnnotation(e.value.context,e.value.ratio);break;case"updateSaveContext":this.updateSaveContext(e.value.context)}},e.prototype.getModuleName=function(){return"export"},e.prototype.updatePvtVar=function(){var e=this.parent;e.lowerCanvas&&(this.lowerContext=e.lowerCanvas.getContext("2d"))},e.prototype.exportImg=function(e,t){var i=this,n=this.parent,s={fileName:""};n.notify("draw",{prop:"getFileName",onPropertyChange:!1,value:{obj:s}});var o=s.fileName;if(!n.disabled&&n.isImageLoaded){var r={bool:!1};n.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:r}}),r.bool&&n.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),n.togglePen&&(n.currObjType.isZoomed=!0,n.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}})),"block"!==n.textArea.style.display&&"inline-block"!==n.textArea.style.display||n.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),n.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}});var a={canvasFilter:this.parent.canvasFilter};this.lowerContext.filter=a.canvasFilter,e=e||"Png",n.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}});var l={cancel:!1,fileName:t||o,fileType:e};sf.base.isBlazor()&&n.events&&!0===n.events.saving.hasDelegate?n.dotNetRef.invokeMethodAsync("BeforeSaveEventAsync","BeforeSave",l).then((function(n){i.beforeSaveEvent(n,e,t,o)})):(n.trigger("beforeSave",l),this.beforeSaveEvent(l,e,t,o))}},e.prototype.beforeSaveEvent=function(e,t,i,n){var s=this.parent;if(!e.cancel){s.currObjType.isSave=!0,i=e.fileName?e.fileName:i;var o=t.toLowerCase();i=i||n,"svg"===o?this.toSVGImg(i):this.toBlobFn(i,o);var r={fileName:i||n,fileType:t};s.trigger("saved",r),sf.base.isBlazor()||s.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),s.lowerCanvas.style.left=s.upperCanvas.style.left="",s.lowerCanvas.style.top=s.upperCanvas.style.top="",s.lowerCanvas.style.maxWidth=s.upperCanvas.style.maxWidth="",s.lowerCanvas.style.maxHeight=s.upperCanvas.style.maxHeight=""}},e.prototype.toSVGImg=function(e){var t=this.parent;sf.popups.showSpinner(t.element),t.element.style.opacity="0.5";var i=this.exportToCanvas(),n=i.toDataURL();sf.popups.hideSpinner(t.element),t.element.style.opacity="1";var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("width",i.style.maxWidth),s.setAttribute("height",i.style.maxHeight);var o=document.createElementNS("http://www.w3.org/2000/svg","image");o.setAttributeNS(null,"height",i.height.toString()),o.setAttributeNS(null,"width",i.width.toString()),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n),s.appendChild(o);var r='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+i.width+'" height="'+i.height+'">',a=s.innerHTML,l="data:image/svg+xml;base64,"+btoa(r+a+"</svg>");return null===e?l:(this.downloadImg(l,e+".svg"),null)},e.prototype.toBlobFn=function(e,t){var i=this,n=this.parent;sf.popups.showSpinner(n.element),n.element.style.opacity="0.5",this.exportToCanvas().toBlob((function(s){var o=URL.createObjectURL(s);i.downloadImg(o,e+"."+t),sf.popups.hideSpinner(n.element),n.element.style.opacity="1"}),"image/png")},e.prototype.exportToCanvas=function(e){var t,i,n=this.parent,s=sf.base.extend({},n.cropObj,{},!0),o={currObj:{}};n.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var r=o.currObj;r.objColl=sf.base.extend([],n.objColl,[],!0),r.pointColl=sf.base.extend([],n.pointColl,[],!0),r.afterCropActions=sf.base.extend([],n.afterCropActions,[],!0);var a={selPointColl:null};n.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),this.parent.aspectWidth?(n.notify("undo-redo",{prop:"setPreventUR",value:{bool:!0}}),sf.base.isBlazor()?n.performResizeClick():n.notify("toolbar",{prop:"resizeClick",value:{bool:!1}}),n.currentToolbar="resize-toolbar",n.okBtn(),n.transform.degree%90==0&&n.transform.degree%180!=0?(t=this.parent.aspectHeight,i=this.parent.aspectWidth):(t=this.parent.aspectWidth,i=this.parent.aspectHeight),n.notify("undo-redo",{prop:"setPreventUR",value:{bool:!1}})):n.currSelectionPoint?(t=n.img.srcWidth,i=n.img.srcHeight):(t=n.baseImgCanvas.width,i=n.baseImgCanvas.height);var l={width:0,height:0};n.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:l,dimension:{width:t,height:i}}});var h=l,d=this.lowerContext.filter;if("none"!==this.lowerContext.filter){var c=this.lowerContext.filter.split(" "),p=parseFloat(c[5].split("(")[1]);p*=(h.width+h.height)/2,c[5]="blur("+p+"px)",this.lowerContext.filter=c.join(" ")}var u=n.createElement("canvas",{id:n.element.id+"_tempCanvas",attrs:{name:"canvasImage"}}),f=u.getContext("2d");u.width=t,u.height=i;var g={width:0,height:0};n.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:t,height:i,obj:g}});var m=g;u.style.maxWidth=m.width+"px",u.style.maxHeight=m.height+"px";var v=this.lowerContext.filter;return f.filter=this.lowerContext.filter,this.downScaleImgCanvas(f,t,i),this.lowerContext.filter=v,0===n.transform.degree&&""===n.transform.currFlipState&&0===n.transform.straighten||(this.updateSaveContext(f),this.exportTransformedImage(f)),this.drawAnnotation(f,h),n.isCircleCrop&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:f,isSave:!0,isFlip:null}}),this.updateFrame(f,!0),this.lowerContext.filter=d,n.canvasFilter=d,e&&(e.canvas=u),n.aspectWidth&&(n.objColl=[],n.pointColl=[],n.freehandCounter=0,n.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),n.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:r}}),r.selPointColl=sf.base.extend([],a.selPointColl,[],!0),n.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:r.selPointColl}}}),n.cropObj=s,n.objColl=sf.base.extend([],r.objColl,[],!0),n.pointColl=sf.base.extend([],r.pointColl,[],!0),n.freehandCounter=n.pointColl.length,n.transform.straighten=0,this.lowerContext.filter="none",n.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),n.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=r.filter,n.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(n.isCircleCrop||n.currSelectionPoint&&"crop-circle"===n.currSelectionPoint.shape)&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})),u},e.prototype.drawAnnotation=function(e,t){var i=this.parent;if(i.objColl.length>0){var n=e.filter;e.filter="none";for(var s=sf.base.extend([],i.objColl,[],!0),o=0,r=i.objColl.length;o<r;o++){var a=i.objColl[o],l=a.activePoint;if(l.startX-=i.img.destLeft,l.startY-=i.img.destTop,l.endX-=i.img.destLeft,l.endY-=i.img.destTop,l.width=l.endX-l.startX,l.height=l.endY-l.startY,l.startX*=t.width,l.startY*=t.height,l.endX*=t.width,l.endY*=t.height,l.width=l.endX-l.startX,l.height=l.endY-l.startY,a.strokeSettings.strokeWidth*=(t.width+t.height)/2,"text"===a.shape)a.textSettings.fontSize*=(t.width+t.height)/2;else if("path"===a.shape)for(var h=0;h<a.pointColl.length;h++)a.pointColl[h].x=(a.pointColl[h].x-i.img.destLeft)*t.width,a.pointColl[h].y=(a.pointColl[h].y-i.img.destTop)*t.height;else"image"===a.shape&&(i.activeObj=sf.base.extend({},i.objColl[o],{},!0),i.notify("selection",{prop:"upgradeImageQuality",onPropertyChange:!1}),i.objColl[o]=sf.base.extend({},i.activeObj,{},!0));i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"saveContext",obj:i.objColl[o],isCropRatio:null,points:null,isPreventDrag:!0,saveContext:e,isPreventSelection:null}})}e.filter=n,i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),i.objColl=s}if(i.freehandCounter>0){var d={penStrokeWidth:null};i.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:d}});for(var c=sf.base.extend({},i.pointColl,{},!0),p=0;p<i.freehandCounter;p++){i.points=sf.base.extend([],i.pointColl[p].points,[]),i.notify("freehand-draw",{prop:"setPointCounter",onPropertyChange:!1,value:{value:0}});r=i.points.length;i.pointColl[p].strokeWidth*=(t.width+t.height)/2;for(h=0;h<r;h++)i.points[h].x=(i.points[h].x-i.img.destLeft)*t.width,i.points[h].y=(i.points[h].y-i.img.destTop)*t.height}i.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:e,points:null}}),i.pointColl=c,i.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:d.penStrokeWidth}})}},e.prototype.downScaleImgCanvas=function(e,t,i){var n=this.parent,s=n.baseImgCanvas,o=n.baseImg,r={width:0,height:0};if(n.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:o.width,height:o.height,obj:r,isImgShape:null}}),r.width>t&&r.height>i){var a=n.createElement("canvas",{id:n.element.id+"_downScaleCanvas",attrs:{name:"canvasImage"}});a.width=this.parent.img.srcWidth,a.height=this.parent.img.srcHeight,a.getContext("2d").drawImage(s,n.img.srcLeft,n.img.srcTop,n.img.srcWidth,n.img.srcHeight,0,0,a.width,a.height),n.notify("draw",{prop:"downScale",value:{canvas:a,width:t,height:i}}),e.drawImage(a,0,0)}else e.drawImage(n.baseImgCanvas,n.img.srcLeft,n.img.srcTop,n.img.srcWidth,n.img.srcHeight,0,0,t,i)},e.prototype.updateFrame=function(e,t){if("none"!==this.parent.frameObj.type){var i=e.filter;e.filter="none",this.parent.notify("draw",{prop:"applyFrame",value:{ctx:e,frame:this.parent.frameObj.type,preventImg:t}}),e.filter=i}},e.prototype.downloadImg=function(e,t){var i=document.createElement("a");i.href=e,i.target="_parent",i.download=t,(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i)},e.prototype.exportTransformedImage=function(e){var t=this.parent,i=t.transform.degree;if(t.rotateFlipColl.length>0)for(var n=0,s=t.rotateFlipColl.length;n<s;n++){var o=t.rotateFlipColl[n];"number"==typeof o?this.exportRotate(e,o):"horizontal"===o?this.exportFlip(e,!0,!1):"vertical"===o&&this.exportFlip(e,!1,!0)}t.transform.degree=i},e.prototype.exportRotate=function(e,t){var i=this.parent;e.clearRect(0,0,e.canvas.width,e.canvas.height),this.setMaxDim(i.transform.degree,e.canvas),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(Math.PI/180*t),e.drawImage(i.inMemoryCanvas,-e.canvas.height/2,-e.canvas.width/2,e.canvas.height,e.canvas.width),this.updateSaveContext(e)},e.prototype.exportFlip=function(e,t,i){e.clearRect(0,0,e.canvas.width,e.canvas.height),t&&(e.translate(e.canvas.width,0),e.scale(-1,1)),i&&(e.translate(0,e.canvas.height),e.scale(1,-1)),e.drawImage(this.parent.inMemoryCanvas,0,0),this.updateSaveContext(e)},e.prototype.updateSaveContext=function(e){var t=this.parent.inMemoryCanvas.getContext("2d");e.setTransform(1,0,0,1,0,0);var i=e.getImageData(0,0,e.canvas.width,e.canvas.height);this.parent.inMemoryCanvas.width=i.width,this.parent.inMemoryCanvas.height=i.height,t.putImageData(i,0,0)},e.prototype.setMaxDim=function(e,t){var i,n;e%90==0&&e%180!=0?sf.base.isNullOrUndefined(this.parent.currSelectionPoint)?(i=this.parent.baseImgCanvas.height,n=this.parent.baseImgCanvas.width):(i=this.parent.img.srcHeight,n=this.parent.img.srcWidth):e%180!=0&&0!==e||(sf.base.isNullOrUndefined(this.parent.currSelectionPoint)?(i=this.parent.baseImgCanvas.width,n=this.parent.baseImgCanvas.height):(i=this.parent.img.srcWidth,n=this.parent.img.srcHeight)),sf.base.isNullOrUndefined(this.parent.aspectWidth)||(i=this.parent.aspectWidth,n=this.parent.aspectHeight),t.width=i,t.height=n;var s={width:0,height:0};this.parent.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i,height:n,obj:s,isImgShape:null}});var o=s;t.style.maxWidth=o.width+"px",t.style.maxHeight=o.height+"px"},e}(),g=function(){function e(e){this.adjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.tempAdjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.adjustmentValue="",this.isBrightnessAdjusted=!1,this.bevelFilter="none",this.tempAdjVal={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.tempFilVal="",this.parent=e,this.addEventListener()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("filter",this.filter,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("filter",this.filter),this.parent.off("destroyed",this.destroy)},e.prototype.filter=function(e){switch(this.updatePrivateVariables(),e.prop){case"finetuneImage":this.finetuneImage(e.value.option,e.value.value);break;case"applyImageFilter":this.setFilter(e.value.option);break;case"update-finetunes":this.updateFinetunes();break;case"set-adjustment":this.setAdjustment(e.value.operation);break;case"update-filter":this.updateFilter(e.value.operation,e.value.filter);break;case"initFilter":this.initFilter();break;case"setCurrAdjValue":this.setCurrAdjValue(e.value.type,e.value.value);break;case"updateAdj":this.updateAdj(e.value.type,e.value.value,e.value.isPreview,e.value.ctx);break;case"getCurrentObj":this.getCurrentObj(e.value.object);break;case"getAdjustmentLevel":sf.base.isNullOrUndefined(this.parent.activeObj.opacity)?this.adjustmentLevel.transparency=100:this.adjustmentLevel.transparency=100*this.parent.activeObj.opacity,e.value.obj.adjustmentLevel=this.adjustmentLevel;break;case"setAdjustmentLevel":this.adjustmentLevel=e.value.adjustmentLevel;break;case"getTempAdjustmentLevel":e.value.obj.tempAdjustmentLevel=this.tempAdjustmentLevel;break;case"setTempAdjustmentLevel":this.tempAdjustmentLevel=e.value.tempAdjustmentLevel;break;case"setAdjustmentValue":this.adjustmentValue=e.value.adjustmentValue;break;case"getBrightnessAdjusted":e.value.obj.isBrightnessAdjusted=this.isBrightnessAdjusted;break;case"setBrightnessAdjusted":this.isBrightnessAdjusted=e.value.isBrightnessAdjusted,this.parent.currentFilter.split("_")&&"cold"===this.parent.currentFilter.split("_")[1]&&(this.isBrightnessAdjusted=!1);break;case"getBevelFilter":e.value.obj.bevelFilter=this.bevelFilter;break;case"setBevelFilter":this.bevelFilter=e.value.bevelFilter;break;case"setTempAdjVal":this.tempAdjVal=sf.base.extend({},this.adjustmentLevel,{},!0);break;case"setTempFilVal":this.tempFilVal=this.parent.currentFilter;break;case"reset":this.reset()}},e.prototype.updatePrivateVariables=function(){var e=this.parent;e.lowerCanvas&&(this.lowerContext=e.lowerCanvas.getContext("2d"))},e.prototype.getModuleName=function(){return"filter"},e.prototype.reset=function(){this.adjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.tempAdjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},this.adjustmentValue=this.parent.getDefaultFilter(),this.isBrightnessAdjusted=!1,this.bevelFilter="none",this.tempFilVal="",this.tempAdjVal={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1}},e.prototype.updateFinetunes=function(){var e=this,t=this.parent,i=t.finetuneSettings;if(i){["brightness","contrast","hue","saturation","exposure","opacity","blur"].forEach((function(t){i[t]&&(e.adjustmentLevel[t]=i[t].defaultValue,e.tempAdjustmentLevel[t]=i[t].defaultValue)})),t.notify("draw",{prop:"isInitialLoading",onPropertyChange:!1,value:{isInitialLoading:!0}})}},e.prototype.initFilter=function(){this.setFilterAdj("brightness",this.adjustmentLevel.brightness),this.setFilterAdj("contrast",this.adjustmentLevel.contrast),this.setFilterAdj("hue",this.adjustmentLevel.hue),this.setFilterAdj("saturation",this.adjustmentLevel.saturation),this.setFilterAdj("exposure",this.adjustmentLevel.exposure),this.setFilterAdj("opacity",this.adjustmentLevel.opacity),this.setFilterAdj("blur",this.adjustmentLevel.blur)},e.prototype.updateAdj=function(e,t,i,n){var s=this.parent;this.lowerContext.clearRect(0,0,s.lowerCanvas.width,s.lowerCanvas.height);var o,r,a,l,h,d=this.lowerContext.filter.split(" "),c=[],p=this.getFilterValue(this.adjustmentLevel.brightness);if(-1===["brightness","contrast","hue","saturation","exposure","opacity","blur"].indexOf(e)&&sf.base.isNullOrUndefined(i)&&(this.adjustmentLevel.sharpen||this.adjustmentLevel.bw)){s.isUndoRedo=!0;var u=this.lowerContext.filter;this.lowerContext.filter="none",s.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),s.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=u,s.isUndoRedo=!1}switch(e){case"brightness":t=this.getFilterValue(this.adjustmentLevel.exposure)+.005*t,d[0]="brightness("+t+")",0!==this.adjustmentLevel.brightness?(t=this.adjustmentLevel.opacity/100-.3*this.adjustmentLevel.opacity/100,d[4]="opacity("+t+")"):(t=this.adjustmentLevel.opacity/100,d[4]="opacity("+t+")"),this.adjustmentValue=d.join(" ");break;case"contrast":d[1]="contrast("+t+"%)",this.adjustmentValue=d.join(" ");break;case"hue":d[2]="hue-rotate("+t+"deg)",this.adjustmentValue=d.join(" ");break;case"saturation":d[3]="saturate("+t+"%)",this.adjustmentValue=d.join(" ");break;case"opacity":1!==parseFloat(d[0].split("(")[1])&&(t-=.2),t<0&&(t=0),d[4]="opacity("+t+")",this.adjustmentValue=d.join(" ");break;case"blur":d[5]="blur("+t+"px)",this.adjustmentValue=d.join(" ");break;case"exposure":t>1?(t-=1,t+=p):t<1&&(t=p-(t=1-t)),d[0]="brightness("+t+")",this.adjustmentValue=d.join(" ");break;case"chrome":o=this.getSaturationFilterValue(this.adjustmentLevel.saturation),t=(o*=100)+.4*o,d[3]="saturate("+t+"%)",c=this.adjustmentValue.split(" "),d[0]=c[0],d[1]=c[1],d[2]=c[2],d[4]=c[4],d[5]=c[5],d[6]="sepia(0%)",d[7]="grayscale(0%)",d[8]="invert(0%)";break;case"cold":r=this.getFilterValue(this.adjustmentLevel.brightness),t=.9*(r*=100),t*=.01,d[0]="brightness("+t+")",l=this.getFilterValue(this.adjustmentLevel.contrast),t=(l*=100)+.5*l,d[1]="contrast("+t+"%)",h=this.getSaturationFilterValue(this.adjustmentLevel.saturation),t=h*=100,d[3]="saturate("+t+"%)",c=this.adjustmentValue.split(" "),d[2]=c[2],d[4]=c[4],d[5]=c[5],d[6]="sepia(0%)",d[7]="grayscale(0%)",d[8]="invert(0%)";break;case"warm":a=this.getSaturationFilterValue(this.adjustmentLevel.saturation),t=(a*=100)+.4*a,d[3]="saturate("+t+"%)",d[6]="sepia(25%)",c=this.adjustmentValue.split(" "),d[0]=c[0],d[1]=c[1],d[2]=c[2],d[4]=c[4],d[5]=c[5],d[7]="grayscale(0%)",d[8]="invert(0%)";break;case"grayscale":d[7]="grayscale(100%)",c=this.adjustmentValue.split(" "),d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[4]=c[4],d[5]=c[5],d[6]="sepia(0%)",d[8]="invert(0%)";break;case"sepia":d[6]="sepia(100%)",c=this.adjustmentValue.split(" "),d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[4]=c[4],d[5]=c[5],d[7]="grayscale(0%)",d[8]="invert(0%)";break;case"invert":d[8]="invert(100%)",c=this.adjustmentValue.split(" "),d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[4]=c[4],d[5]=c[5],d[6]="sepia(0%)",d[7]="grayscale(0%)"}if("sharpen"!==e&&"blackandwhite"!==e){sf.base.isNullOrUndefined(i)&&("default"===e&&(d=this.getDefaultCurrentFilter(d)),this.lowerContext.filter=d.join(" ")),d=this.setTempFilterValue(p,i,d,e),s.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!0}}),s.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var f=void 0;"bevel"===s.frameObj.type&&(f=this.lowerContext.filter,this.bevelFilter=f),0===s.transform.degree&&s.rotateFlipColl.length>0&&(s.img.destLeft+=s.panPoint.totalPannedPoint.x,s.img.destTop+=s.panPoint.totalPannedPoint.y),s.img.destLeft+=s.panPoint.totalPannedInternalPoint.x,s.img.destTop+=s.panPoint.totalPannedInternalPoint.y,0===s.transform.degree&&s.notify("transform",{prop:"setDestPointsForFlipState",onPropertyChange:!1}),s.notify("draw",{prop:"drawImage",onPropertyChange:!1}),s.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),s.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),0===s.transform.degree&&s.rotateFlipColl.length>0&&(s.img.destLeft+=s.panPoint.totalPannedPoint.x,s.img.destTop+=s.panPoint.totalPannedPoint.y),d=this.setTempFilterValue(p,i,d,e),sf.base.isNullOrUndefined(i)&&(this.lowerContext.filter=d.join(" ")),s.initialAdjustmentValue=d.join(" "),f=this.lowerContext.filter,this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",this.bevelFilter=f,s.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),s.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=f,s.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(s.currSelectionPoint&&"crop-circle"===s.currSelectionPoint.shape||s.isCircleCrop)&&s.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),this.isBrightnessAdjusted=1!==p}var g=d.join(" ");n&&(n.filter=g)},e.prototype.setTempFilterValue=function(e,t,i,n){if(t)if("default"===n)i=this.getDefaultCurrentFilter(i);else if(1!==e){var s=this.lowerContext.filter.split(" ");s[4]=i[4],this.lowerContext.filter=s.join(" ")}return i},e.prototype.getDefaultCurrentFilter=function(e){var t=this.adjustmentValue.split(" ");return[t[0],t[1],t[2],t[3],t[4],t[5],"sepia(0%)","grayscale(0%)","invert(0%)"]},e.prototype.getFilterValue=function(e){return 0===e?1:1+.5*e/100},e.prototype.getSaturationFilterValue=function(e){return 0===e?1:1+e/100},e.prototype.setFilterAdj=function(e,t){var i=this.parent;switch(i.notify("freehand-draw",{prop:"apply-pen-draw",onPropertyChange:!1}),this.adjustmentLevel[""+e]=t,e){case"contrast":case"exposure":t=this.getFilterValue(t),"contrast"===e&&(t*=100);break;case"hue":t*=3;break;case"saturation":t=100*this.getSaturationFilterValue(t);break;case"opacity":t<10&&(t+=1),t/=100;break;case"blur":0!==t&&(t/=20,t+=.5)}var n=sf.base.extend({},i.cropObj,{},!0),s=this.getCurrentObj();s.objColl=sf.base.extend([],i.objColl,[],!0),s.pointColl=sf.base.extend([],i.pointColl,[],!0),s.afterCropActions=sf.base.extend([],i.afterCropActions,[],!0);var o={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),s.selPointColl=sf.base.extend([],o.selPointColl,[],!0),this.updateAdj(e,t),i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:e,previousObj:s,previousObjColl:s.objColl,previousPointColl:s.pointColl,previousSelPointColl:s.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})},e.prototype.setFilter=function(e){var t=this.parent;e=e.toLowerCase(),t.notify("freehand-draw",{prop:"apply-pen-draw",onPropertyChange:!1});var i={currentFilter:this.parent.currentFilter}.currentFilter,n=sf.base.extend({},t.cropObj,{},!0),s=this.getCurrentObj();s.objColl=sf.base.extend([],t.objColl,[],!0),s.pointColl=sf.base.extend([],t.pointColl,[],!0),s.afterCropActions=sf.base.extend([],t.afterCropActions,[],!0);var o={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),s.selPointColl=sf.base.extend([],o.selPointColl,[],!0),this.updateAdj(e,null),t.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:e,previousObj:s,previousObjColl:s.objColl,previousPointColl:s.pointColl,previousSelPointColl:s.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:i,isCircleCrop:null}})},e.prototype.setAdjustment=function(e){var t,i,n=this.lowerContext.filter.split(" ");switch(e){case"brightness":i=n[0].split("("),t=parseFloat(i[1].split(")")[0]),this.adjustmentLevel.brightness=this.setFilterValue(t);break;case"contrast":i=n[1].split("("),t=parseFloat(i[1].split(")")[0]),t/=100,this.adjustmentLevel.contrast=this.setFilterValue(t);break;case"hue":i=n[2].split("("),t=parseFloat(i[1].split(")")[0]),t/=3,this.adjustmentLevel.hue=t;break;case"saturation":i=n[3].split("("),t=parseFloat(i[1].split(")")[0]),t/=100,this.adjustmentLevel.saturation=this.setSaturationFilterValue(t);break;case"opacity":i=n[4].split("("),.45===(t=parseFloat(i[1].split(")")[0]))?t=40:.4===t?t=30:.35===t?t=20:.3===t?t=10:.25===t?t=0:t*=100,this.adjustmentLevel.opacity=t;break;case"blur":i=n[5].split("("),t=parseFloat(i[1].split(")")[0]),t*=20,this.adjustmentLevel.blur=t;break;case"exposure":i=n[0].split("("),t=parseFloat(i[1].split(")")[0]),this.adjustmentLevel.exposure=this.setFilterValue(t)}},e.prototype.setFilterValue=function(e){return Math.round(1===e?0:100*(e-1)/.5)},e.prototype.setSaturationFilterValue=function(e){return Math.round(1===e?0:100*(e-1))},e.prototype.updateFilter=function(e,t){var i=this.parent;if(-1!==["default","chrome","cold","warm","grayscale","blackandwhite","sepia","invert","sharpen"].indexOf(e)){var n=i.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected");n&&n.classList.remove("e-selected");var s=document.getElementById(i.element.id+"_"+e+"Canvas");s&&s.parentElement.classList.add("e-selected"),this.parent.currentFilter=t||i.element.id+"_"+e}},e.prototype.finetuneImage=function(e,t){var i=this.parent;if(!i.disabled&&i.isImageLoaded){switch(e.toLowerCase()){case"brightness":this.setFilterAdj("brightness",t);break;case"contrast":this.setFilterAdj("contrast",t);break;case"hue":this.setFilterAdj("hue",t);break;case"saturation":this.setFilterAdj("saturation",t);break;case"opacity":this.setFilterAdj("opacity",t);break;case"blur":this.setFilterAdj("blur",t);break;case"exposure":this.setFilterAdj("exposure",t)}this.parent.canvasFilter=this.lowerContext.filter,i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}},e.prototype.setCurrAdjValue=function(e,t){var i=this.parent;switch(this.parent.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),e){case"brightness":this.setFilterAdj("brightness",t);break;case"contrast":this.setFilterAdj("contrast",t);break;case"hue":this.setFilterAdj("hue",t);break;case"saturation":this.setFilterAdj("saturation",t);break;case"opacity":this.setFilterAdj("opacity",t);break;case"blur":this.setFilterAdj("blur",t);break;case"exposure":this.setFilterAdj("exposure",t)}i.isFinetuneBtnClick=!0,i.curFinetuneObjEvent={finetune:i.toPascalCase(e),value:t}},e.prototype.getCurrentObj=function(e){var t=this.parent,i={point:null};t.notify("crop",{prop:"getTempFlipPanPoint",value:{obj:i}});var n={previousZoomValue:null};t.notify("transform",{prop:"getPreviousZoomValue",value:{obj:n}});var s={zoomFactor:null};t.notify("draw",{prop:"getStraightenInitZoom",value:{obj:s}});var o={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",zoomFactor:0,previousZoomValue:0,straighten:0,destPoints:{startX:0,startY:0,width:0,height:0},frame:"none",srcPoints:{startX:0,startY:0,width:0,height:0},filter:"",isBrightAdjust:this.isBrightnessAdjusted,aspectWidth:null,aspectHeight:null,straightenZoom:0,adjustmentLevel:sf.base.extend({},this.tempAdjVal,{},!0),currentFilter:this.tempFilVal};return o.cropZoom=t.transform.cropZoomFactor,o.defaultZoom=t.transform.defaultZoomFactor,o.zoomFactor=t.zoomSettings.zoomFactor,o.previousZoomValue=n.previousZoomValue,o.straightenZoom=s.zoomFactor,o.totalPannedPoint=sf.base.extend({},t.panPoint.totalPannedPoint,{},!0),o.totalPannedClientPoint=sf.base.extend({},t.panPoint.totalPannedClientPoint,{},!0),o.totalPannedInternalPoint=sf.base.extend({},t.panPoint.totalPannedInternalPoint,{},!0),o.tempFlipPanPoint=sf.base.extend({},i.point,{},!0),o.activeObj=sf.base.extend({},t.activeObj,{},!0),o.rotateFlipColl=sf.base.extend([],t.rotateFlipColl,[],!0),o.degree=t.transform.degree,o.straighten=t.cropObj.straighten,o.currFlipState=t.transform.currFlipState,o.destPoints={startX:t.img.destLeft,startY:t.img.destTop,endX:0,endY:0,width:t.img.destWidth,height:t.img.destHeight},o.srcPoints={startX:t.img.srcLeft,startY:t.img.srcTop,endX:0,endY:0,width:t.img.srcWidth,height:t.img.srcHeight},o.filter=this.lowerContext.filter,o.aspectWidth=t.aspectWidth,o.aspectHeight=t.aspectHeight,o.frame=t.frameObj.type,o.frameObj=sf.base.extend({},t.frameObj),e&&(e.currObj=o),o},e}(),m=function(){function e(e){this.fhdObj={lastWidth:0,lastVelocity:0,time:0,pointX:0,pointY:0},this.isFreehandDrawing=!1,this.freehandDownPoint={x:0,y:0},this.isFreehandPointMoved=!1,this.pointCounter=0,this.selPointColl={},this.currFHDIdx=0,this.selPoints=[],this.dummyPoints=[],this.tempFHDStyles={strokeColor:null,fillColor:null,strokeWidth:null},this.straightenPoint={x:null,y:null,ratioX:null,ratioY:null},this.straightenPointAngle=0,this.parent=e,this.addEventListener()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("freehand-draw",this.draw,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("freehand-draw",this.draw),this.parent.off("destroyed",this.destroy)},e.prototype.draw=function(e){switch(this.updateFhdPvtVar(),e.prop){case"hoverFhd":this.hoverFhd(e.value.strokeColor,e.value.strokeWidth);break;case"freehandDownHandler":this.freehandDownHandler(e.value.e,e.value.canvas);break;case"freehandUpHandler":this.freehandUpHandler(e.value.e,e.value.canvas,e.value.context);break;case"handle-freehand-draw":var t=parseInt(e.value.id.split("_")[1],10)-1;this.isFHDIdx(t)&&this.deleteFhd(t,!0);break;case"freehandRedraw":this.freehandRedraw(e.value.context,e.value.points);break;case"deleteFhd":t=parseInt(e.value.id.split("_")[1],10)-1;this.deleteFhd(t,!0);break;case"selectFhd":t=null;e.value.id&&(t=parseInt(e.value.id.split("_")[1],10)-1),this.selectFhd(t);break;case"applyFhd":this.applyFhd();break;case"cancelFhd":this.cancelFhd();break;case"updateFHDCurPts":this.updateFHDCurPts();break;case"rotateFhdColl":this.rotateFhdColl();break;case"flipFHDColl":this.flipFHDColl(e.value.value);break;case"panFHDColl":this.panFHDColl(e.value.xDiff,e.value.yDiff,e.value.panRegion);break;case"updateFHDColl":e.value&&e.value.isPreventApply?this.updateFHDColl(e.value.isPreventApply):this.updateFHDColl();break;case"zoomFHDColl":this.zoomFHDColl(e.value.isPreventApply);break;case"apply-pen-draw":this.applyPenDraw();break;case"freeHandDraw":this.freeHandDraw(e.value.value);break;case"isFHDIdx":this.isFHDIdx(e.value.index,e.value.obj);break;case"getSqPtFD":this.getSqPtFD(e.value.idx,e.value.obj);break;case"getSelPointColl":e.value.obj.selPointColl=sf.base.extend([],this.selPointColl);break;case"setSelPointColl":this.selPointColl=sf.base.extend([],e.value.obj.selPointColl);break;case"setFreehandDrawHoveredIndex":this.fhdHovIdx=e.value.index;break;case"getFreehandDrawHoveredIndex":e.value.obj.index=this.fhdHovIdx;break;case"setPointCounter":this.pointCounter=e.value.value;break;case"getPenStrokeWidth":e.value.obj.penStrokeWidth=this.penStrokeWidth;break;case"setPenStrokeWidth":this.penStrokeWidth=e.value.value;break;case"getCurrentFreehandDrawIndex":e.value.obj.currentFreehandDrawIndex=this.currFHDIdx;break;case"setCurrentFreehandDrawIndex":this.currFHDIdx=e.value.value;break;case"updateCropPtsForSel":this.updateCropPtsForSel();break;case"getFreehandDrawSelectedId":e.value.obj.freehandDrawSelectedId=this.fhdSelID;break;case"resetFreehandDrawSelectedId":this.fhdSelID=null;break;case"getTempFreeHandDrawEditingStyles":e.value.obj.tempFreeHandDrawEditingStyles=this.tempFHDStyles;break;case"setFreehandSelectedIndex":this.fhdSelIdx=e.value.index;break;case"getFreehandSelectedIndex":e.value.obj.freehandSelectedIndex=this.fhdSelIdx;break;case"setCenterSelPoints":this.setCenterSelPoints();break;case"getStraightenPoint":e.value.obj.straightenPoint=sf.base.extend({},this.straightenPoint,{},!0);break;case"setStraightenPoint":this.straightenPoint.x=e.value.x,this.straightenPoint.y=e.value.y,e.value.ratioX&&e.value.ratioY&&(this.straightenPoint.ratioX=e.value.ratioX,this.straightenPoint.ratioY=e.value.ratioY);break;case"resetStraightenPoint":this.straightenPoint={x:null,y:null,ratioX:null,ratioY:null},this.prevStraightenObj=null,this.straightenPointAngle=0;break;case"getStraightenPointAngle":e.value.obj.angle=this.straightenPointAngle;break;case"reset":this.reset()}},e.prototype.updateFhdPvtVar=function(){var e=this.parent;e.lowerCanvas&&(this.lowerContext=e.lowerCanvas.getContext("2d")),e.upperCanvas&&(this.upperContext=e.upperCanvas.getContext("2d"))},e.prototype.reset=function(){this.fhdObj={lastWidth:0,lastVelocity:0,time:0,pointX:0,pointY:0},this.isFreehandDrawing=this.isFreehandPointMoved=!1,this.selPoints=[],this.dummyPoints=[],this.freehandDownPoint={x:0,y:0},this.selPointColl={},this.straightenPointAngle=0,this.fhdHovIdx=null,this.pointCounter=0,this.fhdSelID=null,this.penStrokeWidth=void 0,this.currFHDIdx=0,this.fhdSelIdx=null,this.tempFHDStyles={strokeColor:null,fillColor:null,strokeWidth:null},this.straightenPoint={x:null,y:null,ratioX:null,ratioY:null},this.prevStraightenObj=null},e.prototype.getModuleName=function(){return"freehand-draw"},e.prototype.hoverFhd=function(e,t){var i=this.parent,n=this.upperContext,s=-1;s=this.fhdHovIdx>-1?this.fhdHovIdx:this.fhdSelIdx,i.points=sf.base.extend([],i.pointColl[s].points),this.pointCounter=0;var o,r,a,l,h,d,c=i.points.length;n.fillStyle=e||i.pointColl[s].strokeColor,n.strokeStyle=n.fillStyle,h=d=this.penStrokeWidth=t||i.pointColl[s].strokeWidth,1===c&&(o=r=a=l=i.points[0],this.startDraw(n,o,r,a,l,h,d));for(var p=0;p<c-3;p++)i.points[p+1]&&i.points[p+2]&&i.points[p+2]&&(o=this.calcCurveCP(i.points[p+0],i.points[p+1],i.points[p+2]).controlPoint2,r=this.calcCurveCP(i.points[p+1],i.points[p+2],i.points[p+3]).controlPoint1,a=0===p?i.points[p]:i.points[p+1],l=i.points[p+2],this.startDraw(n,o,r,a,l,h,d));n.closePath();var u=this.getSqPtFD(s),f=n.lineWidth;n.lineWidth=2,n.strokeStyle=i.themeColl[i.theme].primaryColor,n.beginPath(),n.rect(u.startX,u.startY,u.width,u.height),n.stroke(),n.closePath(),n.lineWidth=f},e.prototype.freehandDownHandler=function(e,t){var i=this.parent;i.lowerCanvas=document.querySelector("#"+i.element.id+"_lowerCanvas"),this.lowerContext=i.lowerCanvas.getContext("2d"),i.upperCanvas=document.querySelector("#"+i.element.id+"_upperCanvas"),this.upperContext=i.upperCanvas.getContext("2d"),this.fhdObj.time=(new Date).getTime(),this.isFreehandDrawing=!0,"mousedown"===e.type?this.freehandDownPoint={x:e.clientX,y:e.clientY}:this.freehandDownPoint={x:e.touches[0].clientX,y:e.touches[0].clientY},this.isFreehandPointMoved=!1,sf.base.EventHandler.add(t,"mousemove touchmove",this.freehandMoveHandler,this);var s={id:"pen_"+(this.currFHDIdx+1),type:n.FreehandDraw,startX:this.freehandDownPoint.x,startY:this.freehandDownPoint.y,strokeColor:i.activeObj.strokeSettings.strokeColor,strokeWidth:this.penStrokeWidth,points:null},o={cancel:!1,action:"draw-start",previousShapeSettings:s,currentShapeSettings:s};this.triggerShapeChanging(o)},e.prototype.freehandUpHandler=function(e,t,i){var s=t.getBoundingClientRect(),o=this.parent;sf.base.EventHandler.remove(t,"mousemove touchmove",this.freehandMoveHandler),0===o.points.length&&("mouseup"===e.type?this.processPoint(e.clientX-s.left,e.clientY-s.top,!0,i):"touchend"===e.type&&e.changedTouches?this.processPoint(e.changedTouches[0].clientX-s.left,e.changedTouches[0].clientY-s.top,!0,i):this.isFreehandPointMoved||this.processPoint(this.freehandDownPoint.x-s.left,this.freehandDownPoint.y-s.top,!0,i)),i.closePath();var r=sf.base.extend({},o.cropObj,{},!0),a={currObj:{}};o.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}});var l=a.currObj;l.objColl=sf.base.extend([],o.objColl,[],!0),l.pointColl=sf.base.extend([],o.pointColl,[],!0),l.afterCropActions=sf.base.extend([],o.afterCropActions,[],!0);var h={selPointColl:null};o.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:h}}),l.selPointColl=sf.base.extend([],h.selPointColl,[],!0);var d=o.freehandCounter;o.pointColl[d]={points:sf.base.extend([],o.points),strokeColor:o.activeObj.strokeSettings.strokeColor,strokeWidth:this.penStrokeWidth,flipState:o.transform.currFlipState,id:"pen_"+(this.currFHDIdx+1)},o.points=[],this.dummyPoints=[],this.selPointColl[d]={points:sf.base.extend([],this.selPoints)},this.selPoints=[],this.pointCounter=0,o.freehandCounter++,this.isFreehandDrawing=!1,o.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"freehand-draw",previousObj:l,previousObjColl:l.objColl,previousPointColl:l.pointColl,previousSelPointColl:l.selPointColl,previousCropObj:r,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}});var c={id:"pen_"+(this.currFHDIdx+1),type:n.FreehandDraw,startX:this.freehandDownPoint.x,startY:this.freehandDownPoint.y,strokeColor:o.activeObj.strokeSettings.strokeColor,strokeWidth:this.penStrokeWidth,points:o.pointColl[this.currFHDIdx].points},p={cancel:!1,action:"draw-end",previousShapeSettings:c,currentShapeSettings:c};this.triggerShapeChanging(p),this.currFHDIdx++},e.prototype.freehandMoveHandler=function(e){this.isFreehandPointMoved=!0;var t,i,n=this.parent.upperCanvas.getBoundingClientRect();"mousemove"===e.type?(t=e.clientX-n.left,i=e.clientY-n.top):(t=e.touches[0].clientX-n.left,i=e.touches[0].clientY-n.top),this.isFreehandDrawing&&(this.upperContext.fillStyle=this.parent.activeObj.strokeSettings.strokeColor,this.processPoint(t,i,!1,this.upperContext))},e.prototype.processPoint=function(e,t,i,n){var s,o,r,a,l=this.parent,h=this.point(e,t,(new Date).getTime()),d=!!(h=l.points.length>0&&l.points[l.points.length-1])&&this.distanceTo(h)<=5;if(this.selPoints.push({x:e,y:t,ratioX:(e-l.img.destLeft)/l.img.destWidth,ratioY:(t-l.img.destTop)/l.img.destHeight,time:this.fhdObj.time}),!h||!h||!d||i){if(this.fhdObj.time=(new Date).getTime(),l.points.push({x:e,y:t,ratioX:(e-l.img.destLeft)/l.img.destWidth,ratioY:(t-l.img.destTop)/l.img.destHeight,time:this.fhdObj.time}),this.dummyPoints.push({x:e,y:t,ratioX:(e-l.img.destLeft)/l.img.destWidth,ratioY:(t-l.img.destTop)/l.img.destHeight,time:this.fhdObj.time}),this.dummyPoints.length>2){3===this.dummyPoints.length&&this.dummyPoints.unshift(this.dummyPoints[0]);var c=this.dummyPoints[0],p=this.dummyPoints[1],u=this.dummyPoints[2],f=this.dummyPoints[3];s=this.calcCurveCP(c,p,u).controlPoint2,o=this.calcCurveCP(p,u,f).controlPoint1,r=this.dummyPoints[1],a=this.dummyPoints[2];var g=.5,m=5;sf.base.isNullOrUndefined(this.penStrokeWidth)||(g=m=this.penStrokeWidth),this.startDraw(n,s,o,r,a,g,m),this.pointCounter++,this.dummyPoints.shift()}if(i){s=o=r=a={x:e,y:t,time:(new Date).getTime()};g=.5,m=5;sf.base.isNullOrUndefined(this.penStrokeWidth)||(g=m=this.penStrokeWidth),this.startDraw(n,s,o,r,a,g,m)}}},e.prototype.calcCurveCP=function(e,t,i){t||(t=e),i||(i=t);var n=e.x-t.x,s=e.y-t.y,o=t.x-i.x,r=t.y-i.y,a=(e.x+t.x)/2,l=(e.y+t.y)/2,h=(t.x+i.x)/2,d=(t.y+i.y)/2,c=Math.sqrt(n*n+s*s),p=Math.sqrt(o*o+r*r),u=p/(c+p),f=h+(a-h)*u,g=d+(l-d)*u,m=t.x-f,v=t.y-g;return{controlPoint1:this.point(a+m,l+v,0),controlPoint2:this.point(h+m,d+v,0)}},e.prototype.point=function(e,t,i){return this.fhdObj.pointX=e,this.fhdObj.pointY=t,{x:this.fhdObj.pointX,y:this.fhdObj.pointY,time:i}},e.prototype.startDraw=function(e,t,i,n,s,o,r){var a;a=.7*(a=this.pointVelocity(n))+(1-.7)*this.fhdObj.lastVelocity;var l=Math.max(r/1.7,o);this.drawCurve(this.fhdObj.time,l,e,t,i,n,s,r),this.fhdObj.lastVelocity=a,this.fhdObj.time=l},e.prototype.pointVelocity=function(e){return this.fhdObj.time!==e.time?this.distanceTo(e)/(this.fhdObj.time-e.time):0},e.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.fhdObj.pointX-e.x,2)+Math.pow(this.fhdObj.pointY-e.y,2))},e.prototype.drawCurve=function(e,t,i,n,s,o,r,a){var l,h,d,c,p,u,f,g,m,v,b=t-e,y=this.bezierLength(n,s,o,r),C=2*Math.ceil(y);for(i.beginPath(),h=0;h<C;h++)p=(c=(d=h/C)*d)*d,m=(g=(f=(u=1-d)*u)*u)*o.x,m+=3*f*d*n.x,m+=3*u*c*s.x,m+=p*r.x,v=g*o.y,v+=3*f*d*n.y,v+=3*u*c*s.y,v+=p*r.y,l=Math.min(e+p*b,a),this.drawArc(m,v,l,i);i.closePath(),i.fill()},e.prototype.bezierLength=function(e,t,i,n){var s,o,r,a,l,h,d,c,p=0;for(s=0;s<=10;s++)o=s/10,r=this.bezierPoint(o,i.x,e.x,t.x,n.x),a=this.bezierPoint(o,i.y,e.y,t.y,n.y),s>0&&(d=r-l,c=a-h,p+=Math.sqrt(d*d+c*c)),l=r,h=a;return p},e.prototype.bezierPoint=function(e,t,i,n,s){return t*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+s*e*e*e},e.prototype.drawArc=function(e,t,i,n){var s=this.parent.img;(e>s.destLeft&&t>s.destTop&&e<s.destLeft+s.destWidth&&t<s.destTop+s.destHeight||n!==this.lowerContext&&n!==this.upperContext)&&(n.moveTo(e,t),n.arc(e,t,i,0,2*Math.PI,!1))},e.prototype.freehandRedraw=function(e,t){var i=this.parent,n=e.filter;if(e.filter="none",t&&(i.pointColl[i.freehandCounter]={points:t,strokeColor:i.activeObj.strokeSettings.strokeColor,strokeWidth:this.penStrokeWidth,flipState:i.transform.currFlipState},i.freehandCounter++),i.freehandCounter>0){for(var s=0;s<i.freehandCounter;s++){i.points=sf.base.extend([],i.pointColl[s].points),this.pointCounter=0;var o=i.points.length,r=void 0,a=void 0,l=void 0,h=void 0,d=void 0,c=void 0;o>0&&(e.fillStyle=i.pointColl[s].strokeColor,d=c=this.penStrokeWidth=i.pointColl[s].strokeWidth),1===o&&(r=a=l=h=i.points[0],this.startDraw(e,r,a,l,h,d,c));for(var p=0;p<o-3;p++)i.points[p+1]&&i.points[p+2]&&i.points[p+2]&&(r=this.calcCurveCP(i.points[p+0],i.points[p+1],i.points[p+2]).controlPoint2,a=this.calcCurveCP(i.points[p+1],i.points[p+2],i.points[p+3]).controlPoint1,l=0===p?i.points[p]:i.points[p+1],h=i.points[p+2],this.startDraw(e,r,a,l,h,d,c));e.closePath()}e===this.lowerContext&&(i.notify("draw",{prop:"applyFrame",value:{ctx:this.lowerContext,frame:i.frameObj.type,preventImg:!0}}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height))}e.filter=n},e.prototype.getSqPtFD=function(e,t){var i={startX:0,startY:0,endX:0,endY:0,width:0,height:0},n=sf.base.extend([],this.selPointColl[e].points,[]);this.parent.points=sf.base.extend([],this.parent.pointColl[e].points),this.pointCounter=0;for(var s=n.length,o=0;o<s;o++)0===i.startX&&0===i.startY&&0===i.endX&&0===i.endY?(i.startX=n[o].x,i.startY=n[o].y,i.endX=n[o].x,i.endY=n[o].y):(i.startX=Math.min(i.startX,n[o].x),i.startY=Math.min(i.startY,n[o].y),i.endX=Math.max(i.endX,n[o].x),i.endY=Math.max(i.endY,n[o].y));return i.startX-=this.penStrokeWidth,i.startY-=this.penStrokeWidth,i.endX+=this.penStrokeWidth,i.endY+=this.penStrokeWidth,i.width=i.endX-i.startX,i.height=i.endY-i.startY,t&&(t.activePoint=i),i},e.prototype.applyPenDraw=function(){var e=this.parent;"freehanddraw"===e.currObjType.shape&&(e.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}}),e.upperCanvas.style.cursor=e.cursor="default",e.currObjType.shape=""),e.notify("shape",{prop:"clearActObj"})},e.prototype.applyFhd=function(){var e=this.parent,t=e.pointColl[this.fhdSelIdx];"#42a5f5"===t.strokeColor&&(t.strokeColor=this.tempFHDStyles.strokeColor),sf.base.isBlazor()||e.notify("toolbar",{prop:"setSelectedFreehandColor",value:{color:"#42a5f5"}}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),sf.base.isBlazor()||e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),t&&(t.isSelected=!1),e.notify("selection",{prop:"resetFreehandDrawVariables"}),this.fhdHovIdx=this.fhdSelIdx=null},e.prototype.cancelFhd=function(){var e=this.parent,t=e.pointColl[this.fhdSelIdx];sf.base.isBlazor()||e.notify("toolbar",{prop:"setSelectedFreehandColor",value:{color:"#42a5f5"}}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),this.lowerContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),this.pointCounter=0,t&&(t.strokeColor=this.tempFHDStyles.strokeColor,t.strokeWidth=this.tempFHDStyles.strokeWidth,t.isSelected=!1),this.fhdHovIdx=this.fhdSelIdx=this.fhdSelID=null,e.notify("selection",{prop:"resetFreehandDrawVariables"}),e.activeObj.strokeSettings.strokeColor=this.tempFHDStyles.strokeColor,e.activeObj.strokeSettings.strokeWidth=this.penStrokeWidth=this.tempFHDStyles.strokeWidth,this.tempFHDStyles={strokeColor:null,strokeWidth:null,fillColor:null},e.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),sf.base.isBlazor()?e.updateToolbar(e.element,"imageLoaded"):e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})},e.prototype.selectFhd=function(e){var t=this.parent;if(t.notify("selection",{prop:"setFreehandDrawEditing",onPropertyChange:!1,value:{bool:!0}}),e||0===e){if(!this.isFHDIdx(e))return;this.fhdSelIdx=this.fhdHovIdx=e,this.hoverFhd(),t.upperCanvas.style.cursor=t.cursor="pointer"}this.fhdSelIdx=this.fhdHovIdx;var i=t.pointColl[this.fhdSelIdx];i.isSelected=!0,this.fhdSelID=i.id,"#42a5f5"!==i.strokeColor&&(t.activeObj.strokeSettings.strokeColor=this.tempFHDStyles.strokeColor=i.strokeColor),t.activeObj.strokeSettings.strokeWidth=this.tempFHDStyles.strokeWidth=t.pointColl[this.fhdHovIdx].strokeWidth;var s={bool:!1};if(t.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:s}}),s.bool){var o={id:"pen_"+(this.fhdSelIdx+1),type:n.FreehandDraw,startX:i.points[0].x,startY:i.points[0].y,strokeColor:i.strokeColor,strokeWidth:i.strokeWidth,points:i.points,opacity:i.opacity},r={cancel:!1,action:"select",previousShapeSettings:o,currentShapeSettings:o};this.triggerShapeChanging(r)}else t.okBtn();sf.base.isBlazor()&&t.getShapeValue("pen")},e.prototype.deleteFhd=function(e,t){var i=this.parent;if(this.isFHDIdx(e)){this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height);var n=sf.base.extend({},i.pointColl,{},!0),s=sf.base.extend({},this.selPointColl,{},!0);i.pointColl={},this.selPointColl={};var o=0;if(sf.base.isNullOrUndefined(t))for(var r=0;r<i.freehandCounter;r++)r!==e&&(i.pointColl[o]=n[r],this.selPointColl[o]=s[r],o++);else for(r=0;r<i.freehandCounter;r++)parseInt(n[r].id.split("_")[1],10)-1!==e&&(i.pointColl[o]=n[r],this.selPointColl[o]=s[r],o++);i.freehandCounter-=1,this.fhdHovIdx=this.fhdSelIdx=null,i.notify("selection",{prop:"resetFreehandDrawVariables"}),i.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),sf.base.isBlazor()||i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})}},e.prototype.zoomX=function(e){return e*this.parent.img.destWidth+this.parent.img.destLeft},e.prototype.zoomY=function(e){return e*this.parent.img.destHeight+this.parent.img.destTop},e.prototype.zoomFHDColl=function(e){var t=this.parent,i={startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight};t.notify("shape",{prop:"straightenShapes",onPropertyChange:!1});for(var n=0;n<t.freehandCounter;n++){t.points=sf.base.extend([],t.pointColl[n].points,[]),this.pointCounter=0;for(var s=t.points.length,o=0;o<s;o++){var r=t.points[o];r.x=this.zoomX(r.ratioX),r.y=this.zoomY(r.ratioY)}}this.updateFHDCurPts(),this.straightenPoint.x&&this.straightenPoint.y&&(this.straightenPoint.x=this.zoomX(this.straightenPoint.ratioX),this.straightenPoint.y=this.zoomY(this.straightenPoint.ratioY)),0!==t.transform.straighten&&t.notify("shape",{prop:"straightenFHD",onPropertyChange:!1}),t.img.destLeft=i.startX,t.img.destTop=i.startY,t.img.destWidth=i.width,t.img.destHeight=i.height,sf.base.isNullOrUndefined(e)&&this.freehandRedraw(this.lowerContext,null)},e.prototype.updateFHDCurPts=function(){for(var e=this.parent,t=0;t<e.freehandCounter;t++)if(this.selPointColl[t]){this.selPoints=sf.base.extend([],this.selPointColl[t].points,[]),this.pointCounter=0;for(var i=this.selPoints.length,n=0;n<i;n++){var s=this.selPoints[n];s.x=this.zoomX(s.ratioX),s.y=this.zoomY(s.ratioY)}}},e.prototype.rotateFhdColl=function(){for(var e=this.parent,t=e.img,i=t.destLeft,n=t.destTop,s=t.destWidth,o=t.destHeight,r=0;r<e.freehandCounter;r++){e.points=sf.base.extend([],e.pointColl[r].points,[]),this.pointCounter=0;for(var a=e.points.length,l=0;l<a;l++){(h=e.points[l]).y=n+o*h.ratioX,h.x=i+s-s*h.ratioY,h.ratioX=(h.x-i)/s,h.ratioY=(h.y-n)/o}}for(r=0;r<e.freehandCounter;r++)if(this.selPointColl[r]){this.selPoints=sf.base.extend([],this.selPointColl[r].points,[]),this.pointCounter=0;for(a=this.selPoints.length,l=0;l<a;l++){var h;(h=this.selPoints[l]).y=n+o*h.ratioX,h.x=i+s-s*h.ratioY,h.ratioX=(h.x-i)/s,h.ratioY=(h.y-n)/o}}this.updateFHDCurPts()},e.prototype.flipFHDColl=function(e){var t=e.toLowerCase();if("horizontal"===t)this.pointsHorizontalFlip();else if("vertical"===t)this.pointsVerticalFlip();else{this.pointsHorizontalFlip();for(var i=0;i<this.parent.freehandCounter;i++)this.parent.pointColl[i].shapeFlip="";this.pointsVerticalFlip()}},e.prototype.pointsHorizontalFlip=function(){for(var e=this.parent,t=e.img,i=t.destLeft,n=t.destTop,s=t.destWidth,o=t.destHeight,r=0;r<e.freehandCounter;r++)if(e.pointColl[r].shapeFlip!==e.transform.currFlipState){e.points=sf.base.extend([],e.pointColl[r].points,[]),this.pointCounter=0;for(var a=e.points.length,l=0;l<a;l++){(h=e.points[l]).x<=i+s/2?h.x=i+s-(h.x-i):h.x>=i+s/2&&(h.x=i+(i+s-h.x)),h.ratioX=(h.x-i)/s,h.ratioY=(h.y-n)/o}e.pointColl[r].shapeFlip=e.transform.currFlipState}for(r=0;r<e.freehandCounter;r++)if(this.selPointColl[r]&&this.selPointColl[r].shapeFlip!==e.transform.currFlipState){this.selPoints=sf.base.extend([],this.selPointColl[r].points,[]),this.pointCounter=0;for(a=this.selPoints.length,l=0;l<a;l++){var h;(h=this.selPoints[l]).x<=i+s/2?h.x=i+s-(h.x-i):h.x>=i+s/2&&(h.x=i+(i+s-h.x)),h.ratioX=(h.x-i)/s,h.ratioY=(h.y-n)/o}}this.updateFHDCurPts()},e.prototype.pointsVerticalFlip=function(){for(var e=this.parent,t=e.img,i=t.destLeft,n=t.destTop,s=t.destWidth,o=t.destHeight,r=0;r<e.freehandCounter;r++)if(e.pointColl[r].shapeFlip!==e.transform.currFlipState){e.points=sf.base.extend([],e.pointColl[r].points,[]),this.pointCounter=0;for(var a=e.points.length,l=0;l<a;l++){(h=e.points[l]).y<=n+o/2?h.y=n+o-(h.y-n):h.y>=n+o/2&&(h.y=n+(n+o-h.y)),h.ratioX=(h.x-i)/s,h.ratioY=(h.y-n)/o}e.pointColl[r].shapeFlip=e.transform.currFlipState}for(r=0;r<e.freehandCounter;r++)if(this.selPointColl[r]&&this.selPointColl[r].shapeFlip!==e.transform.currFlipState){this.selPoints=sf.base.extend([],this.selPointColl[r].points,[]),this.pointCounter=0;for(a=this.selPoints.length,l=0;l<a;l++){var h;(h=this.selPoints[l]).y<=n+o/2?h.y=n+o-(h.y-n):h.y>=n+o/2&&(h.y=n+(n+o-h.y)),h.ratioX=(h.x-i)/s,h.ratioY=(h.y-n)/o}}this.updateFHDCurPts()},e.prototype.updateFHDColl=function(e){var t=this.parent,i={startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight};t.notify("shape",{prop:"straightenShapes",onPropertyChange:!1});for(var n=t.img,s=n.destLeft,o=n.destTop,r=n.destWidth,a=n.destHeight,l=0,h=t.objColl.length;l<h;l++){var d=t.objColl[l];if("line"===d.shape||"arrow"===d.shape)t.notify("shape",{prop:"straightenShapePoints",value:{obj:d,isReverse:!0}});else if("path"===d.shape){var c=t.transform.straighten;t.transform.straighten=-t.transform.straighten,t.notify("shape",{prop:"straightenPath",onPropertyChange:!1,value:{obj:d}}),t.transform.straighten=c}if(d.imageRatio={startX:(d.activePoint.startX-s)/r,startY:(d.activePoint.startY-o)/a,endX:(d.activePoint.endX-s)/r,endY:(d.activePoint.endY-o)/a,width:r/d.activePoint.width,height:a/d.activePoint.height},"path"===d.shape)for(var p=0,u=d.pointColl.length;p<u;p++)d.pointColl[p].ratioX=(d.pointColl[p].x-s)/r,d.pointColl[p].ratioY=(d.pointColl[p].y-o)/a;t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})}if(t.freehandCounter>0&&0!==t.transform.straighten){c=t.transform.straighten;t.transform.straighten=-t.transform.straighten,t.notify("shape",{prop:"straightenFHD",onPropertyChange:!1}),t.transform.straighten=c}for(var f=0;f<t.freehandCounter;f++){t.points=sf.base.extend([],t.pointColl[f].points,[]),this.pointCounter=0;for(var g=t.points.length,m=0;m<g;m++){(v=t.points[m]).ratioX=(v.x-s)/r,v.ratioY=(v.y-o)/a}}for(f=0;f<t.freehandCounter;f++)if(this.selPointColl[f]){this.selPoints=sf.base.extend([],this.selPointColl[f].points,[]),this.pointCounter=0;for(g=this.selPoints.length,m=0;m<g;m++){var v;(v=this.selPoints[m]).ratioX=(v.x-s)/r,v.ratioY=(v.y-o)/a}}this.straightenPoint.x&&this.straightenPoint.y&&(this.straightenPoint.ratioX=(this.straightenPoint.x-s)/r,this.straightenPoint.ratioY=(this.straightenPoint.y-o)/a),t.img.destLeft=i.startX,t.img.destTop=i.startY,t.img.destWidth=i.width,t.img.destHeight=i.height,t.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:e}}),t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:e}})},e.prototype.panFHDColl=function(e,t,i){for(var n=this.parent,s=0;s<n.freehandCounter;s++){n.points=sf.base.extend([],n.pointColl[s].points,[]),this.pointCounter=0;for(var o=n.points.length,r=0;r<o;r++){var a=n.points[r];""===i||"vertical"===i?a.x+=e:a.x-=e,""===i||"horizontal"===i?a.y+=t:a.y-=t}}for(s=0;s<n.freehandCounter;s++)if(this.selPointColl[s]){this.selPoints=sf.base.extend([],this.selPointColl[s].points,[]),this.pointCounter=0;for(o=this.selPoints.length,r=0;r<o;r++){a=this.selPoints[r];""===i||"vertical"===i?a.x+=e:a.x-=e,""===i||"horizontal"===i?a.y+=t:a.y-=t}}this.straightenPoint.x&&this.straightenPoint.y&&(""===i||"vertical"===i?this.straightenPoint.x+=e:this.straightenPoint.x-=e,""===i||"horizontal"===i?this.straightenPoint.y+=t:this.straightenPoint.y-=t),this.freehandRedraw(this.lowerContext,null)},e.prototype.freeHandDraw=function(e){var t=this.parent;if(e){if(t.points=[],this.dummyPoints=[],t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.togglePen=!0,t.upperCanvas.style.cursor=t.cursor="crosshair",t.upperCanvas.style.display="block",sf.base.isNullOrUndefined(t.activeObj.strokeSettings)){var i={strokeSettings:{}};t.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:i}}),t.activeObj.strokeSettings=i.strokeSettings}sf.base.isNullOrUndefined(t.activeObj.strokeSettings.strokeWidth)&&(t.activeObj.strokeSettings.strokeWidth=2),sf.base.isBlazor()?t.updateToolbar(t.element,"pen"):t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})}else t.upperCanvas.style.cursor=t.cursor="default",t.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}}),sf.base.isBlazor()?t.updateToolbar(t.element,"imageLoaded"):(t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),t.notify("toolbar",{prop:"setCurrentToolbar",value:{type:"main"}})),t.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!1}})},e.prototype.isFHDIdx=function(e,t){for(var i=!1,n=0;n<this.parent.freehandCounter;n++)if(this.parent.pointColl[n].id&&parseInt(this.parent.pointColl[n].id.split("_")[1],10)-1===e){i=!0;break}return t&&(t.isIndex=i),i},e.prototype.updateCropPtsForSel=function(){for(var e=this.parent,t=e.activeObj.activePoint,i=0;i<e.freehandCounter;i++){var n={selPointColl:sf.base.extend([],this.selPointColl)};if(n.selPointColl[i]){this.selPoints=sf.base.extend([],n.selPointColl[i].points,[]),this.pointCounter=0;for(var s=this.selPoints.length,o=0;o<s;o++){var r=this.selPoints[o];r.ratioX=(r.x-t.startX)/t.width,r.ratioY=(r.y-t.startY)/t.height}}}},e.prototype.triggerShapeChanging=function(e){var t=this,i=this.parent,n=i.pointColl[this.fhdSelIdx];sf.base.isBlazor()&&i.events&&!0===i.events.shapeChanging.hasDelegate?i.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",e,null).then((function(e){if(t.penStrokeWidth=e.currentShapeSettings.strokeWidth,i.activeObj.strokeSettings.strokeColor!==e.currentShapeSettings.strokeColor){i.activeObj.strokeSettings.strokeColor=e.currentShapeSettings.strokeColor;var s=i.element.querySelector(".e-ie-toolbar-e-pen-color .e-dropdownbtn-preview");s&&(s.style.background=e.currentShapeSettings.strokeColor)}t.fhdSelID&&(n.strokeColor=e.currentShapeSettings.strokeColor,n.strokeWidth=e.currentShapeSettings.strokeWidth,n.points=e.currentShapeSettings.points,n.opacity=e.currentShapeSettings.opacity),"select"===e.action&&(t.freehandRedraw(t.upperContext),i.updateToolbar(i.element,"imageLoaded"),i.updateToolbar(i.element,"pen"))})):(i.trigger("shapeChanging",e),this.penStrokeWidth=e.currentShapeSettings.strokeWidth,i.activeObj.strokeSettings.strokeColor!==e.currentShapeSettings.strokeColor&&(i.activeObj.strokeSettings.strokeColor=e.currentShapeSettings.strokeColor,i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})),this.fhdSelID&&(n.strokeColor=e.currentShapeSettings.strokeColor,n.strokeWidth=e.currentShapeSettings.strokeWidth,n.points=e.currentShapeSettings.points,n.opacity=e.currentShapeSettings.opacity),"select"===e.action&&(this.freehandRedraw(this.upperContext),i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})))},e.prototype.setCenterSelPoints=function(){var e=this.parent,t={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};e.notify("shape",{prop:"straightenShapes",onPropertyChange:!1});var i=e.img,n=i.destLeft,s=i.destTop,o=i.destWidth,r=i.destHeight,a=e.activeObj.activePoint;(sf.base.isNullOrUndefined(this.prevStraightenObj)||JSON.stringify(this.prevStraightenObj.activePoint)!==JSON.stringify(a))&&(this.straightenPoint={x:a.startX+a.width/2,y:a.startY+a.height/2,ratioX:(a.startX+a.width/2-n)/o,ratioY:(a.startY+a.height/2-s)/r},this.prevStraightenObj=sf.base.extend({},e.activeObj,{},!0),this.straightenPointAngle=e.transform.straighten),e.img.destLeft=t.startX,e.img.destTop=t.startY,e.img.destWidth=t.width,e.img.destHeight=t.height},e}(),v=function(){function e(e){this.diffPoint={x:0,y:0},this.oldPoint={},this.isTouch=!1,this.isObjSelected=!1,this.isFhdPoint=!1,this.dragPoint={startX:0,startY:0,endX:0,endY:0},this.isShapeInserted=!1,this.tempActiveObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]},this.isFirstMove=!1,this.startTouches=[],this.tempTouches=[],this.currMousePoint={x:0,y:0},this.cursorTargetId="",this.isPreventDragging=!1,this.dragElement="",this.textRow=1,this.mouseDownPoint={x:0,y:0},this.previousPoint={x:0,y:0},this.zoomType="Toolbar",this.isInitialTextEdited=!1,this.dragCanvas=!1,this.isFhdCustomized=!1,this.touchEndPoint={},this.isFhdEditing=!1,this.currentDrawingShape="",this.initialPrevObj={},this.touchTime=0,this.resizedElement="",this.isImageClarity=!0,this.isPinching=!1,this.isSliding=!1,this.parent=e,this.addEventListener()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("selection",this.selection,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("selection",this.selection),this.parent.off("destroyed",this.destroy)},e.prototype.selection=function(e){var t=this.parent;switch(this.updatePrivateVariables(),e.prop){case"mouse-up":this.selMouseUpEvent();break;case"setCursor":this.setCursor(e.value.x,e.value.y);break;case"updateActivePoint":this.updateActivePoint(e.value.x,e.value.y,e.value.isCropSelection);break;case"updateCursorStyles":this.updateCursorStyles(e.value.x,e.value.y,e.value.type);break;case"setTextSelection":this.setTextSelection(e.value.width,e.value.height);break;case"setActivePoint":this.setActivePoint(e.value.startX,e.value.startY);break;case"clearSelection":this.clearSelection();break;case"calcShapeRatio":this.calcShapeRatio(e.value.x,e.value.y,e.value.imgWidth,e.value.imgHeight);break;case"applyCurrShape":this.applyCurrShape(e.value.isShapeClick);break;case"tab":this.performTabAction();break;case"setDragDirection":this.setDragDirection(e.value.width,e.value.height);break;case"clearUpperCanvas":this.isTouch&&setTimeout((function(){t.upperCanvas.getContext("2d").clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height)}),550);break;case"resetFreehandDrawVariables":this.isFhdEditing=this.isFhdPoint=!1;break;case"isShapeInserted":this.isShapeInserted=e.value.bool;break;case"redrawShape":this.redrawShape(e.value.obj);break;case"setTextBoxStylesToActObj":this.setTextBoxStylesToActObj();break;case"mouseDownEventHandler":this.mouseDownEventHandler(e.value.e);break;case"mouseMoveEventHandler":this.mouseMoveEventHandler(e.value.e);break;case"mouseUpEventHandler":this.mouseUpEventHandler(e.value.e);break;case"canvasMouseDownHandler":this.canvasMouseDownHandler(e.value.e);break;case"canvasMouseMoveHandler":this.canvasMouseMoveHandler(e.value.e);break;case"canvasMouseUpHandler":this.canvasMouseUpHandler(e.value.e);break;case"touchStartHandler":this.touchStartHandler(e.value.e);break;case"keyDownEventHandler":this.keyDownEventHandler(e.value.e);break;case"handleScroll":this.handleScroll(e.value.e);break;case"textKeyDown":setTimeout(this.textKeyDown.bind(this),1,e.value.e);break;case"deleteItem":this.deleteItem();break;case"updatePrevShapeSettings":this.updatePrevShapeSettings(e.value.obj);break;case"getZoomType":e.value.obj.zoomType=this.zoomType;break;case"setZoomType":this.zoomType=e.value.zoomType;break;case"setInitialTextEdit":this.isInitialTextEdited=e.value.bool;break;case"setDragCanvas":this.dragCanvas=e.value.bool;break;case"setFreehandDrawCustomized":this.isFhdCustomized=e.value.isFreehandDrawCustomized;break;case"setTouchEndPoint":this.touchEndPoint.x=e.value.x,this.touchEndPoint.y=e.value.y;break;case"getPanDown":e.value.obj.panDown=this.panDown;break;case"setPanDown":this.panDown=e.value.panDown;break;case"getFreehandDrawEditing":e.value.obj.bool=this.isFhdEditing;break;case"setFreehandDrawEditing":this.isFhdEditing=e.value.bool;break;case"getTempActObj":e.value.obj.tempObj=this.tempActiveObj;break;case"setTempActObj":this.tempActiveObj=e.value.obj;break;case"isInside":this.isInside(e.value.x,e.value.y,e.value.z1,e.value.z2,e.value.z3,e.value.z4);break;case"setDragElement":this.dragElement=e.value.value;break;case"setObjSelected":this.isObjSelected=e.value.bool;break;case"adjustActObjForLineArrow":this.adjustActObjForLineArrow(e.value.obj);break;case"findTarget":this.findTarget(e.value.x,e.value.y,e.value.type);break;case"getCurrentFlipState":this.getCurrentFlipState();break;case"setDragWidth":this.setDragWidth(e.value.width);break;case"setDragHeight":this.setDragHeight(e.value.setDragHeight);break;case"annotate":this.currentDrawingShape=e.value.shape,"text"===e.value.shape?(t.activeObj.textSettings.fontSize=100,t.activeObj.keyHistory="Enter Text",t.notify("shape",{prop:"initializeTextShape",onPropertyChange:!1,value:{text:null,fontFamily:null,fontSize:null,bold:null,italic:null,strokeColor:null}})):"path"===e.value.shape&&(t.activeObj.pointColl=[]);break;case"getCurrentDrawingShape":e.value.obj.shape=this.currentDrawingShape;break;case"setCurrentDrawingShape":this.currentDrawingShape=e.value.value;break;case"getTransRotationPoint":this.getTransRotationPoint(e.value.obj,e.value.object);break;case"adjustNEPoints":this.adjustNEPoints(e.value.rectangle,e.value.x,e.value.y,e.value.angle);break;case"adjustRotationPoints":this.adjustRotationPoints(e.value.rectangle,e.value.x,e.value.y,e.value.angle,e.value.type,e.value.elem);break;case"getResizeDirection":this.getResizeDirection(e.value.rectangle,e.value.x,e.value.y,e.value.angle);break;case"setResizedElement":this.resizedElement=e.value.value;break;case"reset":this.reset();break;case"unWireEvent":this.unwireEvent();break;case"updPtCollForShpRot":this.updPtCollForShpRot(e.value.obj);break;case"findImageRatio":this.findImageRatio(e.value.width,e.value.height,e.value.obj);break;case"getNumTextValue":this.getNumTextValue(e.value.obj);break;case"setImageClarity":this.isImageClarity=e.value.bool;break;case"upgradeImageQuality":this.upgradeImageQuality();break;case"getScaleRatio":e.value.obj.newScale=this.getScaleRatio(e.value.scale);break;case"triggerShapeChange":this.triggerShapeChange(e.value.shapeResizingArgs,e.value.shapeMovingArgs,e.value.type);break;case"limitDrag":e.value.bool=this.limitDrag(e.value.isStart);break;case"applyTransformToImg":this.applyTransformToImg(e.value.ctx);break;case"findTargetObj":e.value.obj.bool=this.findTargetObj(e.value.x,e.value.y,e.value.isCrop);break;case"setSliding":this.isSliding=e.value.bool}},e.prototype.getModuleName=function(){return"selection"},e.prototype.updatePrivateVariables=function(){var e=this.parent;e.lowerCanvas&&(this.lowerContext=e.lowerCanvas.getContext("2d")),e.upperCanvas&&(this.upperContext=e.upperCanvas.getContext("2d"))},e.prototype.reset=function(){this.diffPoint={x:0,y:0},this.oldPoint={},this.isTouch=this.isObjSelected=this.isFhdPoint=this.isShapeInserted=!1,this.dragPoint={startX:0,startY:0,endX:0,endY:0},this.tempActiveObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]},this.isFirstMove=!1,this.cursorTargetId=this.dragElement="",this.startTouches=[],this.tempTouches=[],this.currMousePoint={x:0,y:0},this.isPreventDragging=!1,this.timer=void 0,this.tempObjColl=void 0,this.textRow=1,this.mouseDownPoint={x:0,y:0},this.previousPoint={x:0,y:0},this.zoomType="Toolbar",this.isInitialTextEdited=!1,this.dragCanvas=this.isPinching=!1,this.isFhdCustomized=!1,this.touchEndPoint={},this.panDown=null,this.isSliding=!1,this.isFhdEditing=!1,this.pathAdjustedIndex=null,this.touchTime=0,this.isImageClarity=!0,this.currentDrawingShape="",this.initialPrevObj={},this.resizedElement=""},e.prototype.performTabAction=function(){var e=this.parent;if("block"===e.textArea.style.display||"inline-block"===e.textArea.style.display){var t=this.applyCurrShape(!1);e.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),t&&e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}},e.prototype.selMouseUpEvent=function(){this.oldPoint.x=void 0,this.oldPoint.y=void 0},e.prototype.getMouseCursor=function(e,t,i,n,s){var o=this.getTransRotationPoint(e),r=e.bottomCenterCircle.radius,a=s?0:2*e.topLeftCircle.radius;return t>=e.topLeftCircle.startX-a&&t<=e.topLeftCircle.startX+a&&i>=e.topLeftCircle.startY-a&&i<=e.topLeftCircle.startY+a?"nw-resize":t>=e.topLeftCircle.startX-a&&t<=e.topRightCircle.startX-a&&i>=e.topCenterCircle.startY-a&&i<=e.topCenterCircle.startY+a?"n-resize":t>=e.topRightCircle.startX-a&&t<=e.topRightCircle.startX+a&&i>=e.topRightCircle.startY-a&&i<=e.topRightCircle.startY+a?"ne-resize":t>=e.centerLeftCircle.startX-a&&t<=e.centerLeftCircle.startX+a&&i>=e.topLeftCircle.startY-a&&i<=e.bottomLeftCircle.startY-a?"w-resize":t>=e.centerRightCircle.startX-a&&t<=e.centerRightCircle.startX+a&&i>=e.topRightCircle.startY-a&&i<=e.bottomRightCircle.startY-a?"e-resize":t>=e.bottomLeftCircle.startX-a&&t<=e.bottomLeftCircle.startX+a&&i>=e.bottomLeftCircle.startY-a&&i<=e.bottomLeftCircle.startY+a?"sw-resize":t>=e.bottomLeftCircle.startX-a&&t<=e.bottomRightCircle.startX-a&&i>=e.bottomCenterCircle.startY-a&&i<=e.bottomCenterCircle.startY+a?"s-resize":t>=e.bottomRightCircle.startX-a&&t<=e.bottomRightCircle.startX+a&&i>=e.bottomRightCircle.startY-a&&i<=e.bottomRightCircle.startY+a?"se-resize":t>=e.activePoint.startX&&t<=e.activePoint.endX&&i>=e.activePoint.startY&&i<=e.activePoint.endY?n?"grab":"move":o&&!s&&t>=o.x-(r+2)&&t<=o.x+(r+2)&&i>=o.y-(r+2)&&i<=o.y+(r+2)?"grabbing":"default"},e.prototype.setCursor=function(e,t){var i=this.parent,n={bool:null};if(i.notify("toolbar",{prop:"getFrameToolbar",onPropertyChange:!1,value:{obj:n}}),i.isResize||this.isSliding||n.bool)i.upperCanvas.style.cursor="default";else{var s,o=!1;if(""===this.currentDrawingShape)if(i.currObjType.isDragging)""===this.dragElement?i.upperCanvas.style.cursor=i.cursor="move":i.upperCanvas.style.cursor=i.cursor=this.dragElement;else{if(void 0!==i.activeObj.horTopLine){void 0!==i.activeObj.shape&&(s=i.activeObj.shape.split("-")),(void 0===s&&i.currObjType.isCustomCrop||void 0!==s&&"crop"===s[0])&&(o=!0),!o&&i.togglePan&&(i.lowerCanvas.style.cursor=i.upperCanvas.style.cursor=i.cursor="grab");var r=i.upperCanvas.style.cursor,a=sf.base.extend({},i.activeObj,{},!0);this.cursorTargetId=a.currIndex;var l=void 0;if((l=0===a.shapeDegree?i.transform.degree:i.transform.degree-a.shapeDegree)<0&&(l=360+l),"line"===a.shape||"arrow"===a.shape)this.setCursorForLineArrow(a,e,t,i.upperCanvas);else if("path"===a.shape)this.setCursorForPath(a,e,t,i.upperCanvas);else if(sf.base.isNullOrUndefined(a.rotatedAngle)||0===a.rotatedAngle){i.upperCanvas.style.cursor=i.cursor=this.getMouseCursor(a,e,t,o,!1);"text"===a.shape&&["n-resize","s-resize","e-resize","w-resize"].indexOf(i.cursor)>-1&&(i.upperCanvas.style.cursor=i.cursor="move")}else this.setCursorForRotatedObject(a,e,t,i.upperCanvas);"default"===r&&"default"===i.cursor&&o&&(i.upperCanvas.style.cursor=i.cursor="grab"),"grab"===r&&"default"===i.cursor&&(i.upperCanvas.style.cursor=i.cursor="grab")}else i.togglePan&&!i.togglePen?i.lowerCanvas.style.cursor=i.upperCanvas.style.cursor=i.cursor="grab":i.currObjType.isCustomCrop||i.togglePen?i.upperCanvas.style.cursor=i.cursor="crosshair":i.upperCanvas.style.cursor=i.cursor="default";if("default"===i.cursor||"grab"===i.cursor){r=i.upperCanvas.style.cursor;i.objColl.length>0&&("grab"!==i.cursor||!o)&&this.setCursorFromObj(e,t,i.objColl,i.upperCanvas,o),"grab"===r&&"default"===i.cursor&&(i.upperCanvas.style.cursor=i.cursor="grab")}"default"!==i.cursor&&"grab"!==i.cursor||!i.pointColl[0]||"grab"===i.cursor&&o||i.currObjType.isDragging||i.currObjType.isResize||this.setCursorForFreehandDrawing(e,t,i.upperCanvas)}else i.upperCanvas.style.cursor=i.cursor="crosshair"}},e.prototype.setCursorForPath=function(e,t,i,n){this.setCursorForLineArrow(e,t,i,n);var s=this.parent;if("default"===s.cursor)for(var o=sf.base.extend({},e,null,!0),r=!1,a=1,l=e.pointColl.length;a<l&&!r;a++){o.activePoint.startX=e.pointColl[a-1].x,o.activePoint.startY=e.pointColl[a-1].y,o.activePoint.endX=e.pointColl[a].x,o.activePoint.endY=e.pointColl[a].y,s.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:o}});for(var h=e.topLeftCircle.radius,d=0,c=o.pointColl.length;d<c;d++){var p=o.pointColl[d];if(!sf.base.isNullOrUndefined(p.x-2*h)&&!sf.base.isNullOrUndefined(p.x+2*h)&&!sf.base.isNullOrUndefined(p.y-2*h)&&!sf.base.isNullOrUndefined(p.y+2*h)&&t>=p.x-2*h&&t<=p.x+2*h&&i>=p.y-2*h&&i<=p.y+2*h){n.style.cursor=s.cursor="move",r=!0;break}n.style.cursor=s.cursor="default"}}return s.cursor},e.prototype.setCursorForLineArrow=function(e,t,i,n){for(var s,o=e.topLeftCircle.radius,r=0,a=e.pointColl.length;r<a;r++){var l=e.pointColl[r];if(t>=l.x-2*o&&t<=l.x+2*o&&i>=l.y-2*o&&i<=l.y+2*o){n.style.cursor=this.parent.cursor="move",s=r;break}n.style.cursor=this.parent.cursor="default"}return s},e.prototype.setCursorForRotatedObject=function(e,t,i,n){this.resizedElement="";var s=this.parent,o=e.bottomCenterCircle.radius,r=e.horTopLinePointColl[Math.round(e.horTopLinePointColl.length/2)],a=e.horTopLinePointColl[Math.round(e.horTopLinePointColl.length-1)],l=e.verLeftLinePointColl[Math.round(e.verLeftLinePointColl.length/2)],h=e.verRightLinePointColl[Math.round(e.verRightLinePointColl.length/2)],d=e.horBottomLinePointColl[Math.round(e.horBottomLinePointColl.length/2)],c=e.horBottomLinePointColl[Math.round(e.horBottomLinePointColl.length-1)],p=e.rotationCirclePointColl,u=e.horTopLinePointColl[0],f=e.horBottomLinePointColl[0];if(t>=u.x-(o+2)&&t<=u.x+(o+2)&&i>=u.y-(o+2)&&i<=u.y+(o+2))n.style.cursor=s.cursor="nw-resize";else if(t>=r.x-5&&t<=r.x+5&&i>=r.y-5&&i<=r.y+5)n.style.cursor=s.cursor=this.resizedElement="n-resize";else if(t>=a.x-(o+2)&&t<=a.x+(o+2)&&i>=a.y-(o+2)&&i<=a.y+(o+2))n.style.cursor=s.cursor="ne-resize";else if(t>=l.x-5&&t<=l.x+5&&i>=l.y-5&&i<=l.y+5)n.style.cursor=s.cursor=this.resizedElement="w-resize";else if(t>=h.x-5&&t<=h.x+5&&i>=h.y-5&&i<=h.y+5)n.style.cursor=s.cursor=this.resizedElement="e-resize";else if(t>=f.x-(o+2)&&t<=f.x+(o+2)&&i>=f.y-(o+2)&&i<=f.y+(o+2))n.style.cursor=s.cursor="sw-resize";else if(t>=d.x-5&&t<=d.x+5&&i>=d.y-5&&i<=d.y+5)n.style.cursor=s.cursor=this.resizedElement="s-resize";else if(t>=c.x-(o+2)&&t<=c.x+(o+2)&&i>=c.y-(o+2)&&i<=c.y+(o+2))n.style.cursor=s.cursor="se-resize";else if(p&&t>=p.x-(o+2)&&t<=p.x+(o+2)&&i>=p.y-(o+2)&&i<=p.y+(o+2))n.style.cursor=s.cursor="grabbing";else{n.style.cursor=s.cursor="default",this.getRectanglePoints(e.activePoint.startX,e.activePoint.startY,e.activePoint.width,e.activePoint.height,e.rotatedAngle*(180/Math.PI),t,i)&&(n.style.cursor=s.cursor="move")}if("default"===s.cursor)for(var g=0,m=e.horTopLinePointColl.length;g<m;g++){var v=e.horTopLinePointColl[g];if(t>=v.x-5&&t<=v.x+5&&i>=v.y-5&&i<=v.y+5){n.style.cursor=s.cursor=this.resizedElement="n-resize";break}}if("default"===s.cursor)for(g=0,m=e.horBottomLinePointColl.length;g<m;g++){var b=e.horBottomLinePointColl[g];if(t>=b.x-5&&t<=b.x+5&&i>=b.y-5&&i<=b.y+5){n.style.cursor=s.cursor=this.resizedElement="s-resize";break}}if("default"===s.cursor)for(g=0,m=e.verLeftLinePointColl.length;g<m;g++){var y=e.verLeftLinePointColl[g];if(t>=y.x-5&&t<=y.x+5&&i>=y.y-5&&i<=y.y+5){n.style.cursor=s.cursor=this.resizedElement="w-resize";break}}if("default"===s.cursor)for(g=0,m=e.verRightLinePointColl.length;g<m;g++){var C=e.verRightLinePointColl[g];if(t>=C.x-5&&t<=C.x+5&&i>=C.y-5&&i<=C.y+5){n.style.cursor=s.cursor=this.resizedElement="e-resize";break}}return this.adjustCursorStylesForRotatedState(e),s.cursor},e.prototype.adjustCursorStylesForRotatedState=function(e){var t=this.parent,i=e.rotatedAngle*(180/Math.PI);if((i=i>0?Math.floor(i):Math.ceil(i))>=92&&i<=182||i>=-178&&i<=-88){var n={"nw-resize":"ne-resize","n-resize":"s-resize","ne-resize":"nw-resize","w-resize":"e-resize","e-resize":"w-resize","sw-resize":"se-resize","s-resize":"n-resize","se-resize":"sw-resize"};t.cursor in n&&(t.cursor=n[t.cursor])}return t.upperCanvas.style.cursor=this.getResizeElement(e.rotatedAngle*(180/Math.PI),t.cursor),t.cursor},e.prototype.getResizeElement=function(e,t){var i=[];switch(t){case"nw-resize":i=[[337.5,22.5,"nw-resize"],[22.5,67.5,"n-resize"],[67.5,112.5,"ne-resize"],[112.5,157.5,"e-resize"],[157.5,202.5,"se-resize"],[202.5,247.5,"s-resize"],[247.5,292.5,"sw-resize"],[292.5,337.5,"w-resize"]];break;case"n-resize":i=[[337.5,22.5,"n-resize"],[22.5,67.5,"ne-resize"],[67.5,112.5,"e-resize"],[112.5,157.5,"se-resize"],[157.5,202.5,"s-resize"],[202.5,247.5,"sw-resize"],[247.5,292.5,"w-resize"],[292.5,337.5,"nw-resize"]];break;case"ne-resize":i=[[337.5,22.5,"ne-resize"],[22.5,67.5,"e-resize"],[67.5,112.5,"se-resize"],[112.5,157.5,"s-resize"],[157.5,202.5,"sw-resize"],[202.5,247.5,"w-resize"],[247.5,292.5,"nw-resize"],[292.5,337.5,"n-resize"]];break;case"e-resize":i=[[337.5,22.5,"e-resize"],[22.5,67.5,"se-resize"],[67.5,112.5,"s-resize"],[112.5,157.5,"sw-resize"],[157.5,202.5,"w-resize"],[202.5,247.5,"nw-resize"],[247.5,292.5,"n-resize"],[292.5,337.5,"ne-resize"]];break;case"se-resize":i=[[337.5,22.5,"se-resize"],[22.5,67.5,"s-resize"],[67.5,112.5,"sw-resize"],[112.5,157.5,"w-resize"],[157.5,202.5,"nw-resize"],[202.5,247.5,"n-resize"],[247.5,292.5,"ne-resize"],[292.5,337.5,"e-resize"]];break;case"s-resize":i=[[337.5,22.5,"s-resize"],[22.5,67.5,"sw-resize"],[67.5,112.5,"w-resize"],[112.5,157.5,"nw-resize"],[157.5,202.5,"n-resize"],[202.5,247.5,"ne-resize"],[247.5,292.5,"e-resize"],[292.5,337.5,"se-resize"]];break;case"sw-resize":i=[[337.5,22.5,"sw-resize"],[22.5,67.5,"w-resize"],[67.5,112.5,"nw-resize"],[112.5,157.5,"n-resize"],[157.5,202.5,"ne-resize"],[202.5,247.5,"e-resize"],[247.5,292.5,"se-resize"],[292.5,337.5,"s-resize"]];break;case"w-resize":i=[[337.5,22.5,"w-resize"],[22.5,67.5,"nw-resize"],[67.5,112.5,"n-resize"],[112.5,157.5,"ne-resize"],[157.5,202.5,"e-resize"],[202.5,247.5,"se-resize"],[247.5,292.5,"s-resize"],[292.5,337.5,"sw-resize"]]}for(var n=e<0?360-Math.abs(e):e,s=0,o=i;s<o.length;s++){var r=o[s],a=r[0],l=r[1],h=r[2];if(n>a&&n<=l||n+360>a&&n+360<=l)return h}return t},e.prototype.setCursorForFreehandDrawing=function(e,t,i){var n,s=i.getContext("2d"),o=this.parent,r=document.querySelector("#"+o.element.id+"_textArea"),a=!1;o.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:-1}});for(var l=0;l<o.freehandCounter;l++){var h={selPointColl:{}};o.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:h}}),n=sf.base.extend([],h.selPointColl[l].points,[]),o.points=sf.base.extend([],o.pointColl[l].points,[]);var d=o.pointColl[l];o.notify("freehand-draw",{prop:"setPointCounter",onPropertyChange:!1,value:{value:0}});for(var c=n.length,p=0;p<c;p++)if(0!==p){var u=!1;if(n[p-1]&&n[p]&&(u=this.isInside(e,t,n[p-1].x,n[p-1].y,n[p].x,n[p].y)),u){this.isFhdPoint=!0,o.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:l}}),o.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}}),i.style.cursor=o.cursor="pointer",a=!0;break}if(!this.isFhdEditing||d.isSelected){if((this.isFhdPoint||this.isFhdEditing)&&(s.clearRect(0,0,i.width,i.height),o.activeObj.shape&&"none"===r.style.display&&o.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:o.activeObj}})),this.isFhdEditing){var f=d.strokeColor;o.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:f,strokeWidth:d.strokeWidth}})}else o.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:null}});this.isFhdPoint=!1}}else{var g=o.points[p];if(e>g.x-d.strokeWidth&&e<g.x+d.strokeWidth&&t>g.y-d.strokeWidth&&t<g.y+d.strokeWidth){this.isFhdPoint=!0,o.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:l}}),o.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}}),i.style.cursor=o.cursor="pointer",a=!0;break}if(!this.isFhdEditing||d.isSelected){if((this.isFhdPoint||this.isFhdEditing)&&(s.clearRect(0,0,i.width,i.height),o.activeObj.shape&&"none"===r.style.display&&o.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:o.activeObj}})),this.isFhdEditing){f=d.strokeColor;o.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:f,strokeWidth:d.strokeWidth}})}this.isFhdPoint=!1}}if(a)break}},e.prototype.setCursorFromObj=function(e,t,i,n,s){for(var o=this.parent,r=0,a=i.length;r<a;r++){if("move"===o.cursor)return;var l=sf.base.extend({},i[r],{},!0);this.cursorTargetId=l.currIndex,"line"===l.shape||"arrow"===l.shape?this.setCursorForLineArrow(l,e,t,n):"path"===l.shape?this.setCursorForPath(l,e,t,n):sf.base.isNullOrUndefined(l.rotatedAngle)||0===l.rotatedAngle?n.style.cursor=o.cursor=this.getMouseCursor(l,e,t,s,!0):this.setCursorForRotatedObject(l,e,t,n)}},e.prototype.isInside=function(e,t,i,n,s,o){var r=Math.min(i,s),a=Math.max(i,s),l=Math.min(n,o),h=Math.max(n,o);return r<=e&&e<=a&&l<=t&&t<=h},e.prototype.updateActivePoint=function(e,t,i){var n=this.parent,s={width:0,height:0},o=n.activeObj.activePoint,r=o.startX,a=o.startY,l=o.endX,h=o.endY,d=n.activeObj.activePoint,c=d.width,p=d.height;n.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:c,height:p,obj:s,isImgShape:null}});var u,f=s,g=this.updatePrevShapeSettings(),m={cancel:!1,action:"resize",previousShapeSettings:g},v={cancel:!1,action:"move",previousShapeSettings:g};if(this.shapeResizingArgs=m,this.shapeMovingArgs=v,"text"===n.activeObj.shape&&""!==this.dragElement&&n.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:n.activeObj,isTextArea:null}}),""!==this.currentDrawingShape&&(""===this.dragElement||"move"===this.dragElement)){["line","arrow","path"].indexOf(n.activeObj.shape)>-1?this.dragElement="e-resize":e>r&&t>a?this.dragElement="se-resize":e<r&&t>a?this.dragElement="sw-resize":e>r&&t<a?this.dragElement="ne-resize":e<r&&t<a&&(this.dragElement="nw-resize")}"arrow"===n.activeObj.shape&&(Math.atan2(e-n.lowerCanvas.width/2,t-n.lowerCanvas.height/2)>0?n.activeObj.rotatedAngle=-Math.atan2(e-n.lowerCanvas.width/2,t-n.lowerCanvas.height/2):n.activeObj.rotatedAngle=Math.abs(Math.atan2(e-n.lowerCanvas.width/2,t-n.lowerCanvas.height/2)));var b=!1,y=!1;if(!i||0===n.transform.straighten||!this.isMouseOutsideImg(e,t))switch(this.dragElement.toLowerCase()){case"nw-resize":this.updateNWPoints(e,t,f),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(m,v,"resize");break;case"n-resize":this.updateNPoints(e,t),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(m,v,"resize");break;case"ne-resize":this.updateNEPoints(e,t,f),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(m,v,"resize");break;case"w-resize":this.updateWPoints(e,t),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(m,v,"resize");break;case"e-resize":this.updateEPoints(e,t),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(m,v,"resize");break;case"sw-resize":this.updateSWPoints(e,t,f),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(m,v,"resize");break;case"s-resize":this.updateSPoints(e,t),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(m,v,"resize");break;case"se-resize":this.updateSEPoints(e,t,f),n.notify("shape",{prop:"updateArrowDirection",onPropertyChange:!1,value:{obj:n.activeObj,flip:null,rotatedDegree:null}}),this.triggerShapeChange(m,v,"resize");break;case"grabbing":Math.atan2(e-(r+c/2),t-(a+p/2))>0?n.activeObj.rotatedAngle=-Math.atan2(e-(r+c/2),t-(a+p/2)):n.activeObj.rotatedAngle=Math.abs(Math.atan2(e-(r+c/2),t-(a+p/2))),(u=0===n.activeObj.shapeDegree?n.transform.degree:n.transform.degree-n.activeObj.shapeDegree)<0&&(u=360+u);for(var C=0,w=n.activeObj.flipObjColl.length;C<w;C++)"horizontal"===n.activeObj.flipObjColl[C].toLowerCase()?b=!0:"vertical"===n.activeObj.flipObjColl[C].toLowerCase()&&(y=!0);n.activeObj.rotatedAngle-=u*(Math.PI/180),0===u||360===u?y&&(n.activeObj.rotatedAngle-=Math.PI/180*180):90===u||-270===u?b&&(n.activeObj.rotatedAngle-=Math.PI/180*180):180===u||-180===u?y&&(n.activeObj.rotatedAngle-=Math.PI/180*180):270!==u&&-90!==u||b&&(n.activeObj.rotatedAngle-=Math.PI/180*180);break;case"pathdrag":sf.base.isNullOrUndefined(this.pathAdjustedIndex)||(n.activeObj.pointColl[this.pathAdjustedIndex].x=e,n.activeObj.pointColl[this.pathAdjustedIndex].y=t);break;default:if(!i&&!n.currObjType.isCustomCrop){var M=n.activeObj.activePoint;if(this.dragPoint.startX){var S=this.dragPoint.endX-this.previousPoint.x,x=this.dragPoint.endY-this.previousPoint.y;if(M.startX+=S,M.endX+=S,M.startY+=x,M.endY+=x,r=M.startX,a=M.startY,l=M.endX,h=M.endY,"line"!==n.activeObj.shape&&"arrow"!==n.activeObj.shape&&n.activeObj.rotationCirclePointColl&&(n.activeObj.rotationCirclePointColl.x+=S,n.activeObj.rotationCirclePointColl.y+=x,n.activeObj.rotationCirclePoint.x+=S,n.activeObj.rotationCirclePoint.y+=x),"path"===n.activeObj.shape)for(C=0,w=n.activeObj.pointColl.length;C<w;C++)n.activeObj.pointColl[C].x+=S,n.activeObj.pointColl[C].y+=x;!this.isPreventDragging&&"line"!==n.activeObj.shape&&0===n.activeObj.rotatedAngle&&(r<n.img.destLeft||a<n.img.destTop||l>n.img.destLeft+n.img.destWidth||h>n.img.destTop+n.img.destHeight)&&(M.startX-=S,M.endX-=S,M.startY-=x,M.endY-=x,"line"!==n.activeObj.shape&&"arrow"!==n.activeObj.shape&&n.activeObj.rotationCirclePointColl&&(n.activeObj.rotationCirclePointColl.x-=S,n.activeObj.rotationCirclePointColl.y-=x,n.activeObj.rotationCirclePoint.x-=S,n.activeObj.rotationCirclePoint.y-=x),this.setDragWidth(S),this.setDragHeight(x))}else M.startX=e<this.mouseDownPoint.x?e:this.mouseDownPoint.x,M.startY=t<this.mouseDownPoint.y?t:this.mouseDownPoint.y,e=e<this.mouseDownPoint.x?this.mouseDownPoint.x:e,t=t<this.mouseDownPoint.y?this.mouseDownPoint.y:t,M.endX=e,M.endY=t;this.triggerShapeChange(m,v,"move")}}},e.prototype.triggerShapeChange=function(e,t,i){var n=this.parent,s=n.activeObj.activePoint;s.width=s.endX-s.startX,s.height=s.endY-s.startY;var o=this.updatePrevShapeSettings();if(sf.base.isNullOrUndefined(this.shapeResizingArgs)||sf.base.isNullOrUndefined(this.shapeMovingArgs)?(e.currentShapeSettings=o,t.currentShapeSettings=o):(e.currentShapeSettings=this.shapeResizingArgs.currentShapeSettings=o,t.currentShapeSettings=this.shapeMovingArgs.currentShapeSettings=o),"resize"===i){this.isCropSelection=!1;var r=void 0;if(void 0!==n.activeObj.shape&&(r=n.activeObj.shape.split("-")),void 0!==r&&"crop"===r[0]&&(this.isCropSelection=!0),!this.isCropSelection&&"resize"!==n.eventType&&sf.base.isBlazor()&&n.events&&!0===n.events.onShapeResizeStart.hasDelegate)e.action=""!==this.currentDrawingShape?"drawing":"resize-start",n.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShapeResizeStart",e,null).then((function(e){n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings}})}));else if(this.isCropSelection){var a={action:e.action,previousSelectionSettings:{type:n.getSelectionType(n.activeObj.shape),startX:e.previousShapeSettings.startX,startY:e.previousShapeSettings.startY,width:e.previousShapeSettings.width,height:e.previousShapeSettings.height},currentSelectionSettings:{type:n.getSelectionType(n.activeObj.shape),startX:e.currentShapeSettings.startX,startY:e.currentShapeSettings.startY,width:e.currentShapeSettings.width,height:e.currentShapeSettings.height}};this.selectionResizingArgs=a,sf.base.isBlazor()&&sf.base.isNullOrUndefined(n.eventType)&&n.events&&!0===n.events.onSelectionResizeStart.hasDelegate?(a.action="resize-start",n.dotNetRef.invokeMethodAsync("SelectionEventAsync","OnSelectionResizeStart",a).then((function(e){n.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:e.currentSelectionSettings}})}))):(n.trigger("selectionChanging",a),n.notify("shape",{prop:"updSelChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:a.currentSelectionSettings}}))}else""!==this.currentDrawingShape&&(e.action="drawing"),n.trigger("shapeChanging",e),n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings}})}else"mouse-down"===i||"mouse-up"===i?sf.base.isBlazor()&&n.events&&!0===n.events.shapeChanging.hasDelegate?n.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",e,null).then((function(e){n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings}})})):(n.trigger("shapeChanging",e),n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings}})):sf.base.isBlazor()&&sf.base.isNullOrUndefined(n.eventType)&&n.events&&!0===n.events.onShapeDragStart.hasDelegate?(t.action="drag-start",n.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShapeDragStart",t,null).then((function(e){n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings}})}))):(n.trigger("shapeChanging",t),n.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:t.currentShapeSettings}}));n.eventType=i},e.prototype.setDragWidth=function(e){var t=this.parent,i=t.activeObj.activePoint,n=t.img,s=n.destLeft,o=n.destWidth,r=e;if(r>=0)for(var a=0;a<r&&(e=r-a,i.startX+=e,i.endX+=e,!(i.startX>=s&&i.endX<=s+o));a++)i.startX-=e,i.endX-=e;else for(a=1;a<Math.abs(r)&&(e=r+a,i.startX+=e,i.endX+=e,!(i.startX>=s&&i.endX<=s+o));a++)i.startX-=e,i.endX-=e},e.prototype.setDragHeight=function(e){var t=this.parent,i=t.activeObj.activePoint,n=t.img,s=n.destTop,o=n.destHeight,r=e;if(r>=0)for(var a=1;a<r&&(e=r-a,i.startY+=e,i.endY+=e,!(i.startY>=s&&i.endY<=s+o));a++)i.startY-=e,i.endY-=e;else for(a=0;a<Math.abs(r)&&(e=r+a,i.startY+=e,i.endY+=e,!(i.startY>=s&&i.endY<=s+o));a++)i.startY-=e,i.endY-=e},e.prototype.limitDrag=function(e){var t=!1,i=this.parent,n=i.img,s=n.destLeft,o=n.destTop,r=n.destWidth,a=n.destHeight,l=i.activeObj.activePoint,h=e?l.startX:l.endX,d=e?l.startY:l.endY,c=e?l.endX:l.startX,p=e?l.endY:l.startY;if(h<s&&(h=s),d<o&&(d=o),c>s+r&&(c=s+r),p>o+a&&(p=o+a),0!==i.transform.straighten){var u={isIntersect:null,arr:null};i.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),i.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:u}}),(u.arr[0]||u.arr[1]||u.arr[2]||u.arr[3])&&(t=!0)}return e?(l.startX=h,l.startY=d,l.endX=c,l.endY=p):(l.startX=c,l.startY=p,l.endX=h,l.endY=d),t},e.prototype.isMouseOutsideImg=function(e,t){var i={bool:!1};return this.parent.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),this.parent.notify("draw",{prop:"isPointsInsideImg",value:{obj:i,x:e,y:t}}),i.bool},e.prototype.preventDraggingInvertly=function(){var e=!1,t=this.parent;if("image"===t.activeObj.shape)return e;if(!this.isPreventDragging&&0===t.activeObj.rotatedAngle){e=this.limitDrag(!0);["line","arrow","path"].indexOf(t.activeObj.shape)>-1&&(e=this.limitDrag(!1))}return e},e.prototype.preventTextDraggingInvertly=function(){var e=this.parent,t=!1,i=e.activeObj.activePoint,n=e.img,s=n.destLeft,o=n.destTop,r=n.destWidth,a=n.destHeight;return this.isPreventDragging||(i.startX<s||i.startY<o||i.endX>s+r||i.endY>o+a)&&(t=!0),t},e.prototype.preventInverseResize=function(e){var t=this.parent.activeObj.activePoint;t.width<0&&(t.width=0,t.startX=e.activePoint.startX,t.endX=e.activePoint.endX),t.height<0&&(t.height=0,t.startY=e.activePoint.startY,t.endY=e.activePoint.endY)},e.prototype.getScaleRatio=function(e){var t=this.parent,i={x:e,y:e};if(t.activeObj.shape&&"crop-custom"!==t.activeObj.shape&&"crop-circle"!==t.activeObj.shape&&"crop-square"!==t.activeObj.shape){var n="image"===t.activeObj.shape||"text"===t.activeObj.shape?this.findImageRatio(t.activeObj.activePoint.width,t.activeObj.activePoint.height).split("-"):t.activeObj.shape.split("-");if(n.length>1||"image"===t.activeObj.shape||"text"===t.activeObj.shape){n="image"===t.activeObj.shape||"text"===t.activeObj.shape?n[0].split(":"):n[1].split(":");var s=e/parseInt(n[1],10);i.x=s*parseInt(n[0],10),i.y=s*parseInt(n[1],10)}}return i},e.prototype.findImageRatio=function(e,t,i){var n=function e(t,i){return 0===i?t:e(i,t%i)}(e,t),s=e/n+":"+t/n;return i&&(i.ratio=s),s},e.prototype.revertResizing=function(e){var t=this.parent.activeObj.activePoint;this.preventDraggingInvertly()&&(t.startX=e.activePoint.startX,t.startY=e.activePoint.startY,t.endX=e.activePoint.endX,t.endY=e.activePoint.endY)},e.prototype.updateNWPoints=function(e,t,i){var n,s,o,r=this.parent,a=r.activeObj.activePoint,l=sf.base.extend({},r.activeObj,null,!0);if("text"===r.activeObj.shape)this.resizeImg(e,t,"nw-resize",l),r.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:r.activeObj}});else{var h=void 0;if(void 0!==r.activeObj.shape&&(h=r.activeObj.shape.split("-")),"crop-custom"===r.activeObj.shape||void 0!==r.activeObj.shape&&"crop"!==h[0]){if("image"===r.activeObj.shape?this.resizeImg(e,t,"nw-resize",l):this.adjustNWPoints(a,e,t,r.activeObj.rotatedAngle),a.startX>a.endX){var d=a.startX;a.startX=a.endX,a.endX=d,this.dragElement=r.upperCanvas.style.cursor=r.cursor="ne-resize"}if(a.startY>a.endY){d=a.startY;a.startY=a.endY,a.endY=d,this.dragElement=r.upperCanvas.style.cursor=r.cursor="sw-resize"}this.revertResizing(l)}else{var c=r.img,p=c.destLeft,u=c.destTop;c.destWidth,c.destHeight;if(a.startX<e&&a.startY<t){n=e-a.startX,s=t-a.startY,o=Math.min(n,s);var f=this.getScaleRatio(o);a.startX+=f.x,a.startY+=f.y;var g=p>0?p:0,m=u>0?u:0;(a.startX<g||a.startY<m)&&(a.startX-=f.x,a.startY-=f.y)}else{n=a.startX-e,s=t-a.endY,o=Math.max(n,s);f=this.getScaleRatio(o);a.startX-=f.x,a.startY-=f.y;g=p>0?p:0;var v=u>0?u:0;(a.startX<g||a.startY<v)&&(a.startX+=f.x,a.startY+=f.y)}a.width=a.endX-a.startX,a.height=a.endY-a.startY,this.revertResizing(l)}a.width=a.endX-a.startX,a.height=a.endY-a.startY,this.preventInverseResize(l)}},e.prototype.updateNPoints=function(e,t){var i,n,s,o=this.parent,r=o.activeObj.activePoint,a=sf.base.extend({},o.activeObj,null,!0);if("text"!==o.activeObj.shape){var l=void 0;if(o.activeObj.shape&&(l=o.activeObj.shape.split("-")),"crop-custom"===o.activeObj.shape||o.activeObj.shape&&"crop"!==l[0]){if("line"!==o.activeObj.shape&&"arrow"!==o.activeObj.shape&&"path"!==o.activeObj.shape&&0!==o.activeObj.rotatedAngle&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=e,this.dragPoint.endY=t),i=this.dragPoint.endX-this.previousPoint.x,n=this.dragPoint.endY-this.previousPoint.y,this.adjustRotationPoints(r,i,n,o.activeObj.rotatedAngle)):(r.startY=t,r.height=r.endY-r.startY),r.startY>r.endY){var h=r.startY;r.startY=r.endY,r.endY=h,this.dragElement=this.resizedElement="s-resize"}this.revertResizing(a)}else{var d=o.img,c=d.destLeft,p=d.destTop,u=d.destWidth;d.destHeight;if(r.endX>e&&r.startY<t){i=r.endX-e,n=t-r.startY,s=Math.min(i,n);var f=this.getScaleRatio(s);r.endX-=f.x,r.startY+=f.y,(r.endX>c+u||r.startY<p)&&(r.endX+=f.x,r.startY-=f.y)}else{i=e-r.endX,n=r.startY-t,s=Math.max(i,n);f=this.getScaleRatio(s);r.endX+=f.x,r.startY-=f.y,(r.endX>c+u||r.startY<p)&&(r.endX-=f.x,r.startY+=f.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(a)}}},e.prototype.updateNEPoints=function(e,t,i){var n,s,o,r=this.parent,a=r.activeObj.activePoint,l=sf.base.extend({},r.activeObj,null,!0);if("text"===r.activeObj.shape)this.resizeImg(e,t,"ne-resize",l),r.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:r.activeObj}});else{var h=void 0;if(r.activeObj.shape&&(h=r.activeObj.shape.split("-")),"crop-custom"===r.activeObj.shape||void 0!==r.activeObj.shape&&"crop"!==h[0]){if("image"===r.activeObj.shape?this.resizeImg(e,t,"ne-resize",l):this.adjustNEPoints(a,e,t,r.activeObj.rotatedAngle),a.endX<a.startX){var d=a.endX;a.endX=a.startX,a.startX=d,this.dragElement=r.upperCanvas.style.cursor=r.cursor="nw-resize"}if(a.startY>a.endY){d=a.startY;a.startY=a.endY,a.endY=d,this.dragElement=r.upperCanvas.style.cursor=r.cursor="se-resize"}this.revertResizing(l)}else{var c=r.img,p=c.destLeft,u=c.destTop,f=c.destWidth;c.destHeight;if(a.endX>e&&a.startY<t){n=a.endX-e,s=t-a.startY,o=Math.min(n,s);var g=this.getScaleRatio(o);a.endX-=g.x,a.startY+=g.y;var m=p+f<r.lowerCanvas.width?p+f:r.lowerCanvas.width,v=u>0?u:0;(a.endX>m||a.startY<v)&&(a.endX+=g.x,a.startY-=g.y)}else{n=e-a.endX,s=a.startY-t,o=Math.max(n,s);g=this.getScaleRatio(o);a.endX+=g.x,a.startY-=g.y;m=p+f<r.lowerCanvas.width?p+f:r.lowerCanvas.width,v=u>0?u:0;(a.endX>m||a.startY<v)&&(a.endX-=g.x,a.startY+=g.y)}a.width=a.endX-a.startX,a.height=a.endY-a.startY,this.revertResizing(l)}a.width=a.endX-a.startX,a.height=a.endY-a.startY,this.preventInverseResize(l)}},e.prototype.updateWPoints=function(e,t){var i,n,s,o=this.parent,r=o.activeObj.activePoint,a=sf.base.extend({},o.activeObj,null,!0);if("text"!==o.activeObj.shape){var l=void 0;if(o.activeObj.shape&&(l=o.activeObj.shape.split("-")),"crop-custom"===o.activeObj.shape||o.activeObj.shape&&"crop"!==l[0]){if("line"!==o.activeObj.shape&&"arrow"!==o.activeObj.shape&&"path"!==o.activeObj.shape&&0!==o.activeObj.rotatedAngle&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=e,this.dragPoint.endY=t),i=this.dragPoint.endX-this.previousPoint.x,n=this.dragPoint.endY-this.previousPoint.y,this.adjustRotationPoints(r,i,n,o.activeObj.rotatedAngle)):(r.startX=e,r.width=r.endX-r.startX),"line"===o.activeObj.shape||"arrow"===o.activeObj.shape||"path"===o.activeObj.shape)r.startY=t,r.height=r.endY-r.startY,this.adjustActObjForLineArrow()&&(this.dragElement="e-resize","right"===o.activeObj.triangleDirection?o.activeObj.triangleDirection="left":"left"===o.activeObj.triangleDirection&&(o.activeObj.triangleDirection="right"));else if(r.startX>r.endX){var h=r.startX;r.startX=r.endX,r.endX=h,this.dragElement=this.resizedElement="e-resize"}this.revertResizing(a)}else{var d=o.img,c=d.destLeft,p=d.destTop,u=(d.destWidth,d.destHeight);if(r.startX<e&&r.endY>t){i=e-r.startX,n=r.endY-t,s=Math.min(i,n);var f=this.getScaleRatio(s);r.startX+=f.x,r.endY-=f.y,(r.startX<c||r.endY>p+u)&&(r.startX-=f.x,r.endY+=f.y)}else{i=r.startX-e,n=t-r.endY,s=Math.max(i,n);f=this.getScaleRatio(s);r.startX-=f.x,r.endY+=f.y,(r.startX<c||r.endY>p+u)&&(r.startX+=f.x,r.endY-=f.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(a)}}},e.prototype.updateEPoints=function(e,t){var i,n,s,o=this.parent,r=o.activeObj.activePoint,a=sf.base.extend({},o.activeObj,null,!0);if("text"!==o.activeObj.shape){var l=void 0;if(o.activeObj.shape&&(l=o.activeObj.shape.split("-")),"crop-custom"===o.activeObj.shape||o.activeObj.shape&&"crop"!==l[0]){if("line"!==o.activeObj.shape&&"arrow"!==o.activeObj.shape&&"path"!==o.activeObj.shape&&0!==o.activeObj.rotatedAngle&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=e,this.dragPoint.endY=t),i=this.dragPoint.endX-this.previousPoint.x,n=this.dragPoint.endY-this.previousPoint.y,this.adjustRotationPoints(r,i,n,o.activeObj.rotatedAngle)):(r.endX=e,r.width=r.endX-r.startX),"line"===o.activeObj.shape||"arrow"===o.activeObj.shape||"path"===o.activeObj.shape)r.endY=t,r.height=r.endY-r.startY,this.adjustActObjForLineArrow()&&(this.dragElement="w-resize","right"===o.activeObj.triangleDirection?o.activeObj.triangleDirection="left":"left"===o.activeObj.triangleDirection&&(o.activeObj.triangleDirection="right"));else if(r.endX<r.startX){var h=r.endX;r.endX=r.startX,r.startX=h,this.dragElement=this.resizedElement="w-resize"}this.revertResizing(a)}else{var d=o.img,c=d.destLeft,p=d.destTop,u=d.destWidth,f=d.destHeight;if(r.endX>e&&r.endY>t){i=r.endX-e,n=r.endY-t,s=Math.min(i,n);var g=this.getScaleRatio(s);r.endX-=g.x,r.endY-=g.y,(r.endX>c+u||r.endY>p+f)&&(r.endX+=g.x,r.endY+=g.y)}else{i=e-r.endX,n=t-r.endY,s=Math.max(i,n);g=this.getScaleRatio(s);r.endX+=g.x,r.endY+=g.y,(r.endX>c+u||r.endY>p+f)&&(r.endX-=g.x,r.endY-=g.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(a)}}},e.prototype.updateSWPoints=function(e,t,i){var n,s,o,r=this.parent,a=r.activeObj.activePoint,l=sf.base.extend({},r.activeObj,null,!0);if("text"===r.activeObj.shape)this.resizeImg(e,t,"sw-resize",l),r.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:r.activeObj}});else{var h=void 0;if(void 0!==r.activeObj.shape&&(h=r.activeObj.shape.split("-")),"crop-custom"===r.activeObj.shape||void 0!==r.activeObj.shape&&"crop"!==h[0]){if("image"===r.activeObj.shape?this.resizeImg(e,t,"sw-resize",l):this.adjustSWPoints(a,e,t,r.activeObj.rotatedAngle),a.startX>a.endX){var d=a.startX;a.startX=a.endX,a.endX=d,this.dragElement=r.upperCanvas.style.cursor=r.cursor="se-resize"}if(a.endY<a.startY){d=a.endY;a.endY=a.startY,a.startY=d,this.dragElement=r.upperCanvas.style.cursor=r.cursor="nw-resize"}this.revertResizing(l)}else{var c=r.img,p=c.destLeft,u=c.destTop,f=(c.destWidth,c.destHeight);if(a.startX<e&&a.endY>t){n=e-a.startX,s=a.endY-t,o=Math.min(n,s);var g=this.getScaleRatio(o);a.startX+=g.x,a.endY-=g.y;var m=p>0?p:0,v=u+f<r.lowerCanvas.height?u+f:r.lowerCanvas.height;(a.startX<m||a.endY>v)&&(a.startX-=g.x,a.endY+=g.y)}else{n=a.startX-e,s=t-a.endY,o=Math.max(n,s);g=this.getScaleRatio(o);a.startX-=g.x,a.endY+=g.y;m=p>0?p:0,v=u+f<r.lowerCanvas.height?u+f:r.lowerCanvas.height;(a.startX<m||a.endY>v)&&(a.startX+=g.x,a.endY-=g.y)}a.width=a.endX-a.startX,a.height=a.endY-a.startY,this.revertResizing(l)}a.width=a.endX-a.startX,a.height=a.endY-a.startY,this.preventInverseResize(l)}},e.prototype.updateSPoints=function(e,t){var i,n,s,o=this.parent,r=o.activeObj.activePoint,a=sf.base.extend({},o.activeObj,null,!0);if("text"!==o.activeObj.shape){var l=void 0;if(o.activeObj.shape&&(l=o.activeObj.shape.split("-")),"crop-custom"===o.activeObj.shape||o.activeObj.shape&&"crop"!==l[0]){if("line"!==o.activeObj.shape&&"arrow"!==o.activeObj.shape&&"path"!==o.activeObj.shape&&0!==o.activeObj.rotatedAngle&&this.dragPoint.startX?(this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=e,this.dragPoint.endY=t),i=this.dragPoint.endX-this.previousPoint.x,n=this.dragPoint.endY-this.previousPoint.y,this.adjustRotationPoints(r,i,n,o.activeObj.rotatedAngle)):(r.endY=t,r.height=r.endY-r.startY),r.endY<r.startY){var h=r.endY;r.endY=r.startY,r.startY=h,this.dragElement=this.resizedElement="n-resize"}this.revertResizing(a)}else{var d=o.img,c=d.destLeft,p=d.destTop,u=d.destWidth,f=d.destHeight;if(r.endX>e&&r.endY>t){i=r.endX-e,n=r.endY-t,s=Math.min(i,n);var g=this.getScaleRatio(s);r.endX-=g.x,r.endY-=g.y,(r.endX>c+u||r.endY>p+f)&&(r.endX+=g.x,r.endY+=g.y)}else{i=e-r.endX,n=t-r.endY,s=Math.max(i,n);g=this.getScaleRatio(s);r.endX+=g.x,r.endY+=g.x,(r.endX>c+u||r.endY>p+f)&&(r.endX-=g.x,r.endY-=g.y)}r.width=r.endX-r.startX,r.height=r.endY-r.startY,this.revertResizing(a)}}},e.prototype.updateSEPoints=function(e,t,i){var n,s,o,r=this.parent,a=r.activeObj.activePoint,l=sf.base.extend({},r.activeObj,null,!0);if("text"===r.activeObj.shape)this.resizeImg(e,t,"se-resize",l),r.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:r.activeObj}});else{var h=void 0,d=void 0;if(void 0!==r.activeObj.shape&&(h=r.activeObj.shape.split("-")),"crop-custom"===r.activeObj.shape||void 0!==r.activeObj.shape&&"crop"!==h[0]){if("image"===r.activeObj.shape?this.resizeImg(e,t,"se-resize",l):this.adjustSEPoints(a,e,t,r.activeObj.rotatedAngle),a.endX<a.startX){var c=a.endX;a.endX=a.startX,a.startX=c,this.dragElement=r.upperCanvas.style.cursor=r.cursor="sw-resize"}if(a.endY<a.startY){c=a.endY;a.endY=a.startY,a.startY=c,this.dragElement=r.upperCanvas.style.cursor=r.cursor="ne-resize"}this.revertResizing(l)}else{var p=r.img,u=p.destLeft,f=p.destTop,g=p.destWidth,m=p.destHeight;if(a.endX>e&&a.endY>t){n=a.endX-e,s=a.endY-t,o=Math.min(n,s),d=this.getScaleRatio(o),a.endX-=d.x,a.endY-=d.y;var v=u+g<r.lowerCanvas.width?u+g:r.lowerCanvas.width,b=f+m<r.lowerCanvas.height?f+m:r.lowerCanvas.height;(a.endX>v||a.endY>b)&&(a.endX+=d.x,a.endY+=d.y)}else{n=e-a.endX,s=t-a.endY,o=Math.max(n,s),d=this.getScaleRatio(o),a.endX+=d.x,a.endY+=d.y;v=u+g<r.lowerCanvas.width?u+g:r.lowerCanvas.width,b=f+m<r.lowerCanvas.height?f+m:r.lowerCanvas.height;(a.endX>v||a.endY>b)&&(a.endX-=d.x,a.endY-=d.y)}a.width=a.endX-a.startX,a.height=a.endY-a.startY,this.revertResizing(l)}this.preventInverseResize(l)}},e.prototype.resizeImg=function(e,t,i,n){var s,o,r=this.parent,a=r.activeObj.activePoint;if(0!==this.previousPoint.x&&0!==this.previousPoint.y){switch(r.upperCanvas.style.cursor){case"se-resize":case"s-resize":this.previousPoint.x>e||this.previousPoint.y>t?(s=(this.previousPoint.x-e+(this.previousPoint.y-t))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,-Math.abs(o.x),-Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i)):0!==this.previousPoint.x&&0!==this.previousPoint.y&&(s=(e-this.previousPoint.x+(t-this.previousPoint.y))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,Math.abs(o.x),Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i));break;case"sw-resize":this.previousPoint.x<e||this.previousPoint.y>t?(s=(e-this.previousPoint.x+(this.previousPoint.y-t))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,-Math.abs(o.x),-Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i)):0!==this.previousPoint.x&&0!==this.previousPoint.y&&(s=(this.previousPoint.x-e+(t-this.previousPoint.y))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,Math.abs(o.x),Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i));break;case"w-resize":case"nw-resize":this.previousPoint.x<e||this.previousPoint.y<t?(s=(e-this.previousPoint.x+(t-this.previousPoint.y))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,-Math.abs(o.x),-Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i)):0!==this.previousPoint.x&&0!==this.previousPoint.y&&(s=(this.previousPoint.x-e+(this.previousPoint.y-t))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,Math.abs(o.x),Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i));break;case"n-resize":case"ne-resize":this.previousPoint.x>e||this.previousPoint.y<t?(s=(this.previousPoint.x-e+(t-this.previousPoint.y))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,-Math.abs(o.x),-Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i)):0!==this.previousPoint.x&&0!==this.previousPoint.y&&(s=(e-this.previousPoint.x+(this.previousPoint.y-t))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,Math.abs(o.x),Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i));break;case"e-resize":this.previousPoint.x>e||this.previousPoint.y>t?(s=(this.previousPoint.x-e+(this.previousPoint.y-t))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,-Math.abs(o.x),-Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i)):0!==this.previousPoint.x&&0!==this.previousPoint.y&&(s=(e-this.previousPoint.x+(t-this.previousPoint.y))/2,o=this.getScaleRatio(s),this.adjustRotationPoints(a,Math.abs(o.x),Math.abs(o.y),r.activeObj.rotatedAngle,"img-resize",i))}a.width=a.endX-a.startX,a.height=a.endY-a.startY,(a.width<10||a.height<10||"text"===r.activeObj.shape&&0===r.activeObj.rotatedAngle&&this.preventTextDraggingInvertly())&&(r.activeObj=sf.base.extend({},n,null,!0))}this.previousPoint={x:e,y:t}},e.prototype.adjustNWPoints=function(e,t,i,n){var s=e.startX+e.width/2,o=e.startY+e.height/2,r=this.rotatePoints(e.endX,e.endY,s,o,n),a=[(r[0]+t)/2,(r[1]+i)/2],l=this.rotatePoints(r[0],r[1],a[0],a[1],-n),h=this.rotatePoints(t,i,a[0],a[1],-n);return e.endX=l[0],e.endY=l[1],e.startY=h[1],e.startX=h[0],e.width=e.endX-e.startX,e.height=e.endY-e.startY,e},e.prototype.adjustNEPoints=function(e,t,i,n){var s=e.startX+e.width/2,o=e.startY+e.height/2,r=this.rotatePoints(e.startX,e.endY,s,o,n),a=[(r[0]+t)/2,(r[1]+i)/2],l=this.rotatePoints(r[0],r[1],a[0],a[1],-n),h=this.rotatePoints(t,i,a[0],a[1],-n);return e.startX=l[0],e.endY=l[1],e.width=h[0]-l[0],e.height=l[1]-h[1],e.endX=e.startX+e.width,e.startY=e.endY-e.height,e},e.prototype.adjustSWPoints=function(e,t,i,n){var s=e.startX+e.width/2,o=e.startY+e.height/2,r=this.rotatePoints(e.endX,e.startY,s,o,n),a=[(r[0]+t)/2,(r[1]+i)/2],l=this.rotatePoints(r[0],r[1],a[0],a[1],-n),h=this.rotatePoints(t,i,a[0],a[1],-n);return e.endX=l[0],e.startY=l[1],e.startX=h[0],e.endY=h[1],e.width=e.endX-e.startX,e.height=e.endY-e.startY,e},e.prototype.adjustSEPoints=function(e,t,i,n){var s=e.startX+e.width/2,o=e.startY+e.height/2,r=this.rotatePoints(e.startX,e.startY,s,o,n),a=[(r[0]+t)/2,(r[1]+i)/2],l=this.rotatePoints(r[0],r[1],a[0],a[1],-n),h=this.rotatePoints(t,i,a[0],a[1],-n);return e.startX=l[0],e.startY=l[1],e.width=h[0]-l[0],e.height=h[1]-l[1],e.endX=e.startX+e.width,e.endY=e.startY+e.height,e},e.prototype.adjustRotationPoints=function(e,t,i,n,s,o){var r=e.startX+e.width/2,a=e.startY+e.height/2;this.getResizeDirection(e,t,i,n,s,o);var l=this.rotatePoints(e.startX,e.startY,r,a,n),h=this.rotatePoints(e.endX,e.startY,r,a,n),d=this.rotatePoints(e.endX,e.endY,r,a,n),c=this.rotatePoints(e.startX,e.endY,r,a,n),p=[(l[0]+d[0])/2,(l[1]+d[1])/2],u=this.rotatePoints(l[0],l[1],p[0],p[1],-n),f=this.rotatePoints(c[0],c[1],p[0],p[1],-n),g=this.rotatePoints(h[0],h[1],p[0],p[1],-n);return e.startX=u[0],e.startY=u[1],e.endX=g[0],e.endY=f[1],e.width=e.endX-e.startX,e.height=e.endY-e.startY,e},e.prototype.rotatePoints=function(e,t,i,n,s){return[(e-i)*Math.cos(s)-(t-n)*Math.sin(s)+i,(e-i)*Math.sin(s)+(t-n)*Math.cos(s)+n]},e.prototype.setResizedValue=function(e,t,i,n){switch(e){case"x":t+=i;break;case"y":t+=n;break;case"abs-x":t+=i>0?-i:Math.abs(i);break;case"abs-y":t+=n>0?-n:Math.abs(n);break;case"y-abs-x":t+=n+(i>0?-i:Math.abs(i))/2;break;case"abs-x-abs-y":t+=(i>0?-i:Math.abs(i))+(n>0?-n:Math.abs(n))/2;break;case"abs-y-x":t+=(n>0?-n:Math.abs(n))+i/2;break;case"x-y":t+=i+n/2;break;case"y-x":t+=n+i/2;break;case"img-resize-x":t+=i;break;case"img-resize-y":t+=n}return t},e.prototype.getResizeDirection=function(e,t,i,n,s,o){var r=n*(180/Math.PI),a=this.getResizedElement(r,this.resizedElement);"e-resize"===this.resizedElement?(e.width=this.setResizedValue(a,e.width,t,i),e.endX=e.width+e.startX):"n-resize"===this.resizedElement?(e.startY=this.setResizedValue(a,e.startY,t,i),e.height=e.endY-e.startY):"w-resize"===this.resizedElement?(e.startX=this.setResizedValue(a,e.startX,t,i),e.width=e.startX+e.endX):"s-resize"===this.resizedElement?(e.height=this.setResizedValue(a,e.height,t,i),e.endY=e.height+e.startY):s&&"img-resize"===s?(e.width=this.setResizedValue("img-resize-x",e.width,t,i),e.height=this.setResizedValue("img-resize-y",e.height,t,i),"se-resize"===o?(e.endX=e.width+e.startX,e.endY=e.height+e.startY):"sw-resize"===o?(e.startX=e.endX-e.width,e.endY=e.height+e.startY):"ne-resize"===o?(e.endX=e.width+e.startX,e.startY=e.endY-e.height):"nw-resize"===o&&(e.startX=e.endX-e.width,e.startY=e.endY-e.height)):s&&"text"===s&&("widthHeight"===o?(e.width=this.setResizedValue("x-y",e.width,t,i),e.endX=e.width+e.startX,e.height=this.setResizedValue("y-x",e.height,t,i),e.endY=e.height+e.startY):"width"===o?(e.width=this.setResizedValue("x-y",e.width,t,i),e.endX=e.width+e.startX):"height"===o&&(e.height=this.setResizedValue("y-abs-x",e.height,t,i),e.endY=e.height+e.startY))},e.prototype.getResizedElement=function(e,t){var i=[];"n-resize"===t?i=[[337.5,360,"y"],[0,22.5,"y"],[22.5,67.5,"y-abs-x"],[67.5,112.5,"abs-x"],[112.5,157.5,"abs-x-abs-y"],[157.5,202.5,"abs-y"],[202.5,247.5,"abs-y-x"],[247.5,292.5,"x"],[292.5,337.5,"x-y"]]:"e-resize"===t?i=[[337.5,360,"x"],[0,22.5,"x"],[22.5,67.5,"x-y"],[67.5,112.5,"y"],[112.5,157.5,"y-abs-x"],[157.5,202.5,"abs-x"],[202.5,247.5,"abs-x-abs-y"],[247.5,292.5,"abs-y"],[292.5,337.5,"abs-y-x"]]:"s-resize"===t?i=[[337.5,360,"y"],[0,22.5,"y"],[22.5,67.5,"y-abs-x"],[67.5,112.5,"abs-x"],[112.5,157.5,"abs-x-abs-y"],[157.5,202.5,"abs-y"],[202.5,247.5,"abs-y-x"],[247.5,292.5,"x"],[292.5,337.5,"x-y"]]:"w-resize"===t&&(i=[[337.5,360,"x"],[0,22.5,"x"],[22.5,67.5,"x-y"],[67.5,112.5,"y"],[112.5,157.5,"y-abs-x"],[157.5,202.5,"abs-x"],[202.5,247.5,"abs-x-abs-y"],[247.5,292.5,"abs-y"],[292.5,337.5,"abs-y-x"]]);for(var n=e<0?360-Math.abs(e):e,s=0,o=i;s<o.length;s++){var r=o[s],a=r[0],l=r[1],h=r[2];if(n>a&&n<=l||n+360>a&&n+360<=l)return h}return t},e.prototype.updateCursorStyles=function(e,t,i){var n=this.parent,s=!1;""===n.activeObj.keyHistory||void 0!==n.activeObj.shape||n.currObjType.isCustomCrop||n.currObjType.isLine||!n.currObjType.isText||(n.activeObj.shape="text");var o=sf.base.extend({},n.activeObj,{},!0);if(!sf.base.isNullOrUndefined(o.topLeftCircle)){var r;if((r=0===o.shapeDegree?n.transform.degree:n.transform.degree-o.shapeDegree)<0&&(r=360+r),this.isObjSelected)if("line"===o.shape||"arrow"===o.shape)s=this.updateCursorStylesForLineArrow(e,t,o);else if("path"===o.shape)s=this.updateCursorStylesForPath(e,t,o);else if(o.rotatedAngle)this.setCursorForRotatedObject(o,e,t,n.upperCanvas),"grabbing"===n.cursor?(n.upperCanvas.style.cursor=n.cursor="grabbing",this.dragElement=n.cursor):"move"===n.cursor?(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=e,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=t):"default"!==n.cursor&&(s=!0,this.dragElement=n.cursor,n.currObjType.isResize=!0);else{var a=this.getTransRotationPoint(o),l=o.topLeftCircle.radius;e>=o.topLeftCircle.startX-2*l&&e<=o.topLeftCircle.startX+2*l&&t>=o.topLeftCircle.startY-2*l&&t<=o.topLeftCircle.startY+2*l&&"nw-resize"!==this.dragElement?(o.topLeftCircle.startX=o.topLeftCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="nw-resize",s=!0,this.dragElement=n.upperCanvas.style.cursor):e>=o.topLeftCircle.startX-2*l&&e<=o.topRightCircle.startX-2*l&&t>=o.topCenterCircle.startY-2*l&&t<=o.topCenterCircle.startY+2*l&&"n-resize"!==this.dragElement?(o.topCenterCircle.startX=o.topCenterCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="n-resize",s=!0,this.dragElement=n.upperCanvas.style.cursor):e>=o.topRightCircle.startX-2*l&&e<=o.topRightCircle.startX+2*l&&t>=o.topRightCircle.startY-2*l&&t<=o.topRightCircle.startY+2*l&&"ne-resize"!==this.dragElement?(o.topRightCircle.startX=o.topRightCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="ne-resize",s=!0,this.dragElement=n.upperCanvas.style.cursor):e>=o.centerLeftCircle.startX-2*l&&e<=o.centerLeftCircle.startX+2*l&&t>=o.topLeftCircle.startY-2*l&&t<=o.bottomLeftCircle.startY-2*l&&"w-resize"!==this.dragElement?(o.centerLeftCircle.startX=o.centerLeftCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="w-resize",s=!0,this.dragElement=n.upperCanvas.style.cursor):e>=o.centerRightCircle.startX-2*l&&e<=o.centerRightCircle.startX+2*l&&t>=o.topRightCircle.startY-2*l&&t<=o.bottomRightCircle.startY-2*l&&"e-resize"!==this.dragElement?(o.centerRightCircle.startX=o.centerRightCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="e-resize",s=!0,this.dragElement=n.upperCanvas.style.cursor):e>=o.bottomLeftCircle.startX-2*l&&e<=o.bottomLeftCircle.startX+2*l&&t>=o.bottomLeftCircle.startY-2*l&&t<=o.bottomLeftCircle.startY+2*l&&"sw-resize"!==this.dragElement?(o.bottomLeftCircle.startX=o.bottomLeftCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="sw-resize",s=!0,this.dragElement=n.upperCanvas.style.cursor):e>=o.bottomLeftCircle.startX-2*l&&e<=o.bottomRightCircle.startX-2*l&&t>=o.bottomCenterCircle.startY-2*l&&t<=o.bottomCenterCircle.startY+2*l&&"s-resize"!==this.dragElement?(o.bottomCenterCircle.startX=o.bottomCenterCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="s-resize",s=!0,this.dragElement=n.upperCanvas.style.cursor):e>=o.bottomRightCircle.startX-2*l&&e<=o.bottomRightCircle.startX+2*l&&t>=o.bottomRightCircle.startY-2*l&&t<=o.bottomRightCircle.startY+2*l&&"se-resize"!==this.dragElement?(o.bottomRightCircle.startX=o.bottomRightCircle.startY=0,n.upperCanvas.style.cursor=n.cursor="se-resize",s=!0,this.dragElement=n.upperCanvas.style.cursor):a&&e>=a.x-2*l&&e<=a.x+2*l&&t>=a.y-2*l&&t<=a.y+2*l&&"grabbing"!==this.dragElement?(n.upperCanvas.style.cursor=n.cursor="grabbing",this.dragElement=n.upperCanvas.style.cursor):(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=e,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=t),"text"!==o.shape||"n-resize"!==n.cursor&&"s-resize"!==n.cursor&&"e-resize"!==n.cursor&&"w-resize"!==n.cursor||(n.upperCanvas.style.cursor=n.cursor="move",this.dragElement="",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=e,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=t)}else this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=e,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=t;this.previousPoint.x=this.previousPoint.y=this.diffPoint.x=this.diffPoint.y=0,"touchstart"===i?s||e>=o.activePoint.startX&&e<=o.activePoint.endX&&t>=o.activePoint.startY&&t<=o.activePoint.endY||"grabbing"===this.dragElement?n.currObjType.isDragging=!0:"line"===o.shape||"arrow"===o.shape?(this.setCursorForLineArrow(o,e,t,n.upperCanvas),"move"===n.cursor&&(n.currObjType.isDragging=!0)):"path"===o.shape&&(this.setCursorForPath(o,e,t,n.upperCanvas),"move"===n.cursor&&(n.currObjType.isDragging=!0)):n.currObjType.isDragging=!0,0===o.rotatedAngle||"e-resize"!==this.dragElement&&"w-resize"!==this.dragElement&&"n-resize"!==this.dragElement&&"s-resize"!==this.dragElement||(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=e,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=t)}},e.prototype.updateCursorStylesForLineArrow=function(e,t,i){for(var n,s=!1,o=this.parent,r=i.topLeftCircle.radius,a=0;a<5;a++)if(e>=(n=i.pointColl[a]).x-2*r&&e<=n.x+2*r&&t>=n.y-2*r&&t<=n.y+2*r){i.centerLeftCircle.startX=i.centerLeftCircle.startY=0,this.dragElement="w-resize",s=!0;break}if(!s)for(a=1;a<6;a++)if(e>=(n=i.pointColl[i.pointColl.length-a]).x-2*r&&e<=n.x+2*r&&t>=n.y-2*r&&t<=n.y+2*r){i.centerRightCircle.startX=i.centerRightCircle.startY=0,this.dragElement="e-resize",s=!0;break}if(!s)for(a=0;a<i.pointColl.length;a++){if(e>=(n=i.pointColl[a]).x-2*r&&e<=n.x+2*r&&t>=n.y-2*r&&t<=n.y+2*r){o.upperCanvas.style.cursor=o.cursor="move",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=e,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=t;break}o.upperCanvas.style.cursor=o.cursor="default"}return s},e.prototype.updateCursorStylesForPath=function(e,t,i){var n=!1,s=this.parent;return this.pathAdjustedIndex=this.setCursorForLineArrow(i,e,t,s.upperCanvas),"move"===s.cursor&&(n=!0,this.dragElement="pathDrag"),n||(s.upperCanvas.style.cursor=s.cursor="move",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=e,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=t),n},e.prototype.setTextSelection=function(e,t){var i=this.parent,n=i.activeObj.activePoint,s=i.transform.degree;(s=0===i.activeObj.shapeDegree?i.transform.degree:i.transform.degree-i.activeObj.shapeDegree)<0&&(s=360+s);for(var o=0,r=i.activeObj.flipObjColl.length;o<r;o++){var a=i.activeObj.flipObjColl[o].toLowerCase();switch(s){case 0:switch(a){case"horizontal":n={startX:n.endX-e,startY:n.startY,endX:n.endX,endY:n.startY+(t||0)};break;case"vertical":n.startY=n.endY-t,n={startX:n.startX,startY:n.startY,endX:n.startX+(e||0),endY:n.endY};break;default:n={startX:n.startX,startY:n.startY,endX:n.startX+(e||0),endY:n.startY+(t||0)}}break;case 90:switch(a){case"horizontal":n.endX=n.startX+t,n={startX:n.startX,startY:n.startY,endX:n.endX,endY:n.startY+(e||0)};break;case"vertical":n.startX=n.endX-t,n={startX:n.startX,startY:n.endY-e,endX:n.endX,endY:n.endY};break;default:n.startX=n.endX-t,n={startX:n.startX,startY:n.startY,endX:n.endX,endY:n.startY+(e||0)}}break;case 180:switch(a){case"horizontal":n.startY=n.endY-t,n={startX:n.startX,startY:n.startY,endX:n.startX+e,endY:n.endY};break;case"vertical":n.endY=n.startY+t,n={endX:n.endX,endY:n.endY,startX:n.endX-(e||0),startY:n.startY};break;default:n={endX:n.endX,endY:n.endY,startX:n.endX-(e||0),startY:n.endY-(t||0)}}break;case 270:switch(a){case"horizontal":n.startX=n.endX-t,n={startX:n.startX,startY:n.endY-(e||0),endX:n.endX,endY:n.endY};break;case"vertical":n={startX:n.startX,startY:n.startY,endX:n.startX+t,endY:n.startY+(e||0)};break;default:n.endX=n.startX+t,n={startX:n.startX,startY:n.endY-(e||0),endX:n.endX,endY:n.endY}}}}if(0===i.activeObj.flipObjColl.length)switch(s){case 0:n={startX:n.startX,startY:n.startY,endX:n.startX+(e||0),endY:n.startY+(t||0)};break;case 90:n.startX=n.endX-t,n={startX:n.startX,startY:n.startY,endX:n.endX,endY:n.startY+(e||0)};break;case 180:n={endX:n.endX,endY:n.endY,startX:n.endX-(e||0),startY:n.endY-(t||0)};break;case 270:n.endX=n.startX+t,n={startX:n.startX,startY:n.endY-(e||0),endX:n.endX,endY:n.endY}}n.width=n.endX-n.startX,n.height=n.endY-n.startY,i.activeObj.activePoint=n,360!==i.transform.degree&&-360!==i.transform.degree||(i.transform.degree=0)},e.prototype.setActivePoint=function(e,t){var i=this.parent,n=i.activeObj.activePoint;if(!sf.base.isNullOrUndefined(n))if(i.currObjType.isText){var s=e||0,o=t||i.activeObj.textSettings.fontSize;void 0===i.activeObj.textSettings.fontSize&&(i.activeObj.textSettings.fontSize=.1*Math.abs(i.baseImgCanvas.width-i.baseImgCanvas.height)),this.setTextSelection(s,o),this.mouseDownPoint.x=n.endX,this.mouseDownPoint.y=n.endY,void 0!==i.activeObj.horTopLine&&(i.activeObj.activePoint=sf.base.extend({},n,{},!0)),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}})}else if(e&&t)n.startX=this.mouseDownPoint.x=e,n.startY=this.mouseDownPoint.y=t,i.currObjType.isDragging=!0;else{var r=i.activeObj;(n={startX:r.horTopLine.startX,startY:r.horTopLine.startY,endX:r.horTopLine.endX,endY:r.horTopLine.endY}).width=n.endX-n.startX,n.height=n.endY-n.startY}},e.prototype.mouseDownEventHandler=function(e){var t=this,i=this.parent;if("touchstart"===e.type?this.isTouch=!0:this.isTouch=!1,"touchstart"!==e.type||e.currentTarget!==i.lowerCanvas||i.isImageLoaded){var n;this.isCropSelection=!1,this.isPan=!0,void 0!==i.activeObj.shape&&(n=i.activeObj.shape.split("-")),void 0!==n&&"crop"===n[0]&&(this.isCropSelection=!0),this.isCropSelection&&(this.dragCanvas=i.togglePan=!0);var s={point:this.setXYPoints(e)};sf.base.isBlazor()&&i.events&&!0===i.events.clicked.hasDelegate?i.dotNetRef.invokeMethodAsync("ClickEventAsync","click",s).then((function(i){t.clickEvent(i,e)})):(i.trigger("click",s),this.clickEvent(s,e))}},e.prototype.getImagePoints=function(e,t){var i=this.parent.img,n=i.destLeft,s=i.destTop,o=i.destWidth,r=i.destHeight;return e<n?e=n:e>n+o&&(e=n+o),t<s?t=s:t>s+r&&(t=s+r),{x:e,y:t}},e.prototype.clickEvent=function(e,t){var i=this.parent,n=i.activeObj.activePoint,s=e.point.x,o=e.point.y,r=i.activeObj.shape&&"text"===i.activeObj.shape?i.cursor:"default";if(i.isResize)return this.performEnterAction(),void(i.upperCanvas.style.cursor="default");if(JSON.stringify(i.frameObj)!==JSON.stringify(i.tempFrameObj))i.okBtn();else if(""!==this.currentDrawingShape){var a={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}}),this.initialPrevObj=a.currObj,this.initialPrevObj.objColl=sf.base.extend([],i.objColl,[],!0),this.initialPrevObj.pointColl=sf.base.extend([],i.pointColl,[],!0),this.initialPrevObj.afterCropActions=sf.base.extend([],i.afterCropActions,[],!0);var l={selPointColl:null};if(i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),this.initialPrevObj.selPointColl=sf.base.extend([],l.selPointColl,[],!0),this.setActivePoint(s,o),"path"===this.currentDrawingShape){var h=this.getImagePoints(s,o);i.activeObj.pointColl.push({x:h.x,y:h.y}),0!==n.width&&0!==n.height&&(n.width=0,n.height=0,n.startX=i.activeObj.pointColl[i.activeObj.pointColl.length-1].x,n.startY=i.activeObj.pointColl[i.activeObj.pointColl.length-1].y)}n.endX=n.startX,n.endY=n.startY,i.currObjType.isDragging=!0;var d=this.updatePrevShapeSettings(),c={cancel:!1,action:"draw-start",previousShapeSettings:d},p={cancel:!1,action:"move",previousShapeSettings:d};return this.shapeResizingArgs=c,this.shapeMovingArgs=p,void this.triggerShapeChange(c,p,"mouse-down")}i.notify("draw",{prop:"resetFrameZoom",onPropertyChange:!1,value:{isOk:!0}}),this.isCropSelection&&this.dragCanvas&&(this.setCursor(s,o),"move"!==i.cursor&&"crosshair"!==i.cursor&&"default"!==i.cursor&&"grab"!==i.cursor&&(this.isPan=!1)),i.activeObj.shape?this.isObjSelected=!0:this.isObjSelected=!1;var u={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:u}});var f=u.currObj,g=sf.base.extend({},i.activeObj,null,!0),m=this.isShapeTouch(t,this.isCropSelection),v=this.isFreehandDrawTouch(t,this.isCropSelection),b=m||this.isShapeClick(t,this.isCropSelection),y=this.applyCurrShape(b),C="none"!==i.textArea.style.display;if(this.isTouch&&!m&&g.shape&&!this.isCropSelection){this.applyObj(s,o)&&(i.okBtn(!0),i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}}));var w=sf.base.extend({},i.cropObj,{},!0);i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:f,previousObjColl:f.objColl,previousPointColl:f.pointColl,previousSelPointColl:f.selPointColl,previousCropObj:w,previousText:null,currentText:null,previousFilter:null,isCircleCrop:i.isCircleCrop}}),y&&i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})}if(m||i.togglePen||this.isCropSelection||(sf.base.isBlazor()?i.isImageLoaded&&i.updateToolbar(i.element,"imageLoaded","okBtnClick"):(i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}))),!this.dragCanvas||!this.isPan||"grab"!==i.cursor&&!this.isTouch||m||v||i.togglePen){var M=!1;!i.activeObj.shape||"line"!==i.activeObj.shape&&"arrow"!==i.activeObj.shape||(M=!0);var S=this.setXYPoints(t),x=S.x,N=S.y;if(this.applyObj(x,N)){if(i.okBtn(!0),y){var O=i.cursor;i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),i.cursor=O}i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}})}i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:x,y:N,isMouseDown:!0}});var E={index:null};i.notify("freehand-draw",{prop:"getFreehandDrawHoveredIndex",onPropertyChange:!1,value:{obj:E}});var I={freehandSelectedIndex:null};if(i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:I}}),this.isFhdPoint||this.isFhdCustomized&&!i.togglePen){if(!sf.base.isNullOrUndefined(I.freehandSelectedIndex)&&I.freehandSelectedIndex!==E.index){var T=E.index;if(i.okBtn(),this.isFhdCustomized=!1,i.notify("freehand-draw",{prop:"setFreehandDrawHoveredIndex",onPropertyChange:!1,value:{index:T}}),E.index>-1){var D=i.pointColl[E.index].strokeColor;i.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:D,strokeWidth:i.pointColl[E.index].strokeWidth}})}}I.freehandSelectedIndex=null,i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:I}});var j=sf.base.extend([],i.objColl,[],!0);if(!sf.base.isNullOrUndefined(E.index)&&E.index>-1)i.notify("freehand-draw",{prop:"selectFhd",value:{type:"ok"}}),i.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}}),sf.base.isBlazor()?(i.updateToolbar(i.element,"pen"),i.updateToolbar(i.element,"quickAccessToolbar","pen")):i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}});else if(I.freehandSelectedIndex){i.okBtn();D=i.pointColl[I.freehandSelectedIndex].strokeColor;i.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:D,strokeWidth:i.pointColl[I.freehandSelectedIndex].strokeWidth}})}else this.findTargetObj(x,N,!1)&&(i.objColl=j,this.findTarget(x,N,t.type),i.notify("draw",{prop:"redrawDownScale"}))}else{if(this.isFhdEditing){i.notify("freehand-draw",{prop:"cancelFhd",value:{type:"ok"}});var A=document.getElementById(i.element.id+"_quickAccessToolbarArea");A&&(A.style.display="none")}if(!sf.base.isBlazor()){var z=i.togglePen;i.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}),z&&i.freehandDraw(!0)}if(this.isFhdEditing=!1,M?this.setCursor(x,N):"default"!==r&&(i.upperCanvas.style.cursor=i.cursor=r),"crosshair"===i.cursor||sf.base.Browser.isDevice&&i.togglePen){if(i.togglePen){if(sf.base.isNullOrUndefined(i.activeObj.strokeSettings)){var k={strokeSettings:{}};i.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:k}}),i.activeObj.strokeSettings=k.strokeSettings}var P={penStrokeWidth:null};i.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:P}}),sf.base.isNullOrUndefined(P.penStrokeWidth)&&i.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:2}}),this.upperContext.strokeStyle=i.activeObj.strokeSettings.strokeColor,this.upperContext.fillStyle=i.activeObj.strokeSettings.strokeColor,i.notify("freehand-draw",{prop:"freehandDownHandler",onPropertyChange:!1,value:{e:t,canvas:i.upperCanvas}})}else i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height);i.currObjType.isActiveObj=!1,this.dragElement="",this.dragPoint.startX=this.dragPoint.startY=this.dragPoint.endX=this.dragPoint.endY=0}"crosshair"!==i.cursor&&"touchstart"===t.type.toLowerCase()||i.currObjType.isActiveObj&&"default"!==i.cursor&&!i.togglePen?(this.findTarget(x,N,t.type),i.notify("draw",{prop:"redrawDownScale"})):""!==i.currObjType.shape&&!i.currObjType.isCustomCrop||i.togglePen||"default"===i.cursor||this.setActivePoint(x,N),C&&i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}})}}else{if(this.applyObj(s,o)){if(i.okBtn(!0),y){var L=i.cursor;i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),i.cursor=L}i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}})}this.isFhdEditing&&(i.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.isFhdCustomized=!1,sf.base.isBlazor()||i.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}));var B=i.activeObj.shape;B&&["rectangle","ellipse","line","arrow","path","text","image"].indexOf(B)>-1&&(i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),sf.base.isBlazor()?i.updateToolbar(i.element,"imageLoaded"):(i.notify("toolbar",{prop:"setCurrentToolbar",value:{type:"main"}}),i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}))),this.canvasMouseDownHandler(t)}this.isShapeInserted=!1,this.tempActiveObj=sf.base.extend({},i.activeObj,{},!0)},e.prototype.mouseMoveEventHandler=function(e){var t=this.parent,i=t.cursor,n=t.upperCanvas.style.cursor;e.preventDefault(),this.timer&&this.timer>0&&(this.timer=0);var o=t.lowerCanvas.getBoundingClientRect();if("touchmove"!==e.type||2!==e.touches.length){var r,a;"mousemove"===e.type?(r=e.clientX,a=e.clientY):(this.touchEndPoint.x=r=e.touches[0].clientX,this.touchEndPoint.y=a=e.touches[0].clientY),r-=o.left,a-=o.top,this.canvasMouseMoveHandler(e);var l,h=!1;void 0!==t.activeObj.shape&&(l=t.activeObj.shape.split("-")),void 0!==l&&"crop"===l[0]&&(h=!0),h&&t.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),t.upperCanvas.style.cursor=n,t.cursor=i,(t.currObjType.isActiveObj&&(void 0!==t.activeObj.activePoint||t.objColl.length>0)&&!this.dragCanvas||void 0!==t.activeObj.activePoint)&&""===this.dragElement&&(this.setCursor(r,a),t.activeObj.activePoint&&(0===t.activeObj.activePoint.width||!sf.base.isNullOrUndefined(t.activeObj.currIndex)&&this.cursorTargetId!==t.activeObj.currIndex)&&"default"!==t.cursor&&"move"!==t.cursor&&"crosshair"!==t.cursor&&"grab"!==t.cursor&&"pointer"!==t.cursor&&(t.upperCanvas.style.cursor=t.cursor="move"),this.findTarget(r,a,e.type));var d=t.img,c=d.destLeft,p=d.destTop,u=d.destWidth,f=d.destHeight;t.currObjType.isDragging&&(this.upperContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.updateActivePoint(r,a,h),t.notify("shape",{prop:"updateTrianglePoints",onPropertyChange:!1,value:{obj:t.activeObj}}),this.isPreventDragging?(t.activeObj.activePoint.startX>c&&t.activeObj.activePoint.endX<c+u&&t.activeObj.activePoint.startY>p&&t.activeObj.activePoint.endY<p+f&&(this.isPreventDragging=!1),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}})):t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:null,saveContext:null,isPreventSelection:null}}),h&&(this.dragCanvas=t.togglePan=!0))}else{if(this.isFirstMove)this.startTouches=this.targetTouches(e.touches),this.tempTouches=[],this.tempTouches.push({x:e.touches[0].clientX||e.touches[0].pageX-t.lowerCanvas.offsetLeft-o.left,y:(e.touches[0].clientY||e.touches[0].pageY-t.lowerCanvas.offsetTop)-o.top}),this.tempTouches.push({x:(e.touches[1].clientX||e.touches[1].pageX-t.lowerCanvas.offsetLeft)-o.left,y:(e.touches[1].clientY||e.touches[1].pageY-t.lowerCanvas.offsetTop)-o.top});else{var g=(e.touches[0].clientX||e.touches[0].pageX-t.lowerCanvas.offsetLeft)-o.left,m=(e.touches[0].clientY||e.touches[0].pageY-t.lowerCanvas.offsetTop)-o.top,v=(e.touches[1].clientX||e.touches[1].pageX-t.lowerCanvas.offsetLeft)-o.left,b=(e.touches[1].clientY||e.touches[1].pageY-t.lowerCanvas.offsetTop)-o.top,y={x:g<v?v-(v-g)/2:g-(g-v)/2,y:m<b?b-(b-m)/2:m-(m-b)/2};if(this.currMousePoint.x!==y.x&&this.currMousePoint.y!==y.y){var C="";if("touchmove"===e.type&&(t.zoomSettings.zoomTrigger&s.Pinch)===s.Pinch){this.zoomType="Pinch";var w=this.calculateScale(this.startTouches,this.targetTouches(e.touches));this.startTouches=this.targetTouches(e.touches),w>1?C="zoomIn":w<1&&(C="zoomOut")}""!==C&&t.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:y.x,y:y.y,type:C,isResize:null}}),this.tempTouches=[],this.tempTouches.push({x:e.touches[0].clientX||e.touches[0].pageX-t.lowerCanvas.offsetLeft,y:e.touches[0].clientY||e.touches[0].pageY-t.lowerCanvas.offsetTop}),this.tempTouches.push({x:e.touches[1].clientX||e.touches[1].pageX-t.lowerCanvas.offsetLeft,y:e.touches[1].clientY||e.touches[1].pageY-t.lowerCanvas.offsetTop}),this.currMousePoint.x=y.x,this.currMousePoint.y=y.y,this.isPinching=!0}}this.isFirstMove=!1}},e.prototype.mouseUpEventHandler=function(e){var t=this.parent,i=t.element.id;if(sf.base.Browser.isDevice||!(t.element.querySelector("#"+i+"_contextualToolbar")&&!t.element.querySelector("#"+i+"_contextualToolbar").parentElement.classList.contains("e-hide")||t.element.querySelector("#"+i+"_headWrapper")&&!t.element.querySelector("#"+i+"_headWrapper").parentElement.classList.contains("e-hide"))){var n,s;"touchstart"===e.type?this.isTouch=!1:"touchend"===e.type&&e.stopImmediatePropagation(),e.preventDefault(),t.togglePan&&this.canvasMouseUpHandler(e),"mouseup"===e.type?(n=e.clientX,s=e.clientY):(n=this.touchEndPoint.x,s=this.touchEndPoint.y);var o=t.lowerCanvas.getBoundingClientRect();if(n-=o.left,s-=o.top,"touchend"===e.type&&(this.startTouches=this.tempTouches=[],this.isFirstMove=!1,"none"===t.textArea.style.display&&(this.timer=0),this.isPinching))return this.isPinching=!1,t.notify("draw",{prop:"redrawDownScale"}),(t.isCropTab||t.activeObj.shape)&&(t.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),t.notify("freehand-draw",{prop:"resetStraightenPoint"})),void(t.isStraightening&&(t.notify("draw",{prop:"resetStraightenDestPoints"}),t.notify("draw",{prop:"setDestForStraighten"})));var r,a=!1;if(void 0!==t.activeObj.shape&&(r=t.activeObj.shape.split("-")),void 0!==r&&"crop"===r[0]&&(a=!0),sf.base.isBlazor()&&t.eventType){if("pan"===t.eventType)t.events&&!0===t.events.onPanEnd.hasDelegate&&t.dotNetRef.invokeMethodAsync("PanEventAsync","OnPanEnd",t.panEventArgs);else if("resize"===t.eventType){if(!this.isCropSelection&&t.events&&!0===t.events.onShapeResizeEnd.hasDelegate)this.shapeResizingArgs.currentShapeSettings=this.updatePrevShapeSettings(),this.shapeResizingArgs.action=""!==this.currentDrawingShape?"drawing":"resize-end",t.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShapeResizeEnd",this.shapeResizingArgs,null).then((function(e){t.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings}})}));else if(this.shapeResizingArgs&&this.selectionResizingArgs&&t.events&&!0===t.events.onSelectionResizeEnd.hasDelegate){var l={type:t.activeObj.shape,startX:this.shapeResizingArgs.currentShapeSettings.startX,startY:this.shapeResizingArgs.currentShapeSettings.startY,width:this.shapeResizingArgs.currentShapeSettings.width,height:this.shapeResizingArgs.currentShapeSettings.height};this.selectionResizingArgs.currentSelectionSettings=l,this.selectionResizingArgs.action="resize-end",t.dotNetRef.invokeMethodAsync("SelectionEventAsync","OnSelectionResizeEnd",this.selectionResizingArgs).then((function(e){t.notify("shape",{prop:"updateSelectionChangeEventArgs",onPropertyChange:!1,value:{selectionSettings:e.currentSelectionSettings}})}))}}else this.shapeMovingArgs&&t.events&&!0===t.events.onShapeDragEnd.hasDelegate&&(this.shapeMovingArgs.currentShapeSettings=this.updatePrevShapeSettings(),this.shapeMovingArgs.action="drag-end",t.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShapeDragEnd",this.shapeMovingArgs,null).then((function(e){t.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings}})})));this.shapeResizingArgs=null,this.shapeMovingArgs=null,t.panEventArgs=null,t.eventType=null}if("path"!==this.currentDrawingShape){if(e.currentTarget===t.upperCanvas&&!t.isResize){if(this.pathAdjustedIndex=null,""!==this.currentDrawingShape){if("text"===this.currentDrawingShape){var h=sf.base.extend({},t.cropObj,{},!0);t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:this.initialPrevObj,previousObjColl:this.initialPrevObj.objColl,previousPointColl:this.initialPrevObj.pointColl,previousSelPointColl:this.initialPrevObj.selPointColl,previousCropObj:h,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}else t.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:this.initialPrevObj.objColl}});this.isShapeInserted=!0,this.currentDrawingShape="",0===t.activeObj.activePoint.width&&0===t.activeObj.activePoint.height&&t.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}});var d=this.updatePrevShapeSettings(),c={cancel:!1,action:"draw-end",previousShapeSettings:d},p={cancel:!1,action:"move",previousShapeSettings:d};this.shapeResizingArgs=c,this.shapeMovingArgs=p,this.triggerShapeChange(c,p,"mouse-up")}this.adjustActObjForLineArrow(),this.updPtCollForShpRot(),t.currObjType.shape=t.currObjType.shape.toLowerCase();var u=sf.base.extend({},t.cropObj,{},!0),f={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:f}});var g=f.currObj;g.objColl=sf.base.extend([],t.objColl,[],!0),g.pointColl=sf.base.extend([],t.pointColl,[],!0),g.afterCropActions=sf.base.extend([],t.afterCropActions,[],!0);var m={selPointColl:null};if(t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:m}}),g.selPointColl=sf.base.extend([],m.selPointColl,[],!0),t.togglePen||a||(this.tempObjColl&&0!==t.activeObj.activePoint.width&&(t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.objColl.push(t.activeObj),JSON.stringify(t.activeObj.activePoint)!==JSON.stringify(this.tempActiveObj.activePoint)&&t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:g,previousObjColl:this.tempObjColl,previousPointColl:g.pointColl,previousSelPointColl:g.selPointColl,previousCropObj:u,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.redrawShape(t.objColl[t.objColl.length-1],!0),this.tempObjColl=void 0),this.isFhdEditing||(this.applyCurrActObj(n,s),t.currObjType.isResize=!1,sf.base.isBlazor()||t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}))),t.activeObj){var v,b=!1;void 0!==t.activeObj.shape&&(v=t.activeObj.shape.split("-")),(void 0===v&&(t.currObjType.isCustomCrop||t.togglePen)||void 0!==v&&"crop"===v[0])&&(b=!0);var y=t.activeObj.shape;if(sf.base.isBlazor()){["rectangle","ellipse","line","arrow","path","image"].indexOf(y)>-1?t.updateToolbar(t.element,t.activeObj.shape):"text"===t.activeObj.shape&&"none"===t.textArea.style.display&&t.updateToolbar(t.element,"text")}else{if(["rectangle","ellipse","line","arrow","path"].indexOf(y)>-1)t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});else if("text"===y)"none"===t.textArea.style.display&&t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});else if(this.isFhdEditing)t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});else if(!b){t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:!1,isZooming:null}})}t.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})}}}void 0!==t.activeObj.shape&&(r=t.activeObj.shape.split("-")),void 0!==r&&"crop"===r[0]&&(a=!0),t.activeObj.shape&&!a&&e.currentTarget===t.upperCanvas&&"none"===t.textArea.style.display&&("text"===t.activeObj.shape?sf.base.isBlazor()||t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):sf.base.isBlazor()||t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),sf.base.isBlazor()?t.updateToolbar(t.element,"quickAccessToolbar",t.activeObj.shape):(t.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),t.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}))),t.togglePen&&e.currentTarget===t.upperCanvas?t.notify("freehand-draw",{prop:"freehandUpHandler",onPropertyChange:!1,value:{e:e,canvas:t.upperCanvas,context:this.upperContext}}):t.currObjType.shape="",this.dragElement="",t.currObjType.isInitialLine=t.currObjType.isDragging=!1,this.selMouseUpEvent()}else{var C=e.srcElement,w=C.parentElement.id,M=t.element.id;e.currentTarget!==t.upperCanvas&&e.currentTarget!==t.lowerCanvas&&t.activeObj.pointColl.length>0&&(C.classList.contains("e-upload-icon")||w===M+"_zoomIn"||w===M+"_zoomOut"||w===M+"_annotationBtn"||w===M+"_borderColorBtn"||w===M+"_borderWidthBtn"||w===M+"_saveBtn")&&(t.notify("shape",{prop:"stopPathDrawing",onPropertyChange:!1,value:{e:e,isApply:!0}}),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:t.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:!0}}))}}},e.prototype.adjustActObjForLineArrow=function(e){var t=!1,i=this.parent;if((e=e||i.activeObj).shape&&("line"===e.shape||"arrow"===i.activeObj.shape)){var n=void 0;if(("e-resize"===this.dragElement&&e.activePoint.endX<e.activePoint.startX||"w-resize"===this.dragElement&&e.activePoint.startX>e.activePoint.endX)&&(t=!0,n=e.activePoint.startX,e.activePoint.startX=e.activePoint.endX,e.activePoint.endX=n,n=e.activePoint.startY,e.activePoint.startY=e.activePoint.endY,e.activePoint.endY=n),e.activePoint.width=Math.abs(e.activePoint.endX-e.activePoint.startX),e.activePoint.height=Math.abs(e.activePoint.endY-e.activePoint.startY),"path"!==i.activeObj.shape){i.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:e}});for(var s=0;s<e.pointColl.length;s++)e.pointColl[s].ratioX=(e.pointColl[s].x-i.img.destLeft)/i.img.destWidth,e.pointColl[s].ratioY=(e.pointColl[s].y-i.img.destTop)/i.img.destHeight}}return t},e.prototype.updPtCollForShpRot=function(e){var t=this.parent;if((e=e||t.activeObj).shape&&0!==e.rotatedAngle){t.notify("shape",{prop:"setPointCollForShapeRotation",onPropertyChange:!1,value:{obj:e}});var i=t.img,n=i.destLeft,s=i.destTop,o=i.destWidth,r=i.destHeight,a=e.horTopLinePointColl,l=e.horBottomLinePointColl,h=e.verLeftLinePointColl,d=e.verRightLinePointColl,c=function(e){e.ratioX=(e.x-n)/o,e.ratioY=(e.y-s)/r};a.forEach(c),l.forEach(c),h.forEach(c),d.forEach(c)}},e.prototype.setXYPoints=function(e){var t,i;e.preventDefault(),"mousedown"===e.type?(t=e.clientX,i=e.clientY):(this.touchEndPoint.x=t=e.touches[0].clientX,this.touchEndPoint.y=i=e.touches[0].clientY);var n=this.parent.lowerCanvas.getBoundingClientRect();return{x:t-=n.left,y:i-=n.top}},e.prototype.getCurrentIndex=function(){for(var e,t=this.parent,i=0,n=t.objColl.length;i<n;i++)if(t.activeObj.currIndex===t.objColl[i].currIndex){e=i;break}return e},e.prototype.isShapeClick=function(e,t){var i=this.parent,n=!1;if(i.togglePen)return n;if(i.activeObj.shape&&"text"===i.activeObj.shape&&this.isShapeInserted){var s="block"===i.textArea.style.display||"inline-block"===i.textArea.style.display,o=sf.base.extend({},i.activeObj,null,!0);i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}});var r=this.setXYPoints(e),a=r.x,l=r.y;if(n=this.findTargetObj(a,l,t),t||(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),n&&i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}})),s){i.textArea.value=i.objColl[i.objColl.length-1].keyHistory,i.textArea.style.display="block",i.activeObj=o;var h=this.getCurrentIndex();sf.base.isNullOrUndefined(h)?i.objColl.pop():i.objColl.splice(h,1)}else if(!n&&o.shape){i.activeObj=o;h=this.getCurrentIndex();sf.base.isNullOrUndefined(h)||JSON.stringify(i.activeObj.activePoint)!==JSON.stringify(i.objColl[h].activePoint)?sf.base.isNullOrUndefined(i.activeObj.currIndex)&&i.objColl.pop():i.objColl.splice(h,1)}}return n},e.prototype.isShapeTouch=function(e,t){var i=this.parent,n=!1;if("touchstart"===e.type&&!i.togglePen){i.activeObj&&"text"===i.activeObj.shape&&(this.timer=setTimeout(this.setTimer.bind(this),1e3,e));var s="block"===i.textArea.style.display||"inline-block"===i.textArea.style.display,o=sf.base.extend({},i.activeObj,null,!0);i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}});var r=this.setXYPoints(e),a=r.x,l=r.y;if(n=this.findTargetObj(a,l,t),t||this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),s){i.textArea.value=i.objColl[i.objColl.length-1].keyHistory,i.textArea.style.display="block",i.activeObj=o;var h=this.getCurrentIndex();sf.base.isNullOrUndefined(h)?i.objColl.pop():i.objColl.splice(h,1)}else if(!n&&o.shape){i.activeObj=o;h=this.getCurrentIndex();t||(sf.base.isNullOrUndefined(h)||JSON.stringify(i.activeObj.activePoint)!==JSON.stringify(i.objColl[h].activePoint)?sf.base.isNullOrUndefined(i.activeObj.currIndex)&&i.objColl.pop():i.objColl.splice(h,1))}}return n},e.prototype.isFreehandDrawTouch=function(e,t){var i=this.parent,n=!1;if("touchstart"===e.type&&!t&&!i.togglePen){var s="block"===i.textArea.style.display||"inline-block"===i.textArea.style.display,o=sf.base.extend({},i.activeObj,null,!0);i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}});var r=this.setXYPoints(e),a=r.x,l=r.y;if(this.setCursor(a,l),this.isFhdPoint&&(n=!0),s){i.textArea.value=i.objColl[i.objColl.length-1].keyHistory,i.textArea.style.display="block",i.activeObj=o;var h=this.getCurrentIndex();sf.base.isNullOrUndefined(h)?i.objColl.pop():i.objColl.splice(h,1)}else if(o.shape){i.activeObj=o;h=this.getCurrentIndex();t||(sf.base.isNullOrUndefined(h)||JSON.stringify(i.activeObj.activePoint)!==JSON.stringify(i.objColl[h].activePoint)?sf.base.isNullOrUndefined(i.activeObj.currIndex)&&i.objColl.pop():i.objColl.splice(h,1))}}return n},e.prototype.applyObj=function(e,t){var i=this.parent,n=!1,s=i.activeObj.activePoint,o=s.startX,r=s.startY,a=s.endX,l=s.endY;if(i.activeObj.shape&&["rectangle","ellipse","line","arrow","path","image","text"].indexOf(i.activeObj.shape)>-1){var h=i.activeObj.topLeftCircle.radius;n=!(e>=o-2*h&&e<=a+2*h&&t>=r-2*h&&t<=l+2*h)&&("default"===i.upperCanvas.style.cursor||"grab"===i.upperCanvas.style.cursor||"crosshair"===i.upperCanvas.style.cursor||"pointer"===i.upperCanvas.style.cursor||"move"===i.upperCanvas.style.cursor)}return n},e.prototype.applyCurrShape=function(e){var t=this.parent,i=!1;if(t.togglePen)return i;var n=sf.base.extend({},t.activeObj,null,!0);if(this.isShapeInserted&&"text"===t.activeObj.shape&&e&&(this.isInitialTextEdited=!0,t.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!0}})),"block"===t.textArea.style.display||"inline-block"===t.textArea.style.display){var s=sf.base.extend({},t.activeObj,null,!0);t.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),n=sf.base.extend({},t.objColl[t.objColl.length-1],null,!0),t.objColl.pop(),t.activeObj=sf.base.extend({},s,null,!0),t.textArea.value=n.keyHistory,t.textArea.style.display="block";var o=n.strokeSettings&&n.strokeSettings.strokeColor?"rgb"===n.strokeSettings.strokeColor.split("(")[0]?this.rgbToHex(parseFloat(n.strokeSettings.strokeColor.split("(")[1].split(",")[0]),parseFloat(n.strokeSettings.strokeColor.split("(")[1].split(",")[1]),parseFloat(n.strokeSettings.strokeColor.split("(")[1].split(",")[2]),parseFloat(n.strokeSettings.strokeColor.split("(")[1].split(",")[3])):n.strokeSettings.strokeColor:null;o&&"#ffffff"===o&&(o="#fff"),this.tempActiveObj.strokeSettings&&this.tempActiveObj.strokeSettings.strokeColor&&"#ffffff"===this.tempActiveObj.strokeSettings.strokeColor&&(this.tempActiveObj.strokeSettings.strokeColor="#fff"),(n.keyHistory!==this.tempActiveObj.keyHistory||o&&o!==this.tempActiveObj.strokeSettings.strokeColor||n.textSettings&&n.textSettings.fontFamily!==this.tempActiveObj.textSettings.fontFamily||n.textSettings&&Math.round(n.textSettings.fontSize)!==Math.round(this.tempActiveObj.textSettings.fontSize)||n.textSettings&&Math.round(n.textSettings.fontRatio)!==Math.round(this.tempActiveObj.textSettings.fontRatio)||n.textSettings&&n.textSettings.bold!==this.tempActiveObj.textSettings.bold||n.textSettings&&n.textSettings.italic!==this.tempActiveObj.textSettings.italic||n.textSettings&&n.textSettings.underline!==this.tempActiveObj.textSettings.underline)&&(i=!0),this.isInitialTextEdited&&!i&&(i=!0,this.isInitialTextEdited=!1)}else this.tempActiveObj.activePoint.height=Math.abs(this.tempActiveObj.activePoint.height),i=JSON.stringify(n)!==JSON.stringify(this.tempActiveObj);return i},e.prototype.canvasMouseDownHandler=function(e){var t,i,n=this.parent;e.preventDefault(),"mousedown"===e.type?(t=e.offsetX||e.pageX-n.lowerCanvas.offsetLeft,i=e.offsetY||e.pageY-n.lowerCanvas.offsetTop):(t=e.touches[0].clientX||e.touches[0].pageX-n.lowerCanvas.offsetLeft,i=e.touches[0].clientY||e.touches[0].pageY-n.lowerCanvas.offsetTop);var s=n.lowerCanvas.getBoundingClientRect();t-=s.left,i-=s.top,this.panDown={x:t,y:i};var o={tempPanMove:null};n.notify("transform",{prop:"getTempPanMove",onPropertyChange:!1,value:{obj:o}}),sf.base.isNullOrUndefined(o.tempPanMove)&&n.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:{x:t,y:i}}})},e.prototype.canvasMouseMoveHandler=function(e){var t=this.parent,i={bool:null};if(t.notify("toolbar",{prop:"getFrameToolbar",onPropertyChange:!1,value:{obj:i}}),t.isResize||i.bool)t.upperCanvas.style.cursor="default";else{var n,s;this.dragCanvas?t.lowerCanvas.style.cursor="grab":(this.dragCanvas=t.togglePan=!1,t.lowerCanvas.style.cursor=t.upperCanvas.style.cursor=t.cursor="default"),"mousemove"===e.type?(n=e.offsetX,s=e.offsetY):(n=e.touches[0].clientX||e.touches[0].pageX-t.lowerCanvas.offsetLeft,s=e.touches[0].clientY||e.touches[0].pageY-t.lowerCanvas.offsetTop);var o=t.lowerCanvas.getBoundingClientRect(),r={x:n-=o.left,y:s-=o.top};t.notify("transform",{prop:"setPanMove",onPropertyChange:!1,value:{point:{x:n,y:s}}}),this.panDown&&r&&t.togglePan&&this.dragCanvas&&((t.isCropTab||t.activeObj.shape)&&(t.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),t.notify("freehand-draw",{prop:"resetStraightenPoint"})),t.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:null,yDiff:null}}))}},e.prototype.canvasMouseUpHandler=function(e){var t=this.parent;e.preventDefault();var i={panMove:null};t.notify("transform",{prop:"getPanMove",onPropertyChange:!1,value:{obj:i}}),t.togglePan&&this.panDown&&i.panMove&&t.togglePan&&this.dragCanvas&&(this.panDown=null,t.notify("transform",{prop:"setPanMove",onPropertyChange:!1,value:{point:null}}),t.notify("transform",{prop:"setTempPanMove",onPropertyChange:!1,value:{point:null}})),"path"!==this.currentDrawingShape&&(t.currObjType.isDragging=!1)},e.prototype.touchStartHandler=function(e){e.preventDefault();var t=this.parent;0===this.touchTime?this.touchTime=(new Date).getTime():(new Date).getTime()-this.touchTime<400?(t.notify("shape",{prop:"stopPathDrawing",onPropertyChange:!1,value:{e:e,isApply:null}}),this.touchTime=0):this.touchTime=(new Date).getTime(),2===e.touches.length?this.isFirstMove=!0:this.mouseDownEventHandler(e),sf.base.EventHandler.add(t.lowerCanvas,"touchend",this.mouseUpEventHandler,this),sf.base.EventHandler.add(t.lowerCanvas,"touchmove",this.mouseMoveEventHandler,this),sf.base.EventHandler.add(t.upperCanvas,"touchend",this.mouseUpEventHandler,this),sf.base.EventHandler.add(t.upperCanvas,"touchmove",this.mouseMoveEventHandler,this)},e.prototype.unwireEvent=function(){var e=this.parent;sf.base.EventHandler.remove(e.lowerCanvas,"touchend",this.mouseUpEventHandler),sf.base.EventHandler.remove(e.lowerCanvas,"touchmove",this.mouseMoveEventHandler),sf.base.EventHandler.remove(e.upperCanvas,"touchend",this.mouseUpEventHandler),sf.base.EventHandler.remove(e.upperCanvas,"touchmove",this.mouseMoveEventHandler)},e.prototype.keyDownEventHandler=function(e){var t=this,i=this.parent;!e.ctrlKey||"+"!==e.key&&"-"!==e.key||e.preventDefault();var n={fileName:"",fileType:null};i.notify("draw",{prop:"getFileName",onPropertyChange:!1,value:{obj:n}});var o={fileName:n.fileName,fileType:n.fileType,cancel:!1};switch(e.key){case e.ctrlKey&&"s":sf.base.isBlazor()&&i.events&&!0===i.events.saving.hasDelegate?i.dotNetRef.invokeMethodAsync("BeforeSaveEventAsync","BeforeSave",o).then((function(i){t.beforeSaveEvent(i,e)})):(i.trigger("beforeSave",o),this.beforeSaveEvent(o,e));break;case e.ctrlKey&&"z":i.allowUndoRedo&&i.notify("undo-redo",{prop:"call-undo"});break;case e.ctrlKey&&"y":i.allowUndoRedo&&i.notify("undo-redo",{prop:"call-redo"});break;case e.ctrlKey&&"+":(i.zoomSettings.zoomTrigger&s.Commands)===s.Commands&&(this.zoomType="Commands",i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null},isResize:null}),i.notify("draw",{prop:"redrawDownScale"}),(i.isCropTab||i.activeObj.shape)&&(i.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),i.notify("freehand-draw",{prop:"resetStraightenPoint"})),i.isStraightening&&(i.notify("draw",{prop:"resetStraightenDestPoints"}),i.notify("draw",{prop:"setDestForStraighten"})));break;case e.ctrlKey&&"-":(i.zoomSettings.zoomTrigger&s.Commands)===s.Commands&&(this.zoomType="Commands",i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null},isResize:null}),i.notify("draw",{prop:"redrawDownScale"}),(i.isCropTab||i.activeObj.shape)&&(i.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),i.notify("freehand-draw",{prop:"resetStraightenPoint"})),i.isStraightening&&(i.notify("draw",{prop:"resetStraightenDestPoints"}),i.notify("draw",{prop:"setDestForStraighten"})));break;case"Delete":this.deleteItem();break;case"Escape":i.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}});break;case"Enter":this.performEnterAction(e);break;case"Tab":this.performTabAction();break;default:!sf.base.Browser.isDevice||"block"!==i.textArea.style.display&&"inline-block"!==i.textArea.style.display||setTimeout(this.textKeyDown.bind(this),1,e)}},e.prototype.performEnterAction=function(e){var t=this.parent;if(t.isResize){if(!this.isValueUpdated())return;var i=this.getNumTextValue(),n=t.element.querySelector("#"+t.element.id+"_aspectratio"),s=t.element.querySelector(".e-ie-toolbar-aspect-ratio-btn");if(i&&i.x&&i.y&&(n||s&&!s.classList.contains("e-hidden")?t.notify("transform",{prop:"resize",value:{width:i.x,height:null,isAspectRatio:!0}}):t.notify("transform",{prop:"resize",value:{width:i.x,height:i.y,isAspectRatio:!1}})),sf.base.isBlazor()){var o=this.parent.element.querySelector(".e-ie-toolbar-e-resize-height-input .e-textbox"),r=this.parent.element.querySelector(".e-ie-toolbar-e-resize-width-input .e-textbox");s&&s.classList.contains("e-hidden")&&(o&&""===o.value&&(o.value=o.placeholder,o.value=o.placeholder),r&&""===r.value&&(r.value=r.placeholder,r.value=r.placeholder))}else{o=t.element.querySelector("#"+t.element.id+"_resizeHeight"),r=t.element.querySelector("#"+t.element.id+"_resizeWidth");if(sf.base.isNullOrUndefined(n)){if(o){var a=sf.base.getComponent(o,"numerictextbox");o&&""===o.value&&(a.value=parseFloat(a.placeholder),o.value=a.placeholder+"px")}if(r){a=sf.base.getComponent(r,"numerictextbox");r&&""===r.value&&(a.value=parseFloat(a.placeholder),r.value=a.placeholder+"px")}}}t.notify("draw",{prop:"redrawDownScale"})}else{var l=void 0;t.activeObj.shape&&(l=t.activeObj.shape.split("-")),e&&this.isKeyBoardCrop(e)&&t.activeObj.horTopLine&&t.activeObj.shape&&"crop"===l[0]&&t.crop()}},e.prototype.isKeyBoardCrop=function(e){var t=!1,i=e.target;return i.id!==this.parent.element.id+"_ok"&&""!==i.id||sf.base.isBlazor()||(t=!0),t},e.prototype.beforeSaveEvent=function(e,t){var i=this.parent;e.cancel||i.notify("export",{prop:"export",onPropertyChange:!1,value:{type:e.fileType,fileName:e.fileName}}),t.preventDefault(),t.stopImmediatePropagation()},e.prototype.handleScroll=function(e){var t,i,n=this.parent,o=!1;"mousewheel"===e.type&&(t=e.clientX,i=e.clientY);var r=n.lowerCanvas.getBoundingClientRect();if(t-=r.left,i-=r.top,t>n.img.destLeft&&t<n.img.destLeft+n.img.destWidth&&i>n.img.destTop&&i<n.img.destTop+n.img.destHeight&&(o=!0),e.stopPropagation(),!0===e.ctrlKey&&o){e.preventDefault(),!n.isCropTab&&n.activeObj.shape&&"crop"!==n.activeObj.shape.split("-")[0]&&(n.okBtn(),sf.base.isBlazor()||n.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}));var a="";"mousewheel"===e.type&&(n.zoomSettings.zoomTrigger&s.MouseWheel)===s.MouseWheel&&(this.zoomType="MouseWheel",a=e.wheelDelta>0?"zoomIn":"zoomOut"),""!==a&&(n.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:t,y:i,type:a,isResize:null}}),n.notify("draw",{prop:"redrawDownScale"}),(n.isCropTab||n.activeObj.shape)&&(n.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),n.notify("freehand-draw",{prop:"resetStraightenPoint"})),n.isStraightening&&(n.notify("draw",{prop:"resetStraightenDestPoints"}),n.notify("draw",{prop:"setDestForStraighten"})))}},e.prototype.textKeyDown=function(e){var t=this.parent;if(0===t.activeObj.rotatedAngle){"\r"===String.fromCharCode(e.which)&&(this.textRow+=1),t.textArea.setAttribute("rows",this.textRow.toString()),t.textArea.style.height="auto",t.textArea.style.height=t.textArea.scrollHeight+"px",t.notify("shape",{prop:"setTextBoxWidth",onPropertyChange:!1,value:{e:e}}),sf.base.Browser.isDevice&&(t.textArea.style.width=parseFloat(t.textArea.style.width)+t.textArea.style.fontSize+"px");var i=t.textArea.value.split("\n");this.textRow=i.length,t.textArea.setAttribute("rows",this.textRow.toString()),this.isInitialTextEdited=!1}},e.prototype.clearSelection=function(){var e=this.parent;!e.disabled&&e.isImageLoaded&&(e.togglePen=!1,e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.dragElement="",this.dragPoint.startX=this.dragPoint.startY=this.dragPoint.endX=this.dragPoint.endY=0,e.currObjType.shape="",this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.currObjType.isActiveObj=!0,e.currObjType.isCustomCrop=!1,e.upperCanvas.style.cursor=e.cursor="default")},e.prototype.setDragDirection=function(e,t){var i=this.parent,n=i.activeObj.activePoint;i.img.destWidth>i.img.destHeight?(n.startX=this.dragPoint.startX=e/2-t/2+7.5,n.startY=this.dragPoint.startY=t/2-t/2+7.5,n.endX=e/2+t/2-7.5,n.endY=t/2+t/2-7.5):(n.startY=this.dragPoint.startX=t/2-e/2+7.5,n.endY=t/2+e/2-7.5,n.startX=this.dragPoint.startX=7.5,n.endX=e-7.5)},e.prototype.calcShapeRatio=function(e,t,i,n){for(var s=this.parent,o=s.activeObj.activePoint,r=i,a=n,l=r>=a?r:a,h=l*(e/t),d=l,c=this.getScale(h,r),p=[],u=s.img,f=u.destLeft,g=u.destTop,m=u.destWidth,v=u.destHeight,b=0;b<2;b++)0===b?p.push(h*c):p.push(d*c);h=p[0],d=p[1];var y=this.getScale(d,a),C=[];for(b=0;b<2;b++)0===b?C.push(h*y):C.push(d*y);h=C[0],d=C[1],o.width=h,o.height=d,o.startX=7.5+(this.dragPoint.startX=(r-h)/2),o.startY=7.5+(this.dragPoint.startY=(a-d)/2),o.endX=(r-h)/2+h-7.5,o.endY=(a-d)/2+d-7.5,o.startX<f&&f+m>s.lowerCanvas.clientWidth&&(o.startX=f,o.endX=o.startX+h-7.5),o.startY<g&&g+v>s.lowerCanvas.clientHeight&&(o.startY=g,o.endY=o.startY+d-7.5),o.width=o.endX-o.startX,o.height=o.endY-o.startY},e.prototype.getScale=function(e,t){return e>t?t/e:1},e.prototype.findTarget=function(e,t,i){var n=this.parent;if("mousedown"===i.toLowerCase()||"touchstart"===i.toLowerCase()){var s=!1;n.activeObj.shape&&"crop"===n.activeObj.shape.split("-")[0]&&(s=!0),this.findTargetObj(e,t,s),this.updateCursorStyles(e,t,i)}else{var o=n.activeObj,r=o.topLeftCircle,a=o.topCenterCircle,l=o.topRightCircle,h=o.centerLeftCircle,d=o.centerRightCircle,c=o.bottomLeftCircle,p=o.bottomCenterCircle,u=o.bottomRightCircle;switch(this.dragElement.toLowerCase()){case"nw-resize":r.startX=e,r.startY=t;break;case"n-resize":a.startX=e,a.startY=t;break;case"ne-resize":l.startX=e,l.startY=t;break;case"w-resize":h.startX=e,h.startY=t;break;case"e-resize":d.startX=e,d.startY=t;break;case"sw-resize":c.startX=e,c.startY=t;break;case"s-resize":p.startX=e,p.startY=t;break;case"se-resize":u.startX=e,u.startY=t;break;default:this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=e,this.dragPoint.endY=t)}}},e.prototype.findTargetObj=function(e,t,i){var n=this,s=this.parent,o=!1;if(0!==s.objColl.length&&!s.currObjType.isCustomCrop&&!i){for(var r=0,a=void 0,l=0;l<s.objColl.length;l++){var h=s.upperCanvas.style.cursor;this.setCursor(e,t);var d=sf.base.extend({},s.objColl[l],{},!0),c=d.topLeftCircle.radius;if("line"===d.shape||"arrow"===d.shape){for(var p=0;p<d.pointColl.length;p++)if(e>=d.pointColl[p].x-2*c&&e<=d.pointColl[p].x+2*c&&t>=d.pointColl[p].y-2*c&&t<=d.pointColl[p].y+2*c){if(this.tempActiveObj&&this.tempActiveObj.activePoint&&JSON.stringify(this.tempActiveObj.activePoint)===JSON.stringify(d.activePoint)){a=l;break}this.isTouch||"move"===s.cursor||"grab"===s.cursor||this.isShapeInserted?(0===r||r>e-d.activePoint.startX)&&(r=e-s.objColl[l].activePoint.startX,a=l):s.objColl[l].currIndex===this.tempActiveObj.currIndex&&(a=l);break}}else if("path"===d.shape){var u=this.setCursorForPath(d,e,t,s.upperCanvas);if("default"!==u&&"grab"!==u){if(this.tempActiveObj&&this.tempActiveObj.activePoint&&JSON.stringify(this.tempActiveObj.activePoint)===JSON.stringify(d.activePoint)){a=l;break}this.isTouch||"move"===s.cursor||"grab"===s.cursor||this.isShapeInserted?(0===r||r>e-d.activePoint.startX)&&(r=e-s.objColl[l].activePoint.startX,a=l):s.objColl[l].currIndex===this.tempActiveObj.currIndex&&(a=l)}}else if(0!==d.rotatedAngle){var f=this.setCursorForRotatedObject(d,e,t,s.upperCanvas);if("default"!==f&&"grab"!==f){if(this.tempActiveObj&&this.tempActiveObj.activePoint&&JSON.stringify(this.tempActiveObj.activePoint)===JSON.stringify(d.activePoint)){a=l;break}this.isTouch||"move"===s.cursor||"grab"===s.cursor||this.isShapeInserted?(0===r||r>e-d.activePoint.startX)&&(r=e-s.objColl[l].activePoint.startX,a=l):s.objColl[l].currIndex===this.tempActiveObj.currIndex&&(a=l)}}else{var g=this.getTransRotationPoint(d);if(e>=d.activePoint.startX-2*c&&e<=d.activePoint.endX+2*c&&t>=d.activePoint.startY-2*c&&t<=d.activePoint.endY+2*c||g&&e>=g.x-2*c&&e<=g.x+2*c&&t>=g.y-2*c&&t<=g.y+2*c){if(this.tempActiveObj&&this.tempActiveObj.activePoint&&JSON.stringify(this.tempActiveObj.activePoint)===JSON.stringify(d.activePoint)){a=l;break}this.isTouch||"move"===h||"grabbing"===h||this.isShapeInserted||"move"===s.cursor||"grabbing"===s.cursor?(0===r||r>e-d.activePoint.startX)&&(r=e-s.objColl[l].activePoint.startX,a=l):s.objColl[l].currIndex===this.tempActiveObj.currIndex&&(a=l)}}}if(sf.base.isNullOrUndefined(a))s.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),o=!1;else{this.tempObjColl=sf.base.extend([],s.objColl,[],!0),s.currObjType.isCustomCrop=!1,s.activeObj=sf.base.extend({},s.objColl[a],{},!0);var m=sf.base.extend({},s.objColl[a],{},!0);if(s.objColl.splice(a,1),0===s.transform.degree){var v=this.lowerContext.filter;this.lowerContext.clearRect(0,0,s.lowerCanvas.width,s.lowerCanvas.height),s.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter="none",s.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),s.activeObj=sf.base.extend({},v,{},!0),s.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=v,this.getCurrentFlipState()}else s.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1}),s.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}});s.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(s.currSelectionPoint&&"crop-circle"===s.currSelectionPoint.shape||s.isCircleCrop)&&s.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),s.activeObj=sf.base.extend({},m,{},!0),this.setActivePoint(),s.activeObj=sf.base.extend({},m,{},!0);var b=sf.base.extend({},s.activeObj.strokeSettings,{},!0);s.notify("draw",{prop:"setTempStrokeSettings",onPropertyChange:!1,value:{tempStrokeSettings:b}});var y=sf.base.extend({},s.activeObj.textSettings,{},!0);s.notify("draw",{prop:"setTempTextSettings",onPropertyChange:!1,value:{tempTextSettings:y}});var C=this.updatePrevShapeSettings(),w={cancel:!1,action:"select",previousShapeSettings:C,currentShapeSettings:C};"line"!==s.activeObj.shape&&"arrow"!==s.activeObj.shape||(w.currentShapeSettings.width=s.activeObj.activePoint.endX-s.activeObj.activePoint.startX,w.currentShapeSettings.height=s.activeObj.activePoint.endY-s.activeObj.activePoint.startY),this.isCropSelection=!1;var M=void 0;if(void 0!==s.activeObj.shape&&(M=s.activeObj.shape.split("-")),void 0!==M&&"crop"===M[0]&&(this.isCropSelection=!0),!this.isCropSelection&&sf.base.isBlazor()&&sf.base.isNullOrUndefined(s.eventType)&&s.events&&!0===s.events.shapeChanging.hasDelegate)s.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",w,null).then((function(e){n.shapeEvent(e)}));else if(this.isCropSelection){var S={action:w.action,previousSelectionSettings:{type:s.getSelectionType(s.activeObj.shape),startX:w.previousShapeSettings.startX,startY:w.previousShapeSettings.startY,width:w.previousShapeSettings.width,height:w.previousShapeSettings.height},currentSelectionSettings:{type:s.getSelectionType(s.activeObj.shape),startX:w.currentShapeSettings.startX,startY:w.currentShapeSettings.startY,width:w.currentShapeSettings.width,height:w.currentShapeSettings.height}};sf.base.isBlazor()&&s.events&&!0===s.events.onSelectionResizeStart.hasDelegate?s.dotNetRef.invokeMethodAsync("SelectionEventAsync","OnSelectionResizeStart",S).then((function(e){w.currentShapeSettings.startX=e.currentSelectionSettings.startX,w.currentShapeSettings.startY=e.currentSelectionSettings.startY,w.currentShapeSettings.width=e.currentSelectionSettings.width,w.currentShapeSettings.height=e.currentSelectionSettings.height,n.shapeEvent(w)})):(s.trigger("selectionChanging",S),w.currentShapeSettings.startX=S.currentSelectionSettings.startX,w.currentShapeSettings.startY=S.currentSelectionSettings.startY,w.currentShapeSettings.width=S.currentSelectionSettings.width,w.currentShapeSettings.height=S.currentSelectionSettings.height,this.shapeEvent(w))}else s.trigger("shapeChanging",w),this.shapeEvent(w);if(o=!0,sf.base.isBlazor()){var x=s.upperCanvas.style.cursor;this.setCursor(e,t),"select"===w.action&&"move"===s.upperCanvas.style.cursor&&s.getShapeValue(s.activeObj.shape),s.upperCanvas.style.cursor=x}}}return o},e.prototype.shapeEvent=function(e){var t=this.parent;if(t.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e.currentShapeSettings}}),t.activeObj.activePoint){var i={prevActObj:null};if(t.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:i}}),sf.base.isNullOrUndefined(i.prevActObj)&&t.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:sf.base.extend({},t.activeObj,{},!0)}}),"image"!==t.activeObj.shape||this.isImageClarity||(this.upgradeImageQuality(),this.isImageClarity=!0),t.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:t.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:!0}}),!this.isShapeInserted){var n=t.activeObj.activePoint,s=t.img,o=s.destLeft,r=s.destWidth,a=s.destTop,l=s.destHeight;this.isPreventDragging=n.startX<o||n.endX>o+r||n.startY<a||n.endY>a+l}}},e.prototype.upgradeImageQuality=function(){var e=this.parent,t=sf.base.extend({},e.activeObj,null,!0),i=e.activeObj.imageCanvas.getContext("2d"),n={width:0,height:0};e.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:e.activeObj.imageElement.width,height:e.activeObj.imageElement.height,obj:n,isImgShape:null}}),e.notify("shape",{prop:"updateObj",onPropertyChange:!1,value:{dimObj:n,x:null,y:null}}),i.clearRect(0,0,e.activeObj.imageCanvas.width,e.activeObj.imageCanvas.height),this.applyTransformToImg(i),e.activeObj=t},e.prototype.applyTransformToImg=function(e){var t=this.parent;t.activeObj.isHorImageFlip&&t.activeObj.isVerImageFlip?(t.activeObj.isHorImageFlip=t.activeObj.isVerImageFlip=!1,t.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:e,isImgAnnotation:!0,isHFlip:!0,isVFlip:!0}})):t.activeObj.isHorImageFlip?(t.activeObj.isHorImageFlip=!1,t.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:e,isImgAnnotation:!0,isHFlip:!0,isVFlip:!1}})):t.activeObj.isVerImageFlip?(t.activeObj.isVerImageFlip=!1,t.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:e,isImgAnnotation:!0,isHFlip:!1,isVFlip:!0}})):t.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:e,isImgAnnotation:!0,isHFlip:!1,isVFlip:!1}})},e.prototype.targetTouches=function(e){var t=this.parent.lowerCanvas.getBoundingClientRect();return[{x:e[0].pageX-t.left,y:e[0].pageY-t.top},{x:e[1].pageX-t.left,y:e[1].pageY-t.top}]},e.prototype.calculateScale=function(e,t){var i=this.getDistance(e[0],e[1]);return this.getDistance(t[0],t[1])/i},e.prototype.getDistance=function(e,t){var i=0,n=0;return e&&t&&(i=e.x-t.x,n=e.y-t.y),Math.sqrt(i*i+n*n)},e.prototype.redrawShape=function(e,t){for(var i=this.parent,n=0,s=i.objColl.length;n<s;n++)if(JSON.stringify(e)===JSON.stringify(i.objColl[n])){i.objColl.splice(n,1);break}this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),this.isPreventDragging?(i.activeObj.activePoint.startX>i.img.destLeft&&(this.isPreventDragging=!1),t&&i.activeObj.rotatedAngle,i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}})):(t&&i.activeObj.rotatedAngle,i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:null,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}))},e.prototype.setTimer=function(e){var t=this.parent;this.timer>10&&(clearTimeout(this.timer),this.timer=0,t.notify("shape",{prop:"findTextTarget",onPropertyChange:!1,value:{e:e}}),sf.base.Browser.isDevice&&this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height))},e.prototype.applyCurrActObj=function(e,t){var i=this.parent,n=!1,s=sf.base.extend({},i.activeObj,{},!0);if(!sf.base.isNullOrUndefined(s.activePoint)){var o=s.activePoint,r=o.startX,a=o.startY,l=o.endX,h=o.endY,d=s.topLeftCircle?s.topLeftCircle.radius:0;if(e>=Math.floor(r)&&e<=Math.ceil(l)&&t>=Math.floor(a)&&t<=Math.ceil(h))n=!0;else if(0!==d&&e>=Math.floor(r)-d&&e<=Math.ceil(l)+d&&t>=Math.floor(a)-d&&t<=Math.ceil(h)+d)n=!0,this.tempActiveObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]};else if("text"!==s.shape&&"image"!==s.shape||""===this.dragElement)if("line"===s.shape||"arrow"===s.shape){var c={x:r<l?r:l,y:a<h?a:h},p={x:r>l?r:l,y:a>h?a:h};e>=Math.floor(c.x)-5&&e<=Math.ceil(p.x)+5&&t>=Math.floor(c.y)-5&&t<=Math.ceil(p.y)+5&&(n=!0)}else if("path"===s.shape){"move"===(u=this.setCursorForPath(s,e,t,i.upperCanvas))&&(n=!0)}else if("grabbing"===this.dragElement)n=!0;else if(0!==s.rotatedAngle){var u;("default"!==(u=this.setCursorForRotatedObject(s,e,t,i.upperCanvas))&&"grab"!==u||"n-resize"===this.dragElement||"e-resize"===this.dragElement||"s-resize"===this.dragElement||"w-resize"===this.dragElement)&&(n=!0)}else"block"!==i.textArea.style.display&&"inline-block"!==i.textArea.style.display||(n=!0);else n=!0;if(!n){sf.base.isNullOrUndefined(i.activeObj.currIndex)&&(i.activeObj.currIndex="shape_"+(i.objColl.length+1)),i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),void 0===i.activeObj.horTopLine||0===i.activeObj.horTopLine.startX||0===i.activeObj.horTopLine.endX||i.currObjType.isCustomCrop||""===i.currObjType.shape||i.objColl.push(sf.base.extend({},i.activeObj,{},!0));if(["rectangle","ellipse","line","arrow","path","text","image"].indexOf(i.activeObj.shape)>-1){var f=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)";for(var g=0;g<i.objColl.length;g++){var m={isInside:!1};i.notify("crop",{prop:"isObjInImage",onPropertyChange:!1,value:{obj:i.objColl[g],object:m}}),m.isInside&&(i.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:i.objColl[g].shape,obj:i.objColl[g],canvas:null}}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))}i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=f,i.activeObj.shape&&i.notify("shape",{prop:"apply",onPropertyChange:!1,value:{shape:null,obj:null,canvas:null}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})}sf.base.isBlazor()||i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})}}},e.prototype.getCurrentFlipState=function(){var e=this.parent;if(0!==e.rotateFlipColl.length){var t=sf.base.extend({},e.panPoint.totalPannedInternalPoint,{},!0);e.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1}),e.panPoint.totalPannedInternalPoint=t}else e.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1})},e.prototype.setTextBoxStylesToActObj=function(){var e=this.parent;e.activeObj.textSettings.fontFamily=e.textArea.style.fontFamily,e.activeObj.strokeSettings.strokeColor=""!==e.textArea.style.color&&e.textArea.style.color.split("(")[1]&&e.textArea.style.color.split("(")[1].split(",")[0]&&e.textArea.style.color.split("(")[1].split(",")[1]&&e.textArea.style.color.split("(")[1].split(",")[2]&&e.textArea.style.color.split("(")[1].split(",")[3]?this.rgbToHex(parseFloat(e.textArea.style.color.split("(")[1].split(",")[0]),parseFloat(e.textArea.style.color.split("(")[1].split(",")[1]),parseFloat(e.textArea.style.color.split("(")[1].split(",")[2]),parseFloat(e.textArea.style.color.split("(")[1].split(",")[3])):e.textArea.style.color,"bold"===e.textArea.style.fontWeight?e.activeObj.textSettings.bold=!0:e.activeObj.textSettings.bold=!1,"italic"===e.textArea.style.fontStyle?e.activeObj.textSettings.italic=!0:e.activeObj.textSettings.italic=!1,e.activeObj.textSettings.fontSize=parseFloat(e.textArea.style.fontSize)},e.prototype.rgbToHex=function(e,t,i,n){return e=Math.max(0,Math.min(255,Math.round(e))),t=Math.max(0,Math.min(255,Math.round(t))),i=Math.max(0,Math.min(255,Math.round(i))),n=Math.max(0,Math.min(1,n)),"#"+this.padLeft(e.toString(16),2,"0")+this.padLeft(t.toString(16),2,"0")+this.padLeft(i.toString(16),2,"0")+this.padLeft(Math.round(255*n).toString(16),2,"0")},e.prototype.padLeft=function(e,t,i){for(;e.length<t;)e=i+e;return e},e.prototype.deleteItem=function(){var e=this.parent,t={cancel:!1};if(this.isFhdEditing){this.updateFreehandDrawColorChange();var i=sf.base.extend({},e.cropObj,{},!0),n={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}}),(h=n.currObj).objColl=sf.base.extend([],e.objColl,[],!0),h.pointColl=sf.base.extend([],e.pointColl,[],!0),h.afterCropActions=sf.base.extend([],e.afterCropActions,[],!0);var s={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:s}}),h.selPointColl=sf.base.extend([],s.selPointColl,[],!0);var o={freehandDrawSelectedId:null};e.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:o}}),e.notify("freehand-draw",{prop:"deleteFhd",value:{id:o.freehandDrawSelectedId}}),e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"deleteFreehandDrawing",previousObj:h,previousObjColl:this.tempObjColl,previousPointColl:h.pointColl,previousSelPointColl:h.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),e.notify("freehand-draw",{prop:"resetFreehandDrawSelectedId"})}else if("none"===e.textArea.style.display){o={prevActObj:null};if(e.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:o}}),o.prevActObj&&(o.prevActObj.activePoint.width=Math.abs(o.prevActObj.activePoint.width),o.prevActObj.activePoint.height=Math.abs(o.prevActObj.activePoint.height)),o.prevActObj&&JSON.stringify(o.prevActObj)!==JSON.stringify(e.activeObj)){var r=e.activeObj.currIndex;e.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}});for(var a=0,l=e.objColl.length;a<l;a++)if(e.objColl[a].currIndex===r){e.objColl.splice(a,1),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null}});break}}n={isNewPath:null};if(e.notify("draw",{prop:"getNewPath",value:{obj:n}}),n.isNewPath)e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),sf.base.isBlazor()?e.updateToolbar(e.element,"imageLoaded"):e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1});else if(e.activeObj.shape){e.objColl.push(e.activeObj);i=sf.base.extend({},e.cropObj,{},!0);var h,d={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:d}}),(h=d.currObj).objColl=sf.base.extend([],e.objColl,[],!0),h.pointColl=sf.base.extend([],e.pointColl,[],!0),h.afterCropActions=sf.base.extend([],e.afterCropActions,[],!0);s={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:s}}),h.selPointColl=sf.base.extend([],s.selPointColl,[],!0),e.objColl.pop(),t={cancel:!1,action:"delete",previousShapeSettings:this.updatePrevShapeSettings(),currentShapeSettings:null},e.notify("shape",{prop:"setKeyHistory",onPropertyChange:!1,value:{keyHistory:""}}),e.clearSelection(),sf.base.isBlazor()&&e.events&&!0===e.events.shapeChanging.hasDelegate?e.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",t,null):(e.trigger("shapeChanging",t),sf.base.isBlazor()||e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})),sf.base.isNullOrUndefined(h.objColl[h.objColl.length-1].currIndex)||(e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"deleteObj",previousObj:h,previousObjColl:this.tempObjColl,previousPointColl:h.pointColl,previousSelPointColl:h.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),e.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}))}e.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}})}document.getElementById(e.element.id+"_quickAccessToolbarArea")&&(document.getElementById(e.element.id+"_quickAccessToolbarArea").style.display="none")},e.prototype.updateFreehandDrawColorChange=function(){var e=this.parent,t={freehandSelectedIndex:null};if(e.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:t}}),!sf.base.isNullOrUndefined(t.freehandSelectedIndex)&&!sf.base.isNullOrUndefined(e.pointColl[t.freehandSelectedIndex])&&"#42a5f5"===e.pointColl[t.freehandSelectedIndex].strokeColor){var i={tempFreeHandDrawEditingStyles:null};e.notify("freehand-draw",{prop:"getTempFreeHandDrawEditingStyles",value:{obj:i}}),e.pointColl[t.freehandSelectedIndex].strokeColor=i.tempFreeHandDrawEditingStyles.strokeColor}},e.prototype.updatePrevShapeSettings=function(e){var t=this.parent,i=[];"text"===t.activeObj.shape&&t.activeObj.textSettings&&(t.activeObj.textSettings.bold&&i.push("bold"),t.activeObj.textSettings.italic&&i.push("italic"),t.activeObj.textSettings.underline&&i.push("underline"));var n=t.activeObj.activePoint,s=n.startX,o=n.startY,r=n.width,a=n.height,l=t.activeObj,h=l.keyHistory,d=l.currIndex,c=l.shape,p=l.textSettings,u=l.strokeSettings,f=l.rotatedAngle,g=l.imageElement,m=l.opacity,v={id:sf.base.isNullOrUndefined(d)?null:d,type:t.toPascalCase(c),startX:s,startY:o,width:r,height:a,strokeColor:u?u.strokeColor:null,strokeWidth:u?u.strokeWidth:null,fillColor:u?u.fillColor:null,radius:"ellipse"===c?r/2:null,length:"line"===c||"arrow"===c?r:null,text:"text"===c?h||(p.text?p.text:null):null,fontSize:"text"===c&&p?p.fontSize:null,fontFamily:"text"===c&&p?p.fontFamily:null,fontStyle:"text"===c?i:null,color:"text"===c&&u?u.strokeColor:null,degree:"ellipse"===c||"rectangle"===c||"image"===c?f*(180/Math.PI):null,imageData:"image"===c?g.src:null,opacity:"image"===c?m:null};return e&&(e.shapeSettingsObj=v),v},e.prototype.getRectanglePoints=function(e,t,i,n,s,o,r){var a=e+i/2,l=t+n/2,h=s*(Math.PI/180),d=Math.cos(h),c=Math.sin(h),p=o-a,u=r-l,f=p*d+u*c,g=-p*c+u*d,m=i/2,v=n/2;return f>=-m&&f<=m&&g>=-v&&g<=v},e.prototype.getTransRotationPoint=function(e,t){var i,n,s=!1,o=!1;if((n=0===e.shapeDegree?this.parent.transform.degree:this.parent.transform.degree-e.shapeDegree)<0&&(n=360+n),e.flipObjColl)for(var r=0,a=e.flipObjColl.length;r<a;r++)"horizontal"===e.flipObjColl[r].toLowerCase()?s=!0:"vertical"===e.flipObjColl[r].toLowerCase()&&(o=!0);return 0===n||360===n?i=o?{x:e.topCenterCircle.startX,y:e.topCenterCircle.startY-e.rotationCircleLine}:{x:e.bottomCenterCircle.startX,y:e.bottomCenterCircle.startY+e.rotationCircleLine}:90===n||-270===n?i=s?{x:e.centerRightCircle.startX+e.rotationCircleLine,y:e.centerLeftCircle.startY}:{x:e.centerLeftCircle.startX-e.rotationCircleLine,y:e.centerLeftCircle.startY}:180===n||-180===n?i=o?{x:e.bottomCenterCircle.startX,y:e.bottomCenterCircle.startY+e.rotationCircleLine}:{x:e.topCenterCircle.startX,y:e.topCenterCircle.startY-e.rotationCircleLine}:270!==n&&-90!==n||(i=s?{x:e.centerLeftCircle.startX-e.rotationCircleLine,y:e.centerLeftCircle.startY}:{x:e.centerRightCircle.startX+e.rotationCircleLine,y:e.centerLeftCircle.startY}),t&&(t.rotationCirclePoint=i),i},e.prototype.getNumTextValue=function(e){var t,i,n,s,o=this.parent.element;if(sf.base.isBlazor()?(n=o.querySelector(".e-ie-toolbar-e-resize-width-input .e-textbox"),s=o.querySelector(".e-ie-toolbar-e-resize-height-input .e-textbox")):(n=o.querySelector("#"+o.id+"_resizeWidth"),s=o.querySelector("#"+o.id+"_resizeHeight")),n&&s){var r=s.value.replace(/,/g,""),a=n.value.replace(/,/g,"");""===r&&(r=s.placeholder.replace(/,/g,"")),""===a&&(a=n.placeholder.replace(/,/g,"")),t=parseFloat(r),i=parseFloat(a)}return e&&(e.width=i,e.height=t),{x:i,y:t}},e.prototype.isValueUpdated=function(){var e,t,i=!0;return sf.base.isBlazor()?(e=this.parent.element.querySelector(".e-ie-toolbar-e-resize-width-input .e-textbox"),t=this.parent.element.querySelector(".e-ie-toolbar-e-resize-height-input .e-textbox")):(e=this.parent.element.querySelector("#"+this.parent.element.id+"_resizeWidth"),t=this.parent.element.querySelector("#"+this.parent.element.id+"_resizeHeight")),e&&t&&""===t.value.replace(/,/g,"")&&""===e.value.replace(/,/g,"")&&(i=!1),i},e}(),b=function(){function e(e){this.textSettings={text:"Enter Text",fontFamily:"",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.strokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.keyHistory="",this.parent=e,this.addEventListener()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("shape",this.shape,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("shape",this.shape),this.parent.off("destroyed",this.destroy)},e.prototype.shape=function(e){var t,i=this.parent;switch(this.initShapePvtProps(),e.prop){case"drawEllipse":this.drawEllipse(e.value.x,e.value.y,e.value.radiusX,e.value.radiusY,e.value.strokeWidth,e.value.strokeColor,e.value.fillColor,e.value.degree);break;case"drawLine":this.drawLine(e.value.startX,e.value.startY,e.value.endX,e.value.endY,e.value.strokeWidth,e.value.strokeColor);break;case"drawArrow":this.drawArrow(e.value.startX,e.value.startY,e.value.endX,e.value.endY,e.value.strokeWidth,e.value.strokeColor,e.value.arrowStart,e.value.arrowEnd);break;case"drawPath":this.drawPath(e.value.pointColl,e.value.strokeWidth,e.value.strokeColor);break;case"drawRectangle":this.drawRectangle(e.value.x,e.value.y,e.value.width,e.value.height,e.value.strokeWidth,e.value.strokeColor,e.value.fillColor,e.value.degree);break;case"drawText":this.drawText(e.value.x,e.value.y,e.value.text,e.value.fontFamily,e.value.fontSize,e.value.bold,e.value.italic,e.value.color);break;case"redrawActObj":this.redrawActObj(e.value.x,e.value.y,e.value.isMouseDown);break;case"apply":this.apply(e.value.shape,e.value.obj,e.value.canvas);break;case"updateShapeChangeEventArgs":this.updateShapeChangeEventArgs(e.value.shapeSettings);break;case"updSelChangeEventArgs":this.updSelChangeEventArgs(e.value.selectionSettings);break;case"iterateObjColl":this.iterateObjColl();break;case"updImgRatioForActObj":this.updImgRatioForActObj();break;case"zoomObjColl":this.zoomObjColl(e.value.isPreventApply);break;case"redrawObj":this.redrawObj(e.value.degree);break;case"rotateObjColl":this.rotateObjColl();break;case"draw-shape-text":this.drawShapeText();break;case"redraw-text":this.redrawText();break;case"draw-shape":this.drawShape(e.value.obj,e.value.strokeWidth,e.value.strokeColor,e.value.fillColor,e.value.start,e.value.width,e.value.height);break;case"renderTextArea":this.renderTextArea(e.value.x,e.value.y,e.value.actObj);break;case"setTextBoxWidth":this.setTextBoxWidth(e.value.e);break;case"findTextTarget":this.findTextTarget(e.value.e);break;case"panObjColl":this.panObjColl(e.value.xDiff,e.value.yDiff,e.value.panRegion);break;case"updateFontStyles":this.updateFontStyles(e.value.isTextBox);break;case"applyFontStyle":this.applyFontStyle(e.value.item);break;case"updateFontRatio":this.updateFontRatio(e.value.obj,e.value.isTextArea);break;case"updateFontSize":this.updateFontSize(e.value.obj);break;case"updateObjColl":this.updateObjColl(e.value.item,e.value.objColl);break;case"pushActItemIntoObj":this.pushActItemIntoObj();break;case"clearActObj":this.clearActObj();break;case"refreshActiveObj":this.refreshActiveObj();break;case"applyActObj":this.applyActObj(e.value.isMouseDown);break;case"wireEvent":sf.base.EventHandler.add(i.upperCanvas,"dblclick",this.findTextTarget,this),sf.base.EventHandler.add(i.textArea,"mousedown",this.findTextTarget,this),(t=document.getElementById(i.element.id+"_fileUpload"))&&sf.base.EventHandler.add(t,"change",this.fileChanged,this);break;case"unWireEvent":sf.base.EventHandler.remove(i.upperCanvas,"dblclick",this.findTextTarget),sf.base.EventHandler.remove(i.textArea,"mousedown",this.findTextTarget),t=document.getElementById(i.element.id+"_fileUpload"),sf.base.EventHandler.remove(t,"change",this.fileChanged);break;case"getShapeSetting":this.getShapeSetting(e.value.id,e.value.obj);break;case"getShapeSettings":this.getShapeSettings(e.value.obj);break;case"isPointsInRange":this.isPointsInRange(e.value.x,e.value.y,e.value.obj);break;case"alignRotateFlipColl":this.alignRotateFlipColl(e.value.collection,e.value.isRotateFlipCollection,e.value.obj);break;case"selectShape":this.selectShape(e.value.id,e.value.obj);break;case"deleteShape":this.deleteShape(e.value.id);break;case"getMaxText":this.getMaxText(e.value.isTextBox,e.value.text,e.value.obj);break;case"setPointCollForLineArrow":e.value.obj.pointColl=this.getLinePoints(e.value.obj.activePoint.startX,e.value.obj.activePoint.startY,e.value.obj.activePoint.endX,e.value.obj.activePoint.endY);break;case"setPointCollForShapeRotation":this.setPointCollForShapeRotation(e.value.obj);break;case"setTextSettings":e.value.textSettings?this.textSettings=e.value.textSettings:e.value.fontFamily?this.textSettings.fontFamily=e.value.fontFamily:e.value.fontSize&&(this.textSettings.fontSize=e.value.fontSize);break;case"setStrokeSettings":e.value.strokeSettings?this.strokeSettings=e.value.strokeSettings:e.value.strokeColor?this.strokeSettings.strokeColor=e.value.strokeColor:e.value.fillColor?this.strokeSettings.fillColor=e.value.fillColor:e.value.strokeWidth&&(this.strokeSettings.strokeWidth=e.value.strokeWidth);break;case"getStrokeSettings":e.value.obj.strokeSettings=this.strokeSettings;break;case"setKeyHistory":this.keyHistory=e.value.keyHistory;break;case"getKeyHistory":e.value.obj.keyHistory=this.keyHistory;break;case"setTextBoxPos":this.setTextBoxPos(e.value.actObj,e.value.degree,e.value.flip,e.value.x,e.value.y);break;case"setTextBoxPoints":this.setTextBoxPoints(e.value.actObj,e.value.degree,e.value.flip,e.value.x,e.value.y);break;case"alignTextAreaIntoCanvas":this.alignTextAreaIntoCanvas();break;case"initializeTextShape":this.initializeTextShape(e.value.text,e.value.fontFamily,e.value.fontSize,e.value.bold,e.value.italic,e.value.strokeColor);break;case"stopPathDrawing":this.stopPathDrawing(e.value.e,e.value.isApply);break;case"updateArrowRatio":this.updateArrowRatio(e.value.obj);break;case"getSquarePointForRotatedShape":this.getSquarePointForRotatedShape(e.value.obj,e.value.object);break;case"drawImage":this.drawImage(e.value.x,e.value.y,e.value.width,e.value.height,e.value.src,e.value.degree,e.value.isAspectRatio,e.value.opacity);break;case"reset":this.reset();break;case"fileChanged":this.fileChanged(e.value.e);break;case"updateObj":this.updateObj(e.value.dimObj,e.value.x,e.value.y);break;case"straightenShapes":this.straightenShapes();break;case"straightenShapePoints":this.straightenShapePoints(e.value.obj,e.value.isReverse);break;case"straightenPath":this.straightenPath(e.value.obj);break;case"straightenFHD":this.straightenFHD();break;case"getTextBoxPosition":this.getTextBoxPosition(e.value.obj,e.value.object);break;case"updateSelectionChangeEventArgs":this.updateSelectionChangeEventArgs(e.value.selectionSettings);break;case"setFlipState":this.setFlipState(e.value.x,e.value.y,e.value.obj,e.value.object)}},e.prototype.getModuleName=function(){return"shape"},e.prototype.initShapePvtProps=function(){var e=this.parent;e.lowerCanvas&&(this.lowerContext=e.lowerCanvas.getContext("2d")),e.upperCanvas&&(this.upperContext=e.upperCanvas.getContext("2d")),sf.base.isNullOrUndefined(this.shapeImg)&&(this.shapeImg=e.createElement("img",{id:e.element.id+"_shapeImg",attrs:{name:"Image",crossorigin:"anonymous"}})),""===this.textSettings.fontFamily&&(this.textSettings.fontFamily=e.fontFamily.default)},e.prototype.reset=function(){this.textSettings={text:"Enter Text",fontFamily:this.parent.fontFamily.default,fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.strokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null}},e.prototype.drawEllipse=function(e,t,i,n,s,o,r,a){this.initializeShape("ellipse");var l=e&&t?{x:e,y:t}:null;this.drawShape("ellipse",s,o,r,l,i,n,null,null,null,a)},e.prototype.drawLine=function(e,t,i,n,s,o){this.initializeShape("line");var r=e&&t?{x:e,y:t}:null,a=i-e,l=n-t;this.drawShape("line",s,o,null,r,a,l)},e.prototype.drawPath=function(e,t,i){var n=this.parent;if(this.initializeShape("path"),e)this.drawShape("path",t,i,null,null,null,null,e);else{this.drawShape("line",t,i);var s=sf.base.extend({},n.objColl[n.objColl.length-1],null,!0);s.shape="path",s.lineDraw=null,s.pointColl=[{x:s.activePoint.startX,y:s.activePoint.startY},{x:s.activePoint.endX,y:s.activePoint.endY}],n.objColl[n.objColl.length-1]=s}},e.prototype.drawArrow=function(e,t,i,n,s,o,r,a){this.initializeShape("arrow");var l=e&&t?{x:e,y:t}:null,h=i-e,d=n-t;this.drawShape("arrow",s,o,null,l,h,d,null,r,a)},e.prototype.drawRectangle=function(e,t,i,n,s,o,r,a){this.initializeShape("rectangle");var l=e&&t?{x:e,y:t}:null;this.drawShape("rectangle",s,o,r,l,i,n,null,null,null,a)},e.prototype.drawText=function(e,t,i,n,s,o,r,a){this.drawShapeText(i,n,s,o,r,a,e,t)},e.prototype.initializeShape=function(e){var t=this.parent;this.redrawActObj(),t.activeObj.shape=e,"freehanddraw"===t.currObjType.shape&&(this.apply(),t.upperCanvas.style.cursor=t.cursor="default",t.currObjType.shape=""),t.currObjType.isCustomCrop=!1},e.prototype.updateWidthHeight=function(e){return e.activePoint.width=e.activePoint.endX-e.activePoint.startX,e.activePoint.height=e.activePoint.endY-e.activePoint.startY,e},e.prototype.setDimension=function(e,t){var i=this.parent;e&&t&&(i.activeObj.activePoint.width=e,i.activeObj.activePoint.height=t,"ellipse"===i.currObjType.shape.toLowerCase()&&(i.activeObj.activePoint.width=2*e,i.activeObj.activePoint.height=2*t))},e.prototype.getArrowType=function(e){var t=e;if(e){t={None:"none",Arrow:"arrow",SolidArrow:"arrowSolid",Circle:"circle",SolidCircle:"circleSolid",Square:"square",SolidSquare:"squareSolid",Bar:"bar"}[""+e]}return t},e.prototype.drawShape=function(e,t,i,n,s,o,r,a,l,h,d,c){var p=this,u=this.parent;if(!u.disabled&&u.isImageLoaded){u.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),this.redrawActObj();var f=sf.base.extend([],u.objColl,[],!0);if(u.togglePen=!1,this.keyHistory="",u.upperCanvas.style.display="block",this.refreshActiveObj(),u.currObjType.shape=e=e.toLowerCase(),"path"===e&&sf.base.isNullOrUndefined(a))u.activeObj.shape=e,u.activeObj.pointColl=[],u.upperCanvas.style.cursor=u.cursor="crosshair",u.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:"path"}}),sf.base.isBlazor()||(u.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),u.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}));else if("freehanddraw"!==e&&""!==e){u.activeObj.shape=e;var g=u.activeObj.strokeSettings;this.upperContext.clearRect(0,0,u.upperCanvas.width,u.upperCanvas.height),sf.base.isNullOrUndefined(g)&&(g=this.strokeSettings),"path"===e&&a&&(u.activeObj.pointColl=a),null!=c&&(u.activeObj.opacity=c),g.strokeWidth=t||g.strokeWidth,g.strokeColor=i||g.strokeColor,g.fillColor=n||g.fillColor;var m=u.img.destWidth>100?100:u.img.destWidth/2,v=u.img.destHeight>100?100:u.img.destHeight/2;u.activeObj.activePoint.width=m,u.activeObj.activePoint.height=v,"line"===e||"arrow"===e?(u.activeObj.lineDraw="horizontal",u.activeObj.activePoint.height=0,"arrow"===e&&(u.activeObj.activePoint.width+=50,u.activeObj.start=this.getArrowType(l),u.activeObj.end=this.getArrowType(h))):"rectangle"===e&&(u.activeObj.activePoint.width+=u.activeObj.activePoint.width/2),this.setDimension(o,r),s?(u.activeObj.activePoint.startX=s.x,u.activeObj.activePoint.startY=s.y,u.activeObj.activePoint.endX=u.activeObj.activePoint.startX+u.activeObj.activePoint.width,u.activeObj.activePoint.endY=u.activeObj.activePoint.startY+u.activeObj.activePoint.height):this.setCenterPoints(),this.setPointCollForLineAndArrow(),"arrow"===e&&(u.activeObj.triangleDirection="right"),u.currObjType.isDragging=u.currObjType.isCustomCrop=!1,this.initShapeProps();var b={shapeSettingsObj:{}};u.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:b}});var y=b.shapeSettingsObj,C={cancel:!1,action:"insert",previousShapeSettings:y,currentShapeSettings:y};sf.base.isBlazor()&&u.events&&!0===u.events.shapeChanging.hasDelegate?u.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",C,null).then((function(e){p.updateShapeChangeEventArgs(e.currentShapeSettings),p.setDimension(o,r),u.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),d&&(u.activeObj.rotatedAngle=d*(Math.PI/180),u.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:u.activeObj}})),u.updateToolbar(u.element,"quickAccessToolbar","shape"),u.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}}),u.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:f}}),u.isPublicMethod&&u.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),u.isPublicMethod=!1})):(u.trigger("shapeChanging",C),this.updateShapeChangeEventArgs(C.currentShapeSettings),this.setDimension(o,r),u.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),d&&(u.activeObj.rotatedAngle=d*(Math.PI/180),u.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:u.activeObj}})),sf.base.isBlazor()?u.updateToolbar(u.element,"quickAccessToolbar","shape"):u.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}),u.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}}),u.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:f}}),u.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),u.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),u.isPublicMethod&&u.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),u.isPublicMethod=!1)}}},e.prototype.initShapeProps=function(){var e=this.parent;e.activeObj.shapeDegree=e.transform.degree,e.activeObj.shapeFlip=e.transform.currFlipState,e.activeObj.textFlip=e.transform.currFlipState,e.activeObj.flipObjColl=[]},e.prototype.setPointCollForLineAndArrow=function(){var e=this.parent,t=e.activeObj.shape,i=e.activeObj.activePoint,n=i.startX,s=i.startY,o=i.endX,r=i.endY;if(("line"===t||"arrow"===t)&&(e.activeObj.pointColl=this.getLinePoints(n,s,o,r),e.activeObj.pointColl))for(var a=0,l=e.activeObj.pointColl.length;a<l;a++)e.activeObj.pointColl[a].ratioX=(e.activeObj.pointColl[a].x-e.img.destLeft)/e.img.destWidth,e.activeObj.pointColl[a].ratioY=(e.activeObj.pointColl[a].y-e.img.destTop)/e.img.destHeight},e.prototype.prevObjColl=function(){var e=this.parent,t={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:t}}),this.prevObj=t.currObj,this.prevObj.objColl=sf.base.extend([],e.objColl,[],!0),this.prevObj.pointColl=sf.base.extend([],e.pointColl,[],!0),this.prevObj.afterCropActions=sf.base.extend([],e.afterCropActions,[],!0);var i={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:i}}),this.prevObj.selPointColl=sf.base.extend([],i.selPointColl,[],!0)},e.prototype.drawShapeText=function(e,t,i,n,s,o,r,a){var l=this,h=this.parent;if(!h.disabled&&h.isImageLoaded){"freehanddraw"===h.currObjType.shape&&(this.apply(),h.upperCanvas.style.cursor=h.cursor="default",h.currObjType.shape=""),h.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),h.togglePen=!1,this.redrawActObj(),this.prevObjColl(),this.refreshActiveObj(),h.activeObj.shape=h.currObjType.shape="text",h.currObjType.isCustomCrop=!1,this.initializeTextShape(e,t,i,n,s,o),h.currObjType.isText=h.currObjType.isInitialText=!0,sf.base.isNullOrUndefined(h.activeObj.textSettings.fontSize)&&(h.getFontSizes(),h.activeObj.textSettings.fontSize=parseInt(h.fontSizeColl[parseInt("3",10)-1].text,10)),h.img.destWidth<100?h.activeObj.textSettings.fontSize=Math.floor(h.img.destWidth/20):h.img.destHeight<100&&(h.activeObj.textSettings.fontSize=Math.floor(h.img.destHeight/20)),h.activeObj.shapeDegree=h.transform.degree,h.activeObj.shapeFlip=h.transform.currFlipState,h.activeObj.flipObjColl=[],this.updateFontStyles();var d=this.upperContext.measureText(h.activeObj.textSettings.text).width+.5*h.activeObj.textSettings.fontSize,c=h.activeObj.textSettings.fontSize+.25*h.activeObj.textSettings.fontSize;sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(a)?this.setCenterPoints(!0,d,c):(h.activeObj.activePoint.startX=r,h.activeObj.activePoint.startY=a,h.activeObj.activePoint.endX=h.activeObj.activePoint.startX+d,h.activeObj.activePoint.endY=h.activeObj.activePoint.startY+c);var p={shapeSettingsObj:{}};h.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:p}});var u=p.shapeSettingsObj,f={cancel:!1,action:"insert",previousShapeSettings:u,currentShapeSettings:u};sf.base.isBlazor()&&h.events&&!0===h.events.shapeChanging.hasDelegate?h.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",f,null).then((function(e){l.drawShapeTextEvent(e),h.isPublicMethod&&h.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),h.isPublicMethod=!1})):(h.trigger("shapeChanging",f),this.drawShapeTextEvent(f),h.isPublicMethod&&h.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),h.isPublicMethod=!1)}},e.prototype.drawShapeImageEvent=function(e,t){var i=this.parent;this.updateShapeChangeEventArgs(e.currentShapeSettings),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),i.objColl.push(i.activeObj);var n=sf.base.extend({},i.cropObj,{},!0);i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:this.prevObj,previousObjColl:this.prevObj.objColl,previousPointColl:this.prevObj.pointColl,previousSelPointColl:this.prevObj.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),i.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:i.objColl[i.objColl.length-1]}}),t?sf.base.isBlazor()?(i.updateToolbar(i.element,i.activeObj.shape),i.updateToolbar(i.element,"quickAccessToolbar",i.activeObj.shape)):(i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})):i.okBtn(),i.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}})},e.prototype.drawShapeTextEvent=function(e){var t=this.parent;this.updateShapeChangeEventArgs(e.currentShapeSettings),this.addLetter(t.activeObj.textSettings.text),t.activeObj.textFlip=t.transform.currFlipState,this.updateFontRatio(t.activeObj),t.objColl.push(t.activeObj);var i=sf.base.extend({},t.cropObj,{},!0);t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:this.prevObj,previousObjColl:this.prevObj.objColl,previousPointColl:this.prevObj.pointColl,previousSelPointColl:this.prevObj.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:t.objColl[t.objColl.length-1]}}),sf.base.isBlazor()?t.updateToolbar(t.element,"quickAccessToolbar","text"):t.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}),t.notify("selection",{prop:"isShapeInserted",onPropertyChange:!1,value:{bool:!0}}),sf.base.isBlazor()?t.updateToolbar(t.element,"text"):(t.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),t.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}))},e.prototype.initializeTextShape=function(e,t,i,n,s,o){var r=this.parent;this.keyHistory="",r.upperCanvas.style.display="block",sf.base.isNullOrUndefined(r.activeObj.textSettings)&&(r.activeObj.textSettings=this.textSettings),sf.base.isNullOrUndefined(r.activeObj.strokeSettings)&&(r.activeObj.strokeSettings=this.strokeSettings),r.activeObj.strokeSettings.strokeColor=o||r.activeObj.strokeSettings.strokeColor,r.activeObj.textSettings.text=e||r.activeObj.textSettings.text,r.activeObj.textSettings.fontFamily=t||r.activeObj.textSettings.fontFamily,r.activeObj.textSettings.fontSize=i||r.activeObj.textSettings.fontSize,r.activeObj.textSettings.bold=n||r.activeObj.textSettings.bold,r.activeObj.textSettings.italic=s||r.activeObj.textSettings.italic},e.prototype.drawImage=function(e,t,i,n,s,o,r,a){this.initializeShape("image"),this.onLoadImgShape(e,t,i,n,s,null,o,r,a)},e.prototype.redrawActObj=function(e,t,i){var n,s=this.parent;s.activeObj.shape&&(n=s.activeObj.shape.split("-")),s.activeObj.horTopLine&&s.activeObj.shape&&"crop"!==n[0]&&("block"===s.textArea.style.display||"inline-block"===s.textArea.style.display?(s.notify("selection",{prop:"setTextBoxStylesToActObj",onPropertyChange:!1}),this.updateFontRatio(s.activeObj,!0),e&&t?e!==s.activeObj.activePoint.startX&&t!==s.activeObj.activePoint.startY&&this.updateTextFromTextArea():(this.updateTextFromTextArea(),s.textArea.style.transform="",s.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})),this.refreshActiveObj()):this.applyActObj(i))},e.prototype.apply=function(e,t,i){var n=this.parent;if(!n.disabled)if(n.togglePen&&!n.currObjType.isCustomCrop){var s=n.img.destLeft,o=n.img.destTop,r=n.img.destWidth,a=n.img.destHeight;n.notify("draw",{prop:"callUpdateCurrTransState",onPropertyChange:!1});var l=this.lowerContext.filter;this.lowerContext.filter="none",n.togglePen=!1,(n.isCircleCrop||n.currSelectionPoint&&"crop-circle"===n.currSelectionPoint.shape)&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),n.img.destLeft=s,n.img.destTop=o,n.img.destWidth=r,n.img.destHeight=a,this.lowerContext.filter=l}else i=i||"original",sf.base.isNullOrUndefined(n.activeObj.shape)&&sf.base.isNullOrUndefined(e)?n.currObjType.shape="":n.currObjType.shape=e||n.currObjType.shape,""!==n.currObjType.shape&&(this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),"text"===n.activeObj.shape?n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:i,obj:t,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}):n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:i,obj:t}}),n.activeObj.shape=n.currObjType.shape.toLowerCase(),e||""===n.currObjType.shape||n.currObjType.isCustomCrop||n.objColl.push(sf.base.extend({},n.activeObj,{},!0)),this.keyHistory="")},e.prototype.setCenterPoints=function(e,t,i){var n,s,o=this.parent;e&&t&&i?(n=t,s=i):(n=o.activeObj.activePoint.width,s=o.activeObj.activePoint.height),o.activeObj.activePoint.startX=o.lowerCanvas.width/2-n/2,o.activeObj.activePoint.startY=o.lowerCanvas.height/2-s/2,o.activeObj.activePoint.endX=o.lowerCanvas.width/2+n/2,o.activeObj.activePoint.endY=o.lowerCanvas.height/2+s/2},e.prototype.updSelChangeEventArgs=function(e){var t=this.parent;t.activeObj.activePoint={startX:e.startX,startY:e.startY,endX:t.activeObj.activePoint.startX+t.activeObj.activePoint.width,endY:t.activeObj.activePoint.startY+t.activeObj.activePoint.height,width:e.width,height:e.height}},e.prototype.updateShapeChangeEventArgs=function(e){var t,i=this.parent;if(e.id&&e.id.split("_")[0]&&"pen"===e.id.split("_")[0])t=parseInt(e.id.split("_")[1],10)-1,i.pointColl[t].points=e.points,i.pointColl[t].strokeColor=e.strokeColor,i.pointColl[t].strokeWidth=e.strokeWidth,i.pointColl[t].opacity=e.opacity;else{switch(i.activeObj.currIndex=e.id,i.activeObj.activePoint.startX=e.startX,i.activeObj.activePoint.startY=e.startY,e.width&&e.height&&(i.activeObj.activePoint.width=e.width,i.activeObj.activePoint.height=e.height,i.activeObj.activePoint.endX=i.activeObj.activePoint.startX+i.activeObj.activePoint.width,i.activeObj.activePoint.endY=i.activeObj.activePoint.startY+i.activeObj.activePoint.height),i.activeObj.strokeSettings.strokeColor=e.strokeColor,i.activeObj.strokeSettings.fillColor=e.fillColor,i.activeObj.opacity=e.opacity,sf.base.isNullOrUndefined(e.degree)&&(e.degree=0),i.activeObj.shape){case"ellipse":i.activeObj.activePoint.width=2*e.radius,e.degree&&(i.activeObj.rotatedAngle=e.degree*(Math.PI/180));break;case"line":case"arrow":i.activeObj.activePoint.width=e.length;break;case"text":i.activeObj.keyHistory=i.activeObj.textSettings.text=e.text,i.activeObj.textSettings.fontSize=e.fontSize,i.activeObj.strokeSettings.strokeColor=e.color,i.activeObj.textSettings.fontFamily=e.fontFamily;break;case"rectangle":case"image":e.degree&&(i.activeObj.rotatedAngle=e.degree*(Math.PI/180))}if("text"===i.activeObj.shape&&i.activeObj.textSettings)for(var n=0;n<e.fontStyle.length;n++)switch(e.fontStyle[n]){case"bold":i.activeObj.textSettings.bold=!0;break;case"italic":i.activeObj.textSettings.italic=!0;break;case"underline":i.activeObj.textSettings.underline=!0}}},e.prototype.updateSelectionChangeEventArgs=function(e){var t=this.parent;t.activeObj.activePoint.startX=e.startX,t.activeObj.activePoint.startY=e.startY,e.width&&e.height&&(t.activeObj.activePoint.width=e.width,t.activeObj.activePoint.height=e.height,t.activeObj.activePoint.endX=t.activeObj.activePoint.startX+t.activeObj.activePoint.width,t.activeObj.activePoint.endY=t.activeObj.activePoint.startY+t.activeObj.activePoint.height)},e.prototype.addLetter=function(e){var t=this.parent;if("none"===t.textArea.style.display&&(t.currObjType.isText||"text"===t.activeObj.shape)){var i=t.activeObj.textSettings.fontSize;"Backspace"===e?this.keyHistory=this.keyHistory.slice(0,-1):this.keyHistory+=e,this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),this.updateFontStyles();var n=this.upperContext.measureText(this.keyHistory).width+.5*i,s=i+.25*i;this.upperContext.fillText(this.keyHistory,t.activeObj.activePoint.startX,t.activeObj.activePoint.startY+i),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.currObjType.isText=!0,t.notify("selection",{prop:"setActivePoint",onPropertyChange:!1,value:{startX:n,startY:s}})}},e.prototype.redrawText=function(){var e=this.parent,t=e.activeObj.textSettings,i=t.fontSize,n=t.fontFamily,s="";t.bold&&(s+="bold "),t.italic&&(s+="italic "),this.upperContext.font=s+i+"px "+n;var o=e.activeObj.keyHistory.split("\n"),r="block"===e.textArea.style.display||"inline-block"===e.textArea.style.display?this.getMaxText(!0):this.getMaxText(),a=this.upperContext.measureText(r).width+.5*i,l=o.length*(i+.25*i);e.notify("selection",{prop:"setTextSelection",onPropertyChange:!1,value:{width:a,height:l}}),e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:e.activeObj.activePoint,obj:e.activeObj,isMouseMove:null,x:null,y:null}}),e.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:e.activeObj}})},e.prototype.updateTextFromTextArea=function(){var e=this.parent,t=!1,i=e.activeObj.textSettings.fontSize,n=sf.base.extend({},e.activeObj,{},!0),s=sf.base.extend({},e.cropObj,{},!0),o={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var r=o.currObj;r.objColl=sf.base.extend([],e.objColl,[],!0),r.pointColl=sf.base.extend([],e.pointColl,[],!0),r.afterCropActions=sf.base.extend([],e.afterCropActions,[],!0);var a={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),r.selPointColl=sf.base.extend([],a.selPointColl,[],!0),e.activeObj.keyHistory!==e.textArea.value&&(t=!0),e.activeObj.keyHistory=e.textArea.value,e.textArea.style.display="none",e.textArea.value="",this.updateFontStyles();var l=this.upperContext.measureText(e.activeObj.keyHistory).width+.5*i,h=i+.25*i,d=e.activeObj.keyHistory.split("\n");if(d.length>1){h*=d.length;for(var c=[],p=0,u=d.length;p<u;p++)c.push(this.upperContext.measureText(d[p]).width+.5*i);l=Math.max.apply(Math,c)}if(e.notify("selection",{prop:"setTextSelection",onPropertyChange:!1,value:{width:l,height:h}}),0!==e.activeObj.rotatedAngle){var f=e.activeObj.activePoint.width-n.activePoint.width,g=e.activeObj.activePoint.height-n.activePoint.height,m="";f>0&&g>0?m="widthHeight":0!==f?m="width":0!==g&&(m="height"),e.activeObj.activePoint=sf.base.extend({},n.activePoint,{},!0),e.notify("selection",{prop:"adjustRotationPoints",onPropertyChange:!1,value:{rectangle:e.activeObj.activePoint,x:f,y:g,angle:e.activeObj.rotatedAngle,type:"text",elem:m}}),e.notify("shape",{prop:"updateFontSize",onPropertyChange:!1,value:{obj:e.activeObj}})}e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:e.activeObj.activePoint,obj:e.activeObj,isMouseMove:null,x:null,y:null}}),this.updImgRatioForActObj(),0!==e.activeObj.rotatedAngle&&e.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:e.activeObj}}),t?(this.apply(e.activeObj.shape,e.activeObj),e.objColl.push(sf.base.extend({},e.activeObj,{},!0)),e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"text",previousObj:r,previousObjColl:r.objColl,previousPointColl:r.pointColl,previousSelPointColl:r.selPointColl,previousCropObj:s,previousText:e.activeObj.keyHistory,currentText:e.textArea.value,previousFilter:null,isCircleCrop:null}})):(this.apply(e.activeObj.shape,e.activeObj),e.objColl.push(sf.base.extend({},e.activeObj,{},!0)))},e.prototype.iterateObjColl=function(){var e=this.parent;if(e.objColl.length>0){for(var t=0,i=e.objColl.length;t<i;t++){var n=this.lowerContext.filter;this.lowerContext.filter="none",this.apply(e.objColl[t].shape,e.objColl[t]),this.lowerContext.filter=n,this.refreshActiveObj()}e.notify("draw",{prop:"applyFrame",value:{ctx:this.lowerContext,frame:e.frameObj.type,preventImg:!0}})}},e.prototype.updImgRatioForActObj=function(){var e=this.parent,t={startX:e.img.destLeft,startY:e.img.destTop,width:e.img.destWidth,height:e.img.destHeight};this.straightenShapes();var i=e.img,n=i.destLeft,s=i.destTop,o=i.destWidth,r=i.destHeight,a=e.activeObj.activePoint;e.activeObj.imageRatio={startX:(a.startX-n)/o,startY:(a.startY-s)/r,endX:(a.endX-n)/o,endY:(a.endY-s)/r,width:o/a.width,height:r/a.height},e.activeObj.rotationCirclePointColl&&(e.activeObj.rotationCirclePointColl.ratioX=(e.activeObj.rotationCirclePointColl.x-n)/o,e.activeObj.rotationCirclePointColl.ratioY=(e.activeObj.rotationCirclePointColl.y-s)/r),"path"===e.activeObj.shape?this.updatePathRatio(e.activeObj):"arrow"===e.activeObj.shape&&this.updateArrowRatio(e.activeObj),e.img.destLeft=t.startX,e.img.destTop=t.startY,e.img.destWidth=t.width,e.img.destHeight=t.height},e.prototype.zoomObjColl=function(e){var t=this.parent,i={startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight};this.straightenShapes();for(var n=t.img,s=n.destLeft,o=n.destTop,r=n.destWidth,a=n.destHeight,l=0,h=t.objColl.length;l<h;l++){var d=t.objColl[l];if(d.activePoint.startX=d.imageRatio.startX*r+s,d.activePoint.startY=d.imageRatio.startY*a+o,d.activePoint.endX=d.imageRatio.endX*r+s,d.activePoint.endY=d.imageRatio.endY*a+o,"text"===(d=this.updateWidthHeight(d)).shape)this.updateFontSize(d);else if("line"===d.shape||"arrow"===d.shape){d.pointColl=this.getLinePoints(d.activePoint.startX,d.activePoint.startY,d.activePoint.endX,d.activePoint.endY);for(var c=0,p=d.pointColl.length;c<p;c++)d.pointColl[c].ratioX=(d.pointColl[c].x-s)/r,d.pointColl[c].ratioY=(d.pointColl[c].y-o)/a;"arrow"===d.shape&&this.updateArrowSize(d),0===t.transform.straighten||"line"!==d.shape&&"arrow"!==d.shape||this.straightenShapePoints(d)}else if("path"===d.shape){for(var u=0,f=d.pointColl.length;u<f;u++)d.pointColl[u].x=d.pointColl[u].ratioX*r+s,d.pointColl[u].y=d.pointColl[u].ratioY*a+o;this.updatePathRatio(d),0!==t.transform.straighten&&this.straightenPath(d)}if(t.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:d.activePoint,obj:d}}),sf.base.isNullOrUndefined(e)){var g=this.lowerContext.filter;this.lowerContext.filter="none",this.apply(d.shape,d),this.refreshActiveObj(),this.lowerContext.filter=g,t.notify("draw",{prop:"applyFrame",value:{ctx:this.lowerContext,frame:t.frameObj.type,preventImg:!0}})}"line"!==d.shape&&"arrow"!==d.shape&&"path"!==d.shape&&0!==d.rotatedAngle&&(this.setPointCollForShapeRotation(d),d.rotationCirclePoint.x=d.rotationCirclePoint.ratioX*r+s,d.rotationCirclePoint.y=d.rotationCirclePoint.ratioY*a+o,d.rotationCirclePointColl.x=d.rotationCirclePointColl.ratioX*r+s,d.rotationCirclePointColl.y=d.rotationCirclePointColl.ratioY*a+o)}t.img.destLeft=i.startX,t.img.destTop=i.startY,t.img.destWidth=i.width,t.img.destHeight=i.height},e.prototype.straightenPath=function(e){for(var t,i=0,n=e.pointColl.length;i<n;i++)t=this.straightenPoints(e.pointColl[i].x,e.pointColl[i].y),e.pointColl[i].x=t.x,e.pointColl[i].y=t.y},e.prototype.straightenFHD=function(){for(var e=this.parent,t=0,i=e.freehandCounter;t<i;t++){e.points=sf.base.extend([],e.pointColl[t].points,[]);for(var n=e.points.length,s=void 0,o=0;o<n;o++)s=this.straightenPoints(e.points[o].x,e.points[o].y),e.points[o].x=s.x,e.points[o].y=s.y}var r={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}});for(t=0,i=e.freehandCounter;t<i;t++)for(n=r.selPointColl[t].points.length,s=void 0,o=0;o<n;o++)s=this.straightenPoints(r.selPointColl[t].points[o].x,r.selPointColl[t].points[o].y),r.selPointColl[t].points[o].x=s.x,r.selPointColl[t].points[o].y=s.y;var a={straightenPoint:null};if(e.notify("freehand-draw",{prop:"getStraightenPoint",onPropertyChange:!1,value:{obj:a}}),a.straightenPoint.x&&a.straightenPoint.y){var l={angle:0};e.notify("freehand-draw",{prop:"getStraightenPointAngle",onPropertyChange:!1,value:{obj:l}});var h=((360===e.transform.straighten?0:e.transform.straighten)-l.angle)*(Math.PI/180);s=this.straightenPoints(a.straightenPoint.x,a.straightenPoint.y,h);0===h&&(s.x=a.straightenPoint.x,s.y=a.straightenPoint.y),e.notify("freehand-draw",{prop:"setStraightenPoint",onPropertyChange:!1,value:{x:s.x,y:s.y}})}},e.prototype.straightenPoints=function(e,t,i){var n=this.parent,s=n.img.destLeft+n.img.destWidth/2,o=n.img.destTop+n.img.destHeight/2;return i=i||n.transform.straighten*(Math.PI/180),{x:Math.cos(i)*(e-s)-Math.sin(i)*(t-o)+s,y:Math.sin(i)*(e-s)+Math.cos(i)*(t-o)+o}},e.prototype.straightenShapes=function(){var e=this.parent,t=e.img,i=t.destLeft,n=t.destTop,s=t.destWidth,o=t.destHeight;if(e.isStraightening&&0!==e.transform.straighten){e.notify("draw",{prop:"updateImgCanvasPoints"});var r={points:null};e.notify("draw",{prop:"getImageCanvasPoints",value:{obj:r}});var a=i+s/2,l=n+o/2,h=-e.transform.straighten*(Math.PI/180),d={x:Math.cos(h)*(r.points[0].x-a)-Math.sin(h)*(r.points[0].y-l)+a,y:Math.sin(h)*(r.points[0].x-a)+Math.cos(h)*(r.points[0].y-l)+l},c=Math.cos(h)*(r.points[1].x-a)-Math.sin(h)*(r.points[1].y-l)+a,p=Math.sin(h)*(r.points[1].x-a)+Math.cos(h)*(r.points[1].y-l)+l,u=(Math.cos(h),r.points[2].x,Math.sin(h),r.points[2].y,Math.sin(h)*(r.points[2].x-a)+Math.cos(h)*(r.points[2].y-l)+l);e.img.destWidth=c-d.x,e.img.destHeight=u-p,e.img.destLeft=d.x,e.img.destTop=d.y}},e.prototype.straightenShapePoints=function(e,t){var i=this.parent,n=i.img,s=n.destLeft,o=n.destTop,r=n.destWidth,a=n.destHeight;if(i.isStraightening&&("line"===e.shape||"arrow"===e.shape)){e.activePoint.width=e.activePoint.endX>e.activePoint.startX?e.activePoint.endX-e.activePoint.startX:e.activePoint.startX-e.activePoint.endX,e.activePoint.height=e.activePoint.endY>e.activePoint.startY?e.activePoint.endY-e.activePoint.startY:e.activePoint.startY-e.activePoint.endY;var l={x:s+r/2,y:o+a/2},h=(t?-i.transform.straighten:i.transform.straighten)*(Math.PI/180),d={x:Math.cos(h)*(e.activePoint.startX-l.x)-Math.sin(h)*(e.activePoint.startY-l.y)+l.x,y:Math.sin(h)*(e.activePoint.startX-l.x)+Math.cos(h)*(e.activePoint.startY-l.y)+l.y},c={x:Math.cos(h)*(e.activePoint.endX-l.x)-Math.sin(h)*(e.activePoint.endY-l.y)+l.x,y:Math.sin(h)*(e.activePoint.endX-l.x)+Math.cos(h)*(e.activePoint.endY-l.y)+l.y};e.activePoint.startX=d.x,e.activePoint.startY=d.y,e.activePoint.endX=c.x,e.activePoint.endY=c.y,e.activePoint.width=e.activePoint.endX>e.activePoint.startX?e.activePoint.endX-e.activePoint.startX:e.activePoint.startX-e.activePoint.endX,e.activePoint.height=e.activePoint.endY>e.activePoint.startY?e.activePoint.endY-e.activePoint.startY:e.activePoint.startY-e.activePoint.endY,i.notify("selection",{prop:"adjustActObjForLineArrow",onPropertyChange:!1,value:{obj:e}})}},e.prototype.redrawObj=function(e){var t=this.parent,i=!1;if(t.objColl.length>0)if("horizontal"===e||"vertical"===e||"Horizontal"===e||"Vertical"===e||"horizontalVertical"===e||"verticalHorizontal"===e)this.updateCurrentActiveObjPoint(e.toLowerCase());else if("number"==typeof e){this.updateCurrentActiveObjPoint(e);var n=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)";for(var s=0,o=t.objColl.length;s<o;s++){"crop"!==t.objColl[s].shape.split("-")[0]&&(this.apply(t.objColl[s].shape,t.objColl[s]),i=!0)}i&&t.notify("draw",{prop:"applyFrame",value:{ctx:this.lowerContext,frame:t.frameObj.type,preventImg:!0}}),this.lowerContext.filter=n}},e.prototype.updateCurrentActiveObjPoint=function(e){for(var t,i=this.parent,n=i.img,s=n.destLeft,o=n.destTop,r=n.destWidth,a=n.destHeight,l=0,h=i.objColl.length;l<h;l++){var d=i.objColl[l];if(i.activeObj.shape===d.shape&&i.activeObj.activePoint.startX===d.activePoint.startX&&i.activeObj.activePoint.startY===d.activePoint.startY&&i.activeObj.activePoint.endX===d.activePoint.endX&&i.activeObj.activePoint.endY===d.activePoint.endY&&i.activeObj.currIndex===d.currIndex){t=l;break}}if("horizontal"===e||"vertical"===e||"Horizontal"===e||"Vertical"===e||"horizontalvertical"===e||"verticalhorizontal"===e){if("horizontal"===e||"Horizontal"===e){var c=0;for(h=i.objColl.length;c<h;c++){(d=i.objColl[c]).shapeFlip!==i.transform.currFlipState&&(d.activePoint.startX<=s+r/2?(d.activePoint.endX=s+r-(d.activePoint.startX-s),d.activePoint.startX=d.activePoint.endX-d.activePoint.width,i.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:d.activePoint,obj:d}})):d.activePoint.startX>=s+r/2&&(d.activePoint.startX=s+(s+r-d.activePoint.endX),d.activePoint.endX=d.activePoint.startX+d.activePoint.width,i.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:d.activePoint,obj:d}})),"line"===d.shape||"arrow"===d.shape||"path"===d.shape?this.flipLineArrowObj(d,"horizontal"):0!==d.rotatedAngle&&(d.rotatedAngle=d.rotatedAngle+2*(Math.PI-d.rotatedAngle),d.rotationCirclePointColl.x<=s+r/2?d.rotationCirclePointColl.x=s+r-(d.rotationCirclePointColl.x-s):d.rotationCirclePointColl.x>=s+r/2&&(d.rotationCirclePointColl.x=s+(s+r-d.rotationCirclePointColl.x)),d.rotationCirclePointColl.ratioX=(d.rotationCirclePointColl.x-s)/r),d.shapeFlip=i.transform.currFlipState,d.imageRatio={startX:(d.activePoint.startX-s)/r,startY:(d.activePoint.startY-o)/a,endX:(d.activePoint.endX-s)/r,endY:(d.activePoint.endY-o)/a,width:r/d.activePoint.width,height:a/d.activePoint.height})}}else if("vertical"===e||"Vertical"===e)for(c=0;c<i.objColl.length;c++){(d=i.objColl[c]).shapeFlip!==i.transform.currFlipState&&(d.activePoint.startY<=o+a/2?(d.activePoint.endY=o+a-(d.activePoint.startY-o),d.activePoint.startY=d.activePoint.endY-d.activePoint.height,i.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:d.activePoint,obj:d}})):d.activePoint.startY>=i.lowerCanvas.height/2&&(d.activePoint.startY=o+(o+a-d.activePoint.endY),d.activePoint.endY=d.activePoint.startY+d.activePoint.height,i.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:d.activePoint,obj:d}})),"line"===d.shape||"arrow"===d.shape||"path"===d.shape?this.flipLineArrowObj(d,"vertical"):0!==d.rotatedAngle&&(d.rotatedAngle=-d.rotatedAngle,d.rotationCirclePointColl.y<=o+a/2?d.rotationCirclePointColl.y=o+a-(d.rotationCirclePointColl.y-o):d.rotationCirclePointColl.y>=o+a/2&&(d.rotationCirclePointColl.y=o+(o+a-d.rotationCirclePointColl.y)),d.rotationCirclePointColl.ratioY=(d.rotationCirclePointColl.y-o)/a),d.shapeFlip=i.transform.currFlipState,d.imageRatio={startX:(d.activePoint.startX-s)/r,startY:(d.activePoint.startY-o)/a,endX:(d.activePoint.endX-s)/r,endY:(d.activePoint.endY-o)/a,width:r/d.activePoint.width,height:a/d.activePoint.height})}else if("verticalhorizontal"===e||"horizontalvertical"===e)for(c=0,h=i.objColl.length;c<h;c++){(d=i.objColl[c]).shapeFlip!==i.transform.currFlipState&&(d.activePoint.startX<=s+r/2?(d.activePoint.endX=s+r-(d.activePoint.startX-s),d.activePoint.startX=d.activePoint.endX-d.activePoint.width,i.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:d.activePoint,obj:d}})):d.activePoint.startX>=s+r/2&&(d.activePoint.startX=s+(s+r-d.activePoint.endX),d.activePoint.endX=d.activePoint.startX+d.activePoint.width,i.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:d.activePoint,obj:d}})),d.activePoint.startY<=o+a/2?(d.activePoint.endY=o+a-(d.activePoint.startY-o),d.activePoint.startY=d.activePoint.endY-d.activePoint.height,i.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:d.activePoint,obj:d}})):d.activePoint.startY>=i.lowerCanvas.height/2&&(d.activePoint.startY=o+(o+a-d.activePoint.endY),d.activePoint.endY=d.activePoint.startY+d.activePoint.height,i.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:d.activePoint,obj:d}})),"line"!==d.shape&&"arrow"!==d.shape&&"path"!==d.shape||this.flipLineArrowObj(d,e),d.shapeFlip=i.transform.currFlipState,d.imageRatio={startX:(d.activePoint.startX-s)/r,startY:(d.activePoint.startY-o)/a,endX:(d.activePoint.endX-s)/r,endY:(d.activePoint.endY-o)/a,width:r/d.activePoint.width,height:a/d.activePoint.height})}void 0!==t&&(i.activeObj=sf.base.extend({},i.objColl[t],{},!0))}else if(90===e)this.rotateObjColl();else if(-90===e)for(c=0;c<3;c++)this.rotateObjColl();else if("number"==typeof e)if(e>0)this.rotateObjColl();else for(c=0;c<3;c++)this.rotateObjColl()},e.prototype.rotateObjColl=function(){for(var e=this.parent,t=e.img,i=t.destWidth,n=t.destHeight,s=t.destLeft,o=t.destTop,r=0,a=e.objColl.length;r<a;r++){var l=(h=e.objColl[r]).shape;h.activePoint.startY=o+n*h.imageRatio.startX,h.activePoint.endY=o+n*h.imageRatio.endX,h.activePoint.startX=s+i-i*h.imageRatio.endY,h.activePoint.endX=s+i-i*h.imageRatio.startY,h=this.updateWidthHeight(e.objColl[r]),this.updateFontSize(h),"line"===l||"arrow"===l||"path"===l?(this.rotateLineArrowObj(h),"arrow"===l&&this.updateArrowSize(h)):0!==h.rotatedAngle&&(h.rotationCirclePointColl.y=o+n*h.rotationCirclePointColl.ratioX,h.rotationCirclePointColl.x=s+i-i*h.rotationCirclePointColl.ratioY,h.rotationCirclePointColl.ratioX=(h.rotationCirclePointColl.x-s)/i,h.rotationCirclePointColl.ratioY=(h.rotationCirclePointColl.y-o)/n)}for(r=0,a=e.objColl.length;r<a;r++)e.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:e.objColl[r].activePoint,obj:e.objColl[r]}});for(r=0,a=e.objColl.length;r<a;r++){var h;(h=e.objColl[r]).imageRatio={startX:(h.activePoint.startX-s)/i,startY:(h.activePoint.startY-o)/n,endX:(h.activePoint.endX-s)/i,endY:(h.activePoint.endY-o)/n,width:i/h.activePoint.width,height:n/h.activePoint.height}}},e.prototype.rotateLineArrowObj=function(e){if(!sf.base.isNullOrUndefined(e.pointColl)){var t=this.parent.img,i=t.destWidth,n=t.destHeight,s=t.destLeft,o=t.destTop;if(e.pointColl.length>0){for(var r=0;r<e.pointColl.length;r++)e.pointColl[r].y=o+n*e.pointColl[r].ratioX,e.pointColl[r].x=s+i-i*e.pointColl[r].ratioY;for(r=0;r<e.pointColl.length;r++)e.pointColl[r].ratioX=(e.pointColl[r].x-s)/i,e.pointColl[r].ratioY=(e.pointColl[r].y-o)/n;var a=void 0;a=sf.base.isNullOrUndefined(e.pointColl[e.pointColl.length-2])?{x:0,y:0}:{x:e.pointColl[e.pointColl.length-2].x,y:e.pointColl[e.pointColl.length-2].y};var l=e.pointColl[e.pointColl.length-1].x-a.x,h=e.pointColl[e.pointColl.length-1].y-a.y;e.activePoint.startX=e.pointColl[0].x,e.activePoint.startY=e.pointColl[0].y,e.activePoint.endX=e.pointColl[e.pointColl.length-1].x+l/2,e.activePoint.endY=e.pointColl[e.pointColl.length-1].y+h/2,e=this.updateWidthHeight(e)}}},e.prototype.flipLineArrowObj=function(e,t){if(t=t.toLowerCase(),!sf.base.isNullOrUndefined(e.pointColl)&&("horizontal"===t?this.lineArrowHorizontalFlip(e):("vertical"===t||(this.lineArrowHorizontalFlip(e),e.shapeFlip=""),this.lineArrowVerticalFlip(e)),e.activePoint.startX=e.pointColl[0].x,e.activePoint.startY=e.pointColl[0].y,e.activePoint.endX=e.pointColl[e.pointColl.length-1].x,e.activePoint.endY=e.pointColl[e.pointColl.length-1].y,e.activePoint.startX>e.activePoint.endX)){var i=e.activePoint.startX;e.activePoint.startX=e.activePoint.endX,e.activePoint.endX=i,i=e.activePoint.startY,e.activePoint.startY=e.activePoint.endY,e.activePoint.endY=i}},e.prototype.lineArrowHorizontalFlip=function(e){var t=this.parent,i=t.img,n=i.destWidth,s=i.destHeight,o=i.destLeft,r=i.destTop;if(e.shapeFlip!==t.transform.currFlipState){for(var a=0,l=e.pointColl.length;a<l;a++){var h=e.pointColl[a];h.x<=o+n/2?h.x=o+n-(h.x-o):h.x>=o+n/2&&(h.x=o+(o+n-h.x)),h.ratioX=(h.x-o)/n,h.ratioY=(h.y-r)/s}if("arrow"===e.shape){var d=e.start;e.start=e.end,e.end=d}e.shapeFlip=t.transform.currFlipState}},e.prototype.lineArrowVerticalFlip=function(e){var t=this.parent,i=t.img,n=i.destWidth,s=i.destHeight,o=i.destLeft,r=i.destTop;if(e.shapeFlip!==t.transform.currFlipState){for(var a=0,l=e.pointColl.length;a<l;a++){var h=e.pointColl[a];h.y<=r+s/2?h.y=r+s-(h.y-r):h.y>=r+s/2&&(h.y=r+(r+s-h.y)),h.ratioX=(h.x-o)/n,h.ratioY=(h.y-r)/s}e.shapeFlip=t.transform.currFlipState}},e.prototype.getRotDegOfShape=function(e){var t;return(t=0===e.shapeDegree?this.parent.transform.degree:this.parent.transform.degree-e.shapeDegree)<0&&(t=360+t),t},e.prototype.renderTextArea=function(e,t,i){var n=this.parent,s=this.getRotDegOfShape(n.activeObj);this.transformTextArea(),sf.base.isBlazor()?n.updateToolbar(n.element,"destroyQuickAccessToolbar"):n.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1});var o=n.element.querySelector("#"+n.element.id+"_duplicate"),r=n.element.querySelector("#"+n.element.id+"_remove"),a=n.element.querySelector("#"+n.element.id+"_editText");o&&o.classList.add("e-disabled"),r&&r.classList.add("e-disabled"),a&&a.classList.add("e-disabled"),n.textArea.style.display="block",n.textArea.style.left=e+"px",n.textArea.style.top=t+"px",n.textArea.style.fontFamily=i.textSettings.fontFamily,n.textArea.style.fontSize=i.textSettings.fontSize+"px",n.textArea.style.color=i.strokeSettings.strokeColor,n.textArea.style.fontWeight=i.textSettings.bold?"bold":"normal",n.textArea.style.fontStyle=i.textSettings.italic?"italic":"normal",n.textArea.style.border="2px solid "+n.themeColl[n.theme].primaryColor,n.textArea.value=i.keyHistory,n.textArea.style.overflow="hidden",n.textArea.style.width="auto",n.textArea.style.height="auto",n.textArea.focus();n.transform.zoomFactor;var l=i.activePoint,h=l.width,d=l.height;s%90==0&&s%180!=0&&0!==s?(n.textArea.style.width=d+"px",n.textArea.style.height=h+"px"):(n.textArea.style.width=h+"px",n.textArea.style.height=d+"px"),this.setTextBoxWidth();var c={flipColl:null};if(n.notify("transform",{prop:"getFlipColl",onPropertyChange:!1,value:{obj:c}}),c.flipColl.length<=1&&this.setTextBoxHeight(),parseFloat(n.textArea.style.maxHeight)<n.activeObj.textSettings.fontSize&&(n.textArea.style.maxHeight=n.activeObj.textSettings.fontSize+"px"),s%90==0&&s%180!=0?parseFloat(n.textArea.style.left)+parseFloat(n.textArea.style.width)>n.img.destTop+n.img.destHeight&&this.alignTextAreaIntoCanvas():parseFloat(n.textArea.style.left)+parseFloat(n.textArea.style.width)>n.img.destLeft+n.img.destWidth&&this.alignTextAreaIntoCanvas(),0!==i.rotatedAngle){var p=parseFloat(n.textArea.style.left),u=parseFloat(n.textArea.style.top);if(i.flipObjColl.length>0){var f={panRegion:""},g=n.lowerCanvas,m=g.clientWidth,v=g.clientHeight,b={x:0,y:0};n.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:f}}),""!==f.panRegion&&("horizontal"===f.panRegion?(b.x=m-m/2,p=b.x-p+b.x):"vertical"===f.panRegion?(b.y=v-v/2,u=b.y-u+b.y):(p=(b={x:m-m/2,y:v-v/2}).x-p+b.x,u=b.y-u+b.y))}var y=p+parseFloat(n.textArea.style.width),C=u+parseFloat(n.textArea.style.height),w=parseFloat(n.textArea.style.width),M=parseFloat(n.textArea.style.height),S={x:y-w/2,y:C-M/2},x=Math.cos(i.rotatedAngle),N=Math.sin(i.rotatedAngle),O={x:x*(y-S.x)-N*(C-S.y)+S.x,y:N*(y-S.x)+x*(C-S.y)+S.y};if(O.x>n.img.destLeft&&O.x<n.img.destLeft+n.img.destWidth&&O.y>n.img.destTop&&O.y+parseFloat(n.textArea.style.fontSize)<n.img.destTop+n.img.destHeight)n.textArea.style.width=n.textArea.style.width;else for(var E=0,I=parseFloat(n.textArea.style.width);;)if(E++,(O={x:x*((y=p+(w-=1))-(S={x:y-w/2,y:C-M/2}).x)-N*(C-S.y)+S.x,y:N*(y-S.x)+x*(C-S.y)+S.y}).x>n.img.destLeft&&O.x<n.img.destLeft+n.img.destWidth&&O.y>n.img.destTop&&O.y+parseFloat(n.textArea.style.fontSize)<n.img.destTop+n.img.destHeight||E===I){n.textArea.style.width=w+"px";break}}n.notify("selection",{prop:"clearUpperCanvas",onPropertyChange:!1})},e.prototype.setTextBoxWidth=function(e){var t=this.parent;if(0!==t.activeObj.rotatedAngle)return t.textArea.style.whiteSpace="nowrap",t.textArea.style.textOverflow="ellipsis",void(t.textArea.style.display="inline-block");t.textArea.style.whiteSpace="",t.textArea.style.textOverflow="","inline-block"===t.textArea.style.display&&(t.textArea.style.display="block");var i=this.getMaxText(!0);"block"===t.textArea.style.display||"inline-block"===t.textArea.style.display?this.updateFontStyles(!0):this.updateFontStyles();var n=this.upperContext.measureText(i).width+parseFloat(t.textArea.style.fontSize)/2,s=e?this.upperContext.measureText(String.fromCharCode(e.which)).width:0,o=sf.base.extend({},t.activeObj,{},!0),r="",a=this.getRotDegOfShape(o);if(r=o.shapeFlip!==t.transform.currFlipState?"":t.transform.currFlipState,e&&parseFloat(t.textArea.style.width)<n+s||sf.base.isNullOrUndefined(e))if(0===a)"horizontal"===r.toLowerCase()?parseFloat(t.textArea.style.left)-t.img.destLeft-n-s>0&&(t.textArea.style.width=n+s+"px"):t.img.destWidth-(parseFloat(t.textArea.style.left)-t.img.destLeft)>n+s&&(t.textArea.style.width=n+s+"px");else if(90===a)"vertical"===r.toLowerCase()?parseFloat(t.textArea.style.top)-t.img.destTop-n-s>0&&(t.textArea.style.width=n+s+"px"):t.img.destHeight-(parseFloat(t.textArea.style.top)-t.img.destTop)>n+s&&(t.textArea.style.width=n+s+"px");else if(180===a){var l=parseFloat(t.textArea.style.left),h=t.img.destLeft;if("horizontal"===r.toLowerCase())t.img.destWidth-(l-h)>n+s&&(t.textArea.style.width=n+s+"px");else l-h-n-s>0&&(t.textArea.style.width=n+s+"px")}else if(270===a){var d=parseFloat(t.textArea.style.top),c=t.img.destTop;if("vertical"===r.toLowerCase())t.img.destHeight-(d-c)>n+s&&(t.textArea.style.width=n+s+"px");else d-c-n-s>0&&(t.textArea.style.width=n+s+"px")}},e.prototype.setTextBoxHeight=function(){var e,t=this.parent,i=sf.base.extend({},t.activeObj,{},!0),n="",s=this.getRotDegOfShape(i);switch(n=i.textFlip===t.transform.currFlipState?"":""===i.textFlip?t.transform.currFlipState:i.textFlip,s){case 0:"vertical"===n.toLowerCase()?t.textArea.style.maxHeight=t.img.destHeight-(t.img.destHeight-parseFloat(t.textArea.style.top))+"px":(e=parseFloat(t.textArea.style.top)-t.img.destTop,t.textArea.style.maxHeight=t.img.destHeight-e+"px");break;case 90:"horizontal"===n.toLowerCase()?t.textArea.style.maxHeight=t.img.destWidth-(parseFloat(t.textArea.style.left)-t.img.destLeft)+"px":t.textArea.style.maxHeight=parseFloat(t.textArea.style.left)-t.img.destLeft+"px";break;case 180:"vertical"===n.toLowerCase()?(e=parseFloat(t.textArea.style.top)-t.img.destTop,t.textArea.style.maxHeight=t.img.destHeight-e+"px"):t.textArea.style.maxHeight=parseFloat(t.textArea.style.top)-t.img.destTop+"px";break;case 270:"horizontal"===n.toLowerCase()?t.textArea.style.maxHeight=parseFloat(t.textArea.style.left)-t.img.destLeft+"px":t.textArea.style.maxHeight=t.img.destWidth-(parseFloat(t.textArea.style.left)-t.img.destLeft)+"px"}},e.prototype.updatePathRatio=function(e){for(var t=this.parent,i=0,n=e.pointColl.length;i<n;i++){var s=e.pointColl[i];s.ratioX=(s.x-t.img.destLeft)/t.img.destWidth,s.ratioY=(s.y-t.img.destTop)/t.img.destHeight}},e.prototype.stopPathDrawing=function(e,t){var i=this.parent;if("path"===i.activeObj.shape){var n={shape:null};if(i.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:n}}),"path"===n.shape){var s=sf.base.extend({},i.cropObj,{},!0),o={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var r=o.currObj;r.objColl=sf.base.extend([],i.objColl,[],!0),r.pointColl=sf.base.extend([],i.pointColl,[],!0),r.afterCropActions=sf.base.extend([],i.afterCropActions,[],!0);var a={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),r.selPointColl=sf.base.extend([],a.selPointColl,[],!0),i.notify("selection",{prop:"setCurrentDrawingShape",value:{value:""}}),i.currObjType.isDragging=!1,e&&"touchstart"!==e.type&&sf.base.isNullOrUndefined(t)&&i.activeObj.pointColl.pop(),this.updatePathRatio(i.activeObj),sf.base.isNullOrUndefined(i.activeObj.imageRatio)&&i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i.objColl.push(i.activeObj),i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:r,previousObjColl:r.objColl,previousPointColl:r.pointColl,previousSelPointColl:r.selPointColl,previousCropObj:s,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),i.objColl.pop(),e&&(i.notify("selection",{prop:"mouseUpEventHandler",value:{e:e}}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})),i.notify("draw",{prop:"setNewPath",value:{bool:!0}}),i.objColl[i.objColl.length-1]&&i.selectShape(i.objColl[i.objColl.length-1].currIndex),sf.base.isBlazor()?i.updateToolbar(i.element,"quickAccessToolbar",i.activeObj.shape):i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}});var l={shapeSettingsObj:{}};i.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:l}});var h=l.shapeSettingsObj,d={cancel:!1,action:"draw-end",previousShapeSettings:h},c={cancel:!1,action:"move",previousShapeSettings:h};i.notify("selection",{prop:"triggerShapeChange",onPropertyChange:!1,value:{shapeResizingArgs:d,shapeMovingArgs:c,type:"mouse-up"}})}}},e.prototype.findTextTarget=function(e){var t,i,n=this.parent;if("text"!==n.activeObj.shape){if("path"===n.activeObj.shape)return void this.stopPathDrawing(e,null);if("dblclick"!==e.type)return;var s=sf.base.extend([],n.objColl,[],!0),o={bool:null};if(n.notify("selection",{prop:"findTargetObj",onPropertyChange:!1,value:{x:e.clientX,y:e.clientY,isCrop:!1,obj:o}}),n.objColl=s,!o.bool||"text"!==n.activeObj.shape)return}if("dblclick"===e.type?(t=e.clientX,i=e.clientY):"touchstart"===e.type&&(t=e.touches[0].clientX,i=e.touches[0].clientY,n.notify("selection",{prop:"setTouchEndPoint",onPropertyChange:!1,value:{x:e.touches[0].clientX,y:e.touches[0].clientY}})),sf.base.isBlazor()?n.updateToolbar(n.element,"enableDisableToolbarBtn","textAreaClicked"):(n.notify("toolbar",{prop:"setPreventZoomBtn",onPropertyChange:!1,value:{isPrevent:!0}}),n.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),n.notify("toolbar",{prop:"setPreventZoomBtn",onPropertyChange:!1,value:{isPrevent:!1}}),n.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})),sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i))if("block"!==n.textArea.style.display&&"inline-block"!==n.textArea.style.display||""===this.selectedText()||"mousedown"!==e.type)"none"===n.textArea.style.display&&(n.textArea.style.display="block");else{h=n.textArea.value;n.textArea.value+="a",n.textArea.value=h}else{var r=n.lowerCanvas.getBoundingClientRect();t-=r.left,i-=r.top;var a="",l=this.getRotDegOfShape(n.activeObj);a=""===n.activeObj.textFlip?n.activeObj.textFlip===n.transform.currFlipState?"":n.transform.currFlipState:n.activeObj.textFlip===n.transform.currFlipState?"":""===n.transform.currFlipState?n.activeObj.textFlip:n.transform.currFlipState;var h=void 0;if("none"===n.textArea.style.display){h=sf.base.extend({},n.activeObj,{},!0);for(var d=0;d<n.objColl.length;d++)JSON.stringify(n.activeObj)===JSON.stringify(n.objColl[d])&&n.objColl.splice(d,1);this.refreshActiveObj(),this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),this.lowerContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),n.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),n.notify("draw",{prop:"redrawDownScale"}),n.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),n.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),(n.currSelectionPoint&&"crop-circle"===n.currSelectionPoint.shape||n.isCircleCrop)&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),n.activeObj=h,this.updateFontStyles();var c=sf.base.extend({},n.activeObj,{},!0),p=c.topLeftCircle.radius,u=c.activePoint,f=u.startX,g=u.startY,m=u.endX,v=u.endY,b={x:f+u.width/2,y:g+u.height/2},y=Math.cos(c.rotatedAngle),C=Math.sin(c.rotatedAngle),w={x:y*(f-b.x)-C*(g-b.y)+b.x,y:C*(f-b.x)+y*(g-b.y)+b.y},M={x:y*(m-b.x)-C*(g-b.y)+b.x,y:C*(m-b.x)+y*(g-b.y)+b.y},S={x:y*(f-b.x)-C*(v-b.y)+b.x,y:C*(f-b.x)+y*(v-b.y)+b.y},x={x:y*(m-b.x)-C*(v-b.y)+b.x,y:C*(m-b.x)+y*(v-b.y)+b.y};o={position:null,x:t,y:i,x1:w.x,y1:w.y,x2:M.x,y2:M.y,x3:S.x,y3:S.y,x4:x.x,y4:x.y};if(n.notify("draw",{prop:"checkPointPosition",onPropertyChange:!1,value:{obj:o}}),0!==c.rotatedAngle&&("inside"===o.position||"on"===o.position)||0===c.rotatedAngle&&t>=c.activePoint.startX-2*p&&t<=c.activePoint.endX+2*p&&i>=c.activePoint.startY-2*p&&i<=c.activePoint.endY+2*p){var N;if(this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),4===c.flipObjColl.length&&(c.flipObjColl=[],a="",c.shapeFlip=""),""===a&&c.flipObjColl.length>1&&(a=c.flipObjColl[c.flipObjColl.length-1]),c.flipObjColl.length<=1)t=(N=this.setTextBoxPos(c,l,a,t,i)).x,i=N.y;else t=(N=this.setTextBoxPoints(c,l,a,t,i)).x,i=N.y;if(0!==n.activeObj.rotatedAngle){var O=this.getTextBoxPosition(n.activeObj);t=O.x,i=O.y,t=(O=this.setFlipState(t,i,n.activeObj)).x,i=O.y}this.renderTextArea(t,i,c)}else this.applyActObj()}}},e.prototype.getTextBoxPosition=function(e,t){var i={x:0,y:0},n=e.activePoint,s=n.startX,o=n.startY,r=n.endX,a=n.endY,l=s+n.width/2,h=o+n.height/2,d=Math.cos(e.rotatedAngle),c=Math.sin(e.rotatedAngle),p={x:d*(s-l)-c*(o-h)+l,y:c*(s-l)+d*(o-h)+h},u={x:d*(r-l)-c*(o-h)+l,y:c*(r-l)+d*(o-h)+h},f={x:d*(s-l)-c*(a-h)+l,y:c*(s-l)+d*(a-h)+h},g={x:d*(r-l)-c*(a-h)+l,y:c*(r-l)+d*(a-h)+h},m=this.getRotDegOfShape(e);return 0===m||360===m?i={x:p.x,y:p.y}:90===m||-270===m?i={x:u.x,y:u.y}:180===m||-180===m?i={x:g.x,y:g.y}:270!==m&&-90!==m||(i={x:f.x,y:f.y}),t&&(t.x=i.x,t.y=i.y),i},e.prototype.setFlipState=function(e,t,i,n){var s=this.parent,o={panRegion:""},r=s.lowerCanvas,a=r.clientWidth,l=r.clientHeight,h={x:0,y:0};return s.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:o}}),""!==o.panRegion&&("horizontal"===o.panRegion?(h.x=a-a/2,e=h.x-e+h.x):"vertical"===o.panRegion?(h.y=l-l/2,t=h.y-t+h.y):(e=(h={x:a-a/2,y:l-l/2}).x-e+h.x,t=h.y-t+h.y)),n&&(n.x=e,n.y=t),{x:e,y:t}},e.prototype.fileChanged=function(e){var t=e.target.files[0],i=t.name&&t.name.split(".")[1].toLowerCase();if(i&&-1===["jpg","jpeg","png","svg"].indexOf(i))this.refreshActiveObj();else{var n=window.URL.createObjectURL(e.target.files[0]);this.onLoadImgShape(null,null,null,null,n.toString(),!0),sf.base.isBlazor()||(document.getElementById(this.parent.element.id+"_fileUpload").value="")}},e.prototype.onLoadImgShape=function(e,t,i,n,s,o,r,a,l){var h=this,d=this.parent;"string"==typeof s?this.shapeImg.src=s:(d.inMemoryCanvas.width=s.width,d.inMemoryCanvas.height=s.height,d.inMemoryCanvas.getContext("2d").putImageData(s,0,0),this.shapeImg.src=d.inMemoryCanvas.toDataURL()),this.prevObjColl(),d.activeObj.shape="image",this.initShapeProps(),this.shapeImg.onload=function(){h.upperContext.drawImage(h.shapeImg,0,0,h.shapeImg.width,h.shapeImg.height),h.updateImgCanvas(o,e,t,i,n,r,a,l)}},e.prototype.updateImgCanvas=function(e,t,i,n,s,o,r,a){var l=this,h=this.parent;h.activeObj.imageElement=this.shapeImg,h.activeObj.imageCanvas=h.createElement("canvas");var d={width:0,height:0};if(h.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:this.shapeImg.width,height:this.shapeImg.height,obj:d,isImgShape:null}}),n&&s)if(r){var c={ratio:null};h.notify("selection",{prop:"findImageRatio",onPropertyChange:!1,value:{width:this.shapeImg.width,height:this.shapeImg.height,obj:c}}),d=this.resizeImage(n,c.ratio)}else d={width:n,height:s};if(this.updateObj(d,t,i),h.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:h.activeObj.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:null}}),h.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:this.shapeImg.width,height:this.shapeImg.height,obj:d,isImgShape:!0}}),n&&s)if(r){var p={ratio:null};h.notify("selection",{prop:"findImageRatio",onPropertyChange:!1,value:{width:this.shapeImg.width,height:this.shapeImg.height,obj:p}}),d=this.resizeImage(n,p.ratio)}else d={width:n,height:s};null!=a&&(h.activeObj.opacity=a),this.updateObj(d,t,i),h.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.shapeImg=null,o&&(h.activeObj.rotatedAngle=o*(Math.PI/180),h.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:h.activeObj}}));var u={shapeSettingsObj:{}};h.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:u}});var f=u.shapeSettingsObj,g={cancel:!1,action:"insert",previousShapeSettings:f,currentShapeSettings:f};sf.base.isBlazor()&&h.events&&!0===h.events.shapeChanging.hasDelegate?h.dotNetRef.invokeMethodAsync("ShapeEventAsync","OnShape",g,null).then((function(t){l.drawShapeImageEvent(t,e),h.isPublicMethod&&h.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),h.isPublicMethod=!1})):(h.trigger("shapeChanging",g),this.drawShapeImageEvent(g,e),h.isPublicMethod&&h.notify("undo-redo",{prop:"updateUndoRedo",onPropertyChange:!1}),h.isPublicMethod=!1)},e.prototype.updateObj=function(e,t,i){var n=this.parent;n.activeObj.activePoint.width=e.width,n.activeObj.activePoint.height=e.height,n.activeObj.activePoint.startX=t||n.lowerCanvas.width/2-e.width/2,n.activeObj.activePoint.startY=i||n.lowerCanvas.height/2-e.height/2,n.activeObj.activePoint.endX=n.activeObj.activePoint.startX+e.width,n.activeObj.activePoint.endY=n.activeObj.activePoint.startY+e.height},e.prototype.resizeImage=function(e,t){var i=t.split(":"),n=parseInt(i[0],10),s=parseInt(i[1],10);return{width:e,height:Math.round(e*s/n)}},e.prototype.setTextBoxPos=function(e,t,i,n,s){var o={x:n,y:s},r=e.activePoint,a=r.startX,l=r.startY,h=r.endX,d=r.endY;switch(i=i.toLowerCase(),t){case 0:"horizontal"===i?(o.x=h,o.y=l):"vertical"===i?(o.x=a,o.y=d):(o.x=a,o.y=l);break;case 90:"horizontal"===i?(o.x=a,o.y=l):"vertical"===i?(o.x=h,o.y=d):(o.x=h,o.y=l);break;case 180:"horizontal"===i?(o.x=a,o.y=d):"vertical"===i?(o.x=h,o.y=l):(o.x=h,o.y=d);break;case 270:"horizontal"===i?(o.x=h,o.y=d):"vertical"===i?(o.x=a,o.y=l):(o.x=a,o.y=d)}return o},e.prototype.setTextBoxPoints=function(e,t,i,n,s){var o={x:n,y:s},r=e.activePoint,a=r.startX,l=r.startY,h=r.endX,d=r.endY;switch(i=i.toLowerCase(),t){case 0:e.flipObjColl[0]&&"horizontal"===e.flipObjColl[0].toLowerCase()?"horizontal"===i?(o.x=a,o.y=l):"vertical"===i&&(o.x=h,o.y=d):"horizontal"===i?(o.x=h,o.y=d):"vertical"===i&&(o.x=h,o.y=l);break;case 90:e.flipObjColl[0]&&"horizontal"===e.flipObjColl[0].toLowerCase()?"horizontal"===i?(o.x=h,o.y=d):"vertical"===i&&(o.x=a,o.y=d):"horizontal"===i?(o.x=a,o.y=d):"vertical"===i&&(o.x=a,o.y=l);break;case 180:e.flipObjColl[0]&&"horizontal"===e.flipObjColl[0].toLowerCase()?("horizontal"===i||"vertical"===i)&&(o.x=a,o.y=l):"horizontal"===i?(o.x=a,o.y=l):"vertical"===i&&(o.x=a,o.y=d);break;case 270:e.flipObjColl[0]&&"horizontal"===e.flipObjColl[0].toLowerCase()?"horizontal"===i?(o.x=a,o.y=l):"vertical"===i&&(o.x=h,o.y=l):"horizontal"===i?(o.x=h,o.y=l):"vertical"===i&&(o.x=h,o.y=d)}return o},e.prototype.selectedText=function(){var e=this.parent,t=e.textArea.selectionStart,i=e.textArea.selectionEnd;return e.textArea.value.substring(t,i)},e.prototype.panObjColl=function(e,t,i){var n=this.parent;if(n.objColl.length>0){for(var s=0,o=n.objColl.length;s<o;s++){var r=n.objColl[s];if(""===i||"vertical"===i){if(r.activePoint.startX+=e,r.activePoint.endX+=e,r.rotationCirclePointColl&&(r.rotationCirclePointColl.x+=e),"path"===r.shape)for(var a=0,l=r.pointColl.length;a<l;a++)r.pointColl[a].x+=e}else if(r.activePoint.startX-=e,r.activePoint.endX-=e,r.rotationCirclePointColl&&(r.rotationCirclePointColl.x-=e),"path"===r.shape){a=0;for(var h=r.pointColl.length;a<h;a++)r.pointColl[a].x-=e}if(""===i||"horizontal"===i){if(r.activePoint.startY+=t,r.activePoint.endY+=t,r.rotationCirclePointColl&&(r.rotationCirclePointColl.y+=t),"path"===r.shape)for(a=0;a<r.pointColl.length;a++)r.pointColl[a].y+=t}else if(r.activePoint.startY-=t,r.activePoint.endY-=t,r.rotationCirclePointColl&&(r.rotationCirclePointColl.y-=t),"path"===r.shape)for(a=0;a<r.pointColl.length;a++)r.pointColl[a].y-=t;if(r=this.updateWidthHeight(r),n.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:r.activePoint,obj:r}}),"line"===r.shape||"arrow"===r.shape){r.pointColl=this.getLinePoints(r.activePoint.startX,r.activePoint.startY,r.activePoint.endX,r.activePoint.endY);for(var d=0,c=r.pointColl.length;d<c;d++)r.pointColl[d].ratioX=(r.pointColl[d].x-n.img.destLeft)/n.img.destWidth,r.pointColl[d].ratioY=(r.pointColl[d].y-n.img.destTop)/n.img.destHeight}var p=this.lowerContext.filter;this.lowerContext.filter="none",this.apply(r.shape,r),this.lowerContext.filter=p,this.refreshActiveObj()}n.notify("draw",{prop:"applyFrame",value:{ctx:this.lowerContext,frame:n.frameObj.type,preventImg:!0}})}},e.prototype.updateFontStyles=function(e){var t=this.parent;this.upperContext.strokeStyle=t.activeObj.strokeSettings.strokeColor,this.upperContext.fillStyle=t.activeObj.strokeSettings.strokeColor;var i="";t.activeObj.textSettings.bold&&(i="bold "),t.activeObj.textSettings.italic&&(i="italic "),t.activeObj.textSettings.bold&&t.activeObj.textSettings.italic&&(i="italic bold ");var n=e?parseFloat(t.textArea.style.fontSize):t.activeObj.textSettings.fontSize,s="block"===t.textArea.style.display||"inline-block"===t.textArea.style.display?t.textArea.style.fontFamily:t.activeObj.textSettings.fontFamily;this.upperContext.font=i+n+"px "+s},e.prototype.applyFontStyle=function(e){var t=this.parent,i={shapeSettingsObj:{}};t.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:i}});var n=i.shapeSettingsObj;this.pushActItemIntoObj();var s=sf.base.extend([],t.objColl,[],!0);switch(t.objColl.pop(),"none"===t.textArea.style.display?this.updateFontRatio(t.activeObj):this.updateFontRatio(t.activeObj,!0),e){case"default":this.updateFontStyle(e,s,"normal","normal");break;case"bold":this.updateFontStyle(e,s,"bold","normal");break;case"italic":this.updateFontStyle(e,s,"normal","italic");break;case"bolditalic":this.updateFontStyle(e,s,"bold","italic")}var o={action:"font-style",currentShapeSettings:sf.base.extend({},n,{},!0)};o.currentShapeSettings.fontStyle=[e],t.triggerShapeChanged(o)},e.prototype.updateFontStyle=function(e,t,i,n){var s=this.parent,o=s.textArea.style;if("block"===o.display||"inline-block"===o.display){"normal"===o.fontWeight&&"bold"===i?o.fontWeight="bold":"bold"===o.fontWeight&&"bold"===i&&(o.fontWeight="normal"),"normal"===o.fontStyle&&"italic"===n?o.fontStyle="italic":"italic"===o.fontStyle&&"italic"===n&&(o.fontStyle="normal");var r="normal"===o.fontWeight&&"normal"===o.fontStyle?"default":"bold"===o.fontWeight&&"normal"===o.fontStyle?"bold":"normal"===o.fontWeight&&"italic"===o.fontStyle?"italic":"bolditalic",a=this.getTextAreaWidth(r);o.width=a+"px",this.updateObjColl(e,t)}else this.textSettings.bold=s.activeObj.textSettings.bold="normal"!==i,this.textSettings.italic=s.activeObj.textSettings.italic="normal"!==n,this.redrawText(),s.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:t}})},e.prototype.updateArrowRatio=function(e){var t,i,n={arrowDimension:null};this.parent.notify("draw",{prop:"getArrowDimension",onPropertyChange:!1,value:{obj:n}}),t=Math.abs(e.activePoint.width)>Math.abs(e.activePoint.height)?Math.abs(e.activePoint.width):Math.abs(e.activePoint.height);for(var s=0,o=["bar","arrow","arrowSolid","circle","square"];s<o.length;s++){i=o[s];var r=t/n.arrowDimension[i].width,a=t/n.arrowDimension[i].height;n.arrowDimension[i].ratioX=r,n.arrowDimension[i].ratioY=a}},e.prototype.updateArrowSize=function(e){var t,i,n={arrowDimension:null};this.parent.notify("draw",{prop:"getArrowDimension",onPropertyChange:!1,value:{obj:n}}),t=Math.abs(e.activePoint.width)>Math.abs(e.activePoint.height)?Math.abs(e.activePoint.width):Math.abs(e.activePoint.height);for(var s=0,o=["bar","arrow","arrowSolid","circle","square"];s<o.length;s++){i=o[s];var r=n.arrowDimension[i].ratioX,a=n.arrowDimension[i].ratioY;n.arrowDimension[i].width=t/r,n.arrowDimension[i].height=t/a}},e.prototype.updateFontRatio=function(e,t){var i=this.parent,n=this.getMaxText(t),s=this.upperContext.measureText(n).width+.5*i.activeObj.textSettings.fontSize,o=i.activeObj.textSettings.fontSize+.25*i.activeObj.textSettings.fontSize,r=this.getRotDegOfShape(e);sf.base.isNullOrUndefined(t)?0===r||180===Math.abs(r)?e.textSettings.fontRatio=s/e.textSettings.fontSize:e.textSettings.fontRatio=o/e.textSettings.fontSize:t&&(e.textSettings.fontRatio=s/parseFloat(i.textArea.style.fontSize))},e.prototype.updateFontSize=function(e){var t=this.getRotDegOfShape(e);0===t||180===Math.abs(t)?e.textSettings.fontSize=e.activePoint.width/e.textSettings.fontRatio:e.textSettings.fontSize=e.activePoint.height/e.textSettings.fontRatio},e.prototype.updateObjColl=function(e,t){var i=this.parent,n=sf.base.extend({},i.cropObj,{},!0),s={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}});var o=s.currObj;o.objColl=t,o.pointColl=sf.base.extend([],i.pointColl,[],!0),o.afterCropActions=sf.base.extend([],i.afterCropActions,[],!0);var r={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),o.selPointColl=sf.base.extend([],r.selPointColl,[],!0);var a=i.activeObj.textSettings.bold,l=i.activeObj.textSettings.italic;switch(e){case"default":i.activeObj.textSettings.bold=!1,i.activeObj.textSettings.italic=!1;break;case"bold":i.activeObj.textSettings.bold=!0,i.activeObj.textSettings.italic=!1;break;case"italic":i.activeObj.textSettings.bold=!1,i.activeObj.textSettings.italic=!0;break;case"bolditalic":i.activeObj.textSettings.bold=!0,i.activeObj.textSettings.italic=!0}i.objColl.push(i.activeObj),i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),i.objColl.pop(),i.activeObj.textSettings.bold=a,i.activeObj.textSettings.italic=l},e.prototype.pushActItemIntoObj=function(){var e=this.parent;if("none"===e.textArea.style.display)e.objColl.push(e.activeObj);else{var t=sf.base.extend({},e.activeObj,{},!0);e.notify("selection",{prop:"setTextBoxStylesToActObj",onPropertyChange:!1}),e.objColl.push(e.activeObj),e.activeObj=t}},e.prototype.clearActObj=function(){var e=this.parent;"none"===e.textArea.style.display&&(this.refreshActiveObj(),this.applyActObj(),this.refreshActiveObj(),e.currObjType.isCustomCrop=!1)},e.prototype.refreshActiveObj=function(){var e=this.parent;e.activeObj={},e.activeObj.activePoint={startX:0,startY:0,endX:0,endY:0,width:0,height:0},e.activeObj.triangle=[],e.activeObj.triangleRatio=[],e.activeObj.flipObjColl=[],e.activeObj.strokeSettings=this.strokeSettings,e.activeObj.textSettings=this.textSettings,e.activeObj.rotatedAngle=0,e.activeObj.opacity=1},e.prototype.applyActObj=function(e){var t=this.parent,i=!1;if(void 0!==t.activeObj.shape&&"text"===t.activeObj.shape&&""===t.activeObj.keyHistory)this.refreshActiveObj(),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height);else{var n=void 0,s=!1;if(void 0!==t.activeObj.shape&&(n=t.activeObj.shape.split("-")),(void 0===n&&t.currObjType.isCustomCrop||void 0!==n&&"crop"===n[0])&&(s=!0),t.activeObj.shape&&!s&&"shape"!==t.activeObj.shape){for(var o=0;o<t.objColl.length;o++)if(JSON.stringify(t.activeObj)===JSON.stringify(t.objColl[o])){i=!0;break}if(!i){sf.base.isNullOrUndefined(t.activeObj.currIndex)&&(t.activeObj.currIndex="shape_"+(t.objColl.length+1)),this.updImgRatioForActObj();var r=t.activeObj.currIndex.split("_"),a=t.objColl.splice(0,parseInt(r[1],10)-1);a.push(sf.base.extend({},t.activeObj,{},!0));for(o=0;o<t.objColl.length;o++)a.push(t.objColl[o]);t.objColl=a,a=[],this.refreshActiveObj(),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),t.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),t.currObjType.shape="",this.refreshActiveObj(),t.isCircleCrop&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),sf.base.isBlazor()?t.updateToolbar(t.element,"destroyQuickAccessToolbar"):t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),sf.base.isNullOrUndefined(e)&&(t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),t.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:null}}))}}}},e.prototype.alignTextAreaIntoCanvas=function(){var e=this.parent,t=e.textArea.value;e.textArea.value="";for(var i=0,n=t.length;i<n;i++)e.textArea.value+=t[i],e.textArea.style.height="auto",e.textArea.style.height=e.textArea.scrollHeight+"px",this.setTextBoxWidth()},e.prototype.transformTextArea=function(){var e=this.parent;if("text"===e.activeObj.shape){e.textArea.style.transformOrigin="0 0";var t=e.activeObj.rotatedAngle*(180/Math.PI),i="",n=this.getRotDegOfShape(e.activeObj);if(e.activeObj.flipObjColl.length>0)for(var s=0;s<e.activeObj.flipObjColl.length;s++)i+=0!==n&&n%90==0&&180!==n?"horizontal"===e.activeObj.flipObjColl[s].toLowerCase()?"scale(1, -1)":"scale(-1, 1)":"horizontal"===e.activeObj.flipObjColl[s].toLowerCase()?"scale(-1, 1)":"scale(1, -1)",n+=t,("horizontal"===e.activeObj.flipObjColl[s].toLowerCase()||"vertical"===e.activeObj.flipObjColl[s].toLowerCase())&&(e.textArea.style.transform="rotate("+n+"deg)"+i);else n+=t,e.textArea.style.transform="rotate("+n+"deg)"}},e.prototype.getTextAreaWidth=function(e){var t=this.parent,i=t.activeObj.textSettings.bold,n=t.activeObj.textSettings.italic;switch(e){case"default":t.activeObj.textSettings.bold=!1,t.activeObj.textSettings.italic=!1;break;case"bold":t.activeObj.textSettings.bold=!0,t.activeObj.textSettings.italic=!1;break;case"italic":t.activeObj.textSettings.bold=!1,t.activeObj.textSettings.italic=!0;break;case"bolditalic":t.activeObj.textSettings.bold=!0,t.activeObj.textSettings.italic=!0}var s,o="none"!==t.textArea.style.display;return this.updateFontStyles(o),s=o?this.upperContext.measureText(t.textArea.value).width+.5*t.activeObj.textSettings.fontSize:this.upperContext.measureText(t.activeObj.keyHistory).width+.5*t.activeObj.textSettings.fontSize,t.activeObj.textSettings.bold=i,t.activeObj.textSettings.italic=n,s},e.prototype.getObjDetails=function(e){var t=this.parent,i={};switch(i.id=e.currIndex,i.type=t.toPascalCase(e.shape),i.startX=e.activePoint.startX,i.startY=e.activePoint.startY,e.shape){case"rectangle":i.width=e.activePoint.width,i.height=e.activePoint.height,i.strokeColor=e.strokeSettings.strokeColor,i.fillColor=e.strokeSettings.fillColor,i.strokeWidth=e.strokeSettings.strokeWidth;break;case"ellipse":i.radius=e.activePoint.width/2,i.strokeColor=e.strokeSettings.strokeColor,i.fillColor=e.strokeSettings.fillColor,i.strokeWidth=e.strokeSettings.strokeWidth;break;case"line":case"arrow":i.length=e.activePoint.width,i.strokeColor=e.strokeSettings.strokeColor,i.strokeWidth=e.strokeSettings.strokeWidth;break;case"text":i.text=e.keyHistory,i.fontSize=e.textSettings.fontSize,i.color=e.strokeSettings.strokeColor,i.fontStyle=[],e.textSettings.bold&&i.fontStyle.push("bold"),e.textSettings.italic&&i.fontStyle.push("italic");break;case"path":i.strokeColor=e.strokeSettings.strokeColor,i.strokeWidth=e.strokeSettings.strokeWidth}return i},e.prototype.getFreehandDrawDetails=function(e){var t=this.parent,i={};return i.id=t.pointColl[e].id,i.type=n.FreehandDraw,i.points=sf.base.extend([],t.pointColl[e].points),i.strokeColor=t.pointColl[e].strokeColor,i.strokeWidth=t.pointColl[e].strokeWidth,i},e.prototype.getShapeSetting=function(e,t){var i,n=this.parent;if(!n.disabled&&n.isImageLoaded)if(this.applyActObj(),"shape"===e.split("_")[0]){for(var s,o=0,r=n.objColl.length;o<r;o++)if(n.objColl[o].currIndex===e){s=sf.base.extend({},n.objColl[o],{},!0);break}i=this.getObjDetails(s)}else"pen"===e.split("_")[0]&&(i=this.getFreehandDrawDetails(parseInt(e.split("_")[1],10)-1));t.shapeDetails=i},e.prototype.getShapeSettings=function(e){var t=this.parent,i=[];if(!t.disabled&&t.isImageLoaded){this.applyActObj();for(var n=0,s=t.objColl.length;n<s;n++){var o=this.getObjDetails(t.objColl[n]);i.push(o)}for(n=0;n<t.freehandCounter;n++){o=this.getFreehandDrawDetails(n);i.push(o)}}e.shapeDetailsColl=i},e.prototype.isPointsInRange=function(e,t,i){var n=!1,s=this.parent;!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(t)&&e>=s.img.destLeft&&t>=s.img.destTop&&e<=s.img.destLeft+s.img.destWidth&&t<=s.img.destTop+s.img.destHeight&&(n=!0),i.inRange=n},e.prototype.alignRotateFlipColl=function(e,t,i){return e=this.popForDefaultTransformedState(e),e=this.popForDefaultFlipState(e),0===(e=this.popForDefaultRotateState(e)).length&&t&&(this.parent.transform.degree=0,this.parent.transform.currFlipState=""),i.collection=e,e},e.prototype.popForDefaultTransformedState=function(e){for(var t=0,i=0,n=0,s=0,o=0;o<e.length;o++)90===e[o]||"rotateRight"===e[o]?(i=0,n=0,s=0,4===++t&&(e.pop(),e.pop(),e.pop(),e.pop())):-90===e[o]||"rotateLeft"===e[o]?(t=0,n=0,s=0,4===++i&&(e.pop(),e.pop(),e.pop(),e.pop())):"horizontal"===e[o]||"Horizontal"===e[o]||"horizontalflip"===e[o]?(i=0,t=0,s=0,2===++n&&(e.pop(),e.pop())):"vertical"!==e[o]&&"Vertical"!==e[o]&&"verticalflip"!==e[o]||(n=0,i=0,t=0,2===++s&&(e.pop(),e.pop()));return e},e.prototype.popForDefaultFlipState=function(e){for(var t=0,i=e.length-3;t<i;t++){var n="horizontal"===e[t]||"Horizontal"===e[t]||"horizontalFlip"===e[t],s="vertical"===e[t]||"Vertical"===e[t]||"verticalFlip"===e[t],o="horizontal"===e[t+1]||"Horizontal"===e[t+1]||"horizontalFlip"===e[t+1],r="vertical"===e[t+1]||"Vertical"===e[t+1]||"verticalFlip"===e[t+1],a="horizontal"===e[t+2]||"Horizontal"===e[t+2]||"horizontalFlip"===e[t+2],l="vertical"===e[t+2]||"Vertical"===e[t+2]||"verticalFlip"===e[t+2],h="horizontal"===e[t+3]||"Horizontal"===e[t+3]||"horizontalFlip"===e[t+3];(n&&r&&a&&l||s&&o&&l&&h)&&(e.splice(t,4),t-=4)}return e},e.prototype.popForDefaultRotateState=function(e){for(var t=0;t<e.length-1;t++){var i=e[t],n=e[t+1];(90!==i&&"rotateRight"!==i||-90!==n&&"rotateLeft"!==n)&&(-90!==i&&"rotateLeft"!==i||90!==n&&"rotateRight"!==n)||(e.splice(t,2),t-=2)}return e},e.prototype.selectShape=function(e,t){var i=this.parent,n=!1;if(!i.disabled&&i.isImageLoaded)if(this.applyActObj(),"shape"===e.split("_")[0]){for(var s,o=0,r=i.objColl.length;o<r;o++)if(i.objColl[o].currIndex===e){s=sf.base.extend({},i.objColl[o],{},!0);break}if(sf.base.isNullOrUndefined(s))n=!1;else{n=!0,i.activeObj=s;var a={canvasFilter:null};i.notify("toolbar",{prop:"getCanvasFilter",onPropertyChange:!1,value:{obj:a}}),this.lowerContext.filter=a.canvasFilter,i.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:i.activeObj}}),sf.base.isBlazor()?(i.updateToolbar(i.element,i.activeObj.shape),"path"===i.activeObj.shape?i.updateToolbar(i.element,"path","pathQuickAccessToolbar"):i.updateToolbar(i.element,"quickAccessToolbar",i.activeObj.shape)):("text"===i.activeObj.shape?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"text",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):"pen"===i.activeObj.shape?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"pen",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}):i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}))}}else if("pen"===e.split("_")[0]){a={bool:!1};i.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:a}}),a.bool&&i.okBtn();var l={isIndex:!1};i.notify("freehand-draw",{prop:"isFHDIdx",value:{index:parseInt(e.split("_")[1],10)-1,obj:l}}),l.isIndex?(n=!0,i.notify("freehand-draw",{prop:"selectFhd",value:{id:e}}),sf.base.isBlazor()?(i.updateToolbar(i.element,"pen"),i.updateToolbar(i.element,"quickAccessToolbar","pen")):(i.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}}),i.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}))):n=!1}t.isSelected=n},e.prototype.deleteShape=function(e){var t=this.parent;if(!t.disabled&&t.isImageLoaded){if(this.applyActObj(),"shape"===e.split("_")[0]){for(var i=0,n=t.objColl.length;i<n;i++)if(t.objColl[i].currIndex===e){t.objColl.splice(i,1);break}}else"pen"===e.split("_")[0]&&t.notify("freehand-draw",{prop:"handle-freehand-draw",value:{id:e}});var s={canvasFilter:null};t.notify("toolbar",{prop:"getCanvasFilter",onPropertyChange:!1,value:{obj:s}}),this.lowerContext.filter=s.canvasFilter,this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),sf.base.isBlazor()?t.updateToolbar(t.element,"imageLoaded"):t.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})}},e.prototype.getMaxText=function(e,t,i){var n;sf.base.isNullOrUndefined(t)&&(t=e?this.parent.textArea.value:this.parent.activeObj.keyHistory);for(var s=t.split("\n"),o=s[0].length,r=s[0],a=1;a<s.length;a++)(n=s[a].length)>o&&(r=s[a],o=n);return i&&(i.maxText=r),r},e.prototype.getLinePoints=function(e,t,i,n){var s,o,r=[];if(e===i){t<n?(s=[e,t],o=[i,n]):(o=[e,t],s=[i,n]);for(var a=this.getSlope(s,o,!0),l=this.getIntercept(s,a),h=s[1];h<=o[1];h++){var d=a*h+l;r.push({x:d,y:h})}}else{e<i?(s=[e,t],o=[i,n]):(o=[e,t],s=[i,n]);for(a=this.getSlope(s,o,!1),l=this.getIntercept(s,a),d=s[0];d<=o[0];d++){h=a*d+l;r.push({x:d,y:h})}}if(Math.floor(e)===Math.floor(i)||r.length<10&&(n-t>10||t-n>10)){r=[];for(var c=Math.min(t,n),p=0;p<Math.abs(Math.floor(n)-Math.floor(t));p++)r.push({x:e,y:c+p});if(r.length>1){var u=void 0;u=sf.base.isNullOrUndefined(r[r.length-2])?{x:0,y:0}:r[r.length-2];var f=r[r.length-1].x-u.x,g=r[r.length-1].y-u.y;r.push({x:r[r.length-1].x+f/2,y:r[r.length-1].y+g/2})}}else if(Math.floor(t)===Math.floor(n)||r.length<10&&(i-e>10||e-i>10)){r=[];for(var m=Math.min(e,i),v=0;v<Math.abs(Math.floor(i)-Math.floor(e));v++)r.push({x:m+v,y:t});if(r.length>1){u=void 0;u=sf.base.isNullOrUndefined(r[r.length-2])?{x:0,y:0}:r[r.length-2];f=r[r.length-1].x-u.x,g=r[r.length-1].y-u.y;r.push({x:r[r.length-1].x+f/2,y:r[r.length-1].y+g/2})}}return r},e.prototype.getSlope=function(e,t,i){var n;if(i){if(e[1]===t[1])return null;n=(t[0]-e[0])/(t[1]-e[1])}else{if(e[0]===t[0])return null;n=(t[1]-e[1])/(t[0]-e[0])}return n},e.prototype.getIntercept=function(e,t){return null===t?e[0]:e[1]-t*e[0]},e.prototype.setPointCollForShapeRotation=function(e){var t=this.parent,i=e.activePoint,n=i.startX,s=i.startY,o=i.endX,r=i.endY,a=n+i.width/2,l=s+i.height/2,h=Math.cos(e.rotatedAngle),d=Math.sin(e.rotatedAngle),c={x:h*(n-a)-d*(s-l)+a,y:d*(n-a)+h*(s-l)+l},p={x:h*(o-a)-d*(s-l)+a,y:d*(o-a)+h*(s-l)+l},u={x:h*(n-a)-d*(r-l)+a,y:d*(n-a)+h*(r-l)+l},f={x:h*(o-a)-d*(r-l)+a,y:d*(o-a)+h*(r-l)+l};e.horTopLinePointColl=this.getLinePoints(c.x,c.y,p.x,p.y),e.horTopLinePointColl=this.getLinePoints(c.x,c.y,p.x,p.y),e.horBottomLinePointColl=this.getLinePoints(u.x,u.y,f.x,f.y),e.verLeftLinePointColl=this.getLinePoints(c.x,c.y,u.x,u.y),e.verRightLinePointColl=this.getLinePoints(p.x,p.y,f.x,f.y),e.verLeftLinePointColl.reverse(),e.verRightLinePointColl.reverse();for(var g=0;g<e.horTopLinePointColl.length;g++)e.horTopLinePointColl[g].ratioX=(e.horTopLinePointColl[g].x-this.parent.img.destLeft)/this.parent.img.destWidth,e.horTopLinePointColl[g].ratioY=(e.horTopLinePointColl[g].y-this.parent.img.destTop)/this.parent.img.destHeight;for(g=0;g<e.horBottomLinePointColl.length;g++)e.horBottomLinePointColl[g].ratioX=(e.horBottomLinePointColl[g].x-this.parent.img.destLeft)/this.parent.img.destWidth,e.horBottomLinePointColl[g].ratioY=(e.horBottomLinePointColl[g].y-this.parent.img.destTop)/this.parent.img.destHeight;for(g=0;g<e.verLeftLinePointColl.length;g++)e.verLeftLinePointColl[g].ratioX=(e.verLeftLinePointColl[g].x-this.parent.img.destLeft)/this.parent.img.destWidth,e.verLeftLinePointColl[g].ratioY=(e.verLeftLinePointColl[g].y-this.parent.img.destTop)/this.parent.img.destHeight;for(g=0;g<e.verRightLinePointColl.length;g++)e.verRightLinePointColl[g].ratioX=(e.verRightLinePointColl[g].x-this.parent.img.destLeft)/this.parent.img.destWidth,e.verRightLinePointColl[g].ratioY=(e.verRightLinePointColl[g].y-this.parent.img.destTop)/this.parent.img.destHeight;if("move"!==t.upperCanvas.style.cursor){var m={rotationCirclePoint:null};t.notify("selection",{prop:"getTransRotationPoint",value:{obj:e,object:m}});var v=m.rotationCirclePoint;v&&(e.rotationCirclePointColl={x:h*(v.x-a)-d*(v.y-l)+a,y:d*(v.x-a)+h*(v.y-l)+l},e.rotationCirclePointColl.ratioX=(e.rotationCirclePointColl.x-t.img.destLeft)/t.img.destWidth,e.rotationCirclePointColl.ratioY=(e.rotationCirclePointColl.y-t.img.destTop)/t.img.destHeight)}},e.prototype.getSquarePointForRotatedShape=function(e,t){var i={startX:0,startY:0,endX:0,endY:0,width:0,height:0},n=e.activePoint,s=n.startX,o=n.startY,r=n.endX,a=n.endY,l=s+n.width/2,h=o+n.height/2,d=Math.cos(e.rotatedAngle),c=Math.sin(e.rotatedAngle),p={x:d*(s-l)-c*(o-h)+l,y:c*(s-l)+d*(o-h)+h},u={x:d*(r-l)-c*(o-h)+l,y:c*(r-l)+d*(o-h)+h},f={x:d*(s-l)-c*(a-h)+l,y:c*(s-l)+d*(a-h)+h},g={x:d*(r-l)-c*(a-h)+l,y:c*(r-l)+d*(a-h)+h};return i.startX=p.x,i.startY=p.y,i.endX=p.x,i.endY=p.y,i.startX>u.x&&(i.startX=u.x),i.startX>f.x&&(i.startX=f.x),i.startX>g.x&&(i.startX=g.x),i.startY>u.y&&(i.startY=u.y),i.startY>f.y&&(i.startY=f.y),i.startY>g.y&&(i.startY=g.y),i.endX<u.x&&(i.endX=u.x),i.endX<f.x&&(i.endX=f.x),i.endX<g.x&&(i.endX=g.x),i.endY<u.y&&(i.endY=u.y),i.endY<f.y&&(i.endY=f.y),i.endY<g.y&&(i.endY=g.y),i.width=i.endX-i.startX,i.height=i.endY-i.startY,t&&(t.activePoint=i),i},e}(),y=function(){function e(e){this.isReverseFlip=!1,this.disablePan=!1,this.isReverseRotate=!1,this.flipColl=[],this.prevZoomValue=1,this.cropDimension={width:0,height:0},this.isPreventSelect=!1,this.preventDownScale=!1,this.resizedImgAngle=null,this.parent=e,this.addEventListener()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("transform",this.transform,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("transform",this.transform),this.parent.off("destroyed",this.destroy)},e.prototype.transform=function(e){switch(this.initTransformPvtVar(),e.prop){case"rotateImage":this.rotateImage(e.value.degree);break;case"flipImage":this.flipImage(e.value.direction);break;case"setDestPointsForFlipState":this.setDestPointsForFlipState();break;case"zoomAction":this.zoomAction(e.value.zoomFactor,e.value.zoomPoint,e.value.isResize);break;case"disableZoomOutBtn":this.disableZoomOutBtn(e.value.isZoomOut);break;case"rotatedFlip":this.rotatedFlip();break;case"drawPannedImage":this.drawPannedImage(e.value.xDiff,e.value.yDiff);break;case"drawPannImage":this.drawPannImage(e.value.point);break;case"performTransformation":this.performTransformation(e.value.text);break;case"updateTransform":this.updateTransform(e.value.text);break;case"rotatePan":this.rotatePan(e.value.isCropSelection,e.value.isDefaultZoom);break;case"drawRotatedImage":this.drawRotatedImage(e.value.degree);break;case"limitPan":this.limitPan();break;case"updateFlipActiveObj":this.updateFlipActiveObj(e.value.panRegion);break;case"resetZoom":this.resetZoom();break;case"pan":this.pan(e.value.value);break;case"zoom":this.zoom(e.value.zoomFactor,e.value.zoomPoint);break;case"setCurrPanRegion":this.setCurrPanRegion(e.value.region,e.value.type,e.value.obj);break;case"rotate":this.rotate(e.value.degree,e.value.obj);break;case"flip":this.flip(e.value.direction);break;case"update":this.update();break;case"calcMaxDimension":this.calcMaxDimension(e.value.width,e.value.height,e.value.obj,e.value.isImgShape);break;case"getPanMove":e.value.obj.panMove=this.panMove;break;case"setPanMove":this.panMove=e.value.point;break;case"getTempPanMove":e.value.obj.tempPanMove=this.tempPanMove;break;case"setTempPanMove":this.tempPanMove=e.value.point;break;case"setReverseFlip":this.isReverseFlip=e.value.isReverseFlip;break;case"setDisablePan":this.disablePan=e.value.bool;break;case"setCurrDestinationPoint":this.currDestPoint=e.value.point,this.currDestPoint.startX-=this.parent.cropObj.totalPannedPoint.x,this.currDestPoint.startY-=this.parent.cropObj.totalPannedPoint.y;break;case"setReverseRotate":this.isReverseRotate=e.value.bool;break;case"getFlipColl":e.value.obj.flipColl=this.flipColl;break;case"setFlipColl":this.flipColl=e.value.flipColl;break;case"getPreviousZoomValue":e.value.obj.previousZoomValue=this.prevZoomValue;break;case"setPreviousZoomValue":this.prevZoomValue=e.value.previousZoomValue;break;case"getCropDimension":e.value.obj.cropDimension=this.cropDimension;break;case"setCropDimension":this.cropDimension.width=e.value.width,this.cropDimension.height=e.value.height;break;case"getPreventSelect":e.value.obj.bool=this.isPreventSelect;break;case"setPreventSelect":this.isPreventSelect=e.value.bool;break;case"resizeImage":this.resizeImage(e.value.width,e.value.height);break;case"resizeCrop":this.resizeCrop(e.value.width,e.value.height);break;case"setPreventDownScale":this.preventDownScale=e.value.bool;break;case"updateResize":this.updateResize();break;case"resize":this.resize(e.value.width,e.value.height,e.value.isAspectRatio);break;case"straightenImage":this.straightenImage(e.value.degree);break;case"reset":this.reset();break;case"cropZoom":e.value.obj.maxDimension=this.cropZoom(e.value.value,e.value.selectionObj);break;case"setResizedImgAngle":this.resizedImgAngle=e.value.angle}},e.prototype.getModuleName=function(){return"transform"},e.prototype.initTransformPvtVar=function(){this.parent.lowerCanvas&&(this.lowerContext=this.parent.lowerCanvas.getContext("2d")),this.parent.upperCanvas&&(this.upperContext=this.parent.upperCanvas.getContext("2d"))},e.prototype.reset=function(){this.zoomBtnHold=null,this.tempPanMove=null,this.panMove=null,this.disablePan=!1,this.currDestPoint=null,this.isReverseRotate=!1,this.flipColl=[],this.resizedImgAngle=null,this.transCurrObj=null,this.prevZoomValue=1,this.isPreventSelect=this.preventDownScale=!1},e.prototype.rotateImage=function(e){var t=this,i=this.parent,n={cancel:!1,previousDegree:i.transform.degree,currentDegree:360===Math.abs(i.transform.degree+e)?0:i.transform.degree+e};!this.isPreventSelect&&sf.base.isBlazor()&&i.events&&!0===i.events.rotating.hasDelegate?i.dotNetRef.invokeMethodAsync("RotateEventAsync","OnRotate",n,null).then((function(i){t.rotateEvent(i,e)})):(this.isPreventSelect||i.trigger("rotating",n),this.rotateEvent(n,e))},e.prototype.rotateEvent=function(e,t){var i=this.parent;if(e.cancel)i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:i.prevEventObjPoint}}),i.activeObj=i.prevEventSelectionPoint,i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}});else{var n=void 0;if(sf.base.isNullOrUndefined(this.transCurrObj)){var s={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}}),(n=s.currObj).objColl=sf.base.extend([],i.objColl,null,!0),n.pointColl=sf.base.extend({},i.pointColl,null,!0),n.afterCropActions=sf.base.extend([],i.afterCropActions,[],!0);var o={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),n.selPointColl=sf.base.extend([],o.selPointColl,[],!0)}i.afterCropActions.push(90===t?"rotateRight":"rotateLeft");var r=[],a=void 0;i.activeObj.activePoint&&i.activeObj.shape&&(void 0!==i.activeObj.shape&&(r=i.activeObj.shape.split("-")),(i.currObjType.isCustomCrop||"crop"===r[0])&&(a=i.currObjType.isCustomCrop?"custom":r[1],i.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),i.objColl.push(i.activeObj),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))),i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),this.drawRotatedImage(t),i.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),a&&(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.activeObj=sf.base.extend({},i.objColl[i.objColl.length-1],{},!0),i.objColl.pop(),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj}})),i.isUndoRedo=!1;var l={collection:i.rotateFlipColl};if(i.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:i.rotateFlipColl,isRotateFlipCollection:!0,obj:l}}),i.rotateFlipColl=l.collection,i.cropObj.activeObj.shape&&!this.isPreventSelect&&(i.notify("draw",{prop:"setIsCropSelect",value:{bool:!0}}),this.isPreventSelect=!0,i.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),this.isPreventSelect=!1,i.setProperties({zoomSettings:{zoomFactor:1}},!0),this.prevZoomValue=i.zoomSettings.zoomFactor),e={previousDegree:e.previousDegree,currentDegree:e.currentDegree},!this.isPreventSelect&&sf.base.isBlazor()&&i.events&&!0===i.events.rotated.hasDelegate){var h={degree:e.currentDegree};i.dotNetRef.invokeMethodAsync("RotateEventAsync","Rotated",null,h)}else this.isPreventSelect;sf.base.isBlazor()&&i.events&&!0===i.events.rotating.hasDelegate&&(i.notify("draw",{prop:"resetStraightenDestPoints"}),i.notify("draw",{prop:"setDestForStraighten"}))}},e.prototype.drawRotatedImage=function(e){var t=this.parent;0===e?t.transform.degree=0:t.transform.degree+=e,360===Math.abs(t.transform.degree)&&(t.transform.degree=0),t.notify("draw",{prop:"setDestPoints",onPropertyChange:!1});var i=sf.base.extend([],t.objColl,[],!0),n=sf.base.extend({},t.activeObj,{},!0);if(t.objColl=[],t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isReverseRotate||t.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),this.rotateDegree(e),this.isReverseRotate||(t.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),t.rotateFlipColl.push(e)),t.objColl=sf.base.extend([],i,[],!0),t.activeObj=sf.base.extend({},n,{},!0),t.isCircleCrop&&t.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),t.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:e}}),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e>0)t.notify("freehand-draw",{prop:"rotateFhdColl",onPropertyChange:!1});else for(var s=0;s<3;s++)t.notify("freehand-draw",{prop:"rotateFhdColl",onPropertyChange:!1});t.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.updateCurrSelectionPoint(e)},e.prototype.rotateDegree=function(e){var t=this.parent;this.lowerContext.save(),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.lowerContext.translate(t.lowerCanvas.width/2,t.lowerCanvas.height/2),this.lowerContext.rotate(Math.PI/180*e),this.lowerContext.translate(-t.lowerCanvas.width/2,-t.lowerCanvas.height/2);var i=this.lowerContext.filter;t.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=i,this.lowerContext.translate(t.lowerCanvas.width/2,t.lowerCanvas.height/2),this.lowerContext.rotate(Math.PI/180*-e),this.lowerContext.translate(-t.lowerCanvas.width/2,-t.lowerCanvas.height/2),this.lowerContext.restore()},e.prototype.updateCurrSelectionPoint=function(e){var t=this.parent;if(t.currSelectionPoint&&this.currDestPoint){var i=sf.base.extend({},t.activeObj,{},!0),n=sf.base.extend([],t.objColl,[],!0),s={startX:t.img.srcLeft,startY:t.img.srcTop,width:t.img.srcWidth,height:t.img.srcHeight},o={startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight};t.objColl=[],t.objColl.push(sf.base.extend({},t.currSelectionPoint,{},!0)),sf.base.isNullOrUndefined(t.objColl[0].imageRatio)&&(t.activeObj=t.objColl[0],t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.objColl[0]=t.activeObj),t.img={srcLeft:0,srcTop:0,srcWidth:t.baseImgCanvas.width,srcHeight:t.baseImgCanvas.height,destLeft:this.currDestPoint.startX,destTop:this.currDestPoint.startY,destWidth:this.currDestPoint.width,destHeight:this.currDestPoint.height},"number"==typeof e&&(t.notify("draw",{prop:"setDestPoints",onPropertyChange:!1}),t.notify("draw",{prop:"setClientTransDim",onPropertyChange:!1,value:{isPreventDimension:null}})),t.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:e}}),t.currSelectionPoint=sf.base.extend({},t.objColl[0],{},!0),this.currDestPoint={startX:t.img.destLeft,startY:t.img.destTop,width:t.img.destWidth,height:t.img.destHeight},t.objColl=n,t.activeObj=i,t.img={srcLeft:s.startX,srcTop:s.startY,srcWidth:s.width,srcHeight:s.height,destLeft:o.startX,destTop:o.startY,destWidth:o.width,destHeight:o.height}}},e.prototype.flipImage=function(e){var t=this,i=this.parent,n={direction:e,cancel:!1,previousDirection:i.toPascalCase(i.transform.currFlipState||e)};!this.isPreventSelect&&sf.base.isBlazor()&&i.events&&!0===i.events.flipping.hasDelegate?i.dotNetRef.invokeMethodAsync("FlipEventAsync","OnFlip",n,null).then((function(i){t.flipEvent(i,e)})):(this.isPreventSelect||i.trigger("flipping",n),this.flipEvent(n,e))},e.prototype.flipEvent=function(e,t){var i,n=this.parent;if(e.cancel)return n.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:n.prevEventObjPoint}}),n.activeObj=n.prevEventSelectionPoint,void n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n.activeObj}});if(sf.base.isNullOrUndefined(this.transCurrObj)){var s={currObj:{}};n.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}}),(i=s.currObj).objColl=sf.base.extend([],n.objColl,null,!0),i.pointColl=sf.base.extend({},n.pointColl,null,!0),i.afterCropActions=sf.base.extend([],n.afterCropActions,[],!0);var o={selPointColl:null};n.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),i.selPointColl=sf.base.extend([],o.selPointColl,[],!0)}n.afterCropActions.push("horizontal"===t.toLowerCase()?"horizontalflip":"verticalflip");var r,a=[];n.activeObj.activePoint&&(void 0!==n.activeObj.shape&&(a=n.activeObj.shape.split("-")),(n.currObjType.isCustomCrop||"crop"===a[0])&&(r=n.currObjType.isCustomCrop?"custom":a[1],n.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),n.objColl.push(n.activeObj),n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))),n.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}}),n.clearContext(this.lowerContext),n.clearContext(this.upperContext);var l=sf.base.extend([],n.objColl,[],!0),h=sf.base.extend({},n.activeObj,{},!0);n.objColl=[],n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.isReverseFlip||n.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var d=t.toLowerCase();this.updateFlipState(d);var c=n.transform.currFlipState.toLowerCase();n.transform.currFlipState="horizontal"===d&&"horizontal"===c||"vertical"===d&&"vertical"===c?"":d;var p={isSelected:null};n.notify("draw",{prop:"getRotatedFlipCropSelection",onPropertyChange:!1,value:{bool:p}}),p.isSelected&&(n.img.destLeft+=n.panPoint.totalPannedInternalPoint.x,n.img.destTop+=n.panPoint.totalPannedInternalPoint.y);var u=this.lowerContext.filter;if(n.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=u,n.notify("draw",{prop:"setImageEdited",onPropertyChange:!1}),this.updateFlipState(t.toLowerCase()),this.isReverseFlip||(n.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),this.updateFlipColl(t.toLocaleLowerCase()),n.rotateFlipColl.push(t.toLowerCase())),1===n.rotateFlipColl.length){var f={panRegion:""};n.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:f}}),""===f.panRegion?n.notify("draw",{prop:"setClientTransDim",onPropertyChange:!1,value:{isPreventDimension:null}}):this.setDestPointsForFlipState()}n.isCircleCrop&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),n.objColl=sf.base.extend([],l,[],!0),n.activeObj=sf.base.extend({},h,{},!0);for(var g=0,m=n.objColl.length;g<m;g++){var v=n.objColl[g].flipObjColl;0===v.length?v.push(t):v[v.length-1]===t?v.pop():v.push(t)}n.notify("shape",{prop:"redrawObj",onPropertyChange:!1,value:{degree:t.toLowerCase()}});var b=this.lowerContext.filter;this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",n.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1});var y=t.toLowerCase();"horizontal"===y||"vertical"===y?(n.notify("freehand-draw",{prop:"flipFHDColl",onPropertyChange:!1,value:{value:y}}),n.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}})):n.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),this.lowerContext.filter=b,n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.updateCurrSelectionPoint(y),n.isUndoRedo=!1,n.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),n.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),n.isCircleCrop&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),r&&(this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),n.activeObj=sf.base.extend({},n.objColl[n.objColl.length-1],{},!0),n.objColl.pop(),n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n.activeObj}}));var C={collection:n.rotateFlipColl};if(n.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:n.rotateFlipColl,isRotateFlipCollection:!0,obj:C}}),n.rotateFlipColl=C.collection,n.cropObj.activeObj.shape&&!this.isPreventSelect&&(n.notify("draw",{prop:"setIsCropSelect",value:{bool:!0}}),this.isPreventSelect=!0,n.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),this.isPreventSelect=!1,n.setProperties({zoomSettings:{zoomFactor:1}},!0),this.prevZoomValue=n.zoomSettings.zoomFactor),e={previousDirection:e.previousDirection,direction:e.direction},!this.isPreventSelect&&sf.base.isBlazor()&&n.events&&!0===n.events.flipped.hasDelegate){var w={direction:e.direction};n.dotNetRef.invokeMethodAsync("FlipEventAsync","Flipped",null,w)}},e.prototype.updateFlipState=function(e){var t=this.parent.transform.degree;"horizontal"===e?t%90==0&&t%180!=0?this.verticalFlip():this.horizontalFlip():"vertical"===e&&(t%90==0&&t%180!=0?this.horizontalFlip():this.verticalFlip())},e.prototype.horizontalFlip=function(){this.lowerContext.translate(this.lowerContext.canvas.width,0),this.lowerContext.scale(-1,1),this.upperContext.translate(this.upperContext.canvas.width,0),this.upperContext.scale(-1,1)},e.prototype.verticalFlip=function(){this.lowerContext.translate(0,this.lowerContext.canvas.height),this.lowerContext.scale(1,-1),this.upperContext.translate(0,this.upperContext.canvas.height),this.upperContext.scale(1,-1)},e.prototype.updateFlipColl=function(e){if(!this.isPreventSelect&&(0===this.flipColl.length||this.flipColl[this.flipColl.length-1]!==e?this.flipColl.push(e):this.flipColl.pop(),this.flipColl.length>=4)){var t=this.flipColl.slice(-4);("horizontal"===t[0]&&"vertical"===t[1]&&"horizontal"===t[2]&&"vertical"===t[3]||"vertical"===t[0]&&"horizontal"===t[1]&&"vertical"===t[2]&&"horizontal"===t[3])&&this.flipColl.splice(-4)}},e.prototype.setDestPointsForFlipState=function(){var e=this.parent,t={panRegion:""},i=e.img,n=i.destLeft,s=i.destTop,o=i.destWidth,r=i.destHeight,a=e.lowerCanvas,l=a.clientWidth,h=a.clientHeight;e.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:t}}),""!==t.panRegion&&("horizontal"===t.panRegion?e.img.destLeft=l-(o+n):("vertical"===t.panRegion||(e.img.destLeft=l-(o+n)),e.img.destTop=h-(r+s)))},e.prototype.zoomAction=function(e,t,i,n){var s=this,o=this.parent;if(!o.disabled&&o.isImageLoaded){if(sf.base.isNullOrUndefined(i)&&(o.zoomSettings.zoomFactor>=o.zoomSettings.maxZoomFactor&&e>0||o.zoomSettings.zoomFactor>o.zoomSettings.minZoomFactor&&e<0&&this.disableZoomOutBtn(!0)||o.zoomSettings.zoomFactor<=o.zoomSettings.minZoomFactor&&e<0))return void(sf.base.isBlazor()||o.notify("toolbar",{prop:"zoom-up-handler",onPropertyChange:!1}));o.notify("draw",{prop:"setImageEdited",onPropertyChange:!1});var r=e;e=r>0?.1:-.1;for(var a=0;a<Math.round(Math.abs(r/.1));a++)if(1===this.prevZoomValue)this.prevZoomValue+=e>0?10*e:10*e/10;else if(this.prevZoomValue>1)this.prevZoomValue+=10*e;else if(this.prevZoomValue<1){this.prevZoomValue+=10*e/10;var l=Math.pow(10,1);this.prevZoomValue=Math.round(this.prevZoomValue*l)/l}e=r,o.setProperties({zoomSettings:{zoomFactor:this.prevZoomValue}},!0);var h=void 0;this.tempActiveObj=null,this.isShape=!1,void 0!==o.activeObj.shape&&("shape"===o.activeObj.shape?o.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}):h=o.activeObj.shape.split("-")),void 0!==h&&"crop"===h[0]?(this.tempActiveObj=sf.base.extend({},o.activeObj,{},!0),o.isCropTab=!0):o.activeObj.shape&&"crop"!==h[0]&&(this.isShape=!0);var d={zoomType:null};o.notify("selection",{prop:"getZoomType",onPropertyChange:!1,value:{obj:d}}),sf.base.isNullOrUndefined(t)&&(t=o.isCropTab&&this.tempActiveObj?{x:o.activeObj.activePoint.startX+o.activeObj.activePoint.width/2,y:o.activeObj.activePoint.startY+o.activeObj.activePoint.height/2}:{x:o.lowerCanvas.clientWidth/2,y:o.lowerCanvas.clientHeight/2},"MouseWheel"!==d.zoomType&&"Pinch"!==d.zoomType||(t={x:o.zoomSettings.zoomPoint.x,y:o.zoomSettings.zoomPoint.y}));var c={zoomPoint:t,cancel:!1,previousZoomFactor:o.zoomSettings.zoomFactor-10*e,currentZoomFactor:o.zoomSettings.zoomFactor,zoomTrigger:d.zoomType};!o.isCropToolbar&&sf.base.isBlazor()&&o.isZoomBtnClick&&o.events&&!0===o.events.zooming.hasDelegate?(c.zoomTrigger=parseInt(this.getZoomTriggerType(c.zoomTrigger)),o.dotNetRef.invokeMethodAsync("ZoomEventAsync","OnZoom",c,null).then((function(t){s.zoomEvent(t,e,n)}))):(!o.isCropToolbar&&o.isZoomBtnClick&&o.trigger("zooming",c),this.zoomEvent(c,e,n))}},e.prototype.getZoomTriggerType=function(e){switch(e){case"MouseWheel":return"1";case"Pinch":return"2";case"Commands":return"4";default:return"8"}},e.prototype.zoomEvent=function(e,t,i){var n=this.parent,s=n.zoomSettings,o=s.zoomFactor,r=s.minZoomFactor;if(e.cancel)n.isZoomBtnClick=!1;else{sf.base.isBlazor()?"resize-toolbar"!==n.currentToolbar&&"crop-toolbar"!==n.currentToolbar&&n.element.querySelector(".e-contextual-toolbar-wrapper")&&!n.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hidden")&&n.updateToolbar(n.element,"closeContextualToolbar"):n.notify("toolbar",{prop:"close-contextual-toolbar",onPropertyChange:!1}),n.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:!0}}),n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,n.lowerCanvas.width,n.lowerCanvas.height);var a={canvasFilter:n.canvasFilter};this.lowerContext.filter=a.canvasFilter,n.upperCanvas.style.cursor=n.cursor="default";var l=sf.base.extend([],n.objColl,[],!0);if(!n.isCropTab){if(0!==n.transform.degree){n.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),n.panPoint.currentPannedPoint={x:0,y:0};var h=n.allowDownScale;n.allowDownScale=!1,this.rotatePan(!0,!0),n.allowDownScale=h}else""!==n.transform.currFlipState&&(n.panPoint.totalPannedPoint={x:0,y:0});0!==n.transform.straighten||this.isPreventSelect||n.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:i}})}if(0===n.transform.degree){this.drawZoomImgToCanvas(t,this.tempActiveObj);var d={panRegion:""};if(n.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:d}}),""!==d.panRegion){n.notify("crop",{prop:"setTempFlipPanPoint",onPropertyChange:!1,value:{point:n.panPoint.totalPannedPoint,isAdd:!0}}),l=sf.base.extend([],n.objColl,[],!0),n.objColl=[];var c=n.img.destLeft,p=n.img.destTop;this.setDestPointsForFlipState(),this.rotatedFlip(),n.img.destLeft=c,n.img.destTop=p,n.objColl=l,n.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:i}}),n.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:i}}),0!==n.transform.straighten||this.isPreventSelect||n.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:i}})}o<=r&&!n.isCropTab&&(n.panPoint.totalPannedPoint={x:0,y:0})}else{0!==n.transform.straighten||this.isPreventSelect||n.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1,value:{isPreventApply:i}}),n.panPoint.totalPannedClientPoint={x:0,y:0},n.panPoint.totalPannedInternalPoint={x:0,y:0},this.rotateZoom(t);var u={panRegion:""};if(n.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:u}}),""!==u.panRegion){h=this.lowerContext.filter;this.lowerContext.filter="none",n.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:i}}),n.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:i}}),this.lowerContext.filter=h}}var f=Math.pow(10,1);(o<=r||Math.round(n.transform.zoomFactor*f)/f==2)&&(clearInterval(this.zoomBtnHold),this.zoomBtnHold=0);var g,m={panRegion:""};if(n.notify("crop",{prop:"getCurrFlipState",onPropertyChange:!1,value:{panObj:m}}),""===m.panRegion){h=this.lowerContext.filter;this.lowerContext.filter="none",n.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:i}}),n.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:i}}),this.lowerContext.filter=h}(n.currSelectionPoint&&"crop-circle"===n.currSelectionPoint.shape||n.isCircleCrop)&&n.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),n.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.tempActiveObj&&(n.activeObj=sf.base.extend({},this.tempActiveObj,{},!0),n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n.activeObj}}),o<=r&&(n.currSelectionPoint=null)),n.isUndoRedo=!1,sf.base.isBlazor()?(g=n.element.querySelector("#zoomout"))&&o<=r?g.classList.add("e-overlay"):g&&g.classList.remove("e-overlay"):(g=document.querySelector("#"+n.element.id+"_zoomOut"))&&o<=r?(g.classList.add("e-disabled"),g.parentElement.classList.add("e-overlay")):g&&(g.classList.remove("e-disabled"),g.parentElement.classList.remove("e-overlay")),this.autoEnablePan(),this.tempActiveObj&&(n.activeObj=sf.base.extend({},this.tempActiveObj,{},!0)),"crop-custom"===n.activeObj.shape&&(n.currObjType.isCustomCrop=!0);var v=n.element.querySelector(".e-img-pan .e-btn");if(v&&n.togglePan?v.classList.add("e-selected-btn"):v&&v.classList.remove("e-selected-btn"),this.isShape&&(n.activeObj=sf.base.extend({},n.objColl[n.objColl.length-1],{},!0),n.objColl.pop(),n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}),sf.base.isBlazor()||(n.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1}),n.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}))),sf.base.isBlazor()?n.updateToolbar(n.element,"enableDisableToolbarBtn"):n.notify("toolbar",{prop:"enable-disable-btns",onPropertyChange:!1}),n.notify("selection",{prop:"setZoomType",onPropertyChange:!1,value:{zoomType:"Toolbar"}}),e={zoomPoint:e.zoomPoint,previousZoomFactor:e.previousZoomFactor,currentZoomFactor:e.currentZoomFactor,zoomTrigger:e.zoomTrigger},sf.base.isBlazor()&&!n.isCropToolbar&&n.isZoomBtnClick&&n.events&&!0===n.events.zoomed.hasDelegate){e.zoomTrigger="number"!=typeof e.zoomTrigger?parseInt(this.getZoomTriggerType(e.zoomTrigger)):e.zoomTrigger;var b={zoomPoint:e.zoomPoint,zoomFactor:e.currentZoomFactor,zoomTrigger:e.zoomTrigger};n.dotNetRef.invokeMethodAsync("ZoomEventAsync","Zoomed",null,b),n.isZoomBtnClick=!1}else!n.isCropToolbar&&n.isZoomBtnClick&&(n.isZoomBtnClick=!1)}},e.prototype.disableZoomOutBtn=function(e){var t,i=this.parent,n=i.zoomSettings,s=n.zoomFactor,o=n.minZoomFactor,r=!1;sf.base.isNullOrUndefined(e)||(i.transform.zoomFactor-=.1),t=sf.base.isBlazor()?i.element.querySelector("#zoomout"):i.element.querySelector("#"+i.element.id+"_zoomOut");var a={destLeft:i.img.destLeft,destTop:i.img.destTop,destWidth:i.img.destWidth,destHeight:i.img.destHeight};if(i.activeObj.shape){var l=this.setZoomDimension(-.1,i.activeObj);if(!sf.base.isNullOrUndefined(t)){var h=i.activeObj.activePoint;if(0===i.transform.straighten)i.img.destLeft>h.startX||i.img.destTop>h.startY||i.img.destLeft+i.img.destWidth<h.endX||i.img.destTop+i.img.destHeight<h.endY||s===o?(sf.base.isBlazor()?t.classList.add("e-overlay"):(t.classList.add("e-disabled"),t.parentElement.classList.add("e-overlay")),r=!0):(sf.base.isBlazor()?t.classList.remove("e-overlay"):(t.classList.remove("e-disabled"),t.parentElement.classList.remove("e-overlay")),r=!1);else{i.img.destWidth=l.width,i.img.destHeight=l.height;var d={isIntersect:null};i.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),i.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:d}}),d.isIntersect||s===o?(sf.base.isBlazor()?t.classList.add("e-overlay"):(t.classList.add("e-disabled"),t.parentElement.classList.add("e-overlay")),r=!0):(sf.base.isBlazor()?t.classList.remove("e-overlay"):(t.classList.remove("e-disabled"),t.parentElement.classList.remove("e-overlay")),r=!1)}}}else this.setZoomDimension(-.1,null);return sf.base.isNullOrUndefined(e)||(i.transform.zoomFactor+=.1),i.img.destLeft=a.destLeft,i.img.destTop=a.destTop,i.img.destWidth=a.destWidth,i.img.destHeight=a.destHeight,r},e.prototype.drawZoomImgToCanvas=function(e,t){var i=this.parent,n=Math.pow(10,1),s=Math.round(i.transform.zoomFactor*n)/n;.1===s&&-.1===e||0===s&&-.025===e?i.transform.zoomFactor=0:i.transform.zoomFactor+=e,i.transform[i.isCropTab?"cropZoomFactor":"defaultZoomFactor"]=i.transform.zoomFactor;var o={width:0,height:0};i.isCropTab?o=this.cropZoom(e,t):((o=this.calcMaxDimension(i.img.srcWidth,i.img.srcHeight)).width+=o.width*i.transform.zoomFactor,o.height+=o.height*i.transform.zoomFactor,i.img.destLeft=(i.lowerCanvas.clientWidth-o.width)/2,i.img.destTop=(i.lowerCanvas.clientHeight-o.height+1)/2),i.notify("draw",{prop:"draw-image-to-canvas",value:{dimension:o}}),o.width=this.cropDimension.width,o.height=this.cropDimension.height,o.width+=o.width*i.transform.zoomFactor,o.height+=o.height*i.transform.zoomFactor,i.notify("draw",{prop:"setZoomCropWidth",value:{width:o.width,height:o.height}})},e.prototype.rotatedFlip=function(){var e=this.parent;this.isReverseFlip=!0;var t=e.transform.currFlipState,i=this.flipColl,n=sf.base.extend([],e.objColl,[],!0),s=sf.base.extend({},e.activeObj,{},!0);this.flipColl=[],e.objColl=[],e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),e.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,context:null,isPreventCircleCrop:null}});var o=this.lowerContext.filter;e.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=o,e.notify("draw",{prop:"currTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:!0,context:null,isPreventCircleCrop:null}}),""===t&&""!==e.transform.currFlipState&&(t=e.transform.currFlipState),e.transform.currFlipState=t,this.flipColl=i,e.objColl=sf.base.extend([],n,[],!0),this.lowerContext.filter="none",e.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),this.lowerContext.filter=o,0!==s.activePoint.width&&(e.activeObj=sf.base.extend({},s,{},!0)),this.isReverseFlip=!1},e.prototype.rotateZoom=function(e){var t=this.parent,i=Math.pow(10,1),n=Math.round(t.transform.zoomFactor*i)/i;.1===n&&-.1===e||0===n&&-.025===e?t.transform.zoomFactor=0:t.transform.zoomFactor+=e,t.isCropTab?t.transform.cropZoomFactor=t.transform.zoomFactor:t.transform.defaultZoomFactor=t.transform.zoomFactor;var s=sf.base.extend([],t.objColl,[],!0),o=sf.base.extend({},t.activeObj,{},!0);t.objColl=[],t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),t.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!0}}),t.notify("draw",{prop:"setDestPoints",onPropertyChange:!1});var r=this.lowerContext.filter;t.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=r,t.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),t.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),t.objColl=s,t.activeObj=o;var a={width:this.cropDimension.width,height:this.cropDimension.height};a.width+=a.width*t.transform.zoomFactor,a.height+=a.height*t.transform.zoomFactor,t.notify("draw",{prop:"setZoomCropWidth",value:{width:a.width,height:a.height}})},e.prototype.autoEnablePan=function(){var e=this.parent;e.transform.zoomFactor<=0?(e.togglePan=!1,e.notify("selection",{prop:"setDragCanvas",value:{bool:!1}}),e.pan(!1),this.disablePan=!1):e.pan(!this.disablePan)},e.prototype.cropZoom=function(e,t){var i=this.parent,n=i.img.destLeft,s=i.img.destTop,o={width:0,height:0};return 0===i.img.srcLeft||0===i.img.srcTop?o=sf.base.isNullOrUndefined(t)?this.setZoomDimension(e,null):this.setZoomDimension(e,t):((o=i.transform.degree%90==0&&i.transform.degree%180!=0?this.calcMaxDimension(i.img.srcHeight,i.img.srcWidth):this.calcMaxDimension(i.img.srcWidth,i.img.srcHeight)).width+=o.width*i.transform.zoomFactor,o.height+=o.height*i.transform.zoomFactor),i.img.destLeft=n-(o.width-i.img.destWidth)/2,i.img.destTop=s-(o.height-i.img.destHeight)/2,n=i.img.destLeft,s=i.img.destTop,t&&0===i.transform.straighten&&(i.img.destLeft>t.activePoint.startX&&(i.img.destLeft=t.activePoint.startX,0===i.transform.degree&&(i.panPoint.totalPannedPoint.x-=n-i.img.destLeft)),i.img.destTop>t.activePoint.startY&&(i.img.destTop=t.activePoint.startY,0===i.transform.degree&&(i.panPoint.totalPannedPoint.y-=s-i.img.destTop)),i.img.destLeft+o.width<t.activePoint.endX&&(i.img.destLeft=t.activePoint.endX-o.width,0===i.transform.degree&&(i.panPoint.totalPannedPoint.x-=n-i.img.destLeft)),i.img.destTop+o.height<t.activePoint.endY&&(i.img.destTop=t.activePoint.endY-o.height,0===i.transform.degree&&(i.panPoint.totalPannedPoint.y-=s-i.img.destTop))),o},e.prototype.setZoomDimension=function(e,t){var i=this.parent,n=i.transform.degree,s={width:0,height:0};if((s=n%90==0&&n%180!=0?this.calcMaxDimension(i.img.srcHeight,i.img.srcWidth):this.calcMaxDimension(i.img.srcWidth,i.img.srcHeight)).width+=s.width*i.transform.zoomFactor,s.height+=s.height*i.transform.zoomFactor,i.img.destLeft+=(i.img.destWidth-s.width)/2,i.img.destTop+=(i.img.destHeight-s.height)/2,e<0&&t){var o=t.activePoint.startX,r=t.activePoint.startY,a=t.activePoint.width,l=t.activePoint.height,h=i.img.destLeft+s.width,d=i.img.destTop+s.height;i.img.destLeft>o&&(i.img.destLeft=o),i.img.destTop>r&&(i.img.destTop=r),h<o+a&&(i.img.destLeft=o+a-s.width),d<r+l&&(i.img.destTop=r+l-s.height)}else e<0&&sf.base.isNullOrUndefined(t)&&(i.img.destLeft>0&&(i.img.destLeft=0),i.img.destTop>0&&(i.img.destTop=0),i.img.destLeft+s.width<i.lowerCanvas.width&&(i.img.destLeft=i.lowerCanvas.width-i.img.destWidth),i.img.destTop+s.height<i.lowerCanvas.height&&(i.img.destTop=i.lowerCanvas.height-i.img.destHeight));return s},e.prototype.drawPannedImage=function(e,t){var i=this,n=this.parent,s={panDown:null};n.notify("selection",{prop:"getPanDown",onPropertyChange:!1,value:{obj:s}});var o={startPoint:s.panDown,endPoint:this.panMove,cancel:!1};sf.base.isBlazor()&&sf.base.isNullOrUndefined(n.eventType)&&n.events&&!0===n.events.onPanStart.hasDelegate?(n.eventType="pan",n.panEventArgs=o,n.dotNetRef.invokeMethodAsync("PanEventAsync","OnPanStart",o).then((function(n){i.panEvent(n,e,t)}))):(n.trigger("panning",o),this.panEvent(o,e,t))},e.prototype.panEvent=function(e,t,i){if(!e.cancel){var n=this.parent,s=!1;if(n.activeObj.shape&&"shape"===n.activeObj.shape&&n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),sf.base.isNullOrUndefined(n.activeObj.shape)){s=!0;var o=n.activeObj.activePoint={startX:n.img.destLeft,startY:n.img.destTop,endX:n.img.destLeft+n.img.destWidth,endY:n.img.destTop+n.img.destHeight},r=o.startX,a=o.startY,l=o.endX,h=o.endY;r<0&&(o.startX=0),a<0&&(o.startY=0),l>n.lowerCanvas.width&&(o.endX=n.lowerCanvas.width),h>n.lowerCanvas.height&&(o.endY=n.lowerCanvas.height),o.width=o.endX-o.startX,o.height=o.endY-o.startY,n.activeObj.shape="crop-custom";var d={strokeSettings:{}};n.notify("shape",{prop:"getStrokeSettings",onPropertyChange:!1,value:{obj:d}}),n.activeObj.strokeSettings=d.strokeSettings,n.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:o,obj:n.activeObj,isMouseMove:null,x:null,y:null}}),n.isCropTab=!0}if(0===n.transform.degree){var c=void 0;c=sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(i)?this.updatePanPoints():{x:t,y:i},n.panPoint.totalPannedPoint.x+=c.x,n.panPoint.totalPannedPoint.y+=c.y;var p=sf.base.extend({},n.activeObj,{},!0),u=this.lowerContext.filter;this.drawPannImage(c,s),this.lowerContext.filter=u,this.tempPanMove=sf.base.extend({},this.panMove,{},!0),n.activeObj=sf.base.extend({},p,{},!0),this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),n.activeObj.shape&&n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n.activeObj}})}else{var f=n.transform.currFlipState;n.isCropTab=!0,sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(i)?n.panPoint.currentPannedPoint=this.updatePanPoints():n.panPoint.currentPannedPoint={x:t,y:i},n.transform.currFlipState=f,this.rotatePan(null,null,s),n.isCropTab=!1,this.tempPanMove=sf.base.extend({},this.panMove,{},!0)}s&&(n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),n.isCropTab=!1,this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height))}},e.prototype.drawPannImage=function(e,t){var i=this.parent,n=this.lowerContext.filter,s={startX:i.img.destLeft,startY:i.img.destTop,width:i.img.destWidth,height:i.img.destHeight};this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}}),i.img.destLeft=s.startX,i.img.destTop=s.startY,i.img.destWidth=s.width,i.img.destHeight=s.height,this.setDestPointsForFlipState(),t&&(i.isCropTab=!1),i.notify("draw",{prop:"drawImage",onPropertyChange:!1}),t&&(i.isCropTab=!0),(i.currSelectionPoint&&"crop-circle"===i.currSelectionPoint.shape||i.isCircleCrop)&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:!0}}),this.lowerContext.filter=n,i.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}}),i.img.destLeft=s.startX,i.img.destTop=s.startY,i.img.destWidth=s.width,i.img.destHeight=s.height;var o=this.lowerContext.filter;this.lowerContext.filter="none",t&&(i.isCropTab=!1),i.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:e.x,yDiff:e.y,panRegion:""}}),i.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:e.x,yDiff:e.y,panRegion:""}}),t&&(i.isCropTab=!0),this.lowerContext.filter=o,i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.isCircleCrop&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:!0}})},e.prototype.resetZoom=function(){var e=this.parent;if(0!==e.transform.defaultZoomFactor){var t=e.isUndoRedo,i={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:i}}),this.transCurrObj=i.currObj,this.transCurrObj.objColl=sf.base.extend([],e.objColl,null,!0),this.transCurrObj.pointColl=sf.base.extend({},e.pointColl,null,!0),this.transCurrObj.afterCropActions=sf.base.extend([],e.afterCropActions,[],!0);var n={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:n}}),this.transCurrObj.selPointColl=sf.base.extend([],n.selPointColl,[],!0),e.isUndoRedo=e.isCropToolbar=!0;var s=e.transform.defaultZoomFactor;s>0?this.zoomAction(-s):this.zoomAction(Math.abs(s)),e.isCropToolbar=!1,e.isUndoRedo=t}},e.prototype.performTransformation=function(e){var t=this.parent,i=t.transform.defaultZoomFactor,n=t.isUndoRedo,s=sf.base.extend({},t.cropObj,{},!0);this.resetZoom(),this.updateTransform(e);for(var o=0,r=t.objColl.length;o<r;o++)if(t.objColl[o].flipObjColl.length>0){var a={collection:t.objColl[o].flipObjColl};t.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:a.collection,isRotateFlipCollection:null,obj:a}}),t.objColl[o].flipObjColl=a.collection,0===t.objColl[o].flipObjColl.length&&(t.objColl[o].shapeFlip="")}if(0!==i){t.isUndoRedo=!0,this.zoomAction(i),t.isUndoRedo=n;var l="";"rotateleft"===e||"rotateright"===e?l="rotate":"horizontalflip"!==e&&"verticalflip"!==e||(l="flip"),t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:l,previousObj:this.transCurrObj,previousObjColl:this.transCurrObj.objColl,previousPointColl:this.transCurrObj.pointColl,previousSelPointColl:this.transCurrObj.selPointColl,previousCropObj:s,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.transCurrObj=null}},e.prototype.updateTransform=function(e){switch(e.toLowerCase()){case"rotateleft":this.rotateImage(-90);break;case"rotateright":this.rotateImage(90);break;case"horizontalflip":this.flipImage(t.Horizontal);break;case"verticalflip":this.flipImage(t.Vertical)}},e.prototype.rotatePan=function(e,t,i){var n=this.parent;this.isReverseRotate=!0;var s,o=n.transform.degree,r={selPointColl:null};n.activeObj.activePoint&&n.activeObj.shape&&(s=sf.base.extend({},n.activeObj,{},!0));var a=sf.base.extend([],n.objColl,[],!0),l=sf.base.extend([],n.pointColl,[],!0);n.objColl=[],n.pointColl=[],n.freehandCounter=0,n.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}});var h=r.selPointColl;n.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),n.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),n.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!0}}),n.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var d=n.img.destLeft,c=n.img.destTop,p=n.panPoint.totalPannedInternalPoint;n.isCropTab&&(n.img.destLeft+=p.x,n.img.destTop+=p.y),n.notify("crop",{prop:"updateRotatePan",onPropertyChange:!1}),n.isCropTab&&(n.panPoint.totalPannedInternalPoint.x=n.img.destLeft-d,n.panPoint.totalPannedInternalPoint.y=n.img.destTop-c);var u=this.lowerContext.filter;i&&(n.isCropTab=!1),n.notify("draw",{prop:"drawImage",onPropertyChange:!1}),i&&(n.isCropTab=!0),n.notify("draw",{prop:"setRotateZoom",onPropertyChange:!1,value:{isRotateZoom:!1}}),n.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:!0,isRotatePan:!0}});var f=n.img.destLeft,g=n.img.destTop;n.img.destLeft+=n.panPoint.totalPannedClientPoint.x,n.img.destTop+=n.panPoint.totalPannedClientPoint.y,n.img.destLeft+=n.panPoint.currentPannedPoint.x,n.img.destTop+=n.panPoint.currentPannedPoint.y,n.panPoint.totalPannedClientPoint.x=n.img.destLeft-f,n.panPoint.totalPannedClientPoint.y=n.img.destTop-g,n.objColl=a,n.pointColl=l,n.freehandCounter=n.pointColl.length,n.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:h}}}),n.transform.degree=o,this.lowerContext.filter="none",e&&(t?(n.panPoint.totalPannedClientPoint.x=-n.panPoint.totalPannedClientPoint.x,n.panPoint.totalPannedClientPoint.y=-n.panPoint.totalPannedClientPoint.y,n.panPoint.currentPannedPoint=sf.base.extend({},n.panPoint.totalPannedClientPoint,{},!0),n.panPoint.totalPannedClientPoint={x:0,y:0},n.img.destLeft+=n.panPoint.currentPannedPoint.x,n.img.destTop+=n.panPoint.currentPannedPoint.y):n.panPoint.currentPannedPoint=sf.base.extend({},n.panPoint.totalPannedClientPoint,{},!0)),i&&(n.isCropTab=!1),n.notify("shape",{prop:"panObjColl",onPropertyChange:!1,value:{xDiff:n.panPoint.currentPannedPoint.x,yDiff:n.panPoint.currentPannedPoint.y,panRegion:""}}),n.notify("freehand-draw",{prop:"panFHDColl",onPropertyChange:!1,value:{xDiff:n.panPoint.currentPannedPoint.x,yDiff:n.panPoint.currentPannedPoint.y,panRegion:""}}),i&&(n.isCropTab=!0),this.lowerContext.filter=u,n.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),this.upperContext.clearRect(0,0,n.upperCanvas.width,n.upperCanvas.height),n.activeObj=sf.base.extend({},s,{},!0),n.activeObj.activePoint&&n.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n.activeObj,isCropRatio:null,points:null,isPreventDrag:!0,saveContext:null,isPreventSelection:null}}),this.isReverseRotate=!1},e.prototype.limitPan=function(){var e=this.parent,t=e.activeObj.activePoint,i=t.startX,n=t.startY,s=t.endX,o=t.endY,r=e.img;e.activeObj.activePoint&&(r.destLeft>i&&(e.img.destLeft=i),r.destTop>n&&(e.img.destTop=n),r.destLeft+r.destWidth<s&&(e.img.destLeft=s-r.destWidth),r.destTop+r.destHeight<o&&(e.img.destTop=o-r.destHeight))},e.prototype.updateFlipActiveObj=function(e){var t,i,n=this.parent,s=n.activeObj.activePoint,o=n.lowerCanvas,r=o.width,a=o.height;"horizontal"===e?(t=s.startX>r/2?r/2-(s.startX-r/2):r/2+(r/2-s.startX),s.startX=t-s.width,s.endX=t):"vertical"===e?(i=s.startX>r/2?a/2-(s.startY-a/2):a/2+(a/2-s.startY),s.startY=i-s.height,s.endY=i):"verticalHorizontal"!==e&&"horizontalVertical"!==e||(t=s.startX>r/2?r/2-(s.startX-r/2):r/2+(r/2-s.startX),i=s.startX>r/2?a/2-(s.startY-a/2):a/2+(a/2-s.startY),s.startX=t-s.width,s.startY=i-s.height,s.endX=t,s.endY=i),n.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:s,obj:n.activeObj,isMouseMove:null,x:null,y:null}})},e.prototype.pan=function(e){var t=this.parent;!t.disabled&&t.isImageLoaded&&(e?(t.togglePan=!0,t.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),t.notify("selection",{prop:"setDragCanvas",value:{bool:!0}}),t.lowerCanvas.style.cursor=t.upperCanvas.style.cursor=t.cursor="grab",t.notify("selection",{prop:"setPanDown",onPropertyChange:!1,value:{panDown:null}})):(t.togglePan=t.currObjType.isCustomCrop=!1,t.notify("selection",{prop:"setDragCanvas",value:{bool:!1}}),t.lowerCanvas.style.cursor=t.upperCanvas.style.cursor=t.cursor="default"))},e.prototype.zoom=function(e,t){var i=this.parent;if(!i.disabled&&i.isImageLoaded){var n=this.getCurrentZoomFactor(e);if(sf.base.isNullOrUndefined(t))this.zoomAction(n,t);else for(var s=n>0?"zoomIn":"zoomOut",o=10*Math.abs(n),r=0;r<o;r++)i.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:t.x,y:t.y,type:s,isResize:null}})}},e.prototype.getCurrentZoomFactor=function(e){return e>=1?this.prevZoomValue<1?e-this.prevZoomValue:.1*(e-this.prevZoomValue):e-this.prevZoomValue},e.prototype.setCurrPanRegion=function(e,t,i){var n=e;n=""===e?"horizontal"===t?"horizontal":"vertical"===t?"vertical":e:"horizontal"===e?"horizontal"===t?"horizontalVertical":"vertical"===t?"verticalHorizontal":90===t?"vertical":-90===t?"horizontal":e:"vertical"===e?"horizontal"===t?"horizontalVertical":"vertical"===t?"verticalHorizontal":90===t?"horizontal":-90===t?"vertical":e:"horizontal"===t?"vertical":"vertical"===t?"horizontal":e,i.panRegion=n},e.prototype.rotate=function(e,t){var i=this.parent;!i.disabled&&i.isImageLoaded&&e%90==0&&this.rotateImage(e),t.isRotate=!1},e.prototype.flip=function(e){var t=this.parent;!t.disabled&&t.isImageLoaded&&this.flipImage(e)},e.prototype.update=function(){var e=this.parent,t=0,i=!1,n=!1,s={bool:!1},o=e.isStraightening,r=0,a=e.element.querySelector("#"+e.element.id+"_contextualToolbar"),l=e.element.querySelector(".e-contextual-toolbar-wrapper"),h=e.element.querySelector("#"+e.element.id+"_headWrapper");if(e.isImageLoaded){var d=!1,c=void 0;sf.base.Browser.isDevice&&(e.activeObj.shape&&(c=e.activeObj.shape.split("-")),(e.currObjType.isCustomCrop||c&&"crop"===c[0])&&(d=!0));var p={bool:null};e.notify("toolbar",{prop:"getFrameToolbar",onPropertyChange:!1,value:{obj:p}}),(p.bool||sf.base.isBlazor()&&"frame-toolbar"===e.currentToolbar)&&(i=!0),!o&&(a&&!a.parentElement.classList.contains("e-hide")||h&&!h.parentElement.classList.contains("e-hide"))&&(l.classList.add("e-hide"),d||e.okBtn(),sf.base.isBlazor()?e.updateToolbar(e.element,"imageLoaded"):(e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}))),e.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:s}}),s.bool&&(sf.base.isBlazor()?e.updateToolbar(e.element,"destroyQuickAccessToolbar"):e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1})),void 0!==e.activeObj.shape&&(n=!0,"block"===e.textArea.style.display||"inline-block"===e.textArea.style.display?(e.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),sf.base.isBlazor()?e.updateToolbar(e.element,"destroyQuickAccessToolbar"):e.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1})):(e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.objColl.push(e.activeObj)),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}))}var u=this.lowerContext.filter,f=e.element.querySelector("#"+e.element.id+"_canvasWrapper");if(f&&(f.style.width=e.element.offsetWidth-2+"px"),e.lowerCanvas.width=e.upperCanvas.width=e.element.offsetWidth-2,e.toolbarTemplate?t=e.element.querySelector("#"+e.element.id+"_toolbarArea").clientHeight:e.element.querySelector("#"+e.element.id+"_toolbar")&&(t=e.element.querySelector("#"+e.element.id+"_toolbar").clientHeight),sf.base.Browser.isDevice&&o&&(r=e.element.querySelector("#"+e.element.id+"_contextualToolbarArea").clientHeight),e.notify("toolbar",{prop:"setToolbarHeight",value:{height:t}}),sf.base.Browser.isDevice?f&&(f.style.height=e.element.offsetHeight-(2*t+r)-4+"px"):f&&(f.style.height=e.element.offsetHeight-t-2+"px"),e.lowerCanvas.height=e.upperCanvas.height=parseFloat(f.style.height),this.lowerContext.filter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",e.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),e.canvasFilter=this.lowerContext.filter,e.initialAdjustmentValue=this.lowerContext.filter,e.clearContext(this.lowerContext),e.clearContext(this.upperContext),e.isImageLoaded){if(e.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.lowerContext.filter=u,e.initialAdjustmentValue=u,e.canvasFilter=this.lowerContext.filter,e.isImageLoaded&&(sf.popups.showSpinner(e.element),e.element.style.opacity="0.5"),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),f){f.style.width=e.element.offsetWidth-2+"px",f.style.height=e.element.offsetHeight+"px";var g={toolbarHeight:sf.base.isBlazor()?e.toolbarHeight:0};sf.base.isBlazor()||e.notify("toolbar",{prop:"getToolbarHeight",value:{obj:g}}),sf.base.Browser.isDevice?f.style.height=parseFloat(f.style.height)-2*g.toolbarHeight-r-4+"px":f.style.height=parseFloat(f.style.height)-g.toolbarHeight-2+"px"}e.lowerCanvas.width=e.upperCanvas.width=parseFloat(f.style.width),e.lowerCanvas.height=e.upperCanvas.height=parseFloat(f.style.height),this.lowerContext.filter=u;var m={width:0,height:0};this.calcMaxDimension(e.img.srcWidth,e.img.srcHeight,m);var v=m;if(o&&0!==e.transform.cropZoomFactor?(v.width+=v.width*e.transform.cropZoomFactor,v.height+=v.height*e.transform.cropZoomFactor):e.transform.defaultZoomFactor>0&&(v.width+=v.width*e.transform.defaultZoomFactor,v.height+=v.height*e.transform.defaultZoomFactor),e.img.destLeft=(e.lowerCanvas.clientWidth-v.width)/2,e.img.destTop=(e.lowerCanvas.clientHeight-v.height+1)/2,0===e.transform.degree&&""===e.transform.currFlipState)e.transform.defaultZoomFactor>0&&(e.img.destLeft+=e.panPoint.totalPannedPoint.x,e.img.destTop+=e.panPoint.totalPannedPoint.y),e.notify("draw",{prop:"draw-image-to-canvas",value:{dimension:v}});else{e.notify("draw",{prop:"draw-image-to-canvas",value:{dimension:v}}),e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"initial",isPreventDestination:null,isRotatePan:null}});var b=this.lowerContext.filter;e.notify("draw",{prop:"drawImage",onPropertyChange:!1}),this.lowerContext.filter=b,e.notify("draw",{prop:"updateCurrTransState",onPropertyChange:!1,value:{type:"reverse",isPreventDestination:null,isRotatePan:null}})}e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),e.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}}),e.isCircleCrop&&e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),sf.popups.hideSpinner(e.element),e.element.style.opacity="1";var y={defToolbarItems:null};if(!sf.base.isBlazor())if(e.notify("toolbar",{prop:"getDefToolbarItems",value:{obj:y}}),y.defToolbarItems&&y.defToolbarItems.length>0&&document.getElementById(e.element.id+"_toolbar"))sf.base.getComponent(e.element.id+"_toolbar","toolbar").refreshOverflow(),l&&!o&&l.classList.add("e-hide");if(e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),n){var C=sf.base.extend({},e.objColl[e.objColl.length-1],null,!0);e.objColl.pop(),0!==C.activePoint.width&&0!==C.activePoint.height&&(this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),e.objColl.push(C),e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:!0}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),C=sf.base.extend({},e.objColl[e.objColl.length-1],null,!0),e.objColl.pop(),this.lowerContext.clearRect(0,0,e.lowerCanvas.width,e.lowerCanvas.height),e.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:C}}),o&&e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:C}}),"rectangle"!==e.activeObj.shape&&"ellipse"!==e.activeObj.shape&&"text"!==e.activeObj.shape&&"line"!==e.activeObj.shape&&"arrow"!==e.activeObj.shape&&"path"!==e.activeObj.shape&&"image"!==e.activeObj.shape||(sf.base.isBlazor()?e.updateToolbar(e.element,"quickAccessToolbar",e.activeObj.shape):e.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}})))}if(s.bool&&(sf.base.isBlazor()?e.updateToolbar(e.element,"quickAccessToolbar","pen"):e.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}})),i?sf.base.isBlazor()?e.updateToolbar(e.element,"frame"):e.notify("toolbar",{prop:"callFrameToolbar",onPropertyChange:!1}):e.isResize&&(e.aspectWidth=Math.ceil(e.img.destWidth),e.aspectHeight=Math.ceil(e.img.destHeight),sf.base.isBlazor()?e.updateToolbar(e.element,"resize"):(e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}}),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}}))),(0!==e.transform.degree||""!==e.transform.currFlipState)&&e.transform.defaultZoomFactor>0){var w=sf.base.extend({},e.panPoint.totalPannedPoint,null,!0),M=sf.base.extend({},e.panPoint.totalPannedInternalPoint,null,!0),S=sf.base.extend({},e.panPoint.totalPannedClientPoint,null,!0);this.zoomAction(.1),this.zoomAction(-.1),0===e.transform.degree?(e.img.destLeft+=w.x,e.img.destTop+=w.y,e.panPoint.totalPannedPoint=w,e.notify("draw",{prop:"updateFlipPan",value:{tempSelectionObj:null}})):(e.panPoint.totalPannedInternalPoint=M,e.panPoint.totalPannedClientPoint=S,e.panPoint.currentPannedPoint={x:0,y:0},e.isCropTab=!0,this.rotatePan(),e.isCropTab=!1)}else 0!==e.transform.degree&&e.transform.cropZoomFactor>0&&(e.transform.zoomFactor=0,e.transform.cropZoomFactor=null,sf.base.isBlazor()?e.updateToolbar(e.element,"enableDisableToolbarBtn"):e.notify("toolbar",{prop:"enable-disable-btns",onPropertyChange:!1}))}},e.prototype.calcMaxDimension=function(e,t,i,n){var s={toolbarHeight:0},o=this.parent;sf.base.isBlazor()?s.toolbarHeight=o.toolbarHeight:o.notify("toolbar",{prop:"getToolbarHeight",value:{obj:s}});var r=n?o.element.clientWidth/3:o.element.clientWidth,a=n?(o.element.clientHeight-s.toolbarHeight)/3:o.element.clientHeight-s.toolbarHeight;if(a=sf.base.Browser.isDevice?a-s.toolbarHeight:a,sf.base.Browser.isDevice&&o.isStraightening){var l=o.element.querySelector("#"+o.element.id+"_contextualToolbarArea");a-=l?l.clientHeight:0}sf.base.isNullOrUndefined(n)&&(r>30&&(r-=30),a>30&&(a-=30));var h=r/e,d=a/t,c=Math.min(e,r),p=Math.min(t,a);if(h<1&&h<d?(c=e*h,p=t*h):d<1&&d<h&&(c=e*d,p=t*d),sf.base.isNullOrUndefined(n)){var u={bool:null};o.notify("crop",{prop:"getPreventScaling",onPropertyChange:!1,value:{obj:u}}),u.bool&&o.cropObj.activeObj.activePoint&&0!==o.cropObj.activeObj.activePoint.width&&0!==o.cropObj.activeObj.activePoint.height&&(c=o.cropObj.activeObj.activePoint.width,p=o.cropObj.activeObj.activePoint.height)}return i&&(i.width=c,i.height=p),{width:c,height:p}},e.prototype.updatePanPoints=function(){var e=this.parent,t=sf.base.extend({},e.activeObj,{},!0),i=e.img.destLeft,n=e.img.destTop;sf.base.isNullOrUndefined(this.tempPanMove)&&(this.tempPanMove={x:this.panMove.x,y:this.panMove.y});var s=this.panMove.x-this.tempPanMove.x,o=this.panMove.y-this.tempPanMove.y;e.img.destLeft+=s,e.img.destTop+=o,this.limitPan();var r={bool:null},a={isIntersect:null};e.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),e.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:a}}),e.notify("draw",{prop:"isSelOutsideImg",onPropertyChange:!1,value:{obj:r}});for(var l=0;0!==e.transform.straighten&&(a.isIntersect||r.bool)&&(l++,e.img.destLeft=i,e.img.destTop=n,0!==s&&s>0?s-=1:0!==s&&s<0&&(s+=1),0!==o&&o>0?o-=1:0!==o&&o<0&&(o+=1),(0!==s||0!==o)&&200!==l);)e.img.destLeft+=s,e.img.destTop+=o,this.limitPan(),e.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),e.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:a}}),e.notify("draw",{prop:"isSelOutsideImg",onPropertyChange:!1,value:{obj:r}});return e.activeObj=t,{x:e.img.destLeft-i,y:e.img.destTop-n}},e.prototype.resizeImage=function(e,t){var i=this.parent,n=!0,s=!0;i.allowDownScale=!1,i.img.srcLeft=0,i.img.srcTop=0,i.isAspectRatio=!0;var o=[];for(i.img.srcWidth=i.baseImgCanvas.width,i.img.srcHeight=i.baseImgCanvas.height,i.resizeSrc&&0!==i.resizeSrc.width&&0!==i.resizeSrc.height&&(i.img.srcLeft=i.resizeSrc.startX,i.img.srcTop=i.resizeSrc.startY,i.img.srcWidth=i.resizeSrc.width,i.img.srcHeight=i.resizeSrc.height);(e<i.img.destWidth||t<i.img.destHeight)&&s;)if(this.zoomAction(-.1,null,!0,!0),e>i.img.destWidth||t>i.img.destHeight)for(;e>i.img.destWidth||t>i.img.destHeight;)this.zoomAction(.0125,null,!0,!0),s=!1,o.push(i.img.destWidth);for(;(e>i.img.destWidth||t>i.img.destHeight)&&s&&n;)if(this.zoomAction(.1,null,!0,!0),e<i.img.destWidth||t<i.img.destHeight)for(;e<i.img.destWidth;)this.zoomAction(-.0125,null,!0,!0),n=!1,o.push(i.img.destWidth);for(var r=o[0],a=Math.abs(i.img.destWidth-r),l=0,h=o;l<h.length;l++){var d=h[l],c=Math.abs(e-d);c<a&&(r=d,a=c)}r<e&&n&&(this.zoomAction(-.0125,null,!0,!0),n=!1),r>e&&!n&&(this.zoomAction(.0125,null,!0,!0),n=!1),this.zoomAction(.0125,null,!0),i.allowDownScale=!0,this.zoomAction(-.0125,null,!0);var p=sf.base.extend({},i.cropObj,{},!0),u=sf.base.extend({},this.prevResizeCurrObj,{},!0);i.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"resize",previousObj:u,previousObjColl:u.objColl,previousPointColl:u.pointColl,previousSelPointColl:u.selPointColl,previousCropObj:p,previousText:null,currentText:null,previousFilter:null,isCircleCrop:i.isCircleCrop}}),i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})},e.prototype.resizeCrop=function(e,t){var i=this.parent,n=!0,s={prevObj:i.prevObj};i.cropObj=sf.base.extend({},i.prevCropObj,{},!0),i.allowDownScale=!1,i.notify("toolbar",{prop:"getPrevObj",onPropertyChange:!1,value:{obj:s}});var o=sf.base.extend({},s.prevObj.activeObj,{},!0);s.prevObj.activeObj=sf.base.extend({},i.activeObj,{},!0),i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:s.prevObj}}),i.objColl=sf.base.extend([],s.prevObj.objColl,[],!0),i.pointColl=sf.base.extend([],s.prevObj.pointColl,[],!0),i.transform.straighten=0,i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),0!==i.transform.straighten||this.isPreventSelect||i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1});var r=e,a=t,l=!1;if(t>=e&&t<=Math.ceil(i.img.destHeight)){for(;t<=Math.ceil(i.img.destHeight)&&n;)if(this.zoomAction(-.1,null,!0,!0),e>i.img.destWidth||t>i.img.destHeight)for(;e>i.img.destWidth||t>i.img.destHeight;)this.zoomAction(.0125,null,!0,!0),n=!1}else if(t<=e&&e<i.img.destWidth){for(;e<i.img.destWidth&&n;)if(this.zoomAction(-.1,null,!0,!0),e>i.img.destWidth||t>i.img.destHeight)for(;e>i.img.destWidth||t>i.img.destHeight;)this.zoomAction(.0125,null,!0,!0),n=!1}else if(t>=e&&t>=i.img.destHeight)for(;t>=i.img.destHeight&&n;)this.zoomAction(.1,null,!0,!0);else if(e>=t&&e>=i.img.destWidth){for(;e>=i.img.destWidth&&n;)this.zoomAction(.1,null,!0,!0);if(e<i.img.destWidth&&t<i.img.destHeight){for(;e<i.img.destWidth&&t<i.img.destHeight;)this.zoomAction(-.0125,null,!0,!0),n=!1;this.zoomAction(.0125,null,!0,!0)}}else if(t>i.img.destHeight&&e>i.img.destWidth){for(;t>i.img.destHeight&&e>i.img.destWidth&&n;)this.zoomAction(.1,null,!0,!0);if(e<i.img.destWidth&&t<i.img.destHeight){for(;e<i.img.destWidth&&t<i.img.destHeight;)this.zoomAction(-.0125,null,!0,!0),n=!1;this.zoomAction(.0125,null,!0,!0)}}if(this.resizeImg(o,e,t),e=r,(t=a)!==i.img.destHeight||e!==i.img.destWidth){for(;t>i.img.destHeight||e>i.img.destWidth;)this.zoomAction(.0125,null,!0,!0),l=!0;l&&(this.zoomAction(-.0125,null,!0,!0),l=!1)}if(t!==i.img.destHeight||e!==i.img.destWidth){for(;t<i.img.destHeight||e<i.img.destWidth;)this.zoomAction(-.0125,null,!0,!0),l=!0;l&&(this.zoomAction(-.0125,null,!0,!0),l=!1)}s.prevObj.activeObj=sf.base.extend({},o,{},!0),this.zoomAction(.0125,null,!0),i.allowDownScale=!this.preventDownScale,i.isCropTab=!1,this.zoomAction(-.0125,null,!0),i.aspectWidth=e,i.aspectHeight=t},e.prototype.resizeImg=function(e,t,i){var n=this.parent,s=t/n.img.destWidth,o=i/n.img.destHeight;e.shape?(n.currSelectionPoint=e,n.notify("crop",{prop:"setInitCrop",onPropertyChange:!1,value:{bool:!0}})):n.img.srcWidth===n.baseImgCanvas.width&&n.img.srcHeight===n.baseImgCanvas.height&&(n.currSelectionPoint=null,n.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}})),sf.base.isNullOrUndefined(n.currSelectionPoint)?n.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:n.img.destLeft,startY:n.img.destTop,width:n.img.destWidth,height:n.img.destHeight}}):n.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),t=n.activeObj.activePoint.width*s,i=n.activeObj.activePoint.height*o;for(var r=n.activeObj.activePoint.startX+n.activeObj.activePoint.width/2-t/2,a=n.activeObj.activePoint.startY+n.activeObj.activePoint.height/2-i/2,l=0;sf.base.Browser.isDevice&&l<500&&(r<0||a<0||r+t>n.img.destWidth||a+i>n.img.destHeight);)l++,t-=1,i-=1,r=n.activeObj.activePoint.startX+n.activeObj.activePoint.width/2-t/2,a=n.activeObj.activePoint.startY+n.activeObj.activePoint.height/2-i/2;if(n.transform.defaultZoomFactor=0,n.notify("draw",{prop:"setResizeSelect",value:{bool:!0}}),n.notify("draw",{prop:"setIsCropSelect",value:{bool:!0}}),n.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:r,startY:a,width:t,height:i}}),n.notify("draw",{prop:"setResizeSelect",value:{bool:!1}}),0!==n.transform.straighten){var h={isIntersect:null,arr:null};for(n.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),n.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:h}});h.arr[0]||h.arr[1]||h.arr[2]||h.arr[3];)this.zoomAction(.0125,null,!0),n.notify("draw",{prop:"updateImgCanvasPoints",onPropertyChange:!1}),n.notify("draw",{prop:"isLinesIntersect",onPropertyChange:!1,value:{obj:h}})}n.isCropToolbar=!0,n.crop(),n.isCropToolbar=!1},e.prototype.updateResize=function(){var e=this.parent;e.prevCropObj=sf.base.extend({},e.cropObj,{},!0);var t={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:t}}),e.prevObj=t.currObj,e.currSelectionPoint&&e.prevCropObj.activeObj.shape&&(e.prevObj.activeObj=sf.base.extend({},e.prevCropObj.activeObj,{},!0)),e.prevObj.objColl=sf.base.extend([],e.objColl,[],!0),e.prevObj.pointColl=sf.base.extend([],e.pointColl,[],!0),e.prevObj.afterCropActions=sf.base.extend([],e.afterCropActions,[],!0);var i={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:i}}),e.prevObj.selPointColl=sf.base.extend([],i.selPointColl,[],!0),e.resizeSrc={startX:e.img.srcLeft,startY:e.img.srcTop,width:e.img.srcWidth,height:e.img.srcHeight}},e.prototype.resize=function(e,t,i){var n=this,s=this.parent;s.isResize=!0,sf.base.isNullOrUndefined(s.prevCropObj)&&sf.base.isNullOrUndefined(s.prevObj)&&s.notify("transform",{prop:"updateResize",value:{bool:!1}});var o=s.element.querySelector("#"+s.element.id+"_aspectratio"),r=s.element.querySelector("#"+s.element.id+"_nonaspectratio");o&&r&&(s.notify("toolbar",{prop:"initResizeToolbar"}),sf.base.Browser.isDevice&&s.notify("toolbar",{prop:"init-main-toolbar",value:{isApplyBtn:!1,isDevice:!0,isOkBtn:!0,isResize:!0}}));var a={cancel:!1,previousWidth:Math.ceil(s.img.destWidth),previousHeight:Math.ceil(s.img.destHeight),width:Math.ceil(e),height:t&&0!==t?Math.ceil(t):s.aspectHeight?s.aspectHeight:Math.ceil(s.img.destHeight),isAspectRatio:i||!1};sf.base.isBlazor()?sf.base.isBlazor()&&s.events&&!0===s.events.imageResizing.hasDelegate&&!s.isResizeOkBtn?s.dotNetRef.invokeMethodAsync("OnImageResizingAsync","ImageResizing",a,null).then((function(e){n.resizeEventCancel=e.cancel,e.cancel?s.aspectHeight&&s.aspectWidth&&(s.aspectHeight=a.previousHeight,s.aspectWidth=a.previousWidth):n.resizeEventHandler(e)})):this.resizeEventCancel||this.resizeEventHandler(a):(s.trigger("resizing",a),a.cancel?s.aspectHeight&&s.aspectWidth&&(s.aspectHeight=a.previousHeight,s.aspectWidth=a.previousWidth):this.resizeEventHandler(a))},e.prototype.resizeEventHandler=function(e){var t,i=this.parent,n=i.element.querySelector("#"+i.element.id+"_resizeWidth"),s=i.element.querySelector("#"+i.element.id+"_resizeHeight"),o=i.element.querySelector(".e-ie-toolbar-e-resize-height-input .e-textbox"),r=i.element.querySelector(".e-ie-toolbar-e-resize-width-input .e-textbox");if(e.isAspectRatio)if(null!=this.resizedImgAngle&&this.resizedImgAngle===i.transform.degree||(this.resizedImgAngle=i.transform.degree,t=!0),t){i.notify("transform",{prop:"resizeImage",value:{width:e.width,height:0}});var a=i.img.destWidth,l=i.img.destHeight,h=void 0;if(h=sf.base.isBlazor()?parseFloat(""===r.value?r.placeholder:r.value):parseFloat(""===n.value?n.placeholder:n.value),s){var d=(p=h/(a/l))%1>=.5||p%1<=-.5?Math.round(p):p<0?Math.ceil(p):Math.floor(p);if(sf.base.getComponent(s,"numerictextbox").value=d,s.value=d.toString()+" px",i.aspectHeight=d,n&&""===n.value){var c=(p=parseFloat(""===s.value?s.placeholder:s.value)/(l/a))%1>=.5||p%1<=-.5?Math.round(p):p<0?Math.ceil(p):Math.floor(p);sf.base.getComponent(n,"numerictextbox").value=c,n.value=c.toString()+" px",i.aspectWidth=c}}else if(o){var p;d=(p=h/(a/l))%1>=.5||p%1<=-.5?Math.round(p):p<0?Math.ceil(p):Math.floor(p);if(o.value=d.toString(),i.aspectHeight=d,r&&""===r.value){c=(p=parseFloat(""===o.value?o.placeholder:o.value)/(l/a))%1>=.5||p%1<=-.5?Math.round(p):p<0?Math.ceil(p):Math.floor(p);r.value=c.toString(),i.aspectWidth=c}}}else i.notify("transform",{prop:"resizeImage",value:{width:e.width,height:null}});else null!==this.resizedImgAngle&&this.resizedImgAngle!==i.transform.degree&&(this.resizedImgAngle=i.transform.degree,t=!0),t?(i.notify("transform",{prop:"setPreventDownScale",value:{bool:!0}}),i.notify("transform",{prop:"resizeCrop",value:{width:e.width,height:e.height}}),i.notify("undo-redo",{prop:"setPreventUR",value:{bool:!0}}),i.okBtn(),i.notify("undo-redo",{prop:"setPreventUR",value:{bool:!1}}),i.resizeSrc={startX:i.img.srcLeft,startY:i.img.srcTop,width:i.img.srcWidth,height:i.img.srcHeight},sf.base.isBlazor()?i.updateToolbar(i.element,"resize"):(i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),i.notify("transform",{prop:"setPreventDownScale",value:{bool:!1}}),i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}))):i.notify("transform",{prop:"resizeCrop",value:{width:e.width,height:e.height}});if(this.resizedImgAngle=i.transform.degree,e={previousHeight:e.previousHeight,previousWidth:e.previousWidth,width:e.width,height:e.height,isAspectRatio:e.isAspectRatio},sf.base.isBlazor()&&i.isResizeOkBtn&&i.events&&!0===i.events.imageResized.hasDelegate){var u={width:e.width,height:e.height,isAspectRatio:e.isAspectRatio};i.dotNetRef.invokeMethodAsync("OnImageResizingAsync","ImageResized",null,u)}},e.prototype.straightenImage=function(e){var t=this.parent;sf.base.isBlazor()?t.performCropClick():t.notify("toolbar",{prop:"performCropTransformClick"}),t.setStraighten(e,!0),(sf.base.isBlazor()&&t.events&&!1===t.events.straightening.hasDelegate||!sf.base.isBlazor())&&t.okBtn()},e}(),C=function(){function e(e){this.undoRedoStep=0,this.undoRedoColl=[],this.appliedUndoRedoColl=[],this.tempUndoRedoColl=[],this.tempUndoRedoStep=0,this.isPreventing=!1,this.parent=e,this.addEventListener()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("undo-redo",this.undoRedo,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("undo-redo",this.undoRedo),this.parent.off("destroyed",this.destroy)},e.prototype.initializeUrPvtProp=function(){this.parent.lowerCanvas&&(this.lowerContext=this.parent.lowerCanvas.getContext("2d")),this.parent.upperCanvas&&(this.upperContext=this.parent.upperCanvas.getContext("2d"))},e.prototype.undoRedo=function(e){switch(this.initializeUrPvtProp(),e.prop){case"updateUndoRedoColl":this.updateUrc(e.value.operation,e.value.previousObj,e.value.previousObjColl,e.value.previousPointColl,e.value.previousSelPointColl,e.value.previousCropObj,e.value.previousText,e.value.currentText,e.value.previousFilter,e.value.isCircleCrop);break;case"refreshUrc":this.refreshUrc(e.value.bool);break;case"updateCurrUrc":this.updateCurrUrc(e.value.type);break;case"call-undo":this.callUndo();break;case"call-redo":this.callRedo();break;case"undo":this.undo();break;case"redo":this.redo();break;case"updateUrObj":this.updateUrObj(e.value.objColl);break;case"updateUndoRedo":this.updateUndoRedo();break;case"getAppliedUndoRedoColl":e.value.obj.appliedUndoRedoColl=this.appliedUndoRedoColl;break;case"getUndoRedoStep":e.value.obj.undoRedoStep=this.undoRedoStep;break;case"setUndoRedoStep":this.undoRedoStep=e.value.step;break;case"undoDefault":this.undoDefault(e.value.obj);break;case"setPreventUR":this.isPreventing=e.value.bool;break;case"reset":this.reset()}},e.prototype.getModuleName=function(){return"undo-redo"},e.prototype.reset=function(){this.tempCurrSelPoint=null,this.undoRedoStep=0,this.undoRedoColl=[],this.appliedUndoRedoColl=[],this.tempActObj=null,this.tempUndoRedoColl=[],this.tempUndoRedoStep=0,this.isPreventing=!1},e.prototype.refreshUrc=function(e){var t=this.parent;(e=e||!1)?(sf.base.isBlazor()||t.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!0}}),this.tempUndoRedoColl=sf.base.extend([],this.appliedUndoRedoColl,[],!0),this.tempUndoRedoStep=this.undoRedoStep):sf.base.isBlazor()||t.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!1}}),this.undoRedoColl=this.undoRedoColl.slice(0,this.undoRedoStep),this.appliedUndoRedoColl=this.appliedUndoRedoColl.slice(0,this.undoRedoStep),t.isUndoRedo=t.currObjType.isUndoAction=!1,sf.base.isBlazor()?t.updateToolbar(t.element,"enableDisableToolbarBtn"):t.notify("toolbar",{prop:"enable-disable-btns"})},e.prototype.updateCurrUrc=function(e){var t=this.parent;if(!t.isResize&&!this.isPreventing){if(sf.base.isBlazor()||t.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!1}}),"ok"===e){t.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!1}});var i=this.tempUndoRedoColl.length>0?sf.base.extend([],this.tempUndoRedoColl,[],!0):sf.base.extend([],this.undoRedoColl,[],!0),n=this.undoRedoColl[this.undoRedoColl.length-1],s=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1],o=n?sf.base.extend({},n.previousObj,{},!0):null;if(sf.base.isNullOrUndefined(s)?this.undoRedoColl[0]&&(n.previousCropObj=i[0].previousCropObj,n.previousObj=i[0].previousObj,n.previousObjColl=i[0].previousObjColl,n.previousPointColl=i[0].previousPointColl,n.previousText=i[0].previousText):"imageHFlip"!==n.operation&&"imageVFlip"!==n.operation&&(n.previousCropObj=s.currentCropObj,n.previousObj=s.currentObj,n.previousObjColl=s.currentObjColl,n.previousPointColl=s.currentPointColl,n.previousText=s.currentText,"frame"===n.operation&&n.previousObj&&o&&(n.previousObj.defaultZoom=o.defaultZoom,n.previousObj.zoomFactor=o.zoomFactor,n.previousObj.cropZoom=o.cropZoom)),n){if("imageHFlip"!==n.operation&&"imageVFlip"!==n.operation){var r=this.getZeroZoomObjPointValue(n.currentObjColl,n.currentPointColl);n.currentObjColl=r.obj,n.currentPointColl=r.point;var a={adjustmentLevel:null};t.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:a}}),n.currentObj.adjustmentLevel=sf.base.extend({},a.adjustmentLevel,{},!0),t.notify("filter",{prop:"setTempAdjVal"}),n.currentObj.currentFilter=t.currentFilter}this.appliedUndoRedoColl.push(n)}this.tempUndoRedoColl=[],this.tempUndoRedoStep=0}else this.tempUndoRedoColl.length>0&&(this.appliedUndoRedoColl=sf.base.extend([],this.tempUndoRedoColl,[],!0),this.undoRedoStep=this.tempUndoRedoStep,this.tempUndoRedoColl=[],this.tempUndoRedoStep=0);this.appliedUndoRedoColl.length>16&&this.appliedUndoRedoColl.splice(0,1),this.undoRedoColl=[],this.undoRedoColl=sf.base.extend([],this.appliedUndoRedoColl,[],!0),"ok"===e&&(this.undoRedoStep=this.undoRedoColl.length,sf.base.isBlazor()?t.updateToolbar(t.element,"enableDisableToolbarBtn"):t.notify("toolbar",{prop:"enable-disable-btns"})),t.transform.zoomFactor>0&&(t.togglePan=!0,t.notify("selection",{prop:"setDragCanvas",value:{bool:!0}}))}},e.prototype.cancelCropSelection=function(){var e,t=this.parent,i=!1;t.activeObj.shape&&(e=t.activeObj.shape.split("-")),(t.currObjType.isCustomCrop||e&&"crop"===e[0])&&(i=!0),i&&t.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),0===this.tempUndoRedoColl.length&&0===this.tempUndoRedoStep||(this.appliedUndoRedoColl=sf.base.extend([],this.tempUndoRedoColl,[],!0),this.undoRedoColl=sf.base.extend([],this.tempUndoRedoColl,[],!0),this.undoRedoStep=this.tempUndoRedoStep,this.tempUndoRedoColl=[],this.tempUndoRedoStep=0,sf.base.isBlazor()||t.notify("toolbar",{prop:"setEnableDisableUndoRedo",value:{isPrevent:!1}}))},e.prototype.refreshToolbarActions=function(){var e=this.parent;sf.base.isBlazor()?sf.base.isNullOrUndefined(e.activeObj.shape)&&e.updateToolbar(e.element,"imageLoaded"):e.activeObj.shape?(e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),e.notify("toolbar",{prop:"update-toolbar-items",onPropertyChange:!1})):e.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1})},e.prototype.applyCurrentChanges=function(){var e=this.parent;e.currObjType.isFiltered=!1,0===e.transform.zoomFactor&&(e.togglePan=!1,e.notify("selection",{prop:"setDragCanvas",value:{bool:!1}})),e.element.querySelector(".e-contextual-toolbar-wrapper")&&!sf.base.isBlazor()&&e.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),e.togglePen&&(e.togglePen=!1,e.upperCanvas.style.cursor=e.cursor="default",this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height)),this.appliedUndoRedoColl.length>0&&(this.undoRedoColl=sf.base.extend([],this.appliedUndoRedoColl,[],!0))},e.prototype.callUndo=function(){this.applyCurrentChanges(),this.undo()},e.prototype.callRedo=function(){this.applyCurrentChanges(),this.redo()},e.prototype.undo=function(){var e=this.parent;if(this.cancelCropSelection(),!e.disabled&&e.isImageLoaded&&this.undoRedoStep>0){this.refreshToolbarActions(),e.activeObj.activePoint&&0!==e.activeObj.activePoint.width&&(this.tempActObj=e.activeObj),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.undoRedoStep--,sf.base.isBlazor()?e.updateToolbar(e.element,"enableDisableToolbarBtn"):(e.notify("toolbar",{prop:"enable-disable-btns"}),e.element.querySelector(".e-contextual-toolbar-wrapper")&&e.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide")),e.isUndoRedo=!0;var t=this.undoRedoColl[this.undoRedoStep];this.undoRedoColl.length===this.undoRedoStep?e.currObjType.isUndoAction=!1:e.currObjType.isUndoAction=!0,"textAreaCustomization"===t.operation||"block"!==e.textArea.style.display&&"inline-block"!==e.textArea.style.display||(e.textArea.style.display="none"),e.notify("draw",{prop:"setCancelAction",onPropertyChange:!1,value:{bool:!0}});switch(e.cropObj=sf.base.extend({},t.previousCropObj,{},!0),e.afterCropActions=t.previousObj.afterCropActions,this.lowerContext.filter=t.previousObj.filter,e.notify("filter",{prop:"setAdjustmentLevel",onPropertyChange:!1,value:{adjustmentLevel:t.previousObj.adjustmentLevel}}),e.notify("filter",{prop:"setTempAdjVal"}),e.currentFilter=t.previousObj.currentFilter,e.notify("filter",{prop:"setTempFilVal"}),e.canvasFilter=this.lowerContext.filter,e.initialAdjustmentValue=this.lowerContext.filter,e.notify("filter",{prop:"setBevelFilter",onPropertyChange:!1,value:{bevelFilter:this.lowerContext.filter}}),t.operation){case"shapeTransform":case"brightness":case"contrast":case"hue":case"saturation":case"opacity":case"blur":case"exposure":case"default":case"chrome":case"cold":case"warm":case"grayscale":case"blackandwhite":case"sepia":case"invert":case"sharpen":case"imageRotate":this.shapeTransform(t.previousObjColl);break;case"freehanddraw":case"freehand-draw":this.updateFreehandDraw(t.previousPointColl,t.previousSelPointColl);break;case"freehanddrawCustomized":this.updateFreehandDrawCustomized(t.previousPointColl);break;case"deleteFreehandDrawing":case"deleteObj":this.updateDelete(t.operation,t.previousObjColl,t.previousPointColl,t.previousSelPointColl);break;case"textAreaCustomization":this.shapeTransform(t.previousObjColl),this.updateTextAreaCustomization(void 0,t.previousObjColl);break;case"text":this.updateText(t.previousObjColl,!0);break;case"frame":e.transform.zoomFactor=e.transform.defaultZoomFactor=t.previousObj.defaultZoom,e.setProperties({zoomSettings:{zoomFactor:t.previousObj.zoomFactor}},!0),e.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:e.zoomSettings.zoomFactor}}),sf.base.extend(e.frameObj,t.previousObj.frameObj),e.notify("draw",{prop:"render-image",value:{isMouseWheel:!0,isPreventClearRect:null,isFrame:!0}});break;case"imageHFlip":this.imageFlip("horizontal",t.previousObjColl);break;case"imageVFlip":this.imageFlip("vertical",t.previousObjColl);break;default:this.undoDefault(t,!0),e.notify("filter",{prop:"set-adjustment",value:{operation:t.operation}}),e.notify("filter",{prop:"update-filter",value:{operation:t.operation,filter:t.filter}})}"crop"===t.operation?(t.previousObj.currSelectionPoint&&(e.currSelectionPoint=sf.base.extend({},t.previousObj.currSelectionPoint,{},!0),e.currSelectionPoint&&sf.base.isNullOrUndefined(e.currSelectionPoint.shape)&&(e.currSelectionPoint=null)),e.updateCropTransformItems(),e.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),e.isCircleCrop&&(e.isCircleCrop=!1,this.tempCurrSelPoint=sf.base.extend({},e.currSelectionPoint,{},!0),e.currSelectionPoint=null),e.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),e.currObjType.isActiveObj=!1,0!==e.transform.straighten&&e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}})):"resize"===t.operation&&e.cropObj&&e.cropObj.activeObj&&(e.currSelectionPoint=sf.base.extend({},e.cropObj.activeObj,{},!0)),this.undoRedoColl[this.undoRedoStep-1]&&this.undoRedoColl[this.undoRedoStep-1].isCircleCrop&&(e.isCircleCrop=!0,e.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})),this.endUndoRedo(t.operation,!0)}},e.prototype.redo=function(){var e=this.parent;if(this.cancelCropSelection(),!e.disabled&&e.isImageLoaded&&this.undoRedoStep<this.appliedUndoRedoColl.length){this.refreshToolbarActions(),this.undoRedoStep++,sf.base.isBlazor()?e.updateToolbar(e.element,"enableDisableToolbarBtn"):e.notify("toolbar",{prop:"enable-disable-btns"}),e.isUndoRedo=!0;var t=this.undoRedoColl[this.undoRedoStep-1];this.undoRedoColl.length===this.undoRedoStep?e.currObjType.isUndoAction=!1:e.currObjType.isUndoAction=!0,"textAreaCustomization"===t.operation||"block"!==e.textArea.style.display&&"inline-block"!==e.textArea.style.display||(e.textArea.style.display="none"),e.notify("draw",{prop:"setCancelAction",onPropertyChange:!1,value:{bool:!0}}),e.cropObj=sf.base.extend({},t.currentCropObj,{},!0),e.afterCropActions=t.currentObj.afterCropActions,this.lowerContext.filter=t.currentObj.filter,!sf.base.isBlazor()&&e.element.querySelector(".e-contextual-toolbar-wrapper")&&e.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),e.notify("filter",{prop:"setAdjustmentLevel",onPropertyChange:!1,value:{adjustmentLevel:t.currentObj.adjustmentLevel}}),e.notify("filter",{prop:"setTempAdjVal"}),e.currentFilter=t.currentObj.currentFilter,e.notify("filter",{prop:"setTempFilVal"}),e.canvasFilter=this.lowerContext.filter,e.initialAdjustmentValue=this.lowerContext.filter,e.notify("filter",{prop:"setBevelFilter",onPropertyChange:!1,value:{bevelFilter:this.lowerContext.filter}});var i=void 0;switch(t.operation){case"shapeTransform":case"brightness":case"contrast":case"hue":case"saturation":case"opacity":case"blur":case"exposure":case"default":case"chrome":case"cold":case"warm":case"grayscale":case"blackandwhite":case"sepia":case"invert":case"sharpen":case"imageRotate":this.shapeTransform(t.currentObjColl);break;case"freehanddraw":case"freehand-draw":this.updateFreehandDraw(t.currentPointColl,t.currentSelPointColl);break;case"freehanddrawCustomized":this.updateFreehandDrawCustomized(t.currentPointColl);break;case"deleteFreehandDrawing":case"deleteObj":this.updateDelete(t.operation,t.currentObjColl,t.currentPointColl,t.currentSelPointColl);break;case"textAreaCustomization":this.shapeTransform(t.currentObjColl),this.updateTextAreaCustomization(i,t.currentObjColl);break;case"text":this.updateText(t.currentObjColl,!1);break;case"frame":sf.base.extend(e.frameObj,t.currentObj.frameObj),e.notify("draw",{prop:"render-image",value:{isMouseWheel:!0,isPreventClearRect:null,isFrame:!0}});break;case"imageHFlip":this.imageFlip("horizontal",t.currentObjColl);break;case"imageVFlip":this.imageFlip("vertical",t.currentObjColl);break;default:e.objColl=[],e.pointColl=[],e.freehandCounter=0,e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),e.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:t.currentObj,isUndoRedo:!0}}),e.img.destLeft=t.currentObj.destPoints.startX,e.img.destTop=t.currentObj.destPoints.startY,i=sf.base.extend({},e.activeObj,{},!0),e.objColl=sf.base.extend([],t.currentObjColl,[],!0),e.pointColl=sf.base.extend([],t.currentPointColl,[],!0),e.freehandCounter=e.pointColl.length,e.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:sf.base.extend([],t.currentSelPointColl,[],!0)}}}),e.transform.straighten=0,this.lowerContext.filter="none",e.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),e.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=t.currentObj.filter,e.prevStraightenedDegree=e.transform.straighten,e.activeObj=i,this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),0!==e.activeObj.activePoint.width&&0!==e.activeObj.activePoint.height&&e.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),e.notify("filter",{prop:"set-adjustment",value:{operation:t.operation}}),e.notify("filter",{prop:"update-filter",value:{operation:t.operation}})}"crop"===t.operation&&t.isCircleCrop&&(e.isCircleCrop=!0,e.currSelectionPoint=sf.base.extend({},this.tempCurrSelPoint,{},!0),this.tempCurrSelPoint=null),"crop"!==t.operation||t.isCircleCrop||(e.isCircleCrop=!1),"crop"===t.operation&&t.currentObj.currSelectionPoint&&(e.currSelectionPoint=sf.base.extend({},t.currentObj.currSelectionPoint,{},!0),e.notify("draw",{prop:"setStraightenActObj",value:{activeObj:e.currSelectionPoint}})),e.currSelectionPoint&&sf.base.isNullOrUndefined(e.currSelectionPoint.shape)&&(e.currSelectionPoint=null),"resize"===t.operation&&e.cropObj&&e.cropObj.activeObj&&(e.currSelectionPoint=sf.base.extend({},e.cropObj.activeObj,{},!0)),this.endUndoRedo(t.operation,!1)}},e.prototype.imageFlip=function(e,t){var i=this.parent;this.shapeTransform(t),i.activeObj=sf.base.extend({},i.objColl[i.objColl.length-1],{},!0);var n=i.activeObj,s=n.shape,o=n.isHorImageFlip,r=n.isVerImageFlip;i.objColl.pop(),s&&"image"===s?("horizontal"===e?sf.base.isNullOrUndefined(o)&&r?(i.activeObj.isHorImageFlip=!0,i.activeObj.isVerImageFlip=null,i.horizontalFlip(this.upperContext,!0)):(sf.base.isNullOrUndefined(o)||!o?i.activeObj.isHorImageFlip=!0:i.activeObj.isHorImageFlip=null,i.horizontalFlip(this.upperContext,!0)):"vertical"===e&&(sf.base.isNullOrUndefined(r)&&o?(i.activeObj.isVerImageFlip=!0,i.activeObj.isHorImageFlip=null,i.verticalFlip(this.upperContext,!0)):(sf.base.isNullOrUndefined(r)||!r?i.activeObj.isVerImageFlip=!0:i.activeObj.isVerImageFlip=null,i.verticalFlip(this.upperContext,!0))),i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}})):i.notify("draw",{prop:"render-image",value:{isMouseWheel:!0}})},e.prototype.shapeTransform=function(e){var t=this.parent;t.objColl=sf.base.extend([],e,[],!0),t.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.isUndoRedo=!0,t.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})},e.prototype.updateFreehandDraw=function(e,t){var i=this.parent;i.pointColl=e,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:t}}}),i.freehandCounter=i.pointColl.length,i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})},e.prototype.updateFreehandDrawCustomized=function(e){var t=this.parent;t.pointColl=e,t.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.isUndoRedo=!0,t.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})},e.prototype.updateDelete=function(e,t,i,n){var s=this.parent;"deleteFreehandDrawing"===e?(s.pointColl=i,s.freehandCounter=s.pointColl.length,s.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:n}}}),s.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}})):"deleteObj"===e&&(s.objColl=t,s.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}})),this.lowerContext.clearRect(0,0,s.lowerCanvas.width,s.lowerCanvas.height),this.upperContext.clearRect(0,0,s.upperCanvas.width,s.upperCanvas.height),s.isUndoRedo=!0,s.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1})},e.prototype.updateTextAreaCustomization=function(e,t){var i=this.parent;i.objColl=sf.base.extend([],t,[],!0),i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:!0}}),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1});for(var n=0,s=t.length;n<s;n++){if(!this.tempActObj){e=sf.base.extend({},t[t.length-1],{},!0),i.objColl.splice(n,1);break}if(this.tempActObj.currIndex===t[n].currIndex){e=sf.base.extend({},t[n],{},!0),i.objColl.splice(n,1);break}}e&&this.updateTextBox(e),"block"!==i.textArea.style.display&&"inline-block"!==i.textArea.style.display||i.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}})},e.prototype.updateText=function(e,t){var i=this.parent;if(this.tempActObj&&(i.activeObj=sf.base.extend({},this.tempActObj,{},!0)),0===e.length&&1===i.objColl.length)this.tempActObj=sf.base.extend({},i.objColl[0],{},!0);else for(var n=0,s=i.objColl.length;n<s;n++){if(i.objColl[n]&&sf.base.isNullOrUndefined(e[n])){this.tempActObj=sf.base.extend({},i.objColl[n],{},!0);break}if(e[n].currIndex!==i.objColl[n].currIndex){this.tempActObj=sf.base.extend({},i.objColl[n],{},!0);break}}t&&(i.activeObj=sf.base.extend({},this.tempActObj,{},!0)),i.objColl=sf.base.extend([],e,[],!0),i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:!0}}),this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),this.lowerContext.clearRect(0,0,i.lowerCanvas.width,i.lowerCanvas.height),i.isUndoRedo=!0,i.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1})},e.prototype.updateTextBox=function(e){var t=this.parent;this.upperContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),this.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),sf.base.isBlazor()?t.updateToolbar(t.element,"destroyQuickAccessToolbar"):t.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1});var i=t.textArea;i.style.display="block",i.style.fontFamily=e.textSettings.fontFamily,i.style.fontSize=e.textSettings.fontSize+"px",i.style.color=e.strokeSettings.strokeColor,i.style.fontWeight=e.textSettings.bold?"bold":"normal",i.style.fontStyle=e.textSettings.italic?"italic":"normal",i.style.border="2px solid "+t.themeColl[t.theme].primaryColor,i.value=e.keyHistory,t.activeObj=sf.base.extend({},e,{},!0),t.notify("shape",{prop:"updateFontStyles",onPropertyChange:!1,value:{isTextBox:null}}),t.textArea.style.width=t.activeObj.activePoint.width+"px"},e.prototype.undoDefault=function(e,t){this.lowerContext.filter=e.previousObj.filter;var i=this.parent;i.objColl=[],i.pointColl=[],i.freehandCounter=0,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:e.previousObj,isUndoRedo:t}}),i.prevStraightenedDegree=i.transform.straighten,this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),i.img.destLeft=e.previousObj.destPoints.startX,i.img.destTop=e.previousObj.destPoints.startY;var n=sf.base.extend({},i.activeObj,{},!0);i.objColl=sf.base.extend([],e.previousObjColl,[],!0),i.pointColl=sf.base.extend([],e.previousPointColl,[],!0),i.freehandCounter=i.pointColl.length,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:sf.base.extend([],e.previousSelPointColl,[],!0)}}}),i.transform.straighten=0,this.lowerContext.filter="none",i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.lowerContext.filter=e.previousObj.filter,i.activeObj=n,this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),0!==i.activeObj.activePoint.width&&0!==i.activeObj.activePoint.height&&i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}})},e.prototype.endUndoRedo=function(e,t){var i=this.parent;(i.currSelectionPoint&&"crop-circle"===i.currSelectionPoint.shape||i.isCircleCrop)&&JSON.stringify(i.frameObj)!==JSON.stringify({type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""})&&i.notify("draw",{prop:"render-image",value:{isMouseWheel:!0}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),i.isCircleCrop&&(t&&"crop"!==e||!t)&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}}),i.transform.zoomFactor>0&&i.notify("selection",{prop:"setDragCanvas",value:{bool:!0}}),i.notify("draw",{prop:"setCancelAction",onPropertyChange:!1,value:{bool:!1}}),sf.base.isBlazor()?(sf.base.isNullOrUndefined(i.activeObj.shape)||"crop"!==i.activeObj.shape.split("-")[0])&&(i.updateToolbar(i.element,"imageLoaded"),i.updateToolbar(i.element,"enableDisableToolbarBtn")):(i.activeObj.shape&&"crop"===i.activeObj.shape.split("-")[0]?i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!0,isCropping:!0,isZooming:null,cType:null}}):i.notify("toolbar",{prop:"refresh-main-toolbar",onPropertyChange:!1}),i.notify("toolbar",{prop:"enable-disable-btns"})),document.getElementById(i.element.id+"_quickAccessToolbarArea")&&(document.getElementById(i.element.id+"_quickAccessToolbarArea").style.display="none"),sf.base.isBlazor()?i.updateToolbar(i.element,"enableDisableToolbarBtn"):i.notify("toolbar",{prop:"enable-disable-btns"}),0!==i.transform.degree&&i.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:0,yDiff:0}}),i.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),i.currObjType.isCustomCrop=!1},e.prototype.updateUrc=function(e,t,i,n,s,o,r,a,l,h){var d=this.parent;if(!d.isResize&&!this.isPreventing){var c={isInitialLoaded:!1};if(d.currObjType.isUndoAction&&this.refreshUrc(!0),d.notify("draw",{prop:"isInitialLoaded",onPropertyChange:!1,value:{object:c}}),!c.isInitialLoaded&&d.allowUndoRedo){var p={currObj:{}};d.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:p}});var u=p.currObj;u.objColl=sf.base.extend([],d.objColl,[],!0),u.pointColl=sf.base.extend([],d.pointColl,[],!0),u.afterCropActions=sf.base.extend([],d.afterCropActions,[],!0);var f={selPointColl:null};if(d.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:f}}),u.selPointColl=sf.base.extend([],f.selPointColl,[],!0),"crop"===e)u.currSelectionPoint=sf.base.extend({},d.currSelectionPoint,{},!0);else if("frame"===e)t.destPoints={startX:d.frameDestPoints.destLeft,startY:d.frameDestPoints.destTop,width:d.frameDestPoints.destWidth,height:d.frameDestPoints.destHeight},u.destPoints={startX:d.frameDestPoints.destLeft,startY:d.frameDestPoints.destTop,width:d.frameDestPoints.destWidth,height:d.frameDestPoints.destHeight},sf.base.isNullOrUndefined(d.tempFrameZoomLevel)||(t.defaultZoom=u.defaultZoom=d.tempFrameZoomLevel);else if(("imageHFlip"===e||"imageVFlip"===e)&&this.appliedUndoRedoColl.length>0){var g=i[i.length-1].currIndex;if(i=this.appliedUndoRedoColl[this.appliedUndoRedoColl.length-1].currentObjColl,g)for(var m=0,v=i.length;m<v;m++)if(i[m].currIndex===g){var b=sf.base.extend({},i[m],{},!0);i.splice(m,1),i.push(b);break}}if(this.undoRedoColl.push({operation:e,previousObj:t,currentObj:u,previousObjColl:i,currentObjColl:u.objColl,previousPointColl:n,currentPointColl:u.pointColl,previousSelPointColl:s,currentSelPointColl:u.selPointColl,previousCropObj:o,currentCropObj:sf.base.extend({},d.cropObj,{},!0),previousText:r,currentText:a,filter:l,isCircleCrop:h}),sf.base.isBlazor()){if("pen-toolbar"!==d.currentToolbar){var y=null;"text-toolbar"===d.currentToolbar&&"textAreaCustomization"===e&&(y="textAreaClicked"),d.updateToolbar(d.element,"enableDisableToolbarBtn",y)}}else d.notify("toolbar",{prop:"enable-disable-btns",onPropertyChange:!1})}}},e.prototype.updateUrObj=function(e){var t=this.parent;if(t.allowUndoRedo){t.currObjType.isUndoAction&&this.refreshUrc(!0),sf.base.isNullOrUndefined(t.activeObj.imageRatio)&&t.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),t.objColl.push(t.activeObj);var i=sf.base.extend({},t.cropObj,{},!0),n={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}});var s=n.currObj;s.objColl=sf.base.extend([],t.objColl,[],!0),s.pointColl=sf.base.extend([],t.pointColl,[],!0),s.afterCropActions=sf.base.extend([],t.afterCropActions,[],!0);var o={selPointColl:null};t.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),s.selPointColl=sf.base.extend([],o.selPointColl,[],!0),this.undoRedoColl.push({operation:"shapeTransform",previousObj:s,currentObj:s,previousObjColl:e,currentObjColl:s.objColl,previousPointColl:s.pointColl,currentPointColl:s.pointColl,previousSelPointColl:s.selPointColl,currentSelPointColl:s.selPointColl,previousCropObj:i,currentCropObj:i}),t.notify("selection",{prop:"redrawShape",onPropertyChange:!1,value:{obj:t.objColl[t.objColl.length-1]}})}},e.prototype.updateUndoRedo=function(){var e=this.parent,t=sf.base.extend({},e.cropObj,{},!0),i={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:i}});var n=i.currObj;n.objColl=sf.base.extend([],e.objColl,[],!0),n.pointColl=sf.base.extend([],e.pointColl,[],!0),n.afterCropActions=sf.base.extend([],e.afterCropActions,[],!0);var s={selPointColl:null};e.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:s}}),n.selPointColl=sf.base.extend([],s.selPointColl,[],!0),sf.base.isNullOrUndefined(e.activeObj.imageRatio)&&e.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),e.objColl.push(e.activeObj),this.updateUrc("shapeTransform",n,n.objColl,n.pointColl,n.selPointColl,t),e.objColl.pop(),e.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:null}}),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),sf.base.isBlazor()?e.updateToolbar(e.element,"imageLoaded"):(e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}),e.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}))},e.prototype.getZeroZoomObjPointValue=function(e,t){var i=this.parent,n={currObj:{}};i.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}});var s=n.currObj;s.objColl=sf.base.extend([],i.objColl,[],!0),s.pointColl=sf.base.extend([],i.pointColl,[],!0),s.afterCropActions=sf.base.extend([],i.afterCropActions,[],!0);var o={selPointColl:null};i.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),s.selPointColl=sf.base.extend([],o.selPointColl,[],!0);var r={cropDimension:null};i.notify("transform",{prop:"getCropDimension",onPropertyChange:!1,value:{obj:r}});var a=sf.base.extend([],i.objColl,[],!0),l=sf.base.extend([],i.pointColl,[],!0),h={arrowDimension:null};this.parent.notify("draw",{prop:"getArrowDimension",onPropertyChange:!1,value:{obj:h}});var d=sf.base.extend({},h.arrowDimension,{},!0);if(i.transform.zoomFactor>0&&(e.length>0||t.length>0)){i.objColl=e,i.pointColl=t;var c=i.isUndoRedo,p=i.isCropTab;if(0!==i.transform.zoomFactor){i.isUndoRedo=!0,i.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:!0}}),i.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:!0}}),i.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),i.isCropTab=!0;var u=sf.base.extend({},i.zoomSettings,null,!0);i.transform.zoomFactor>0?i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-i.transform.zoomFactor,zoomPoint:null,isResize:null}}):i.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:Math.abs(i.transform.zoomFactor),zoomPoint:null,isResize:null}}),i.zoomSettings=u,i.isCropTab=p,i.isUndoRedo=c,a=sf.base.extend([],i.objColl,[],!0),l=sf.base.extend([],i.pointColl,[],!0),i.objColl=[],i.pointColl=[],i.freehandCounter=0,i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:[]}}}),i.notify("transform",{prop:"setCropDimension",onPropertyChange:!1,value:{width:r.cropDimension.width,height:r.cropDimension.height}});var f={width:r.cropDimension.width,height:r.cropDimension.height};f.width+=f.width*s.defaultZoom,f.height+=f.height*s.defaultZoom,i.notify("draw",{prop:"setZoomCropWidth",value:{width:f.width,height:f.height}}),i.notify("draw",{prop:"setCurrentObj",onPropertyChange:!1,value:{obj:s}}),i.img.destLeft=s.destPoints.startX,i.img.destTop=s.destPoints.startY,i.panPoint.totalPannedPoint=s.totalPannedPoint,i.panPoint.totalPannedClientPoint=s.totalPannedClientPoint,i.panPoint.totalPannedInternalPoint=s.totalPannedInternalPoint,i.objColl=sf.base.extend([],s.objColl,[],!0),i.pointColl=sf.base.extend([],s.pointColl,[],!0),i.freehandCounter=i.pointColl.length,i.notify("draw",{prop:"setArrowDimension",onPropertyChange:!1,value:{arrowDimension:d}}),i.notify("freehand-draw",{prop:"setSelPointColl",onPropertyChange:!1,value:{obj:{selPointColl:sf.base.extend([],s.selPointColl,[],!0)}}}),this.lowerContext.filter="none",i.transform.straighten=0,this.applyImgTranform(),i.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),i.notify("freehand-draw",{prop:"freehandRedraw",onPropertyChange:!1,value:{context:this.lowerContext,points:null}}),i.notify("freehand-draw",{prop:"updateFHDCurPts",onPropertyChange:!1}),this.lowerContext.filter=s.filter,0!==i.transform.degree&&i.notify("transform",{prop:"drawPannedImage",onPropertyChange:!1,value:{xDiff:0,yDiff:0}}),i.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),(i.isCircleCrop||i.currSelectionPoint&&"crop-circle"===i.currSelectionPoint.shape)&&i.notify("crop",{prop:"cropCircle",onPropertyChange:!1,value:{context:this.lowerContext,isSave:null,isFlip:null}})}}return{obj:a,point:l}},e.prototype.applyImgTranform=function(){for(var e=this.parent,t=sf.base.extend({},e.activeObj,{},!0),i=0,n=e.objColl.length;i<n;i++)if("image"===e.objColl[i].shape){e.activeObj=sf.base.extend({},e.objColl[i],{},!0);var s=e.objColl[i].imageCanvas.getContext("2d");e.notify("selection",{prop:"applyTransformToImg",onPropertyChange:!1,value:{ctx:s}}),this.upperContext.clearRect(0,0,e.upperCanvas.width,e.upperCanvas.height),e.notify("selection",{prop:"setImageClarity",onPropertyChange:!1,value:{bool:!0}})}e.activeObj=t},e}();!function(e){e.Png="Png",e.Jpeg="Jpeg",e.Svg="Svg"}(e||(e={})),function(e){e.Horizontal="Horizontal",e.Vertical="Vertical"}(t||(t={})),function(e){e.Rectangle="Rectangle",e.Ellipse="Ellipse",e.Line="Line",e.Arrow="Arrow",e.Path="Path",e.Text="Text",e.FreehandDraw="FreehandDraw",e.Image="Image"}(n||(n={})),function(e){e[e.MouseWheel=1]="MouseWheel",e[e.Pinch=2]="Pinch",e[e.Commands=4]="Commands",e[e.Toolbar=8]="Toolbar"}(s||(s={})),function(e){e.Bootstrap5="Bootstrap5",e.Bootstrap5Dark="Bootstrap5Dark",e.Tailwind="Tailwind",e.TailwindDark="TailwindDark",e.Fluent="Fluent",e.FluentDark="FluentDark",e.Bootstrap4="Bootstrap4",e.Bootstrap="Bootstrap",e.BootstrapDark="BootstrapDark",e.Material="Material",e.MaterialDark="MaterialDark",e.Fabric="Fabric",e.FabricDark="FabricDark",e.Highcontrast="Highcontrast"}(o||(o={})),function(e){e.Crop="Crop",e.Transform="Transform",e.Annotate="Annotate",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.Open="Open",e.Reset="Reset",e.Save="Save",e.Pan="Pan",e.Move="Move",e.Pen="Pen",e.Line="Line",e.Arrow="Arrow",e.Path="Path",e.Rectangle="Rectangle",e.Image="Image",e.Ellipse="Ellipse",e.Text="Text",e.CustomSelection="CustomSelection",e.CircleSelection="CircleSelection",e.SquareSelection="SquareSelection",e.RatioSelection="RatioSelection",e.RotateLeft="RotateLeft",e.RotateRight="RotateRight",e.FlipHorizontal="FlipHorizontal",e.FlipVertical="FlipVertical",e.Undo="Undo",e.Redo="Redo",e.None="None",e.Mat="Mat",e.Bevel="Bevel",e.Inset="Inset",e.Hook="Hook",e.Finetune="Finetune",e.Filter="Filter",e.Frame="Frame",e.Resize="Resize",e.HorizontalFlip="HorizontalFlip",e.VerticalFlip="VerticalFlip",e.Brightness="Brightness",e.Contrast="Contrast",e.Hue="Hue",e.Saturation="Saturation",e.Opacity="Opacity",e.Blur="Blur",e.Exposure="Exposure",e.Default="Default",e.Chrome="Chrome",e.Cold="Cold",e.Warm="Warm",e.Grayscale="Grayscale",e.Sepia="Sepia",e.Invert="Invert",e.Straightening="Straightening"}(r||(r={})),function(e){e.Default="Default",e.Chrome="Chrome",e.Cold="Cold",e.Warm="Warm",e.Grayscale="Grayscale",e.Sepia="Sepia",e.Invert="Invert"}(a||(a={})),function(e){e.Brightness="Brightness",e.Contrast="Contrast",e.Hue="Hue",e.Saturation="Saturation",e.Exposure="Exposure",e.Opacity="Opacity",e.Blur="Blur"}(l||(l={})),function(e){e.None="None",e.Arrow="Arrow",e.SolidArrow="SolidArrow",e.Circle="Circle",e.SolidCircle="SolidCircle",e.Square="Square",e.SolidSquare="SolidSquare",e.Bar="Bar"}(h||(h={})),function(e){e.None="None",e.Mat="Mat",e.Bevel="Bevel",e.Line="Line",e.Inset="Inset",e.Hook="Hook"}(d||(d={})),function(e){e.Solid="Solid",e.Dashed="Dashed",e.Dotted="Dotted"}(c||(c={}));var w,M,S=function(){function e(e){this.defToolbarItems=[],this.toolbarHeight=46,this.currToolbar="",this.preventZoomBtn=!1,this.currentToolbar="main",this.selFhdColor="#42a5f5",this.preventEnableDisableUr=!1,this.isAspectRatio=!0,this.isFrameToolbar=!1,this.presetColors={custom:["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"]},this.parent=e,this.addEventListener(),this.initLocale()}return e.prototype.destroy=function(){this.parent.isDestroyed||this.removeEventListener()},e.prototype.addEventListener=function(){this.parent.on("toolbar",this.toolbar,this),this.parent.on("destroyed",this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.off("toolbar",this.toolbar),this.parent.off("destroyed",this.destroy)},e.prototype.initLocale=function(){this.defaultLocale={Crop:"Crop",ZoomIn:"Zoom In",ZoomOut:"Zoom Out",Undo:"Undo",Redo:"Redo",Transform:"Transform",Annotation:"Annotation",Finetune:"Finetune",Brightness:"Brightness",Contrast:"Contrast",Hue:"Hue",Saturation:"Saturation",Opacity:"Opacity",Blur:"Blur",Sharpen:"Sharpen",Exposure:"Exposure",Filter:"Filter",Default:"Default",Chrome:"Chrome",Cold:"Cold",Warm:"Warm",Grayscale:"Grayscale",BlackAndWhite:"Black and White",Sepia:"Sepia",Invert:"Invert",Text:"Add Text",Pen:"Pen",Reset:"Reset",Save:"Save",Select:"Select",RotateLeft:"Rotate Left",RotateRight:"Rotate Right",HorizontalFlip:"Horizontal Flip",VerticalFlip:"Vertical Flip",OK:"Apply",Cancel:"Discard",FillColor:"Fill Color",StrokeColor:"Stroke Color",StrokeWidth:"Stroke Width",FontFamily:"Font Family",FontStyle:"Font Style",FontSize:"Font Size",FontColor:"Font Color",Pan:"Pan",Move:"Move",Load:"Load",Custom:"Custom",Square:"Square",Circle:"Circle",Ellipse:"Ellipse",Rectangle:"Rectangle",Line:"Line",Arrow:"Arrow",Path:"Path",Bold:"Bold",Italic:"Italic",BoldItalic:"Bold Italic",XSmall:"X-Small",Small:"Small",Medium:"Medium",Large:"Large",XLarge:"X-Large",ABC:"ABC",Browse:"Browse",Duplicate:"Duplicate",Remove:"Remove",EditText:"Edit Text",Start:"Start",End:"End",Bar:"Bar",ArrowSolid:"Arrow Solid",CircleSolid:"Circle Solid",SquareSolid:"Square Solid",None:"None",CropAndTransform:"Crop and Transform",CropSelection:"Crop Selection",Image:"Add Image",Transparency:"Transparency",Height:"Height",Width:"Width",AspectRatio:"Maintain aspect ratio",W:"W",H:"H",DragText:"Drag and drop your image here or",DropText:"Drop your image here or",BrowseText:"Browse here...",SupportText:"Supports:",Frame:"Frame",Mat:"Mat",Bevel:"Bevel",Inset:"Inset",Hook:"Hook",Color:"Color",Size:"Size",Offset:"Offset",Radius:"Radius",Amount:"Amount",Resize:"Resize",0:"0%",20:"20%",40:"40%",60:"60%",80:"80%",100:"100%",1:"1",2:"2",3:"3",4:"4",5:"5",Border:"Border",Solid:"Solid",Dashed:"Dashed",Dotted:"Dotted",GradientColor:"Gradient Color",ConfirmDialogHeader:"Confirm Save Changes",ConfirmDialogContent:"Do you want to save the changes you made to the image?",AlertDialogHeader:"Unsupported file",AlertDialogContent:"The dropped file is unsupported.",Yes:"Yes",No:"No",ImageErrorDialogHeader:"Image Selection Error",ImageErrorDialogContent:"Please select only one image to open.",Straighten:"Straighten",NoOutline:"No outline"},this.l10n=new sf.base.L10n("image-editor",this.defaultLocale,this.parent.locale)},e.prototype.toolbar=function(e){var t=this.parent;switch(this.updatePrivateVariables(),e.prop){case"create-toolbar":this.createToolbar();break;case"create-contextual-toolbar":this.createContextualToolbar();break;case"update-toolbar-items":this.updateToolbarItems();break;case"refresh-toolbar":this.refreshToolbar(e.value.type,e.value.isApplyBtn,e.value.isCropping,e.value.isZooming,e.value.cType);break;case"renderQAT":this.renderQAT(e.value.isPenEdit);break;case"enable-disable-btns":this.enableDisableTbrBtn();break;case"init-main-toolbar":this.initMainToolbar(e.value.isApplyBtn,e.value.isDevice,e.value.isOkBtn,e.value.isResize,e.value.isFrame,e.value.isMainToolbar);break;case"create-bottom-toolbar":this.createBottomToolbar();break;case"refresh-main-toolbar":this.refreshMainToolbar();break;case"create-qa-toolbar":this.createQuickAccessToolbar();break;case"destroy-qa-toolbar":this.destroyQuickAccessToolbar();break;case"zoom-up-handler":this.zoomBtnMouseUpHandler();break;case"refresh-dropdown-btn":this.refreshDropDownBtn(e.value.isDisabled);break;case"close-contextual-toolbar":this.closeContextualToolbar();break;case"destroy-bottom-toolbar":this.destroyBottomToolbar();break;case"destroy-top-toolbar":this.destroyTopToolbar();break;case"destroySubComponents":this.destroySubComponents();break;case"setLocale":this.l10n.setLocale(e.value.locale);break;case"setPreventZoomBtn":this.preventZoomBtn=e.value.isPrevent;break;case"getToolbarHeight":e.value.obj.toolbarHeight=this.toolbarHeight;break;case"setToolbarHeight":this.toolbarHeight=e.value.height;break;case"setCurrentToolbar":this.currentToolbar=e.value.type;break;case"setSelectedFreehandColor":this.selFhdColor=e.value.color;break;case"getCurrentFilter":e.value.obj.currentFilter=t.currentFilter;break;case"setCurrentFilter":t.currentFilter=e.value.filter;break;case"setInitialAdjustmentValue":t.initialAdjustmentValue=e.value.value;break;case"getCanvasFilter":e.value.obj.canvasFilter=t.canvasFilter;break;case"getDefToolbarItems":e.value.obj.defToolbarItems=this.defToolbarItems;break;case"getPenStroke":this.getPenStroke(e.value.value);break;case"performDefToolbarClickAction":this.performDefTbrClick(e.value.type,e.value.isContextualToolbar,e.value.isDisabledAdjustment,e.value.isDisabledFilter,e.value.isFilterFinetune);break;case"setTempFilterProperties":t.setTempFilterProperties();break;case"refreshSlider":this.refreshSlider();break;case"renderSlider":this.renderSlider(e.value.type);break;case"getCurrAdjustmentValue":t.getCurrAdjustmentValue(e.value.type);break;case"setCurrAdjustmentValue":t.setCurrAdjustmentValue(e.value.type,e.value.value);break;case"refreshShapeDrawing":this.refreshShapeDrawing();break;case"getCropToolbar":e.value.obj.isCropToolbar=t.isCropToolbar;break;case"getPrevCurrSelectionPoint":e.value.obj.prevCurrSelectionPoint=t.prevCurrSelectionPoint;break;case"setPrevCurrSelectionPoint":t.prevCurrSelectionPoint=e.value.point;break;case"updateCropTransformItems":t.updateCropTransformItems();break;case"setEnableDisableUndoRedo":this.preventEnableDisableUr=e.value.isPrevent;break;case"reset":this.reset();break;case"getLocaleText":e.value.obj.value=this.l10n.getConstant(e.value.obj.key);break;case"initResizeToolbar":this.initResizeToolbar();break;case"getFrameToolbar":e.value.obj.bool=this.isFrameToolbar;break;case"callFrameToolbar":this.callFrameToolbar();break;case"resizeClick":this.resizeClick();break;case"frameToolbarClick":this.frameToolbarClick();break;case"performCropTransformClick":this.performCropTransformClick();break;case"duplicateShape":this.duplicateShape(e.value.isPreventUndoRedo,!0)}},e.prototype.updatePrivateVariables=function(){var e=this.parent;this.inMemoryCanvas=e.inMemoryCanvas,e.lowerCanvas&&(this.lowerContext=e.lowerCanvas.getContext("2d")),e.upperCanvas&&(this.upperContext=e.upperCanvas.getContext("2d")),this.inMemoryCanvas&&(this.inMemoryContext=this.inMemoryCanvas.getContext("2d"))},e.prototype.reset=function(){var e=this.parent;this.defToolbarItems=[],this.toolbarHeight=46,e.prevCurrSelectionPoint=null,this.zoomBtnHold=null,this.currToolbar="",e.cxtTbarHeight=null,this.currentToolbar="main",this.selFhdColor="#42a5f5",e.currentFilter="",this.preventZoomBtn=e.isCropToolbar=this.preventEnableDisableUr=this.isFrameToolbar=!1,e.initialAdjustmentValue=e.canvasFilter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",e.tempStraighten=0,e.isStraightening=!1},e.prototype.destroyTopToolbar=function(){var e=this.parent,t=document.getElementById(e.element.id+"_toolbar");this.isToolbar()&&t&&t.classList.contains("e-control")&&sf.base.getComponent(t,"toolbar").destroy()},e.prototype.destroyBottomToolbar=function(){var e=this.parent,t=document.getElementById(e.element.id+"_bottomToolbar");t&&t.classList.contains("e-control")&&sf.base.getComponent(t,"toolbar").destroy()},e.prototype.isToolbar=function(){var e=this.parent;return sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&e.toolbar.length>0||!sf.base.isNullOrUndefined(e.toolbarTemplate)},e.prototype.createToolbar=function(){var e=this,t=this.parent,i=t.element.id;if(sf.base.isNullOrUndefined(t.toolbar)||t.toolbar&&t.toolbar.length>0){t.element.appendChild(t.createElement("div",{id:i+"_toolbarArea",className:"e-toolbar-area"}));var n={cssClass:"e-image-upload",align:"Left",type:"Input",tooltipText:this.l10n.getConstant("Browse"),template:new sf.inputs.Uploader({allowedExtensions:".jpg, .jpeg, .png,.svg",multiple:!1})};sf.base.isNullOrUndefined(this.defToolbarItems)&&(this.defToolbarItems=[]),this.defToolbarItems.push(n);var s=document.getElementById(i+"_toolbarArea"),o=t.createElement("div",{id:i+"_toolbar"});s.appendChild(o);var r=[{cssClass:"e-image-upload",align:"Left",type:"Input",tooltipText:this.l10n.getConstant("Browse"),template:new sf.inputs.Uploader({allowedExtensions:".jpg, .jpeg, .png,.svg",multiple:!1,selected:function(){var n=document.getElementById(i+"_toolbar"),s=document.getElementById(i+"_bottomToolbar");t.disabled||(sf.base.Browser.isDevice?(e.defToolbarItems.length>0&&n&&sf.base.getComponent(n,"toolbar").destroy(),s&&sf.base.getComponent(s,"toolbar").destroy(),e.initMainToolbar(!1,sf.base.Browser.isDevice,null),e.createBottomToolbar()):(e.defToolbarItems.length>0&&n&&sf.base.getComponent(n,"toolbar").destroy(),e.initMainToolbar(!1,!1,null)))}})}];new sf.navigations.Toolbar({items:r,width:"100%",created:function(){t.trigger("toolbarCreated",{toolbarType:"main"})},clicked:this.defToolbarClicked.bind(this)}).appendTo("#"+i+"_toolbar"),this.createLeftToolbarControls();var a=document.getElementById(i+"_toolbar");o&&(this.toolbarHeight=a.scrollHeight)}else this.toolbarHeight=0},e.prototype.createContextualToolbar=function(){var e=this.parent,t=e.element.id;if(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&e.toolbar.length>0){e.element.appendChild(e.createElement("div",{id:t+"_contextualToolbarArea",className:"e-contextual-toolbar-wrapper e-hide",attrs:{style:"position: absolute;"}}));var i=document.getElementById(t+"_contextualToolbarArea"),n=e.createElement("div",{id:t+"_contextualToolbar"});i.appendChild(n)}},e.prototype.createBottomToolbar=function(){var e=this.parent,t=e.element.id;if(e.element.querySelector("#"+t+"_bottomToolbarArea")&&e.element.querySelector("#"+t+"_bottomToolbarArea").remove(),sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&e.toolbar.length>0){if(e.element.appendChild(e.createElement("div",{id:t+"_bottomToolbarArea",className:"e-bottom-toolbar"})),!e.toolbarTemplate){var i=document.getElementById(t+"_bottomToolbarArea"),n=e.createElement("div",{id:t+"_bottomToolbar"});i.appendChild(n)}this.initBottomToolbar()}},e.prototype.createQuickAccessToolbar=function(){var e=this.parent,t=e.element.id;if(e.showQuickAccessToolbar){var i={cssClass:"e-image-upload",align:"Left",type:"Input",tooltipText:this.l10n.getConstant("Browse"),template:new sf.inputs.Uploader({allowedExtensions:".jpg, .jpeg, .png,.svg",multiple:!1})};sf.base.isNullOrUndefined(this.defToolbarItems)&&(this.defToolbarItems=[]),this.defToolbarItems.push(i);var n=document.getElementById(t+"_quickAccessToolbarArea"),s=e.createElement("div",{id:t+"_quickAccessToolbar"});n.appendChild(s),new sf.navigations.Toolbar({clicked:this.defToolbarClicked.bind(this)}).appendTo("#"+t+"_quickAccessToolbar")}},e.prototype.initMainToolbar=function(e,t,i,n,s,o){var r=this,a=this.parent,l=a.element.id;if(this.isToolbar()){var h=this.getLeftToolbarItem(i,n),d=this.getRightToolbarItem(i,o),c=this.getMainToolbarItem(e,s),p=this.getZoomToolbarItem();this.defToolbarItems=t?s?c:h.concat(d):h.concat(c,d,p);var u=new sf.navigations.Toolbar({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){t||r.renderAnnotationBtn(),r.wireZoomBtnEvents(),r.renderSaveBtn(),a.trigger("toolbarCreated",{toolbarType:"main"})}});if(t&&s?u.appendTo("#"+l+"_bottomToolbar"):u.appendTo("#"+l+"_toolbar"),this.createLeftToolbarControls(),this.enableDisableTbrBtn(),this.isToolbar()&&document.getElementById(l+"_toolbar"))sf.base.getComponent(l+"_toolbar","toolbar").refreshOverflow()}},e.prototype.initBottomToolbar=function(){var e=this,t=this.parent,i=t.element.id;if(sf.base.isNullOrUndefined(t.toolbar)||t.toolbar&&t.toolbar.length>0){var n=this.getMainToolbarItem();if(new sf.navigations.Toolbar({items:n,width:"100%",created:function(){e.renderAnnotationBtn(),e.renderCropBtn(),e.renderTransformBtn(),t.trigger("toolbarCreated",{toolbarType:"main"})},clicked:this.defToolbarClicked.bind(this)}).appendTo("#"+i+"_bottomToolbar"),this.defToolbarItems.length>0&&document.getElementById(i+"_bottomToolbar"))sf.base.getComponent(i+"_bottomToolbar","toolbar").refreshOverflow()}},e.prototype.getLeftToolbarItem=function(e,t){var i=this.parent,n=i.element.id,o=[];e&&!t||(o.push({id:n+"_upload",cssClass:"e-image-upload",align:"Left",type:"Input",template:new sf.inputs.Uploader({allowedExtensions:".jpg, .jpeg, .png,.svg",multiple:!1})}),o.push({visible:!1,cssClass:"e-image-position e-btn e-flat",tooltipText:this.l10n.getConstant("Browse"),align:"Left"})),i.allowUndoRedo&&!t&&((sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Undo")>-1)&&o.push({id:n+"_undo",prefixIcon:"e-icons e-undo",cssClass:"top-icon e-undo",tooltipText:this.l10n.getConstant("Undo"),align:"Left"}),(sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Redo")>-1)&&o.push({id:n+"_redo",prefixIcon:"e-icons e-redo",cssClass:"top-icon e-redo",tooltipText:this.l10n.getConstant("Redo"),align:"Left"})),this.preventZoomBtn||(i.zoomSettings.zoomTrigger&s.Toolbar)!==s.Toolbar||t||((sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("ZoomOut")>-1)&&o.push({id:n+"_zoomOut",prefixIcon:"e-icons e-zoom-out",cssClass:"top-icon e-dec-zoom",tooltipText:this.l10n.getConstant("ZoomOut"),align:"Left"}),(sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("ZoomIn")>-1)&&o.push({id:n+"_zoomIn",prefixIcon:"e-icons e-zoom-in",cssClass:"top-icon e-inc-zoom",tooltipText:this.l10n.getConstant("ZoomIn"),align:"Left"}));for(var r=this.processToolbar("left"),a=0,l=r.length;a<l;a++)o.push(r[a]);return o},e.prototype.getRightToolbarItem=function(e,t){var i=this.parent,n=i.element.id,s=[];e&&(s.push({id:n+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),s.push({id:n+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),!t&&sf.base.Browser.isDevice||!(sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Reset")>-1)||s.push({id:n+"_reset",prefixIcon:"e-icons e-btn-reset",cssClass:"top-icon e-img-reset",tooltipText:this.l10n.getConstant("Reset"),align:"Right"}),e||(sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Save")>-1)&&s.push({id:n+"_save",prefixIcon:"e-icons e-btn-save",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Save"),align:"Right",template:'<button id="'+n+'_saveBtn"></button>'});for(var o=this.processToolbar("right"),r=0,a=o.length;r<a;r++)s.push(o[r]);return s},e.prototype.getMainToolbarItem=function(e,t){var i=this.parent,n=i.element.id,s=[];t?((sf.base.isNullOrUndefined(i.toolbar)||!sf.base.isNullOrUndefined(i.toolbar)&&i.toolbar.indexOf("None")>-1)&&s.push({id:n+"_none",prefixIcon:"e-icons e-frame-none",cssClass:"top-icon e-frame-none",tooltipText:this.l10n.getConstant("None"),align:"Center"}),(sf.base.isNullOrUndefined(i.toolbar)||!sf.base.isNullOrUndefined(i.toolbar)&&i.toolbar.indexOf("Mat")>-1)&&s.push({id:n+"_mat",prefixIcon:"e-icons e-frame-mat",cssClass:"top-icon e-frame-mat",tooltipText:this.l10n.getConstant("Mat"),align:"Center"}),(sf.base.isNullOrUndefined(i.toolbar)||!sf.base.isNullOrUndefined(i.toolbar)&&i.toolbar.indexOf("Bevel")>-1)&&s.push({id:n+"_bevel",prefixIcon:"e-icons e-frame-bevel",cssClass:"top-icon e-frame-bevel",tooltipText:this.l10n.getConstant("Bevel"),align:"Center"}),(sf.base.isNullOrUndefined(i.toolbar)||!sf.base.isNullOrUndefined(i.toolbar)&&i.toolbar.indexOf("Line")>-1)&&s.push({id:n+"_line",prefixIcon:"e-icons e-frame-line",cssClass:"top-icon e-frame-line",tooltipText:this.l10n.getConstant("Line"),align:"Center"}),(sf.base.isNullOrUndefined(i.toolbar)||!sf.base.isNullOrUndefined(i.toolbar)&&i.toolbar.indexOf("Inset")>-1)&&s.push({id:n+"_inset",prefixIcon:"e-icons e-frame-inset",cssClass:"top-icon e-frame-inset",tooltipText:this.l10n.getConstant("Inset"),align:"Center"}),(sf.base.isNullOrUndefined(i.toolbar)||!sf.base.isNullOrUndefined(i.toolbar)&&i.toolbar.indexOf("Hook")>-1)&&s.push({id:n+"_hook",prefixIcon:"e-icons e-frame-hook",cssClass:"top-icon e-frame-hook",tooltipText:this.l10n.getConstant("Hook"),align:"Center"})):((sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Crop")>-1)&&s.push({id:n+"_cropTransform",prefixIcon:"e-icons e-crop",cssClass:"top-icon e-crop",tooltipText:this.l10n.getConstant("CropAndTransform"),align:"Center"}),(sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Annotate")>-1)&&s.push({id:n+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+n+'_annotationBtn"></button>'}),(sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Finetune")>-1)&&s.push({id:n+"_adjustment",prefixIcon:"e-icons e-adjustment",cssClass:"top-icon e-adjustment",tooltipText:this.l10n.getConstant("Finetune"),align:"Center"}),(sf.base.isNullOrUndefined(i.toolbar)||i.toolbar&&i.toolbar.indexOf("Filter")>-1)&&s.push({id:n+"_filter",prefixIcon:"e-icons e-filters",cssClass:"top-icon e-filters",tooltipText:this.l10n.getConstant("Filter"),align:"Center"}),(sf.base.isNullOrUndefined(i.toolbar)||!sf.base.isNullOrUndefined(i.toolbar)&&i.toolbar.indexOf("Frame")>-1)&&s.push({id:n+"_frame",prefixIcon:"e-icons e-border-frame",cssClass:"top-icon e-border-frame",tooltipText:this.l10n.getConstant("Frame"),align:"Center"}),(sf.base.isNullOrUndefined(i.toolbar)||!sf.base.isNullOrUndefined(i.toolbar)&&i.toolbar.indexOf("Resize")>-1)&&s.push({id:n+"_resize",prefixIcon:"e-icons e-resize",cssClass:"top-icon e-resize",tooltipText:this.l10n.getConstant("Resize"),align:"Center"}));for(var o=this.processToolbar("center"),r=0,a=o.length;r<a;r++)s.push(o[r]);return e&&(s.push({id:n+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),s.push({id:n+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),s},e.prototype.getZoomToolbarItem=function(){return[]},e.prototype.updateContextualToolbar=function(e,t,i){var n=this.parent,s=n.element.id,o=n.element.querySelector("#"+s+"_toolbarArea"),r=n.element.querySelector("#"+s+"_contextualToolbarArea");if(r.classList.remove("e-hide"),r.style.left=o.offsetLeft+"px","filter"===e){var a=document.getElementById(s+"_toolbar");a&&this.defToolbarItems.length>0&&sf.base.getComponent(a,"toolbar").destroy(),sf.base.Browser.isDevice?this.initMainToolbar(!1,!0,!0):this.initMainToolbar(!0,null,null),this.refreshSlider(),this.initFilterToolbarItem()}else{(d=document.querySelector("#"+s+"_contextualToolbar")).classList.contains("e-control")&&sf.base.getComponent(d,"toolbar").destroy(),this.refreshSlider(),"frame"===e?this.initFrameToolbarItem():this.renderSlider(t,i)}if(sf.base.isBlazor()||(n.toolbarTemplate?this.toolbarHeight=n.element.querySelector("#"+n.element.id+"_toolbarArea").offsetHeight:n.element.querySelector("#"+n.element.id+"_toolbar")&&(this.toolbarHeight=n.element.querySelector("#"+n.element.id+"_toolbar").offsetHeight),n.toolbarHeight=this.toolbarHeight),sf.base.Browser.isDevice){var l=r.offsetHeight+1,h=n.element.querySelector("#"+s+"_customizeWrapper");this.isFrameToolbar&&h&&(l=h.offsetHeight+2);var d,c=n.element.querySelector("#"+s+"_canvasWrapper").offsetHeight;if(r.style.top=this.toolbarHeight+c-l+"px","straighten"===t)n.isStraightening=!0,"absolute"===(d=n.element.querySelector("#"+s+"_contextualToolbarArea")).style.position&&(d.style.position="",n.element.insertBefore(d,n.element.querySelector("#"+s+"_bottomToolbarArea")),n.update(),i&&n.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:this.getCropTextContent(document.getElementById(s+"_cropBtn")).toLowerCase(),startX:null,startY:null,width:null,height:null}}))}else r.style.top=this.toolbarHeight+"px"},e.prototype.processToolbar=function(e){var t=this.parent,n=[];if(t.toolbar)for(var s=0,o=t.toolbar.length;s<o;s++)"object"===i(t.toolbar[s])&&(sf.base.isNullOrUndefined(t.toolbar[s].align)?"left"===e&&n.push(t.toolbar[s]):t.toolbar[s].align.toLowerCase()===e&&n.push(t.toolbar[s]));return n},e.prototype.processSubToolbar=function(e){var t=[];if(e)for(var n=0,s=e.length;n<s;n++)"object"===i(e[n])&&(e[n].align="Center",t.push(e[n]));return t},e.prototype.wireZoomBtnEvents=function(){var e=document.querySelector("#"+this.parent.element.id+"_zoomIn"),t=document.querySelector("#"+this.parent.element.id+"_zoomOut");e&&(e.addEventListener("mousedown",this.zoomInBtnMouseDownHandler.bind(this)),e.addEventListener("mouseup",this.zoomBtnMouseUpHandler.bind(this)),e.addEventListener("click",this.zoomInBtnClickHandler.bind(this)),e.addEventListener("touchstart",this.zoomInBtnClickHandler.bind(this))),t&&(t.addEventListener("mousedown",this.zoomOutBtnMouseDownHandler.bind(this)),t.addEventListener("mouseup",this.zoomBtnMouseUpHandler.bind(this)),t.addEventListener("click",this.zoomOutBtnClickHandler.bind(this)),e.addEventListener("touchstart",this.zoomInBtnClickHandler.bind(this)))},e.prototype.widthPress=function(e){109!==e.keyCode||e.preventDefault()},e.prototype.heightPress=function(e){109!==e.keyCode||e.preventDefault()},e.prototype.widthAspectRatio=function(e){if(109!==e.keyCode){var t=this.parent,i=t.element.querySelector("#"+t.element.id+"_resizeHeight"),n=t.element.querySelector("#"+t.element.id+"_resizeWidth"),s=t.element.querySelector("#"+t.element.id+"_aspectratio"),o=t.img.destWidth,r=t.img.destHeight,a=parseFloat(i.value)/(r/o),l=a%1>=.5||a%1<=-.5?Math.round(a):a<0?Math.ceil(a):Math.floor(a),h=sf.base.getComponent(n,"numerictextbox"),d=sf.base.getComponent(n,"numerictextbox");s&&(null==l||isNaN(l)?sf.base.isNullOrUndefined(h.value)?(h.placeholder="0 px",n.placeholder="0 px",sf.base.isNullOrUndefined(d.value)&&!sf.base.isNullOrUndefined(d.placeholder)&&(h.placeholder=""+t.img.srcWidth,n.placeholder=""+t.img.srcWidth)):(h.value=0,n.value="0 px"):sf.base.isNullOrUndefined(h.value)?(h.placeholder=l+" px",n.placeholder=l.toString()+" px"):(h.value=l,n.value=l.toString()+" px"))}},e.prototype.heightAspectRatio=function(e){if(109!==e.keyCode){var t=this.parent,i=t.element.id,n=t.element.querySelector("#"+i+"_resizeHeight"),s=t.element.querySelector("#"+i+"_resizeWidth"),o=t.element.querySelector("#"+i+"_aspectratio"),r=t.img.destWidth,a=t.img.destHeight,l=parseFloat(s.value)/(r/a),h=l%1>=.5||l%1<=-.5?Math.round(l):l<0?Math.ceil(l):Math.floor(l),d=sf.base.getComponent(n,"numerictextbox"),c=sf.base.getComponent(s,"numerictextbox");o&&(isNaN(h)?sf.base.isNullOrUndefined(d.value)?(d.placeholder="0 px",n.placeholder="0 px",sf.base.isNullOrUndefined(c.value)&&!sf.base.isNullOrUndefined(c.placeholder)&&(d.placeholder=""+t.img.srcHeight,n.placeholder=""+t.img.srcHeight)):(d.value=0,n.value="0 px"):sf.base.isNullOrUndefined(d.value)?(d.placeholder=h+" px",n.placeholder=h.toString()+" px"):(d.value=h,n.value=h.toString()+" px"))}},e.prototype.getResizeToolbarItem=function(){var e=this.parent,t=e.element.id,i=!(!e.aspectWidth||!e.aspectHeight),n=this.parent.transform.degree%90==0&&this.parent.transform.degree%180!=0?Math.ceil(this.parent.img.srcHeight).toString():Math.ceil(this.parent.img.srcWidth).toString(),s=this.parent.transform.degree%90==0&&this.parent.transform.degree%180!=0?Math.ceil(this.parent.img.srcWidth).toString():Math.ceil(this.parent.img.srcHeight).toString(),o=[],r=document.createElement("span");r.innerHTML=this.l10n.getConstant("W"),o.push({id:t+"_width",cssClass:"e-ie-resize-width",template:r,align:"Center"}),o.push({id:t+"_resizeWidth",prefixIcon:"e-icons e-anti-clock-wise",tooltipText:this.l10n.getConstant("Width"),align:"Center",type:"Input",template:new sf.inputs.NumericTextBox({width:75,htmlAttributes:{maxLength:"4"},showSpinButton:!1,value:i?e.aspectWidth:null,placeholder:i?null:n,format:"###.## px"})});var a=document.createElement("span");return a.innerHTML=this.l10n.getConstant("H"),o.push({id:t+"_height",cssClass:"e-ie-resize-height",template:a,align:"Center"}),o.push({id:t+"_resizeHeight",prefixIcon:"e-icons e-clock-wise",tooltipText:this.l10n.getConstant("Height"),align:"Center",type:"Input",template:new sf.inputs.NumericTextBox({width:75,htmlAttributes:{maxLength:"4"},showSpinButton:!1,value:i?e.aspectHeight:null,placeholder:i?null:s,format:"###.## px"})}),this.isAspectRatio?(o.push({id:t+"_nonaspectratio",prefixIcon:"e-icons e-unlock",align:"Center",tooltipText:this.l10n.getConstant("AspectRatio"),type:"Button"}),this.isAspectRatio=!1):(o.push({id:t+"_aspectratio",prefixIcon:"e-icons e-lock",align:"Center",tooltipText:this.l10n.getConstant("AspectRatio"),type:"Button"}),this.isAspectRatio=!0),sf.base.Browser.isDevice||(o.push({id:t+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),o.push({id:t+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),o},e.prototype.initResizeToolbar=function(){var e=this,t=this.parent,i=t.element.id,n=this.getLeftToolbarItem(!1,!0),s=this.getRightToolbarItem(),o=this.getResizeToolbarItem(),r=this.getZoomToolbarItem();sf.base.Browser.isDevice?this.defToolbarItems=o:this.defToolbarItems=n.concat(r,o,s);var a=new sf.navigations.Toolbar({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e.wireResizeBtnEvents(),sf.base.Browser.isDevice||e.renderSaveBtn(),t.trigger("toolbarCreated",{toolbarType:"shapes"}),sf.base.Browser.isDevice?e.defToolbarItems.length>0&&!sf.base.isNullOrUndefined(document.getElementById(i+"_bottomToolbar"))&&a.refreshOverflow():(e.createLeftToolbarControls(),e.defToolbarItems.length>0&&!sf.base.isNullOrUndefined(document.getElementById(i+"_toolbar"))&&a.refreshOverflow())}});sf.base.Browser.isDevice?a.appendTo("#"+i+"_bottomToolbar"):a.appendTo("#"+i+"_toolbar"),t.isResize=!1,this.enableDisableTbrBtn(),t.isResize=!0,t.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},e.prototype.wireResizeBtnEvents=function(){var e=this.parent,t=e.element.id,i=e.element.querySelector("#"+t+"_resizeHeight"),n=e.element.querySelector("#"+t+"_resizeWidth");sf.base.isNullOrUndefined(i)||(i.addEventListener("keydown",this.widthPress.bind(this)),n.addEventListener("keyup",this.heightAspectRatio.bind(this))),sf.base.isNullOrUndefined(n)||(n.addEventListener("keydown",this.heightPress.bind(this)),i.addEventListener("keyup",this.widthAspectRatio.bind(this)))},e.prototype.enableDisableTbrBtn=function(){var e=this.parent,t=e.element.id;if(!this.preventEnableDisableUr){var i={appliedUndoRedoColl:[]};e.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:i}});var n={undoRedoStep:null};e.notify("undo-redo",{prop:"getUndoRedoStep",value:{obj:n}});var s=e.element.querySelector("#"+t+"_undo");s&&0===n.undoRedoStep?(s.classList.add("e-disabled"),s.parentElement.classList.add("e-overlay")):s&&n.undoRedoStep>0&&(s.classList.remove("e-disabled"),s.parentElement.classList.remove("e-overlay"));var o=e.element.querySelector("#"+t+"_redo");o&&n.undoRedoStep===i.appliedUndoRedoColl.length?(o.classList.add("e-disabled"),o.parentElement.classList.add("e-overlay")):(o&&0===n.undoRedoStep&&i.appliedUndoRedoColl.length>0||o&&n.undoRedoStep>0)&&(o.classList.remove("e-disabled"),o.parentElement.classList.remove("e-overlay"))}var r=document.querySelector("#"+t+"_zoomIn");r&&e.zoomSettings.zoomFactor>=e.zoomSettings.maxZoomFactor?(r.classList.add("e-disabled"),r.parentElement.classList.add("e-overlay")):r&&(r.classList.remove("e-disabled"),r.parentElement.classList.remove("e-overlay"));var a=document.querySelector("#"+t+"_zoomOut");a&&e.zoomSettings.zoomFactor<=e.zoomSettings.minZoomFactor?(a.classList.add("e-disabled"),a.parentElement.classList.add("e-overlay")):a&&(a.classList.remove("e-disabled"),a.parentElement.classList.remove("e-overlay"));var l=document.querySelector("#"+t+"_frame");l&&(e.currSelectionPoint&&"crop-circle"===e.currSelectionPoint.shape||e.isCircleCrop)?l.classList.add("e-disabled"):l&&l.classList.remove("e-disabled")},e.prototype.createLeftToolbarControls=function(){var e=this.parent,t=e.element.id;if(void 0!==this.defToolbarItems&&this.defToolbarItems.length>0&&document.getElementById(t+"_toolbar")){var i=document.getElementById(t+"_toolbar").querySelector(".e-image-upload");if(i){var n=i.getElementsByTagName("input")[0],s=i.getElementsByTagName("button")[0];s.className="e-tbar-btn e-tbtn-txt top-icon",s.innerHTML="",s.appendChild(e.createElement("span",{className:"e-btn-icon e-icons e-upload-icon e-icon-left"})),n.onchange=this.fileSelect.bind(this,n)}}},e.prototype.fileSelect=function(e,t){var i=e.files[0].type.split("/")[1];["png","jpg","jpeg","svg","svg+xml"].indexOf(i)>-1?this.parent.notify("draw",{prop:"fileSelect",value:{inputElement:e,args:t}}):this.parent.showDialogPopup()},e.prototype.renderAnnotationBtn=function(e){var t=this,i=this.parent,n=!1,s=[],o=i.element.id,r=["Ellipse","Arrow","Line","Rectangle","Pen","Path","Text"];if(i.toolbar)for(var a=0;a<r.length;a++)if(-1!==i.toolbar.indexOf(r[a])){n=!0;break}(sf.base.isNullOrUndefined(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("Pen")>-1)&&s.push({text:this.l10n.getConstant("Pen"),id:"pen",iconCss:"e-icons e-free-pen"}),(sf.base.isNullOrUndefined(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("Line")>-1)&&s.push({text:this.l10n.getConstant("Line"),id:"line",iconCss:"e-icons e-line"}),(sf.base.isNullOrUndefined(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("Rectangle")>-1)&&s.push({text:this.l10n.getConstant("Rectangle"),id:"rectangle",iconCss:"e-icons e-rectangle"}),(sf.base.isNullOrUndefined(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("Ellipse")>-1)&&s.push({text:this.l10n.getConstant("Ellipse"),id:"ellipse",iconCss:"e-icons e-circle"}),(sf.base.isNullOrUndefined(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("Arrow")>-1)&&s.push({text:this.l10n.getConstant("Arrow"),id:"arrow",iconCss:"e-icons e-arrow-right-up"}),(sf.base.isNullOrUndefined(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("Path")>-1)&&s.push({text:this.l10n.getConstant("Path"),id:"path",iconCss:"e-icons e-critical-path"}),(sf.base.isNullOrUndefined(i.toolbar)||!n||i.toolbar&&i.toolbar.indexOf("Text")>-1)&&s.push({text:this.l10n.getConstant("Text"),id:"text",iconCss:"e-icons e-add-text"}),(sf.base.isNullOrUndefined(i.toolbar)||!sf.base.isNullOrUndefined(i.toolbar)&&i.toolbar.indexOf("Image")>-1)&&s.push({text:this.l10n.getConstant("Image"),id:"image",iconCss:"e-icons e-image"});var l={freehandDrawSelectedId:null};i.notify("freehand-draw",{prop:"getFreehandDrawSelectedId",onPropertyChange:!1,value:{obj:l}});var h=document.querySelector("#"+o+"_duplicate"),d=document.querySelector("#"+o+"_remove"),c=document.querySelector("#"+o+"_editText");0===i.activeObj.activePoint.width&&0===i.activeObj.activePoint.height&&(sf.base.isNullOrUndefined(i.activeObj.pointColl)||i.activeObj.pointColl&&0===i.activeObj.pointColl.length)&&sf.base.isNullOrUndefined(l.freehandDrawSelectedId)?(h&&h.classList.add("e-disabled"),d&&d.classList.add("e-disabled"),c&&c.classList.add("e-disabled")):(h&&h.classList.remove("e-disabled"),d&&d.classList.remove("e-disabled"),c&&c.classList.remove("e-disabled"));var p=e?this.getCurrentShapeIcon(i.activeObj.shape):"e-annotation",u=new sf.splitbuttons.DropDownButton({items:s,iconCss:"e-icons "+p,cssClass:"e-image-popup",open:function(e){i.currObjType.isFiltered&&(i.okBtn(),i.element.querySelector("#"+o+"_annotationBtn").click()),sf.base.Browser.isDevice&&(e.element.parentElement.style.top=u.element.getBoundingClientRect().top-e.element.parentElement.offsetHeight+"px"),i.activeObj.shape?document.getElementById(i.activeObj.shape).classList.add("e-selected"):i.togglePen&&document.getElementById("pen").classList.add("e-selected")},select:function(e){i.okBtn();var n,s=!1;void 0!==i.activeObj.shape&&(n=i.activeObj.shape.split("-")),(void 0===n&&i.currObjType.isCustomCrop||void 0!==n&&"crop"===n[0])&&(s=!0),i.currObjType.isCustomCrop=!1,(s||i.togglePan)&&(i.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),t.refreshToolbar("main"));var r={currentFreehandDrawIndex:null};switch(i.notify("freehand-draw",{prop:"getCurrentFreehandDrawIndex",value:{obj:r}}),u.iconCss="e-icons "+t.getCurrentShapeIcon(e.item.id),e.item.id){case"pen":i.notify("draw",{prop:"setTempFreehandCounter",value:{tempFreehandCounter:i.freehandCounter}}),i.notify("draw",{prop:"setTempCurrentFreehandDrawIndex",value:{tempCurrentFreehandDrawIndex:r.currentFreehandDrawIndex}}),t.currentToolbar="pen",i.freeHandDraw(!0);break;case"text":t.currentToolbar="text",i.notify("shape",{prop:"draw-shape-text"});break;case"image":t.currentToolbar="shapes",i.element.querySelector("#"+o+"_fileUpload").click();break;default:t.currentToolbar="shapes",t.setInitialShapeSettings(e),i.notify("selection",{prop:"annotate",value:{shape:e.item.id}}),i.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"shapes",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})}t.updateToolbarItems();var a=i.togglePen;"pen"===e.item.id&&(i.togglePen=!1),i.notify("draw",{prop:"redrawDownScale"}),i.togglePen=a}});u.appendTo("#"+o+"_annotationBtn")},e.prototype.renderStraightenSlider=function(){var e=this.parent,t=e.element.id;if((sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Straightening")>-1)&&e.element.querySelector("#"+t+"_straightenSlider")){var i=this.createSlider(-45,45,e.cropObj.straighten,"straighten");i.appendTo("#"+t+"_straightenSlider");var n=i.element.querySelector(".e-handle");n&&!sf.base.Browser.isDevice&&(n.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),n.addEventListener("touchstart",(function(e){e.preventDefault(),e.stopPropagation()})))}},e.prototype.renderCropBtn=function(){var e,t,i=this,n=this.parent,s=[],o=!1,r=["CustomSelection","CircleSelection","SquareSelection","RatioSelection"];if(n.toolbar)for(var a=0;a<r.length;a++)if(-1!==n.toolbar.indexOf(r[a])){o=!0;break}(sf.base.isNullOrUndefined(n.toolbar)||!o||n.toolbar&&n.toolbar.indexOf("CustomSelection")>-1)&&s.push({text:this.l10n.getConstant("Custom"),id:"custom",iconCss:"e-icons e-custom"}),(sf.base.isNullOrUndefined(n.toolbar)||!o||n.toolbar&&n.toolbar.indexOf("CircleSelection")>-1)&&s.push({text:this.l10n.getConstant("Circle"),id:"circle",iconCss:"e-icons e-circle"}),(sf.base.isNullOrUndefined(n.toolbar)||!o||n.toolbar&&n.toolbar.indexOf("SquareSelection")>-1)&&s.push({text:this.l10n.getConstant("Square"),id:"square",iconCss:"e-icons e-square"}),(sf.base.isNullOrUndefined(n.toolbar)||!o||n.toolbar&&n.toolbar.indexOf("RatioSelection")>-1)&&(s.push({text:"2:3",id:"2:3",iconCss:"e-icons e-custom-f"}),s.push({text:"3:2",id:"3:2",iconCss:"e-icons e-custom-a"}),s.push({text:"3:4",id:"3:4",iconCss:"e-icons e-custom-g"}),s.push({text:"4:3",id:"4:3",iconCss:"e-icons e-custom-b"}),s.push({text:"4:5",id:"4:5",iconCss:"e-icons e-custom-h"}),s.push({text:"5:4",id:"5:4",iconCss:"e-icons e-custom-c"}),s.push({text:"5:7",id:"5:7",iconCss:"e-icons e-custom-i"}),s.push({text:"7:5",id:"7:5",iconCss:"e-icons e-custom-d"}),s.push({text:"9:16",id:"9:16",iconCss:"e-icons e-custom-j"}),s.push({text:"16:9",id:"16:9",iconCss:"e-icons e-custom-e"})),n.activeObj.shape?(e=this.getCurrentShapeIcon(n.activeObj.shape),t=n.activeObj.shape):n.currSelectionPoint?(e=this.getCurrentShapeIcon(n.currSelectionPoint.shape),t=n.currSelectionPoint.shape):(e=s[0].iconCss,t=s[0].id);var l=new sf.splitbuttons.DropDownButton({open:function(e){if(n.togglePan&&i.cancelPan(),sf.base.Browser.isDevice&&(e.element.parentElement.style.top=l.element.getBoundingClientRect().top-e.element.parentElement.offsetHeight+"px"),n.activeObj.shape&&n.activeObj.shape.split("-").length>1){var t=document.getElementById(n.activeObj.shape.split("-")[1]);t.classList.add("e-selected"),t.focus()}n.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},items:s,select:function(e){i.cropSelect(e),l.iconCss="e-icons "+i.getCurrentShapeIcon("crop-"+e.item.id),l.content=sf.base.Browser.isDevice?null:n.toPascalCase(e.item.id)},iconCss:"e-icons "+e,cssClass:"e-image-popup e-ie-crop-ddb-popup",content:sf.base.Browser.isDevice?null:n.toPascalCase(t.replace("crop-",""))});l.appendTo("#"+n.element.id+"_cropBtn")},e.prototype.renderTransformBtn=function(){var e=this.parent,t=[];(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&e.toolbar.indexOf("RotateLeft")>-1)&&t.push({text:this.l10n.getConstant("RotateLeft"),id:"rotateleft",iconCss:"e-icons e-anti-clock-wise"}),(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&e.toolbar.indexOf("RotateRight")>-1)&&t.push({text:this.l10n.getConstant("RotateRight"),id:"rotateright",iconCss:"e-icons e-clock-wise"}),(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&e.toolbar.indexOf("FlipHorizontal")>-1)&&t.push({text:this.l10n.getConstant("HorizontalFlip"),id:"horizontalflip",iconCss:"e-icons e-horizontal-flip"}),(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&e.toolbar.indexOf("FlipVertical")>-1)&&t.push({text:this.l10n.getConstant("VerticalFlip"),id:"verticalflip",iconCss:"e-icons e-vertical-flip"});var i=new sf.splitbuttons.DropDownButton({open:function(e){if(sf.base.Browser.isDevice){var t=e.element.parentElement,n=t.offsetHeight;t.style.display="none",t.style.top=i.element.getBoundingClientRect().top-n+"px",t.style.display="block"}},items:t,select:e.transformSelect.bind(this),iconCss:"e-icons e-transform",cssClass:"e-image-popup"});i.appendTo("#"+e.element.id+"_transformBtn")},e.prototype.renderSaveBtn=function(){var e=this.parent,t=e.element.id;document.getElementById(t+"_saveBtn")&&new sf.splitbuttons.DropDownButton({items:[{text:"JPEG",id:"jpeg"},{text:"PNG",id:"png"},{text:"SVG",id:"svg"}],cssClass:"e-caret-hide e-image-popup",iconCss:"e-icons e-save",select:function(t){e.export(t.item.text),e.isChangesSaved=!0,e.notify("draw",{prop:"redrawDownScale"})}}).appendTo("#"+t+"_saveBtn")},e.prototype.getCropTransformToolbarItem=function(){var e=this.parent,t=e.element.id,i=[];if(i.push({id:t+"_crop",tooltipText:this.l10n.getConstant("CropSelection"),align:"Center",template:'<button id="'+t+'_cropBtn"></button>'}),i.push({align:"Center",type:"Separator"}),(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&(e.toolbar.indexOf("Transform")>-1||e.toolbar.indexOf("RotateLeft")>-1))&&i.push({id:t+"_rotateLeft",prefixIcon:"e-icons e-anti-clock-wise",tooltipText:this.l10n.getConstant("RotateLeft"),align:"Center"}),(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&(e.toolbar.indexOf("Transform")>-1||e.toolbar.indexOf("RotateRight")>-1))&&i.push({id:t+"_rotateRight",prefixIcon:"e-icons e-clock-wise",tooltipText:this.l10n.getConstant("RotateRight"),align:"Center"}),i.length>2&&i.push({align:"Center",type:"Separator"}),(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&(e.toolbar.indexOf("Transform")>-1||e.toolbar.indexOf("HorizontalFlip")>-1))&&i.push({id:t+"_horizontalFlip",prefixIcon:"e-icons e-horizontal-flip",tooltipText:this.l10n.getConstant("HorizontalFlip"),align:"Center"}),(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&(e.toolbar.indexOf("Transform")>-1||e.toolbar.indexOf("VerticalFlip")>-1))&&i.push({id:t+"_verticalFlip",prefixIcon:"e-icons e-vertical-flip",tooltipText:this.l10n.getConstant("VerticalFlip"),align:"Center"}),(sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&e.toolbar.indexOf("Straightening")>-1)&&!sf.base.Browser.isDevice&&(i.push({align:"Center",type:"Separator"}),sf.base.isNullOrUndefined(e.toolbar)||e.toolbar&&(e.toolbar.indexOf("Straighten")>-1||e.toolbar.indexOf("Straighten")>-1))){var n=document.createElement("span");n.innerHTML=this.l10n.getConstant("Straighten"),i.push({id:t+"_straightenSpan",cssClass:"e-ie-straighten-span",template:n,align:"Center"}),i.push({id:t+"_straighten",cssClass:"top-icon e-straighten",tooltipText:this.l10n.getConstant("Straighten"),align:"Center",type:"Input",template:'<div id="'+t+'_straightenSlider"></div>'});var s=document.createElement("span");s.innerHTML=e.transform.straighten.toString()+"&#176",i.push({id:t+"_straightenSpan",cssClass:"e-ie-straighten-value-span",template:s,align:"Center"})}return sf.base.Browser.isDevice||(i.push({id:t+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),i.push({id:t+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),i},e.prototype.getShapesToolbarItem=function(e){var t=this.parent,i=t.element.id,n=[];(sf.base.isNullOrUndefined(t.toolbar)||t.toolbar)&&n.push({id:i+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+i+'_annotationBtn"></button>'}),e.indexOf("fillColor")>-1&&n.push({prefixIcon:"e-icons e-copy",id:i+"_fillcolor",cssClass:"top-icon e-fill",tooltipText:this.l10n.getConstant("FillColor"),align:"Center",type:"Input",template:'<button id="'+i+'_fillColorBtn"></button>'}),e.indexOf("strokeColor")>-1&&n.push({prefixIcon:"e-icons e-copy",id:i+"_strokecolor",cssClass:"top-icon e-stroke",tooltipText:this.l10n.getConstant("StrokeColor"),align:"Center",type:"Input",template:'<button id="'+i+'_borderColorBtn"></button>'}),e.indexOf("strokeWidth")>-1&&n.push({id:i+"_strokeWidth",cssClass:"top-icon e-size",tooltipText:"Stroke Width",align:"Center",type:"Input",template:'<button id="'+i+'_borderWidthBtn"></button>'}),e.indexOf("start")>-1&&n.push({id:i+"_start",cssClass:"top-icon e-size",tooltipText:"Start",align:"Center",type:"Input",template:'<button id="'+i+'_startBtn"></button>'}),e.indexOf("end")>-1&&n.push({id:i+"_end",cssClass:"top-icon e-size",tooltipText:"End",align:"Center",type:"Input",template:'<button id="'+i+'_endBtn"></button>'}),e.indexOf("flip")>-1&&(n.push({id:i+"_rotLeft",prefixIcon:"e-anti-clock-wise",tooltipText:this.l10n.getConstant("RotateLeft"),align:"Center"}),n.push({id:i+"_rotRight",prefixIcon:"e-clock-wise",tooltipText:this.l10n.getConstant("RotateRight"),align:"Center"}),n.push({id:i+"_hFlip",prefixIcon:"e-horizontal-flip",tooltipText:this.l10n.getConstant("HorizontalFlip"),align:"Center"}),n.push({id:i+"_vFlip",prefixIcon:"e-vertical-flip",tooltipText:this.l10n.getConstant("VerticalFlip"),align:"Center"})),e.indexOf("transparency")>-1&&(n.push({align:"Center",type:"Separator"}),n.push({id:i+"_transparency",prefixIcon:"e-opacity",tooltipText:this.l10n.getConstant("Opacity"),align:"Center"})),n.push({align:"Center",type:"Separator"}),e.indexOf("duplicate")>-1&&n.push({id:i+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Center"}),e.indexOf("remove")>-1&&n.push({id:i+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center"}),e.indexOf("text")>-1&&n.push({id:i+"_editText",prefixIcon:"e-icons e-annotation-edit",cssClass:"top-icon e-annotation-edit",tooltipText:this.l10n.getConstant("EditText"),align:"Center"});for(var s=this.processSubToolbar(e),o=0,r=s.length;o<r;o++)n.push(s[o]);if(!sf.base.Browser.isDevice){var a={shape:null};t.notify("selection",{prop:"getCurrentDrawingShape",value:{obj:a}}),"path"!==a.shape&&(n.push({id:i+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),n.push({id:i+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"}))}return n},e.prototype.initCropTransformToolbar=function(){var e=this,t=this.parent,i=t.element.id,n=this.getLeftToolbarItem(),s=this.getRightToolbarItem(),o=this.getCropTransformToolbarItem(),r=this.getZoomToolbarItem();sf.base.Browser.isDevice?this.defToolbarItems=o:this.defToolbarItems=n.concat(r,o,s);var a=new sf.navigations.Toolbar({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e.renderCropBtn(),e.renderStraightenSlider(),e.wireZoomBtnEvents(),sf.base.Browser.isDevice||e.renderSaveBtn(),t.trigger("toolbarCreated",{toolbarType:"shapes"}),sf.base.Browser.isDevice?e.defToolbarItems.length>0&&document.getElementById(i+"_bottomToolbar")&&(a.refreshOverflow(),a.refreshOverflow(),a.refreshOverflow()):(e.createLeftToolbarControls(),e.defToolbarItems.length>0&&document.getElementById(i+"_toolbar")&&a.refreshOverflow()),document.getElementById(i+"_cropBtn")&&(sf.base.Browser.isDevice||t.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:e.getCropTextContent(document.getElementById(i+"_cropBtn")).toLowerCase(),startX:null,startY:null,width:null,height:null}}))}});sf.base.Browser.isDevice?a.appendTo("#"+i+"_bottomToolbar"):a.appendTo("#"+i+"_toolbar");var l=t.element.querySelector("#"+i+"_straightenSlider");(sf.base.isNullOrUndefined(t.toolbar)||t.toolbar&&t.toolbar.indexOf("Straightening")>-1)&&l&&l.parentElement.scrollHeight>this.toolbarHeight&&(this.toolbarHeight=t.toolbarHeight=l.parentElement.scrollHeight),a.refreshOverflow(),this.enableDisableTbrBtn(),t.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},e.prototype.getCropTextContent=function(e){if(e){var t={"e-custom":"Custom","e-circle":"Circle","e-square":"Square","e-custom-a":"3:2","e-custom-b":"4:3","e-custom-c":"5:4","e-custom-d":"7:5","e-custom-e":"16:9","e-custom-f":"2:3","e-custom-g":"3:4","e-custom-h":"4:5","e-custom-i":"5:7","e-custom-j":"9:16"},i=e.children[0].classList;for(var n in t)if(i.contains(n))return t[n]}return""},e.prototype.getCurrentShapeIcon=function(e){return{rectangle:"e-rectangle",ellipse:"e-circle",line:"e-line",arrow:"e-arrow-right-up",path:"e-critical-path",text:"e-add-text",image:"e-image",pen:"e-free-pen","crop-custom":"e-custom","crop-circle":"e-circle","crop-square":"e-square","crop-3:2":"e-custom-a","crop-4:3":"e-custom-b","crop-5:4":"e-custom-c","crop-7:5":"e-custom-d","crop-16:9":"e-custom-e","crop-2:3":"e-custom-f","crop-3:4":"e-custom-g","crop-4:5":"e-custom-h","crop-5:7":"e-custom-i","crop-9:16":"e-custom-j"}[e]||"e-free-pen"},e.prototype.initShapesToolbarItem=function(e){var t=this,i=this.parent,n=i.element.id,s=this.getLeftToolbarItem(),o=this.getRightToolbarItem(),r=this.getShapesToolbarItem(e),a=this.getZoomToolbarItem();sf.base.Browser.isDevice?this.defToolbarItems=r:this.defToolbarItems=s.concat(a,r,o);var l=new sf.navigations.Toolbar({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){t.renderAnnotationBtn(!0),t.createShapeColor(e),t.createShapeBtn(e),"arrow"===i.activeObj.shape&&(t.createStartBtn(),t.createEndBtn()),t.wireZoomBtnEvents(),sf.base.Browser.isDevice||t.renderSaveBtn(),i.trigger("toolbarCreated",{toolbarType:"shapes"}),sf.base.Browser.isDevice?t.defToolbarItems.length>0&&document.getElementById(n+"_bottomToolbar")&&(l.refreshOverflow(),l.refreshOverflow(),l.refreshOverflow()):(t.createLeftToolbarControls(),t.defToolbarItems.length>0&&document.getElementById(n+"_toolbar")&&l.refreshOverflow())}});sf.base.Browser.isDevice?l.appendTo("#"+n+"_bottomToolbar"):l.appendTo("#"+n+"_toolbar"),this.enableDisableTbrBtn()},e.prototype.beforeModeSwitch=function(e,t){this.popupLeft=e.element.offsetParent.style.left,"Picker"===e.mode?(t.showButtons=!0,t.dataBind(),e.element.querySelector(".e-apply").title=this.l10n.getConstant("Apply"),e.element.querySelector(".e-cancel").title=this.l10n.getConstant("Cancel"),e.element.querySelector(".e-mode-switch-btn").title=this.l10n.getConstant("StandardColors")):(t.showButtons=!1,t.dataBind(),e.element.querySelector(".e-mode-switch-btn").title=this.l10n.getConstant("MoreColors"))},e.prototype.createShapeColor=function(e){var t=this,i=this.parent,n=i.element.id;if(e.indexOf("fillColor")>-1){i.element.querySelector(".e-template.e-fill").appendChild(i.createElement("input",{id:n+"_shape_fill"}));var s=new sf.inputs.ColorPicker({modeSwitcher:!0,noColor:!0,value:"",inline:!0,showButtons:!1,mode:"Palette",cssClass:"e-shape-fill-color",beforeModeSwitch:function(e){return t.beforeModeSwitch(e,s)},presetColors:{custom:["","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"]},beforeTileRender:function(e){""===e.value&&e.element.classList.add("e-nocolor-item")},change:function(e){i.updateFillColor(e.value),""===e.currentValue.rgba?o.element.children[0].classList.add("e-nocolor-item"):(o.element.children[0].classList.remove("e-nocolor-item"),o.element.children[0].style.backgroundColor=e.currentValue.rgba),o.toggle()},onModeSwitch:function(e){sf.base.Browser.isDevice&&(e.element.parentElement.parentElement.style.left=t.popupLeft,e.element.parentElement.parentElement.style.top=o.element.getBoundingClientRect().top-e.element.parentElement.parentElement.offsetHeight+"px")},beforeClose:function(){o.toggle()}},"#"+n+"_shape_fill"),o=new sf.splitbuttons.DropDownButton({open:function(e){var t=e.element.parentElement;sf.base.Browser.isDevice&&(t.style.top=o.element.getBoundingClientRect().top-t.offsetHeight+"px",t.style.left=i.element.offsetLeft+"px")},target:".e-shape-fill-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+n+"_fillColorBtn");s.inline=!0,s.value=s.getValue(s.value,"rgba"),i.element.querySelector(".e-fill.e-template .e-dropdownbtn-preview").classList.add("e-nocolor-item")}if(e.indexOf("strokeColor")>-1){i.element.querySelector(".e-template.e-stroke").appendChild(i.createElement("input",{id:n+"_shape_stroke"}));var r=new sf.inputs.ColorPicker({modeSwitcher:!0,noColor:!1,value:"#fff",inline:!0,showButtons:!1,mode:"Palette",cssClass:"e-shape-stroke-color",beforeModeSwitch:function(e){t.popupLeft=e.element.offsetParent.style.left,r.value="#fff"!==i.activeObj.strokeSettings.strokeColor?i.activeObj.strokeSettings.strokeColor:"#008000ff",t.beforeModeSwitch(e,r)},presetColors:this.presetColors,change:function(e){i.updateStrokeColor(e.value),a.element.children[0].style.backgroundColor=e.currentValue.rgba,a.toggle()},onModeSwitch:function(e){sf.base.Browser.isDevice&&(e.element.parentElement.parentElement.style.left=t.popupLeft,e.element.parentElement.parentElement.style.top=a.element.getBoundingClientRect().top-e.element.parentElement.parentElement.offsetHeight+"px")},beforeClose:function(){a.toggle()}},"#"+n+"_shape_stroke"),a=new sf.splitbuttons.DropDownButton({open:function(e){var t=e.element.parentElement;sf.base.Browser.isDevice&&(t.style.top=a.element.getBoundingClientRect().top-t.offsetHeight+"px",t.style.left=i.element.offsetLeft+"px")},target:".e-shape-stroke-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+n+"_borderColorBtn");r.inline=!0,r.value=r.getValue(r.value,"rgba"),i.element.querySelector(".e-stroke.e-template .e-dropdownbtn-preview").style.background="#fff"}},e.prototype.createShapeBtn=function(e){var t=this.parent,i=t.element.id,n=[{id:"1",text:this.l10n.getConstant("XSmall")},{id:"2",text:this.l10n.getConstant("Small")},{id:"3",text:this.l10n.getConstant("Medium")},{id:"4",text:this.l10n.getConstant("Large")},{id:"5",text:this.l10n.getConstant("XLarge")}];if(!t.activeObj.shape||"rectangle"!==t.activeObj.shape&&"ellipse"!==t.activeObj.shape||(n=[{id:"1",text:this.l10n.getConstant("NoOutline")},{id:"2",text:this.l10n.getConstant("XSmall")},{id:"3",text:this.l10n.getConstant("Small")},{id:"4",text:this.l10n.getConstant("Medium")},{id:"5",text:this.l10n.getConstant("Large")},{id:"6",text:this.l10n.getConstant("XLarge")}]),e.indexOf("strokeWidth")>-1){var s=document.getElementById(i+"_borderWidthBtn"),o=document.createElement("span");o.innerHTML=this.l10n.getConstant("XSmall"),o.className="e-shape-stroke-width",s.appendChild(o);var r=new sf.splitbuttons.DropDownButton({items:n,open:function(e){sf.base.Browser.isDevice&&(e.element.parentElement.style.top=r.element.getBoundingClientRect().top-e.element.parentElement.offsetHeight+"px");var t=o.innerHTML;""!==t&&e.element.querySelector('[aria-label = "'+t+'"]').classList.add("e-selected-btn")},select:function(e){(o.textContent=e.item.text,t.updateStrokeWidth(e.item.id),sf.base.Browser.isDevice)?document.getElementById(i+"_bottomToolbar")&&sf.base.getComponent(i+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(i+"_toolbar")&&sf.base.getComponent(i+"_toolbar","toolbar").refreshOverflow()}});r.appendTo("#"+i+"_borderWidthBtn")}},e.prototype.createStartBtn=function(){var e=this.parent,t=e.element.id,i=[{id:"1",text:this.l10n.getConstant("None")},{id:"2",text:this.l10n.getConstant("Bar")},{id:"3",text:this.l10n.getConstant("Arrow")},{id:"4",text:this.l10n.getConstant("ArrowSolid")},{id:"5",text:this.l10n.getConstant("Circle")},{id:"6",text:this.l10n.getConstant("CircleSolid")},{id:"7",text:this.l10n.getConstant("Square")},{id:"8",text:this.l10n.getConstant("SquareSolid")}],n=document.getElementById(t+"_startBtn"),s=document.createElement("span");sf.base.isNullOrUndefined(e.activeObj.start)&&(e.activeObj.start="none"),s.innerHTML=e.pascalToSplitWords(e.activeObj.start),s.className="e-shape-start",n.appendChild(s);var o=new sf.splitbuttons.DropDownButton({items:i,open:function(e){sf.base.Browser.isDevice&&(e.element.parentElement.style.top=o.element.getBoundingClientRect().top-e.element.parentElement.offsetHeight+"px");var t=s.innerHTML;""!==t&&e.element.querySelector('[aria-label = "'+t+'"]').classList.add("e-selected-btn")},select:function(t){s.textContent=t.item.text,e.updateArrow("startArrow",t.item.id)}});o.appendTo("#"+t+"_startBtn")},e.prototype.createEndBtn=function(){var e=this.parent,t=e.element.id,i=[{id:"1",text:this.l10n.getConstant("None")},{id:"2",text:this.l10n.getConstant("Bar")},{id:"3",text:this.l10n.getConstant("Arrow")},{id:"4",text:this.l10n.getConstant("ArrowSolid")},{id:"5",text:this.l10n.getConstant("Circle")},{id:"6",text:this.l10n.getConstant("CircleSolid")},{id:"7",text:this.l10n.getConstant("Square")},{id:"8",text:this.l10n.getConstant("SquareSolid")}],n=document.getElementById(t+"_endBtn"),s=document.createElement("span");sf.base.isNullOrUndefined(e.activeObj.end)&&(e.activeObj.end="arrowSolid"),s.innerHTML=e.pascalToSplitWords(e.activeObj.end),s.className="e-shape-end",n.appendChild(s);var o=new sf.splitbuttons.DropDownButton({items:i,open:function(e){sf.base.Browser.isDevice&&(e.element.parentElement.style.top=o.element.getBoundingClientRect().top-e.element.parentElement.offsetHeight+"px");var t=s.innerHTML;""!==t&&e.element.querySelector('[aria-label = "'+t+'"]').classList.add("e-selected-btn")},select:function(t){s.textContent=t.item.text,e.updateArrow("endArrow",t.item.id)}});o.appendTo("#"+t+"_endBtn")},e.prototype.getTextToolbarItem=function(e){var t=this.parent,i=t.element.id,n=[];(sf.base.isNullOrUndefined(t.toolbar)||t.toolbar)&&n.push({id:i+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+i+'_annotationBtn"></button>'}),e.indexOf("fontFamily")>-1&&n.push({id:i+"_fontFamily",cssClass:"top-icon e-img-font-family",tooltipText:this.l10n.getConstant("FontFamily"),align:"Center",template:'<button id="'+i+'_fontFamilyBtn"></button>'}),e.indexOf("fontSize")>-1&&n.push({id:i+"_fontSize",cssClass:"top-icon e-img-font-size",tooltipText:this.l10n.getConstant("FontSize"),align:"Center",template:'<button id="'+i+'_fontSizeBtn"></button>'}),e.indexOf("fontColor")>-1&&n.push({cssClass:"top-icon e-text-font-color",id:i+"_text_strokecolor",tooltipText:this.l10n.getConstant("FontColor"),align:"Center",type:"Input",template:'<button id="'+i+'_fontColorBtn"></button>'}),e.indexOf("bold")>-1&&n.push({id:i+"_bold",prefixIcon:"e-icons e-bold",cssClass:"top-icon e-bold",tooltipText:this.l10n.getConstant("Bold"),align:"Center"}),e.indexOf("italic")>-1&&n.push({id:i+"_italic",prefixIcon:"e-icons e-italic",cssClass:"top-icon e-italic",tooltipText:this.l10n.getConstant("Italic"),align:"Center"}),e.indexOf("transparency")>-1&&n.push({id:i+"_transparency",prefixIcon:"e-opacity",tooltipText:this.l10n.getConstant("Opacity"),align:"Center"}),n.push({align:"Center",type:"Separator"}),e.indexOf("duplicate")>-1&&n.push({id:i+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Center",disabled:"block"===t.textArea.style.display||"inline-block"===t.textArea.style.display}),e.indexOf("remove")>-1&&n.push({id:i+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center",disabled:"block"===t.textArea.style.display||"inline-block"===t.textArea.style.display}),e.indexOf("text")>-1&&n.push({id:i+"_editText",prefixIcon:"e-icons e-annotation-edit",cssClass:"top-icon e-annotation-edit",tooltipText:this.l10n.getConstant("EditText"),align:"Center",disabled:"block"===t.textArea.style.display||"inline-block"===t.textArea.style.display});for(var s=this.processSubToolbar(e),o=0,r=s.length;o<r;o++)n.push(s[o]);return sf.base.Browser.isDevice||(n.push({id:i+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),n.push({id:i+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),n},e.prototype.getFontFamilyItems=function(){var e=this.parent;return e.fontFamily&&e.fontFamily.items&&e.fontFamily.items.length>0?e.fontFamily.items:sf.base.Browser.isDevice?[{id:"arial",text:"ABC"},{id:"calibri",text:"ABC"},{id:"georgia",text:"ABC"},{id:"roboto",text:"ABC"},{id:"tahoma",text:"ABC"}]:[{id:"arial",text:"Arial"},{id:"calibri",text:"Calibri"},{id:"georgia",text:"Georgia"},{id:"roboto",text:"Roboto"},{id:"tahoma",text:"Tahoma"}]},e.prototype.initTextToolbarItem=function(e){var t=this,i=this.parent,n=i.element.id,s=this.getLeftToolbarItem(),o=this.getRightToolbarItem(),r=this.getTextToolbarItem(e),a=this.getZoomToolbarItem();sf.base.Browser.isDevice?this.defToolbarItems=r:this.defToolbarItems=s.concat(a,r,o);var l=new sf.navigations.Toolbar({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){t.renderAnnotationBtn(!0),t.createTextColor(e),t.createTextBtn(e),t.wireZoomBtnEvents(),sf.base.Browser.isDevice||t.renderSaveBtn(),i.trigger("toolbarCreated",{toolbarType:"text"}),sf.base.Browser.isDevice?t.defToolbarItems.length>0&&document.getElementById(n+"_bottomToolbar")&&(l.refreshOverflow(),l.refreshOverflow(),l.refreshOverflow()):(t.createLeftToolbarControls(),t.defToolbarItems.length>0&&document.getElementById(n+"_toolbar")&&l.refreshOverflow())}});sf.base.Browser.isDevice?l.appendTo("#"+n+"_bottomToolbar"):l.appendTo("#"+n+"_toolbar"),this.enableDisableTbrBtn()},e.prototype.createTextColor=function(e){var t=this,i=this.parent,n=i.element.id;if(e.indexOf("fontColor")>-1&&i.element.querySelector(".e-template.e-text-font-color")){i.element.querySelector(".e-template.e-text-font-color").appendChild(i.createElement("input",{id:n+"_text_font"}));var s=new sf.inputs.ColorPicker({modeSwitcher:!0,noColor:!1,value:"#fff",inline:!0,showButtons:!1,mode:"Palette",cssClass:"e-text-fontt-color",beforeModeSwitch:function(e){t.popupLeft=e.element.offsetParent.style.left,s.value="#fff"!==i.activeObj.strokeSettings.strokeColor?i.activeObj.strokeSettings.strokeColor:"#008000ff",t.beforeModeSwitch(e,s)},presetColors:this.presetColors,change:function(e){i.updateFontColor(e.value),o.element.children[0].style.backgroundColor=e.currentValue.rgba,o.toggle()},onModeSwitch:function(e){sf.base.Browser.isDevice&&(e.element.parentElement.parentElement.style.left=t.popupLeft,e.element.parentElement.parentElement.style.top=o.element.getBoundingClientRect().top-e.element.parentElement.parentElement.offsetHeight+"px")},beforeClose:function(){o.toggle()}},"#"+n+"_text_font"),o=new sf.splitbuttons.DropDownButton({open:function(e){var t=e.element.parentElement;sf.base.Browser.isDevice&&(t.style.top=o.element.getBoundingClientRect().top-t.offsetHeight+"px",t.style.left=i.element.offsetLeft+"px")},target:".e-text-fontt-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+n+"_fontColorBtn");s.inline=!0,s.value=s.getValue(s.value,"rgba"),i.element.querySelector(".e-text-font-color.e-template .e-dropdownbtn-preview").style.background="#fff"}},e.prototype.createTextBtn=function(e){var t=this.parent,i=t.element.id;if(e.indexOf("fontFamily")>-1){var n=document.getElementById(i+"_fontFamilyBtn"),s=document.createElement("span");sf.base.Browser.isDevice?(s.innerHTML="ABC",s.setAttribute("style","font-family: "+t.fontFamily.default.toLowerCase()+"'")):s.innerHTML=t.fontFamily.default,s.className="e-text-font-family",n&&n.appendChild(s);var o=new sf.splitbuttons.DropDownButton({items:this.getFontFamilyItems(),cssClass:"e-font-family",createPopupOnClick:!0,beforeItemRender:function(e){e.element.setAttribute("style","font-family:"+e.element.id)},open:function(e){var i;sf.base.Browser.isDevice&&(e.element.parentElement.style.top=o.element.getBoundingClientRect().top-e.element.parentElement.offsetHeight+"px"),i="block"===t.textArea.style.display||"inline-block"===t.textArea.style.display?t.textArea.style.fontFamily:t.activeObj.textSettings.fontFamily,e.element.querySelector('[id *= "'+i.toLowerCase()+'"]').classList.add("e-selected-btn")},select:function(e){s.textContent=e.item.text,sf.base.Browser.isDevice&&s.setAttribute("style","font-family:"+e.item.id),t.updateFontFamily(e.item.id)}});o.appendTo("#"+i+"_fontFamilyBtn")}if(e.indexOf("fontSize")>-1){var r=document.getElementById(i+"_fontSizeBtn"),a=document.createElement("span"),l=t.getFontSizes();a.innerHTML=l[0].text,a.className="e-text-font-size",r.appendChild(a);var h=new sf.splitbuttons.DropDownButton({cssClass:"e-font-size",items:l,open:function(e){sf.base.Browser.isDevice&&(e.element.parentElement.style.top=h.element.getBoundingClientRect().top-e.element.parentElement.offsetHeight+"px");var t=a.innerHTML;e.element.querySelector('[aria-label *= "'+t+'"]').classList.add("e-selected-btn")},select:function(e){a.textContent=e.item.text,t.updateFontSize(e.item.text)}});h.appendTo("#"+i+"_fontSizeBtn")}},e.prototype.refreshToolbar=function(e,t,i,n,s){var o=this.parent,r=o.element.id;if(o.isImageLoaded&&!o.isCropToolbar){var a,l,h={toolbarType:"shapes"===e&&o.activeObj.shape?o.activeObj.shape:e};if("filter"!==e&&"color"!==e){var d=document.getElementById(r+"_toolbar"),c=document.getElementById(r+"_customizeWrapper"),p=document.getElementById(r+"_bottomToolbar");c&&sf.base.getComponent(c,"toolbar")&&this.defToolbarItems.length>0&&(sf.base.getComponent(c,"toolbar").destroy(),c.innerHTML=""),d&&this.defToolbarItems.length>0&&(sf.base.getComponent(d,"toolbar").destroy(),d.innerHTML=""),p&&this.defToolbarItems.length>0&&p.className.indexOf("e-control")>-1&&(sf.base.getComponent(p,"toolbar").destroy(),p.innerHTML="")}switch(this.refreshSlider(),document.querySelector(".e-slider-tooltip")&&document.querySelector(".e-slider-tooltip").remove(),this.isFrameToolbar=!1,o.isCropTab=!1,e){case"main":sf.base.Browser.isDevice?i?this.initMainToolbar(!1,!0,!0,!1,!1,!0):this.initMainToolbar(!1,!0,null,!1,!1,!0):sf.base.Browser.isDevice&&!n||this.initMainToolbar(t,sf.base.Browser.isDevice,null),sf.base.Browser.isDevice&&this.initBottomToolbar();break;case"shapes":sf.base.Browser.isDevice&&this.initMainToolbar(!1,!0,!0),"line"===o.activeObj.shape||"path"===o.activeObj.shape?h.toolbarItems=["strokeColor","strokeWidth","duplicate","remove"]:"arrow"===o.activeObj.shape?h.toolbarItems=["strokeColor","strokeWidth","start","end","duplicate","remove"]:"image"===o.activeObj.shape?h.toolbarItems=["flip","duplicate","remove","transparency"]:h.toolbarItems=["fillColor","strokeColor","strokeWidth","duplicate","remove"],o.trigger("toolbarUpdating",h),this.initShapesToolbarItem(h.toolbarItems);break;case"text":sf.base.Browser.isDevice&&this.initMainToolbar(!1,!0,!0),h.toolbarItems=["fontFamily","fontSize","fontColor","bold","italic","duplicate","remove","text"],o.trigger("toolbarUpdating",h),this.initTextToolbarItem(h.toolbarItems);break;case"pen":sf.base.Browser.isDevice&&this.initMainToolbar(!1,!0,!0),h.toolbarItems=["strokeColor","strokeWidth","remove","transparency"],o.trigger("toolbarUpdating",h),this.initPenToolbarItem(h.toolbarItems);break;case"adjustment":sf.base.Browser.isDevice&&this.initMainToolbar(!1,!0,!0),this.initAdjustmentToolbarItem();break;case"filter":this.updateContextualToolbar(e);break;case"resize":(o.isCircleCrop||o.currSelectionPoint&&"crop-circle"===o.currSelectionPoint.shape)&&(o.aspectHeight=o.aspectWidth,this.isAspectRatio=!1),this.initResizeToolbar(),sf.base.Browser.isDevice&&this.initMainToolbar(!1,!0,!0,!0),a=o.element.querySelector("#"+r+"_aspectratio"),l=o.element.querySelector("#"+r+"_nonaspectratio"),o.aspectWidth&&o.aspectHeight&&(l?o.notify("transform",{prop:"resize",value:{width:o.aspectWidth,height:o.aspectHeight,isAspectRatio:!1}}):a&&o.notify("transform",{prop:"resize",value:{width:o.aspectWidth,height:null,isAspectRatio:!0}}));break;case"color":this.updateContextualToolbar(e,s);break;case"croptransform":o.allowDownScale=!1,o.isCropTab=!0,sf.base.Browser.isDevice&&this.initMainToolbar(!1,!0,!0),o.updateCropTransformItems(),this.initCropTransformToolbar(),sf.base.Browser.isDevice&&this.updateContextualToolbar("color","straighten",!0);break;case"frame":this.isFrameToolbar=!0,sf.base.Browser.isDevice?(this.initMainToolbar(!1,!0,!0),this.initMainToolbar(!1,!0,!0,!1,!0)):this.initMainToolbar(!0,null,null,!1,!0);var u=o.element.querySelector("#"+r+"_"+o.frameObj.type);u&&u.classList.add("e-selected-btn"),"none"!==o.frameObj.type&&this.updateContextualToolbar(e,s),o.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}})}this.currToolbar=e,this.refreshDropDownBtn(i)}},e.prototype.performCropTransformClick=function(){var e=this.parent;e.notify("draw",{prop:"setTempStraightenZoomDeg"}),e.tempStraighten=e.transform.straighten,e.currObjType.isFiltered&&e.okBtn(),e.isStraightening=!0,this.refreshToolbar("croptransform"),e.notify("draw",{prop:"setDestForStraighten"}),e.notify("draw",{prop:"setTempDestForStraighten"})},e.prototype.getAdjustmentToolbarItem=function(){var e=[],t=this.parent,i=!1,n=t.element.id,s=["Brightness","Contrast","Hue","Saturation","Exposure","Opacity","Blur"];if(t.toolbar)for(var o=0;o<s.length;o++)if(-1!==t.toolbar.indexOf(s[o])){i=!0;break}(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Brightness")>-1)&&e.push({id:n+"_brightness",prefixIcon:"e-icons e-brightness",cssClass:"top-icon e-brightness",tooltipText:this.l10n.getConstant("Brightness"),align:"Center"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Contrast")>-1)&&e.push({id:n+"_contrast",prefixIcon:"e-icons e-contrast",cssClass:"top-icon e-contrast",tooltipText:this.l10n.getConstant("Contrast"),align:"Center"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Hue")>-1)&&e.push({id:n+"_hue",prefixIcon:"e-icons e-fade",cssClass:"top-icon e-fade",tooltipText:this.l10n.getConstant("Hue"),align:"Center"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Saturation")>-1)&&e.push({id:n+"_saturation",prefixIcon:"e-icons e-saturation",cssClass:"top-icon e-saturation",tooltipText:this.l10n.getConstant("Saturation"),align:"Center"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Exposure")>-1)&&e.push({id:n+"_exposure",prefixIcon:"e-icons e-grain",cssClass:"top-icon e-grain",tooltipText:this.l10n.getConstant("Exposure"),align:"Center"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Opacity")>-1)&&e.push({id:n+"_opacity",prefixIcon:"e-icons e-opacity",cssClass:"top-icon e-opacity",tooltipText:this.l10n.getConstant("Opacity"),align:"Center"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Blur")>-1)&&e.push({id:n+"_blur",prefixIcon:"e-icons e-tint",cssClass:"top-icon e-tint",tooltipText:this.l10n.getConstant("Blur"),align:"Center"});for(var r=this.processToolbar("center"),a=(o=0,r.length);o<a;o++)e.push(r[o]);return sf.base.Browser.isDevice||(e.push({id:n+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),e.push({id:n+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),e},e.prototype.getFrameToolbarItem=function(){var e=this.parent,t=e.element.id,i=[];return i.push({prefixIcon:"e-icons e-copy",id:t+"_frameColor",cssClass:"top-icon e-stroke",tooltipText:this.l10n.getConstant("Color"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Color")+'</span><button id="'+t+'_frameColorBtn"></button>'}),i.push({prefixIcon:"e-icons e-copy",id:t+"_frameGradient",cssClass:"top-icon e-frame-stroke",tooltipText:this.l10n.getConstant("GradientColor"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("GradientColor")+'</span><button id="'+t+'_frameGradientColorBtn"></button>'}),i.push({id:t+"_frameSize",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Size"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Size")+'</span><button id="'+t+'_frameSizeBtn"></button>'}),"line"!==e.frameObj.type&&"inset"!==e.frameObj.type&&"hook"!==e.frameObj.type||i.push({id:t+"_frameInset",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Inset"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Inset")+'</span><button id="'+t+'_frameInsetBtn"></button>'}),"line"!==e.frameObj.type&&"inset"!==e.frameObj.type||i.push({id:t+"_frameOffset",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Offset"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Offset")+'</span><button id="'+t+'_frameOffsetBtn"></button>'}),"line"===e.frameObj.type&&(i.push({id:t+"_frameRadius",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Radius"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Radius")+'</span><button id="'+t+'_frameRadiusBtn"></button>'}),i.push({id:t+"_frameAmount",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Amount"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Amount")+'</span><button id="'+t+'_frameAmountBtn"></button>'}),i.push({id:t+"_frameBorder",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("Border"),align:"Center",type:"Input",template:"<span>"+this.l10n.getConstant("Border")+'</span><button id="'+t+'_frameBorderBtn"></button>'})),i},e.prototype.getFilterToolbarItem=function(){var e=[],t=this.parent,i=!1,n=t.element.id,s=["Default","Chrome","Cold","Warm","Grayscale","Sepia","Invert"];if(t.toolbar)for(var o=0;o<s.length;o++)if(-1!==t.toolbar.indexOf(s[o])){i=!0;break}(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Default")>-1)&&e.push({id:n+"_default",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Default"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+n+'_defaultCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Default")+"</span></div></div>"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Chrome")>-1)&&e.push({id:n+"_chrome",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Chrome"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+n+'_chromeCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Chrome")+"</span></div></div>"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Cold")>-1)&&e.push({id:n+"_cold",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Cold"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+n+'_coldCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Cold")+"</span></div></div>"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Warm")>-1)&&e.push({id:n+"_warm",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Warm"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+n+'_warmCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Warm")+"</span></div></div>"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Grayscale")>-1)&&e.push({id:n+"_grayscale",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Grayscale"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+n+'_grayscaleCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Grayscale")+"</span></div></div>"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Sepia")>-1)&&e.push({id:n+"_sepia",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Sepia"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+n+'_sepiaCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Sepia")+"</span></div></div>"}),(sf.base.isNullOrUndefined(t.toolbar)||!i||t.toolbar&&t.toolbar.indexOf("Invert")>-1)&&e.push({id:n+"_invert",prefixIcon:"e-icons e-none",cssClass:"top-icon e-none",tooltipText:this.l10n.getConstant("Invert"),align:"Center",template:'<div class="filter-wrapper" style="box-sizing: content-box;"><canvas id='+n+'_invertCanvas></canvas><div style="text-align:center;"><span>'+this.l10n.getConstant("Invert")+"</span></div></div>"});for(var r=this.processToolbar("center"),a=(o=0,r.length);o<a;o++)e.push(r[o]);return e},e.prototype.getPenToolbarItem=function(e){var t=this.parent,i=t.element.id,n=[];(sf.base.isNullOrUndefined(t.toolbar)||t.toolbar)&&n.push({id:i+"_annotation",tooltipText:this.l10n.getConstant("Annotation"),align:"Center",template:'<button id="'+i+'_annotationBtn"></button>'}),e.indexOf("strokeColor")>-1&&n.push({prefixIcon:"e-icons e-copy",id:i+"_pen_strokecolor",cssClass:"top-icon e-pen-stroke-color",tooltipText:this.l10n.getConstant("StrokeColor"),align:"Center",type:"Input",template:'<button id="'+i+'_penColorBtn"></button>'}),e.indexOf("strokeWidth")>-1&&n.push({prefixIcon:"e-icons e-copy",cssClass:"top-icon e-size",tooltipText:this.l10n.getConstant("StrokeWidth"),align:"Center",type:"Input",template:'<button id="'+i+'_penStrokeWidth"></button>'}),n.push({align:"Center",type:"Separator"}),e.indexOf("remove")>-1&&n.push({id:i+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Center"});for(var s=this.processSubToolbar(e),o=0,r=s.length;o<r;o++)n.push(s[o]);return sf.base.Browser.isDevice||(n.push({id:i+"_ok",prefixIcon:"e-icons e-check",cssClass:"top-icon e-tick",tooltipText:this.l10n.getConstant("OK"),align:"Right"}),n.push({id:i+"_cancel",prefixIcon:"e-icons e-close",cssClass:"top-icon e-save",tooltipText:this.l10n.getConstant("Cancel"),align:"Right"})),n},e.prototype.initPenToolbarItem=function(e){var t=this,i=this.parent,n=i.element.id,s=this.getLeftToolbarItem(),o=this.getRightToolbarItem(),r=this.getPenToolbarItem(e),a=this.getZoomToolbarItem();sf.base.Browser.isDevice?this.defToolbarItems=r:this.defToolbarItems=s.concat(a,r,o);var l=new sf.navigations.Toolbar({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){t.renderAnnotationBtn(!0),t.createPenColor(e),t.createPenBtn(e),t.wireZoomBtnEvents(),sf.base.Browser.isDevice||t.renderSaveBtn(),i.trigger("toolbarCreated",{toolbarType:"pen"}),sf.base.Browser.isDevice?t.defToolbarItems.length>0&&document.getElementById(n+"_toolbar")&&(l.refreshOverflow(),l.refreshOverflow()):(t.createLeftToolbarControls(),t.defToolbarItems.length>0&&document.getElementById(n+"_toolbar")&&l.refreshOverflow())}});sf.base.Browser.isDevice?l.appendTo("#"+n+"_bottomToolbar"):l.appendTo("#"+n+"_toolbar"),this.enableDisableTbrBtn()},e.prototype.createPenColor=function(e){var t=this,i=this.parent,n=i.element.id;if(e.indexOf("strokeColor")>-1){i.element.querySelector(".e-template.e-pen-stroke-color").appendChild(i.createElement("input",{id:n+"_pen_stroke"}));var s=new sf.inputs.ColorPicker({modeSwitcher:!1,value:"#fff",showButtons:!1,mode:"Palette",cssClass:"e-pen-color",change:function(e){i.updatePenStrokeColor(e.currentValue.hex),t.selFhdColor=e.currentValue.hex,o.element.children[0].style.backgroundColor=e.currentValue.rgba,o.toggle()}},"#"+n+"_pen_stroke"),o=new sf.splitbuttons.DropDownButton({open:function(e){var t=e.element.parentElement;sf.base.Browser.isDevice&&(t.style.top=o.element.getBoundingClientRect().top-t.offsetHeight+"px",t.style.left=i.element.offsetLeft+"px")},target:".e-pen-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+n+"_penColorBtn");s.inline=!0,s.value=s.getValue(i.activeObj.strokeSettings.strokeColor,"rgba");var r={tempFreeHandDrawEditingStyles:null};i.notify("freehand-draw",{prop:"getTempFreeHandDrawEditingStyles",value:{obj:r}});var a={freehandSelectedIndex:null};i.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:a}}),!sf.base.isNullOrUndefined(a.freehandSelectedIndex)&&a.freehandSelectedIndex>-1?i.element.querySelector(".e-pen-stroke-color.e-template .e-dropdownbtn-preview").style.background="#42a5f5"===this.selFhdColor?r.tempFreeHandDrawEditingStyles.strokeColor:i.pointColl[a.freehandSelectedIndex].strokeColor:i.element.querySelector(".e-pen-stroke-color.e-template .e-dropdownbtn-preview").style.background=s.value}},e.prototype.createPenBtn=function(e){var t=this.parent,i=t.element.id,n=[{id:"1",text:this.l10n.getConstant("XSmall")},{id:"2",text:this.l10n.getConstant("Small")},{id:"3",text:this.l10n.getConstant("Medium")},{id:"4",text:this.l10n.getConstant("Large")},{id:"5",text:this.l10n.getConstant("XLarge")}];if(e.indexOf("strokeWidth")>-1){var s=document.getElementById(i+"_penStrokeWidth"),o=document.createElement("span"),r={freehandSelectedIndex:null};t.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:r}}),!sf.base.isNullOrUndefined(r.freehandSelectedIndex)&&r.freehandSelectedIndex>-1?o.innerHTML=this.getPenStroke(t.pointColl[r.freehandSelectedIndex].strokeWidth):o.innerHTML=this.l10n.getConstant("Small"),o.className="e-pen-stroke-width",s.appendChild(o);var a=new sf.splitbuttons.DropDownButton({items:n,open:function(e){sf.base.Browser.isDevice&&(e.element.parentElement.style.top=a.element.getBoundingClientRect().top-e.element.parentElement.offsetHeight+"px");var t=o.innerHTML;e.element.querySelector('[aria-label = "'+t+'"]').classList.add("e-selected-btn")},select:function(e){(o.textContent=e.item.text,t.updatePenStrokeWidth(e.item.id),sf.base.Browser.isDevice)?document.getElementById(i+"_bottomToolbar")&&sf.base.getComponent(i+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(i+"_toolbar")&&sf.base.getComponent(i+"_toolbar","toolbar").refreshOverflow()}});a.appendTo("#"+i+"_penStrokeWidth")}},e.prototype.getPenStroke=function(e){var t="",i={1:this.l10n.getConstant("XSmall"),2:this.l10n.getConstant("Small"),3:this.l10n.getConstant("Medium"),4:this.l10n.getConstant("Large"),5:this.l10n.getConstant("XLarge")};return e>=1&&e<=5&&(t=i[e]),t},e.prototype.initAdjustmentToolbarItem=function(){var e=this,t=this.parent.element.id,i=this.getLeftToolbarItem(null),n=this.getRightToolbarItem(),s=this.getAdjustmentToolbarItem(),o=this.getZoomToolbarItem();sf.base.Browser.isDevice?this.defToolbarItems=s:this.defToolbarItems=i.concat(o,s,n);var r=new sf.navigations.Toolbar({width:"100%",items:this.defToolbarItems,clicked:this.defToolbarClicked.bind(this),created:function(){e.wireZoomBtnEvents(),sf.base.Browser.isDevice||e.renderSaveBtn(),sf.base.Browser.isDevice||e.createLeftToolbarControls(),e.defToolbarItems.length>0&&document.getElementById(t+"_toolbar")&&r.refreshOverflow()}});sf.base.Browser.isDevice?r.appendTo("#"+t+"_bottomToolbar"):r.appendTo("#"+t+"_toolbar"),this.enableDisableTbrBtn()},e.prototype.initFrameToolbarItem=function(){var e=this,t=this.parent,i=t.element.id,n=document.querySelector("#"+i+"_contextualToolbarArea"),s=document.querySelector("#"+i+"_frameWrapper");s?s.style.display="block":s=n.appendChild(t.createElement("div",{id:i+"_frameWrapper",className:"e-frame-wrapper",styles:"position: relative"})),s.appendChild(t.createElement("div",{id:i+"_customizeWrapper",styles:"position: absolute"}));var o=this.getFrameToolbarItem(),r=new sf.navigations.Toolbar({width:"100%",items:o,clicked:this.defToolbarClicked.bind(this),created:function(){e.createFrameColor(),e.createFrameSize();var n=t.frameObj.type;"line"===n&&e.createFrameRadius(),"line"!==n&&"inset"!==n&&"hook"!==n||e.createFrameInset(),"line"!==n&&"inset"!==n||e.createFrameOffset(),"line"===n&&(e.createFrameAmount(),e.createFrameBorder()),e.createFrameGradientColor(),sf.base.Browser.isDevice?e.defToolbarItems.length>0&&document.getElementById(i+"_bottomToolbar")&&(r.refreshOverflow(),r.refreshOverflow(),r.refreshOverflow()):(e.createLeftToolbarControls(),e.defToolbarItems.length>0&&document.getElementById(i+"_toolbar")&&r.refreshOverflow()),t.element.querySelector("#"+i+"_"+n).focus()}});r.appendTo("#"+i+"_customizeWrapper")},e.prototype.createFrameGradientColor=function(){var e,t=this.parent,i={frameChangeEventArgs:null},n=t.element.id;t.element.querySelector(".e-template.e-frame-stroke").appendChild(t.createElement("input",{id:n+"_frame_gradient_fill"}));var s=new sf.inputs.ColorPicker({modeSwitcher:!1,noColor:!0,value:t.frameObj.gradientColor,showButtons:!1,mode:"Palette",cssClass:"e-frame-gradient-fill-color",change:function(n){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var s=t.frameObj.gradientColor,r={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),t.frameObj.gradientColor=n.currentValue.hex,t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:r.currObj,previousObjColl:r.currObj.objColl,previousPointColl:r.currObj.pointColl,previousSelPointColl:r.currObj.selPointColl,previousCropObj:sf.base.extend({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),""===n.currentValue.rgba?o.element.children[0].classList.add("e-nocolor-item"):(o.element.children[0].classList.remove("e-nocolor-item"),o.element.children[0].style.backgroundColor=n.currentValue.rgba),t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.gradientColor=s,o.toggle()}},"#"+n+"_frame_gradient_fill"),o=new sf.splitbuttons.DropDownButton({open:function(e){if(sf.base.Browser.isDevice){var i=e.element.parentElement;i.style.top=o.element.getBoundingClientRect().top-i.offsetHeight+"px",i.style.left=t.element.offsetLeft+"px"}},target:".e-frame-gradient-fill-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+n+"_frameGradientColorBtn");s.inline=!0,""===t.frameObj.gradientColor?t.element.querySelector(".e-frame-stroke.e-template .e-dropdownbtn-preview").classList.add("e-nocolor-item"):t.element.querySelector(".e-frame-stroke.e-template .e-dropdownbtn-preview").style.background=t.frameObj.gradientColor},e.prototype.createFrameColor=function(){var e,t=this.parent,i={frameChangeEventArgs:null},n=t.element.id;t.element.querySelector(".e-template.e-stroke").appendChild(t.createElement("input",{id:n+"_frame_fill"}));var s=new sf.inputs.ColorPicker({modeSwitcher:!1,value:t.frameObj.color,showButtons:!1,mode:"Palette",cssClass:"e-frame-fill-color",change:function(n){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var s=t.frameObj.color,r={currObj:{}};t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),t.frameObj.color=n.currentValue.hex,t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:r.currObj,previousObjColl:r.currObj.objColl,previousPointColl:r.currObj.pointColl,previousSelPointColl:r.currObj.selPointColl,previousCropObj:sf.base.extend({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),""===n.currentValue.rgba?o.element.children[0].classList.add("e-nocolor-item"):(o.element.children[0].classList.remove("e-nocolor-item"),o.element.children[0].style.backgroundColor=n.currentValue.rgba),t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.color=s,o.toggle()}},"#"+n+"_frame_fill"),o=new sf.splitbuttons.DropDownButton({open:function(e){if(sf.base.Browser.isDevice){var i=e.element.parentElement;i.style.top=o.element.getBoundingClientRect().top-i.offsetHeight+"px",i.style.left=t.element.offsetLeft+"px"}},target:".e-frame-fill-color",iconCss:"e-dropdownbtn-preview",cssClass:"e-ie-ddb-popup"},"#"+n+"_frameColorBtn");s.inline=!0,t.element.querySelector(".e-stroke.e-template .e-dropdownbtn-preview").style.background=t.frameObj.color},e.prototype.createFrameSize=function(){var e,t=this.parent,i={frameChangeEventArgs:null},n=t.element.id,s=[{id:"1",text:this.l10n.getConstant("20")},{id:"2",text:this.l10n.getConstant("40")},{id:"3",text:this.l10n.getConstant("60")},{id:"4",text:this.l10n.getConstant("80")},{id:"5",text:this.l10n.getConstant("100")}],o=document.getElementById(n+"_frameSizeBtn"),r=document.createElement("span");r.innerHTML=this.l10n.getConstant(t.frameObj.size.toString()),r.className="e-frame-stroke-width",o.appendChild(r);var a=new sf.splitbuttons.DropDownButton({items:s,open:function(e){if(sf.base.Browser.isDevice){var t=e.element.parentElement;t.style.top=a.element.getBoundingClientRect().top-t.offsetHeight+"px"}var i=a.element.childNodes[0].textContent;""!==i&&e.element.querySelector('[aria-label = "'+i+'"]').classList.add("e-selected-btn")},select:function(s){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var o=t.frameObj.size,r={currObj:{}};(t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),t.frameObj.size=parseInt(s.item.text,10),t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:r.currObj,previousObjColl:r.currObj.objColl,previousPointColl:r.currObj.pointColl,previousSelPointColl:r.currObj.selPointColl,previousCropObj:sf.base.extend({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),a.content=s.item.text,t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.size=o,sf.base.Browser.isDevice)?document.getElementById(n+"_bottomToolbar")&&sf.base.getComponent(n+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(n+"_toolbar")&&sf.base.getComponent(n+"_toolbar","toolbar").refreshOverflow()}});a.appendTo("#"+n+"_frameSizeBtn")},e.prototype.createFrameInset=function(){var e,t=this.parent,i={frameChangeEventArgs:null},n=t.element.id,s=[{id:"1",text:this.l10n.getConstant("20")},{id:"2",text:this.l10n.getConstant("40")},{id:"3",text:this.l10n.getConstant("60")},{id:"4",text:this.l10n.getConstant("80")},{id:"5",text:this.l10n.getConstant("100")}],o=document.getElementById(n+"_frameInsetBtn"),r=document.createElement("span");r.innerHTML=this.l10n.getConstant(t.frameObj.inset.toString()),r.className="e-frame-inset",o.appendChild(r);var a=new sf.splitbuttons.DropDownButton({items:s,open:function(e){if(sf.base.Browser.isDevice){var t=e.element.parentElement;t.style.top=a.element.getBoundingClientRect().top-t.offsetHeight+"px"}var i=a.element.childNodes[0].textContent;""!==i&&e.element.querySelector('[aria-label = "'+i+'"]').classList.add("e-selected-btn")},select:function(s){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var o=t.frameObj.inset,r={currObj:{}};(t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),t.frameObj.inset=parseInt(s.item.text,10),t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:r.currObj,previousObjColl:r.currObj.objColl,previousPointColl:r.currObj.pointColl,previousSelPointColl:r.currObj.selPointColl,previousCropObj:sf.base.extend({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),a.content=s.item.text,t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.inset=o,sf.base.Browser.isDevice)?document.getElementById(n+"_bottomToolbar")&&sf.base.getComponent(n+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(n+"_toolbar")&&sf.base.getComponent(n+"_toolbar","toolbar").refreshOverflow()}});a.appendTo("#"+n+"_frameInsetBtn")},e.prototype.createFrameOffset=function(){var e,t=this.parent,i={frameChangeEventArgs:null},n=t.element.id,s=[{id:"1",text:this.l10n.getConstant("20")},{id:"2",text:this.l10n.getConstant("40")},{id:"3",text:this.l10n.getConstant("60")},{id:"4",text:this.l10n.getConstant("80")},{id:"5",text:this.l10n.getConstant("100")}],o=document.getElementById(n+"_frameOffsetBtn"),r=document.createElement("span");r.innerHTML=this.l10n.getConstant(t.frameObj.offset.toString()),r.className="e-frame-offset",o.appendChild(r);var a=new sf.splitbuttons.DropDownButton({items:s,open:function(e){if(sf.base.Browser.isDevice){var t=e.element.parentElement;t.style.top=a.element.getBoundingClientRect().top-t.offsetHeight+"px"}var i=a.element.childNodes[0].textContent;""!==i&&e.element.querySelector('[aria-label = "'+i+'"]').classList.add("e-selected-btn")},select:function(s){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var o=t.frameObj.offset,r={currObj:{}};(t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),t.frameObj.offset=parseInt(s.item.text,10),t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:r.currObj,previousObjColl:r.currObj.objColl,previousPointColl:r.currObj.pointColl,previousSelPointColl:r.currObj.selPointColl,previousCropObj:sf.base.extend({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),a.content=s.item.text,t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.offset=o,sf.base.Browser.isDevice)?document.getElementById(n+"_bottomToolbar")&&sf.base.getComponent(n+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(n+"_toolbar")&&sf.base.getComponent(n+"_toolbar","toolbar").refreshOverflow()}});a.appendTo("#"+n+"_frameOffsetBtn")},e.prototype.createFrameRadius=function(){var e,t=this.parent,i={frameChangeEventArgs:null},n=t.element.id,s=[{id:"1",text:this.l10n.getConstant("0")},{id:"2",text:this.l10n.getConstant("20")},{id:"3",text:this.l10n.getConstant("40")},{id:"4",text:this.l10n.getConstant("60")},{id:"5",text:this.l10n.getConstant("80")},{id:"6",text:this.l10n.getConstant("100")}],o=document.getElementById(n+"_frameRadiusBtn"),r=document.createElement("span");r.innerHTML=this.l10n.getConstant(t.frameObj.radius.toString()),r.className="e-frame-radius",o.appendChild(r);var a=new sf.splitbuttons.DropDownButton({items:s,open:function(e){if(sf.base.Browser.isDevice){var t=e.element.parentElement;t.style.top=a.element.getBoundingClientRect().top-t.offsetHeight+"px"}var i=a.element.childNodes[0].textContent;""!==i&&e.element.querySelector('[aria-label = "'+i+'"]').classList.add("e-selected-btn")},select:function(s){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var o=t.frameObj.radius,r={currObj:{}};(t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),t.frameObj.radius=parseInt(s.item.text,10),t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:r.currObj,previousObjColl:r.currObj.objColl,previousPointColl:r.currObj.pointColl,previousSelPointColl:r.currObj.selPointColl,previousCropObj:sf.base.extend({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),a.content=s.item.text,t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.radius=o,sf.base.Browser.isDevice)?document.getElementById(n+"_bottomToolbar")&&sf.base.getComponent(n+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(n+"_toolbar")&&sf.base.getComponent(n+"_toolbar","toolbar").refreshOverflow()}});a.appendTo("#"+n+"_frameRadiusBtn")},e.prototype.createFrameAmount=function(){var e,t=this.parent,i={frameChangeEventArgs:null},n=t.element.id,s=[{id:"1",text:this.l10n.getConstant("1")},{id:"2",text:this.l10n.getConstant("2")},{id:"3",text:this.l10n.getConstant("3")},{id:"4",text:this.l10n.getConstant("4")},{id:"5",text:this.l10n.getConstant("5")}],o=document.getElementById(n+"_frameAmountBtn"),r=document.createElement("span");r.innerHTML=this.l10n.getConstant(t.frameObj.amount.toString()),r.className="e-frame-amount",o.appendChild(r);var a=new sf.splitbuttons.DropDownButton({items:s,open:function(e){if(sf.base.Browser.isDevice){var t=e.element.parentElement;t.style.top=a.element.getBoundingClientRect().top-t.offsetHeight+"px"}var i=a.element.childNodes[0].textContent;""!==i&&e.element.querySelector('[aria-label = "'+i+'"]').classList.add("e-selected-btn")},select:function(s){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var o=t.frameObj.amount,r={currObj:{}};(t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),t.frameObj.amount=parseInt(s.item.text,10),t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:r.currObj,previousObjColl:r.currObj.objColl,previousPointColl:r.currObj.pointColl,previousSelPointColl:r.currObj.selPointColl,previousCropObj:sf.base.extend({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),a.content=s.item.text,t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.amount=o,sf.base.Browser.isDevice)?document.getElementById(n+"_bottomToolbar")&&sf.base.getComponent(n+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(n+"_toolbar")&&sf.base.getComponent(n+"_toolbar","toolbar").refreshOverflow()}});a.appendTo("#"+n+"_frameAmountBtn")},e.prototype.createFrameBorder=function(){var e,t=this.parent,i={frameChangeEventArgs:null},n=t.element.id,s=[{id:"1",text:this.l10n.getConstant("Solid")},{id:"2",text:this.l10n.getConstant("Dashed")},{id:"3",text:this.l10n.getConstant("Dotted")}],o=document.getElementById(n+"_frameBorderBtn"),r=document.createElement("span");r.innerHTML=this.l10n.getConstant(t.toPascalCase(t.frameObj.border)),r.className="e-frame-border",o.appendChild(r);var a=new sf.splitbuttons.DropDownButton({items:s,open:function(e){if(sf.base.Browser.isDevice){var t=e.element.parentElement;t.style.top=a.element.getBoundingClientRect().top-t.offsetHeight+"px"}var i=a.element.childNodes[0].textContent;""!==i&&e.element.querySelector('[aria-label = "'+i+'"]').classList.add("e-selected-btn")},select:function(s){e={type:t.toPascalCase(t.frameObj.type),color:t.frameObj.color,gradientColor:t.frameObj.gradientColor,size:t.frameObj.size,inset:t.frameObj.inset,offset:t.frameObj.offset,borderRadius:t.frameObj.radius,frameLineStyle:t.toPascalCase(t.frameObj.border),lineCount:t.frameObj.amount};var o=t.frameObj.border,r={currObj:{}};(t.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),t.frameObj.border=s.item.text.toLowerCase(),t.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:e,obj:i}}),i.frameChangeEventArgs&&!i.frameChangeEventArgs.cancel?(t.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:r.currObj,previousObjColl:r.currObj.objColl,previousPointColl:r.currObj.pointColl,previousSelPointColl:r.currObj.selPointColl,previousCropObj:sf.base.extend({},t.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),t.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),t.notify("draw",{prop:"redrawDownScale"}),a.content=s.item.text,t.curFrameObjEvent={previousFrameSetting:i.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:i.frameChangeEventArgs.currentFrameSetting},t.isFrameBtnClick=!0):t.frameObj.border=o,sf.base.Browser.isDevice)?document.getElementById(n+"_bottomToolbar")&&sf.base.getComponent(n+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(n+"_toolbar")&&sf.base.getComponent(n+"_toolbar","toolbar").refreshOverflow()}});a.appendTo("#"+n+"_frameBorderBtn")},e.prototype.initFilterToolbarItem=function(){var e=this,t=this.parent,i=t.element.id,n=this.getFilterToolbarItem();document.querySelector("#"+i+"_contextualToolbar").classList.contains("e-control")&&sf.base.getComponent(document.getElementById(i+"_contextualToolbar"),"toolbar").destroy();var s=new sf.navigations.Toolbar({width:"100%",items:n,clicked:this.contextualToolbarClicked.bind(this),created:function(){e.updatePrivateVariables(),e.createCanvasFilter(),""===t.currentFilter&&(t.currentFilter=i+"_default");var n=document.querySelector("#"+i+"_headWrapper");n&&(n.style.display="none");var o=document.getElementById(t.currentFilter+"Canvas");o&&o.parentElement.parentElement.classList.add("e-selected"),e.enableDisableTbrBtn(),s.refreshOverflow()}});s.appendTo("#"+i+"_contextualToolbar")},e.prototype.drawDashedLine=function(e){e.beginPath(),e.setLineDash([5]),e.rect(10,10,280,130),e.stroke(),e.closePath()},e.prototype.createCanvasFilter=function(){var e=this.parent;sf.popups.showSpinner(e.element),e.element.style.opacity="0.5";var t=e.getCurrentCanvasData();this.inMemoryCanvas.width=t.width,this.inMemoryCanvas.height=t.height,this.inMemoryContext.putImageData(t,0,0),this.updateFilterCanvas("_defaultCanvas","default"),this.updateFilterCanvas("_chromeCanvas","chrome"),this.updateFilterCanvas("_coldCanvas","cold"),this.updateFilterCanvas("_warmCanvas","warm"),this.updateFilterCanvas("_grayscaleCanvas","grayscale"),this.updateFilterCanvas("_sepiaCanvas","sepia"),this.updateFilterCanvas("_invertCanvas","invert"),sf.popups.hideSpinner(e.element),e.element.style.opacity="1",e.initialAdjustmentValue=this.lowerContext.filter},e.prototype.updateFilterCanvas=function(e,t){var i=this.parent,n=i.element.querySelector("#"+i.element.id+e);if(n){var s=n.getContext("2d");s=n.getContext("2d"),n.style.width="100px",n.style.height="100px",i.notify("filter",{prop:"updateAdj",value:{type:t,value:null,isPreview:!0,ctx:s}}),s.drawImage(this.inMemoryCanvas,0,0,300,150)}},e.prototype.getQuickAccessToolbarItem=function(e){var t=this.parent,i=t.element.id,n={cancel:!1,toolbarItems:[]},s=[];sf.base.isNullOrUndefined(e)?("image"===t.activeObj.shape&&s.push("Flip"),s.push("Clone"),s.push("Delete"),"text"===t.activeObj.shape&&s.push("EditText"),n.shape=t.toPascalCase(t.activeObj.shape)):e&&(s.push("Delete"),n.shape="Freehand draw"),n.toolbarItems=sf.base.extend([],s,null,!0),t.trigger("quickAccessToolbarOpen",n);var o=[];if(n.cancel)o=[];else for(var r=0;r<n.toolbarItems.length;r++)switch(n.toolbarItems[r]){case"Clone":o.push({id:i+"_duplicate",prefixIcon:"e-icons e-order",cssClass:"top-icon e-order",tooltipText:this.l10n.getConstant("Duplicate"),align:"Left"});break;case"Delete":o.push({id:i+"_remove",prefixIcon:"e-icons e-trash",cssClass:"top-icon e-trash",tooltipText:this.l10n.getConstant("Remove"),align:"Left"});break;case"EditText":o.push({id:i+"_editText",prefixIcon:"e-icons e-annotation-edit",cssClass:"top-icon e-annotation-edit",tooltipText:this.l10n.getConstant("EditText"),align:"Left"});break;case"Flip":o.push({id:i+"_hFlip",prefixIcon:"e-icons e-horizontal-flip",tooltipText:this.l10n.getConstant("HorizontalFlip"),align:"Left"}),o.push({id:i+"_vFlip",prefixIcon:"e-icons e-vertical-flip",tooltipText:this.l10n.getConstant("VerticalFlip"),align:"Left"});break;default:o.push(n.toolbarItems[r])}return o},e.prototype.renderQAT=function(e){var t=this.parent,i=t.element.id;if(t.activeObj&&t.showQuickAccessToolbar){var n=document.getElementById(i+"_quickAccessToolbarArea");n&&(this.destroyQuickAccessToolbar(),n.style.display="block");var s=this.getQuickAccessToolbarItem(e);if(0===s.length)return;if(sf.base.isNullOrUndefined(t.quickAccessToolbarTemplate))new sf.navigations.Toolbar({items:s,clicked:this.quickAccessToolbarClicked.bind(this)}).appendTo("#"+i+"_quickAccessToolbar");var o=this.toolbarHeight&&0!==this.toolbarHeight?this.toolbarHeight:n.clientHeight;if(sf.base.isNullOrUndefined(e)){n.style.width="auto",t.activeObj.activePoint.width=Math.abs(t.activeObj.activePoint.width),t.activeObj.activePoint.height=Math.abs(t.activeObj.activePoint.height);var r=t.activeObj.activePoint.startX<t.activeObj.activePoint.endX?t.activeObj.activePoint.startX:t.activeObj.activePoint.endX,a=t.activeObj.activePoint.startY<t.activeObj.activePoint.endY?t.activeObj.activePoint.startY:t.activeObj.activePoint.endY,l=t.activeObj.activePoint.width;if(0!==t.activeObj.rotatedAngle&&"arrow"!==t.activeObj.shape){var h={activePoint:null};t.notify("shape",{prop:"getSquarePointForRotatedShape",onPropertyChange:!1,value:{obj:t.activeObj,object:h}}),r=(f=h.activePoint).startX,a=f.startY,l=f.width}else if("path"===t.activeObj.shape){var d=t.getSquarePointForPath(t.activeObj);r=d.startX,a=d.startY,l=d.width}if(n.style.left=r+l/2-25*s.length+"px",parseFloat(n.style.left)+n.clientWidth/2!==r+l/2){var c=r+l/2-(parseFloat(n.style.left)+n.clientWidth/2);n.style.left=parseFloat(n.style.left)+c+"px"}a-(o+o/1.5)<t.img.destTop?n.style.top=t.img.destTop+"px":n.style.top=a-(o+o/1.5)+"px"}else if(e){var p={activePoint:null},u={freehandSelectedIndex:null};t.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:u}}),t.notify("freehand-draw",{prop:"getSqPtFD",value:{idx:u.freehandSelectedIndex,obj:p}});var f=p.activePoint;n.style.width="auto",n.style.left=f.startX+f.width/2-27*s.length+"px",f.startY-(o+o/1.5)<t.img.destTop?n.style.top=t.img.destTop+"px":n.style.top=f.startY-(o+o/1.5)+"px"}}},e.prototype.refreshDropDownBtn=function(e){if(!sf.base.isNullOrUndefined(e)){var t=this.parent.element.id,i=document.querySelector("#"+t+"_annotationBtn");i&&(e?(i.classList.add("e-disabled"),i.parentElement.classList.add("e-overlay")):(i.classList.remove("e-disabled"),i.parentElement.classList.remove("e-overlay")),sf.base.getComponent(i,"dropdown-btn").disabled=e);var n=document.querySelector("#"+t+"_transformBtn");n&&(e?(n.classList.add("e-disabled"),n.parentElement.classList.add("e-overlay")):(n.classList.remove("e-disabled"),n.parentElement.classList.remove("e-overlay")),sf.base.getComponent(n,"dropdown-btn").disabled=e);var s=document.querySelector("#"+t+"_adjustment");s&&(e?(s.classList.add("e-disabled"),s.parentElement.classList.add("e-overlay")):(s.classList.remove("e-disabled"),s.parentElement.classList.remove("e-overlay")),sf.base.getComponent(s,"btn").disabled=e);var o=document.querySelector("#"+t+"_filter");o&&(e?(o.classList.add("e-disabled"),o.parentElement.classList.add("e-overlay")):(o.classList.remove("e-disabled"),o.parentElement.classList.remove("e-overlay")),sf.base.getComponent(o,"btn").disabled=e)}},e.prototype.cropSelect=function(e){var t=this.parent;t.isCropTab=!0,sf.base.isNullOrUndefined(t.transform.cropZoomFactor)&&(t.transform.cropZoomFactor=t.transform.zoomFactor,t.notify("draw",{prop:"setTempZoomFactor",onPropertyChange:!1,value:{tempZoomFactor:t.transform.zoomFactor}})),t.transform.zoomFactor=t.transform.cropZoomFactor;var i=e.item.id;this.currentToolbar="crop",t.currSelectionPoint=null,t.notify("draw",{prop:"setIsCropSelect",value:{bool:!0}});var n={prevObj:null};t.notify("crop",{prop:"getPreviousCropCurrentObj",value:{obj:n}}),t.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:i,startX:null,startY:null,width:null,height:null}}),t.notify("crop",{prop:"setPreviousCropCurrentObj",value:{obj:n.prevObj}}),this.enableDisableTbrBtn(),t.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}})},e.prototype.quickAccessToolbarClicked=function(e,t){var i=this.parent,n=i.element.id,s={x:i.activeObj.activePoint.startX,y:i.activeObj.activePoint.startY};if(e.item){var o=null,r={tempObj:null};i.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:{prevActObj:null}}}),i.notify("selection",{prop:"getTempActObj",onPropertyChange:!1,value:{obj:r}}),r.tempObj.activePoint.height=Math.abs(r.tempObj.activePoint.height);var a={isNewPath:null},l=void 0;i.notify("draw",{prop:"getNewPath",value:{obj:a}});var h=e.item.id.replace(n+"_","").toLowerCase();switch(h){case"duplicate":i.element.querySelector("#"+n+"_duplicate").classList.contains("e-disabled")||(this.refreshSlider(),a.isNewPath||JSON.stringify(r.tempObj)!==JSON.stringify(i.activeObj)||(o=!0),this.duplicateShape(o));break;case"remove":i.element.querySelector("#"+n+"_remove").classList.contains("e-disabled")||(this.refreshSlider(),i.notify("selection",{prop:"deleteItem",onPropertyChange:!1}));break;case"edittext":if(!i.element.querySelector("#"+n+"_editText").classList.contains("e-disabled")){if(this.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),i.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:sf.base.extend({},i.activeObj,{},!0)}}),i.notify("selection",{prop:"setInitialTextEdit",onPropertyChange:!1,value:{bool:!0}}),i.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:sf.base.extend({},i.activeObj,{},!0)}}),0!==i.activeObj.rotatedAngle){var d={x:s.x,y:s.y};i.notify("shape",{prop:"getTextBoxPosition",onPropertyChange:!1,value:{obj:i.activeObj,object:d}}),s.x=d.x,s.y=d.y;var c={x:s.x,y:s.y};i.notify("shape",{prop:"setFlipState",onPropertyChange:!1,value:{x:s.x,y:s.y,obj:i.activeObj,object:c}}),s.x=c.x,s.y=c.y}i.notify("shape",{prop:"renderTextArea",onPropertyChange:!1,value:{x:s.x,y:s.y,actObj:i.activeObj}}),sf.base.isNullOrUndefined(i.activeObj.currIndex)&&i.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!0}}),document.getElementById(n+"_quickAccessToolbarArea")&&(document.getElementById(n+"_quickAccessToolbarArea").style.display="none")}break;case"rotleft":case"rotright":i.element.querySelector("#"+n+"_rotLeft").classList.contains("e-disabled")&&i.element.querySelector("#"+n+"_rotRight").classList.contains("e-disabled")||i.rotateImage(e.item.id.replace(n+"_","").toLowerCase());break;case"hflip":i.element.querySelector("#"+n+"_hFlip").classList.contains("e-disabled")||(l=i.activeObj.imageCanvas.getContext("2d"),i.horizontalFlip(l));break;case"vflip":i.element.querySelector("#"+n+"_vFlip").classList.contains("e-disabled")||(l=i.activeObj.imageCanvas.getContext("2d"),i.verticalFlip(l))}"duplicate"!==h&&"remove"!==h||i.notify("draw",{prop:"redrawDownScale"})}sf.base.isNullOrUndefined(t)&&i.trigger("quickAccessToolbarItemClick",e)},e.prototype.duplicateShape=function(e,t){var i=this.parent;i.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:{activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]}}});var n={prevActObj:null};i.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:n}});var s,o={isNewPath:null};i.notify("draw",{prop:"getNewPath",value:{obj:o}});var r=sf.base.extend({},i.activeObj,{},!0);if("image"===r.shape&&(s=sf.base.extend([],i.objColl,[],!0),i.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:s}})),sf.base.isNullOrUndefined(i.activeObj.currIndex)?i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:e}}):n.prevActObj||t?(i.activeObj.currIndex=null,r.currIndex=null,i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:e}})):i.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}}),o.isNewPath&&i.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),s=sf.base.extend([],i.objColl,[],!0),r.activePoint.startX+=10,r.activePoint.startY-=10,r.activePoint.endX+=10,r.activePoint.endY-=10,"path"===r.shape)for(var a=0;a<r.pointColl.length;a++)r.pointColl[a].x+=10,r.pointColl[a].y-=10;else"image"===r.shape&&(r.imageCanvas=i.createElement("canvas"));if(i.activeObj=sf.base.extend({},r,{},!0),"image"===i.activeObj.shape){var l=sf.base.extend({},r.activePoint,{},!0),h={width:0,height:0};i.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:i.activeObj.imageElement.width,height:i.activeObj.imageElement.height,obj:h,isImgShape:null}}),i.activeObj.activePoint.width=h.width,i.activeObj.activePoint.height=h.height,i.activeObj.isHorImageFlip&&i.activeObj.isVerImageFlip?(i.activeObj.isHorImageFlip=i.activeObj.isVerImageFlip=!1,i.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:r.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:!0,isVFlip:!0}}),i.activeObj.isHorImageFlip=i.activeObj.isVerImageFlip=!0):i.activeObj.isHorImageFlip?(i.activeObj.isHorImageFlip=!1,i.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:r.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:!0,isVFlip:null}}),i.activeObj.isHorImageFlip=!0):i.activeObj.isVerImageFlip?(i.activeObj.isVerImageFlip=!1,i.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:r.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:!0}}),i.activeObj.isVerImageFlip=!0):i.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:r.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:null}}),i.activeObj.activePoint=l}"line"!==i.activeObj.shape&&"arrow"!==i.activeObj.shape||i.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:i.activeObj}}),i.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i.activeObj,isCropRatio:null,points:null,isPreventDrag:!0}}),i.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:s}}),this.renderQAT()},e.prototype.defToolbarClicked=function(e){var t=this.parent,i=t.element.id,n=!1,s=!1;if(!this.isFrameToolbar&&t.element.querySelector(".e-contextual-toolbar-wrapper")){t.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hide")||(n=s=!0);var o={bool:t.isStraightening};(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&!o.bool)&&t.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide")}if(e.item){var r=e.item.id.replace(i+"_","").toLowerCase();if("duplicate"===r||"remove"===r||"edittext"===r||"hflip"===r||"vflip"===r||"rotleft"===r||"rotright"===r)this.quickAccessToolbarClicked(e,!0),t.trigger("toolbarItemClicked",e);else{var a=!1,l=!1,h=document.querySelector("#"+i+"_adjustment");h&&h.classList.contains("e-disabled")&&(l=!0);var d=document.querySelector("#"+i+"_filter");d&&d.classList.contains("e-disabled")&&(a=!0),this.enableDisableTbrBtn(),this.performDefTbrClick(r,n,l,a,s),t.trigger("toolbarItemClicked",e),t.isStraightening&&t.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}});-1!==["undo","redo","cancel","aspectratio","nonaspectratio","save","duplicate","filter","frame","none","mat","bevel","line","inset","hook","resize","remove"].indexOf(r)&&t.notify("draw",{prop:"redrawDownScale"})}}},e.prototype.performDefTbrClick=function(e,t,i,n,s){var o,r,a=this.parent,l=a.element.id,h=a.element.querySelector("#"+l+"_zoomIn"),d=a.element.querySelector("#"+a.element.id+"_resizeHeight"),c=a.element.querySelector("#"+a.element.id+"_resizeWidth"),p=!1;if(void 0!==a.activeObj.shape&&(r=a.activeObj.shape.split("-")),(void 0===r&&a.currObjType.isCustomCrop||void 0!==r&&"crop"===r[0])&&(p=!0),!a.disabled)switch(e){case"pan":a.currObjType.isCustomCrop=a.currObjType.isFiltered=!1,a.currObjType.isUndoAction&&a.notify("undo-redo",{prop:"refreshUrc",value:{bool:null}}),p&&(a.currObjType.isCustomCrop=!1,a.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.upperContext.clearRect(0,0,a.upperCanvas.width,a.upperCanvas.height),this.refreshToolbar("main")),a.togglePan?(this.cancelPan(),a.notify("transform",{prop:"setDisablePan",onPropertyChange:!1,value:{bool:!0}}),"pen"===this.currentToolbar&&a.freehandDraw(!0)):((o=a.element.querySelector(".e-img-pan .e-btn"))&&o.classList.add("e-selected-btn"),a.pan(!0),a.notify("transform",{prop:"setDisablePan",onPropertyChange:!1,value:{bool:!1}})),h&&a.zoomSettings.zoomFactor>=a.zoomSettings.maxZoomFactor?(h.classList.add("e-disabled"),h.parentElement.classList.add("e-overlay")):h&&(h.classList.remove("e-disabled"),h.parentElement.classList.remove("e-overlay")),this.refreshToolbar("main");break;case"cancel":a.notify("draw",{prop:"performCancel",value:{isContextualToolbar:t}});break;case"ok":a.okBtn(),this.refreshDropDownBtn(!1),this.currentToolbar="main",a.isStraightening=!1;break;case"crop":a.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),sf.base.Browser.isDevice&&this.updateContextualToolbar("color","straighten");break;case"reset":a.reset(),this.imageHeight=null,this.imageWidth=null,a.aspectHeight=null,a.aspectWidth=null,this.isAspectRatio=!0,this.currentToolbar="main";break;case"undo":a.togglePen&&a.notify("draw",{prop:"performCancel",value:{isContextualToolbar:t}}),a.notify("undo-redo",{prop:"call-undo"});break;case"redo":a.togglePen&&a.notify("draw",{prop:"performCancel",value:{isContextualToolbar:t}}),a.notify("undo-redo",{prop:"call-redo"});break;case"aspectratio":(!a.isCircleCrop&&sf.base.isNullOrUndefined(a.currSelectionPoint)||a.currSelectionPoint&&"crop-circle"!==a.currSelectionPoint.shape)&&(sf.base.getComponent(c,"numerictextbox").value?(a.aspectWidth=sf.base.getComponent(c,"numerictextbox").value,a.aspectHeight=sf.base.getComponent(d,"numerictextbox").value,a.notify("transform",{prop:"resize",value:{width:a.aspectWidth,height:null,isAspectRatio:!0}})):sf.base.getComponent(d,"numerictextbox").value&&(a.aspectWidth=parseFloat(sf.base.getComponent(c,"numerictextbox").placeholder),a.aspectHeight=sf.base.getComponent(d,"numerictextbox").value,a.notify("transform",{prop:"resize",value:{width:a.aspectWidth,height:a.aspectHeight,isAspectRatio:!0}})),a.resizeSrc={startX:a.img.srcLeft,startY:a.img.srcTop,width:a.img.srcWidth,height:a.img.srcHeight},this.refreshToolbar("resize"));break;case"nonaspectratio":(sf.base.getComponent(c,"numerictextbox").value||sf.base.getComponent(d,"numerictextbox").value)&&(a.aspectWidth=sf.base.getComponent(c,"numerictextbox").value?sf.base.getComponent(c,"numerictextbox").value:parseFloat(sf.base.getComponent(c,"numerictextbox").placeholder),a.aspectHeight=sf.base.getComponent(d,"numerictextbox").value?sf.base.getComponent(d,"numerictextbox").value:parseFloat(sf.base.getComponent(d,"numerictextbox").placeholder),a.notify("transform",{prop:"resize",value:{width:a.aspectWidth,height:a.aspectHeight,isAspectRatio:!1}})),a.cancelCropSelection=null,a.resizeSrc={startX:a.img.srcLeft,startY:a.img.srcTop,width:a.img.srcWidth,height:a.img.srcHeight},this.refreshToolbar("resize");break;case"resize":a.currObjType.isFiltered&&a.okBtn(),this.resizeClick();break;case"adjustment":i||(a.currObjType.isFiltered&&a.okBtn(),this.refreshToolbar("adjustment"),a.setTempFilterProperties(),a.notify("draw",{prop:"updateFinetune"}),a.notify("filter",{prop:"setTempAdjVal"}),this.openSlider("brightness"));break;case"brightness":case"contrast":case"hue":case"saturation":case"opacity":case"blur":case"exposure":this.openSlider(e);break;case"filter":n||(sf.popups.showSpinner(a.element),this.refreshToolbar("filter"),a.setTempFilterProperties(),sf.popups.hideSpinner(a.element));break;case"default":case"chrome":case"cold":case"warm":case"grayscale":case"blackandwhite":case"sepia":case"invert":case"sharpen":a.currObjType.isFiltered=!0,a.notify("filter",{prop:"applyImageFilter",value:{option:e}});break;case"upload":s&&a.element.querySelector(".e-contextual-toolbar-wrapper").classList.remove("e-hide");break;case"bold":a.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),a.activeObj.textSettings.bold&&a.activeObj.textSettings.italic?a.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"italic"}}):a.activeObj.textSettings.bold&&!a.activeObj.textSettings.italic?a.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"default"}}):!a.activeObj.textSettings.bold&&a.activeObj.textSettings.italic?a.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bolditalic"}}):a.activeObj.textSettings.bold||a.activeObj.textSettings.italic||a.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bold"}}),a.element.querySelector("#"+l+"_bold").classList.contains("e-selected-btn")?a.element.querySelector("#"+l+"_bold").classList.remove("e-selected-btn"):a.element.querySelector("#"+l+"_bold").classList.add("e-selected-btn");break;case"italic":a.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),a.activeObj.textSettings.bold&&a.activeObj.textSettings.italic?a.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bold"}}):a.activeObj.textSettings.bold&&!a.activeObj.textSettings.italic?a.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"bolditalic"}}):!a.activeObj.textSettings.bold&&a.activeObj.textSettings.italic?a.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"default"}}):a.activeObj.textSettings.bold||a.activeObj.textSettings.italic||a.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:"italic"}}),a.element.querySelector("#"+l+"_italic").classList.contains("e-selected-btn")?a.element.querySelector("#"+l+"_italic").classList.remove("e-selected-btn"):a.element.querySelector("#"+l+"_italic").classList.add("e-selected-btn");break;case"croptransform":this.performCropTransformClick();break;case"rotateleft":case"rotateright":case"horizontalflip":case"verticalflip":a.transformSelect(e),"rotateleft"!==e&&"rotateright"!==e||(a.notify("draw",{prop:"resetStraightenDestPoints"}),a.notify("draw",{prop:"setDestForStraighten"})),a.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),sf.base.Browser.isDevice&&this.updateContextualToolbar("color","straighten");break;case"save":if(a.element.querySelector("#"+l+"_saveBtn").classList.contains("e-hide")){a.element.querySelector("#"+l+"_saveBtn").classList.remove("e-hide"),a.element.querySelector("#"+l+"_saveBtn").focus();break}a.okBtn(),a.element.querySelector("#"+l+"_saveBtn").classList.add("e-hide"),a.element.querySelector("#"+l+"_saveBtn").click();break;case"transparency":this.updateContextualToolbar("transparency","transparency");break;case"frame":this.frameToolbarClick();break;case"none":case"mat":case"bevel":case"line":case"inset":case"hook":this.unselectFrameBtn(),a.element.querySelector("#"+l+"_"+e)&&a.element.querySelector("#"+l+"_"+e).classList.add("e-selected-btn"),a.frameObj.type=e,a.frameObj.size=20,a.frameObj.inset=20,a.frameObj.radius=0,a.frameObj.amount=1,a.frameObj.offset="inset"===e?60:20,this.refreshToolbar("frame"),a.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),a.isFrameBtnClick=!0,a.curFrameObjEvent={previousFrameSetting:a.tempFrameObj,currentFrameSetting:a.frameObj}}},e.prototype.frameToolbarClick=function(){var e,t,i,n=this.parent,s=n.element.id,o=document.querySelector("#"+s+"_frame");n.notify("draw",{prop:"updateCropSelection",onPropertyChange:!1}),n.currObjType.isFiltered&&n.okBtn(),o&&!o.classList.contains("e-disabled")&&(e=n.transform.zoomFactor,n.frameDestPoints=sf.base.extend({},n.img,{},!0),sf.base.isNullOrUndefined(n.cxtTbarHeight)&&(t=sf.base.extend({},n.frameObj,{},!0),i=sf.base.extend({},n.tempFrameObj,{},!0),this.callFrameToolbar(),n.frameObj.type="mat",this.callFrameToolbar(),n.cxtTbarHeight=n.element.querySelector("#"+s+"_customizeWrapper").scrollHeight,n.frameObj=t,n.tempFrameObj=i),this.zoomToFrameRange(),n.tempFrameZoomLevel=e,sf.base.Browser.isDevice?n.img.destTop-=n.cxtTbarHeight/2:n.img.destTop+=n.cxtTbarHeight/2,this.callFrameToolbar())},e.prototype.zoomToFrameRange=function(){var e=this.parent;for(this.isFrameToolbar=!1,e.notify("transform",{prop:"resetZoom",onPropertyChange:!1});!(this.toolbarHeight+e.img.destTop>=this.toolbarHeight+e.cxtTbarHeight);)e.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null,isResize:!0}});this.isFrameToolbar=!0},e.prototype.resizeClick=function(){var e=this.parent;e.notify("draw",{prop:"updateCropSelection",onPropertyChange:!1}),e.upperCanvas.style.cursor="default",e.notify("transform",{prop:"updateResize",value:{bool:!1}}),this.isAspectRatio?this.isAspectRatio=!1:this.isAspectRatio=!0,e.isResize=!0,this.refreshToolbar("resize")},e.prototype.callFrameToolbar=function(){var e=this.parent;sf.base.extend(e.tempFrameObj,e.frameObj);var t={appliedUndoRedoColl:[]};if(e.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:t}}),0===t.appliedUndoRedoColl.length){var i={currObj:{}};e.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:i}}),e.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:i.currObj,previousObjColl:i.currObj.objColl,previousPointColl:i.currObj.pointColl,previousSelPointColl:i.currObj.selPointColl,previousCropObj:sf.base.extend({},e.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}this.refreshToolbar("frame")},e.prototype.contextualToolbarClicked=function(e){var t=this.parent,i=t.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected");i&&i.classList.remove("e-selected");var n=e.item.id.replace(t.element.id,"").split("_")[1],s={filter:t.toPascalCase(n),cancel:!1};t.trigger("imageFiltering",s),s.cancel||(document.getElementById(e.item.id+"Canvas").parentElement.parentElement.classList.add("e-selected"),t.currObjType.isFiltered=!0,t.notify("filter",{prop:"applyImageFilter",value:{option:n.toLowerCase()}}),t.notify("draw",{prop:"redrawDownScale"}),t.currentFilter=e.item.id,this.enableDisableTbrBtn(),t.isFilterCanvasClick=!0,t.curFilterObjEvent=s)},e.prototype.refreshShapeDrawing=function(){var e=this.parent,t={shape:""};e.notify("selection",{prop:"getCurrentDrawingShape",onPropertyChange:!1,value:{obj:t}}),""!==t.shape&&(e.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),e.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.refreshToolbar("main",!1))},e.prototype.zoomInBtnClickHandler=function(e){if(e){var t=this.parent;if((t.zoomSettings.zoomTrigger&s.Toolbar)===s.Toolbar){if(t.currObjType.isFiltered&&t.okBtn(),this.refreshShapeDrawing(),sf.base.Browser.isDevice&&"touchstart"===e.type){if(!e.returnValue)return;e.preventDefault()}var i=document.querySelector("#"+t.element.id+"_zoomIn");sf.base.EventHandler.trigger(i,"click");var n={bool:!1};t.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:n}}),n.bool&&(t.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.destroyQuickAccessToolbar()),t.isZoomBtnClick=!0,this.applyPreviewFilter(),t.currObjType.isFiltered=!1,t.togglePen&&(t.currObjType.isZoomed=!0,t.freeHandDraw(!1),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})),t.notify("draw",{prop:"resetCurrentSelectionPoint"}),t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null,isResize:null}}),t.notify("draw",{prop:"redrawDownScale"}),(t.isCropTab||t.activeObj.shape)&&(t.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),t.notify("freehand-draw",{prop:"resetStraightenPoint"})),t.isStraightening&&(t.notify("draw",{prop:"resetStraightenDestPoints"}),t.notify("draw",{prop:"setDestForStraighten"}))}}},e.prototype.zoomOutBtnClickHandler=function(e){if(e){var t=this.parent;if((t.zoomSettings.zoomTrigger&s.Toolbar)===s.Toolbar){if(t.currObjType.isFiltered&&t.okBtn(),this.refreshShapeDrawing(),sf.base.Browser.isDevice&&"touchstart"===e.type){if(!e.returnValue)return;e.preventDefault()}var i=document.querySelector("#"+t.element.id+"_zoomOut");sf.base.EventHandler.trigger(i,"click");var n={bool:!1};t.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:n}}),n.bool&&(t.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.destroyQuickAccessToolbar()),t.isZoomBtnClick=!0,this.applyPreviewFilter(),t.currObjType.isFiltered=!1,t.togglePen&&(t.currObjType.isZoomed=!0,t.freeHandDraw(!1),t.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})),t.notify("draw",{prop:"resetCurrentSelectionPoint"}),t.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null,isResize:null}}),t.notify("draw",{prop:"redrawDownScale"}),(t.isCropTab||t.activeObj.shape)&&(t.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),t.notify("freehand-draw",{prop:"resetStraightenPoint"})),t.isStraightening&&(t.notify("draw",{prop:"resetStraightenDestPoints"}),t.notify("draw",{prop:"setDestForStraighten"}))}}},e.prototype.zoomInBtnMouseDownHandler=function(e){e.preventDefault(),this.zoomBtnHold=setInterval(this.zoomInBtnClickHandler.bind(this),250)},e.prototype.zoomOutBtnMouseDownHandler=function(e){e.preventDefault(),this.zoomBtnHold=setInterval(this.zoomOutBtnClickHandler.bind(this),250)},e.prototype.zoomBtnMouseUpHandler=function(){clearInterval(this.zoomBtnHold),this.zoomBtnHold=0},e.prototype.closeContextualToolbar=function(){var e=this.parent,t=e.element.id,i=!1,n=e.isStraightening;return(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&!n)&&(e.element.querySelector("#"+t+"_contextualToolbar")&&!e.element.querySelector("#"+t+"_contextualToolbar").parentElement.classList.contains("e-hide")||e.element.querySelector("#"+t+"_headWrapper")&&!e.element.querySelector("#"+t+"_headWrapper").parentElement.classList.contains("e-hide"))&&(e.element.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hide"),e.okBtn(),this.refreshMainToolbar(),i=!0),i},e.prototype.destroyQuickAccessToolbar=function(){var e=this.parent.element.id,t=document.getElementById(e+"_quickAccessToolbar");t&&t.classList.contains("e-control")&&sf.base.getComponent(t,"toolbar").destroy();var i=document.getElementById(e+"_quickAccessToolbarArea");i&&(i.style.display="none")},e.prototype.renderSlider=function(e,t){var i=this.parent,n=i.element.id,s=document.querySelector("#"+n+"_contextualToolbarArea"),o=document.querySelector("#"+n+"_headWrapper"),r=document.querySelector("#"+n+"_labelWrapper");o&&(o.remove(),r.remove()),o=s.appendChild(i.createElement("div",{id:n+"_headWrapper",styles:"position: relative"})),(r="transparency"===e?o.appendChild(i.createElement("label",{id:n+"_labelWrapper",styles:sf.base.Browser.isDevice?"position: absolute; top: 25%; left: calc(50% - 150px); font-size: 15px; text-transform: capitalize; font-weight: 400;":"position: absolute; top: 25%; left: calc(50% - 250px); font-size: 15px; text-transform: capitalize; font-weight: 400;"})):o.appendChild(i.createElement("label",{id:n+"_labelWrapper",styles:sf.base.Browser.isDevice?"position: absolute; top: 25%; left: calc(50% - 150px); font-size: 15px; text-transform: capitalize; font-weight: 400;":"position: absolute; top: 25%; left: calc(50% - 226px); font-size: 15px; text-transform: capitalize; font-weight: 400;"}))).textContent=this.l10n.getConstant(i.toPascalCase("transparency"===e?"opacity":e));var a,l,h,d=o.appendChild(i.createElement("div",{id:n+"_sliderWrapper",styles:"position: absolute"})),c=i.getCurrAdjustmentValue(e);(t&&"straighten"===e&&sf.base.Browser.isDevice&&(c=i.cropObj.straighten),"brightness"===e||"contrast"===e||"saturation"===e||"exposure"===e?(i.finetuneSettings?"brightness"===e&&i.finetuneSettings.brightness?(a=i.finetuneSettings.brightness.min,l=i.finetuneSettings.brightness.max):"contrast"===e&&i.finetuneSettings.contrast?(a=i.finetuneSettings.contrast.min,l=i.finetuneSettings.contrast.max):"saturation"===e&&i.finetuneSettings.saturation?(a=i.finetuneSettings.saturation.min,l=i.finetuneSettings.saturation.max):"exposure"===e&&i.finetuneSettings.exposure?(a=i.finetuneSettings.exposure.min,l=i.finetuneSettings.exposure.max):(a=-100,l=100):(a=-100,l=100),h=this.createSlider(a,l,c,e)):"hue"===e||"blur"===e||"opacity"===e?(i.finetuneSettings?"hue"===e&&i.finetuneSettings.hue?(a=i.finetuneSettings.hue.min,l=i.finetuneSettings.hue.max):"blur"===e&&i.finetuneSettings.blur?(a=i.finetuneSettings.blur.min,l=i.finetuneSettings.blur.max):"opacity"===e&&i.finetuneSettings.opacity?(a=i.finetuneSettings.opacity.min,l=i.finetuneSettings.opacity.max):(a=0,l=100):(a=0,l=100),h=this.createSlider(a,l,c,e)):"transparency"===e?(a=0,l=100,h=this.createSlider(a,l,c,e)):"straighten"===e&&(a=-45,l=45,h=this.createSlider(a,l,c,e)),h.appendTo("#"+n+"_sliderWrapper"),d.style.left=(parseFloat(s.style.width)-parseFloat(h.width))/2+"px","straighten"===e&&sf.base.Browser.isDevice)&&(o.appendChild(i.createElement("label",{id:n+"_sLabelWrapper",className:"e-ie-straighten-value-span",styles:"position: absolute; top: 25%; margin-left: 20px; font-size: 15px; text-transform: capitalize; font-weight: 400;"})).innerHTML=i.transform.straighten.toString()+"&#176",d.parentElement.classList.add("e-straighten-slider"));"straighten"!==e&&(o.appendChild(i.createElement("label",{id:n+"_finetuneSpan",className:"e-ie-finetune-value-span",styles:sf.base.Browser.isDevice?"position: absolute; top: 25%; margin-left: 20px; font-size: 15px; text-transform: capitalize; font-weight: 400;":"position: absolute; top: 25%; left: calc(50% + 190px); font-size: 15px; text-transform: capitalize; font-weight: 400;"})),d.parentElement.classList.add("e-finetune-slider"),this.updateFinetuneSpan(e))},e.prototype.createSlider=function(e,t,i,n){var s=this,o=this.parent,r="straighten"===n?3:1;return new sf.inputs.Slider({value:i,type:"MinRange",min:e,max:t,step:r,width:sf.base.Browser.isDevice?"180px":"straighten"===n?"200px":"300px",cssClass:"e-slider",change:function(e){if("transparency"===n){if(o.activeObj.shape){var t,i=void 0;sf.base.isNullOrUndefined(o.activeObj.imageRatio)&&o.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),o.notify("shape",{prop:"pushActItemIntoObj"}),t=sf.base.extend({},o.cropObj,{},!0);var r={currObj:{}};o.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}}),(i=r.currObj).objColl=sf.base.extend([],o.objColl,[],!0),i.pointColl=sf.base.extend([],o.pointColl,[],!0),i.afterCropActions=sf.base.extend([],o.afterCropActions,[],!0);var a={selPointColl:null};o.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),i.selPointColl=sf.base.extend([],a.selPointColl,[],!0),o.objColl.pop(),o.activeObj.opacity=e.value/100,s.upperContext.clearRect(0,0,o.upperCanvas.width,o.upperCanvas.height),o.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),o.objColl.push(o.activeObj),o.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:i,previousObjColl:i.objColl,previousPointColl:i.pointColl,previousSelPointColl:i.selPointColl,previousCropObj:t,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),o.notify("selection",{prop:"redrawShape",value:{obj:o.objColl[o.objColl.length-1]}}),s.updateFinetuneSpan(n)}}else"straighten"===n?o.setStraighten(e.value):(o.transform.zoomFactor&&o.transform.zoomFactor<0&&(o.isFinetuning=!0),o.notify("selection",{prop:"setSliding",value:{bool:!0}}),o.setCurrAdjustmentValue(n,e.value),s.updateFinetuneSpan(n),s.enableDisableTbrBtn(),o.isFinetuning=!1)},changed:function(){"transparency"!==n&&"straighten"!==n&&(o.notify("selection",{prop:"setSliding",value:{bool:!1}}),o.notify("draw",{prop:"redrawDownScale"}))}})},e.prototype.updateFinetuneSpan=function(e){var t=this.parent,i=t.element.querySelector(".e-ie-finetune-value-span");if(i){var n={adjustmentLevel:null};t.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:n}}),i.innerHTML=Math.round(n.adjustmentLevel[e]).toString()}},e.prototype.applyPreviewFilter=function(){var e=this.parent;(document.querySelector("#"+e.element.id+"_sliderWrapper")||e.currObjType.isFiltered)&&(e.initialAdjustmentValue=this.lowerContext.filter,e.canvasFilter=this.lowerContext.filter,e.currObjType.isFiltered=!1)},e.prototype.unselectBtn=function(){for(var e=this.parent.element.id,t=0,i=["#"+e+"_brightness","#"+e+"_contrast","#"+e+"_hue","#"+e+"_saturation","#"+e+"_opacity","#"+e+"_blur","#"+e+"_exposure"];t<i.length;t++){var n=i[t],s=document.querySelector(n);if(s&&s.classList.contains("e-selected-btn")){s.classList.remove("e-selected-btn");break}}},e.prototype.openSlider=function(e){this.unselectBtn(),this.parent.currObjType.isFiltered=!0,this.refreshToolbar("color",null,null,null,e),document.getElementById(this.parent.element.id+"_"+e).classList.add("e-selected-btn")},e.prototype.refreshSlider=function(){var e=this.parent.element.id,t=document.querySelector("#"+e+"_sliderWrapper"),i=document.querySelector(".e-slider"),n=document.querySelector("#"+e+"_headWrapper");n&&(n.style.display="none"),t&&i&&(i.ej2_instances[0].destroy(),t.remove())},e.prototype.unselectFrameBtn=function(){for(var e=this.parent.element.id,t=0,i=["#"+e+"_none","#"+e+"_mat","#"+e+"_line","#"+e+"_inset","#"+e+"_bevel","#"+e+"_hook"];t<i.length;t++){var n=i[t],s=document.querySelector(n);if(s.classList.contains("e-selected-btn")){s.classList.remove("e-selected-btn");break}}},e.prototype.updateToolbarItems=function(){var e=this.parent,t=e.element.id;if(e.isImageLoaded){var i=e.element.querySelector(".e-fill.e-template .e-dropdownbtn-preview"),n=e.element.querySelector(".e-stroke.e-template .e-dropdownbtn-preview"),s=e.element.querySelector(".e-text-font-color.e-template .e-dropdownbtn-preview"),o=e.element.querySelector(".e-pen-stroke-color.e-template .e-dropdownbtn-preview"),r=e.element.querySelector(".e-shape-stroke-width"),a=e.element.querySelector(".e-text-font-family"),l=e.element.querySelector(".e-text-font-size"),h=e.element.querySelector("#"+t+"_bold"),d=e.element.querySelector("#"+t+"_italic");if(e.activeObj.strokeSettings&&e.activeObj.textSettings){if(sf.base.isNullOrUndefined(e.activeObj.strokeSettings.strokeWidth)&&(e.activeObj.strokeSettings.strokeWidth=2),i){var c=e.activeObj.strokeSettings.fillColor;""===e.activeObj.strokeSettings.fillColor?i.classList.add("e-nocolor-item"):(i.classList.remove("e-nocolor-item"),i.style.background=c),document.querySelector("#"+t+"_shape_fill")&&(sf.base.getComponent(t+"_shape_fill","colorpicker").value=c)}if(n){c=e.activeObj.strokeSettings.strokeColor;n.style.background=c,document.querySelector("#"+t+"_shape_stroke")&&(sf.base.getComponent(t+"_shape_stroke","colorpicker").value=c)}if(s){c=e.activeObj.strokeSettings.strokeColor;s.style.background=c,document.querySelector("#"+t+"_text_font")&&(sf.base.getComponent(t+"_text_font","colorpicker").value=c)}if(o){c=e.activeObj.strokeSettings.strokeColor;o.style.background=c,document.querySelector("#"+t+"_pen_stroke")&&(sf.base.getComponent(t+"_pen_stroke","colorpicker").value=c);e.notify("freehand-draw",{prop:"getPenOpacity",onPropertyChange:!1,value:{obj:{penOpacity:1}}})}if(a&&(sf.base.Browser.isDevice?a.setAttribute("style","font-family:"+e.activeObj.textSettings.fontFamily.toLowerCase()):a.textContent=e.activeObj.textSettings.fontFamily),l)for(var p=0;p<e.fontSizeColl.length;p++)if(parseInt(e.fontSizeColl[p].text,10)>=Math.round(e.activeObj.textSettings.fontSize)){l.textContent=(p+1).toString();break}if(h&&(e.activeObj.textSettings.bold?h.classList.add("e-selected-btn"):h.classList.remove("e-selected-btn")),d&&(e.activeObj.textSettings.italic?d.classList.add("e-selected-btn"):d.classList.remove("e-selected-btn")),r){var u=Math.round(e.activeObj.strokeSettings.strokeWidth).toString();r.textContent=this.getStrokeWidth(u)}}}},e.prototype.getStrokeWidth=function(e){var t;switch(parseInt(e,10)/2){case 0:t=this.l10n.getConstant("NoOutline");break;case 1:t=this.l10n.getConstant("XSmall");break;case 2:t=this.l10n.getConstant("Small");break;case 3:t=this.l10n.getConstant("Medium");break;case 4:t=this.l10n.getConstant("Large");break;case 5:t=this.l10n.getConstant("XLarge")}return t},e.prototype.cancelPan=function(){var e=this.parent;e.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}});var t=e.element.querySelector(".e-img-pan .e-btn");t&&t.classList.remove("e-selected-btn"),e.pan(!1)},e.prototype.refreshMainToolbar=function(){"main"!==this.currToolbar&&this.refreshToolbar("main")},e.prototype.destroySubComponents=function(){for(var e=this.parent,t=e.element.querySelectorAll("input.e-control"),i=e.element.querySelectorAll("button.e-control"),n=0,s=t.length;n<s;n++)t[n].classList.contains("e-color-picker")&&(sf.base.getComponent(t[n],"color-picker").destroy(),sf.base.detach(sf.base.select("input#"+t[n].id,e.element)));for(n=0,s=i.length;n<s;n++)i[n].classList.contains("e-dropdown-btn")?(sf.base.getComponent(i[n],"dropdown-btn").destroy(),sf.base.detach(sf.base.select("button#"+i[n].id,e.element))):i[n].classList.contains("e-btn")&&(sf.base.getComponent(i[n],"btn").destroy(),sf.base.detach(sf.base.select("button#"+i[n].id,e.element)))},e.prototype.setInitialShapeSettings=function(e){var t=this.parent;t.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),t.currObjType.shape=e.item.id,t.activeObj.shape=t.currObjType.shape.toLowerCase(),t.currObjType.isDragging=t.currObjType.isCustomCrop=!1,t.activeObj.shapeDegree=t.transform.degree,t.activeObj.shapeFlip=t.transform.currFlipState,t.activeObj.textFlip=t.transform.currFlipState,t.activeObj.flipObjColl=[]},e.prototype.getModuleName=function(){return"toolbar-module"},e}(),x=(w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),N=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),N([sf.base.Property(null)],t.prototype,"brightness",void 0),N([sf.base.Property(null)],t.prototype,"contrast",void 0),N([sf.base.Property(null)],t.prototype,"hue",void 0),N([sf.base.Property(null)],t.prototype,"saturation",void 0),N([sf.base.Property(null)],t.prototype,"exposure",void 0),N([sf.base.Property(null)],t.prototype,"opacity",void 0),N([sf.base.Property(null)],t.prototype,"blur",void 0),t}(sf.base.ChildProperty),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),N([sf.base.Property(null)],t.prototype,"zoomTrigger",void 0),N([sf.base.Property(1)],t.prototype,"minZoomFactor",void 0),N([sf.base.Property(10)],t.prototype,"maxZoomFactor",void 0),N([sf.base.Property(1)],t.prototype,"zoomFactor",void 0),N([sf.base.Property(null)],t.prototype,"zoomPoint",void 0),t}(sf.base.ChildProperty),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),N([sf.base.Property(!0)],t.prototype,"showCircle",void 0),N([sf.base.Property(null)],t.prototype,"strokeColor",void 0),N([sf.base.Property(null)],t.prototype,"fillColor",void 0),t}(sf.base.ChildProperty),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),N([sf.base.Property("Arial")],t.prototype,"default",void 0),N([sf.base.Property(null)],t.prototype,"items",void 0),t}(sf.base.ChildProperty),D=function(e){function t(t,n){var s=e.call(this,t)||this;return s.isImageLoaded=!1,s.activeObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[],rotatedAngle:0,opacity:1},s.currObjType={shape:"",isDragging:!1,isActiveObj:!1,isText:!1,isInitialText:!1,isLine:!1,isInitialLine:!1,isCustomCrop:!1,isZoomed:!1,isUndoZoom:!1,isUndoAction:!1,isFiltered:!1,isSave:!1,isResize:!1},s.objColl=[],s.pointColl={},s.freehandCounter=0,s.points=[],s.togglePen=!1,s.togglePan=!1,s.img={destLeft:0,destTop:0,destWidth:0,destHeight:0,srcLeft:0,srcTop:0,srcWidth:0,srcHeight:0},s.rotateFlipColl=[],s.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",straighten:0,destPoints:{startX:0,startY:0,width:0,height:0},srcPoints:{startX:0,startY:0,width:0,height:0},filter:"",isBrightAdjust:!1,zoomFactor:0,previousZoomValue:0,aspectWidth:null,aspectHeight:null,frame:"none",straightenZoom:0,adjustmentLevel:{brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},currentFilter:""},s.afterCropActions=[],s.transform={degree:0,currFlipState:"",zoomFactor:0,cropZoomFactor:null,defaultZoomFactor:0,straighten:0},s.panPoint={currentPannedPoint:{x:0,y:0},totalPannedPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0}},s.isUndoRedo=!1,s.isCropTab=!1,s.isCircleCrop=!1,s.fontSizeColl=[],s.initialAdjustmentValue="",s.currentFilter="",s.canvasFilter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",s.toolbarHeight=0,s.isPublicMethod=!1,s.isCropToolbar=!1,s.cursor="default",s.resizeSrc={startX:s.img.srcLeft,startY:s.img.srcTop,width:s.img.srcWidth,height:s.img.srcHeight},s.isResize=!1,s.isAspectRatio=!1,s.frameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""},s.tempFrameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""},s.allowDownScale=!0,s.gradientColor="",s.size=20,s.inset=0,s.offset=0,s.borderRadius=0,s.lineCount=0,s.prevStraightenedDegree=0,s.tempStraighten=0,s.isStraightening=!1,s.isFinetuning=!1,s.isZoomBtnClick=!1,s.isFinetuneBtnClick=!1,s.isFilterCanvasClick=!1,s.isFrameBtnClick=!1,s.isChangesSaved=!1,sf.base.isBlazor()?(new p(s),new u(s),new g(s),new m(s),new v(s),new b(s),new y(s),new C(s),new f(s)):(i.Inject(p,u,v,y,f,S),i.Inject(C),i.Inject(g),i.Inject(b),i.Inject(m),n&&s.appendTo(n)),s}var i;return x(t,e),i=t,t.prototype.requiredModules=function(){var e=[];return e.push({member:"crop",args:[this]}),e.push({member:"draw",args:[this]}),e.push({member:"selection",args:[this]}),e.push({member:"transform",args:[this]}),e.push({member:"export",args:[this]}),e.push({member:"toolbar-module",args:[this]}),e.push({member:"undo-redo",args:[this]}),e.push({member:"filter",args:[this]}),e.push({member:"shape",args:[this]}),e.push({member:"freehand-draw",args:[this]}),e},t.prototype.preRender=function(){this.element.id=this.element.id||sf.base.getUniqueID("ej2-image-editor"),sf.base.Browser.isDevice&&this.element.classList.add("e-device"),this.initializeThemeColl()},t.prototype.render=function(){this.initialize()},t.prototype.getModuleName=function(){return"image-editor"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,t){for(var i,n=0,o=Object.keys(e);n<o.length;n++){switch(o[n]){case"cssClass":t.cssClass&&sf.base.removeClass([this.element],t.cssClass.replace(/\s+/g," ").trim().split(" ")),e.cssClass&&sf.base.addClass([this.element],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"disabled":e.disabled?(this.element.classList.add("e-disabled"),this.unwireEvent()):(this.element.classList.remove("e-disabled"),this.wireEvent());break;case"height":this.element.style.height=e.height,this.update();break;case"width":this.element.style.width=e.width,this.update();break;case"theme":e.theme&&(this.theme&&""!==this.theme?this.theme=this.toPascalCase(this.theme):this.theme="Bootstrap5",this.upperContext.strokeStyle=this.themeColl[this.theme].primaryColor,this.upperContext.fillStyle=this.themeColl[this.theme].secondaryColor,sf.base.isBlazor()?this.updateToolbar(this.element,"imageLoaded"):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}));break;case"finetuneSettings":e.finetuneSettings&&(this.finetuneSettings=e.finetuneSettings,this.notify("filter",{prop:"update-finetunes"}));break;case"locale":e.locale&&(this.notify("toolbar",{prop:"setLocale",onPropertyChange:!1,value:{locale:e.locale}}),sf.base.isBlazor()?this.updateToolbar(this.element,"imageLoaded"):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}));break;case"allowUndoRedo":e.allowUndoRedo?this.allowUndoRedo=!0:this.allowUndoRedo=!1,sf.base.isBlazor()?this.updateToolbar(this.element,"imageLoaded"):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}});break;case"showQuickAccessToolbar":e.showQuickAccessToolbar?(this.showQuickAccessToolbar=!0,sf.base.isBlazor()||this.notify("toolbar",{prop:"create-qa-toolbar",onPropertyChange:!1}),i={freehandSelectedIndex:null},this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:i}}),this.activeObj.shape?sf.base.isBlazor()?this.updateToolbar(this.element,"quickAccessToolbar",this.activeObj.shape):this.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}):i.freehandSelectedIndex&&(sf.base.isBlazor()?this.updateToolbar(this.element,"quickAccessToolbar","pen"):this.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:!0}}))):(this.showQuickAccessToolbar=!1,sf.base.isBlazor()?this.updateToolbar(this.element,"destroyQuickAccessToolbar"):this.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}));break;case"zoomSettings":e.zoomSettings&&(this.zoomSettings.zoomTrigger=e.zoomSettings.zoomTrigger),sf.base.isNullOrUndefined(this.zoomSettings.zoomTrigger)?(this.zoomSettings.zoomTrigger=s.MouseWheel|s.Pinch|s.Toolbar|s.Commands,sf.base.isBlazor()?this.updateToolbar(this.element,"imageLoaded"):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}})):(e.zoomSettings.zoomTrigger&s.Toolbar)===s.Toolbar&&(sf.base.isBlazor()?this.updateToolbar(this.element,"imageLoaded"):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}));break;case"selectionSettings":e.selectionSettings&&(this.selectionSettings=e.selectionSettings,this.activeObj.shape&&(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:this.activeObj}})));break;case"toolbar":e.toolbar&&(this.toolbar=e.toolbar,sf.base.isBlazor()?this.updateToolbar(this.element,"imageLoaded"):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:null,isCropping:null,isZooming:null,cType:null}}));break;case"toolbarTemplate":e.toolbarTemplate&&(sf.base.isBlazor()||(this.notify("toolbar",{prop:"destroy-bottom-toolbar",onPropertyChange:!1}),this.notify("toolbar",{prop:"destroy-top-toolbar",onPropertyChange:!1}),this.element.appendChild(this.createElement("div",{id:this.element.id+"_toolbarArea",className:"e-toolbar-area"})),this.toolbarTemplateFn()));break;case"quickAccessToolbarTemplate":e.quickAccessToolbarTemplate&&(sf.base.isBlazor()||(this.notify("toolbar",{prop:"destroy-qa-toolbar",onPropertyChange:!1}),this.quickAccessToolbarTemplateFn()))}}},t.prototype.destroy=function(){var t=[];this.element.removeAttribute("tabindex"),this.cssClass&&(t=t.concat(this.cssClass.replace(/\s+/g," ").trim().split(" "))),sf.base.removeClass([this.element],t),this.element.getAttribute("class")||this.element.removeAttribute("class"),sf.base.isBlazor()?this.element.classList.remove("e-image-editor"):(this.notify("toolbar",{prop:"destroySubComponents",onPropertyChange:!1}),this.notify("destroyed",null),e.prototype.destroy.call(this)),this.unwireEvent(),this.element.innerHTML=""},t.prototype.initialize=function(){if(this.toolbarTemplate?(this.element.appendChild(this.createElement("div",{id:this.element.id+"_toolbarArea",className:"e-toolbar-area"})),this.toolbarTemplateFn()):(this.notify("toolbar",{prop:"create-toolbar",onPropertyChange:!1}),this.notify("toolbar",{prop:"create-contextual-toolbar",onPropertyChange:!1})),this.createCanvas(),this.element.offsetWidth>359&&this.element.querySelector(".e-ie-min-drop-content")&&this.element.querySelector(".e-ie-drop-content")&&(this.element.querySelector(".e-ie-min-drop-content").style.display="none",this.element.querySelector(".e-ie-drop-content").style.display="block"),this.createDropUploader(),this.showQuickAccessToolbar){document.querySelector("#"+this.element.id+"_canvasWrapper").appendChild(this.createElement("div",{id:this.element.id+"_quickAccessToolbarArea",className:"e-quick-access-toolbar-area"}));var e=document.getElementById(this.element.id+"_quickAccessToolbarArea");e.style.position="absolute",e.style.display="none",this.activeObj&&(e.style.left=this.activeObj.activePoint.startX+"px",e.style.top=this.activeObj.activePoint.startY+"px"),e.style.width="100%"}this.quickAccessToolbarTemplate?this.quickAccessToolbarTemplateFn():this.notify("toolbar",{prop:"create-qa-toolbar",onPropertyChange:!1}),this.wireEvent(),this.lowerContext=this.lowerCanvas.getContext("2d"),this.upperContext=this.upperCanvas.getContext("2d"),this.inMemoryContext=this.inMemoryCanvas.getContext("2d"),this.lowerContext.filter=this.getDefaultFilter(),this.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),this.canvasFilter=this.lowerContext.filter,this.notify("toolbar",{prop:"setInitialAdjustmentValue",onPropertyChange:!1,value:{value:this.lowerContext.filter}}),this.cssClass&&sf.base.addClass([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.element&&sf.popups.createSpinner({target:this.element}),this.initializeZoomSettings()},t.prototype.createDropUploader=function(){var e=this;new sf.inputs.Uploader({dropArea:document.getElementsByClassName("e-canvas-wrapper")[0],allowedExtensions:".jpg, .jpeg, .png,.svg",multiple:!1,selected:function(t){if("change"===t.event.type||"drop"===t.event.type){var i=t.filesData[0].type,n="unsupported";"change"!==t.event.type&&("drop"!==t.event.type||1!==t.event.dataTransfer.files.length)||"png"!==i&&"jpg"!==i&&"jpeg"!==i&&"svg"!==i?("drop"===t.event.type&&t.event.dataTransfer.files.length>1&&(n="multi-select-image"),e.showDialogPopup(n)):e.notify("draw",{prop:"fileSelect",value:{inputElement:e.element.querySelector("#"+e.element.id+"_dropfileUpload"),args:t}})}}}).appendTo("#"+this.element.id+"_dropfileUpload")},t.prototype.dlgCloseBtnClick=function(){sf.base.getComponent(document.getElementById(this.element.id+"_dialog"),"dialog").destroy()},t.prototype.showDialogPopup=function(e){var t,i="";this.element.querySelector("#"+this.element.id+"_dialog").style.display="block";var n={key:"OK"};if(this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:n}}),"multi-select-image"===e){t={key:"ImageErrorDialogHeader"},this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:t}});var s={key:"ImageErrorDialogContent"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:s}}),i="<span>"+s.value+"</span>"}else{t={key:"AlertDialogHeader"},this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:t}});s={key:"AlertDialogContent"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:s}});var o={key:"SupportText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:o}}),i="<span>"+s.value+" "+o.value+"<b> JPG, PNG, and SVG</b></span>"}new sf.popups.Dialog({header:t.value,closeOnEscape:!0,content:i,target:document.getElementById("target"),width:"285px",isModal:!0,animationSettings:{effect:"Zoom"},close:this.dlgCloseBtnClick.bind(this),buttons:[{click:this.dlgCloseBtnClick.bind(this),buttonModel:{content:n.value,iconCss:"e-icons e-close"}}]}).appendTo("#"+this.element.id+"_dialog")},t.prototype.wireEvent=function(){sf.base.EventHandler.add(document,"keydown",this.keyDownEventHandler,this),sf.base.EventHandler.add(document,"keypress",this.keyUpEventHandler,this),sf.base.EventHandler.add(this.upperCanvas,"mousedown",this.mouseDownEventHandler,this),sf.base.EventHandler.add(this.upperCanvas,"mousemove",this.mouseMoveEventHandler,this),sf.base.EventHandler.add(this.upperCanvas,"mouseup",this.mouseUpEventHandler,this),sf.base.EventHandler.add(document,"mouseup",this.mouseUpEventHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"mousedown",this.canvasMouseDownHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"mousemove",this.canvasMouseMoveHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"mouseup",this.canvasMouseUpHandler,this),sf.base.EventHandler.add(document,"mouseup",this.canvasMouseUpHandler,this),sf.base.EventHandler.add(this.upperCanvas,"touchstart",this.touchStartHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"touchstart",this.touchStartHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"mousewheel DOMMouseScroll",this.handleScroll,this),sf.base.EventHandler.add(this.upperCanvas,"mousewheel DOMMouseScroll",this.handleScroll,this),window.addEventListener("resize",this.windowResizeHandler.bind(this)),sf.base.Browser.isIos||"safari"===sf.base.Browser.info.name||screen.orientation.addEventListener("change",this.screenOrientation.bind(this)),this.notify("shape",{prop:"wireEvent",onPropertyChange:!1})},t.prototype.unwireEvent=function(){sf.base.EventHandler.remove(document,"keydown",this.keyDownEventHandler),sf.base.EventHandler.remove(document,"keypress",this.keyUpEventHandler),sf.base.EventHandler.remove(this.upperCanvas,"mousedown",this.mouseDownEventHandler),sf.base.EventHandler.remove(this.upperCanvas,"mousemove",this.mouseMoveEventHandler),sf.base.EventHandler.remove(this.upperCanvas,"mouseup",this.mouseUpEventHandler),sf.base.EventHandler.remove(document,"mouseup",this.mouseUpEventHandler),sf.base.EventHandler.remove(this.lowerCanvas,"mousedown",this.canvasMouseDownHandler),sf.base.EventHandler.remove(this.lowerCanvas,"mousemove",this.canvasMouseMoveHandler),sf.base.EventHandler.remove(this.lowerCanvas,"mouseup",this.canvasMouseUpHandler),sf.base.EventHandler.remove(document,"mouseup",this.canvasMouseUpHandler),sf.base.EventHandler.remove(this.upperCanvas,"touchstart",this.touchStartHandler),sf.base.EventHandler.remove(this.lowerCanvas,"touchstart",this.touchStartHandler),sf.base.EventHandler.remove(this.lowerCanvas,"mousewheel DOMMouseScroll",this.handleScroll),sf.base.EventHandler.remove(this.upperCanvas,"mousewheel DOMMouseScroll",this.handleScroll),window.removeEventListener("resize",this.windowResizeHandler.bind(this)),sf.base.Browser.isIos||"safari"===sf.base.Browser.info.name||screen.orientation.removeEventListener("change",this.screenOrientation.bind(this)),this.notify("shape",{prop:"unWireEvent",onPropertyChange:!1}),this.notify("selection",{prop:"unWireEvent",onPropertyChange:!1})},t.prototype.createCanvas=function(){var e=this;this.element.style.boxSizing="border-box";var t={toolbarHeight:0};this.notify("toolbar",{prop:"getToolbarHeight",value:{obj:t}});var i=t.toolbarHeight;this.element.style.width=this.width,this.element.style.height=this.height;var n=this.element.appendChild(this.createElement("div",{id:this.element.id+"_canvasWrapper",className:"e-canvas-wrapper",attrs:{style:"height:"+(this.element.offsetHeight-i-2)+"px; width:"+(this.element.offsetWidth-2)+"px; position: relative; overflow: hidden; margin: 0 auto;"}})),s={key:"DragText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:s}});var o={key:"DropText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:o}});var r={key:"BrowseText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:r}});var a={key:"SupportText"};this.notify("toolbar",{prop:"getLocaleText",onPropertyChange:!1,value:{obj:a}});var l=this.createElement("div",{id:this.element.id+"_dropArea",className:"e-ie-drop-area",attrs:{style:"position: relative;"}}),h=this.createElement("span",{className:"e-ie-drop-icon e-icons e-image",attrs:{style:"position: absolute;"}}),d=this.createElement("span",{className:"e-ie-drop-content",attrs:{style:"position: absolute; display: none;"}});d.textContent=s.value+" ";var c=this.createElement("span",{className:"e-ie-min-drop-content",attrs:{style:"position: absolute;"}});c.textContent=o.value+" ";var p=this.createElement("a",{id:this.element.id+"_dropBrowse",className:"e-ie-drop-browse"});p.textContent=r.value;var u=this.createElement("a",{id:this.element.id+"_dropBrowse",className:"e-ie-drop-browse"});u.textContent=r.value,d.appendChild(p),c.appendChild(u),p.href="",u.href="";var f=this.createElement("span",{className:"e-ie-drop-info",attrs:{position:"absolute"}});f.textContent=a.value+" SVG, PNG, and JPG";var g=l.appendChild(this.createElement("input",{id:this.element.id+"_dropfileUpload",className:"e-fileUpload e-image-upload"}));g.setAttribute("type","file"),g.setAttribute("accept","image/*"),l.appendChild(h),l.appendChild(d),l.appendChild(c),l.appendChild(f),n.appendChild(l),this.lowerCanvas=n.appendChild(this.createElement("canvas",{id:this.element.id+"_lowerCanvas",attrs:{name:"canvasImage"}})),this.upperCanvas=n.appendChild(this.createElement("canvas",{id:this.element.id+"_upperCanvas",attrs:{name:"canvasImage"}})),this.inMemoryCanvas=this.createElement("canvas",{id:this.element.id+"_inMemoryCanvas",attrs:{name:"canvasImage"}}),this.baseImgCanvas=this.createElement("canvas",{id:this.element.id+"_baseImgCanvas",attrs:{name:"canvasImage"}}),this.textArea=n.appendChild(this.createElement("textarea",{id:this.element.id+"_textArea",className:"e-textarea",attrs:{name:"textArea"}})),this.element.appendChild(this.createElement("div",{id:this.element.id+"_dialog",className:"e-dialog"})).style.display="none";var m=this.element.appendChild(this.createElement("input",{id:this.element.id+"_fileUpload",className:"e-fileUpload"}));m.setAttribute("type","file"),m.setAttribute("accept","image/*"),m.style.display="none",this.textArea.setAttribute("spellcheck","false"),this.textArea.style.lineHeight="normal",this.lowerCanvas.style.width=this.upperCanvas.style.width=this.inMemoryCanvas.style.width="100%",this.lowerCanvas.style.height=this.upperCanvas.style.height=this.inMemoryCanvas.style.height="100%",this.upperCanvas.style.position=this.lowerCanvas.style.position=this.textArea.style.position="absolute",this.textArea.style.backgroundColor="transparent",this.textArea.style.display="none",this.textArea.style.resize="none",this.lowerContext=this.lowerCanvas.getContext("2d"),this.baseImg=this.createElement("img",{id:this.element.id+"_orgImg",attrs:{name:"Image",crossorigin:"anonymous"}}),this.upperCanvas.style.cursor=this.cursor="default",this.upperCanvas.style.display="block",this.upperContext=this.upperCanvas.getContext("2d"),document.getElementById(this.element.id+"_dropBrowse").onclick=function(){return e.element.querySelector("#"+e.element.id+"_dropfileUpload").click(),!1}},t.prototype.touchStartHandler=function(e){this.notify("selection",{prop:"touchStartHandler",onPropertyChange:!1,value:{e:e}})},t.prototype.mouseDownEventHandler=function(e){"e-ie-drop-browse"!==e.target.className&&this.notify("selection",{prop:"mouseDownEventHandler",onPropertyChange:!1,value:{e:e}})},t.prototype.mouseMoveEventHandler=function(e){this.notify("selection",{prop:"mouseMoveEventHandler",onPropertyChange:!1,value:{e:e}})},t.prototype.mouseUpEventHandler=function(e){"e-ie-drop-browse"!==e.target.className&&this.notify("selection",{prop:"mouseUpEventHandler",onPropertyChange:!1,value:{e:e}})},t.prototype.keyDownEventHandler=function(e){this.notify("selection",{prop:"keyDownEventHandler",onPropertyChange:!1,value:{e:e}})},t.prototype.keyUpEventHandler=function(e){"block"!==this.textArea.style.display&&"inline-block"!==this.textArea.style.display||e.target.id!==this.element.id+"_textArea"||this.notify("selection",{prop:"textKeyDown",value:{e:e}})},t.prototype.canvasMouseDownHandler=function(e){"e-ie-drop-browse"!==e.target.className&&this.notify("selection",{prop:"canvasMouseDownHandler",onPropertyChange:!1,value:{e:e}})},t.prototype.canvasMouseMoveHandler=function(e){this.notify("selection",{prop:"canvasMouseMoveHandler",onPropertyChange:!1,value:{e:e}})},t.prototype.canvasMouseUpHandler=function(e){"e-ie-drop-browse"!==e.target.className&&this.notify("selection",{prop:"canvasMouseUpHandler",onPropertyChange:!1,value:{e:e}})},t.prototype.handleScroll=function(e){this.notify("selection",{prop:"handleScroll",onPropertyChange:!1,value:{e:e}})},t.prototype.adjustToScreen=function(){this.update()},t.prototype.screenOrientation=function(){sf.base.Browser.isDevice&&setTimeout(this.adjustToScreen.bind(this),100)},t.prototype.windowResizeHandler=function(){!sf.base.Browser.isDevice&&this.element.classList.contains("e-image-editor")&&this.adjustToScreen()},t.prototype.notifyResetForAllModules=function(){for(var e=this.requiredModules(),t=0;t<e.length;t++)this.notify(e[t].member,{prop:"reset",onPropertyChange:!1})},t.prototype.allowShape=function(e,t){this.isPublicMethod=!0;var i={inRange:!1};return this.notify("shape",{prop:"isPointsInRange",onPropertyChange:!1,value:{x:e,y:t,obj:i}}),i.inRange},t.prototype.clearSelection=function(){this.notify("selection",{prop:"clearSelection",onPropertyChange:!1})},t.prototype.crop=function(){var e={isCrop:!1};return this.notify("crop",{prop:"crop",onPropertyChange:!1,value:{obj:e}}),e.isCrop},t.prototype.flip=function(e){this.notify("transform",{prop:"flip",value:{direction:e}}),this.notify("draw",{prop:"redrawDownScale"}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})},t.prototype.getImageData=function(){var e={canvas:null};return this.notify("export",{prop:"exportToCanvas",value:{object:e}}),e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height)},t.prototype.open=function(e){sf.base.isNullOrUndefined(e)||(document.getElementById(this.element.id+"_dropArea").style.display="none",this.notify("draw",{prop:"open",value:{data:e}}))},t.prototype.reset=function(){var e={isErrorImage:!1};if(this.notify("draw",{prop:"getErrorImage",value:{obj:e}}),!this.disabled&&!e.isErrorImage){this.clearContext(this.inMemoryContext),this.clearContext(this.lowerContext),this.clearContext(this.upperContext),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),sf.base.isBlazor()||(this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}}),sf.base.Browser.isDevice&&document.getElementById(this.element.id+"_bottomToolbar")&&(sf.base.getComponent(document.getElementById(this.element.id+"_bottomToolbar"),"toolbar").destroy(),this.notify("toolbar",{prop:"create-bottom-toolbar",onPropertyChange:!1})));var t=this.isImageLoaded;this.currObjType.isUndoAction=this.isUndoRedo=this.togglePan=this.togglePen=this.isImageLoaded=this.isFinetuning=!1,this.isCircleCrop=this.isCropTab=!1,this.objColl=[],this.transform.degree=0,this.upperCanvas.style.display="block",this.transform.currFlipState="",this.allowDownScale=!0,this.upperCanvas.style.cursor=this.cursor=this.lowerCanvas.style.cursor="default",this.lowerContext.lineWidth=this.upperContext.lineWidth=void 0,this.frameDestPoints=null,this.textArea.value=this.textArea.textContent="",this.textArea.style.display="none",this.lowerContext.filter=this.canvasFilter=this.getDefaultFilter(),this.img.destLeft=this.img.destTop=this.img.srcLeft=this.img.srcTop=0,this.img.destWidth=this.img.destHeight=this.img.srcWidth=this.img.srcHeight=null,this.currSelectionPoint=null,this.panPoint.currentPannedPoint={x:0,y:0},this.rotateFlipColl=[],this.points=[],this.pointColl={},this.freehandCounter=0,this.notify("draw",{prop:"resetPanPoints"}),this.lowerCanvas.style.left=this.upperCanvas.style.left="",this.fontSizeColl=[],this.lowerCanvas.style.top=this.upperCanvas.style.top="",this.lowerCanvas.style.maxWidth=this.upperCanvas.style.maxWidth="",this.lowerCanvas.style.maxHeight=this.upperCanvas.style.maxHeight="",this.transform.defaultZoomFactor=this.transform.zoomFactor=0,this.transform.cropZoomFactor=null,this.frameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""},this.tempFrameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""},this.currObjType={shape:"",isDragging:!1,isActiveObj:!1,isText:!1,isInitialText:!1,isLine:!1,isInitialLine:!1,isCustomCrop:!1,isZoomed:!1,isUndoZoom:!1,isUndoAction:!1,isFiltered:!1,isSave:!1,isResize:!1},this.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",straighten:0,zoomFactor:0,previousZoomValue:0,destPoints:{startX:0,startY:0,width:0,height:0},frame:"none",srcPoints:{startX:0,startY:0,width:0,height:0},filter:"",isBrightAdjust:!1,aspectWidth:null,aspectHeight:null,straightenZoom:0,adjustmentLevel:{brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,transparency:100,sharpen:!1,bw:!1},currentFilter:""},this.afterCropActions=[],this.currentFilter="",this.tempFrameZoomLevel=null,this.cxtTbarHeight=null,this.straightenPoint=null,this.transform.straighten=0,this.cancelCropSelection=null,this.aspectWidth=this.aspectHeight=null,this.isResize=!1;var i={initialZoomValue:!1};this.notify("draw",{prop:"getInitialZoomValue",onPropertyChange:!1,value:{obj:i}}),i.initialZoomValue&&this.setProperties({zoomSettings:{zoomFactor:i.initialZoomValue}},!0);var n=document.getElementById(this.element.id+"_quickAccessToolbarArea");if(n&&(n.style.display="none"),this.notifyResetForAllModules(),this.notify("filter",{prop:"update-finetunes"}),sf.base.isBlazor()||(this.toolbarTemplate?this.toolbarHeight=this.element.querySelector("#"+this.element.id+"_toolbarArea").clientHeight:this.element.querySelector("#"+this.element.id+"_toolbar")&&(this.toolbarHeight=this.element.querySelector("#"+this.element.id+"_toolbar").clientHeight),this.notify("toolbar",{prop:"setToolbarHeight",value:{height:this.toolbarHeight}})),this.isImageLoaded=t,this.straightenBaseImageCanvas(),this.isImageLoaded=!1,this.notify("draw",{prop:"update-canvas",onPropertyChange:!1}),this.isImageLoaded=t,this.prevStraightenedDegree=0,sf.base.isBlazor())this.activeObj.textSettings.fontFamily=this.defaultFontFamily;else{var s=this.element.querySelector(".e-contextual-toolbar-wrapper");s&&s.classList.add("e-hide"),this.notify("toolbar",{prop:"refresh-dropdown-btn",value:{isDisabled:!1}}),this.notify("toolbar",{prop:"enable-disable-btns"});var o={bool:this.isStraightening};sf.base.Browser.isDevice&&o.bool&&this.notify("crop",{prop:"resizeWrapper"})}}},t.prototype.rotate=function(e){var t={isRotate:!1};return this.notify("transform",{prop:"rotate",value:{degree:e,obj:t}}),this.notify("draw",{prop:"redrawDownScale"}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),t.isRotate},t.prototype.export=function(e,t){this.notify("export",{prop:"export",onPropertyChange:!1,value:{type:e,fileName:t}})},t.prototype.select=function(e,t,i,n,s){this.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:e,startX:t,startY:i,width:n,height:s}}),this.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:e,startX:t,startY:i,width:n,height:s}})},t.prototype.freeHandDraw=function(e){this.notify("freehand-draw",{prop:"freeHandDraw",onPropertyChange:!1,value:{value:e}})},t.prototype.freehandDraw=function(e){!this.disabled&&this.isImageLoaded&&this.freeHandDraw(e)},t.prototype.pan=function(e){this.notify("transform",{prop:"pan",onPropertyChange:!1,value:{value:e}})},t.prototype.zoom=function(e,t){this.notify("transform",{prop:"zoom",onPropertyChange:!1,value:{zoomFactor:e,zoomPoint:t}}),this.notify("draw",{prop:"redrawDownScale"})},t.prototype.drawEllipse=function(e,t,i,n,s,o,r,a){var l=!1,h=this.allowShape(e,t);return!this.disabled&&this.isImageLoaded&&(h||sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))&&(l=!0,this.notify("shape",{prop:"drawEllipse",onPropertyChange:!1,value:{x:e,y:t,radiusX:i,radiusY:n,strokeWidth:s,strokeColor:o,fillColor:r,degree:a}}),this.notify("draw",{prop:"redrawDownScale"})),l},t.prototype.drawLine=function(e,t,i,n,s,o){var r=!1,a=this.allowShape(e,t);return!this.disabled&&this.isImageLoaded&&(a||sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))&&(r=!0,this.notify("shape",{prop:"drawLine",onPropertyChange:!1,value:{startX:e,startY:t,endX:i,endY:n,strokeWidth:s,strokeColor:o}}),this.notify("draw",{prop:"redrawDownScale"})),r},t.prototype.drawArrow=function(e,t,i,n,s,o,r,a){var l=!1,h=this.allowShape(e,t);return!this.disabled&&this.isImageLoaded&&(h||sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))&&(l=!0,this.notify("shape",{prop:"drawArrow",onPropertyChange:!1,value:{startX:e,startY:t,endX:i,endY:n,strokeWidth:s,strokeColor:o,arrowStart:r,arrowEnd:a}}),this.notify("draw",{prop:"redrawDownScale"})),l},t.prototype.drawPath=function(e,t,i,n){this.isPublicMethod=!0;var s={inRange:!1},o=!1;if(e&&e.length>0)for(var r=0;r<e.length&&!s.inRange;r++)this.notify("shape",{prop:"isPointsInRange",onPropertyChange:!1,value:{x:e[r].x,y:e[r].y,obj:s}});return!this.disabled&&this.isImageLoaded&&(s.inRange||sf.base.isNullOrUndefined(e))&&(o=!0,this.notify("shape",{prop:"drawPath",onPropertyChange:!1,value:{pointColl:e,strokeWidth:t,strokeColor:i}}),this.notify("draw",{prop:"redrawDownScale"})),o},t.prototype.drawRectangle=function(e,t,i,n,s,o,r,a){var l=!1,h=this.allowShape(e,t);return!this.disabled&&this.isImageLoaded&&(h||sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))&&(l=!0,this.notify("shape",{prop:"drawRectangle",onPropertyChange:!1,value:{x:e,y:t,width:i,height:n,strokeWidth:s,strokeColor:o,fillColor:r,degree:a}}),this.notify("draw",{prop:"redrawDownScale"})),l},t.prototype.drawText=function(e,t,i,n,s,o,r,a){var l=!1,h=this.allowShape(e,t);return!this.disabled&&this.isImageLoaded&&(h||sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))&&(l=!0,this.notify("shape",{prop:"drawText",onPropertyChange:!1,value:{x:e,y:t,text:i,fontFamily:n,fontSize:s,bold:o,italic:r,color:a}}),this.notify("draw",{prop:"redrawDownScale"})),l},t.prototype.drawImage=function(e,t,i,n,s,o,r,a){var l=!1,h=this.allowShape(t,i);if(!this.disabled&&this.isImageLoaded&&(h||sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(i))){var d=this.objColl.length;this.notify("shape",{prop:"drawImage",onPropertyChange:!1,value:{x:t,y:i,width:n,height:s,src:e,degree:r,isAspectRatio:o,opacity:a}}),this.notify("draw",{prop:"redrawDownScale"}),this.objColl.length>d&&(l=!0)}return l},t.prototype.selectShape=function(e){var t={isSelected:!1};return this.notify("shape",{prop:"selectShape",onPropertyChange:!1,value:{id:e,obj:t}}),this.notify("draw",{prop:"redrawDownScale"}),t.isSelected},t.prototype.deleteShape=function(e){this.notify("shape",{prop:"deleteShape",onPropertyChange:!1,value:{id:e}}),this.notify("draw",{prop:"redrawDownScale"})},t.prototype.getShapeSetting=function(e){var t={};return this.notify("shape",{prop:"getShapeSetting",onPropertyChange:!1,value:{id:e,obj:t}}),this.notify("draw",{prop:"redrawDownScale"}),t},t.prototype.getShapeSettings=function(){var e={shapeDetailsColl:[]};return this.notify("shape",{prop:"getShapeSettings",onPropertyChange:!1,value:{obj:e}}),this.notify("draw",{prop:"redrawDownScale"}),e.shapeDetailsColl},t.prototype.update=function(){this.notify("transform",{prop:"update"})},t.prototype.finetuneImage=function(e,t){!this.disabled&&this.isImageLoaded&&(this.notify("filter",{prop:"finetuneImage",value:{value:t,option:e}}),this.notify("draw",{prop:"redrawDownScale"}))},t.prototype.applyImageFilter=function(e){!this.disabled&&this.isImageLoaded&&(this.notify("filter",{prop:"applyImageFilter",value:{option:e.toString()}}),this.notify("draw",{prop:"redrawDownScale"}),this.canvasFilter=this.lowerContext.filter,this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}))},t.prototype.undo=function(){this.notify("undo-redo",{prop:"undo",onPropertyChange:!1}),this.notify("draw",{prop:"redrawDownScale"})},t.prototype.redo=function(){this.notify("undo-redo",{prop:"redo",onPropertyChange:!1}),this.notify("draw",{prop:"redrawDownScale"})},t.prototype.getImageDimension=function(){return{x:this.img.destLeft,y:this.img.destTop,width:this.img.destWidth,height:this.img.destHeight}},t.prototype.resize=function(e,t,i){var n=!1;if(e.toString().length<=4&&t.toString().length<=4){var s={startX:this.img.destLeft,startY:this.img.destTop,width:this.img.destWidth,height:this.img.destHeight};if(sf.base.isBlazor())this.updateToolbar(this.element,"resize");else{i?(this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}}),this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}})):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"resize",isApplyBtn:!1,isCropping:!1}});var o=this.element.querySelector("#"+this.element.id+"_resizeWidth"),r=this.element.querySelector("#"+this.element.id+"_resizeHeight");o&&r&&(sf.base.getComponent(o,"numerictextbox").value=Math.floor(e),o.value=Math.floor(e).toString()+" px",sf.base.getComponent(r,"numerictextbox").value=Math.floor(t),r.value=Math.floor(t).toString()+" px")}this.notify("transform",{prop:"resize",value:{width:e,height:t,isAspectRatio:i}}),s.startX!==this.img.destLeft||s.startY!==this.img.destTop||s.width!==this.img.destWidth||s.height!==this.img.destHeight?(n=!0,this.okBtn()):this.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),this.notify("draw",{prop:"redrawDownScale"})}return n},t.prototype.drawFrame=function(e,t,i,n,s,o,r,a,l){var h=!1,d={frameChangeEventArgs:null};t=t||"#fff",i=i||"",n=n||20,s=s||0,o=o||0,r=r||0,a=a||c.Solid,l=l||0;var p={type:this.toPascalCase(this.frameObj.type),color:this.frameObj.color,gradientColor:this.frameObj.gradientColor,size:this.frameObj.size,inset:this.frameObj.inset,offset:this.frameObj.offset,borderRadius:this.frameObj.radius,frameLineStyle:this.toPascalCase(this.frameObj.border),lineCount:this.frameObj.amount};return sf.base.extend(this.tempFrameObj,this.frameObj),this.tempFrameZoomLevel=this.transform.zoomFactor,this.frameDestPoints=sf.base.extend({},this.img,{},!0),sf.base.isBlazor()?this.performFrameClick():this.notify("toolbar",{prop:"frameToolbarClick"}),this.frameObj.type=e.toLowerCase(),this.frameObj.color=t,this.frameObj.gradientColor=i,this.frameObj.size=n,this.frameObj.inset=s,this.frameObj.offset=o,this.frameObj.radius=r,this.frameObj.border=a.toLowerCase(),this.frameObj.amount=l,this.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:p,obj:d}}),d.frameChangeEventArgs&&!d.frameChangeEventArgs.cancel?(this.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),JSON.stringify(this.frameObj)!==JSON.stringify(this.tempFrameObj)?(h=!0,this.okBtn()):this.tempFrameZoomLevel=null):(this.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}}),sf.base.extend(this.frameObj,this.tempFrameObj),this.tempFrameZoomLevel=null),this.notify("draw",{prop:"redrawDownScale"}),h},t.prototype.straightenImage=function(e){var t=!1;return e>=-45&&e<=45&&(t=!0,this.notify("transform",{prop:"straightenImage",value:{degree:e}}),this.notify("draw",{prop:"redrawDownScale"})),t},t.prototype.updateShape=function(e){var t={isSelected:!1};if(this.notify("shape",{prop:"selectShape",onPropertyChange:!1,value:{id:e.id,obj:t}}),t.isSelected){this.notify("shape",{prop:"updateShapeChangeEventArgs",onPropertyChange:!1,value:{shapeSettings:e}});var i=sf.base.extend({},this.activeObj,{},!0);this.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:null}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i}}),this.okBtn(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("draw",{prop:"redrawDownScale"})}return t.isSelected},t.prototype.cloneShape=function(e){var t={isSelected:!1};return"shape"===e.split("_")[0]&&(this.notify("shape",{prop:"selectShape",onPropertyChange:!1,value:{id:e,obj:t}}),t.isSelected&&(sf.base.isBlazor()?this.duplicateShape(!1,!0):this.notify("toolbar",{prop:"duplicateShape",onPropertyChange:!1,value:{isPreventUndoRedo:!1}}),this.okBtn(),this.notify("draw",{prop:"redrawDownScale"}))),t.isSelected},t.prototype.toolbarTemplateFn=function(){var e,t=this.element.id+"_toolbar",i=this.element.querySelector("#"+this.element.id+"_toolbarArea");if(this.toolbarTemplate){if(this.toolbarFn=this.templateParser(this.toolbarTemplate),this.isReact)e=this.toolbarFn({type:"toolbar"},this,"Template",t)[0];else if(this.isAngular){var n=this.toolbarFn({type:"toolbar"},this,"Template",t);e=3===n[0].nodeType?n[1]:n[0]}else e=this.toolbarFn({type:"toolbar"},this,"Template",t)[0];i.appendChild(e),this.toolbarHeight=i.clientHeight,this.notify("toolbar",{prop:"setToolbarHeight",value:{height:this.toolbarHeight}}),this.renderReactTemplates()}},t.prototype.quickAccessToolbarTemplateFn=function(){var e,t=this.element.id+"_quickAccessToolbar",i=this.element.querySelector("#"+this.element.id+"_quickAccessToolbarArea");if(this.quickAccessToolbarTemplate){if(this.qatFn=this.templateParser(this.quickAccessToolbarTemplate),this.isReact)e=this.qatFn({type:"toolbar"},this,"Template",t)[0];else if(this.isAngular){var n=this.qatFn({type:"toolbar"},this,"Template",t);e=3===n[0].nodeType?n[1]:n[0]}else e=this.qatFn({type:"toolbar"},this,"Template",t)[0];i.appendChild(e),this.renderReactTemplates()}},t.prototype.templateParser=function(e){if(e)try{return"function"!=typeof e&&document.querySelectorAll(e).length?sf.base.compile(document.querySelector(e).innerHTML.trim()):sf.base.compile(e)}catch(t){return sf.base.compile(e)}},t.prototype.getTextFromId=function(e){return{1:"none",2:"bar",3:"arrow",4:"arrowSolid",5:"circle",6:"circleSolid",7:"square",8:"squareSolid"}[""+e]},t.prototype.getFinetuneOption=function(e){return{brightness:l.Brightness,contrast:l.Contrast,hue:l.Hue,saturation:l.Saturation,opacity:l.Opacity,blur:l.Blur,exposure:l.Exposure}[""+e]},t.prototype.setPenStroke=function(e){this.notify("freehand-draw",{prop:"setPenStrokeWidth",onPropertyChange:!1,value:{value:parseInt(e,10)}})},t.prototype.updateFreehandDrawColorChange=function(){var e={tempFreeHandDrawEditingStyles:null};this.notify("freehand-draw",{prop:"getTempFreeHandDrawEditingStyles",value:{obj:e}}),this.notify("freehand-draw",{prop:"color-change",value:{color:e.tempFreeHandDrawEditingStyles.strokeColor}})},t.prototype.updateImageTransformColl=function(e){var t;"rotateleft"===e?t=-90:"rotateright"===e?t=90:"horizontalflip"===e?t="horizontal":"verticalflip"===e&&(t="vertical");for(var i=0;i<this.objColl.length;i++){var n=this.objColl[i].shape;if("image"===n||"text"===n){sf.base.isNullOrUndefined(this.objColl[i].rotateFlipColl)&&(this.objColl[i].rotateFlipColl=[]),this.objColl[i].rotateFlipColl.push(t);var s={collection:this.objColl[i].rotateFlipColl};this.notify("shape",{prop:"alignRotateFlipColl",onPropertyChange:!1,value:{collection:this.objColl[i].rotateFlipColl,isRotateFlipCollection:!1,obj:s}}),this.objColl[i].rotateFlipColl=s.collection}}},t.prototype.setInitialZoomState=function(){this.objColl.push(this.activeObj),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1});var e=this.isUndoRedo;this.isCropTab=!1,this.isUndoRedo=!0,this.transform.cropZoomFactor&&this.transform.cropZoomFactor>0?this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-this.transform.cropZoomFactor,zoomPoint:null,isResize:!0}}):this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:Math.abs(this.transform.cropZoomFactor),zoomPoint:null,isResize:!0}}),this.isUndoRedo=e,this.panPoint.totalPannedPoint={x:0,y:0},this.transform.cropZoomFactor=0,this.notify("freehand-draw",{prop:"updateFHDColl",onPropertyChange:!1}),this.activeObj=sf.base.extend({},this.objColl[this.objColl.length-1],{},!0),this.objColl.pop(),this.isCropTab=!0,this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:this.activeObj}})},t.prototype.updateCropTransformItems=function(){this.prevCurrSelectionPoint=sf.base.extend({},this.currSelectionPoint,{},!0),this.notify("draw",{prop:"updateCropSelection",onPropertyChange:!1})},t.prototype.toPascalCase=function(e,t){var i=[];sf.base.isNullOrUndefined(e)||(i=e.toLowerCase().split("-"));for(var n=0;n<i.length;n++)i[n]=i[n].charAt(0).toUpperCase()+i[n].slice(1);return t&&(t.maxText=i.join("")),i.join("")},t.prototype.getFontSizes=function(){var e,t=[];this.fontSizeColl=[],e=0===this.transform.degree||this.transform.degree%180==0?this.img.destWidth/25:this.img.destHeight/25;for(var i=1;i<=10;i++)this.fontSizeColl.push({text:(i*Math.round(e/2)).toString()}),t.push({text:i.toString()});return t},t.prototype.okBtn=function(e){var t=this.element.querySelector(".e-contextual-toolbar-wrapper");t&&t.classList.remove("e-frame-wrapper");var i,s=!1;this.isResizeOkBtn=!0;var o=this.element.querySelector("#"+this.element.id+"_aspectratio"),r=this.element.querySelector("#"+this.element.id+"_nonaspectratio"),a=this.element.querySelector(".e-ie-toolbar-aspect-ratio-btn"),l=this.element.querySelector(".e-ie-toolbar-nonaspect-ratio-btn");if(void 0!==this.activeObj.shape&&(i=this.activeObj.shape.split("-")),(void 0===i&&this.currObjType.isCustomCrop||void 0!==i&&"crop"===i[0])&&(s=!0),this.allowDownScale=!0,(this.activeObj.shape&&"image"!==this.activeObj.shape||this.togglePen)&&!s){var h={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:h}});var d=h.shapeSettingsObj;this.togglePen&&(d.type=n.FreehandDraw);var c={action:"apply",currentShapeSettings:sf.base.extend({},d,{},!0)};this.triggerShapeChanged(c)}if(o||r||sf.base.isBlazor()&&"resize-toolbar"===this.currentToolbar){var p={width:null,height:null};this.notify("selection",{prop:"getNumTextValue",onPropertyChange:!1,value:{obj:p}});var u={x:p.width,y:p.height},f={prevCropObj:this.prevCropObj},g={prevObj:this.prevObj};if(u&&u.x&&u.y&&f.prevCropObj&&g.prevObj){r||l&&!l.classList.contains("e-hidden")?this.notify("transform",{prop:"resize",value:{width:u.x,height:u.y,isAspectRatio:!1}}):(o||a&&!a.classList.contains("e-hidden"))&&this.notify("transform",{prop:"resize",value:{width:u.x,height:null,isAspectRatio:!0}}),this.isResize=!1,this.aspectWidth=u.x,this.aspectHeight=u.y,this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}}),this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-this.transform.zoomFactor,zoomPoint:null,isResize:!0}}),this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:g.prevObj.defaultZoom,zoomPoint:null,isResize:!0}}),g.prevObj.zoomFactor&&this.setProperties({zoomSettings:{zoomFactor:g.prevObj.zoomFactor}},!0),this.notify("transform",{prop:"setPreviousZoomValue",onPropertyChange:!1,value:{previousZoomValue:this.zoomSettings.zoomFactor}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"resize",previousObj:g.prevObj,previousObjColl:g.prevObj.objColl,previousPointColl:g.prevObj.pointColl,previousSelPointColl:g.prevObj.selPointColl,previousCropObj:f.prevCropObj,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}});var m=this.cancelCropSelection;(!sf.base.isBlazor()&&m&&(sf.base.isNullOrUndefined(r)||!r)||sf.base.isBlazor()&&m&&l&&l.classList.contains("e-hidden"))&&(m.previousObj.aspectWidth=m.currentObj.aspectWidth=this.aspectWidth,m.previousObj.aspectHeight=m.currentObj.aspectHeight=this.aspectHeight,m.previousCropObj=sf.base.extend({},this.cropObj,{},!0),m.currentCropObj=sf.base.extend({},this.cropObj,{},!0),this.notify("draw",{prop:"updateCropSelObj"})),this.cancelCropSelection=null}else!u||0!==u.x&&0!==u.y?this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:!1,isZooming:null,cType:null}}):this.notify("draw",{prop:"performCancel",value:{isContextualToolbar:null}});this.isAspectRatio=!1}var v=this.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected"),b={bool:!1};this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:b}});if(this.notify("toolbar",{prop:"getFrameToolbar",onPropertyChange:!1,value:{obj:{bool:null}}}),v&&(this.currentFilter=v.children[0].children[0].id.replace("Canvas","")),s){if(0!==this.transform.straighten&&(0!==this.panPoint.totalPannedPoint.x||0!==this.panPoint.totalPannedPoint.y||0!==this.panPoint.totalPannedClientPoint.x||0!==this.panPoint.totalPannedClientPoint.y)){var y=this.prevStraightenedDegree;this.prevStraightenedDegree=this.transform.straighten,this.setStraighten(this.transform.straighten-3),this.setStraighten(this.transform.straighten+3),this.prevStraightenedDegree=y}this.isCroppedEvent=this.crop()}else if(this.togglePen)this.freeHandDraw(!1),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),this.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),this.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}});else if("block"===this.textArea.style.display||"inline-block"===this.textArea.style.display)this.notify("shape",{prop:"redrawActObj",onPropertyChange:!1,value:{x:null,y:null,isMouseDown:null}}),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.notify("draw",{prop:"redrawImgWithObj",onPropertyChange:!1}),sf.base.isNullOrUndefined(e)&&this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),this.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.lowerContext}}),this.notify("draw",{prop:"clearOuterCanvas",onPropertyChange:!1,value:{context:this.upperContext}});else if(!sf.base.isBlazor()&&document.querySelector("#"+this.element.id+"_sliderWrapper")||sf.base.isBlazor()&&!this.element.querySelector(".e-ie-contextual-slider").classList.contains("e-hidden")||this.currObjType.isFiltered){this.initialAdjustmentValue=this.canvasFilter=this.lowerContext.filter,this.currObjType.isFiltered=!1;var C={value:null};this.notify("draw",{prop:"getTempAdjustmentValue",value:{obj:C}}),C.value!==this.lowerContext.filter&&this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),(0!==this.activeObj.activePoint.width&&0!==this.activeObj.activePoint.height||"path"===this.activeObj.shape&&this.activeObj.pointColl.length>0)&&this.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:e}})}else if(b.bool)this.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!1}}),sf.base.isBlazor()?this.updateToolbar(this.element,"destroyQuickAccessToolbar"):this.notify("toolbar",{prop:"destroy-qa-toolbar"}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}});else if(0!==this.activeObj.activePoint.width&&0!==this.activeObj.activePoint.height||"path"===this.activeObj.shape&&this.activeObj.pointColl.length>0)"image"===this.activeObj.shape&&this.notify("draw",{prop:"setImageApply",onPropertyChange:!1,value:{bool:!0}}),this.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:e}});else{if(JSON.stringify(this.frameObj)!==JSON.stringify(this.tempFrameObj)){var w={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:w}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:w.currObj,previousObjColl:w.currObj.objColl,previousPointColl:w.currObj.pointColl,previousSelPointColl:w.currObj.selPointColl,previousCropObj:sf.base.extend({},this.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}}),this.tempFrameObj=sf.base.extend({},this.frameObj,{},!0)}this.notify("draw",{prop:"resetFrameZoom",onPropertyChange:!1,value:{isOk:!0}})}sf.base.isBlazor()||b.isCropToolbar?!sf.base.isBlazor()||b.isCropToolbar||"resize-toolbar"!=this.currentToolbar&&"frame-toolbar"!=this.currentToolbar||this.updateToolbar(this.element,"imageLoaded"):this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!1,isCropping:null,isZooming:null,cType:null}}),this.notify("draw",{prop:"setNewPath",value:{bool:!1}}),this.transform.zoomFactor=this.transform.defaultZoomFactor,this.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),this.isResizeOkBtn=!1,this.notify("draw",{prop:"redrawDownScale"}),this.isChangesSaved=!1,this.triggerActionComplete()},t.prototype.setTempFilterProperties=function(){this.upperCanvas.style.display="block",this.cropSelectedState();var e={adjustmentLevel:null};this.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:e}}),this.lowerContext.filter=this.initialAdjustmentValue,this.notify("draw",{prop:"setTempAdjustmentValue",value:{tempAdjustmentValue:this.lowerContext.filter}}),this.notify("filter",{prop:"setTempAdjustmentLevel",onPropertyChange:!1,value:{tempAdjustmentLevel:sf.base.extend({},e.adjustmentLevel,{},!0)}}),this.notify("draw",{prop:"setTempFilter",value:{tempFilter:this.currentFilter}});var t={undoRedoStep:null};this.notify("undo-redo",{prop:"getUndoRedoStep",value:{obj:t}}),this.notify("draw",{prop:"setTempUndoRedoStep",value:{tempUndoRedoStep:t.undoRedoStep}})},t.prototype.cropSelectedState=function(){this.activeObj.shape&&"crop"===this.activeObj.shape.split("-")[0]&&this.okBtn()},t.prototype.getCurrentCanvasData=function(){var e=sf.base.extend({},this.frameObj,{},!0);this.frameObj={type:"none",color:"#fff",size:20,inset:20,offset:20,radius:0,amount:1,border:"solid",gradientColor:""};var t=this.lowerContext.filter;this.lowerContext.filter=this.canvasFilter="none";var i=sf.base.extend([],this.objColl,null,!0),n=sf.base.extend([],this.pointColl,null,!0);this.objColl=[],this.pointColl=[],this.freehandCounter=0,this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}});var s=this.element.querySelector(".e-contextual-toolbar-wrapper");s&&s.classList.add("e-hide");var o=this.getImageData();return s&&(s.classList.remove("e-hide"),sf.base.isBlazor()&&(this.element.querySelector(".e-ie-toolbar-check-btn").classList.remove("e-hidden"),this.element.querySelector(".e-ie-toolbar-close-btn").classList.remove("e-hidden"))),sf.base.isBlazor()||(sf.base.Browser.isDevice||this.notify("toolbar",{prop:"refresh-toolbar",onPropertyChange:!1,value:{type:"main",isApplyBtn:!0,isCropping:!1}}),this.element.querySelector("#"+this.element.id+"_contextualToolbarArea").classList.remove("e-hide")),this.objColl=i,this.pointColl=n,this.freehandCounter=n.length,this.notify("shape",{prop:"iterateObjColl",onPropertyChange:!1}),this.lowerContext.filter=this.canvasFilter=t,this.frameObj=e,o},t.prototype.setCurrAdjustmentValue=function(e,t){var i=this,n={finetune:this.getFinetuneOption(e),value:t,cancel:!1};if(sf.base.isBlazor()&&this.events&&!0===this.events.finetuneValueChanging.hasDelegate)n.value=parseInt(n.value.toString()),this.dotNetRef.invokeMethodAsync("OnFinetuneValueChangeAsync","FinetuneValueChanging",n,null).then((function(n){n.cancel||i.notify("filter",{prop:"setCurrAdjValue",value:{type:e.toLowerCase(),value:t}})}));else{if(this.trigger("finetuneValueChanging",n),n.cancel)return;this.notify("filter",{prop:"setCurrAdjValue",value:{type:e.toLowerCase(),value:t}})}},t.prototype.getSquarePointForPath=function(e){var t={startX:0,startY:0,endX:0,endY:0,width:0,height:0};if(e.pointColl.length>0){t={startX:e.pointColl[0].x,startY:e.pointColl[0].y,endX:e.pointColl[0].x,endY:e.pointColl[0].y};for(var i=1;i<e.pointColl.length;i++)e.pointColl[i].x<t.startX&&(t.startX=e.pointColl[i].x),e.pointColl[i].y<t.startY&&(t.startY=e.pointColl[i].y),e.pointColl[i].x>t.endX&&(t.endX=e.pointColl[i].x),e.pointColl[i].y>t.endY&&(t.endY=e.pointColl[i].y);t.width=t.endX-t.startX,t.height=t.endY-t.startY}return t},t.prototype.getSelectionType=function(e){return{CropCustom:"Custom",CropSquare:"Square",CropCircle:"Circle","Crop3:2":"3:2","Crop4:3":"4:3","Crop5:4":"5:4","Crop7:5":"7:5","Crop16:9":"16:9","Crop2:3":"2:3","Crop3:4":"3:4","Crop4:5":"4:5","Crop5:7":"5:7","Crop9:16":"9:16"}[""+e]},t.prototype.clearContext=function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.clearRect(0,0,e.canvas.height,e.canvas.width)},t.prototype.updateArrow=function(e,t){this.notify("shape",{prop:"pushActItemIntoObj"});var i=sf.base.extend({},this.cropObj,{},!0),n={currObj:{}},s={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:s}});var o=s.shapeSettingsObj;this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}});var r=n.currObj;(r.objColl=sf.base.extend([],this.objColl,[],!0),r.pointColl=sf.base.extend([],this.pointColl,[],!0),r.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.objColl.pop(),"startArrow"===e?this.activeObj.start=this.getTextFromId(t):"endArrow"===e&&(this.activeObj.end=this.getTextFromId(t)),this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:this.activeObj.strokeSettings.strokeWidth}}),this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:r,previousObjColl:r.objColl,previousPointColl:r.pointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}),sf.base.isBlazor())||(sf.base.Browser.isDevice?document.getElementById(this.element.id+"_bottomToolbar")&&sf.base.getComponent(this.element.id+"_bottomToolbar","toolbar").refreshOverflow():document.getElementById(this.element.id+"_toolbar")&&sf.base.getComponent(this.element.id+"_toolbar","toolbar").refreshOverflow());var a={action:e,currentShapeSettings:sf.base.extend({},o,{},!0)};this.triggerShapeChanged(a)},t.prototype.updateFontFamily=function(e){this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),this.notify("shape",{prop:"pushActItemIntoObj"});var t=sf.base.extend([],this.objColl,[],!0),i=sf.base.extend({},this.cropObj,{},!0),n={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:n}});var s=n.shapeSettingsObj,o={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var r=o.currObj;r.objColl=sf.base.extend([],this.objColl,[],!0),r.pointColl=sf.base.extend([],this.pointColl,[],!0),r.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var a={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),r.selPointColl=sf.base.extend([],a.selPointColl,[],!0),this.objColl.pop(),"block"===this.textArea.style.display||"inline-block"===this.textArea.style.display){this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:!0}});var l=this.activeObj.textSettings.fontFamily;this.activeObj.textSettings.fontFamily=this.toPascalCase(e),this.notify("shape",{prop:"redraw-text"}),this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:r,previousObjColl:r.objColl,previousPointColl:r.pointColl,previousSelPointColl:r.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);var h=this.activeObj.activePoint.width+.25*this.activeObj.textSettings.fontSize;this.textArea.style.width=h+"px",this.textArea.style.fontFamily=this.toPascalCase(e),this.activeObj.textSettings.fontFamily=l,this.notify("shape",{prop:"updateFontStyles",onPropertyChange:!1,value:{isTextBox:null}})}else{this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:null}});var d=this.activeObj.textSettings.fontFamily=this.toPascalCase(e);this.notify("shape",{prop:"setTextSettings",onPropertyChange:!1,value:{textSettings:null,fontFamily:d,fontSize:null}}),this.notify("shape",{prop:"redraw-text"}),this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:r,previousObjColl:t,previousPointColl:sf.base.extend([],this.pointColl,[],!0),previousSelPointColl:r.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}})}var c={action:"font-family",currentShapeSettings:sf.base.extend({},s,{},!0)};c.currentShapeSettings.fontFamily=this.textArea.style.fontFamily,this.triggerShapeChanged(c)},t.prototype.updateFontSize=function(e){var t=e;this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),this.notify("shape",{prop:"pushActItemIntoObj"});var i=sf.base.extend({},this.cropObj,{},!0),n={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:n}});var s=n.shapeSettingsObj,o={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}});var r=o.currObj;r.objColl=sf.base.extend([],this.objColl,[],!0),r.pointColl=sf.base.extend([],this.pointColl,[],!0),r.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var a={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:a}}),r.selPointColl=sf.base.extend([],a.selPointColl,[],!0),this.objColl.pop(),"block"===this.textArea.style.display||"inline-block"===this.textArea.style.display){this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:!0}});var l=this.activeObj.textSettings.fontSize;this.activeObj.textSettings.fontSize=parseInt(this.fontSizeColl[parseInt(t,10)-1].text,10),this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:r,previousObjColl:r.objColl,previousPointColl:r.pointColl,previousSelPointColl:r.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop();var h="";"bold"===this.textArea.style.fontWeight&&(h="bold "),"italic"===this.textArea.style.fontStyle&&(h="italic "),"bold"===this.textArea.style.fontWeight&&"italic"===this.textArea.style.fontStyle&&(h="italic bold "),this.upperContext.font=h+this.activeObj.textSettings.fontSize+"px "+this.textArea.style.fontFamily;var d=this.textArea.value.split("\n"),c={maxText:""};this.notify("shape",{prop:"getMaxText",onPropertyChange:!1,value:{isTextBox:!0,text:null,obj:c}});var p=c.maxText,u=this.upperContext.measureText(p).width+.5*this.activeObj.textSettings.fontSize;this.textArea.style.width=u+"px",this.textArea.style.height=d.length*(this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize)+"px",this.activeObj.textSettings.fontSize=l,this.upperContext.font=this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily,this.textArea.style.fontSize=parseInt(this.fontSizeColl[parseInt(t,10)-1].text,10)+"px","georgia"===this.textArea.style.fontFamily&&(this.textArea.style.width=parseFloat(this.textArea.style.width)+parseFloat(this.textArea.style.fontSize)+"px")}else{this.notify("shape",{prop:"updateFontRatio",onPropertyChange:!1,value:{obj:this.activeObj,isTextArea:null}});var f=this.activeObj.textSettings.fontSize=parseInt(this.fontSizeColl[parseInt(t,10)-1].text,10);this.notify("shape",{prop:"setTextSettings",onPropertyChange:!1,value:{textSettings:null,fontFamily:null,fontSize:f}}),this.upperContext.font=this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily;d=this.activeObj.keyHistory.split("\n"),c={maxText:""};this.notify("shape",{prop:"getMaxText",onPropertyChange:!1,value:{isTextBox:null,text:null,obj:c}});var g=c.maxText,m=(u=this.upperContext.measureText(g).width+.5*this.activeObj.textSettings.fontSize,d.length*(this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize));this.notify("selection",{prop:"setTextSelection",onPropertyChange:!1,value:{width:u,height:m}}),this.notify("draw",{prop:"updateActiveObject",onPropertyChange:!1,value:{actPoint:this.activeObj.activePoint,obj:this.activeObj,isMouseMove:null,x:null,y:null}}),this.notify("shape",{prop:"redraw-text"}),this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:r,previousObjColl:r.objColl,previousPointColl:r.pointColl,previousSelPointColl:r.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}})}var v={action:"font-size",currentShapeSettings:sf.base.extend({},s,{},!0)};v.currentShapeSettings.fontSize=this.activeObj.textSettings.fontSize,this.triggerShapeChanged(v)},t.prototype.updateFontColor=function(e){this.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),this.notify("shape",{prop:"pushActItemIntoObj"});var t=sf.base.extend({},this.cropObj,{},!0),i={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:i}});var n=i.shapeSettingsObj,s={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}});var o=s.currObj;o.objColl=sf.base.extend([],this.objColl,[],!0),o.pointColl=sf.base.extend([],this.pointColl,[],!0),o.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var r={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),o.selPointColl=sf.base.extend([],r.selPointColl,[],!0),this.objColl.pop(),"none"===this.textArea.style.display)this.activeObj.strokeSettings.strokeColor=e,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:this.activeObj.strokeSettings.strokeColor,fillColor:null,strokeWidth:null}}),this.togglePen||(this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:t,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}));else if("block"===this.textArea.style.display||"inline-block"===this.textArea.style.display){this.textArea.style.color=e;var a=this.activeObj.strokeSettings.strokeColor;this.activeObj.strokeSettings.strokeColor=e,this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"textAreaCustomization",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:t,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.objColl.pop(),this.activeObj.strokeSettings.strokeColor=a}else this.togglePen||(this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:t,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}));var l={action:"font-color",currentShapeSettings:sf.base.extend({},n,{},!0)};l.currentShapeSettings.fillColor=e,this.triggerShapeChanged(l)},t.prototype.updatePenStrokeWidth=function(e){var t=sf.base.extend([],this.pointColl,[],!0);this.updateFreehandDrawColorChange();var i=sf.base.extend({},this.cropObj,{},!0),s={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:s}});var o=s.shapeSettingsObj,r={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var a=r.currObj;a.objColl=sf.base.extend([],this.objColl,[],!0),a.pointColl=sf.base.extend([],this.pointColl,[],!0),a.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var l={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),a.selPointColl=sf.base.extend([],l.selPointColl,[],!0),this.pointColl=t,this.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!0}}),this.setPenStroke(e);var h={bool:!1};if(this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:h}}),h.bool){var d={penStrokeWidth:null};this.notify("freehand-draw",{prop:"getPenStrokeWidth",onPropertyChange:!1,value:{obj:d}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:d.penStrokeWidth}});var c={freehandSelectedIndex:null};this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:c}}),this.pointColl[c.freehandSelectedIndex].strokeWidth=d.penStrokeWidth,this.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),this.notify("draw",{prop:"redrawDownScale"}),this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:d.penStrokeWidth}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"freehanddrawCustomized",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}o.type=n.FreehandDraw;var p={action:"stroke-width",currentShapeSettings:sf.base.extend({},o,{},!0)};p.currentShapeSettings.strokeWidth=this.activeObj.strokeSettings.strokeWidth,this.triggerShapeChanged(p)},t.prototype.updatePenStrokeColor=function(e){var t=sf.base.extend([],this.pointColl,[],!0);this.updateFreehandDrawColorChange();var i=sf.base.extend({},this.cropObj,{},!0),s={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:s}});var o=s.shapeSettingsObj,r={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:r}});var a=r.currObj;a.objColl=sf.base.extend([],this.objColl,[],!0),a.pointColl=sf.base.extend([],this.pointColl,[],!0),a.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var l={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:l}}),a.selPointColl=sf.base.extend([],l.selPointColl,[],!0),this.pointColl=t,this.notify("selection",{prop:"setFreehandDrawCustomized",value:{isFreehandDrawCustomized:!0}}),this.activeObj.strokeSettings.strokeColor=e;var h={freehandSelectedIndex:null};if(this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:h}}),null!=h.freehandSelectedIndex){this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);for(var d=0,c=sf.base.extend({},this.pointColl,{},!0),p=0;p<this.freehandCounter;p++)parseInt(c[p].id.split("_")[1],10)-1!==h.freehandSelectedIndex&&(this.pointColl[d]=c[p],d++);this.notify("draw",{prop:"render-image",value:{isMouseWheel:null}}),this.notify("draw",{prop:"redrawDownScale"}),this.pointColl=c,this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:null,strokeWidth:null}})}var u={bool:!1};if(this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:u}}),u.bool){var f={freehandSelectedIndex:null};this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:f}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.pointColl[f.freehandSelectedIndex].strokeColor=e,this.notify("freehand-draw",{prop:"hoverFhd",onPropertyChange:!1,value:{strokeColor:e}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"freehanddrawCustomized",previousObj:a,previousObjColl:a.objColl,previousPointColl:a.pointColl,previousSelPointColl:a.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}else this.togglePen||this.notify("selection",{prop:"redrawShape",value:{obj:this.activeObj}});o.type=n.FreehandDraw;var g={action:"stroke-color",currentShapeSettings:sf.base.extend({},o,{},!0)};g.currentShapeSettings.strokeColor=e,this.triggerShapeChanged(g)},t.prototype.updateStrokeWidth=function(e){if(this.activeObj.shape&&("path"!==this.activeObj.shape||"path"===this.activeObj.shape&&this.activeObj.pointColl.length>0)){var t={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:t}});var i=t.shapeSettingsObj;this.notify("shape",{prop:"pushActItemIntoObj"});var n=sf.base.extend({},this.cropObj,{},!0),s={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}});var o=s.currObj;o.objColl=sf.base.extend([],this.objColl,[],!0),o.pointColl=sf.base.extend([],this.pointColl,[],!0),o.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var r={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),o.selPointColl=sf.base.extend([],r.selPointColl,[],!0),this.objColl.pop(),this.activeObj.strokeSettings.strokeWidth=parseInt(e,10),"rectangle"!==this.activeObj.shape&&"ellipse"!==this.activeObj.shape||(this.activeObj.strokeSettings.strokeWidth=parseInt(e,10)-1),this.activeObj.strokeSettings.strokeWidth*=2,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:this.activeObj.strokeSettings.strokeWidth}}),this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}});var a={action:"stroke-width",currentShapeSettings:sf.base.extend({},i,{},!0)};a.currentShapeSettings.strokeWidth=this.activeObj.strokeSettings.strokeWidth,this.triggerShapeChanged(a)}else this.activeObj.shape&&"path"===this.activeObj.shape&&0===this.activeObj.pointColl.length&&(this.activeObj.strokeSettings.strokeWidth=parseInt(e,10),this.activeObj.strokeSettings.strokeWidth*=2,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:null,strokeWidth:this.activeObj.strokeSettings.strokeWidth}}))},t.prototype.updateStrokeColor=function(e){var t={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:t}});var i=t.shapeSettingsObj;if(this.activeObj.shape&&("path"!==this.activeObj.shape||"path"===this.activeObj.shape&&this.activeObj.pointColl.length>0)){this.notify("shape",{prop:"pushActItemIntoObj"});var n=sf.base.extend({},this.cropObj,{},!0),s={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}});var o=s.currObj;o.objColl=sf.base.extend([],this.objColl,[],!0),o.pointColl=sf.base.extend([],this.pointColl,[],!0),o.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var r={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),o.selPointColl=sf.base.extend([],r.selPointColl,[],!0),this.objColl.pop(),this.activeObj.strokeSettings.strokeColor=e,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:this.activeObj.strokeSettings.strokeColor,fillColor:null,strokeWidth:null}}),this.togglePen||(this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}))}else this.activeObj.shape&&"path"===this.activeObj.shape&&0===this.activeObj.pointColl.length&&(this.activeObj.strokeSettings.strokeColor=e,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:this.activeObj.strokeSettings.strokeColor,fillColor:null,strokeWidth:null}}));var a={action:"stroke-color",currentShapeSettings:sf.base.extend({},i,{},!0)};a.currentShapeSettings.strokeColor=e,this.triggerShapeChanged(a)},t.prototype.updateFillColor=function(e){var t={shapeSettingsObj:{}};this.notify("selection",{prop:"updatePrevShapeSettings",onPropertyChange:!1,value:{obj:t}});var i=t.shapeSettingsObj;this.notify("shape",{prop:"pushActItemIntoObj"});var n=sf.base.extend({},this.cropObj,{},!0),s={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}});var o=s.currObj;o.objColl=sf.base.extend([],this.objColl,[],!0),o.pointColl=sf.base.extend([],this.pointColl,[],!0),o.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var r={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),o.selPointColl=sf.base.extend([],r.selPointColl,[],!0),this.objColl.pop(),this.activeObj.strokeSettings.fillColor=e,this.notify("shape",{prop:"setStrokeSettings",value:{strokeSettings:null,strokeColor:null,fillColor:this.activeObj.strokeSettings.fillColor,strokeWidth:null}}),this.objColl.push(this.activeObj),0===this.activeObj.activePoint.width&&0===this.activeObj.activePoint.height||this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:o,previousObjColl:o.objColl,previousPointColl:o.pointColl,previousSelPointColl:o.selPointColl,previousCropObj:n,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}});var a={action:"fill-color",currentShapeSettings:sf.base.extend({},i,{},!0)};this.triggerShapeChanged(a)},t.prototype.horizontalFlip=function(e,t){var i,n;if(sf.base.isNullOrUndefined(t)){sf.base.isNullOrUndefined(this.activeObj.imageRatio)&&this.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),this.notify("shape",{prop:"pushActItemIntoObj"}),i=sf.base.extend({},this.cropObj,{},!0);var s={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}}),(n=s.currObj).objColl=sf.base.extend([],this.objColl,[],!0),n.pointColl=sf.base.extend([],this.pointColl,[],!0),n.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var o={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),n.selPointColl=sf.base.extend([],o.selPointColl,[],!0),this.objColl.pop()}sf.base.isBlazor()||this.notify("toolbar",{prop:"refreshSlider"}),e.clearRect(0,0,this.activeObj.imageCanvas.width,this.activeObj.imageCanvas.height);var r=this.duplicateImage();this.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:this.activeObj.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:!0,isVFlip:null}}),this.activeObj.activePoint=r,this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),sf.base.isNullOrUndefined(t)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"imageHFlip",previousObj:n,previousObjColl:n.objColl,previousPointColl:n.pointColl,previousSelPointColl:n.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}))},t.prototype.verticalFlip=function(e,t){var i,n;if(sf.base.isNullOrUndefined(t)){sf.base.isNullOrUndefined(this.activeObj.imageRatio)&&this.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),this.notify("shape",{prop:"pushActItemIntoObj"}),i=sf.base.extend({},this.cropObj,{},!0);var s={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}}),(n=s.currObj).objColl=sf.base.extend([],this.objColl,[],!0),n.pointColl=sf.base.extend([],this.pointColl,[],!0),n.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var o={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),n.selPointColl=sf.base.extend([],o.selPointColl,[],!0),this.objColl.pop()}sf.base.isBlazor()||this.notify("toolbar",{prop:"refreshSlider"}),e.clearRect(0,0,this.activeObj.imageCanvas.width,this.activeObj.imageCanvas.height);var r=this.duplicateImage();this.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:this.activeObj.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:!0}}),this.activeObj.activePoint=r,this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),sf.base.isNullOrUndefined(t)&&(this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"imageVFlip",previousObj:n,previousObjColl:n.objColl,previousPointColl:n.pointColl,previousSelPointColl:n.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}))},t.prototype.rotateImage=function(e){var t,i;sf.base.isNullOrUndefined(this.activeObj.imageRatio)&&this.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),this.notify("shape",{prop:"pushActItemIntoObj"}),t=sf.base.extend({},this.cropObj,{},!0);var n={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:n}}),(i=n.currObj).objColl=sf.base.extend([],this.objColl,[],!0),i.pointColl=sf.base.extend([],this.pointColl,[],!0),i.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var s={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:s}}),i.selPointColl=sf.base.extend([],s.selPointColl,[],!0),this.objColl.pop(),sf.base.isBlazor()||this.notify("toolbar",{prop:"refreshSlider"}),"rotleft"===e?this.activeObj.rotatedAngle-=Math.PI/180*90:this.activeObj.rotatedAngle+=Math.PI/180*90,this.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:this.activeObj}}),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"imageRotate",previousObj:i,previousObjColl:i.objColl,previousPointColl:i.pointColl,previousSelPointColl:i.selPointColl,previousCropObj:t,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}),sf.base.isBlazor()?(this.updateToolbar(this.element,"destroyQuickAccessToolbar"),this.updateToolbar(this.element,"quickAccessToolbar","image")):(this.notify("toolbar",{prop:"destroy-qa-toolbar"}),this.notify("toolbar",{prop:"renderQAT",onPropertyChange:!1,value:{isPenEdit:null}}))},t.prototype.pascalToSplitWords=function(e){var t=(e=e.charAt(0).toUpperCase()+e.slice(1)).match(/[A-Z][a-z]+/g);return sf.base.isNullOrUndefined(t)?e:t.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},t.prototype.getCurrAdjustmentValue=function(e){var t=100,i={freehandSelectedIndex:null};if(this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:i}}),"transparency"===e&&this.togglePen){var n={penOpacity:1};this.notify("freehand-draw",{prop:"getPenOpacity",onPropertyChange:!1,value:{obj:n}}),t=100*n.penOpacity}else if("transparency"===e&&null!=i.freehandSelectedIndex)t=100*this.pointColl[i.freehandSelectedIndex].opacity;else{n={adjustmentLevel:null};this.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:n}}),t={brightness:n.adjustmentLevel.brightness,contrast:n.adjustmentLevel.contrast,hue:n.adjustmentLevel.hue,saturation:n.adjustmentLevel.saturation,opacity:n.adjustmentLevel.opacity,blur:n.adjustmentLevel.blur,exposure:n.adjustmentLevel.exposure,transparency:n.adjustmentLevel.transparency,straighten:this.transform.straighten}[""+e]}return t},t.prototype.transformSelect=function(e){this.isCropToolbar=!0,this.allowDownScale=!1;var t=this.transform.straighten,i=sf.base.extend({},this.activeObj,{},!0),n=this.transform.zoomFactor;this.prevEventSelectionPoint=sf.base.extend({},this.activeObj,{},!0);var s={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}}),this.prevEventObjPoint=s.currObj,this.prevEventObjPoint.objColl=sf.base.extend([],this.objColl,[],!0),this.prevEventObjPoint.pointColl=sf.base.extend([],this.pointColl,[],!0),this.prevEventObjPoint.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var o={selPointColl:null};if(this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),this.prevEventObjPoint.selPointColl=sf.base.extend([],o.selPointColl,[],!0),0!==this.transform.straighten){this.transform.straighten=0,this.straightenBaseImageCanvas();for(var r=0,a=this.objColl.length;r<a;r++){"line"!==(h=this.objColl[r].shape)&&"arrow"!==h&&"path"!==h&&(this.objColl[r].rotatedAngle-=t*(Math.PI/180),this.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:this.objColl[r]}}))}this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),this.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}})}this.setInitialZoomState();var l=sf.base.extend({},this.activeObj,{},!0);if(this.notify("crop",{prop:"setTransformCrop",onPropertyChange:!1,value:{bool:!0}}),this.cropSelectedState(),this.notify("crop",{prop:"setTransformCrop",onPropertyChange:!1,value:{bool:!1}}),this.notify("draw",{prop:"resetCurrentSelectionPoint"}),this.updateImageTransformColl(e),this.notify("transform",{prop:"performTransformation",value:{text:e}}),this.isCropTab=!0,this.notify("draw",{prop:"moveToSelectionRange",value:{type:e,activeObj:l}}),!this.isStraightening||"horizontalflip"!==e&&"verticalflip"!==e||(this.notify("draw",{prop:"resetStraightenDestPoints"}),this.notify("draw",{prop:"setDestForStraighten"})),0!==t){this.transform.straighten=t,this.straightenBaseImageCanvas();for(r=0,a=this.objColl.length;r<a;r++){var h;"line"!==(h=this.objColl[r].shape)&&"arrow"!==h&&"path"!==h&&(this.objColl[r].rotatedAngle+=t*(Math.PI/180),this.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:this.objColl[r]}}))}this.notify("shape",{prop:"zoomObjColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.notify("freehand-draw",{prop:"zoomFHDColl",onPropertyChange:!1,value:{isPreventApply:null}}),this.notify("draw",{prop:"render-image",value:{isMouseWheel:!1}}),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:i}}),this.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),this.notify("draw",{prop:"setStraightenInitZoom",value:{zoomFactor:n}}),(this.isStraightening&&("horizontalflip"===e||"verticalflip"===e)&&sf.base.isNullOrUndefined(this.transform.zoomFactor)||0===this.transform.zoomFactor)&&(0===this.transform.degree?this.transform.zoomFactor+=.025:0===this.transform.zoomFactor&&(this.transform.zoomFactor=null)),this.notify("draw",{prop:"zoomToSel",value:{activeObj:i,isToolbar:!1}})}this.isCropToolbar=!1;var d=this.element.querySelector(".e-ie-straighten-value-span");d&&(d.innerHTML=this.transform.straighten.toString()+"&#176")},t.prototype.getDefaultFilter=function(){return"brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)"},t.prototype.setStraighten=function(e,t){var i={cancel:!1,previousDegree:this.transform.straighten,currentDegree:e};sf.base.isBlazor()?this.prevStraightenEvent=this.transform.straighten:this.trigger("rotating",i),i.cancel||this.performStraighten(i)},t.prototype.duplicateImage=function(){var e=sf.base.extend({},this.activeObj.activePoint,{},!0),t={width:0,height:0};return this.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:this.activeObj.imageElement.width,height:this.activeObj.imageElement.height,obj:t,isImgShape:null}}),this.activeObj.activePoint.width=t.width,this.activeObj.activePoint.height=t.height,e},t.prototype.performStraighten=function(e){var t=e.currentDegree,i=this.element.querySelector(".e-ie-straighten-value-span");i&&(i.innerHTML=t.toString()+"&#176");this.transform.straighten;var n=sf.base.extend({},this.activeObj,null,!0);this.notify("freehand-draw",{prop:"setCenterSelPoints"}),this.transform.straighten=t,this.straightenPoint={x:this.activeObj.activePoint.startX+this.activeObj.activePoint.width/2,y:this.activeObj.activePoint.startY+this.activeObj.activePoint.height/2},this.straightenBaseImageCanvas();for(var s=0,o=this.objColl.length;s<o;s++){var r=this.objColl[s].shape;"line"!==r&&"arrow"!==r&&"path"!==r&&(this.objColl[s].rotatedAngle+=(this.transform.straighten-this.prevStraightenedDegree)*(Math.PI/180),this.notify("selection",{prop:"updPtCollForShpRot",onPropertyChange:!1,value:{obj:this.objColl[s]}}))}this.transform.degree%90==0&&this.transform.degree%180!=0?(0===this.transform.straighten&&(this.transform.straighten=360),this.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:this.activeObj.activePoint.startX+this.activeObj.activePoint.width/2,y:this.activeObj.activePoint.startY+this.activeObj.activePoint.height/2,type:"zoomIn",isResize:!0}}),this.notify("draw",{prop:"performPointZoom",onPropertyChange:!1,value:{x:this.activeObj.activePoint.startX+this.activeObj.activePoint.width/2,y:this.activeObj.activePoint.startY+this.activeObj.activePoint.height/2,type:"zoomOut",isResize:!0}}),360===this.transform.straighten&&(this.transform.straighten=0)):this.notify("draw",{prop:"render-image",value:{isMouseWheel:!0,isPreventClearRect:null,isFrame:null,isStraighten:!0}}),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:n}}),this.notify("draw",{prop:"zoomToSel",value:{activeObj:n,isToolbar:!0}}),this.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),this.prevStraightenedDegree=this.transform.straighten},t.prototype.straightenBaseImageCanvas=function(){if(this.isImageLoaded){var e=this.getStraightenFlipState(),t="horizontal"===e||"vertical"===e?-this.transform.straighten:this.transform.straighten,i=this.baseImgCanvas.getContext("2d");if(i.canvas.width!==this.lowerContext.canvas.width&&i.canvas.height!==this.lowerContext.canvas.height){this.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:{width:0,height:0},dimension:{width:i.canvas.width,height:i.canvas.height}}})}var n;n=this.getRotatedCanvasDim(this.baseImg.width,this.baseImg.height,this.transform.straighten),this.img.srcWidth=i.canvas.width=n.width,this.img.srcHeight=i.canvas.height=n.height;var s=i.canvas.width/2,o=i.canvas.height/2;i.clearRect(0,0,i.canvas.width,i.canvas.height),i.translate(s,o),i.rotate(t*Math.PI/180),i.drawImage(this.baseImg,-this.baseImg.width/2,-this.baseImg.height/2,this.baseImg.width,this.baseImg.height),i.setTransform(1,0,0,1,0,0);this.notify("crop",{prop:"calcRatio",onPropertyChange:!1,value:{obj:{width:0,height:0},dimension:{width:i.canvas.width,height:i.canvas.height}}})}},t.prototype.getRotatedCanvasDim=function(e,t,i){var n=i*Math.PI/180,s=Math.cos(n),o=Math.sin(n),r=Math.min(0,e*s,t*Math.cos(Math.PI/2-n),e*s+t*Math.cos(Math.PI/2-n)),a=Math.max(0,e*s,t*Math.cos(Math.PI/2-n),e*s+t*Math.cos(Math.PI/2-n)),l=Math.min(0,e*o,t*Math.sin(Math.PI/2-n),e*o+t*Math.sin(Math.PI/2-n)),h=Math.max(0,e*o,t*Math.sin(Math.PI/2-n),e*o+t*Math.sin(Math.PI/2-n));return{width:Math.ceil(a-r),height:Math.ceil(h-l)}},t.prototype.getStraightenFlipState=function(){var e="";if(this.rotateFlipColl.length>0)for(var t=0,i=this.rotateFlipColl.length;t<i;t++){var n=this.rotateFlipColl[t];"horizontal"===n?e+="horizontal":"vertical"===n&&(e+="vertical"),"horizontalvertical"!==e&&"verticalhorizontal"!==e||(e="")}return e},t.prototype.initializeImageEditor=function(e,t){this.element=e,sf.base.isBlazor()&&this.element.querySelector(".place-holder")&&this.element.querySelector(".place-holder").remove(),this.element.offsetWidth>359&&this.element.querySelector(".e-ie-min-drop-content")&&this.element.querySelector(".e-ie-drop-content")&&(this.element.querySelector(".e-ie-min-drop-content").style.display="none",this.element.querySelector(".e-ie-drop-content").style.display="block"),sf.base.isBlazor()&&this.element.querySelector(".e-ie-drop-area")&&(this.element.querySelector(".e-ie-drop-area").style.display="block"),sf.base.isBlazor()&&this.element.querySelector(".e-toolbar-area")&&(this.element.querySelector(".e-toolbar-area").style.display="block");var i=this.element.querySelector(".e-canvas-wrapper");this.element.querySelector("#"+this.element.id+"_toolbarArea")?this.toolbarHeight=this.element.querySelector("#"+this.element.id+"_toolbarArea").scrollHeight:this.toolbarHeight=0,i.style.height=this.element.offsetHeight-this.toolbarHeight-2+"px",i.style.width=this.element.offsetWidth-2+"px",this.lowerCanvas=this.element.querySelector(".e-lower-canvas"),this.upperCanvas=this.element.querySelector(".e-upper-canvas"),this.lowerCanvas.id=this.element.id+"_lowerCanvas",this.upperCanvas.id=this.element.id+"_upperCanvas",this.textArea=this.element.querySelector(".e-textarea"),this.inMemoryCanvas=this.createElement("canvas",{id:this.element.id+"_inMemoryCanvas",attrs:{name:"canvasImage"}}),this.baseImgCanvas=this.createElement("canvas",{id:this.element.id+"_baseImgCanvas",attrs:{name:"canvasImage"}}),this.upperCanvas.width=this.lowerCanvas.width=this.inMemoryCanvas.width=this.element.offsetWidth,this.upperCanvas.height=this.lowerCanvas.height=this.inMemoryCanvas.height=this.element.offsetHeight-this.toolbarHeight,this.lowerContext=this.lowerCanvas.getContext("2d"),this.baseImg=this.createElement("img",{id:this.element.id+"_orgImg",attrs:{name:"Image",crossorigin:"anonymous"}}),this.upperContext=this.upperCanvas.getContext("2d"),this.inMemoryContext=this.inMemoryCanvas.getContext("2d"),t&&(this.dotNetRef=t),this.prerender(),this.wireEvent(),this.lowerContext.filter=this.getDefaultFilter(),this.notify("filter",{prop:"setAdjustmentValue",onPropertyChange:!1,value:{adjustmentValue:this.lowerContext.filter}}),this.canvasFilter=this.initialAdjustmentValue=this.lowerContext.filter,this.cssClass&&sf.base.addClass([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.element&&sf.popups.createSpinner({target:this.element}),this.initializeZoomSettings()},t.prototype.prerender=function(){this.element.id=this.element.id||sf.base.getUniqueID("ej2-image-editor"),sf.base.Browser.isDevice&&this.element.classList.add("e-device"),this.initializeThemeColl()},t.prototype.initializeZoomSettings=function(){sf.base.isNullOrUndefined(this.zoomSettings.zoomTrigger)&&(this.zoomSettings.zoomTrigger=s.MouseWheel|s.Pinch|s.Toolbar|s.Commands),sf.base.isNullOrUndefined(this.selectionSettings.strokeColor)&&(this.selectionSettings.strokeColor=this.themeColl[this.theme].primaryColor),sf.base.isNullOrUndefined(this.selectionSettings.fillColor)&&(this.selectionSettings.fillColor=this.themeColl[this.theme].secondaryColor)},t.prototype.initializeThemeColl=function(){this.themeColl={Bootstrap5:{primaryColor:"#0d6efd",secondaryColor:"#fff"},Bootstrap5Dark:{primaryColor:"#0d6efd",secondaryColor:"#fff"},Tailwind:{primaryColor:"#4f46e5",secondaryColor:"#fff"},TailwindDark:{primaryColor:"#22d3ee",secondaryColor:"#fff"},Fluent:{primaryColor:"#0078d4",secondaryColor:"#fff"},FluentDark:{primaryColor:"#0078d4",secondaryColor:"#fff"},Bootstrap4:{primaryColor:"#007bff",secondaryColor:"#fff"},Bootstrap:{primaryColor:"#317ab9",secondaryColor:"#fff"},BootstrapDark:{primaryColor:"#317ab9",secondaryColor:"#fff"},Material:{primaryColor:"#e3165b",secondaryColor:"#fff"},MaterialDark:{primaryColor:"#00b0ff",secondaryColor:"#fff"},Fabric:{primaryColor:"#0078d6",secondaryColor:"#fff"},FabricDark:{primaryColor:"#0074cc",secondaryColor:"#fff"},Highcontrast:{primaryColor:"#000000",secondaryColor:"#fff"},Material3:{primaryColor:"#6750a4",secondaryColor:"#fff"},Material3Dark:{primaryColor:"#d0bcff",secondaryColor:"#fff"}}},t.prototype.updateToolbar=function(e,t,i){},t.prototype.triggerShapeChanged=function(e){if(sf.base.isBlazor()&&this.events&&!0===this.events.shapeChanged.hasDelegate){var t={action:e.action,shapeSettings:e.currentShapeSettings};this.dotNetRef.invokeMethodAsync("ShapeEventAsync","ShapeChanged",null,t)}else this.trigger("shapeChange",e)},t.prototype.triggerActionComplete=function(){var e=this.curFrameObjEvent,t=this.curFinetuneObjEvent,i=this.curFilterObjEvent;if(sf.base.isBlazor()){if(this.isFrameBtnClick&&this.events&&!0===this.events.frameChanged.hasDelegate){var n={frameSettings:e.currentFrameSetting};this.dotNetRef.invokeMethodAsync("OnFrameChangingAsync","FrameChanged",null,n)}if(this.isFinetuneBtnClick&&this.events&&!0===this.events.finetuneValueChanged.hasDelegate){var s={finetune:this.toPascalCase(t.finetune),value:parseInt(t.value.toString())};this.dotNetRef.invokeMethodAsync("OnFinetuneValueChangeAsync","FinetuneValueChanged",null,s)}if(this.isFilterCanvasClick&&this.events&&!0===this.events.imageFiltered.hasDelegate){var o={filter:this.toPascalCase(i.filter)};this.dotNetRef.invokeMethodAsync("OnImageFilterEventAsync","ImageFiltered",null,o)}}this.isFilterCanvasClick=this.isFinetuneBtnClick=this.isFrameBtnClick=!1},N([sf.base.Property("")],t.prototype,"cssClass",void 0),N([sf.base.Property(!1)],t.prototype,"disabled",void 0),N([sf.base.Property("100%")],t.prototype,"height",void 0),N([sf.base.Property("Bootstrap5")],t.prototype,"theme",void 0),N([sf.base.Property()],t.prototype,"toolbar",void 0),N([sf.base.Property()],t.prototype,"toolbarTemplate",void 0),N([sf.base.Property("100%")],t.prototype,"width",void 0),N([sf.base.Property(!0)],t.prototype,"allowUndoRedo",void 0),N([sf.base.Property(!0)],t.prototype,"showQuickAccessToolbar",void 0),N([sf.base.Property()],t.prototype,"quickAccessToolbarTemplate",void 0),N([sf.base.Property(!1)],t.prototype,"isReadOnly",void 0),N([sf.base.Property(!1)],t.prototype,"enableRtl",void 0),N([sf.base.Property(!1)],t.prototype,"enablePersistence",void 0),N([sf.base.Complex({},O)],t.prototype,"finetuneSettings",void 0),N([sf.base.Complex({},E)],t.prototype,"zoomSettings",void 0),N([sf.base.Complex({},I)],t.prototype,"selectionSettings",void 0),N([sf.base.Complex({},T)],t.prototype,"fontFamily",void 0),N([sf.base.Event()],t.prototype,"beforeSave",void 0),N([sf.base.Event()],t.prototype,"created",void 0),N([sf.base.Event()],t.prototype,"destroyed",void 0),N([sf.base.Event()],t.prototype,"zooming",void 0),N([sf.base.Event()],t.prototype,"panning",void 0),N([sf.base.Event()],t.prototype,"cropping",void 0),N([sf.base.Event()],t.prototype,"rotating",void 0),N([sf.base.Event()],t.prototype,"flipping",void 0),N([sf.base.Event()],t.prototype,"shapeChanging",void 0),N([sf.base.Event()],t.prototype,"selectionChanging",void 0),N([sf.base.Event()],t.prototype,"fileOpened",void 0),N([sf.base.Event()],t.prototype,"saved",void 0),N([sf.base.Event()],t.prototype,"toolbarCreated",void 0),N([sf.base.Event()],t.prototype,"toolbarUpdating",void 0),N([sf.base.Event()],t.prototype,"toolbarItemClicked",void 0),N([sf.base.Event()],t.prototype,"imageFiltering",void 0),N([sf.base.Event()],t.prototype,"finetuneValueChanging",void 0),N([sf.base.Event()],t.prototype,"click",void 0),N([sf.base.Event()],t.prototype,"shapeChange",void 0),N([sf.base.Event()],t.prototype,"quickAccessToolbarOpen",void 0),N([sf.base.Event()],t.prototype,"resizing",void 0),N([sf.base.Event()],t.prototype,"quickAccessToolbarItemClick",void 0),N([sf.base.Event()],t.prototype,"frameChange",void 0),t=i=N([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),j=(M=function(e,t){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),A=function(e,t,i,n,s){this.dataId=e,this.element=t,this.element.id=i.id,window.sfBlazor.setCompInstance(this),this.dotNetRef=s,this.imageEditorBase=new z,this.imageEditorBase.cssClass=i.cssClass,this.imageEditorBase.disabled=!i.disabled,this.imageEditorBase.height=i.height,this.imageEditorBase.theme=i.theme,this.imageEditorBase.width=i.width,this.imageEditorBase.allowUndoRedo=i.allowUndoRedo,this.imageEditorBase.isReadOnly=i.isReadOnly,this.imageEditorBase.enableRtl=i.enableRtl,this.imageEditorBase.zoomSettings=i.zoomSettings,this.imageEditorBase.selectionSettings=i.selectionSettings,this.imageEditorBase.finetuneSettings=i.finetuneSettings,this.imageEditorBase.events=n,this.imageEditorBase.showQuickAccessToolbar=i.showQuickAccessToolbar,this.imageEditorBase.quickAccessToolbarTemplate=i.quickAccessToolbarTemplate,this.imageEditorBase.defaultFontFamily=i.defaultFontFamily},z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentToolbar="main-toolbar",t.currentResizeRatio="aspect",t.isInteracted=!1,t.isStraigthenChanged=!1,t.isFirstLoad=!1,t.CTTOOLBAR=".e-ie-contextual-toolbar",t.CTWRAPPER=".e-contextual-toolbar-wrapper",t.CHECKBTN=".e-ie-toolbar-check-btn",t.CLOSEBTN=".e-ie-toolbar-close-btn",t.ANNOTATEBTN=".e-ie-toolbar-annotation",t.MAINSEP=".e-ie-toolbar-main-separator",t.MCLONEBTN=".e-ie-toolbar-main-clone-btn",t.MDELBTN=".e-ie-toolbar-main-delete-btn",t.MEDITBTN=".e-ie-toolbar-main-editText-btn",t.CLONEBTN=".e-ie-toolbar-clone-btn",t.DELBTN=".e-ie-toolbar-delete-btn",t.EDITBTN=".e-ie-toolbar-editText-btn",t.HORIZONTALFLIPBTN=".e-ie-toolbar-horizontalFlip-btn",t.VERTICALFLIPBTN=".e-ie-toolbar-verticalFlip-btn",t.FONTFAM=".e-ie-toolbar-e-font-family",t.FONTSIZE=".e-ie-toolbar-e-font-size",t.FONTCLR=".e-ie-toolbar-e-font-color",t.SHAPECLR=".e-ie-toolbar-e-shape-color",t.LINECLR=".e-ie-toolbar-e-line-color",t.PENCLR=".e-ie-toolbar-e-pen-color",t.SHAPEFILLCLR=".e-ie-toolbar-e-shape-fill-color",t.DDBPREVIEW=" .e-dropdownbtn-preview",t.BOLDBTN=".e-ie-toolbar-bold-btn",t.ITALICBTN=".e-ie-toolbar-italic-btn",t}return j(t,e),t.prototype.onPropertyChanged=function(){},t.prototype.preRender=function(){},t.prototype.render=function(){},t.prototype.wireZoomBtnEvents=function(){var e=this.element.querySelector("#zoomin"),t=this.element.querySelector("#zoomout");e&&e.addEventListener("click",this.zoomInBtnClickHandler.bind(this)),t&&t.addEventListener("click",this.zoomOutBtnClickHandler.bind(this))},t.prototype.zoomInBtnClickHandler=function(e){if((this.zoomSettings.zoomTrigger&s.Toolbar)===s.Toolbar){if(this.currObjType.isFiltered&&this.okBtn(),this.refreshShapeDrawing(),sf.base.Browser.isDevice&&"touchstart"===e.type){if(!e.returnValue)return;e.preventDefault()}var t={bool:!1};this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:t}}),t.bool&&this.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.isZoomBtnClick=!0,this.applyPreviewFilter(),this.currObjType.isFiltered=!1,this.togglePen&&(this.currObjType.isZoomed=!0,this.freeHandDraw(!1),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})),this.notify("draw",{prop:"resetCurrentSelectionPoint"}),this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:.1,zoomPoint:null,isResize:null}}),this.notify("draw",{prop:"redrawDownScale"}),(this.isCropTab||this.activeObj.shape)&&(this.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),this.notify("freehand-draw",{prop:"resetStraightenPoint"})),this.isStraightening&&(this.notify("draw",{prop:"resetStraightenDestPoints"}),this.notify("draw",{prop:"setDestForStraighten"}))}},t.prototype.zoomOutBtnClickHandler=function(e){if((this.zoomSettings.zoomTrigger&s.Toolbar)===s.Toolbar){if(this.currObjType.isFiltered&&this.okBtn(),this.refreshShapeDrawing(),sf.base.Browser.isDevice&&"touchstart"===e.type){if(!e.returnValue)return;e.preventDefault()}var t={bool:!1};this.notify("selection",{prop:"getFreehandDrawEditing",onPropertyChange:!1,value:{obj:t}}),t.bool&&this.notify("freehand-draw",{prop:"applyFhd",onPropertyChange:!1}),this.isZoomBtnClick=!0,this.applyPreviewFilter(),this.currObjType.isFiltered=!1,this.togglePen&&(this.currObjType.isZoomed=!0,this.freeHandDraw(!1),this.notify("undo-redo",{prop:"updateCurrUrc",value:{type:"ok"}})),this.notify("draw",{prop:"resetCurrentSelectionPoint"}),this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null,isResize:null}}),this.notify("draw",{prop:"redrawDownScale"}),(this.isCropTab||this.activeObj.shape)&&(this.notify("draw",{prop:"setStraightenActObj",value:{activeObj:null}}),this.notify("freehand-draw",{prop:"resetStraightenPoint"})),this.isStraightening&&(this.notify("draw",{prop:"resetStraightenDestPoints"}),this.notify("draw",{prop:"setDestForStraighten"}))}},t.prototype.applyPreviewFilter=function(){(document.querySelector("#"+this.element.id+"_sliderWrapper")||this.currObjType.isFiltered)&&(this.initialAdjustmentValue=this.canvasFilter=this.lowerCanvas.getContext("2d").filter,this.currObjType.isFiltered=!1)},t.prototype.refreshShapeDrawing=function(){var e={shape:""};this.notify("selection",{prop:"getCurrentDrawingShape",onPropertyChange:!1,value:{obj:e}}),""!==e.shape&&(this.notify("selection",{prop:"setCurrentDrawingShape",onPropertyChange:!1,value:{value:""}}),this.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),this.updateToolbar(this.element,"imageLoaded"))},t.prototype.updateToolbar=function(e,t,i){switch(t){case"imageLoaded":switch(this.currentToolbar){case"text-toolbar":this.updateTextToolbar(e,!1);break;case"line-toolbar":case"path-toolbar":this.updateLineToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"arrow-toolbar":this.updateArrowToolbar(e,!1);break;case"rectangle-toolbar":case"ellipse-toolbar":this.updateRectangleToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"crop-toolbar":if(this.updateCropToolbar(e,!1),sf.base.Browser.isDevice)this.element.querySelector(".e-ie-contextual-slider .e-slider-container")&&this.element.querySelector(".e-ie-contextual-slider .e-slider-container").classList.remove("e-straighten-slider"),this.updateContextualToolbar(e,!1),this.element.querySelector(".e-bottom-toolbar-area").style.marginTop="";break;case"contextual-toolbar":this.updateContextualToolbar(e,!1),"okBtnClick"===i&&this.okBtn();break;case"pen-toolbar":this.updatePenToolbar(e,!1);break;case"addImage-toolbar":this.updateContextualToolbar(e,!1),this.updateImageToolbar(e,!1);break;case"resize-toolbar":this.updateResizeToolbar(e,!1),this.queryToAddRemoveClass(e,".e-ie-toolbar-undo","e-hidden",!0),this.queryToAddRemoveClass(e,".e-ie-toolbar-redo","e-hidden",!0),this.queryToAddRemoveClass(e,".e-ie-toolbar-zoom-in","e-hidden",!0),this.queryToAddRemoveClass(e,".e-ie-toolbar-zoom-out","e-hidden",!0);break;case"frame-toolbar":this.updateContextualToolbar(e,!1),this.updateFrameToolbar(e,!1),"okBtnClick"===i&&this.okBtn()}"main-toolbar"!==this.currentToolbar&&(this.updateMainToolbar(e,!0),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!1),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!1)),"initial"===i&&(this.queryToAddRemoveClass(e,".e-ie-toolbar-undo","e-hidden",!0),this.queryToAddRemoveClass(e,".e-ie-toolbar-redo","e-hidden",!0),this.queryToAddRemoveClass(e,".e-ie-toolbar-zoom-in","e-hidden",!0),this.queryToAddRemoveClass(e,".e-ie-toolbar-zoom-out","e-hidden",!0),this.updateMainToolbar(e,!0),this.updateRightToolbar(e,!0)),this.isInteracted=!1,this.enableDisableToolbarBtn(),"quick-access-toolbar"===this.quickAccessToolbar&&this.destroyQuickAccessToolbar(),this.currentToolbar="main-toolbar";break;case"line":case"path":switch(this.currentToolbar){case"main-toolbar":this.updateMainToolbar(e,!1);break;case"rectangle-toolbar":case"ellipse-toolbar":this.updateRectangleToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"text-toolbar":this.updateTextToolbar(e,!1);break;case"arrow-toolbar":this.updateArrowToolbar(e,!1);break;case"pen-toolbar":this.updatePenToolbar(e,!1);break;case"addImage-toolbar":this.updateContextualToolbar(e,!1),this.updateImageToolbar(e,!1);break;case"resize-toolbar":this.updateResizeToolbar(e,!1);break;case"frame-toolbar":this.updateContextualToolbar(e,!1),this.updateFrameToolbar(e,!1)}"line"===t||"pathQuickAccessToolbar"===i||"path"===t&&sf.base.Browser.isDevice?(this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0)):"path"!==t||sf.base.Browser.isDevice||(this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!1),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!1)),!this.events||!0!==this.events.toolbarUpdating.hasDelegate||"line-toolbar"!==this.currentToolbar&&"path-toolbar"!==this.currentToolbar||this.updateLineToolbar(e,!1,this.currentToolbar.split("-")[0]),this.updateLineToolbar(e,!0,t,i),this.updateColorToolbar(this.element,this.activeObj.strokeSettings,t),this.currentToolbar=t+"-toolbar";break;case"arrow":switch(this.currentToolbar){case"main-toolbar":this.updateMainToolbar(e,!1);break;case"rectangle-toolbar":case"ellipse-toolbar":this.updateRectangleToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"text-toolbar":this.updateTextToolbar(e,!1);break;case"pen-toolbar":this.updatePenToolbar(e,!1);break;case"line-toolbar":case"path-toolbar":this.updateLineToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"addImage-toolbar":this.updateContextualToolbar(e,!1),this.updateImageToolbar(e,!1);break;case"resize-toolbar":this.updateResizeToolbar(e,!1);break;case"frame-toolbar":this.updateContextualToolbar(e,!1),this.updateFrameToolbar(e,!1)}"arrow-toolbar"!==this.currentToolbar&&(this.updateArrowToolbar(e,!0),this.updateColorToolbar(this.element,this.activeObj.strokeSettings,t),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0)),this.currentToolbar="arrow-toolbar";break;case"text":switch(this.currentToolbar){case"main-toolbar":this.updateMainToolbar(e,!1);break;case"rectangle-toolbar":case"ellipse-toolbar":this.updateRectangleToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"line-toolbar":case"path-toolbar":this.updateLineToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"arrow-toolbar":this.updateArrowToolbar(e,!1);break;case"pen-toolbar":this.updatePenToolbar(e,!1);break;case"addImage-toolbar":this.updateContextualToolbar(e,!1),this.updateImageToolbar(e,!1);break;case"resize-toolbar":this.updateResizeToolbar(e,!1);break;case"frame-toolbar":this.updateContextualToolbar(e,!1),this.updateFrameToolbar(e,!1)}"text-toolbar"!==this.currentToolbar&&(this.updateTextToolbar(e,!0),this.updateColorToolbar(this.element,this.activeObj.strokeSettings,t),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0)),this.currentToolbar="text-toolbar";break;case"rectangle":case"ellipse":switch(this.currentToolbar){case"main-toolbar":this.updateMainToolbar(e,!1);break;case"line-toolbar":case"path-toolbar":this.updateLineToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"text-toolbar":this.updateTextToolbar(e,!1);break;case"arrow-toolbar":this.updateArrowToolbar(e,!1);break;case"pen-toolbar":this.updatePenToolbar(e,!1);break;case"addImage-toolbar":this.updateContextualToolbar(e,!1),this.updateImageToolbar(e,!1);break;case"resize-toolbar":this.updateResizeToolbar(e,!1);break;case"frame-toolbar":this.updateContextualToolbar(e,!1),this.updateFrameToolbar(e,!1)}!this.events||!0!==this.events.toolbarUpdating.hasDelegate||"rectangle-toolbar"!==this.currentToolbar&&"ellipse-toolbar"!==this.currentToolbar||this.updateRectangleToolbar(e,!1,this.currentToolbar.split("-")[0]),this.updateRectangleToolbar(e,!0,t),this.updateColorToolbar(this.element,this.activeObj.strokeSettings,t),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0),this.currentToolbar=t+"-toolbar";break;case"cropToolbar":"contextual-toolbar"===this.currentToolbar&&this.updateContextualToolbar(e,!1),this.updateMainToolbar(e,!1),this.updateCropToolbar(e,!0),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0),this.currentToolbar="crop-toolbar";break;case"pen":switch(this.currentToolbar){case"main-toolbar":this.updateMainToolbar(e,!1);break;case"rectangle-toolbar":case"ellipse-toolbar":this.updateRectangleToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"line-toolbar":case"path-toolbar":this.updateLineToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"text-toolbar":this.updateTextToolbar(e,!1);break;case"arrow-toolbar":this.updateArrowToolbar(e,!1);break;case"addImage-toolbar":this.updateContextualToolbar(e,!1),this.updateImageToolbar(e,!1);break;case"resize-toolbar":this.updateResizeToolbar(e,!1);break;case"frame-toolbar":this.updateContextualToolbar(e,!1),this.updateFrameToolbar(e,!1)}"pen-toolbar"!==this.currentToolbar&&(this.updatePenToolbar(e,!0),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0),this.updateColorToolbar(this.element,this.activeObj.strokeSettings,t)),this.currentToolbar="pen-toolbar";break;case"colorToolbar":this.updateColorToolbar(this.element,this.activeObj.strokeSettings,this.currentToolbar.split("-")[0]);break;case"enableDisableToolbarBtn":this.enableDisableToolbarBtn(i);break;case"quickAccessToolbar":this.updateQuickAccessToolbar(i);break;case"destroyQuickAccessToolbar":this.destroyQuickAccessToolbar();break;case"closeContextualToolbar":this.updateContextualToolbar(e,!1),"main-toolbar"!==this.currentToolbar&&("frame-toolbar"===this.currentToolbar&&this.updateFrameToolbar(e,!1),this.updateMainToolbar(e,!0),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!1),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!1)),this.currentToolbar="main-toolbar";break;case"image":switch(this.currentToolbar){case"main-toolbar":this.updateMainToolbar(e,!1);break;case"rectangle-toolbar":case"ellipse-toolbar":this.updateRectangleToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"line-toolbar":case"path-toolbar":this.updateLineToolbar(e,!1,this.currentToolbar.split("-")[0]);break;case"text-toolbar":this.updateTextToolbar(e,!1);break;case"arrow-toolbar":this.updateArrowToolbar(e,!1);break;case"frame-toolbar":this.updateContextualToolbar(e,!1),this.updateFrameToolbar(e,!1)}"addImage-toolbar"!==this.currentToolbar&&(this.updateImageToolbar(e,!0),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0)),this.updateColorToolbar(this.element,"no-color",t),this.currentToolbar="addImage-toolbar";break;case"resize":switch(this.currentToolbar){case"main-toolbar":this.updateMainToolbar(e,!1);break;case"contextual-toolbar":this.updateMainToolbar(e,!1),this.updateContextualToolbar(e,!1);break;case"frame-toolbar":this.updateContextualToolbar(e,!1),this.updateFrameToolbar(e,!1)}"resize-toolbar"!==this.currentToolbar&&(this.updateResizeToolbar(e,!0),this.queryToAddRemoveClass(e,".e-ie-toolbar-undo","e-hidden",!1),this.queryToAddRemoveClass(e,".e-ie-toolbar-redo","e-hidden",!1),this.queryToAddRemoveClass(e,".e-ie-toolbar-zoom-in","e-hidden",!1),this.queryToAddRemoveClass(e,".e-ie-toolbar-zoom-out","e-hidden",!1),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0)),this.currentToolbar="resize-toolbar";break;case"nonAspectRatio":case"aspectRatio":"nonAspectRatio"===t?(this.queryToAddRemoveClass(this.element,".e-ie-toolbar-nonaspect-ratio-btn","e-hidden",!1),this.queryToAddRemoveClass(this.element,".e-ie-toolbar-aspect-ratio-btn","e-hidden",!0),this.currentResizeRatio="aspect"):(this.queryToAddRemoveClass(this.element,".e-ie-toolbar-aspect-ratio-btn","e-hidden",!1),this.queryToAddRemoveClass(this.element,".e-ie-toolbar-nonaspect-ratio-btn","e-hidden",!0),this.currentResizeRatio="non-aspect");break;case"frame":switch(this.currentToolbar){case"main-toolbar":this.updateMainToolbar(e,!1);break;case"contextual-toolbar":this.updateMainToolbar(e,!1),this.updateContextualToolbar(e,!1)}"frame-toolbar"!==this.currentToolbar&&(this.updateFrameToolbar(e,!0),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0)),this.currentToolbar="frame-toolbar"}var n=window.sfBlazor.getCompInstance(this.toolbarId);if(n){if((o=n.scrollModule)&&n.element.querySelector(".e-scroll-right-nav").classList.contains("e-overlay")){var s=n.element.querySelector(".e-hscroll-bar");s.scrollLeft+s.offsetWidth<s.scrollWidth&&n.destroyScroll()}n.refreshOverflow(),o&&!n.scrollModule&&n.itemPositioning()}if(sf.base.Browser.isDevice){var o,r=window.sfBlazor.getCompInstance(this.bottomToolbarId);if(r)(o=r.scrollModule)&&r.element.querySelector(".e-scroll-right-nav")&&r.destroyScroll(),r.refreshOverflow(),o&&!r.scrollModule&&r.itemPositioning()}},t.prototype.queryToAddRemoveClass=function(e,t,i,n){var s=e.querySelector(t);s&&(n?s.classList.remove(i):s.classList.add(i))},t.prototype.updateMainToolbar=function(e,t){var i=this,n=[".e-ie-toolbar-crop-btn",".e-ie-toolbar-main-annotation",".e-ie-toolbar-finetune-btn",".e-ie-toolbar-filter-btn",".e-ie-toolbar-main-frame-btn",".e-ie-toolbar-main-resize-btn"];sf.base.Browser.isDevice&&(n.push(".e-ie-toolbar-upload"),n.push(".e-ie-toolbar-reset-btn"),n.push(".e-ie-toolbar-save-btn")),n.forEach((function(n){i.queryToAddRemoveClass(e,n,"e-hidden",t)})),e.querySelectorAll(".e-ie-toolbar-custom").forEach((function(e){e.classList.toggle("e-hidden",!t)}))},t.prototype.updateCropToolbar=function(e,t){var i=this;[".e-ie-toolbar-crop",".e-ie-toolbar-crop-separator",".e-ie-toolbar-rotateleft-btn",".e-ie-toolbar-rotateright-btn",".e-ie-toolbar-horizontalflip-btn",".e-ie-toolbar-verticalflip-btn",".e-ie-toolbar-straighten-separator",".e-ie-toolbar-straighten"].forEach((function(n){i.queryToAddRemoveClass(e,n,"e-hidden",t)}))},t.prototype.updateRightToolbar=function(e,t){var i=this;[".e-ie-toolbar-reset-btn",".e-ie-toolbar-save-btn"].forEach((function(n){i.queryToAddRemoveClass(e,n,"e-hidden",t)}))},t.prototype.updateRectangleToolbar=function(e,t,i){var n,s=this;this.events&&!0===this.events.toolbarUpdating.hasDelegate?"rectangle"===i?n=this.rectangleToolbar:"ellipse"===i&&(n=this.ellipseToolbar):n=[this.ANNOTATEBTN,this.SHAPEFILLCLR,this.SHAPECLR,".e-ie-toolbar-e-noshape-size",this.MAINSEP,this.MCLONEBTN,this.MDELBTN],n.forEach((function(i){s.queryToAddRemoveClass(e,i,"e-hidden",t)})),[this.MCLONEBTN,this.MDELBTN].forEach((function(i){s.queryToAddRemoveClass(e,i,"e-overlay",!t)}))},t.prototype.updatePenToolbar=function(e,t){var i=this;(this.events&&!0===this.events.toolbarUpdating.hasDelegate?this.penToolbar:[this.ANNOTATEBTN,this.PENCLR,".e-ie-toolbar-e-pen-size",this.MAINSEP,this.MDELBTN]).forEach((function(n){i.queryToAddRemoveClass(e,n,"e-hidden",t)})),[this.MDELBTN].forEach((function(n){i.queryToAddRemoveClass(e,n,"e-overlay",!t)}))},t.prototype.updateImageToolbar=function(e,t){var i=this;(this.events&&!0===this.events.toolbarUpdating.hasDelegate?this.imageToolbar:[this.ANNOTATEBTN,".e-ie-toolbar-rotateLeft-btn",".e-ie-toolbar-rotateRight-btn",".e-ie-toolbar-main-horizontalFlip-btn",".e-ie-toolbar-main-verticalFlip-btn",".e-ie-toolbar-main-image-separator",".e-ie-toolbar-main-transparency-btn",this.MAINSEP,this.MCLONEBTN,this.MDELBTN]).forEach((function(n){i.queryToAddRemoveClass(e,n,"e-hidden",t)}))},t.prototype.updateResizeToolbar=function(e,t){var i=this;[".e-ie-toolbar-resize-width-btn",".e-ie-resize-width",".e-ie-toolbar-e-resize-width-input",".e-ie-toolbar-resize-height-btn",".e-ie-resize-height",".e-ie-toolbar-e-resize-height-input"].forEach((function(n){i.queryToAddRemoveClass(e,n,"e-hidden",t)})),"non-aspect"===this.currentResizeRatio?this.queryToAddRemoveClass(e,".e-ie-toolbar-nonaspect-ratio-btn","e-hidden",t):this.queryToAddRemoveClass(e,".e-ie-toolbar-aspect-ratio-btn","e-hidden",t)},t.prototype.updateFrameToolbar=function(e,t){var i=this;[".e-ie-toolbar-frame-none-btn",".e-ie-toolbar-frame-mat-btn",".e-ie-toolbar-frame-bevel-btn",".e-ie-toolbar-frame-line-btn",".e-ie-toolbar-frame-inset-btn",".e-ie-toolbar-frame-hook-btn"].forEach((function(n){i.queryToAddRemoveClass(e,n,"e-hidden",t)}))},t.prototype.updateLineToolbar=function(e,t,i,n){var s,o=this;this.events&&!0===this.events.toolbarUpdating.hasDelegate?"line"===i?s=this.lineToolbar:"path"===i&&(s=this.pathToolbar):s=[this.ANNOTATEBTN,this.LINECLR,".e-ie-toolbar-e-line-size",this.MAINSEP,this.MCLONEBTN,this.MDELBTN],s.forEach((function(i){o.queryToAddRemoveClass(e,i,"e-hidden",t)})),[this.MCLONEBTN,this.MDELBTN].forEach((function(i){var s="pathQuickAccessToolbar"===n;o.queryToAddRemoveClass(e,i,"e-overlay",t&&s)}))},t.prototype.updateArrowToolbar=function(e,t){var i,n=this;this.events&&!0===this.events.toolbarUpdating.hasDelegate?i=this.arrowToolbar:(this.updateLineToolbar(e,t),i=[this.ANNOTATEBTN,".e-ie-toolbar-e-arrow-start",".e-ie-toolbar-e-arrow-end",this.MAINSEP,this.MCLONEBTN,this.MDELBTN]),i.forEach((function(i){n.queryToAddRemoveClass(e,i,"e-hidden",t)})),[this.MCLONEBTN,this.MDELBTN].forEach((function(t){n.queryToAddRemoveClass(e,t,"e-overlay",!1)}))},t.prototype.updateTextToolbar=function(e,t){var i=this;(this.events&&!0===this.events.toolbarUpdating.hasDelegate?this.textToolbar:[this.ANNOTATEBTN,this.FONTFAM,this.BOLDBTN,this.ITALICBTN,this.FONTCLR,this.FONTSIZE,this.MAINSEP,this.MCLONEBTN,this.MDELBTN,this.MEDITBTN]).forEach((function(n){i.queryToAddRemoveClass(e,n,"e-hidden",t)}))},t.prototype.updateColorToolbar=function(e,t,i){if(t){[this.FONTCLR+this.DDBPREVIEW,this.SHAPECLR+this.DDBPREVIEW,this.LINECLR+this.DDBPREVIEW].forEach((function(i){var n=e.querySelector(i);n&&(n.style.background=t.strokeColor)})),(r=e.querySelector(this.SHAPEFILLCLR+this.DDBPREVIEW))&&(""===t.fillColor?r.classList.add("e-nocolor-item"):(r.classList.contains("e-nocolor-item")&&r.classList.remove("e-nocolor-item"),r.style.background=t.fillColor));var n=e.querySelector(this.PENCLR+this.DDBPREVIEW);if(n&&(n.style.background=t.strokeColor),"text"===i){var s=this.element.querySelector(this.BOLDBTN+" .e-btn"),o=this.element.querySelector(this.ITALICBTN+" .e-btn");s&&(this.activeObj.textSettings.bold?s.classList.add("e-selected-btn"):s.classList.remove("e-selected-btn")),o&&(this.activeObj.textSettings.italic?o.classList.add("e-selected-btn"):o.classList.remove("e-selected-btn"))}}else{var r;[this.FONTCLR+this.DDBPREVIEW,this.SHAPECLR+this.DDBPREVIEW,this.LINECLR+this.DDBPREVIEW,this.PENCLR+this.DDBPREVIEW,".e-ie-toolbar-e-frame-color"+this.DDBPREVIEW].forEach((function(t){var i=e.querySelector(t);i&&(i.style.background="#fff")})),(r=e.querySelector(this.SHAPEFILLCLR+this.DDBPREVIEW))&&r.classList.add("e-nocolor-item");var a=e.querySelector(".e-ie-toolbar-e-frame-gradient"+this.DDBPREVIEW);a&&a.classList.add("e-nocolor-item")}},t.prototype.updateContextualToolbar=function(e,t){var i=this;if(t&&e.querySelector(this.CTWRAPPER)){if("main-toolbar"===this.currentToolbar){this.updateMainToolbar(e,!1),this.queryToAddRemoveClass(e,this.CHECKBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CLOSEBTN,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CTWRAPPER,"e-hidden",!0),this.queryToAddRemoveClass(e,this.CTTOOLBAR,"e-hidden",!1),this.queryToAddRemoveClass(e,".e-ie-contextual-slider","e-hidden",!0),this.queryToAddRemoveClass(e,".e-ie-toolbar-brightness-btn","e-hidden",!0);var n=e.querySelector(".e-ie-toolbar-brightness-btn");n&&n.children.length>0&&n.children[0].focus();[".e-ie-toolbar-contrast-btn",".e-ie-toolbar-hue-btn",".e-ie-toolbar-saturation-btn",".e-ie-toolbar-grain-btn",".e-ie-toolbar-opacity-btn",".e-ie-toolbar-blur-btn"].forEach((function(t){i.queryToAddRemoveClass(e,t,"e-hidden",!0)})),this.currentToolbar="contextual-toolbar"}else this.queryToAddRemoveClass(e,this.CTWRAPPER,"e-hidden",!0),this.queryToAddRemoveClass(e,".e-ie-contextual-slider","e-hidden",!0);var s=e.querySelector("#"+e.id+"_toolbarArea"),o=e.querySelector("#"+e.id+"_contextualToolbarArea");if(o.style.left=s.offsetLeft+"px",sf.base.Browser.isDevice){var r=o.offsetHeight+1,a=e.querySelector("#"+e.id+"_canvasWrapper").offsetHeight;o.style.top=this.toolbarHeight+a-r+"px"}else o.style.top=this.toolbarHeight+"px";var l=window.sfBlazor.getCompInstance(this.toolbarId);if(l&&l.refreshOverflow(),sf.base.Browser.isDevice){var h=window.sfBlazor.getCompInstance(this.bottomToolbarId);h&&h.refreshOverflow()}}else{[this.CHECKBTN,this.CLOSEBTN,this.CTWRAPPER,this.CTTOOLBAR,".e-ie-contextual-slider",".e-ie-toolbar-brightness-btn",".e-ie-toolbar-contrast-btn",".e-ie-toolbar-hue-btn",".e-ie-toolbar-saturation-btn",".e-ie-toolbar-grain-btn",".e-ie-toolbar-opacity-btn",".e-ie-toolbar-blur-btn",".e-ie-toolbar-filter-default",".e-ie-toolbar-filter-chrome",".e-ie-toolbar-filter-cold",".e-ie-toolbar-filter-warm",".e-ie-toolbar-filter-greyscale",".e-ie-toolbar-filter-sepia",".e-ie-toolbar-filter-invert",".e-ie-toolbar-e-frame-color",".e-ie-toolbar-e-frame-size",".e-ie-toolbar-e-frame-inset",".e-ie-toolbar-e-frame-offset",".e-ie-toolbar-e-frame-radius",".e-ie-toolbar-e-frame-amnt",".e-ie-toolbar-e-frame-border",".e-ie-toolbar-e-frame-gradient"].forEach((function(t){i.queryToAddRemoveClass(e,t,"e-hidden",!1)}))}},t.prototype.updateFilterCanvas=function(e,t){var i=this.element.querySelector("#"+e),n=i.getContext("2d");this.notify("filter",{prop:"updateAdj",value:{type:t,value:null,isPreview:!0,ctx:n}}),n.clearRect(0,0,this.inMemoryCanvas.width,this.inMemoryCanvas.height),n.drawImage(this.inMemoryCanvas,0,0,300,150),(this.currentFilter===e||""==this.currentFilter&&"default"===t)&&i.parentElement.parentElement.classList.add("e-selected")},t.prototype.updateFilterToolBar=function(){var e=this;sf.popups.showSpinner(this.element);[".e-ie-toolbar-filter-default",".e-ie-toolbar-filter-chrome",".e-ie-toolbar-filter-cold",".e-ie-toolbar-filter-warm",".e-ie-toolbar-filter-greyscale",".e-ie-toolbar-filter-sepia",".e-ie-toolbar-filter-invert"].forEach((function(t){e.queryToAddRemoveClass(e.element,t,"e-hidden",!0)})),this.queryToAddRemoveClass(this.element,this.CTWRAPPER,"e-hidden",!0),this.queryToAddRemoveClass(this.element,this.CTTOOLBAR,"e-hidden",!0),sf.base.Browser.isDevice?(this.queryToAddRemoveClass(this.element,".e-ie-toolbar-upload","e-hidden",!1),this.queryToAddRemoveClass(this.element,".e-ie-toolbar-reset-btn","e-hidden",!1),this.queryToAddRemoveClass(this.element,".e-ie-toolbar-save-btn","e-hidden",!1)):(this.queryToAddRemoveClass(this.element,this.CLOSEBTN,"e-hidden",!0),this.queryToAddRemoveClass(this.element,this.CHECKBTN,"e-hidden",!0)),this.setTempFilterProperties();var t=this.getCurrentCanvasData(),i=this.element.querySelector(this.CTWRAPPER+" .e-toolbar-item.e-selected");i&&i.classList.remove("e-selected"),this.inMemoryCanvas.width=t.width,this.inMemoryCanvas.height=t.height,this.inMemoryCanvas.getContext("2d").putImageData(t,0,0),this.updateFilterCanvas("e-ie-toolbar-default","default"),this.updateFilterCanvas("e-ie-toolbar-chrome","chrome"),this.updateFilterCanvas("e-ie-toolbar-cold","cold"),this.updateFilterCanvas("e-ie-toolbar-warm","warm"),this.updateFilterCanvas("e-ie-toolbar-grayscale","grayscale"),this.updateFilterCanvas("e-ie-toolbar-sepia","sepia"),this.updateFilterCanvas("e-ie-toolbar-invert","invert"),this.initialAdjustmentValue=this.lowerCanvas.getContext("2d").filter;var n=this.element.querySelector("#"+this.element.id+"_toolbarArea"),s=this.element.querySelector("#"+this.element.id+"_contextualToolbarArea");if(s.style.left=n.offsetLeft+"px",sf.base.Browser.isDevice){var o=s.offsetHeight,r=this.element.querySelector("#"+this.element.id+"_canvasWrapper").offsetHeight;s.style.top=this.toolbarHeight+r-o+"px";var a=window.sfBlazor.getCompInstance(this.canvasToolbarId);a&&a.refreshOverflow()}else s.style.top=this.toolbarHeight+"px";this.currentToolbar="contextual-toolbar",sf.popups.hideSpinner(this.element);var l=window.sfBlazor.getCompInstance(this.toolbarId);l&&l.refreshOverflow()},t.prototype.updateContextualFrameToolBar=function(e){var t=this,i=[".e-ie-toolbar-e-frame-color",".e-ie-toolbar-e-frame-size",".e-ie-toolbar-e-frame-inset",".e-ie-toolbar-e-frame-offset",".e-ie-toolbar-e-frame-radius",".e-ie-toolbar-e-frame-amnt",".e-ie-toolbar-e-frame-border",".e-ie-toolbar-e-frame-gradient"];switch(i.forEach((function(e){t.queryToAddRemoveClass(t.element,e,"e-hidden",!1)})),e.toLowerCase()){case"framemat":case"framebevel":i=[".e-ie-toolbar-e-frame-color",".e-ie-toolbar-e-frame-size",".e-ie-toolbar-e-frame-gradient"];break;case"frameline":i=[".e-ie-toolbar-e-frame-color",".e-ie-toolbar-e-frame-size",".e-ie-toolbar-e-frame-inset",".e-ie-toolbar-e-frame-offset",".e-ie-toolbar-e-frame-radius",".e-ie-toolbar-e-frame-amnt",".e-ie-toolbar-e-frame-border",".e-ie-toolbar-e-frame-gradient"];break;case"frameinset":i=[".e-ie-toolbar-e-frame-color",".e-ie-toolbar-e-frame-size",".e-ie-toolbar-e-frame-inset",".e-ie-toolbar-e-frame-offset",".e-ie-toolbar-e-frame-gradient"];break;case"framehook":i=[".e-ie-toolbar-e-frame-color",".e-ie-toolbar-e-frame-size",".e-ie-toolbar-e-frame-inset",".e-ie-toolbar-e-frame-gradient"]}i.forEach((function(e){t.queryToAddRemoveClass(t.element,e,"e-hidden",!0)})),this.queryToAddRemoveClass(this.element,this.CTWRAPPER,"e-hidden",!0),this.element.querySelector(this.CTWRAPPER).classList.add("e-frame-wrapper"),this.queryToAddRemoveClass(this.element,this.CTTOOLBAR,"e-hidden",!0),sf.base.Browser.isDevice||(this.queryToAddRemoveClass(this.element,this.CLOSEBTN,"e-hidden",!0),this.queryToAddRemoveClass(this.element,this.CHECKBTN,"e-hidden",!0));var n=this.element.querySelector("#"+this.element.id+"_toolbarArea"),s=this.element.querySelector("#"+this.element.id+"_contextualToolbarArea");if(s.style.left=n.offsetLeft+"px",sf.base.Browser.isDevice){var o=s.offsetHeight,r=this.element.querySelector("#"+this.element.id+"_canvasWrapper").offsetHeight;s.style.top=this.toolbarHeight+r-o+"px";var a=window.sfBlazor.getCompInstance(this.canvasToolbarId);if(a){var l=a.scrollModule;l&&a.element.querySelector(".e-scroll-right-nav")&&a.destroyScroll(),a.refreshOverflow(),l&&!a.scrollModule&&a.itemPositioning()}}else s.style.top=this.toolbarHeight+"px";this.currentToolbar="frame-toolbar";var h=window.sfBlazor.getCompInstance(this.toolbarId);h&&h.refreshOverflow()},t.prototype.updateQuickAccessToolbar=function(e){var t,i=this;switch(e){case"pen":this.queryToAddRemoveClass(this.element,this.MDELBTN,"e-overlay",!0),t=[{Name:"Delete"}];break;case"shape":case"ellipse":case"rectangle":case"arrow":case"line":case"path":this.queryToAddRemoveClass(this.element,this.MCLONEBTN,"e-overlay",!0),this.queryToAddRemoveClass(this.element,this.MDELBTN,"e-overlay",!0),t=[{Name:"Clone"},{Name:"Delete"}];break;case"text":t=[{Name:"Clone"},{Name:"Delete"},{Name:"EditText"}];break;case"image":t=[{Name:"HorizontalFlip"},{Name:"VerticalFlip"},{Name:"Clone"},{Name:"Delete"}]}var n={cancel:!1,shape:e,toolbarItems:t};"pen"===e&&(n.shape="freehanddraw"),this.events&&this.events.quickAccessToolbarOpening.hasDelegate?this.dotNetRef.invokeMethodAsync("QuickAccessToolbarEventAsync",n).then((function(t){t.cancel||i.renderQuickAccessToolbar(t.toolbarItems,e)})):this.renderQuickAccessToolbar(t,e)},t.prototype.renderQuickAccessToolbar=function(e,t){if(this.activeObj&&this.showQuickAccessToolbar){var i=document.getElementById(this.element.id+"_quickAccessToolbarArea");document.getElementById(this.element.id+"_quickAccessToolbarArea")&&(document.getElementById(this.element.id+"_quickAccessToolbarArea").style.display="block");var n=this.toolbarHeight&&0!==this.toolbarHeight?this.toolbarHeight:i.clientHeight,s=0;if(e&&(s=e.length),sf.base.isNullOrUndefined(this.quickAccessToolbarTemplate))for(var o=this.element.querySelector(this.CLONEBTN),r=this.element.querySelector(this.DELBTN),a=this.element.querySelector(this.EDITBTN),l=this.element.querySelector(this.HORIZONTALFLIPBTN),h=this.element.querySelector(this.VERTICALFLIPBTN),d=0;d<s;d++){switch(e[d].name||e[d].Name){case"Clone":this.queryToAddRemoveClass(this.element,this.CLONEBTN,"e-hidden",!0),d===s-1&&o&&(o.style.marginRight=window.getComputedStyle(l).marginLeft),0===d&&o&&l&&(o.style.marginLeft=window.getComputedStyle(l).marginLeft);break;case"Delete":this.queryToAddRemoveClass(this.element,this.DELBTN,"e-hidden",!0),0===d&&r&&l&&(r.style.marginLeft=window.getComputedStyle(l).marginLeft),d===s-1&&l&&r&&a&&(r.style.marginRight=window.getComputedStyle(l).marginLeft);break;case"EditText":this.queryToAddRemoveClass(this.element,this.EDITBTN,"e-hidden",!0),0===d&&a&&l&&(a.style.marginLeft=window.getComputedStyle(l).marginLeft);break;case"HorizontalFlip":this.queryToAddRemoveClass(this.element,this.HORIZONTALFLIPBTN,"e-hidden",!0),d===s-1&&l&&(l.style.marginLeft=window.getComputedStyle(l).marginLeft);break;case"VerticalFlip":this.queryToAddRemoveClass(this.element,this.VERTICALFLIPBTN,"e-hidden",!0),0===d&&h&&l&&(h.style.marginLeft=window.getComputedStyle(l).marginLeft),d===s-1&&l&&h&&a&&(h.style.marginRight=window.getComputedStyle(l).marginLeft)}if(sf.base.isNullOrUndefined(e[d].name)&&sf.base.isNullOrUndefined(e[d].Name)){this.queryToAddRemoveClass(this.element,"."+e[d].cssClass.split(" ")[1],"e-hidden",!0);var c=this.element.querySelector("."+e[d].cssClass.split(" ")[1]);0===d&&c&&l&&(c.style.marginLeft=window.getComputedStyle(l).marginLeft)}}if("pen"!==t){i.style.width="auto",this.activeObj.activePoint.width=Math.abs(this.activeObj.activePoint.width),this.activeObj.activePoint.height=Math.abs(this.activeObj.activePoint.height);var p=this.activeObj.activePoint.startX<this.activeObj.activePoint.endX?this.activeObj.activePoint.startX:this.activeObj.activePoint.endX,u=this.activeObj.activePoint.startY<this.activeObj.activePoint.endY?this.activeObj.activePoint.startY:this.activeObj.activePoint.endY,f=this.activeObj.activePoint.width;if(0!==this.activeObj.rotatedAngle&&"arrow"!==this.activeObj.shape){var g={activePoint:null};this.notify("shape",{prop:"getSquarePointForRotatedShape",onPropertyChange:!1,value:{obj:this.activeObj,object:g}}),p=(C=g.activePoint).startX,u=C.startY,f=C.width}else if("path"===this.activeObj.shape){var m=this.getSquarePointForPath(this.activeObj);p=m.startX,u=m.startY,f=m.width}if(i.style.left=p+f/2-25*s+"px",parseFloat(i.style.left)+i.clientWidth/2!==p+f/2){var v=p+f/2-(parseFloat(i.style.left)+i.clientWidth/2);i.style.left=parseFloat(i.style.left)+v+"px"}u-(n+n/1.5)<this.img.destTop?i.style.top=this.img.destTop+"px":i.style.top=u-(n+n/1.5)+"px"}else if("pen"===t){var b={activePoint:null},y={freehandSelectedIndex:null};this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:y}}),this.notify("freehand-draw",{prop:"getSqPtFD",value:{idx:y.freehandSelectedIndex,obj:b}});var C=b.activePoint;i.style.width="auto",i.style.left=C.startX+C.width/2-27*s+"px",C.startY-(n+n/1.5)<this.img.destTop?i.style.top=this.img.destTop+"px":i.style.top=C.startY-(n+n/1.5)+"px"}this.quickAccessToolbar="quick-access-toolbar"}},t.prototype.destroyQuickAccessToolbar=function(){document.getElementById(this.element.id+"_quickAccessToolbarArea")&&(document.getElementById(this.element.id+"_quickAccessToolbarArea").style.display="none");var e=this.element.querySelector(this.CLONEBTN),t=this.element.querySelector(this.DELBTN),i=this.element.querySelector(this.EDITBTN),n=this.element.querySelector(this.HORIZONTALFLIPBTN),s=this.element.querySelector(this.VERTICALFLIPBTN);e&&e.removeAttribute("style"),t&&t.removeAttribute("style"),i&&i.removeAttribute("style"),n&&n.removeAttribute("style"),s&&s.removeAttribute("style"),this.queryToAddRemoveClass(this.element,this.CLONEBTN,"e-hidden",!1),this.queryToAddRemoveClass(this.element,this.DELBTN,"e-hidden",!1),this.queryToAddRemoveClass(this.element,this.EDITBTN,"e-hidden",!1),this.queryToAddRemoveClass(this.element,this.HORIZONTALFLIPBTN,"e-hidden",!1),this.queryToAddRemoveClass(this.element,this.VERTICALFLIPBTN,"e-hidden",!1),this.element.querySelectorAll(".e-ie-qat").forEach((function(e){e.classList.add("e-hidden"),e.removeAttribute("style")})),this.quickAccessToolbar=""},t.prototype.getStrokeWidth=function(e,t){var i,n;if("pen"===t){var s={freehandSelectedIndex:null};this.notify("freehand-draw",{prop:"getFreehandSelectedIndex",onPropertyChange:!1,value:{obj:s}}),n=!sf.base.isNullOrUndefined(s.freehandSelectedIndex)&&s.freehandSelectedIndex>-1?parseInt(this.pointColl[s.freehandSelectedIndex].strokeWidth,10):2}else n=parseInt(e,10)/2;switch(n){case 1:i="X-Small";break;case 2:i="Small";break;case 3:i="Medium";break;case 4:i="Large";break;case 5:i="X-Large"}return i},t.prototype.enableDisableToolbarBtn=function(e){var t=this,i={appliedUndoRedoColl:[]};this.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:i}});var n={undoRedoStep:null};if(this.notify("undo-redo",{prop:"getUndoRedoStep",value:{obj:n}}),this.element.querySelector(".e-ie-toolbar-undo")){var s=this.element.querySelector("#undo");s&&(0===n.undoRedoStep?(s.classList.add("e-overlay"),s.setAttribute("aria-disabled","true")):(s.classList.remove("e-overlay"),s.setAttribute("aria-disabled","false")));var o=this.element.querySelector("#redo");o&&(n.undoRedoStep===i.appliedUndoRedoColl.length?(o.classList.add("e-overlay"),o.setAttribute("aria-disabled","true")):(0===n.undoRedoStep&&i.appliedUndoRedoColl.length>0||n.undoRedoStep>0)&&(o.classList.remove("e-overlay"),o.setAttribute("aria-disabled","false")))}var r=this.element.querySelector("#zoomin");r&&(this.zoomSettings.zoomFactor>=this.zoomSettings.maxZoomFactor?(r.classList.add("e-overlay"),r.setAttribute("aria-disabled","true")):(r.classList.remove("e-overlay"),r.setAttribute("aria-disabled","false")));var a=this.element.querySelector("#zoomout");a&&(this.zoomSettings.zoomFactor<=this.zoomSettings.minZoomFactor?(a.classList.add("e-overlay"),a.setAttribute("aria-disabled","true")):(a.classList.remove("e-overlay"),a.setAttribute("aria-disabled","false")));var l=document.querySelector(".e-ie-toolbar-main-frame-btn");l&&(this.currSelectionPoint&&"crop-circle"===this.currSelectionPoint.shape||this.isCircleCrop)?l.classList.add("e-overlay"):l&&l.classList.remove("e-overlay");var h=[this.MCLONEBTN,this.MDELBTN,this.MEDITBTN];"textAreaClicked"===e?h.forEach((function(e){t.queryToAddRemoveClass(t.element,e,"e-overlay",!1)})):h.forEach((function(e){t.queryToAddRemoveClass(t.element,e,"e-overlay",!0)}))},t.prototype.createToolbar=function(){var e=this.element.querySelector(".e-ie-toolbar-upload-div");if(e){var t=e.getElementsByTagName("input")[0],i=e.getElementsByTagName("button")[0];i.className="e-tbar-btn e-tbtn-txt e-btn top-icon",i.innerHTML="",i.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-upload-icon e-icon-left"})),t.onchange=this.fileSelect.bind(this,t),i.onclick=this.fileBtnClick.bind(this)}},t.prototype.createUploader=function(){var e=this.element.querySelector(".e-ie-drop-area");if(e){var t=e.getElementsByTagName("input")[0],i=e.getElementsByTagName("a")[0];t.onchange=this.fileSelect.bind(this,t),i.onclick=function(){return t.click(),!1}}this.element.querySelector(".e-ie-toolbar-zoom-in")&&this.wireZoomBtnEvents()},t.prototype.fileSelect=function(e,t){if(t.detail&&t.detail.DropEvent){var i=t.detail.DropEvent.dataTransfer.files[0].type.split("/")[1];if("png"!=i&&"jpg"!=i&&"jpeg"!=i&&"svg"!=i)return void this.dotNetRef.invokeMethodAsync("UpdateDialog",!1)}!sf.base.isNullOrUndefined(t.detail)&&t.detail.isPaste||(this.isInteracted?(this.notify("shape",{prop:"fileChanged",value:{e:t}}),this.updateToolbar(this.element,"image")):this.notify("draw",{prop:"fileSelect",value:{inputElement:e,args:t}}))},t.prototype.fileBtnClick=function(e){0==e.x?this.isInteracted=!0:this.isInteracted=!1},t.prototype.duplicateShape=function(e,t){this.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:{activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]}}});var i,n={prevActObj:null};this.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:n}});var s=sf.base.extend({},this.activeObj,{},!0);if("image"===s.shape&&(i=sf.base.extend([],this.objColl,[],!0),this.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:i}})),sf.base.isNullOrUndefined(this.activeObj.currIndex)?this.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:e}}):n.prevActObj||t?(this.activeObj.currIndex=null,s.currIndex=null,this.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:e}})):this.notify("shape",{prop:"applyActObj",onPropertyChange:!1,value:{isMouseDown:!0}}),i=sf.base.extend([],this.objColl,[],!0),s.activePoint.startX+=10,s.activePoint.startY-=10,s.activePoint.endX+=10,s.activePoint.endY-=10,"path"===s.shape)for(var o=0;o<s.pointColl.length;o++)s.pointColl[o].x+=10,s.pointColl[o].y-=10;else"image"===s.shape&&(s.imageCanvas=this.createElement("canvas"));if(this.activeObj=sf.base.extend({},s,{},!0),"image"===this.activeObj.shape){var r=sf.base.extend({},s.activePoint,{},!0),a={width:0,height:0};this.notify("transform",{prop:"calcMaxDimension",onPropertyChange:!1,value:{width:this.activeObj.imageElement.width,height:this.activeObj.imageElement.height,obj:a,isImgShape:null}}),this.activeObj.activePoint.width=a.width,this.activeObj.activePoint.height=a.height,this.activeObj.isHorImageFlip&&this.activeObj.isVerImageFlip?(this.activeObj.isHorImageFlip=this.activeObj.isVerImageFlip=!1,this.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:s.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:!0,isVFlip:!0}}),this.activeObj.isHorImageFlip=this.activeObj.isVerImageFlip=!0):this.activeObj.isHorImageFlip?(this.activeObj.isHorImageFlip=!1,this.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:s.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:!0,isVFlip:null}}),this.activeObj.isHorImageFlip=!0):this.activeObj.isVerImageFlip?(this.activeObj.isVerImageFlip=!1,this.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:s.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:!0}}),this.activeObj.isVerImageFlip=!0):this.notify("draw",{prop:"downScaleImgCanvas",onPropertyChange:!1,value:{ctx:s.imageCanvas.getContext("2d"),isImgAnnotation:!0,isHFlip:null,isVFlip:null}}),this.activeObj.activePoint=r}"line"!==this.activeObj.shape&&"arrow"!==this.activeObj.shape||this.notify("shape",{prop:"setPointCollForLineArrow",onPropertyChange:!1,value:{obj:this.activeObj}}),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate",obj:this.activeObj}}),this.notify("undo-redo",{prop:"updateUrObj",onPropertyChange:!1,value:{objColl:i}}),this.updateToolbar(this.element,"quickAccessToolbar",this.activeObj.shape)},t.prototype.performResizeClick=function(){var e=this.element.querySelector(".e-ie-toolbar-e-resize-width-input .e-textbox"),t=this.element.querySelector(".e-ie-toolbar-e-resize-height-input .e-textbox"),i=!(!this.aspectWidth||!this.aspectHeight);(this.isCircleCrop||this.currSelectionPoint&&"crop-circle"===this.currSelectionPoint.shape)&&(this.aspectHeight=this.aspectWidth);var n=this.transform.degree%90==0&&this.transform.degree%180!=0?Math.ceil(this.img.srcHeight).toString():Math.ceil(this.img.srcWidth).toString(),s=this.transform.degree%90==0&&this.transform.degree%180!=0?Math.ceil(this.img.srcWidth).toString():Math.ceil(this.img.srcHeight).toString();i?(e.value=this.aspectWidth,t.value=this.aspectHeight,e.placeholder=t.placeholder=""):(e.placeholder=n,t.placeholder=s,e.value=t.value=""),(this.currSelectionPoint&&"crop-circle"==this.currSelectionPoint.shape||this.isCircleCrop)&&(this.currentResizeRatio="aspect"),this.notify("draw",{prop:"updateCropSelection",onPropertyChange:!1}),this.upperCanvas.style.cursor="default",this.notify("transform",{prop:"updateResize",value:{bool:!1}}),this.isResize=!0,this.updateToolbar(this.element,"resize"),this.prevCropObj=sf.base.extend({},this.cropObj,{},!0);var o={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}}),this.prevObj=o.currObj,this.currSelectionPoint&&this.prevCropObj.activeObj.shape&&(this.prevObj.activeObj=sf.base.extend({},this.prevCropObj.activeObj,{},!0)),this.prevObj.objColl=sf.base.extend([],this.objColl,[],!0),this.prevObj.pointColl=sf.base.extend([],this.pointColl,[],!0),this.prevObj.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var r={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:r}}),this.prevObj.selPointColl=sf.base.extend([],r.selPointColl,[],!0),this.resizeSrc={startX:this.img.srcLeft,startY:this.img.srcTop,width:this.img.srcWidth,height:this.img.srcHeight},this.aspectWidth&&this.aspectHeight&&("aspect"!==this.currentResizeRatio?(this.notify("transform",{prop:"resize",value:{width:this.aspectWidth,height:this.aspectHeight,isAspectRatio:!1}}),this.notify("transform",{prop:"resize",value:{width:this.aspectWidth,height:this.aspectHeight,isAspectRatio:!1}})):this.notify("transform",{prop:"resize",value:{width:this.aspectWidth,height:null,isAspectRatio:!0}}))},t.prototype.performFrameClick=function(){this.currObjType.isFiltered&&this.okBtn();var e,t,i=this.transform.zoomFactor;for(this.notify("draw",{prop:"updateCropSelection",onPropertyChange:!1}),this.frameDestPoints=sf.base.extend({},this.img,{},!0),sf.base.isNullOrUndefined(this.cxtTbarHeight)&&(e=sf.base.extend({},this.frameObj,{},!0),t=sf.base.extend({},this.tempFrameObj,{},!0),this.callFrameToolbar(),this.updateContextualFrameToolBar("framemat"),this.cxtTbarHeight=this.element.querySelector(this.CTWRAPPER).scrollHeight,this.callFrameToolbar(),this.frameObj=e,this.tempFrameObj=t,this.element.querySelector(".e-contextual-toolbar-wrapper")&&!this.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hidden")&&this.updateToolbar(this.element,"closeContextualToolbar")),this.notify("transform",{prop:"resetZoom",onPropertyChange:!1});!(this.toolbarHeight+this.img.destTop>=this.toolbarHeight+this.cxtTbarHeight);)this.notify("transform",{prop:"zoomAction",onPropertyChange:!1,value:{zoomFactor:-.1,zoomPoint:null,isResize:!0}});this.tempFrameZoomLevel=i,sf.base.Browser.isDevice?this.img.destTop-=this.cxtTbarHeight/2:this.img.destTop+=this.cxtTbarHeight/2,this.callFrameToolbar(),"none"!==this.frameObj.type&&this.updateContextualFrameToolBar("frame"+this.frameObj.type),this.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}})},t.prototype.callFrameToolbar=function(){this.notify("draw",{prop:"setTempFrame",value:{frame:this.frameObj.type}}),sf.base.extend(this.tempFrameObj,this.frameObj);var e={appliedUndoRedoColl:[]};if(this.notify("undo-redo",{prop:"getAppliedUndoRedoColl",value:{obj:e}}),0===e.appliedUndoRedoColl.length){var t={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:t}}),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:t.currObj,previousObjColl:t.currObj.objColl,previousPointColl:t.currObj.pointColl,previousSelPointColl:t.currObj.selPointColl,previousCropObj:sf.base.extend({},this.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}})}this.updateToolbar(this.element,"frame")},t.prototype.getShapeValue=function(e,t){var i,n;if("arrow"===e)i=this.activeObj.start?this.pascalToSplitWords(this.activeObj.start):void 0,n=this.activeObj.end?this.pascalToSplitWords(this.activeObj.end):void 0;else if("text"===e){var s=this.element.querySelector(this.FONTFAM),o=this.element.querySelector(this.FONTSIZE);if(s&&(i=this.activeObj.textSettings.fontFamily),o)for(var r=0;r<this.fontSizeColl.length;r++)if(parseInt(this.fontSizeColl[r].text,10)>=Math.round(this.activeObj.textSettings.fontSize)){n=(r+1).toString();break}}var a=[this.activeObj.strokeSettings.strokeColor,this.activeObj.strokeSettings.fillColor,this.getStrokeWidth(this.activeObj.strokeSettings.strokeWidth,e),e,i,n];return"get"===t?a:(this.dotNetRef.invokeMethodAsync("UpdateColorValue",a[0],a[1],a[2],e,i,n),[])},t.prototype.performCropClick=function(){this.notify("draw",{prop:"setTempStraightenZoomDeg"}),this.tempStraighten=this.transform.straighten,this.currObjType.isFiltered&&this.okBtn(),this.isStraightening=!0,this.updateToolbar(this.element,"cropToolbar"),this.updateCropTransformItems(),sf.base.Browser.isDevice||this.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}}),this.notify("draw",{prop:"setDestForStraighten"}),this.notify("draw",{prop:"setTempDestForStraighten"})},t.prototype.updateSliderValue=function(e,t){if("transparency"===t.toLowerCase()){if(this.activeObj.shape){var i,n=void 0;sf.base.isNullOrUndefined(this.activeObj.imageRatio)&&this.notify("shape",{prop:"updImgRatioForActObj",onPropertyChange:!1}),this.notify("shape",{prop:"pushActItemIntoObj"}),i=sf.base.extend({},this.cropObj,{},!0);var s={currObj:{}};this.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:s}}),(n=s.currObj).objColl=sf.base.extend([],this.objColl,[],!0),n.pointColl=sf.base.extend([],this.pointColl,[],!0),n.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var o={selPointColl:null};this.notify("freehand-draw",{prop:"getSelPointColl",onPropertyChange:!1,value:{obj:o}}),n.selPointColl=sf.base.extend([],o.selPointColl,[],!0),this.objColl.pop(),this.activeObj.opacity=e/100,this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.notify("draw",{prop:"drawObject",onPropertyChange:!1,value:{canvas:"duplicate"}}),this.objColl.push(this.activeObj),this.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"shapeTransform",previousObj:n,previousObjColl:n.objColl,previousPointColl:n.pointColl,previousSelPointColl:n.selPointColl,previousCropObj:i,previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),this.notify("selection",{prop:"redrawShape",value:{obj:this.objColl[this.objColl.length-1]}}),this.updateFinetuneSpan(t,e.toString())}}else"straighten"===t.toLowerCase()?this.setStraighten(e,!1):(this.transform.zoomFactor&&this.transform.zoomFactor<0&&(this.isFinetuning=!0),this.notify("selection",{prop:"setSliding",value:{bool:!0}}),this.setCurrAdjustmentValue(t.toLowerCase(),e),this.updateFinetuneSpan(t,e.toString()),this.isFinetuning=!1);this.enableDisableToolbarBtn()},t.prototype.updateResizeTextbox=function(){var e=this.element.querySelector(".e-ie-toolbar-e-resize-width-input .e-textbox");e&&(e.addEventListener("input",(function(){e.value.length>4&&(e.value=e.value.slice(0,-1))})),e.addEventListener("keydown",(function(e){"-"===e.key&&(e.preventDefault(),e.stopPropagation())})));var t=this.element.querySelector(".e-ie-toolbar-e-resize-height-input .e-textbox");t&&(t.addEventListener("input",(function(){t.value.length>4&&(t.value=t.value.slice(0,-1))})),t.addEventListener("keydown",(function(e){"-"===e.key&&(e.preventDefault(),e.stopPropagation())})))},t.prototype.updateFinetuneSpan=function(e,t){var i=this.element.querySelector(".e-ie-finetune-value-span");if(i)if(t)i.innerHTML=t;else{var n={adjustmentLevel:null};this.notify("filter",{prop:"getAdjustmentLevel",onPropertyChange:!1,value:{obj:n}}),i.innerHTML=Math.round(n.adjustmentLevel[e]).toString()}},t}(D);return{initialize:function(e,t,i,n,s){new A(e,t,i,n,s);var o=window.sfBlazor.getCompInstance(e);return o.imageEditorBase.isDevice=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i.test(navigator.userAgent),o.imageEditorBase.initializeImageEditor(t,s),o.imageEditorBase.createUploader(),o.imageEditorBase.isFirstLoad=!0,i.theme||(o.imageEditorBase.theme="Tailwind"),o.imageEditorBase.isDevice},flip:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.flip(t)},rotate:function(e,t){return window.sfBlazor.getCompInstance(e).imageEditorBase.rotate(t)},zoom:function(e,t,i){window.sfBlazor.getCompInstance(e).imageEditorBase.zoom(t,i)},reset:function(e){window.sfBlazor.getCompInstance(e).imageEditorBase.reset()},undo:function(e){window.sfBlazor.getCompInstance(e).imageEditorBase.undo()},redo:function(e){window.sfBlazor.getCompInstance(e).imageEditorBase.redo()},onPropertyChanged:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);switch(t){case"cssClass":n.imageEditorBase.cssClass&&sf.base.removeClass([n.imageEditorBase.element],n.imageEditorBase.cssClass.replace(/\s+/g," ").trim().split(" ")),i&&sf.base.addClass([n.imageEditorBase.element],i.replace(/\s+/g," ").trim().split(" "));break;case"disabled":n.imageEditorBase.disabled=!i,i?n.imageEditorBase.wireEvent():n.imageEditorBase.unwireEvent();break;case"height":n.imageEditorBase.element.style.height=i;break;case"width":n.imageEditorBase.element.style.width=i;break;case"theme":i&&(n.imageEditorBase.theme&&""!==n.imageEditorBase.theme?n.imageEditorBase.theme=n.imageEditorBase.toPascalCase(i):n.imageEditorBase.theme="Bootstrap5",n.imageEditorBase.upperContext.strokeStyle=n.imageEditorBase.themeColl[n.imageEditorBase.theme].primaryColor,n.imageEditorBase.upperContext.fillStyle=n.imageEditorBase.themeColl[n.imageEditorBase.theme].secondaryColor);break;case"allowUndoRedo":n.imageEditorBase.allowUndoRedo=i;break;case"showQuickAccessToolbar":n.imageEditorBase.showQuickAccessToolbar=i;break;case"isReadOnly":n.imageEditorBase.isReadOnly=i;break;case"toolbar":n.imageEditorBase.updateMainToolbar(n.element,!0),n.imageEditorBase.updateToolbar(n.element,"")}},destroy:function(e){window.sfBlazor.getCompInstance(e).imageEditorBase.destroy()},toolbarCreated:function(e){var t=window.sfBlazor.getCompInstance(e);if(t.element.querySelector(".e-ie-toolbar-upload-btn").remove(),t.element.querySelector(".e-ie-toolbar-upload-div").classList.remove("e-hide"),t.imageEditorBase.createToolbar(),t.imageEditorBase.updateColorToolbar(t.element),!sf.base.Browser.isDevice){var i=t.element.querySelector(".e-ie-toolbar-straighten .e-slider-input");i&&(i.addEventListener("custom-change",(function(e){t.imageEditorBase.transform.straighten!==parseInt(e.target.value)&&(t.imageEditorBase.updateSliderValue(parseInt(e.target.value),"straighten"),t.imageEditorBase.isStraigthenChanged=!0)})),i.addEventListener("custom-changed",(function(e){if(t.imageEditorBase.isStraigthenChanged){var i={cancel:!1,previousDegree:t.imageEditorBase.prevStraightenEvent,currentDegree:parseInt(e.target.value)};if(sf.base.isBlazor()&&t.imageEditorBase.events&&!0===t.imageEditorBase.events.rotating.hasDelegate&&t.imageEditorBase.dotNetRef.invokeMethodAsync("RotateEventAsync","OnRotate",i,null),sf.base.isBlazor()&&t.imageEditorBase.events&&!0===t.imageEditorBase.events.rotated.hasDelegate){var n={degree:i.currentDegree};t.imageEditorBase.dotNetRef.invokeMethodAsync("RotateEventAsync","Rotated",null,n)}t.imageEditorBase.isStraigthenChanged=!1}})));var n=t.element.querySelector(".e-ie-toolbar-straighten .e-handle");n&&(n.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),n.addEventListener("touchstart",(function(e){e.preventDefault(),e.stopPropagation()})));var s=t.element.querySelector(".e-ie-contextual-slider .e-slider-input");s&&(s.addEventListener("custom-change",(function(e){var i=t.element.querySelector(".e-ie-contextual-slider .e-ie-slider-label").getAttribute("data-id");"finetune"===i&&(i="brightness"),t.imageEditorBase.getCurrAdjustmentValue(i)!==parseInt(e.target.value)&&t.imageEditorBase.updateSliderValue(parseInt(e.target.value),i)})),s.addEventListener("custom-changed",(function(e){var i=t.element.querySelector(".e-ie-contextual-slider .e-ie-slider-label").getAttribute("data-id");"finetune"===i&&(i="brightness"),"transparency"!==i&&(t.imageEditorBase.notify("selection",{prop:"setSliding",value:{bool:!1}}),t.imageEditorBase.notify("draw",{prop:"redrawDownScale"}))}))),t.imageEditorBase.updateResizeTextbox()}for(var o=0;o<Object.keys(window.sfBlazor.instances).length;o++)if(Object.keys(window.sfBlazor.instances)[o].includes("sfToolbar")){var r=Object.keys(window.sfBlazor.instances)[o],a=window.sfBlazor.getCompInstance(r);if(a.element.attributes.dataId&&a.element.attributes.dataId.value===e+"_main-toolbar"){t.imageEditorBase.toolbarId=r;break}}},bottomToolbarCreated:function(e){var t=window.sfBlazor.getCompInstance(e),i=t.element.querySelector(".e-ie-contextual-slider .e-slider-input");i&&(i.addEventListener("custom-change",(function(e){var i=t.element.querySelector(".e-ie-contextual-slider .e-ie-slider-label").getAttribute("data-id");"finetune"===i&&(i="brightness"),"crop"===i&&(i="straighten"),("straighten"===i?t.imageEditorBase.transform.straighten:t.imageEditorBase.getCurrAdjustmentValue(i))!==parseInt(e.target.value)&&(t.imageEditorBase.updateSliderValue(parseInt(e.target.value),i),"straighten"===i&&(t.imageEditorBase.isStraigthenChanged=!0))})),i.addEventListener("custom-changed",(function(e){var i=t.element.querySelector(".e-ie-contextual-slider .e-ie-slider-label").getAttribute("data-id");if("finetune"===i&&(i="brightness"),"crop"===i&&(i="straighten"),"transparency"!==i&&"straighten"!==i)t.imageEditorBase.notify("selection",{prop:"setSliding",value:{bool:!1}}),t.imageEditorBase.notify("draw",{prop:"redrawDownScale"});else if("straighten"===i&&t.imageEditorBase.isStraigthenChanged){var n={cancel:!1,previousDegree:t.imageEditorBase.prevStraightenEvent,currentDegree:parseInt(e.target.value)};if(sf.base.isBlazor()&&t.imageEditorBase.events&&!0===t.imageEditorBase.events.rotating.hasDelegate&&t.imageEditorBase.dotNetRef.invokeMethodAsync("RotateEventAsync","OnRotate",n,null),sf.base.isBlazor()&&t.imageEditorBase.events&&!0===t.imageEditorBase.events.rotated.hasDelegate){var s={degree:n.currentDegree};t.imageEditorBase.dotNetRef.invokeMethodAsync("RotateEventAsync","Rotated",null,s)}t.imageEditorBase.isStraigthenChanged=!1}}))),t.imageEditorBase.updateResizeTextbox();for(var n=0;n<Object.keys(window.sfBlazor.instances).length;n++)if(Object.keys(window.sfBlazor.instances)[n].includes("sfToolbar")){var s=Object.keys(window.sfBlazor.instances)[n],o=window.sfBlazor.getCompInstance(s);if(o.element.attributes.dataId&&o.element.attributes.dataId.value===e+"_bottom-toolbar"){t.imageEditorBase.bottomToolbarId=s;break}}},canvasToolbarCreated:function(e){for(var t=window.sfBlazor.getCompInstance(e),i=0;i<Object.keys(window.sfBlazor.instances).length;i++)if(Object.keys(window.sfBlazor.instances)[i].includes("sfToolbar")){var n=Object.keys(window.sfBlazor.instances)[i],s=window.sfBlazor.getCompInstance(n);if(s.element.attributes.dataId&&s.element.attributes.dataId.value===e+"_canvas-toolbar"){t.imageEditorBase.canvasToolbarId=n;break}}},toolbarClicked:function(e,t,i){var n,s,o,r,a,l=window.sfBlazor.getCompInstance(e),h=l.element.querySelector(".e-ie-toolbar-e-resize-width-input .e-textbox"),d=l.element.querySelector(".e-ie-toolbar-e-resize-height-input .e-textbox"),c=!l.element.querySelector(l.imageEditorBase.CTWRAPPER).classList.contains("e-hidden");switch(t){case"reset":l.imageEditorBase.reset(),l.imageEditorBase.updateColorToolbar(l.element),l.imageEditorBase.updateToolbar(l.element,"imageLoaded"),l.imageEditorBase.zoomBtnHold=null,l.imageEditorBase.aspectWidth=null,l.imageEditorBase.aspectHeight=null,l.imageEditorBase.currentResizeRatio="aspect",l.imageEditorBase.tempStraighten=l.imageEditorBase.prevStraightenEvent=0,l.imageEditorBase.isStraightening=!1,l.imageEditorBase.isFilterCanvasClick=l.imageEditorBase.isFinetuneBtnClick=l.imageEditorBase.isFrameBtnClick=!1,s=l.imageEditorBase.element.querySelector(l.imageEditorBase.BOLDBTN+" .e-btn"),o=l.imageEditorBase.element.querySelector(l.imageEditorBase.ITALICBTN+" .e-btn"),s.classList.contains("e-selected-btn")&&s.classList.remove("e-selected-btn"),o.classList.contains("e-selected-btn")&&o.classList.remove("e-selected-btn");break;case"undo":l.imageEditorBase.togglePen&&l.imageEditorBase.notify("draw",{prop:"performCancel",value:{isContextualToolbar:c}}),l.imageEditorBase.notify("undo-redo",{prop:"call-undo"});break;case"redo":l.imageEditorBase.togglePen&&l.imageEditorBase.notify("draw",{prop:"performCancel",value:{isContextualToolbar:c}}),l.imageEditorBase.notify("undo-redo",{prop:"call-redo"});break;case"annotation":l.imageEditorBase.currObjType.isFiltered&&l.imageEditorBase.okBtn(),"contextual-toolbar"===l.imageEditorBase.currentToolbar&&(l.imageEditorBase.updateContextualToolbar(l.imageEditorBase.element,!1),l.imageEditorBase.currentToolbar="main-toolbar");break;case"crop":if(l.imageEditorBase.allowDownScale=!1,l.imageEditorBase.isCropTab=!0,l.imageEditorBase.performCropClick(),sf.base.Browser.isDevice){l.element.querySelector(".e-ie-contextual-slider .e-slider-container")&&l.element.querySelector(".e-ie-contextual-slider .e-slider-container").classList.add("e-straighten-slider"),l.imageEditorBase.updateContextualToolbar(l.element,!0),l.imageEditorBase.currentToolbar="crop-toolbar";var p=l.imageEditorBase.element.querySelector(l.imageEditorBase.CTWRAPPER);l.element.querySelector(".e-bottom-toolbar-area").style.marginTop=p.offsetHeight+"px",l.imageEditorBase.update();var u=l.element.querySelector("#"+l.element.id+"_canvasWrapper");u&&(u.style.height=parseInt(u.style.height)+1+"px"),l.imageEditorBase.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:"custom",startX:null,startY:null,width:null,height:null}})}break;case"rotateleft":case"rotateright":case"horizontalflip":case"verticalflip":l.imageEditorBase.isCropToolbar=!0,l.imageEditorBase.transformSelect(t),"rotateleft"!==t&&"rotateright"!==t||(l.imageEditorBase.notify("draw",{prop:"resetStraightenDestPoints"}),l.imageEditorBase.notify("draw",{prop:"setDestForStraighten"})),l.imageEditorBase.isCropToolbar=!1,l.imageEditorBase.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}});break;case"ok":l.imageEditorBase.element.querySelector(l.imageEditorBase.CTWRAPPER).classList.remove("e-frame-wrapper"),l.imageEditorBase.okBtn(),l.imageEditorBase.isStraightening=!1,l.imageEditorBase.isResize=!1,("crop-toolbar"!==l.imageEditorBase.currentToolbar||l.imageEditorBase.isCroppedEvent&&"crop-toolbar"===l.imageEditorBase.currentToolbar)&&l.imageEditorBase.updateToolbar(l.element,"imageLoaded");break;case"cancel":l.imageEditorBase.isFilterCanvasClick=l.imageEditorBase.isFinetuneBtnClick=l.imageEditorBase.isFrameBtnClick=!1,l.imageEditorBase.element.querySelector(l.imageEditorBase.CTWRAPPER).classList.remove("e-frame-wrapper"),"frame-toolbar"==l.imageEditorBase.currentToolbar&&(l.element.querySelector(".e-ie-toolbar-e-frame-color"+l.imageEditorBase.DDBPREVIEW).style.background=l.imageEditorBase.tempFrameObj.color,l.element.querySelector(".e-ie-toolbar-e-frame-gradient"+l.imageEditorBase.DDBPREVIEW).style.background=l.imageEditorBase.tempFrameObj.gradientColor,l.imageEditorBase.frameObj.border=l.imageEditorBase.tempFrameObj.border),"crop-toolbar"===l.imageEditorBase.currentToolbar&&(l.imageEditorBase.isStraightening=!1,l.imageEditorBase.updateContextualToolbar(l.element,!1)),l.imageEditorBase.notify("draw",{prop:"performCancel",onPropertyChange:!1,value:{isContextualToolbar:!l.element.querySelector(l.imageEditorBase.CTWRAPPER).classList.contains("e-hidden")}});break;case"filter":l.imageEditorBase.updateFilterToolBar(),(a=l.element.querySelector(".e-ie-toolbar-filter-btn .e-btn"))&&a.classList.add("e-selected-btn");break;case"resize":l.imageEditorBase.currObjType.isFiltered&&l.imageEditorBase.okBtn(),l.imageEditorBase.performResizeClick();break;case"nonAspectRatio":""===h.value&&""===d.value||(l.imageEditorBase.aspectWidth=h.value?h.value:h.placeholder,l.imageEditorBase.aspectHeight=d.value?d.value:d.placeholder,l.imageEditorBase.notify("transform",{prop:"resize",value:{width:parseInt(l.imageEditorBase.aspectWidth.replace(",",""),10),height:parseInt(l.imageEditorBase.aspectHeight.replace(",",""),10),isAspectRatio:!1}}),h.value=l.imageEditorBase.aspectWidth,d.value=l.imageEditorBase.aspectHeight),l.imageEditorBase.cancelCropSelection=null,l.imageEditorBase.resizeSrc={startX:l.imageEditorBase.img.srcLeft,startY:l.imageEditorBase.img.srcTop,width:l.imageEditorBase.img.srcWidth,height:l.imageEditorBase.img.srcHeight},l.imageEditorBase.updateToolbar(l.element,t);break;case"aspectRatio":(l.imageEditorBase.currSelectionPoint&&"crop-circle"!==l.imageEditorBase.currSelectionPoint.shape||!l.imageEditorBase.isCircleCrop)&&(""!==h.value?(l.imageEditorBase.aspectWidth=h.value,l.imageEditorBase.aspectHeight=d.value,l.imageEditorBase.notify("transform",{prop:"resize",value:{width:parseInt(l.imageEditorBase.aspectWidth.replace(",",""),10),height:null,isAspectRatio:!0}})):""!==d.value&&(l.imageEditorBase.aspectWidth=h.placeholder,l.imageEditorBase.aspectHeight=d.value,l.imageEditorBase.notify("transform",{prop:"resize",value:{width:parseInt(l.imageEditorBase.aspectWidth.replace(",",""),10),height:parseInt(l.imageEditorBase.aspectHeight.replace(",",""),10),isAspectRatio:!0}})),l.imageEditorBase.resizeSrc={startX:l.imageEditorBase.img.srcLeft,startY:l.imageEditorBase.img.srcTop,width:l.imageEditorBase.img.srcWidth,height:l.imageEditorBase.img.srcHeight},l.imageEditorBase.updateToolbar(l.element,t));break;case"frame":l.imageEditorBase.performFrameClick(),l.element.querySelector(".e-ie-toolbar-e-frame-color"+l.imageEditorBase.DDBPREVIEW).style.background=l.imageEditorBase.frameObj.color;var f=l.element.querySelector(".e-ie-toolbar-e-frame-gradient"+l.imageEditorBase.DDBPREVIEW);""!==l.imageEditorBase.frameObj.gradientColor?(f.classList.remove("e-nocolor-item"),f.style.background=l.imageEditorBase.frameObj.gradientColor):f.classList.contains("e-nocolor-item")||f.classList.add("e-nocolor-item"),l.element.querySelector(".e-ie-toolbar-frame-"+l.imageEditorBase.frameObj.type+"-btn .e-btn").focus(),l.element.querySelector(".e-ie-toolbar-frame-"+l.imageEditorBase.tempFrameObj.type+"-btn .e-btn").classList.remove("e-selected-btn");break;case"frameNone":case"frameMat":case"frameBevel":case"frameLine":case"frameInset":case"frameHook":(a=l.element.querySelector(".e-ie-frame-btn .e-selected-btn"))&&l.element.querySelector(".e-ie-frame-btn .e-selected-btn").classList.remove("e-selected-btn"),l.element.querySelector("#"+t+" .e-btn").classList.add("e-selected-btn"),"frameNone"==t?(l.imageEditorBase.updateContextualToolbar(l.element,!1),l.imageEditorBase.queryToAddRemoveClass(l.element,l.imageEditorBase.CHECKBTN,"e-hidden",!0),l.imageEditorBase.queryToAddRemoveClass(l.element,l.imageEditorBase.CLOSEBTN,"e-hidden",!0)):l.imageEditorBase.updateContextualFrameToolBar(t);var g={currObj:{}};l.imageEditorBase.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:g}}),l.imageEditorBase.frameObj={type:t.substring(5).toLowerCase(),color:l.imageEditorBase.frameObj.color,size:20,inset:20,offset:"frameInset"==t?60:20,radius:0,amount:1,border:l.imageEditorBase.frameObj.border,gradientColor:l.imageEditorBase.frameObj.gradientColor},l.imageEditorBase.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:g.currObj,previousObjColl:g.currObj.objColl,previousPointColl:g.currObj.pointColl,previousSelPointColl:g.currObj.selPointColl,previousCropObj:sf.base.extend({},l.imageEditorBase.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),l.imageEditorBase.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),l.imageEditorBase.isFrameBtnClick=!0,l.imageEditorBase.curFrameObjEvent={previousFrameSetting:l.imageEditorBase.tempFrameObj,currentFrameSetting:l.imageEditorBase.frameObj};break;case"aspectResize":if("height"===i){var m=l.imageEditorBase.img.destWidth,v=l.imageEditorBase.img.destHeight,b=parseFloat(d.value)/(v/m),y=b%1>=.5||b%1<=-.5?Math.round(b):b<0?Math.ceil(b):Math.floor(b);"aspect"===l.imageEditorBase.currentResizeRatio&&(null==y||isNaN(y)?""===h.value?(h.placeholder="0",""===d.value&&""!==d.placeholder&&(h.placeholder=l.imageEditorBase.img.srcWidth)):h.value=0:""===h.value?h.placeholder=y.toString():h.value=y)}else{m=l.imageEditorBase.img.destWidth,v=l.imageEditorBase.img.destHeight;var C=parseFloat(h.value)/(m/v),w=C%1>=.5||C%1<=-.5?Math.round(C):C<0?Math.ceil(C):Math.floor(C);"aspect"===l.imageEditorBase.currentResizeRatio&&(isNaN(w)?""===d.value?(d.placeholder="0",""===h.value&&""!==h.placeholder&&(d.placeholder=l.imageEditorBase.img.srcHeight)):d.value=0:""===d.value?d.placeholder=w.toString():d.value=w)}break;case"save":l.imageEditorBase.okBtn(),l.imageEditorBase.updateToolbar(l.element,"imageLoaded");break;case"bold":l.imageEditorBase.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),r=(n=l.imageEditorBase.activeObj.textSettings).bold?n.italic?"italic":"default":n.italic?"bolditalic":"bold",l.imageEditorBase.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:r}}),(s=l.imageEditorBase.element.querySelector(l.imageEditorBase.BOLDBTN+" .e-btn")).classList.contains("e-selected-btn")?s.classList.remove("e-selected-btn"):s.classList.add("e-selected-btn");break;case"italic":l.imageEditorBase.notify("selection",{prop:"setInitialTextEdit",value:{bool:!1}}),r=(n=l.imageEditorBase.activeObj.textSettings).bold&&n.italic?"bold":n.bold&&!n.italic?"bolditalic":!n.bold&&n.italic?"default":"italic",l.imageEditorBase.notify("shape",{prop:"applyFontStyle",onPropertyChange:!1,value:{item:r}}),(o=l.imageEditorBase.element.querySelector(l.imageEditorBase.ITALICBTN+" .e-btn")).classList.contains("e-selected-btn")?o.classList.remove("e-selected-btn"):o.classList.add("e-selected-btn")}if("finetune"!==t&&"filter"!==t&&"crop"!==t){var M=l.imageEditorBase.element.querySelector(".e-ie-toolbar-brightness-btn .e-btn");M.classList.contains("e-selected-btn")&&M.classList.remove("e-selected-btn"),(a=l.element.querySelector(".e-ie-frame-btn .e-selected-btn"))&&l.element.querySelector(".e-ie-frame-btn .e-selected-btn").classList.remove("e-selected-btn"),l.imageEditorBase.enableDisableToolbarBtn()}"filter"!==t&&(a=l.element.querySelector(".e-ie-toolbar-filter-btn .e-btn"))&&a.classList.remove("e-selected-btn"),l.imageEditorBase.isStraightening&&l.imageEditorBase.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}});-1!==["undo","redo","cancel","aspectRatio","nonAspectRatio","resize","save","filter","frame","frameNone","frameMat","frameBevel","frameLine","frameInset","frameHook"].indexOf(t)&&l.imageEditorBase.notify("draw",{prop:"redrawDownScale"})},contextualToolbarClicked:function(e,t){var i=window.sfBlazor.getCompInstance(e);if("frame-toolbar"!==i.imageEditorBase.currentToolbar){var n=i.element.querySelector(i.imageEditorBase.CTWRAPPER+" .e-toolbar-item.e-selected");n&&n.classList.remove("e-selected"),i.element.querySelector("#"+t).classList.add("e-selected"),i.imageEditorBase.currObjType.isFiltered=!0;var s={filter:i.imageEditorBase.toPascalCase(t),cancel:!1};if(i.imageEditorBase.events&&!0===i.imageEditorBase.events.imageFiltering.hasDelegate)i.dotNetRef.invokeMethodAsync("OnImageFilterEventAsync","ImageFiltering",s,null).then((function(e){e.cancel||(i.imageEditorBase.notify("filter",{prop:"applyImageFilter",value:{option:t.toLowerCase()}}),i.imageEditorBase.currentFilter=t,i.imageEditorBase.enableDisableToolbarBtn(),i.imageEditorBase.notify("draw",{prop:"redrawDownScale"}),i.imageEditorBase.isFilterCanvasClick=!0,i.imageEditorBase.curFilterObjEvent=e)}));else{if(s.cancel)return;i.imageEditorBase.notify("filter",{prop:"applyImageFilter",value:{option:t.toLowerCase()}}),i.imageEditorBase.currentFilter=t,i.imageEditorBase.enableDisableToolbarBtn(),i.imageEditorBase.notify("draw",{prop:"redrawDownScale"}),i.imageEditorBase.isFilterCanvasClick=!0,i.imageEditorBase.curFilterObjEvent=s}}},quickAccessToolbarClicked:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(t)){var n=null,s={prevActObj:null},o={tempObj:null},r=void 0,a=void 0,l=void 0,h=void 0,d=void 0;switch(i.imageEditorBase.notify("draw",{prop:"getPrevActObj",onPropertyChange:!1,value:{obj:s}}),i.imageEditorBase.notify("selection",{prop:"getTempActObj",onPropertyChange:!1,value:{obj:o}}),o.tempObj.activePoint.height=Math.abs(o.tempObj.activePoint.height),t){case"clone":JSON.stringify(o.tempObj)===JSON.stringify(i.imageEditorBase.activeObj)&&(n=!0),i.imageEditorBase.duplicateShape(n);break;case"delete":i.imageEditorBase.notify("selection",{prop:"deleteItem",onPropertyChange:!1}),i.imageEditorBase.updateToolbar(i.element,"imageLoaded");break;case"editText":if(i.imageEditorBase.upperContext.clearRect(0,0,i.imageEditorBase.upperCanvas.width,i.imageEditorBase.upperCanvas.height),i.imageEditorBase.notify("selection",{prop:"setTempActObj",onPropertyChange:!1,value:{obj:sf.base.extend({},i.imageEditorBase.activeObj,{},!0)}}),i.imageEditorBase.notify("selection",{prop:"setInitialTextEdit",onPropertyChange:!1,value:{bool:!0}}),i.imageEditorBase.notify("draw",{prop:"setPrevActObj",onPropertyChange:!1,value:{prevActObj:sf.base.extend({},i.imageEditorBase.activeObj,{},!0)}}),r={x:i.imageEditorBase.activeObj.activePoint.startX,y:i.imageEditorBase.activeObj.activePoint.startY},0!==i.imageEditorBase.activeObj.rotatedAngle){var c={x:r.x,y:r.y};i.imageEditorBase.notify("shape",{prop:"getTextBoxPosition",onPropertyChange:!1,value:{obj:i.imageEditorBase.activeObj,object:c}}),r.x=c.x,r.y=c.y}i.imageEditorBase.notify("shape",{prop:"renderTextArea",onPropertyChange:!1,value:{x:r.x,y:r.y,actObj:i.imageEditorBase.activeObj}}),(sf.base.isNullOrUndefined(i.imageEditorBase.activeObj.currIndex)||s.prevActObj)&&i.imageEditorBase.notify("draw",{prop:"setShapeTextInsert",onPropertyChange:!1,value:{bool:!0}}),(a=document.getElementById(i.imageEditorBase.element.id+"_quickAccessToolbarArea"))&&(a.style.display="none"),(l=i.imageEditorBase.element.querySelector(i.imageEditorBase.MCLONEBTN))&&l.classList.add("e-overlay"),(h=i.imageEditorBase.element.querySelector(i.imageEditorBase.MDELBTN))&&h.classList.add("e-overlay"),(d=i.imageEditorBase.element.querySelector(i.imageEditorBase.MEDITBTN))&&d.classList.add("e-overlay");break;case"horizontalFlip":i.element.querySelector(".e-ie-toolbar-main-horizontalFlip-btn").classList.contains("e-overlay")||i.imageEditorBase.horizontalFlip(i.imageEditorBase.activeObj.imageCanvas.getContext("2d"));break;case"verticalFlip":i.element.querySelector(".e-ie-toolbar-main-verticalFlip-btn").classList.contains("e-overlay")||i.imageEditorBase.verticalFlip(i.imageEditorBase.activeObj.imageCanvas.getContext("2d"));break;case"rotateLeft":i.element.querySelector(".e-ie-toolbar-rotateLeft-btn").classList.contains("e-overlay")||i.imageEditorBase.rotateImage("rotleft");break;case"rotateRight":i.element.querySelector(".e-ie-toolbar-rotateRight-btn").classList.contains("e-overlay")||i.imageEditorBase.rotateImage("rotright")}"clone"!==t&&"delete"!==t||i.imageEditorBase.notify("draw",{prop:"redrawDownScale"})}},updateDialog:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.notify("draw",{prop:t,onPropertyChange:!1})},getSliderValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);if("finetune"===t){if(i.imageEditorBase.currObjType.isFiltered&&i.imageEditorBase.okBtn(),i.imageEditorBase.currObjType.isFiltered=!0,i.imageEditorBase.setTempFilterProperties(),i.imageEditorBase.notify("draw",{prop:"updateFinetune"}),"contextual-toolbar"===i.imageEditorBase.currentToolbar){i.imageEditorBase.currentToolbar="main-toolbar",i.imageEditorBase.updateContextualToolbar(i.element,!1);var n=i.element.querySelector(".e-ie-toolbar-filter-btn .e-btn");n&&n.classList.remove("e-selected-btn")}i.imageEditorBase.updateContextualToolbar(i.element,!0),i.element.querySelector(".e-ie-finetune-btn .e-selected-btn")&&i.element.querySelector(".e-ie-finetune-btn .e-selected-btn").classList.remove("e-selected-btn"),i.element.querySelector(".e-ie-toolbar-brightness-btn .e-btn").classList.add("e-selected-btn"),t="brightness"}if("transparency"===t)i.imageEditorBase.updateFinetuneSpan(t),i.imageEditorBase.updateContextualToolbar(i.element,!0);else{if("crop"===t){var s=i.imageEditorBase.cropObj.straighten;return document.querySelector(".e-ie-straighten-value-span")&&(document.querySelector(".e-ie-straighten-value-span").innerHTML=s.toString()+"&#176"),parseInt(s)}["brightness","contrast","opacity","blur","hue","saturation","exposure"].indexOf(t)>-1&&("exposure"===t&&(t="grain"),i.element.querySelector(".e-ie-finetune-btn .e-selected-btn")&&i.element.querySelector(".e-ie-finetune-btn .e-selected-btn").classList.remove("e-selected-btn"),i.element.querySelector(".e-ie-toolbar-"+t+"-btn .e-btn").classList.add("e-selected-btn"),"grain"===t&&(t="exposure"),i.imageEditorBase.updateFinetuneSpan(t))}return parseInt(i.imageEditorBase.getCurrAdjustmentValue(t))},select:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);a.imageEditorBase.isCropTab=!0,sf.base.isNullOrUndefined(a.imageEditorBase.transform.cropZoomFactor)&&(a.imageEditorBase.transform.cropZoomFactor=a.imageEditorBase.transform.zoomFactor,a.imageEditorBase.notify("draw",{prop:"setTempZoomFactor",onPropertyChange:!1,value:{tempZoomFactor:a.imageEditorBase.transform.zoomFactor}})),a.imageEditorBase.transform.zoomFactor=a.imageEditorBase.transform.cropZoomFactor,a.imageEditorBase.currSelectionPoint=null,a.imageEditorBase.notify("draw",{prop:"setIsCropSelect",value:{bool:!0}});var l={prevObj:null};a.imageEditorBase.notify("crop",{prop:"getPreviousCropCurrentObj",value:{obj:l}}),a.imageEditorBase.notify("draw",{prop:"select",onPropertyChange:!1,value:{type:t,startX:n,startY:s,width:o,height:r}}),a.imageEditorBase.notify("crop",{prop:"setPreviousCropCurrentObj",value:{obj:l.prevObj}}),a.imageEditorBase.enableDisableToolbarBtn(),a.imageEditorBase.notify("transform",{prop:"disableZoomOutBtn",value:{isZoomOut:!0}}),i&&a.imageEditorBase.updateToolbar(a.element,"cropToolbar")},clearSelection:function(e){window.sfBlazor.getCompInstance(e).imageEditorBase.clearSelection()},crop:function(e){return window.sfBlazor.getCompInstance(e).imageEditorBase.crop()},open:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.open(t)},save:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);t=t||"Png",i=i||"",n.imageEditorBase.export(t,i),n.imageEditorBase.isChangesSaved=!0,n.imageEditorBase.notify("draw",{prop:"redrawDownScale"})},finetuneImage:function(e,t,i){window.sfBlazor.getCompInstance(e).imageEditorBase.finetuneImage(t,i)},applyImageFilter:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.applyImageFilter(t)},drawEllipse:function(e,t,i,n,s,o,r,a){return window.sfBlazor.getCompInstance(e).imageEditorBase.drawEllipse(t,i,n,s,o,r,a)},drawLine:function(e,t,i,n,s,o,r){return window.sfBlazor.getCompInstance(e).imageEditorBase.drawLine(t,i,n,s,o,r)},drawArrow:function(e,t,i,n,s,o,r,a,l){return window.sfBlazor.getCompInstance(e).imageEditorBase.drawArrow(t,i,n,s,o,r,a,l)},drawPath:function(e,t,i,n){return window.sfBlazor.getCompInstance(e).imageEditorBase.drawPath(t,i,n)},drawRectangle:function(e,t,i,n,s,o,r,a){return window.sfBlazor.getCompInstance(e).imageEditorBase.drawRectangle(t,i,n,s,o,r,a)},drawText:function(e,t,i,n,s,o,r,a,l){return window.sfBlazor.getCompInstance(e).imageEditorBase.drawText(t,i,n,s,o,r,a,l)},getImageDimension:function(e){return window.sfBlazor.getCompInstance(e).imageEditorBase.getImageDimension()},getImageDataUrl:function(e){var t=window.sfBlazor.getCompInstance(e),i=t.imageEditorBase.getImageData(),n=t.imageEditorBase.createElement("canvas",{id:"_canvas",attrs:{name:"canvasImage"}}),s=n.getContext("2d");return n.width=i.width,n.height=i.height,s.putImageData(i,0,0),n.toDataURL()},selectShape:function(e,t){return window.sfBlazor.getCompInstance(e).imageEditorBase.selectShape(t)},deleteShape:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.deleteShape(t)},getShapeSettings:function(e,t){return window.sfBlazor.getCompInstance(e).imageEditorBase.getShapeSettings(t)},drawShape:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n.imageEditorBase.okBtn(),n.imageEditorBase.events&&!0===n.imageEditorBase.events.toolbarUpdating.hasDelegate&&("line"===t?n.imageEditorBase.lineToolbar=i:"path"===t?n.imageEditorBase.pathToolbar=i:"arrow"===t?n.imageEditorBase.arrowToolbar=i:"rectangle"===t?n.imageEditorBase.rectangleToolbar=i:"ellipse"===t?n.imageEditorBase.ellipseToolbar=i:"pen"===t?n.imageEditorBase.penToolbar=i:"text"===t?n.imageEditorBase.textToolbar=i:"image"===t&&(n.imageEditorBase.imageToolbar=i));var s,o=!1;void 0!==n.imageEditorBase.activeObj.shape&&(s=n.imageEditorBase.activeObj.shape.split("-")),(void 0===s&&n.imageEditorBase.currObjType.isCustomCrop||void 0!==s&&"crop"===s[0])&&(o=!0),n.imageEditorBase.currObjType.isCustomCrop=!1,(o||n.imageEditorBase.togglePan)&&(n.imageEditorBase.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),n.imageEditorBase.upperContext.clearRect(0,0,n.imageEditorBase.upperCanvas.width,n.imageEditorBase.upperCanvas.height));var r={currentFreehandDrawIndex:null};switch(n.imageEditorBase.notify("freehand-draw",{prop:"getCurrentFreehandDrawIndex",value:{obj:r}}),t){case"text":n.imageEditorBase.notify("shape",{prop:"draw-shape-text"}),n.imageEditorBase.isFirstLoad&&n.imageEditorBase.activeObj&&n.imageEditorBase.activeObj.textSettings&&(n.imageEditorBase.activeObj.textSettings.fontFamily=n.imageEditorBase.defaultFontFamily,n.imageEditorBase.isFirstLoad=!1),n.imageEditorBase.getFontSizes();break;case"pen":n.imageEditorBase.notify("draw",{prop:"setTempFreehandCounter",value:{tempFreehandCounter:n.imageEditorBase.freehandCounter}}),n.imageEditorBase.notify("draw",{prop:"setTempCurrentFreehandDrawIndex",value:{tempCurrentFreehandDrawIndex:r.currentFreehandDrawIndex}}),n.imageEditorBase.freehandDraw(!0);break;case"image":n.imageEditorBase.isInteracted=!0,n.element.querySelector(".e-image-upload .e-btn").click();break;default:n.imageEditorBase.notify("shape",{prop:"refreshActiveObj",onPropertyChange:!1}),n.imageEditorBase.currObjType.shape=t,n.imageEditorBase.activeObj.shape=n.imageEditorBase.currObjType.shape.toLowerCase(),n.imageEditorBase.currObjType.isDragging=n.imageEditorBase.currObjType.isCustomCrop=!1,n.imageEditorBase.activeObj.shapeDegree=n.imageEditorBase.transform.degree,n.imageEditorBase.activeObj.shapeFlip=n.imageEditorBase.transform.currFlipState,n.imageEditorBase.activeObj.textFlip=n.imageEditorBase.transform.currFlipState,n.imageEditorBase.activeObj.flipObjColl=[],n.imageEditorBase.notify("selection",{prop:"annotate",value:{shape:t}}),n.imageEditorBase.updateToolbar(n.element,t)}var a=n.imageEditorBase.togglePen;return"pen"===t&&(n.imageEditorBase.togglePen=!1),n.imageEditorBase.notify("draw",{prop:"redrawDownScale"}),n.imageEditorBase.togglePen=a,n.imageEditorBase.getShapeValue(t,"get")},freehandDraw:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.freehandDraw(t)},updateToolbar:function(e,t,i){window.sfBlazor.getCompInstance(e).imageEditorBase.updateToolbar(t,i);for(var n=0;n<Object.keys(window.sfBlazor.instances).length;n++)if(Object.keys(window.sfBlazor.instances)[n].includes("sfToolbar")){var s=Object.keys(window.sfBlazor.instances)[n];window.sfBlazor.getCompInstance(s).refreshOverflow(s)}},updateArrow:function(e,t,i){window.sfBlazor.getCompInstance(e).imageEditorBase.updateArrow(t,i)},updateFillColor:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(t.querySelector(".e-fill")){if(""===n.imageEditorBase.activeObj.strokeSettings.fillColor){var s=document.querySelector("#"+n.imageEditorBase.element.id+"_shapeFillColor");s&&s.querySelector(".e-nocolor-item").classList.remove("e-selected"),t.querySelector(n.imageEditorBase.SHAPEFILLCLR+n.imageEditorBase.DDBPREVIEW).classList.remove("e-nocolor-item")}""==i?t.querySelector(n.imageEditorBase.SHAPEFILLCLR+n.imageEditorBase.DDBPREVIEW).classList.add("e-nocolor-item"):t.querySelector(n.imageEditorBase.SHAPEFILLCLR+n.imageEditorBase.DDBPREVIEW).style.background=i,n.imageEditorBase.updateFillColor(i)}},selFillColor:function(e,t){t.querySelector(".e-nocolor-item").classList.add("e-selected"),t.id=e},updateStrokeColor:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n.element.querySelector(t)&&(n.imageEditorBase.updateStrokeColor(i),n.imageEditorBase.updateColorToolbar(n.element,n.imageEditorBase.activeObj.strokeSettings))},updateStrokeWidth:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.updateStrokeWidth(t)},updatePenStrokeColor:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n.element.querySelector(t)&&(n.imageEditorBase.updatePenStrokeColor(i),n.imageEditorBase.updateColorToolbar(n.element,n.imageEditorBase.activeObj.strokeSettings))},updatePenStrokeWidth:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.updatePenStrokeWidth(t)},updateFontColor:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n.element.querySelector(t)){n.imageEditorBase.updateFontColor(i);var s=n.imageEditorBase.activeObj.strokeSettings;"block"!==n.imageEditorBase.textArea.style.display&&"inline-block"!==n.imageEditorBase.textArea.style.display||(s.strokeColor=i),n.imageEditorBase.updateColorToolbar(n.element,s)}},updateFontFamily:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.updateFontFamily(t)},updateFontSize:function(e,t){window.sfBlazor.getCompInstance(e).imageEditorBase.updateFontSize(t)},updateFrameValue:function(e,t,i){var n,s=window.sfBlazor.getCompInstance(e),o={currObj:{}},r=s.imageEditorBase.frameObj[t],a={frameChangeEventArgs:null};n={type:s.imageEditorBase.toPascalCase(s.imageEditorBase.frameObj.type),color:s.imageEditorBase.frameObj.color,gradientColor:s.imageEditorBase.frameObj.gradientColor,size:s.imageEditorBase.frameObj.size,inset:s.imageEditorBase.frameObj.inset,offset:s.imageEditorBase.frameObj.offset,borderRadius:s.imageEditorBase.frameObj.radius,frameLineStyle:s.imageEditorBase.toPascalCase(s.imageEditorBase.frameObj.border),lineCount:s.imageEditorBase.frameObj.amount},s.imageEditorBase.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:o}}),s.imageEditorBase.frameObj[t]="border"===t?i:parseInt(i,10),s.imageEditorBase.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:n,obj:a}}),null!=s.imageEditorBase.events&&!1!==s.imageEditorBase.events.frameChanging.hasDelegate||!a.frameChangeEventArgs||a.frameChangeEventArgs.cancel?s.imageEditorBase.frameObj[t]=r:(s.imageEditorBase.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:o.currObj,previousObjColl:o.currObj.objColl,previousPointColl:o.currObj.pointColl,previousSelPointColl:o.currObj.selPointColl,previousCropObj:sf.base.extend({},s.imageEditorBase.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),s.imageEditorBase.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),s.imageEditorBase.notify("draw",{prop:"redrawDownScale"}),s.imageEditorBase.isFrameBtnClick=!0,s.imageEditorBase.curFrameObjEvent={previousFrameSetting:a.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:a.frameChangeEventArgs.currentFrameSetting})},updateFrameColor:function(e,t,i,n){var s,o,r=window.sfBlazor.getCompInstance(e),a={currObj:{}},l={frameChangeEventArgs:null};if(o={type:r.imageEditorBase.toPascalCase(r.imageEditorBase.frameObj.type),color:r.imageEditorBase.frameObj.color,gradientColor:r.imageEditorBase.frameObj.gradientColor,size:r.imageEditorBase.frameObj.size,inset:r.imageEditorBase.frameObj.inset,offset:r.imageEditorBase.frameObj.offset,borderRadius:r.imageEditorBase.frameObj.radius,frameLineStyle:r.imageEditorBase.toPascalCase(r.imageEditorBase.frameObj.border),lineCount:r.imageEditorBase.frameObj.amount},r.imageEditorBase.notify("filter",{prop:"getCurrentObj",onPropertyChange:!1,value:{object:a}}),"color"==n?(s=r.imageEditorBase.frameObj.color,r.imageEditorBase.frameObj.color=i):(s=r.imageEditorBase.frameObj.gradientColor,r.imageEditorBase.frameObj.gradientColor=i),r.imageEditorBase.notify("draw",{prop:"triggerFrameChange",value:{prevFrameSettings:o,obj:l}}),null!=r.imageEditorBase.events&&!1!==r.imageEditorBase.events.frameChanging.hasDelegate||!l.frameChangeEventArgs||l.frameChangeEventArgs.cancel)"color"==n?r.imageEditorBase.frameObj.color=s:r.imageEditorBase.frameObj.gradientColor=s;else{if(r.imageEditorBase.notify("undo-redo",{prop:"updateUndoRedoColl",onPropertyChange:!1,value:{operation:"frame",previousObj:a.currObj,previousObjColl:a.currObj.objColl,previousPointColl:a.currObj.pointColl,previousSelPointColl:a.currObj.selPointColl,previousCropObj:sf.base.extend({},r.imageEditorBase.cropObj,{},!0),previousText:null,currentText:null,previousFilter:null,isCircleCrop:null}}),"color"==n)t.querySelector(".e-ie-toolbar-e-frame-color")&&(t.querySelector(".e-ie-toolbar-e-frame-color"+r.imageEditorBase.DDBPREVIEW).style.background=i,r.imageEditorBase.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),r.imageEditorBase.notify("draw",{prop:"redrawDownScale"}));else if(t.querySelector(".e-ie-toolbar-e-frame-gradient")){var h=document.querySelector(".e-dropdown-popup.e-frame-gradient-dd-btn");h&&h.querySelector(".e-nocolor-item").classList.remove("e-selected"),t.querySelector(".e-ie-toolbar-e-frame-gradient"+r.imageEditorBase.DDBPREVIEW).classList.remove("e-nocolor-item"),""==i?t.querySelector(".e-ie-toolbar-e-frame-gradient"+r.imageEditorBase.DDBPREVIEW).classList.add("e-nocolor-item"):t.querySelector(".e-ie-toolbar-e-frame-gradient"+r.imageEditorBase.DDBPREVIEW).style.background=i,r.imageEditorBase.notify("draw",{prop:"render-image",value:{isMouseWheel:null,isPreventClearRect:null,isFrame:!0}}),r.imageEditorBase.notify("draw",{prop:"redrawDownScale"})}r.imageEditorBase.curFrameObjEvent={previousFrameSetting:l.frameChangeEventArgs.previousFrameSetting,currentFrameSetting:l.frameChangeEventArgs.currentFrameSetting},r.imageEditorBase.isFrameBtnClick=!0}},imageResize:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);return s.imageEditorBase.aspectWidth=t,s.imageEditorBase.aspectHeight=i,s.imageEditorBase.resize(t,i,n)},drawImage:function(e,t,i,n,s,o,r,a){return window.sfBlazor.getCompInstance(e).imageEditorBase.drawImage(t,i,n,s,o,r,a)},drawFrame:function(e,t,i,n,s,o,r,a,l,h){return window.sfBlazor.getCompInstance(e).imageEditorBase.drawFrame(t,i,n,s,o,r,a,l,h)},getFrameSettings:function(e){var t=window.sfBlazor.getCompInstance(e),i=t.imageEditorBase.frameObj;return i.borderRadius=t.imageEditorBase.frameObj.radius,i.lineCount=t.imageEditorBase.frameObj.amount,i.frameLineStyle=t.imageEditorBase.frameObj.border,i},refresh:function(e){window.sfBlazor.getCompInstance(e).imageEditorBase.update()},straightenImage:function(e,t){return window.sfBlazor.getCompInstance(e).imageEditorBase.straightenImage(t)},cloneShape:function(e,t){return window.sfBlazor.getCompInstance(e).imageEditorBase.cloneShape(t)},updateShape:function(e,t){return window.sfBlazor.getCompInstance(e).imageEditorBase.updateShape(t)}}}()},"./modules/sf-inplaceeditor.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.InPlaceEditor=function(){"use strict";var e="e-inplaceeditor",t="e-editable-open",i=function(){function i(e){this.submitOnEnter=!0,this.clearComponents=["AutoComplete","Mask","Text"],window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this,this.initialize())}return i.prototype.updateContext=function(e){sf.base.extend(this,this,e)},i.prototype.initialize=function(){this.onResizeScrollHandler=this.scrollResizeHandler.bind(this),this.wireEvents(),this.id=this.element.id,this.dotNetRef.invokeMethodAsync("Created",null)},i.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.valueKeyDownHandler,this),sf.base.EventHandler.add(document,"scroll",this.scrollResizeHandler,this),window.addEventListener("resize",this.onResizeScrollHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this)},i.prototype.scrollResizeHandler=function(){"Popup"!==this.mode||sf.base.Browser.isDevice||this.dotNetRef.invokeMethodAsync("CancelAction",null)},i.prototype.valueKeyDownHandler=function(i){"Tab"===i.code&&!0===i.shiftKey&&"BUTTON"!==i.target.tagName&&(this.element.setAttribute("tabindex","-1"),"Submit"===this.actionOnBlur?this.dotNetRef.invokeMethodAsync("SaveAction",!0):"Cancel"===this.actionOnBlur&&this.dotNetRef.invokeMethodAsync("CancelAction",!0)),"Enter"!==i.code||!i.target.classList.contains(e)||this.element.querySelector(".e-editable-value-container").classList.contains(t)||this.element.classList.contains("e-disable")||(i.preventDefault(),this.dotNetRef.invokeMethodAsync("RenderEditor",null))},i.prototype.mouseDownHandler=function(e){e.target.classList.contains("e-clear-icon")&&(this.isClearTarget=!0)},i.prototype.openEditor=function(e){if(this.updateContext(e),"Popup"===this.mode&&(this.popupContent=document.querySelector("#"+this.popupElement+"_content")),"Ignore"!==this.actionOnBlur&&sf.base.EventHandler.add(document,"mousedown",this.docClickHandler,this),this.submitOnEnter){var t="Popup"===this.mode?this.popupContent:this.element;sf.base.EventHandler.add(t,"keydown",this.enterKeyDownHandler,this)}this.dotNetRef.invokeMethodAsync("FocusEditor")},i.prototype.enterKeyDownHandler=function(i){sf.base.closest(i.target,".e-editable-component .e-richtexteditor")||(13===i.keyCode&&13===i.which&&sf.base.closest(i.target,".e-editable-component")?this.dotNetRef.invokeMethodAsync("SaveAction",!1):27===i.keyCode&&27===i.which?(sf.base.isNullOrUndefined(this.element)||sf.base.isNullOrUndefined(this.element.querySelector("input"))||"Inline"!==this.mode?sf.base.isNullOrUndefined(this.popupContent)||sf.base.isNullOrUndefined(this.popupContent.querySelector("input"))||"Popup"!==this.mode||this.popupContent.querySelector("input").blur():this.element.querySelector("input").blur(),this.dotNetRef.invokeMethodAsync("CancelAction",null)):"Enter"!==i.code||!i.target.classList.contains(e)||sf.base.isNullOrUndefined(this.element.querySelector(".e-editable-value-container"))||this.element.querySelector(".e-editable-value-container").classList.contains(t)||this.element.classList.contains("e-disable")||(i.preventDefault(),this.dotNetRef.invokeMethodAsync("RenderEditor",null)))},i.prototype.removeEditor=function(e){this.updateContext(e),this.enablePersistence&&window.localStorage.setItem(this.id,this.value),this.unWireEvents(),sf.base.EventHandler.remove(document,"mousedown",this.docClickHandler)},i.prototype.Destroy=function(e){var t=this;for(this.updateContext(e),this.unWireEvents(),sf.base.EventHandler.remove(document,"mousedown",this.docClickHandler),this.enablePersistence&&window.localStorage.setItem(this.id,this.value),"Popup"===this.mode&&this.destroyPopup(),["e-disable","e-rtl"].forEach((function(e){sf.base.removeClass([t.element],[e])}));this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)},i.prototype.destroyPopup=function(){var e=document.querySelector("#"+this.popupElement);if(e){for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);for(var t=e.children,i=t.length-1;i>=0;i--)sf.base.detach(t[i])}},i.prototype.unWireEvents=function(){sf.base.EventHandler.remove(document,"scroll",this.scrollResizeHandler),window.removeEventListener("resize",this.onResizeScrollHandler),sf.base.EventHandler.remove(this.element,"keydown",this.valueKeyDownHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler);var e="Popup"===this.mode?this.popupContent:this.element;sf.base.EventHandler.remove(e,"keydown",this.enterKeyDownHandler)},i.prototype.validate=function(){return"Inline"===this.mode?!!this.element.querySelector(".validation-message"):!(!this.componentParent||!this.componentParent.querySelector(".validation-message"))},i.prototype.docClickHandler=function(t){var i=this,n=sf.base.closest(t.target,"."+e),s=sf.base.closest(t.target,".e-inplaceeditor-tip"),o=sf.base.closest(t.target,".e-editable-elements"),r=sf.base.closest(t.target,".e-rte-elements");if(this.isClearTarget||!sf.base.isNullOrUndefined(n)&&n.isEqualNode(this.element)||!sf.base.isNullOrUndefined(s)&&this.popupContent&&s.id.indexOf("tooltip")>-1||!sf.base.isNullOrUndefined(o)||!sf.base.isNullOrUndefined(r)||t.target.classList.contains("e-chips-close"))this.isClearTarget=!1;else{var a="Inline"===this.mode?this.element.querySelector(".e-editable-component"):this.element,l="Inline"===this.mode?this.element.querySelector(".e-editable-action-buttons"):this.componentParent;a.contains(t.target)||l&&l.contains(t.target)||sf.base.closest(t.target,".e-dropdown-popup.e-control.e-rte-elements")||sf.base.closest(t.target,".e-dropdown-popup.e-control.e-colorpicker-popup")||this.popupContent&&this.popupContent.contains(t.target)||setTimeout((function(){"Submit"!==i.actionOnBlur||i.element.querySelector(".validation-message")?"Cancel"===i.actionOnBlur&&i.dotNetRef.invokeMethodAsync("CancelAction",null):i.dotNetRef.invokeMethodAsync("SaveAction",!1)}))}},i}();return{initialize:function(e){e.dataId&&new i(e)},openEditor:function(e,t){e&&window.sfBlazor.instances[e].openEditor(t)},closeEditor:function(e,t,i){e&&(window.sfBlazor.instances[e].removeEditor(t),i||window.sfBlazor.instances[e].element.focus(),window.sfBlazor.instances[e].element.setAttribute("tabindex","0"))},destroy:function(e,t){e&&window.sfBlazor.instances[e].Destroy(t)},propertyChanged:function(e,t){e&&window.sfBlazor.instances[e].updateContext(t)},validate:function(e){return e&&window.sfBlazor.instances[e].validate()}}}()},"./modules/sf-kanban.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Kanban=function(){"use strict";var e="e-kanban-content",t="e-show-add-button",i=function(){function i(e){this.parent=e,this.dragObj={element:null,cloneElement:null,instance:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]},this.isDragging=!1,this.dragEdges={left:!1,right:!1,top:!1,bottom:!1},this.isExternalDrop=!1}return i.prototype.wireDragEvents=function(t){var i;null!=!this.parent.element&&this.parent.externalDropId&&0===this.parent.externalDropId.length&&(i=this.parent.element.querySelector("."+e)),this.dragObj.instance=new sf.base.Draggable(t,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:i,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},i.prototype.dragHelper=function(e){if(this.dragObj.element=sf.base.closest(e.sender.target,".e-card"),sf.base.isNullOrUndefined(this.dragObj.element))return null;this.dragObj.element.style.width=sf.base.formatUnit(this.dragObj.element.offsetWidth);var t=this.dragObj.element.cloneNode(!0);return this.dragObj.cloneElement=t,sf.base.addClass([this.dragObj.cloneElement],"e-cloned-card"),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=sf.base.createElement("div",{className:"e-target-multi-clone"}),this.dragObj.targetClone=sf.base.createElement("div",{className:"e-target-dropped-clone",styles:"width:100%;height:"+sf.base.formatUnit(this.dragObj.element.offsetHeight)}),this.dragObj.modifiedData=[],this.dragObj.cloneElement},i.prototype.dragStart=function(e){var t=this;if(this.dragObj.selectedCards=this.dragObj.element,this.dragObj.element.classList.contains("e-selection")){var i=sf.base.closest(this.dragObj.element,".e-content-row");this.dragObj.selectedCards=[].slice.call(i.querySelectorAll(".e-card.e-selection:not(.e-cloned-card)"))}var n=[];if(this.dragObj.selectedCards instanceof HTMLElement){var s=this.dragObj.selectedCards.getAttribute("data-id");n.push(s)}else this.dragObj.selectedCards&&this.dragObj.selectedCards.length>0&&this.dragObj.selectedCards.forEach((function(e){n.push(e.getAttribute("data-id"))}));var o=this.getXYValue(e,"X"),r=this.getXYValue(e,"Y");this.dragObj.cloneElement.style.display="none",this.parent.dotNetRef.invokeMethodAsync("DragStart",n,o,r).then((function(i){var n=document.body.querySelector(".e-kanban-dialog");if(i.cancel||n&&n.classList.contains("e-popup-open"))return t.removeElement(t.dragObj.cloneElement),t.dragObj.instance.intDestroy(e),t.dragObj.element=null,t.dragObj.targetClone=null,t.dragObj.draggedClone=null,t.dragObj.cloneElement=null,void(t.dragObj.targetCloneMulti=null);if(t.dragObj.cloneElement.style.display="block",e.bindEvents(e.dragElement),t.dragObj.element.classList.contains("e-selection")){if(t.dragObj.selectedCards.forEach((function(e){t.draggedClone(e)})),t.dragObj.selectedCards.length>1){t.dragObj.cloneElement.innerHTML="";var s=sf.base.createElement("div",{className:"e-multi-card-text",innerHTML:t.dragObj.selectedCards.length+" Cards"});t.dragObj.cloneElement.appendChild(s),sf.base.classList(t.dragObj.cloneElement,["e-multi-card-clone"],["e-selection"]),t.dragObj.cloneElement.style.width="90px"}}else t.draggedClone(t.dragObj.element);sf.base.EventHandler.add(document.body,"keydown",t.keydownHandler,t)}))},i.prototype.drag=function(e){var t=this;if(e.target){var i=sf.base.closest(e.target,".e-card"),n=i||e.target,s=sf.base.closest(n,".e-content-row:not(.e-swimlane-row) .e-content-cells.e-droppable");if(this.externalDrop(n,"drag"),this.target=this.parent.isExternalKanbanDrop?this.externalTarget:this.parent.element,this.calculateArgs(e),s&&"not-allowed"!==document.body.style.cursor){var o=this.getColumnKey(s),r=o.split(",");this.multiCloneRemove();var a=o===this.getColumnKey(sf.base.closest(this.dragObj.draggedClone,".e-content-cells"));if(1===r.length||a)if(n.classList.contains("e-card")||n.classList.contains("e-target-dragged-clone")){var l=n.classList.contains("e-target-dragged-clone")&&n.previousElementSibling.classList.contains("e-kanban-dragged-card")?null:n.previousElementSibling,h="afterend";if(sf.base.isNullOrUndefined(l)){var d=n.classList.contains("e-target-dragged-clone")?this.dragObj.pageY/2:this.dragObj.pageY,c=n.classList.contains("e-target-dragged-clone")?n.offsetHeight:n.offsetHeight/2;d-(this.target.getBoundingClientRect().top+n.offsetTop)<c&&(h="beforebegin")}n.insertAdjacentElement(h,this.dragObj.targetClone)}else n.classList.contains("e-content-cells")&&!sf.base.closest(n,".e-swimlane-row")?n.querySelector(".e-card-container").appendChild(this.dragObj.targetClone):n.classList.contains("e-card-container")&&!sf.base.closest(n,".e-swimlane-row")&&0===s.querySelectorAll(".e-card").length&&n.appendChild(this.dragObj.targetClone);else r.length>1&&s.classList.contains("e-dropping")&&this.multiCloneCreate(r,s)}0===this.target.querySelectorAll(".e-dropping").length&&this.cellDropping();var p=sf.base.closest(n,".e-column-key");if(p){var u=[].slice.call(this.target.querySelectorAll(".e-column-key:not(.e-disabled)")).filter((function(e){return t.getColumnKey(e)===t.getColumnKey(p)}));u.length>0&&(sf.base.addClass(u,"e-multi-active"),u[0].previousElementSibling&&sf.base.addClass([u[0].previousElementSibling],"e-multi-bottom-border"))}document.body.style.cursor=s&&s.classList.contains("e-dropping")?"":"not-allowed",i&&!sf.base.closest(i,".e-content-cells").classList.contains("e-dropping")&&(i.style.cursor="not-allowed",document.body.style.cursor="not-allowed"),this.isExternalDrop&&this.removeElement(this.dragObj.targetClone),this.isExternalDrop&&"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone,this.target),this.multiCloneRemove()),this.updateScrollPosition(),this.parent.isExternalKanbanDrop=!1,this.isExternalDrop=!1}},i.prototype.dragStop=function(e){var t,i=sf.base.closest(this.dragObj.targetClone,".e-content-cells"),n=0;if(sf.base.EventHandler.remove(document.body,"keydown",this.keydownHandler),this.externalDrop(e.target,"dragStop"),this.dragObj.targetClone.parentElement){n=[].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(".e-card:not(.e-kanban-dragged-card),.e-target-dropped-clone")).indexOf(this.dragObj.targetClone)}this.target&&this.target.querySelector(".e-target-multi-clone")&&(t=sf.base.closest(e.target,".e-column-key:not(.e-disabled)"));var s=this.getXYValue(e,"X"),o=this.getXYValue(e,"Y"),r=[];if(this.dragObj.selectedCards instanceof HTMLElement){var a=this.dragObj.selectedCards.getAttribute("data-id");r.push(a)}else this.dragObj.selectedCards&&this.dragObj.selectedCards.length>0&&this.dragObj.selectedCards.forEach((function(e){r.push(e.getAttribute("data-id"))}));if(i||t){var l=void 0;i?l=this.getColumnKey(i):(l=this.getColumnKey(t),i=sf.base.closest(t,".e-content-cells"));var h=void 0;if(this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var d=sf.base.closest(i,".e-content-row").previousElementSibling;h=this.getColumnKey(d)}var c=!1,p=void 0,u="";this.parent.sortSettings.field&&"Index"===this.parent.sortSettings.sortBy&&(!(p="Ascending"===this.parent.sortSettings.direction?e.helper===this.dragObj.targetClone.previousElementSibling&&this.dragObj.targetClone.previousElementSibling&&this.dragObj.targetClone.previousElementSibling.previousElementSibling?this.dragObj.targetClone.previousElementSibling.previousElementSibling:this.dragObj.targetClone.previousElementSibling:this.dragObj.targetClone.nextElementSibling)||p.classList.contains("e-kanban-dragged-card")||p.classList.contains("e-cloned-card")||p.classList.contains("e-target-dragged-clone")?this.dragObj.targetClone.nextElementSibling&&"Ascending"===this.parent.sortSettings.direction?p=this.dragObj.targetClone.nextElementSibling:this.dragObj.targetClone.previousElementSibling&&"Descending"===this.parent.sortSettings.direction&&(p=this.dragObj.targetClone.previousElementSibling):c=!0),p&&(u=p.getAttribute("data-id")),this.parent.dotNetRef.invokeMethodAsync("DragStop",r,l,h,n,c,u,this.parent.isExternalKanbanDrop,s,o)}else this.isExternalDrop&&this.parent.dotNetRef.invokeMethodAsync("DragStop",r,"","",0,!1,"",!0,s,o);this.dragStopClear()},i.prototype.dragStopClear=function(){this.removeElement(this.dragObj.draggedClone),this.removeElement(this.dragObj.targetClone,this.target),this.removeElement(this.dragObj.cloneElement),[].slice.call(this.parent.element.querySelectorAll(".e-target-dragged-clone")).forEach((function(e){return sf.base.remove(e)})),this.dragObj.element.style.removeProperty("width"),this.multiCloneRemove(),this.dragObj.selectedCards instanceof HTMLElement?sf.base.removeClass([this.dragObj.selectedCards],"e-kanban-dragged-card"):sf.base.removeClass(this.dragObj.selectedCards,"e-kanban-dragged-card"),clearInterval(this.dragObj.navigationInterval),this.dragObj.navigationInterval=null,"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),[].slice.call(this.parent.element.querySelectorAll(".e-card[style]")).forEach((function(e){e.style.cursor=""}));[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach((function(e){return sf.base.removeClass([e],"e-dropping")})),this.parent.isAdaptive&&(this.parent.touchModule.tabHold=!1),this.dragObj.cardDetails=this.dragObj.modifiedData=[],this.isDragging=!1,this.parent.isExternalKanbanDrop=!1,this.target=null,this.externalTarget=null},i.prototype.keydownHandler=function(e){"Escape"===e.code&&this.dragObj.cloneElement&&(sf.base.EventHandler.remove(this.dragObj.cloneElement,"keydown",this.keydownHandler),this.dragObj.element.removeAttribute("aria-grabbed"),this.dragStopClear())},i.prototype.draggedClone=function(e){this.dragObj.draggedClone=sf.base.createElement("div",{className:"e-target-dragged-clone",styles:"width:"+sf.base.formatUnit(e.offsetWidth-1)+";height:"+sf.base.formatUnit(e.offsetHeight)}),e.insertAdjacentElement("afterend",this.dragObj.draggedClone),sf.base.addClass([e],"e-kanban-dragged-card")},i.prototype.calculateArgs=function(e){var t=this.getPageCoordinates(e);this.dragObj.pageY=t.pageY,this.dragObj.pageX=t.pageX,this.isDragging=!0},i.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},i.prototype.getColumnKey=function(e){return e&&e.getAttribute("data-key")?e.getAttribute("data-key").trim():""},i.prototype.multiCloneRemove=function(){if(this.target){var e=[].slice.call(this.target.querySelectorAll(".e-target-multi-clone"));if(e.length>0)[].slice.call(this.target.querySelectorAll(".e-column-key")).forEach((function(e){return sf.base.remove(e)})),e.forEach((function(e){var i=sf.base.closest(e,".e-content-cells");i&&(i.style.borderStyle="",i.querySelector("."+t)&&sf.base.removeClass([i.querySelector("."+t)],"e-multi-card-container"),sf.base.removeClass([i.querySelector(".e-card-container")],"e-multi-card-container"))})),this.removeElement(this.dragObj.targetCloneMulti,this.target)}},i.prototype.removeElement=function(e,t){t=t||this.parent.element,e&&t&&t.getElementsByClassName(e.className).length>0&&sf.base.remove(e)},i.prototype.externalDrop=function(e,t){var i=this;this.parent.externalDropId&&this.parent.externalDropId.forEach((function(n){if(i.externalTarget=sf.base.closest(e,n),i.externalTarget)if(i.externalTarget.classList.contains("e-kanban")){i.parent.isExternalKanbanDrop=!0;var s=[].slice.call(i.externalTarget.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed) .e-content-cells"));"drag"===t?sf.base.addClass(s,"e-dropping"):sf.base.removeClass(s,"e-dropping")}else i.isExternalDrop=!0}))},i.prototype.multiCloneCreate=function(e,i){var n=i.offsetHeight,s=i.querySelector(".e-limits");s&&(n-=s.offsetHeight),this.dragObj.targetCloneMulti.style.height=sf.base.formatUnit(n),i.querySelector("."+t)&&sf.base.addClass([i.querySelector("."+t)],"e-multi-card-container"),sf.base.addClass([i.querySelector(".e-card-container")],"e-multi-card-container"),i.querySelector(".e-card-container").style.height="auto",i.style.borderStyle="none",this.removeElement(this.dragObj.targetClone);for(var o=0,r=e;o<r.length;o++){var a=r[o],l=sf.base.closest(this.dragObj.draggedClone,".e-content-cells"),h=this.parent.transition[l.cellIndex].transitionColumn,d=this.allowedTransition(this.dragObj.element.getAttribute("data-key"),a,h),c=d?"":" e-disabled",p=sf.base.createElement("div",{className:"e-column-key"+c,attrs:{"data-key":a.trim()}}),u=sf.base.createElement("div",{className:"e-text",innerHTML:a.trim()});i.appendChild(this.dragObj.targetCloneMulti).appendChild(p).appendChild(u),p.style.cursor=d?"":"not-allowed",p.style.lineHeight=p.style.height=sf.base.formatUnit(n/e.length),u.style.top=sf.base.formatUnit(n/2-u.offsetHeight/2)}},i.prototype.allowedTransition=function(e,t,i){for(var n=!0,s=t.split(","),o=0;o<s.length;o++){if(e===s[o].trim())return!0;if(i){if(1===i.length&&0===i[0].length)return!0;for(var r=0;r<i.length;r++){if(s[o].trim()===i[r].trim())return!0;n=!1}}}return n},i.prototype.cellDropping=function(){var e=this,t=sf.base.closest(this.dragObj.draggedClone,".e-content-cells"),i=sf.base.closest(this.dragObj.draggedClone,".e-content-row");if(this.addDropping(i,t),t&&t.classList.contains("e-drop")&&sf.base.addClass([t],"e-dropping"),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var n=[].slice.call(this.target.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed)"));[].slice.call(n).forEach((function(n){i!==n&&e.addDropping(n,t)}))}},i.prototype.addDropping=function(e,t){var i=this;t&&e&&[].slice.call(e.children).forEach((function(e){var n=i.parent.transition[t.cellIndex].transitionColumn;e!==t&&e.classList.contains("e-drop")&&i.allowedTransition(t.getAttribute("data-key"),e.getAttribute("data-key"),n)&&sf.base.addClass([e],"e-dropping")}))},i.prototype.updateScrollPosition=function(){var e=this;sf.base.isNullOrUndefined(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval((function(){e.autoScroll()}),100))},i.prototype.autoScrollValidation=function(){var t=this.dragObj.pageY,i=this.dragObj.pageX,n={left:!1,right:!1,top:!1,bottom:!1},s=this.target.querySelector("."+e).getBoundingClientRect();t<s.top+30+window.pageYOffset&&t>s.top+window.pageYOffset&&(n.top=!0),t>s.bottom-30+window.pageYOffset&&t<s.bottom+window.pageYOffset&&(n.bottom=!0),i<s.left+30+window.pageXOffset&&i>s.left+window.pageXOffset&&(n.left=!0),i>s.right-30+window.pageXOffset&&i<s.right+window.pageXOffset&&(n.right=!0),this.dragEdges=n},i.prototype.autoScroll=function(){this.autoScrollValidation();if(this.parent.isAdaptive){var t;if(this.dragEdges.top||this.dragEdges.bottom?t=this.dragObj.targetClone?sf.base.closest(this.dragObj.targetClone,".e-card-container"):sf.base.closest(this.dragObj.draggedClone,".e-card-container"):(this.dragEdges.right||this.dragEdges.left)&&(t=this.target.querySelector("."+e)),t){var i=t.offsetHeight<=t.scrollHeight,n=t.offsetWidth<=t.scrollWidth,s=t.scrollTop>=0&&t.scrollTop+t.offsetHeight<=t.scrollHeight,o=t.scrollLeft>=0&&t.scrollLeft+t.offsetWidth<=t.scrollWidth;if(i&&s&&(this.dragEdges.top||this.dragEdges.bottom)&&(t.scrollTop+=this.dragEdges.top?-66:30),n&&o&&(this.dragEdges.left||this.dragEdges.right))(this.getWidth()*(this.target.querySelector(".e-content-row:not(.e-swimlane-row)").childElementCount-1)>t.scrollLeft||this.dragEdges.left)&&(t.scrollLeft+=this.dragEdges.left?-30:30)}}else{var r=this.target.querySelector("."+e),a=this.dragObj.targetClone.parentElement,l=r.offsetHeight<=r.scrollHeight,h=r.offsetWidth<=r.scrollWidth,d=l&&r.scrollTop>=0&&r.scrollTop+r.offsetHeight<=r.scrollHeight,c=h&&r.scrollLeft>=0&&r.scrollLeft+r.offsetWidth<=r.scrollWidth;d&&(this.dragEdges.top||this.dragEdges.bottom)&&(r.scrollTop+=this.dragEdges.top?-30:30,a&&(a.scrollTop+=this.dragEdges.top?-30:30)),c&&(this.dragEdges.left||this.dragEdges.right)&&(r.scrollLeft+=this.dragEdges.left?-30:30,a&&(a.scrollLeft+=this.dragEdges.left?-30:30)),this.dragObj.pageY-window.scrollY<30?window.scrollTo(window.scrollX,window.scrollY-30):window.innerHeight-(this.dragObj.pageY-window.scrollY)<30&&window.scrollTo(window.scrollX,window.scrollY+30)}},i.prototype.getWidth=function(){return 80*window.innerWidth/100},i.prototype.unWireDragEvents=function(){this.dragObj.instance&&!this.dragObj.instance.isDestroyed&&this.dragObj.instance.destroy()},i.prototype.destroy=function(){this.unWireDragEvents()},i.prototype.getXYValue=function(e,t){var i,n=e.event,s=n.changedTouches;if(!(i="X"===t?s?s[0].clientX:n.clientX:s?s[0].clientY:n.clientY)&&"focus"===e.type&&e.target){var o=e.target.getBoundingClientRect();i=o?"X"===t?o.left:o.top:null}return Math.ceil(i)},i}(),n=function(){function e(e){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",multiSelectionEnter:"ctrl+13",multiSelectionSpace:"ctrl+32",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",shiftTab:"shift+tab",enter:"13",tab:"tab",delete:"46",escape:"27",space:"32"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.multiSelection=!1}return e.prototype.keyActionHandler=function(e){var i,n=this.parent.element.querySelectorAll(".e-card.e-selection").item(0);if(n||sf.base.closest(document.activeElement,".e-kanban"))switch(e.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":e.preventDefault(),this.processUpDownArrow(e.action,n);break;case"rightArrow":case"leftArrow":this.processLeftRightArrow(e);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(e.action,n);break;case"multiSelectionEnter":case"multiSelectionSpace":document.activeElement&&this.parent.cardSelection(document.activeElement,!0,!1);break;case"space":case"enter":this.processEnter(e,n);break;case"escape":if(document.activeElement.classList.contains("e-card")||document.activeElement.classList.contains(t))if(document.activeElement.classList.contains("e-selection"))sf.base.removeClass([document.activeElement],"e-selection"),document.activeElement.focus();else{var s=sf.base.closest(document.activeElement,".e-content-cells"),o=[].slice.call(s.querySelectorAll(".e-card"));sf.base.removeClass(o,"e-selection"),s.focus(),this.cardTabIndexRemove(),this.addRemoveTabIndex("Add")}break;case"tab":case"shiftTab":i=sf.base.closest(document.activeElement,".e-content-cells"),document.activeElement.classList.contains("e-card")&&(document.activeElement.nextElementSibling||"tab"!==e.action||e.preventDefault(),!document.activeElement.previousElementSibling&&i.querySelector("."+t)&&"tab"===e.action&&sf.base.addClass([i.querySelector("."+t)],"e-show-add-focus")),document.activeElement.classList.contains(t)&&(!i.querySelector(".e-card")&&"tab"===e.action||"shiftTab"===e.action)&&e.preventDefault(),document.activeElement.classList.contains("e-kanban")&&(this.cardTabIndexRemove(),this.addRemoveTabIndex("Add"))}},e.prototype.processCardSelection=function(e,t){if(t){sf.base.removeClass([t],"e-selection"),this.parent.disableAttributeSelection(t);var i=this.parent.selectionArray;i.splice(i.indexOf(t.getAttribute("data-id")),1)}this.cardTabIndexRemove();var n=[].slice.call(this.parent.element.querySelectorAll(".e-card")),s="firstCardSelection"===e?n[0]:n[n.length-1];this.parent.cardSelection(s,!1,!1),this.addRemoveTabIndex("Remove"),s.focus(),[].slice.call(sf.base.closest(s,".e-content-cells").querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","0")}))},e.prototype.processLeftRightArrow=function(e){document.activeElement.classList.contains("e-content-cells")&&("rightArrow"===e.action&&document.activeElement.nextElementSibling?document.activeElement.nextElementSibling.focus():"leftArrow"===e.action&&document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus())},e.prototype.processUpDownArrow=function(e,i){if("upArrow"===e&&document.activeElement){if(document.activeElement.classList.contains("e-card")&&document.activeElement.previousElementSibling)document.activeElement.previousElementSibling.focus();else if(document.activeElement.classList.contains(t)){document.activeElement.setAttribute("tabindex","-1"),sf.base.removeClass([document.activeElement],"e-show-add-focus");var n=sf.base.closest(document.activeElement,".e-content-cells");n.querySelectorAll(".e-card").length>0&&[].slice.call(n.querySelectorAll(".e-card")).slice(-1)[0].focus()}this.removeSelection()}else if("downArrow"===e&&document.activeElement&&document.activeElement.classList.contains("e-card")){if(document.activeElement.nextElementSibling)document.activeElement.nextElementSibling.focus();else if(sf.base.closest(document.activeElement,".e-card-container").nextElementSibling){var s=sf.base.closest(document.activeElement,".e-card-container").nextElementSibling;s.setAttribute("tabindex","0"),sf.base.addClass([s],"e-show-add-focus"),s.focus()}this.removeSelection()}if(("multiSelectionByUpArrow"===e||"multiSelectionByDownArrow"===e)&&i&&"Multiple"===this.parent.cardSettings.selectionType){var o=void 0;(o="multiSelectionByUpArrow"===e?document.activeElement.previousElementSibling:document.activeElement.nextElementSibling)&&(this.parent.cardSelection(o,!1,!0),o.focus(),this.multiSelection=!0)}},e.prototype.removeSelection=function(){if(this.multiSelection){var e=this.parent.getSelectedCards();e.length>0&&(sf.base.removeClass(e,"e-selection"),this.parent.disableAttributeSelection(e)),this.multiSelection=!1}},e.prototype.cardTabIndexRemove=function(){[].slice.call(this.parent.element.querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.parent.element.querySelectorAll("."+t)).forEach((function(e){e.setAttribute("tabindex","-1"),sf.base.removeClass([e],"e-show-add-focus")}))},e.prototype.processEnter=function(e,i){"space"===e.action&&e.preventDefault();var n=e.target;if(n.classList.contains("e-header-icon")&&n.click(),(n.classList.contains("e-swimlane-row-expand")||n.classList.contains("e-swimlane-row-collapse"))&&n.click(),document.activeElement.classList.contains("e-card")&&this.parent.cardSelection(document.activeElement,!1,!1),document.activeElement.classList.contains(t)&&document.activeElement.focus(),n.classList.contains("e-content-cells")){var s=[].slice.call(n.querySelectorAll(".e-card"));this.addRemoveTabIndex("Remove"),s.length>0&&(n.querySelector(".e-card").focus(),s.forEach((function(e){e.setAttribute("tabindex","0")}))),n.querySelector("."+t)&&(n.querySelector("."+t).setAttribute("tabindex","0"),n.querySelector("."+t).focus())}i===document.activeElement&&1===this.parent.element.querySelectorAll(".e-selection").length&&(this.parent.dotNetRef.invokeMethodAsync("OpenDialog",i.getAttribute("data-id")),i.focus())},e.prototype.addRemoveTabIndex=function(e){var t="Add"===e?"0":"-1",i=[].slice.call(this.parent.element.querySelectorAll(".e-header-icon"));i.length>0&&i.forEach((function(e){e.setAttribute("tabindex",t)}));var n=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row-expand"));n.length>0&&n.forEach((function(e){e.setAttribute("tabindex",t)}));[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach((function(e){e.setAttribute("tabindex",t)}))},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),s=function(){function t(e){this.parent=e,this.tabHold=!1}return t.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+e),this.touchObj=new sf.base.Touch(this.element,{tapHold:this.tapHoldHandler.bind(this)})},t.prototype.tapHoldHandler=function(e){this.tabHold=!0,sf.base.closest(e.originalEvent.target,".e-card")&&"Multiple"===this.parent.cardSettings.selectionType&&(this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},t.prototype.renderMobilePopup=function(){if("Multiple"===this.parent.cardSettings.selectionType){var e=sf.base.createElement("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="e-btn e-close e-flat e-round e-small"><span class="e-icons e-close-icon"></span></button></div><div class="e-popup-content"></div>'});document.body.appendChild(e),sf.base.addClass([e],"e-device"),this.mobilePopup=new sf.popups.Popup(e,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)});var t=this.mobilePopup.element.querySelector(".e-close");sf.base.EventHandler.add(t,"click",this.closeClick,this)}},t.prototype.closeClick=function(){this.mobilePopup.hide()},t.prototype.popupClose=function(){this.popupDestroy()},t.prototype.getPopupContent=function(){var e,t=this.parent.getSelectedCards();return t.length>1?e="("+t.length+") Cards Selected":1===t.length&&(e=" "+t[0].getAttribute("data-id")),e},t.prototype.updatePopupContent=function(){if(this.mobilePopup){var e=this.getPopupContent();e?this.mobilePopup.element.querySelector(".e-popup-content").textContent=e:this.mobilePopup.hide()}},t.prototype.popupDestroy=function(){this.mobilePopup&&this.mobilePopup.element&&(this.mobilePopup.destroy(),sf.base.remove(this.mobilePopup.element),this.mobilePopup=null)},t.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy(),this.touchObj=null,this.element=null},t.prototype.destroy=function(){this.popupDestroy(),this.unWireTouchEvents(),this.tabHold=!1},t}(),o=function(){function o(e){window.sfBlazor=window.sfBlazor,this.updateContext(e),this.columnToggleArray=[],this.selectionArray=[],this.lastCardSelection=null,this.lastSelectionRow=null,this.lastCard=null,this.selectedCardsElement=[],this.selectedCardsData=[],this.hideColumnKeys=[],this.frozenOrder=0,this.scrollPosition={content:{},column:{}},this.initializeModules(),this.scrollUiUpdate(),this.wireEvents(),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return o.prototype.initializeModules=function(){(this.isAdaptive||sf.base.Browser.isTouch)&&(this.touchModule=new s(this)),this.allowDragAndDrop&&(this.dragAndDropModule=new i(this)),this.allowKeyboard&&(this.keyboardModule=new n(this)),this.scrollPosition.content={left:0,top:0},this.initializeSwimlaneTree()},o.prototype.updateContext=function(e){sf.base.extend(this,this,e)},o.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll(".e-card.e-selection"))},o.prototype.documentClick=function(e){if(e.target&&this.element.querySelector(".e-swimlane-resource")&&e.target.classList.contains("e-swimlane-overlay")&&this.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open")&&(this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")),!sf.base.closest(e.target,".e-kanban")){var t=[].slice.call(this.element.querySelectorAll(".e-card.e-selection"));sf.base.removeClass(t,"e-selection"),this.disableAttributeSelection(t)}},o.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach((function(e){e.setAttribute("aria-selected","false")}))},o.prototype.wireDragEvent=function(){var e=this;if(this.allowDragAndDrop){var t=[].slice.call(this.element.querySelectorAll(".e-content-cells.e-drag .e-card:not(e-draggable)"));sf.base.addClass(t,"e-droppable"),t.forEach((function(t){return e.dragAndDropModule.wireDragEvents(t)}))}},o.prototype.unWireDragEvent=function(){this.dragAndDropModule.unWireDragEvents()},o.prototype.initializeSwimlaneTree=function(){if(this.swimlaneSettings.keyField&&this.isAdaptive){var t=this.element.querySelector(".e-swimlane-header").offsetHeight,i=window.innerHeight-t;this.popupOverlay=this.element.querySelector(".e-swimlane-content .e-swimlane-overlay"),sf.base.setStyleAttribute(this.element.querySelector(".e-swimlane-overlay"),{height:i+"px"}),sf.base.setStyleAttribute(this.element.querySelector(".e-swimlane-content"),{top:t+"px"});var n=this.element.querySelector(".e-swimlane-resource");sf.base.setStyleAttribute(n,{height:i+"px"});var s={targetType:"relative",actionOnScroll:"none",enableRtl:this.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.element.querySelector("."+e)};this.treePopup=new sf.popups.Popup(n,s)}},o.prototype.cardSelection=function(e,t,i){var n=this;if(e){var s=this.getSelectedCards();if("None"!==this.cardSettings.selectionType){var o=sf.base.closest(e,".e-content-row");if((sf.base.isNullOrUndefined(this.lastSelectionRow)?o.rowIndex:this.lastSelectionRow.rowIndex)!==o.rowIndex&&(t||i)&&"Multiple"===this.cardSettings.selectionType)return;if(0===s.length||t&&"Single"!==this.cardSettings.selectionType||(sf.base.removeClass(s,"e-selection"),this.disableAttributeSelection(s),s.forEach((function(e){n.selectionArray.splice(n.selectionArray.indexOf(e.getAttribute("data-id")),1),n.selectedCardsElement.splice(n.selectedCardsElement.indexOf(e),1)}))),s.length>0&&i&&"Multiple"===this.cardSettings.selectionType){var r=[],a=void 0,l=void 0,h=void 0,d=[].slice.call(o.querySelectorAll(".e-card"));d.forEach((function(e){return r.push(e.getAttribute("data-id"))}));var c=e.getAttribute("data-id"),p=this.lastCard.getAttribute("data-id"),u=l=r.indexOf(c),f=a=r.indexOf(p),g=u>f?"next":"prev";for("prev"===g&&(a=u,l=f),h=a;h<=l;h++){var m=d[h];sf.base.addClass([m],"e-selection"),m.setAttribute("aria-selected","true"),m.setAttribute("tabindex","0"),this.selectionArray.push(m.getAttribute("data-id")),this.selectedCardsElement.push(m),this.lastCardSelection=m,"prev"===g&&(this.lastCardSelection=d[a])}}else if(sf.base.addClass([e],"e-selection"),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),this.selectionArray.push(e.getAttribute("data-id")),this.selectedCardsElement.push(e),this.lastCard=this.lastCardSelection=e,this.lastSelectionRow=sf.base.closest(e,".e-content-row"),this.lastSelectionRow.previousElementSibling){var v=this.lastSelectionRow.previousElementSibling.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse");v&&v.classList.contains("e-swimlane-row-collapse")&&v.click()}}}},o.prototype.scrollUiUpdate=function(){var t=this,i=this.element.querySelector(".e-kanban-header"),n=this.element.querySelector("."+e),s=this.element.offsetHeight-i.offsetHeight;if(this.isAdaptive){s=window.innerHeight-(i.offsetHeight+25);var o=this.element.querySelector(".e-swimlane-header");o&&(s-=o.offsetHeight),[].slice.call(this.element.querySelectorAll(".e-content-cells")).forEach((function(e){var i=e.querySelector(".e-card-container");i.classList.contains("e-multi-card-container")||(i.style.height=sf.base.formatUnit(s),sf.base.EventHandler.add(e,"touchmove",t.onAdaptiveScroll,t))}))}"auto"!==this.height&&"100%"!==this.height&&(n.style.height=sf.base.formatUnit(s)),[].slice.call(i.children).forEach((function(e){var i=0;n.offsetWidth-n.clientWidth>0&&(i=17,n.offsetHeight-n.clientHeight>0&&(e.style.width=sf.base.formatUnit(n.clientWidth))),t.enableRtl?e.style.paddingLeft=sf.base.formatUnit(i):e.style.paddingRight=sf.base.formatUnit(i)}))},o.prototype.onContentScroll=function(e){var t=e.target,i=this.element.querySelector(".e-kanban-header");[].slice.call(i.children).forEach((function(e){e.scrollLeft=t.scrollLeft})),this.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop},!sf.base.isNullOrUndefined(this.swimlaneSettings.keyField)&&this.swimlaneSettings.enableFrozenRows&&this.frozenRows(e)},o.prototype.frozenRows=function(t){var i=this.element.querySelector(".e-swimlane-row"),n=this.element.querySelector(".e-kanban-header"),s=this.element.querySelector("."+e);if(sf.base.isNullOrUndefined(this.frozenSwimlaneRow)){this.frozenSwimlaneRow=sf.base.createElement("div",{className:"e-frozen-swimlane-row"});var o=sf.base.createElement("div",{className:"e-frozen-row"});this.frozenSwimlaneRow.appendChild(o),this.element.insertBefore(this.frozenSwimlaneRow,this.element.firstElementChild),i&&(o.appendChild(i.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([o.querySelector(".e-icons")],"e-frozen-icons"),sf.base.setStyleAttribute(this.frozenSwimlaneRow,{height:sf.base.formatUnit(i.getBoundingClientRect().height),width:sf.base.formatUnit(s.querySelector(".e-swimlane").getBoundingClientRect().width),top:sf.base.formatUnit(n.getBoundingClientRect().height.toString())}),sf.base.setStyleAttribute(n,{position:"relative",top:sf.base.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)}),sf.base.setStyleAttribute(s,{position:"relative",top:sf.base.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)}))}else{var r=[].slice.call(this.element.querySelectorAll(".e-swimlane-row")),a=r[this.frozenOrder],l=r[this.frozenOrder-1],h=r[this.frozenOrder+1],d=void 0,c=void 0,p=void 0;a&&(d=a.getBoundingClientRect().top+a.getBoundingClientRect().height),l&&(c=l.getBoundingClientRect().top+l.getBoundingClientRect().height),h&&(p=h.getBoundingClientRect().top+h.getBoundingClientRect().height);var u=s.getBoundingClientRect().top+this.frozenSwimlaneRow.getBoundingClientRect().height,f=this.frozenSwimlaneRow.querySelector(".e-frozen-row");p&&u>=p&&this.frozenOrder<r.length-1?(f&&(sf.base.remove(f.querySelector(".e-swimlane-header")),h&&f.appendChild(h.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([f.querySelector(".e-icons")],"e-frozen-icons")),++this.frozenOrder):c&&u<d&&u>c&&this.frozenOrder>0&&(f&&(sf.base.remove(f.querySelector(".e-swimlane-header")),l&&f.appendChild(l.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([f.querySelector(".e-icons")],"e-frozen-icons")),--this.frozenOrder)}t&&0==t.target.scrollTop&&this.removeFrozenRows()},o.prototype.removeFrozenRows=function(){sf.base.remove(this.frozenSwimlaneRow),this.frozenSwimlaneRow=null;var t=this.element.querySelector(".e-kanban-header"),i=this.element.querySelector("."+e);sf.base.setStyleAttribute(t,{position:"",top:""}),sf.base.setStyleAttribute(i,{position:"",top:""}),this.scrollPosition.content={left:this.scrollPosition.content.left,top:0},i.scrollTop=0},o.prototype.onColumnScroll=function(e){var t=e.target;if(t.offsetParent){var i=t.offsetParent.getAttribute("data-key");this.scrollPosition.column[i]={left:t.scrollLeft,top:t.scrollTop}}},o.prototype.onAdaptiveScroll=function(e){this.touchModule.tabHold&&!this.touchModule.mobilePopup&&e.preventDefault()},o.prototype.updateScrollPosition=function(){var t=this,i=this.element.querySelector("."+e);i&&i.scrollTo(this.scrollPosition.content.left,this.scrollPosition.content.top),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach((function(e){if(e.offsetParent){var i=t.scrollPosition.column[e.offsetParent.getAttribute("data-key")];i&&e.scrollTo(i.left,i.top)}}))},o.prototype.wireEvents=function(){var t=this,i=this.element.querySelector("."+e);sf.base.EventHandler.add(i,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.documentClick,this),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach((function(e){e.offsetParent&&(t.scrollPosition.column[e.offsetParent.getAttribute("data-key")]={left:0,top:0}),sf.base.EventHandler.add(e,"scroll",t.onColumnScroll,t)})),this.isAdaptive&&this.touchModule.wireTouchEvents(),this.wireDragEvent()},o.prototype.unWireEvents=function(){var t=this,i=this.element.querySelector("."+e);(sf.base.EventHandler.remove(i,"scroll",this.onContentScroll),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.documentClick),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach((function(e){sf.base.EventHandler.remove(e,"scroll",t.onColumnScroll)})),this.isAdaptive)&&([].slice.call(this.element.querySelectorAll(".e-content-cells")).forEach((function(e){sf.base.EventHandler.remove(e,"touchmove",t.onAdaptiveScroll)})),this.touchModule.unWireTouchEvents())},o.prototype.onCardClick=function(e,t){if(e){if(e.classList.contains("e-selection"))sf.base.removeClass([e],"e-selection"),this.disableAttributeSelection(e);else{var i=t.ctrlKey;this.isAdaptive&&this.touchModule&&(i=this.touchModule.mobilePopup&&this.touchModule.tabHold||i),this.cardSelection(e,i,t.shiftKey)}this.isAdaptive&&this.touchModule&&this.touchModule.updatePopupContent();var n=sf.base.closest(e,".e-content-cells");if(this.allowKeyboard)[].slice.call(n.querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","0")})),this.keyboardModule.addRemoveTabIndex("Remove")}},o.prototype.onMenuClick=function(){this.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open")?(this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")):(this.treePopup.show(),sf.base.addClass([this.popupOverlay],"e-enable"))},o.prototype.onListViewClick=function(){this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")},o.prototype.onPropertyChanged=function(e){for(var t={},n=0,s=Object.keys(e);n<s.length;n++){t[a=s[n]]=this[a]}this.updateContext(e);for(var o=0,r=Object.keys(e);o<r.length;o++){var a;switch(a=r[o]){case"width":this.setWidth();break;case"height":this.setHeight();break;case"enableRtl":this.enableRtl?sf.base.addClass([this.element],"e-rtl"):sf.base.removeClass([this.element],"e-rtl");break;case"allowDragAndDrop":e[a]?(this.dragAndDropModule=new i(this),this.wireDragEvent()):this.unWireDragEvent()}}},o.prototype.getWidth=function(){return 80*window.innerWidth/100},o.prototype.onToggleColumn=function(e,i){var n=this,s=[].slice.call(this.element.querySelectorAll('.e-kanban-table col[data-key="'+e+'"]')),o=[].slice.call(this.element.querySelectorAll('.e-content-cells[data-key="'+e+'"]')),r=this.element.querySelector('.e-header-cells[data-key="'+e+'"]');i?(sf.base.removeClass(s,"e-collapsed"),this.isAdaptive&&s.forEach((function(e){return e.style.width=sf.base.formatUnit(n.getWidth())})),sf.base.removeClass(o,"e-collapsed"),sf.base.removeClass([r],"e-collapsed"),sf.base.classList(r.querySelector(".e-header-icon"),["e-column-expand"],["e-column-collapse"]),r.setAttribute("aria-expanded","true"),o.forEach((function(e){e.querySelector(".e-collapse-header-text").style.display="none",e.querySelector("."+t)&&(e.querySelector("."+t).style.display=""),e.setAttribute("aria-expanded","true")})),r.querySelector(".e-header-icon").setAttribute("aria-label",e+" Expand")):(sf.base.addClass(s,"e-collapsed"),this.isAdaptive&&s.forEach((function(e){return e.style.width=sf.base.formatUnit(50)})),sf.base.addClass(o,"e-collapsed"),sf.base.addClass([r],"e-collapsed"),sf.base.classList(r.querySelector(".e-header-icon"),["e-column-collapse"],["e-column-expand"]),r.setAttribute("aria-expanded","false"),o.forEach((function(e){e.querySelector(".e-collapse-header-text").style.display="",e.querySelector("."+t)&&(e.querySelector("."+t).style.display="none"),e.setAttribute("aria-expanded","false")})),r.querySelector(".e-header-icon").setAttribute("aria-label",e+" Collapse"))},o.prototype.onSwimlaneProperties=function(e,t,i){this.swimlaneSettings.allowDragAndDrop=e,this.swimlaneSettings.keyField=t,this.swimlaneSettings.enableFrozenRows=i,this.frozenSwimlaneRow&&!this.swimlaneSettings.enableFrozenRows&&this.removeFrozenRows()},o.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)})},o.prototype.setHeight=function(){sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.height)})},o.prototype.destroy=function(){this.touchModule&&this.touchModule.destroy(),this.dragAndDropModule&&this.dragAndDropModule.destroy(),this.keyboardModule&&this.keyboardModule.destroy(),this.unWireEvents()},o}();return{initialize:function(e){e.dataId&&new o(e)},isDevice:function(e){e.invokeMethodAsync("WindowWidth",70*window.innerWidth/100)},updateScrollPosition:function(e){e&&window.sfBlazor.instances[e].updateScrollPosition()},wireDragEvents:function(e){e&&window.sfBlazor.instances[e].wireDragEvent()},propertyChanged:function(e,t){e&&window.sfBlazor.instances[e].onPropertyChanged(t)},swimlaneProperties:function(e,t,i,n){e&&window.sfBlazor.instances[e].onSwimlaneProperties(t,i,n)},cardClick:function(e,t,i){window.sfBlazor.instances[e].onCardClick(t,i)},menuClick:function(e){window.sfBlazor.instances[e].onMenuClick()},listViewClick:function(e){window.sfBlazor.instances[e].onListViewClick()},toggleColumn:function(e,t,i){e&&window.sfBlazor.instances[e].onToggleColumn(t,i)},getTargetDetails:function(e,t,i,n,s){if(e&&window.sfBlazor){var o=window.sfBlazor.instances[e].element,r=document.elementFromPoint(t,i),a=void 0,l=null;if("tooltip"===s)return n?(a=sf.base.closest(r,".e-card"),l=JSON.stringify(a.getAttribute("data-id"))):r.classList.contains("e-tooltip-text")&&(l=JSON.stringify(r.innerText)),o.querySelector(".e-cloned-card")&&(l=null),l;if(a=sf.base.closest(r,".e-content-cells")){var h={};h.columnKeyField=a.getAttribute("data-key"),a.parentElement.previousElementSibling&&(h.swimlaneKeyField=a.parentElement.previousElementSibling.getAttribute("data-key"));var d=sf.base.closest(r,".e-card");if(d){var c=[].slice.call(a.querySelectorAll(".e-card"));h.index=c.indexOf(d),h.currentCardId=d.getAttribute("data-id"),d.previousElementSibling?h.previousCardId=d.previousElementSibling.getAttribute("data-id"):h.previousCardId=null}else{var p=a,u=null!=o.querySelector(".e-card")?parseInt(getComputedStyle(o.querySelector(".e-card")).marginBottom.replace("px","")):null;i-a.getBoundingClientRect().top>=u&&(p=document.elementFromPoint(t,i-u));var f=sf.base.closest(p,".e-card");if(f){c=[].slice.call(a.querySelectorAll(".e-card"));h.index=c.indexOf(f),h.previousCardId=f.getAttribute("data-id")}else{c=[].slice.call(a.querySelectorAll(".e-card"));i-a.getBoundingClientRect().top>=u&&c.length>0?h.previousCardId=c[c.length-1].getAttribute("data-id"):h.previousCardId=null}}return JSON.stringify(h)}}return null},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()}}}()},"./modules/sf-lineargauge.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.LinearGauge=function(){"use strict";var e=function(){function e(e,t,i,n){this.dragMillisecond=0,this.tooltipTimer=0,this.isTouch=!1,this.isResized=!1,this.allowAnimation=!1,window.sfBlazor=window.sfBlazor,this.valueToCoefficient=function(e,t){var i=(e-t.Minimum)/t.Delta;return i="Vertical"===t.Orientation?t.IsInversed&&"Thermometer"!==t.ContainerType?i:1-i:t.IsInversed&&"Thermometer"!==t.ContainerType?1-i:i},this.barAnimationProgress=function(e,t,i,n,s,o,r){var a=n<s?n+t*o:n-t*o,l=this.valueToCoefficient(a,e)*e.RectHeight+e.RectY,h=this.valueToCoefficient(e.Minimum,e)*e.RectHeight+e.RectY,d=Math.abs(l-h);"Vertical"===e.Orientation?(e.PointerBoundY="Thermometer"===e.ContainerType?l:e.IsInversed?h:l,e.PointerBoundHeight=d,"Bar"===e.PointerType&&"Normal"===e.ContainerType&&(i.setAttribute("y",e.PointerBoundY.toString()),i.setAttribute("height",e.PointerBoundHeight.toString()),i.setAttribute("x",e.PointerBoundX.toString()),i.setAttribute("width",e.PointerWidth.toString())),"path"===i.tagName&&i.setAttribute("d",r?"":this.getPathContainer(e))):(e.PointerBoundX="Thermometer"===e.ContainerType?h:e.IsInversed?l:h,e.PointerBoundWidth=d,"Bar"===e.PointerType&&"Normal"===e.ContainerType&&(i.setAttribute("x",e.PointerBoundX.toString()),i.setAttribute("width",e.PointerBoundWidth.toString()),i.setAttribute("y",e.PointerBoundY.toString()),i.setAttribute("height",e.PointerHeight.toString())),"path"===i.tagName&&i.setAttribute("d",r?"":this.getPathContainer(e)))},this.markerAnimationProgress=function(e,t,i,n,s,o,r,a){var l=n<s?n+t*o:n-t*o,h=e.MarkerType;if("InvertedTriangle"!=e.MarkerType&&"Triangle"!=e.MarkerType||(h=("Outside"==e.Position&&!e.OpposedPosition||"Inside"==e.Position&&e.OpposedPosition||"Cross"==e.Position)&&"Triangle"==e.MarkerType?"InvertedTriangle":("Inside"==e.Position&&!e.OpposedPosition||"Outside"==e.Position&&e.OpposedPosition)&&"InvertedTriangle"==e.MarkerType?"Triangle":e.MarkerType),r||a)for(var d=0;d<i.childNodes.length;d++){var c=i.childNodes[d];if(c.id===e.AnimationId)if("Vertical"===e.Orientation){var p=e.PointerBoundX;if(e.PointerBoundY=this.valueToCoefficient(l,e)*e.RectHeight+e.RectY,"Circle"===e.MarkerType){var u=(e.PointerWidth+e.PointerHeight)/4,f=e.OpposedPosition?"Near"==e.Placement?p-u:p+u:"Far"!=e.Placement?p-u:p+u;c.setAttribute("cy",e.PointerBoundY.toString()),c.setAttribute("cx",f.toString())}else if("Image"===e.MarkerType||"Rectangle"===e.MarkerType){var g=!e.OpposedPosition&&"Far"!==e.Placement||e.OpposedPosition&&"Near"===e.Placement?p-("Image"===e.MarkerType?e.PointerWidth/2:e.PointerWidth):p;c.setAttribute("y",(e.PointerBoundY-e.PointerHeight/2).toString()),c.setAttribute("x",g.toString())}else if("Text"===e.MarkerType){g=!e.OpposedPosition&&"Far"!==e.Placement||e.OpposedPosition&&"Near"===e.Placement?"Inside"===e.Position&&!e.OpposedPosition||e.OpposedPosition&&"Near"===e.Placement&&"Outside"===e.Position?p-e.PointerBoundWidth/2:p-e.PointerBoundWidth:p;c.setAttribute("y",e.PointerBoundY.toString()),c.setAttribute("x",g.toString())}else c.setAttribute("d",this.calculateShapes(e,h))}else{e.PointerBoundX=this.valueToCoefficient(l,e)*e.RectHeight+e.RectY;var m=e.PointerBoundY;if("Circle"===e.MarkerType){u=(e.PointerWidth+e.PointerHeight)/4;var v=e.OpposedPosition?"Near"==e.Placement?m-u:m+u:"Far"==e.Placement?m+u:m-u;c.setAttribute("cx",e.PointerBoundX.toString()),c.setAttribute("cy",v.toString())}else if("Image"===e.MarkerType||"Rectangle"===e.MarkerType){var b=e.PointerHeight,y=e.OpposedPosition?"Near"===e.Placement?m-b/2:m+b/2:"Far"===e.Placement?m+b/2:m-b/2;c.setAttribute("x",(e.PointerBoundX-e.PointerWidth/2).toString()),c.setAttribute("y",y.toString())}else if("Text"===e.MarkerType){y=e.OpposedPosition?"Near"==e.Placement?"Outside"==e.Position?m+e.PointerBoundHeight+e.PointerBoundHeight/4:"Cross"==e.Position?m+e.PointerBoundHeight/2:m-e.PointerBoundHeight/4:"Cross"==e.Position?m+e.PointerBoundHeight+e.PointerBoundHeight/4:"Outside"==e.Position?m+2*e.PointerBoundHeight+e.PointerBoundHeight/4:m+e.PointerBoundHeight/2:"Far"==e.Placement?"Cross"==e.Position?m+e.PointerBoundHeight+e.PointerBoundHeight/4:"Inside"==e.Position?m+2*e.PointerBoundHeight+e.PointerBoundHeight/4:m+e.PointerBoundHeight/2:"Cross"==e.Position?m+e.PointerBoundHeight/2:"Inside"==e.Position?m+e.PointerBoundHeight+e.PointerBoundHeight/2:m-e.PointerBoundHeight/4;c.setAttribute("x",e.PointerBoundX.toString()),c.setAttribute("y",y.toString())}else c.setAttribute("d",this.calculateShapes(e,h))}}},this.id=e,this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.destroy=function(){this.dotNetRef=null,this.unWireEvents()},e.prototype.unWireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd),sf.base.EventHandler.remove(this.element,"click",this.gaugeOnMouseClick),sf.base.EventHandler.remove(this.element,"mouseleave",this.gaugeOnMouseLeave),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},e.prototype.render=function(){this.wireEvents()},e.prototype.wireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,"click",this.gaugeOnMouseClick,this),sf.base.EventHandler.add(this.element,"mouseleave",this.gaugeOnMouseLeave,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},e.prototype.gaugeOnResize=function(){var e,t;if(!sf.base.isNullOrUndefined(this.element)){var i=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(i)){i.style.display="none";var n=this.element.getBoundingClientRect();e=n.width,t=n.height,i.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,this.isResized=!0,this.allowAnimation=!1,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResizeEvent",e,t))},e.prototype.gaugeOnMouseClick=function(e){var t=e.target.id;(t.indexOf("Bar")>-1||t.indexOf("Marker")>-1)&&(this.pointerCheck=!1)},e.prototype.gaugeOnMouseLeave=function(e){if(!sf.base.isNullOrUndefined(this.dotNetRef)){var t=this.calculateSelectedElementIndex(e);this.dotNetRef.invokeMethodAsync("TriggerMouseLeaveEvent",e.x,e.y,t.axisIndex,t.pointerIndex,t.rangeIndex,t.annotationIndex)}},e.prototype.gaugeOnMouseDown=function(e){var t=e.target.id,i=0,n=0;if("touchstart"===e.type?(this.isTouch=!0,i=e.touches[0].clientX,n=e.touches[0].clientY):(this.isTouch=!1,i=e.pageX,n=e.pageY),t.indexOf("Bar")>-1||t.indexOf("Marker")>-1){this.pointerCheck=!0,this.pointerId=t;var s=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10),o=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10);sf.base.isNullOrUndefined(this.enableDragCollection)||!this.enableDragCollection[s][o]||sf.base.isNullOrUndefined(this.dotNetRef)||(e.preventDefault(),this.dotNetRef.invokeMethodAsync("TriggerDragStart",s,o))}if(!sf.base.isNullOrUndefined(this.dotNetRef)){var r=this.calculateSelectedElementIndex(e);this.dotNetRef.invokeMethodAsync("TriggerMouseDownEvent",i,n,r.axisIndex,r.pointerIndex,r.rangeIndex,r.annotationIndex)}this.isTouch&&this.tooltipRenderer(t,i,n)},e.prototype.gaugeOnMouseMove=function(e){var t=new Date,i=this.pointerCheck?this.pointerId:e.target.id,n=0,s=0;if("touchmove"===e.type?(n=e.touches[0].clientX,s=e.touches[0].clientY):(n=e.clientX,s=e.clientY),i.indexOf("Bar")>-1||i.indexOf("Marker")>-1){var o=this.svgClient(i),r=parseInt(i.split("_AxisIndex_")[1].split("_")[0],10),a=parseInt(i.split("_AxisIndex_")[1].split("_")[2],10);this.pointerCheck&&(0==this.dragMillisecond||Math.abs(t.getMilliseconds()-this.dragMillisecond)>80)&&!sf.base.isNullOrUndefined(this.enableDragCollection)&&this.enableDragCollection[r][a]&&!sf.base.isNullOrUndefined(this.dotNetRef)?(this.dragMillisecond=t.getMilliseconds(),document.getElementById(this.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerDrag",i,r,a,n-o.left,s-o.top)):this.pointerCheck||sf.base.isNullOrUndefined(this.enableDragCollection)||!this.enableDragCollection[r][a]||document.getElementById(this.id+"_svg").setAttribute("cursor","pointer")}else sf.base.isNullOrUndefined(document.getElementById(this.id+"_svg"))||document.getElementById(this.id+"_svg").setAttribute("cursor","auto");this.tooltipRenderer(i,n,s)},e.prototype.tooltipRenderer=function(e,t,i){var n=this;if(e===this.element.id+"_LinearGaugeTitle"&&event.target.textContent.indexOf("...")>-1)sf.base.isNullOrUndefined(this.dotNetRef)||(clearTimeout(this.tooltipTimer),this.dotNetRef.invokeMethodAsync("TriggerTooltip",e,0,0,0,0,{},{},{},{}),this.isTouch&&(this.tooltipTimer=setTimeout((function(){null!=document.getElementById(n.element.id+"_Tooltip")&&n.dotNetRef.invokeMethodAsync("TriggerTooltip","",0,0,0,0,{},{},{},{})}),1500)));else if(e.indexOf("Bar")>-1||e.indexOf("Marker")>-1||e.indexOf("Range")>-1){var s=this.svgClient(e),o=parseInt(e.split("_AxisIndex_")[1].split("_")[0],10),r=parseInt(e.split("_AxisIndex_")[1].split("_")[2],10),a=e.split("_")[0],l=document.getElementById(a).getBoundingClientRect(),h={Bottom:l.bottom,Height:l.height,Left:l.left,Right:l.right,Top:l.top,Width:l.width,X:l.x,Y:l.y},d=document.getElementById(a+"_AxisLine_"+o).getBoundingClientRect(),c={Bottom:d.bottom,Height:d.height,Left:d.left,Right:d.right,Top:d.top,Width:d.width,X:d.x,Y:d.y},p=document.getElementById(a+"_MajorTicksLine_"+o).getBoundingClientRect(),u={Bottom:p.bottom,Height:p.height,Left:p.left,Right:p.right,Top:p.top,Width:p.width,X:p.x,Y:p.y},f=document.getElementById(e).getBoundingClientRect(),g={Bottom:f.bottom,Height:f.height,Left:f.left,Right:f.right,Top:f.top,Width:f.width,X:f.x,Y:f.y};sf.base.isNullOrUndefined(this.dotNetRef)||(clearTimeout(this.tooltipTimer),this.dotNetRef.invokeMethodAsync("TriggerTooltip",e,o,r,t-s.left,i-s.top,h,c,u,g),this.isTouch&&(this.tooltipTimer=setTimeout((function(){null!=document.getElementById(n.element.id+"_Tooltip")&&n.dotNetRef.invokeMethodAsync("TriggerTooltip","",0,0,0,0,{},{},{},{})}),1500)))}else{null!=document.getElementById(this.element.id+"_Tooltip")&&this.dotNetRef.invokeMethodAsync("TriggerTooltip","",0,0,0,0,{},{},{},{})}},e.prototype.gaugeOnMouseEnd=function(e){var t=this.pointerCheck?this.pointerId:e.target.id,i=0,n=0;if("touchend"===e.type){var s=e;i=s.changedTouches[0].pageX,n=s.changedTouches[0].pageY}else i=e.clientX,n=e.clientY;if(this.pointerCheck=!1,t.indexOf("Bar")>-1||t.indexOf("Marker")>-1){this.pointerCheck=!1,this.dragMillisecond=0,this.pointerId="";var o=this.svgClient(t),r=t.split("_AxisIndex_")[0].split("_")[0],a=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10),l=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10);sf.base.isNullOrUndefined(this.enableDragCollection)||!this.enableDragCollection[a][l]||sf.base.isNullOrUndefined(this.dotNetRef)||(document.getElementById(this.id+"_svg").setAttribute("cursor","pointer"),this.dotNetRef.invokeMethodAsync("TriggerDragEnd",a,l,r,t,i-o.left,n-o.top))}if(!sf.base.isNullOrUndefined(this.dotNetRef)){var h=this.calculateSelectedElementIndex(e);this.dotNetRef.invokeMethodAsync("TriggerMouseUpEvent",i,n,h.axisIndex,h.pointerIndex,h.rangeIndex,h.annotationIndex)}},e.prototype.calculateSelectedElementIndex=function(e){var t=e.target.id,i=t.indexOf("Bar")>-1||t.indexOf("Marker")>-1,n=-1,s=-1,o=-1,r=-1;if(t.indexOf("Range")>-1||i)n=t.indexOf("_AxisIndex_")>-1?parseInt(t.split("_AxisIndex_")[1].split("_")[0],10):-1,s=i?parseInt(t.split("_AxisIndex_")[1].split("_")[2],10):-1,o=t.indexOf("Range")>-1?parseInt(t.split("_Range_")[1],10):-1;else if(!sf.base.isNullOrUndefined(e.target.closest(".e-lineargauge-annotation"))){var a=e.target.closest(".e-lineargauge-annotation").parentElement;n=a.id.indexOf("Annotation")>-1?parseInt(a.id.split("_")[2]):-1,r=a.id.indexOf("Annotation")>-1?parseInt(a.id.split("_")[a.id.split("_").length-1]):-1}return{axisIndex:n,pointerIndex:s,rangeIndex:o,annotationIndex:r}},e.prototype.svgClient=function(e){return document.getElementById(e.split("_AxisIndex_")[0]+"_svg").getBoundingClientRect()},e.prototype.pointerAnimation=function(e,t,i,n,s,o){var r=this,a=window.sfBlazor.getCompInstance(t),l=document.getElementById(e.AnimationId),h=e.PreviousPointerValue,d=e.PointerValue;h=h===d?e.Minimum:h;var c,p=Math.abs(h-d);new sf.base.Animation({}).animate(l.parentElement,{name:"Linear",duration:e.Duration,progress:function(t){l.style.visibility="visible",r.isResized||!s&&!a.allowAnimation?l.parentElement.removeAttribute("style"):(c=(t.timeStamp-t.delay)/e.Duration,"Bar"!=e.PointerType?r.markerAnimationProgress(e,c,l.parentElement,h,d,p,s,a.allowAnimation):r.barAnimationProgress(e,c,l,h,d,p,!1))},end:function(u){r.isResized||!s&&!a.allowAnimation?l.parentElement.removeAttribute("style"):(c=1,"Bar"!=e.PointerType?r.markerAnimationProgress(e,c,l.parentElement,h,d,p,s,a.allowAnimation):r.barAnimationProgress(e,c,l,h,d,p,"RoundedRectangle"===e.ContainerType&&e.Minimum===e.PointerValue)),i&&n>0&&(o?a.annotationAnimation(t,n):a.cancelAnimation())}}),i||(this.isResized=!1)},e.prototype.annotationAnimation=function(e,t){var i=window.sfBlazor.getCompInstance(this.element.id),n=document.getElementById(e+"_AnnotationGroup");document.getElementById(e+"_create_Animation");if("0"===n.style.opacity){var s=0;new sf.base.Animation({}).animate(n,{duration:t,progress:function(e){e.timeStamp>e.delay&&(s=(e.timeStamp-e.delay)/e.duration,n.style.opacity=(1*s).toString())},end:function(){n.style.opacity=1..toString(),i.cancelAnimation()}})}},e.prototype.animationProcess=function(e,t,i,n,s,o,r){var a=document.getElementById(e+"_Axis_Collections"),l=document.getElementById(e+"_create_Animation"),h=window.sfBlazor.getCompInstance(e),d=0,c=document.querySelectorAll("style."+e+"_Animation"),p=!sf.base.isNullOrUndefined(document.getElementById(e+"_AnnotationGroup"))&&document.getElementById(e+"_AnnotationGroup").children.length>0;new sf.base.Animation({}).animate(a,{duration:t,progress:function(t){d=(t.timeStamp-t.delay)/t.duration,c[0].innerHTML="."+e+"_Animation{opacity:"+1*d+"}"},end:function(){if(c[0].innerHTML="."+e+"_Animation{opacity: 1}",h&&h.element){for(var n=JSON.parse(s.animationSettings),r=0;r<o;r++){var a=document.getElementById(e+"_PointersGroup_"+r);sf.base.isNullOrUndefined(a)||(a.style.visibility="visible"),n.length>0&&h.pointerAnimation(n[r],e,i,t,!1,p)}i&&o<1&&(p?h.annotationAnimation(e,t):h.cancelAnimation())}}}),setTimeout((function(){sf.base.isNullOrUndefined(l)||l.remove()}),r+100),this.isResized=!1},e.prototype.cancelAnimation=function(){this.allowAnimation=!1,this.dotNetRef.invokeMethodAsync("EndAnimation")},e.prototype.getPathContainer=function(e){var t=" ",i=e.CornerRadius,n=e.PointerBoundWidth,s=e.PointerBoundHeight,o=e.Orientation,r=e.IsInversed,a=e.PointerType,l=e.PointerBoundX,h=e.PointerBoundY,d=0,c=0;switch(e.ContainerType){case"RoundedRectangle":var p=l+n-i,u=h+s-i,f=i+h,g=i+l;"Bar"===a&&("Vertical"===o&&0!==s||"Horizontal"===o&&0!==n)&&(g>l+n/2&&(g=p=l+n/2),f>h+s/2&&(f=u=h+s/2)),"Bar"===a&&("Vertical"===o&&0===s||"Horizontal"===o&&0===n)&&(n<i/2&&!r?p=p+i+i/2:n<i/2&&r&&(g=l-Math.ceil(i/4)),s<i/2&&!r?f=h-Math.ceil(i/4):s<i/2&&r&&(u=u+i+i/2)),t="M "+l+" "+f+" Q "+l+" "+h+" "+g+" "+h+" L "+p+" "+h+" Q "+(l+n)+" "+h+" "+(l+n)+" "+f+" L "+(l+n)+" "+u+" Q "+(l+n)+" "+(h+s)+" "+p+" "+(h+s)+"  L "+g+" "+(h+s)+" Q "+l+" "+(h+s)+" "+l+" "+u+" L "+l+" "+f+" z";break;case"Thermometer":var m="Vertical"===o?n:s;if(d=m+m/2/Math.PI,c=m/2,"Vertical"===o){var v=e.ContainerWidth+e.ContainerWidth/2/Math.PI-d,b="Bar"===a?h+v:h,y="Bar"===a?h+(c-c/Math.PI):h;t="M"+l+" "+(b+s)+" A "+d+" "+d+", 0, 1, 0, "+(l+n)+" "+(b+s)+" L "+(l+n)+" "+y+" A "+c+" "+c+", 0, 1, 0, "+l+" "+y+" z "}else{var C="Bar"!==a||e.IsInversed?l:l-(e.ContainerWidth+e.ContainerWidth/2/Math.PI-d),w="Bar"===a?n-(c-c/Math.PI):n;t="M"+C+" "+h+" A "+d+" "+d+", 0, 1, 0, "+C+" "+(h+s)+" L "+(("Bar"===a?l:C)+w)+" "+(h+s)+" A "+c+" "+c+", 0, 1, 0, "+(("Bar"===a?l:C)+w)+" "+h+" z "}}return t},e.prototype.calculateShapes=function(e,t){var i,n=e.PointerWidth,s=e.PointerHeight,o=e.PointerBoundX,r=e.PointerBoundY,a=e.Placement,l=e.OpposedPosition,h=e.Orientation;switch(t){case"Diamond":i="M "+(o="Horizontal"===h?o-n/2:!l&&"Far"!==a||l&&"Near"===a?o-n:o)+" "+(r="Vertical"===h?r:l?"Near"===a?r-s/2:r+s/2:"Far"===a?r+s/2:r-s/2)+" L "+(o+n/2)+" "+(r-s/2)+" L "+(o+n)+" "+r+" L "+(o+n/2)+" "+(r+s/2)+" L "+o+" "+r+" z";break;case"Triangle":i="Vertical"===h?"M "+o+" "+r+" L"+(o-n)+" "+(r-s/2)+"L"+(o-n)+" "+(r+s/2)+" Z":"M "+o+" "+r+" L"+(o+n/2)+" "+(r-s)+"L"+(o-n/2)+" "+(r-s)+" Z";break;case"InvertedTriangle":i="Vertical"===h?"M "+o+" "+r+" L"+(o+n)+" "+(r-s/2)+"L"+(o+n)+" "+(r+s/2)+" Z":"M "+o+" "+r+" L"+(o+n/2)+" "+(r+s)+"L"+(o-n/2)+" "+(r+s)+" Z";break;case"Arrow":i="Vertical"===h?"M "+o+" "+r+" L"+(o-n/2)+" "+(r-s/2)+" L"+(o-n/2)+" "+(r-s/2+s/4)+" L"+(o-n)+" "+(r-s/2+s/4)+" L"+(o-n)+" "+(r+s/2-s/4)+" L"+(o-n/2)+" "+(r+s/2-s/4)+" L"+(o-n/2)+" "+(r+s/2)+"z":"M "+o+" "+r+" L"+(o+n/2)+" "+(r-s/2)+" L"+(o+n/2-n/4)+" "+(r-s/2)+" L"+(o+n/2-n/4)+" "+(r-s)+" L"+(o-n/2+n/4)+" "+(r-s)+" L"+(o-n/2+n/4)+" "+(r-s/2)+" L"+(o-n/2)+" "+(r-s/2)+"z";break;case"InvertedArrow":i="Vertical"===h?"M "+o+" "+r+"L"+(o+n/2)+" "+(r-s/2)+" L"+(o+n/2)+" "+(r-s/2+s/4)+" L"+(o+n)+" "+(r-s/2+s/4)+" L"+(o+n)+" "+(r+s/2-s/4)+" L"+(o+n/2)+" "+(r+s/2-s/4)+" L"+(o+n/2)+" "+(r+s/2)+"z":"M "+o+" "+r+" L"+(o+n/2)+" "+(r+s/2)+" L"+(o+n/2-n/4)+" "+(r+s/2)+" L"+(o+n/2-n/4)+" "+(r+s)+" L"+(o-n/2+n/4)+" "+(r+s)+" L"+(o-n/2+n/4)+" "+(r+s/2)+" L"+(o-n/2)+" "+(r+s/2)+"z"}return i},e}();return{initialize:function(t,i,n,s,o){return new e(t.id,t,i,n).render(),sf.base.isNullOrUndefined(s)||t.setAttribute("style",s),o&&this.createAnimationProcess(t.id,o),this.getElementSize(t.id)},getElementSize:function(e){var t,i,n=document.getElementById(e);if(null!=n){var s=n.getBoundingClientRect();t=s.width,i=s.height}return{width:t,height:i,isIE:sf.base.Browser.isIE}},pointerAnimationProcess:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){n.isResized=!1;for(var s=JSON.parse(t.animationSettings),o=0;o<i;o++)n.pointerAnimation(s[o],e,!1,0,!0)}},createAnimationProcess:function(e,t){var i=document.getElementById(e+"_create_Animation");if(t&&sf.base.isNullOrUndefined(i)){var n=document.createElement("style");n.className=e+"_Animation",n.innerText="."+e+"_Animation{opacity: 0}",n.id=e+"_create_Animation",document.body.appendChild(n)}},animationProcess:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);if(a&&a.element){a.allowAnimation=i;var l=JSON.parse(n.axisAnimation);a.animationProcess(e,t,i,l,s,o,r)}},cancelAnimation:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&(t.allowAnimation=!1)},setPathAttribute:function(e,t,i,n,s,o){var r=document.getElementById(e);""===t?r.setAttribute("d",i):"Circle"==t?"Horizontal"==o?r.setAttribute("cx",n.toString()):r.setAttribute("cy",s.toString()):"Rectangle"==t||"Image"==t?"Horizontal"==o?r.setAttribute("x",n.toString()):r.setAttribute("y",s.toString()):(r.setAttribute("x",n.toString()),r.setAttribute("y",s.toString()))},updateCollection:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.enableDragCollection=JSON.parse(t.enableDragCollection))},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()}}}()},"./modules/sf-listbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ListBox=function(){"use strict";var e,t="e-list-item",i=function(){function i(t,i,n,s,o){this.element=t,this.dotnetRef=s,this.allowDragAndDrop=n,e=o,this.element.blazor__instance=this,this.scope=i,sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),n&&this.initializeDraggable()}return i.prototype.initializeDraggable=function(){var e=this;if(this.allowDragAndDrop){var i=sf.base.select(".e-ul",this.element),n=new sf.lists.Sortable(i,{scope:this.scope,itemClass:t,beforeDragStart:this.triggerBeforeDragStart.bind(this),drag:this.triggerDrag.bind(this),dragStart:this.triggerDragStart.bind(this),beforeDrop:this.dragEnd.bind(this),placeHolder:function(){return sf.base.createElement("span",{className:"e-placeholder"})},helper:function(i){var n=e.element.cloneNode(),s=i.sender.cloneNode(!0);n.appendChild(s);var o=sf.base.select("."+t,e.element);n.style.width=o.offsetWidth+"px",n.style.height=o.offsetHeight+"px";var r=[].slice.call(sf.base.selectAll("."+t+".e-selected",e.element));return r.length&&r.length>1&&r.indexOf(i.sender)>-1&&s.appendChild(sf.base.createElement("span",{className:"e-list-badge",innerHTML:r.length.toString()})),n.style.zIndex=sf.popups.getZindexPartial(e.element).toString(),n}});this.updateDraggable(n,this.allowDragAndDrop)}},i.prototype.triggerBeforeDragStart=function(e){e.cancel=e.target.classList.contains("e-drag-prevent")},i.prototype.triggerDragStart=function(e){e.bindEvents(e.dragElement)},i.prototype.triggerDrag=function(t){var i,n,s,o=0,r=10,a=t.event;e&&(r=t.target.scrollHeight),t.target&&(t.target.classList.contains("e-listbox-container")||t.target.classList.contains("e-list-item")||t.target.classList.contains("e-input-group")||t.target.classList.contains("e-filter-parent"))&&(t.target.classList.contains("e-list-item")||t.target.classList.contains("e-input-group")||t.target.classList.contains("e-filter-parent")?(s=t.target.closest(".e-listbox-container"),sf.base.isNullOrUndefined(s)&&(s=this.element)):s=t.target,n=(i=s.querySelector(".e-list-parent")).getBoundingClientRect(),s.classList.contains("e-filter-list")&&(o=40),n.y+i.offsetHeight-(a.pageY+36)<1?i.scrollTop=i.scrollTop+r:a.pageY-36-(n.y+o)<1&&(i.scrollTop=i.scrollTop-r)),t.target},i.prototype.dragEnd=function(e){var t,i,n,s=!1,o=!1,r=!1;n=e.target.parentElement.parentElement,"UL"==e.target.tagName&&e.target.className.indexOf("e-list-parent")>-1&&(n=e.target.parentElement),n.blazor__instance||(((n=n.parentElement).className.indexOf("e-list-item")>-1||n.className.indexOf("e-filter-list")>-1&&n.closest(".e-listboxtool-wrapper"))&&(n=n.parentElement),n.className.indexOf("e-list-parent")>-1?n=n.parentElement.parentElement:n.className.indexOf("e-list-wrap")>-1&&(n=n.parentElement)),e.cancel=!0,n.blazor__instance?(t=n.blazor__instance.scope,i=n.blazor__instance.dotnetRef,o=this.scope===t,this.element===n&&(r=!0,o=!1)):s=!0;var a=e.helper.getBoundingClientRect();this.dotnetRef.invokeMethodAsync("DragEndAsync",s,e.droppedElement.getAttribute("data-value"),r,o,e.previousIndex,e.currentIndex,i,a.x,a.y)},i.prototype.keyDownHandler=function(e){var i=e.target;if(38===e.keyCode||40===e.keyCode)if(e.preventDefault(),i.classList.contains("e-listbox-container")){var n=sf.base.select("."+t,this.element);n&&n.focus()}else{var s=[].slice.call(sf.base.selectAll("."+t,this.element)),o=s.indexOf(i);if(o<0)return;if((o=38===e.keyCode?o-1:o+1)<0||o>s.length-1)return;s[o].focus()}else 65===e.keyCode&&e.ctrlKey&&!e.target.classList.contains("e-input-filter")&&e.preventDefault()},i.prototype.updateDraggable=function(e,i){if(e){var n=sf.base.getComponent(e.element,sf.base.Draggable);n.abort=i?"":"."+t}},i.prototype.destroyDraggable=function(){var e=sf.base.getComponent(sf.base.select(".e-ul",this.element),"sortable");sf.base.isNullOrUndefined(e)||(this.updateDraggable(e,this.allowDragAndDrop),e.destroy())},i.prototype.destroy=function(){this.destroyDraggable(),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},i.prototype.onPropertyChanged=function(e){this.allowDragAndDrop=e,e?this.initializeDraggable():this.destroyDraggable()},i.prototype.getScopedElement=function(e){return sf.base.select("#"+e).blazor__instance.dotnetRef},i}();return{initialize:function(e,t,n,s,o){if(!sf.base.isNullOrUndefined(e)){new i(e,t,n,s,o);var r,a,l=!1;e.addEventListener("touchstart",(function(){l=!1,a=null,r=setTimeout((function(){l=!0}),500)})),e.addEventListener("touchmove",(function(e){a=e.target})),e.addEventListener("touchend",(function(e){clearTimeout(r),sf.base.isNullOrUndefined(a)&&(l&&e.preventDefault(),s.invokeMethodAsync("TouchHoldAsync",l,e.target.getAttribute("data-value")))}))}},destroy:function(e){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blazor__instance)||e.blazor__instance.destroy()},onPropertyChanged:function(e,t){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blazor__instance)||e.blazor__instance.onPropertyChanged(t)},getScopedListBox:function(e,t){return e.blazor__instance.getScopedElement(t)}}}()},"./modules/sf-listview.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ListView=function(){"use strict";var e={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},t={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},i="e-focused",n="e-list-item",s="e-has-child",o="e-list-header",r="e-disabled",a="e-check",l="none",h=function(){function h(e,t,i,n,s,o){this.dataSourceLevel=["defaultData_Key"],this.currentDataSourceKey="defaultData_Key",this.isWindow=!1,this.liDifference=0,this.liHeight=0,this.virtualListDifference=0,this.isCheckAll=!1,this.isFocus=!1,this.element=t,this.dotNetRef=i,this.dataId=e,this.showCheckBox=n.ShowCheckBox,this.showHeader=n.ShowHeader,this.enable=n.Enabled,this.currentUlElement=t.querySelector("ul"),this.enableVirtualization=n.EnableVirtualization,this.isWindow=!n.Height,this.enableSelectEvent=s,this.height=n.Height,this.headerTitleInfo=[n.HeaderTitle],this.selectedItems={defaultData_Key:n.SelectedElementIdInfo},this.enableRtl=n.EnableRtl,this.animation=n.Animation,this.isTemplate=n.Template,this.focusId=[],window.sfBlazor.setCompInstance(this),this.datasource=o}return h.prototype.initialize=function(){if(this.enableVirtualization){if(this.isWindow)this.dotNetRef.invokeMethodAsync("GetComponenetHeight",window.innerHeight);else if(-1!==this.height.indexOf("%")){var e=this.element.parentElement.getBoundingClientRect().height;this.dotNetRef.invokeMethodAsync("GetComponenetHeight",e/100*parseFloat(this.height))}this.updateLiElementHeight()}this.headerElement=this.element.querySelector(".e-headertext"),this.animationObject=new sf.base.Animation(this.animateOptions),this.wireEvents()},h.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"focusout",this.removeFocus,this),this.touchModule=new sf.base.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)}),this.enableVirtualization?(sf.base.EventHandler.add(this.element,"scroll",this.scrollHandler,this),this.isWindow&&window.addEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.add(this.element,"mouseover",this.mouseHoverHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.mouseOutHandler,this))},h.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"focusout",this.removeFocus),this.enableVirtualization?(sf.base.EventHandler.remove(this.element,"scroll",this.scrollHandler),this.isWindow&&window.removeEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.remove(this.element,"mouseover",this.mouseHoverHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.mouseOutHandler)),this.touchModule.destroy()},h.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.dataSourceLevel[this.dataSourceLevel.length-1]&&this.uncheckAllItems(),this.back())},h.prototype.showHideItem=function(e,t){var i=this.getLi(e);i&&(i.style.display=t)},h.prototype.enableState=function(e,t){var i=this.getLi(e);i&&(t?i.classList.remove("e-disabled"):i.classList.add("e-disabled"))},h.prototype.getLi=function(e){var t;return this.element&&(t=this.element.querySelector('[data-uid="'+e.id+'"]')),t},h.prototype.scrollHandler=function(e){var t,n=this.isWindow?e.target.documentElement.scrollTop:e.target.scrollTop;if(this.liHeight||this.updateLiElementHeight(),(t=Math.round(n/this.liHeight))-this.liDifference>=this.virtualListDifference||t-this.liDifference<=-1){var s=this.currentUlElement.querySelector("."+i);s&&(this.focusedElementId=s.getAttribute("data-uid"));var o=this.element.querySelector(".e-list-virtualcontainer");o&&(o.style.top=(t-1)*this.liHeight<0?"0px":(t-2)*this.liHeight+"px",this.liDifference=t,this.dotNetRef.invokeMethodAsync("VirtualScrolling",t-2))}},h.prototype.preventSelection=function(e){var t=this.mouseEvent.target,i=sf.base.closest(t,"."+n);e?this.dataSourceLevel.length>1&&this.dataSourceLevel.pop():this.performSelection(i)},h.prototype.performSelection=function(e){null!==e&&!e.classList.contains(r)&&this.enable&&(this.removeFocus(),this.focusId=[],this.addFocusId(e.getAttribute("data-uid")),this.showCheckBox?this.mouseEvent.target.classList.contains("e-frame")?this.checkUncheckItem(e):e.classList.contains(s)?(this.removeHover(),this.removeFocus(),this.setSelectLI(e,this.mouseEvent)):this.checkUncheckItem(e):(this.currentUlElement.querySelector("."+i)&&this.currentUlElement.querySelector("."+i).classList.remove(i),e.classList.contains(s)?this.setSelectLI(e,this.mouseEvent):e.classList.contains(i)||(e.classList.add(i),this.selectedItems[this.currentDataSourceKey][0]=e.getAttribute("data-uid"))))},h.prototype.updateLiElementHeight=function(){var e=this.element.querySelector(".e-list-virtualcontainer");if(e){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));var t=e.children[0];if(t){if(this.liHeight=t.getBoundingClientRect().height,this.liHeight&&this.enableVirtualization){var i=e.getBoundingClientRect().height;e.parentElement.style.height=i+"px"}}else{var s=sf.base.createElement("li",{className:n});e.appendChild(s),this.liHeight=e.children[0].getBoundingClientRect().height,sf.base.detach(s)}this.liHeight&&this.dotNetRef.invokeMethodAsync("UpdateLiElementHeight",this.liHeight)}},h.prototype.updateElementDifference=function(e){this.virtualListDifference=e,this.enableVirtualization&&this.updateLiElementHeight()},h.prototype.selectItem=function(e){var t=this.getLi(e);this.showCheckBox?this.setChecked(t,t.querySelector(".e-checkbox-wrapper")):(sf.base.isNullOrUndefined(t)?this.removeFocus():this.setSelectLI(t,null),this.selectedItems[this.currentDataSourceKey][0]=t.getAttribute("data-uid"))},h.prototype.clickHandler=function(e){if(this.currentUlElement&&!this.element.classList.contains("e-disabled")){var t=e.target,i=t.classList;if(this.mouseEvent=e,i.contains("e-icon-back")||i.contains("e-headertext"))this.back();else{var o=sf.base.closest(t.parentNode,"."+n)?sf.base.closest(t.parentNode,"."+n):sf.base.closest(t,"."+n);if(this.enableSelectEvent||this.performSelection(o),null!==o&&!o.classList.contains(r)&&this.enable){if(o.classList.contains(s)){var a=o.getAttribute("data-uid");-1===this.dataSourceLevel.indexOf(a)&&this.dataSourceLevel.push(a)}this.enableSelectEvent&&(this.isFocus=!1,this.getSelectEventData(o,e))}}}},h.prototype.checkUncheckItem=function(e){e.classList.add(i),e.querySelector("."+a)?this.uncheckItem(e):this.setChecked(e,e.querySelector(".e-checkbox-wrapper")),this.dotNetRef.invokeMethodAsync("UpdateData",!sf.base.isNullOrUndefined(e.querySelector("."+a)),e.getAttribute("data-uid"))},h.prototype.back=function(){if(this.dataSourceLevel.length>1){for(var e=this.element.querySelectorAll("ul"),t=this.element.querySelector("."+o),n=0;n<e.length;n++)this.dataSourceLevel.length>2?e[n].getAttribute("pid")===this.dataSourceLevel[this.dataSourceLevel.length-2]?(this.switchView(this.currentUlElement,e[n],!0),this.currentUlElement=e[n]):e[n].style.display=l:null===e[n].getAttribute("pid")?(this.switchView(this.currentUlElement,e[n],!0),this.currentUlElement=e[n]):e[n].style.display=l;if(this.dataSourceLevel.pop(),!this.showCheckBox)this.currentUlElement.querySelectorAll("."+i)[0].setAttribute("aria-selected","false");this.isTemplate||(this.headerTitleInfo.length>1&&this.headerTitleInfo.pop(),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1])),this.currentDataSourceKey=this.dataSourceLevel[this.dataSourceLevel.length-1],1===this.dataSourceLevel.length&&t&&(t.children[0].style.display=l,t.classList.remove("e-list-navigation"));var s={IsInteracted:!(!event&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.dotNetRef.invokeMethodAsync("TriggerBackEvent",s)}},h.prototype.setHoverLI=function(e){this.element.classList.contains(r)||e.classList.contains(r)||e.classList.add("e-hover")},h.prototype.mouseHoverHandler=function(e){var t=sf.base.closest(e.target.parentNode,"."+n);t&&this.setHoverLI(t)},h.prototype.mouseOutHandler=function(e){this.removeHover()},h.prototype.removeHover=function(){var e=this.element.querySelector(".e-hover");e&&e.classList.remove("e-hover")},h.prototype.removeFocus=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));for(var e=0,t=this.currentUlElement.querySelectorAll("."+i);e<t.length;e++){t[e].classList.remove(i)}this.isRestrictFocus=void 0},h.prototype.isValidLI=function(e){return e&&e.classList.contains(n)&&!e.classList.contains("e-list-group-item")&&!e.classList.contains(r)},h.prototype.setSelectLI=function(e,t){if(this.enable&&this.isValidLI(e)&&!e.classList.contains(i)){var n=this.currentUlElement.querySelector("."+i);n&&this.removeFocusId(n.getAttribute("data-uid")),this.removeFocus(),this.addAriaAttribute(!0,e),this.removeHover(),e.classList.contains(s)&&this.renderSubList(e)}},h.prototype.addAriaAttribute=function(e,t){e?(this.isCheckAll||t.classList.add(i),this.addFocusId(t.getAttribute("data-uid"))):this.showCheckBox||e||!t.classList.contains(i)||(t.classList.remove(i),this.focusId.indexOf(t.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(t.getAttribute("data-uid")),1)),(this.showCheckBox||t.classList.contains(s))&&t.setAttribute("aria-selected",e.toString())},h.prototype.renderSubList=function(e){var t=e,n=e.getAttribute("data-uid"),r=this.element.querySelector("."+o);if(e.classList.remove(i),e.classList.add(i),this.showHeader&&r&&(r.children[0].style.display=null,r.classList.add("e-list-navigation")),t.classList.contains(s)&&n){if(this.element.querySelector("[pid='"+n+"']"))this.renderChildList(n,[n]);else{var a={ElementId:n,Key:this.currentDataSourceKey};this.dotNetRef.invokeMethodAsync("ListChildDataSource",a)}this.isTemplate||(this.headerTitleInfo.push(t.innerText.trim()),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1])),-1==this.dataSourceLevel.indexOf(n)&&this.dataSourceLevel.push(n),this.currentDataSourceKey=n}},h.prototype.renderChildList=function(e,t){var i=this.element.querySelectorAll("ul");i[i.length-1].getAttribute("pid")||i[i.length-1].setAttribute("pid",e);for(var n=0;n<i.length;n++)if(i[n].getAttribute("pid")===e){this.switchView(this.currentUlElement,i[n],!1),this.currentUlElement=i[n];var s=i[n].querySelectorAll(".e-list-item");if(s[0].getAttribute("aria-level")!==n.toString())for(var o=0;o<s.length;o++)s[o].setAttribute("aria-level",n.toString());t&&(this.selectedItems[e]=t)}},h.prototype.mouseDownHandler=function(){this.isRestrictFocus=null==this.isRestrictFocus||this.isRestrictFocus},h.prototype.focusHandler=function(e){this.isRestrictFocus?this.isRestrictFocus=!1:sf.base.isNullOrUndefined(this.focusId)||0==this.focusId.length?(this.isRootFocus=!0,this.arrowKeyHandler(e),this.isRootFocus=!1):(this.isFocus=!0,this.updateFocusElement(e))},h.prototype.keyActionHandler=function(e){if("INPUT"!=e.target.tagName&&"TEXTAREA"!=e.target.tagName)switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 39:this.arrowKeyHandler(e);break;case 37:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:var t=this.element.querySelector("."+o+" .e-icon-back");t&&t.style.display!=l&&(this.showCheckBox&&this.currentDataSourceKey&&this.uncheckAllItems(),this.back());break;case 32:this.spaceKeyHandler(e)}},h.prototype.addFocusId=function(e){this.focusId.indexOf(e)<0&&this.focusId.push(e)},h.prototype.removeFocusId=function(e){this.focusId.indexOf(e)>=0&&this.focusId.splice(this.focusId.indexOf(e),1)},h.prototype.updateFocusElement=function(e){var t=this.currentUlElement.querySelector("."+i);t&&(t.classList.remove(i),this.focusId.indexOf(t.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(t.getAttribute("data-uid")),1));for(var n=this.currentUlElement.children,s=0;s<n.length;s++)this.focusId.indexOf(n[s].getAttribute("data-uid"))>=0&&(n[s].classList.add(i),this.addFocusId(n[s].getAttribute("data-uid")),this.addAriaAttribute(!0,n[s]),this.element.setAttribute("aria-activedescendant",n[s].id.toString()),this.enableSelectEvent&&(this.getSelectEventData(n[s],e),this.isFocus=!1))},h.prototype.homeKeyHandler=function(e,t){e.preventDefault();var n=this.currentUlElement.querySelector("."+i);n&&(n.classList.remove(i),this.removeFocusId(n.getAttribute("data-uid")));var s=t?this.currentUlElement.children.length-1:0;s=this.currentUlElement.children[s].classList.contains("e-list-group-item")&&this.currentUlElement.children.length>1?s+1:s;var o=this.currentUlElement.children[s];this.addAriaAttribute(!0,o),o.classList.add(i),this.addFocusId(o.getAttribute("data-uid")),this.currentUlElement.children[s]?this.element.setAttribute("aria-activedescendant",this.currentUlElement.children[s].id.toString()):this.element.removeAttribute("aria-activedescendant"),this.enableSelectEvent&&this.getSelectEventData(o,e)},h.prototype.onArrowKeyDown=function(e,t){var o,r;return!sf.base.isNullOrUndefined(this.currentUlElement.querySelector("."+s))||this.showCheckBox?((r=this.currentUlElement.querySelector("."+i)||this.currentUlElement.querySelector("."+i))&&this.removeFocusId(r.getAttribute("data-uid")),o=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+n),r,t),sf.base.isNullOrUndefined(o)||(r&&(r.classList.remove(i),this.showCheckBox||r.classList.remove(i),this.removeFocusId(r.getAttribute("data-uid"))),o.classList.contains(s)||this.showCheckBox?o.classList.add(i):this.setSelectLI(o,e))):(r=this.currentUlElement.querySelector("."+i),o=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+n),r,t),this.setSelectLI(o,e)),o?this.element.setAttribute("aria-activedescendant",o.id.toString()):this.element.removeAttribute("aria-activedescendant"),o},h.prototype.getSiblingLI=function(e,t,i){var n,s,o=Array.prototype.slice.call(e);for(s=t?o.indexOf(t):!0===i?o.length:-1,n=o[s+(!0===i?-1:1)];n&&n.classList.contains(r);)n=!0===i?n.previousElementSibling:n.nextElementSibling;return n},h.prototype.arrowKeyHandler=function(e,t){if(this.isRootFocus||e.preventDefault(),this.currentUlElement){var i=this.onArrowKeyDown(e,t);i&&this.addFocusId(i.getAttribute("data-uid"));var n=this.element.getBoundingClientRect().top,s=this.element.getBoundingClientRect().height,o=void 0;if(i){var r=i.getBoundingClientRect().top,a=i.getBoundingClientRect().height;if(t)(o=this.isWindow?r:r-n)<0&&(this.isWindow?window.scroll(0,pageYOffset+o):this.element.scrollTop=this.element.scrollTop+o);else{var l=this.isWindow?window.innerHeight:s;(o=this.isWindow?r+a:r-n+a)>l&&(this.isWindow?window.scroll(0,pageYOffset+(o-l)):this.element.scrollTop=this.element.scrollTop+(o-l))}}}},h.prototype.enterKeyHandler=function(e){if(this.currentUlElement){var t=this.currentUlElement.querySelector("."+i);this.currentUlElement.querySelector("."+s)&&t?(t.classList.remove(i),this.showCheckBox&&(this.removeFocus(),this.removeHover()),this.setSelectLI(t,e)):sf.base.isNullOrUndefined(t)||this.spaceKeyHandler(e)}},h.prototype.checkAllItems=function(){this.isCheckAll=!0,this.updateCheckBoxState(!0),this.isCheckAll=!1},h.prototype.uncheckAllItems=function(){this.updateCheckBoxState(!1)},h.prototype.updateCheckBoxState=function(e){if(this.showCheckBox)for(var t=this.currentUlElement.querySelectorAll("li"),i=this.enableVirtualization?this.currentUlElement.querySelector(".e-list-virtualcontainer").childElementCount:this.currentUlElement.childElementCount,n=0;n<i;n++){var s=t[n].querySelector(".e-frame");s&&(e&&!s.classList.contains(a)?this.checkItem(t[n]):!e&&s.classList.contains(a)&&this.uncheckItem(t[n]))}},h.prototype.checkItem=function(e){this.toggleCheckBox(e,!0)},h.prototype.getCheckData=function(e,t,i){var n=e.id;if(i!==e.id||sf.base.isNullOrUndefined(e.id)){i=i.toLowerCase();for(var s=0,o=Object.entries(e);s<o.length;s++){var r=o[s],a=""+r[0],l=""+r[1];(a=a.toLowerCase())===i&&(n=l)}}var h=this.currentUlElement.querySelector("[data-uid='"+n+"']");t?this.checkItem(h):this.uncheckItem(h),this.removeFocus()},h.prototype.spaceKeyHandler=function(e){if(this.isTemplate||e.preventDefault(),this.enable&&this.showCheckBox&&this.currentUlElement){var t=this.currentUlElement.querySelector("."+i);!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.querySelector("."+a))?this.setChecked(t,t.querySelector(".e-checkbox-wrapper")):this.uncheckItem(t),this.enableSelectEvent&&this.getSelectEventData(t,e)}},h.prototype.setChecked=function(e,t){this.removeFocus(),e.classList.add(i),this.addAriaAttribute(!0,e),t&&(t.querySelector(".e-frame").classList.add(a),t.setAttribute("aria-checked","true")),this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(e.getAttribute("data-uid"))},h.prototype.toggleCheckBox=function(e,t){if(this.showCheckBox){var i=e;if(!sf.base.isNullOrUndefined(i)){var n=i.querySelector(".e-frame");this.addAriaAttribute(t,i),sf.base.isNullOrUndefined(n)||(t?n.classList.add(a):n.classList.remove(a),n.parentElement.setAttribute("aria-checked",t?"true":"false"))}}},h.prototype.uncheckItem=function(e){e&&(this.selectedItems[this.currentDataSourceKey]&&-1!==this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].splice(this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid")),1),this.toggleCheckBox(e,!1))},h.prototype.addCheckClass=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));for(var e=this.enableVirtualization?this.currentUlElement.querySelector(".e-list-virtualcontainer").children:this.currentUlElement.children,t=this.selectedItems[this.currentDataSourceKey],n=0;n<e.length;n++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===e[n].getAttribute("data-uid")?e[n].classList.add(i):e[n].classList.remove(i)),t.length>0&&(-1!==t.indexOf(e[n].getAttribute("data-uid"))?this.toggleCheckBox(e[n],!0):this.toggleCheckBox(e[n],!1))):t[0]===e[n].getAttribute("data-uid")?e[n].classList.add(i):e[n].classList.remove(i);for(n=0;n<e.length;n++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===e[n].getAttribute("data-uid")?e[n].classList.add(i):e[n].classList.remove(i)),t.length>0&&(-1!==t.indexOf(e[n].getAttribute("data-uid"))?this.toggleCheckBox(e[n],!0):this.toggleCheckBox(e[n],!1))):t&&t[0]===e[n].getAttribute("data-uid")?e[n].classList.add(i):e[n].classList.remove(i)},h.prototype.getSelectedItems=function(){var e=this.currentUlElement.querySelectorAll(".e-check");this.selectedItems[this.currentDataSourceKey]=[];for(var t=0;t<e.length;t++){var i=sf.base.closest(e[t],"."+n);this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(i.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(i.getAttribute("data-uid"))}return{ElementId:this.selectedItems[this.currentDataSourceKey],Key:this.currentDataSourceKey}},h.prototype.getSelectEventData=function(e,t){if(e){var i="click"===t.type?!e.querySelector("."+a):!!e.querySelector("."+a),n={ElementId:e.getAttribute("data-uid"),IsChecked:i,Key:e.classList.contains(s)&&!t.target.classList.contains("e-frame")?this.dataSourceLevel[this.dataSourceLevel.length-2]:this.currentDataSourceKey,IsInteracted:!(!t&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.isFocus||this.dotNetRef.invokeMethodAsync("TriggerClickEvent",n)}},h.prototype.switchView=function(i,n,s){var o=this;if(i&&n){var r=i.style.position,a="hidden"!==this.element.style.overflow?this.element.style.overflow:"",h=void 0,d=this.animation.duration;if(i.style.position="absolute",i.classList.add("e-view"),"Disable"===sf.base.animationMode){h=this.enableRtl?t.None:e.None,s=this.enableRtl,d=0}else if(this.animation.effect)"None"===this.animation.effect&&"Enable"===sf.base.animationMode&&(this.animation.effect="SlideLeft"),h=this.enableRtl?t[this.animation.effect]:e[this.animation.effect];else{h=e.SlideLeft,s=this.enableRtl,d=0}this.element.style.overflow="hidden",this.animationObject.animate(i,{name:s?h[0]:h[1],duration:d,timingFunction:this.animation.easing,end:function(e){i.style.display=l,o.element.style.overflow=a,i.style.position=r,i.classList.remove("e-view")}}),n.style.display="",this.animationObject.animate(n,{name:s?h[2]:h[3],duration:d,timingFunction:this.animation.easing,end:function(){o.dotNetRef.invokeMethodAsync("TriggerActionComplete",o.datasource)}}),this.currentUlElement=n}},h.prototype.setAnimation=function(e){this.animation=e},h.prototype.setSelectedItems=function(e){var t=this.element.querySelector("."+o);sf.base.isNullOrUndefined(e)||(this.selectedItems={defaultData_Key:e}),e.length>0?this.currentUlElement=this.element.querySelector('[data-uid="'+e+'"]').closest("ul"):this.currentUlElement=this.element.querySelector("ul");var i=this.element.querySelector('[data-uid="'+e+'"]').classList.contains("e-has-child");i?(this.dataSourceLevel=["defaultData_Key"],this.currentUlElement.style.removeProperty("display"),this.addCheckClass(),this.currentDataSourceKey="defaultData_Key"):this.selectedItems[this.currentDataSourceKey]=[this.currentDataSourceKey],this.showCheckBox&&this.removeFocus(),this.headerElement&&i&&(this.headerTitleInfo=this.headerTitleInfo.splice(0,1),this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1]),1===this.dataSourceLevel.length&&t&&i&&(t.children[0].style.display=l,t.classList.remove("e-list-navigation"))},h.prototype.updateHeaderTitle=function(e){this.headerTitleInfo[0]=e,this.headerElement&&(this.headerElement.innerText=e)},h.prototype.destroy=function(){this.element.style.display=l,this.unWireEvents()},h}();return{initialize:function(e,t,i,n,s,o,r){if(t&&e){new h(e,t,i,n,s,r);var a=window.sfBlazor.getCompInstance(e);a.initialize(),a.updateElementDifference(o)}},renderChildList:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.renderChildList(t,i)},addActiveClass:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.addCheckClass()},showHideItem:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.showHideItem(t,i)},enableState:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.enableState(t,i)},back:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.back()},checkAllItems:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.checkAllItems()},uncheckAllItems:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.uncheckAllItems()},getCheckData:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s)&&null!=t)for(var o=0;o<t.length;o++)s.getCheckData(t[o],i,n)},selectItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&null!=t)for(var n=0;n<t.length;n++)i.selectItem(t[n])},preventSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.preventSelection(t)},updateLiElementHeight:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.updateLiElementHeight()},getCheckedItems:function(e){var t=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(t)?{}:t.getSelectedItems()},setAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setAnimation(t)},setCheckedItems:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setSelectedItems(t)},updateHeaderTitle:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateHeaderTitle(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},updateElementDifference:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateElementDifference(t)}}}()},"./modules/sf-maps.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Maps=function(){"use strict";var e=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new i((function(t){t(e.value)})).then(r,a)}l((n=n.apply(e,t||[])).next())}))},t=function(e,t){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=function(e,t){this.x=e,this.y=t};function s(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t}function o(e,t,i){var n="";switch(e){case"Balloon":n="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";break;case"Cross":n="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"Diamond":n="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+i.y+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+i.y+" Z";break;case"Star":n="M "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x-t.width/3)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" Z";break;case"Triangle":n="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/2)+" Z";break;case"HorizontalLine":n=" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"VerticalLine":n="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2);break;case"InvertedTriangle":n="M "+(i.x-t.width/2)+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" Z";break;case"Pentagon":for(var s=void 0,o=void 0,r=0;r<5;r++)s=t.width/2*Math.cos(Math.PI/180*(72*r)),o=t.height/2*Math.sin(Math.PI/180*(72*r)),n+=(0===r?"M ":"L ")+(i.x+s)+" "+(i.y+o);n+=" Z"}return n}var r=function(){function r(e,t,i,n){this.previousMarkerId="",this.previousId="",this.moveClientX=0,this.moveClientY=0,this.clientX=0,this.clientY=0,this.isPinch=!1,this.enableSelectionZoom=!1,this.allowPanning=!1,this.isPanning=!1,this.isPan=!0,this.zoomClick=!1,this.mouseClick=!1,this.position=null,this.height=0,this.width=0,this.mapsBorderWidth=0,this.toolbarButtonOpacity=1,this.toolbarShapeOpacity=1,this.markerClusterExpandCheck=!1,this.svgCreated=!1,this.zoomIn=1,this.zoomOut=1,this.scaleFactor=1,this.factorCount=0,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.lastScale=1,this.clusterLocation=[],this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[],this.tileTranslatePoint=null,this.isToolbarTooltip=!1,this.marginTop=0,this.marginLeft=0,this.isPinchZoomed=!1,this.panComplete=!1,this.pinchComplete=!1,this.mouseMoveId="",this.isReset=!1,window.sfBlazor=window.sfBlazor,this.tapCount=0,this.isMarkerDrag=!1,this.allowMarkerDragStartEvent=!1,this.id=e,this.element=t,this.dotNetRef=n,this.layerCount=i.layerCount,this.clusterSettings=i.markerCluster?JSON.parse(i.markerCluster):null,this.dataSource=i.dataSource?JSON.parse(i.dataSource):null,this.polygonDataSource=i.polygonDataSource?JSON.parse(i.polygonDataSource):null,this.shapeTranslatePoint=i.shapeTranslatePoint?i.shapeTranslatePoint:null,this.shapeBorderWidth=i.shapeBorderWidth,this.projectionType=i.projectionType,this.options=i,this.options.layerHighlightSettings=JSON.parse(this.options.layerHighlightSettings),this.options.markerHighlightSettings=JSON.parse(this.options.markerHighlightSettings),this.options.bubbleHighlightSettings=JSON.parse(this.options.bubbleHighlightSettings),this.options.navigationHighlightSettings=JSON.parse(this.options.navigationHighlightSettings),this.options.polygonHighlightSettings=JSON.parse(this.options.polygonHighlightSettings),this.options.selectionSettings=JSON.parse(this.options.selectionSettings),this.marginLeft=0,this.urlTemplate=i.urlTemplate?i.urlTemplate:null,this.isToolbarTooltip=!1,this.isTouch=!1,this.pinchFactor=1,this.lastScale=1,this.touchStartList=[],this.touchMoveList=[],this.dataId=e,window.sfBlazor.setCompInstance(this)}return r.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"wheel",this.mapMouseWheel.bind(this),this),sf.base.EventHandler.add(this.element,"touchmove mousemove",this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"touchend mouseup mouseleave",this.mouseUp.bind(this),this),sf.base.EventHandler.add(this.element,"touchstart mousedown",this.mouseDown.bind(this),this),sf.base.EventHandler.add(this.element,"click pointerdown",this.click.bind(this),this),sf.base.EventHandler.add(this.element,"dblclick",this.doubleClick.bind(this),this),sf.base.EventHandler.add(this.element,"contextmenu",this.rightClick.bind(this),this),sf.base.EventHandler.add(this.element,"keydown",this.keyDown.bind(this),this),sf.base.EventHandler.add(this.element,"keyup",this.keyUp.bind(this),this),window.addEventListener("resize",this.reSize.bind(this))},r.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"wheel",this.mapMouseWheel),sf.base.EventHandler.remove(this.element,"touchmove mousemove",this.mouseMove),sf.base.EventHandler.remove(this.element,"touchend mouseup mouseleave",this.mouseUp),sf.base.EventHandler.remove(this.element,"touchstart mousedown",this.mouseDown),sf.base.EventHandler.remove(this.element,"click pointerdown",this.click),sf.base.EventHandler.remove(this.element,"dblclick",this.doubleClick),sf.base.EventHandler.remove(this.element,"contextmenu",this.rightClick),sf.base.EventHandler.remove(this.element,"keydown",this.keyDown),sf.base.EventHandler.remove(this.element,"keyup",this.keyUp),window.removeEventListener("resize",this.reSize.bind(this))},r.prototype.destroy=function(){this.unwireEvents(),this.dotNetRef=null},r.prototype.keyUp=function(e){var t=e.target.id;if(this.options.enablePanning&&this.isPanning){this.isPanning=!1;var i=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(this.currentTiles)&&!sf.base.isNullOrUndefined(i)&&this.currentTiles.childElementCount!=i.childElementCount&&this.currentTiles.childElementCount<i.childElementCount)for(var n=i.childElementCount-1;n>=this.currentTiles.childElementCount;n--)i.removeChild(i.children[n]);this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1)}if("Tab"===e.code&&t.indexOf("_LayerIndex_")>-1){var s=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10);if(t.indexOf("shapeIndex")>-1){this.targetElementPath=e.target;var o=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10);t.indexOf("shapeIndex")>-1&&this.options.layerHighlightSettings[s]&&this.options.layerHighlightSettings[s].Enable&&(this.removeAllHighlight(),this.targetElementPath.classList.contains("mapShapeSelection")||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",s,o,t))}}},r.prototype.triggerEnableZoom=function(e,t,i){e>=1&&(this.scaleFactor=e,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerZoom",t,i))},r.prototype.keyDown=function(e){var t=1,i=e.type,n=e.target.id;this.isReset=!1;var s=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(s)&&(this.currentTiles=s.cloneNode(!0)),"+"===e.key||"Equal"===e.code)this.options.enableZoom&&(e.preventDefault(),this.mergeSeparation(),t=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(t,"ZoomIn",i));else if("-"===e.key||"Minus"===e.code)this.options.enableZoom&&(e.preventDefault(),this.mergeSeparation(),t=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,t=this.options.maxZoom>=t&&this.options.minZoom<=t?t:this.options.minZoom,this.factorCount++,this.triggerEnableZoom(t,"ZoomOut",i));else if(82===e.keyCode)this.options.enableZoom&&(e.preventDefault(),this.mergeSeparation(),this.zoomClick=!1,"Reset",this.enableSelectionZoom=!1,this.isReset=!0,this.scaleFactor=t=this.options.minZoom,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerZoom","Reset",i));else if("ArrowUp"!==e.code&&"ArrowDown"!==e.code||!this.options.enablePanning)if("ArrowLeft"!==e.code&&"ArrowRight"!==e.code||!this.options.enablePanning){if("Enter"===e.code)if(e.preventDefault(),(n.indexOf("_Left_Page_Rect")>-1||n.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var o=document.getElementById(this.id+"_Paging_Text").textContent,r=(o=o.trim().replace("\n","")).split("/").map(Number);n.indexOf("_Left_Page_Rect")>-1?document.getElementById(n).style.outlineColor=r[0]+1!=r[1]?"":"transparent":document.getElementById(n).style.outlineColor=r[0]!=r[1]+1?"":"transparent",this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",n.indexOf("_Left_Page_Rect")>-1?1:0)}else if(n.indexOf("_LayerIndex_")>-1&&n.indexOf("shapeIndex")>-1){var a=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);this.shapeSelection(n,a)}}else this.isPanning=!0,e.preventDefault(),this.mergeSeparation(),this.clientY=0,this.moveClientX=this.areaRect.width/7,this.panning("ArrowLeft"===e.code?-this.moveClientX:this.moveClientX,this.clientY,e.layerX,e.layerY,this.scaleFactor,!0),this.clientX=this.moveClientX;else this.isPanning=!0,e.preventDefault(),this.mergeSeparation(),this.moveClientY=this.areaRect.height/7,this.clientX=0,this.panning(this.clientX,"ArrowUp"===e.code?-this.moveClientY:this.moveClientY,e.layerX,e.layerY,this.scaleFactor,!0),this.clientY=this.moveClientY;this.setToolbarButtonColor(t,this.isReset?this.element.id+"_Zooming_":this.mouseMoveId),sf.base.Browser.isDevice||this.setToolbarButtonColor(t,this.mouseMoveId),this.clientX=this.moveClientX,this.clientY=this.moveClientY},r.prototype.shapeSelection=function(e,t){var i=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),n=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null;this.options.selectionSettings&&this.options.selectionSettings[t]&&this.options.selectionSettings[t].Enable&&this.removeAllHighlight(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("SelectMap",e,t,i,"Shape",n)},r.prototype.rightClick=function(e){var t=e.target.id,i=this.getMousePosition(e.pageX,e.pageY);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseClick",i.x,i.y,document.getElementById(t),e.layerX,e.layerY)},r.prototype.reSize=function(){var e,t,i,n,s;if(this.mergeSeparation(),null!==this.element){var o=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(o)){if(o.style.display="none",this.isTileMap){(i=document.getElementById(this.element.id+"_tile_parent")).style.display="none",(n=document.getElementById(this.element.id+"_Secondary_Element")).style.display="none";for(var r=0;r<this.element.children.length;r++)this.element.children[r].id===this.element.id+"_svg"&&(this.element.children[r].style.display="none",s=r)}var a=this.element.getBoundingClientRect();e=a.width,t=a.height,o.style.removeProperty("display"),sf.base.isNullOrUndefined(i)||(i.style.removeProperty("display"),n.style.removeProperty("display"),this.element.children[s].style.removeProperty("display"))}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResize",e,t))},r.prototype.doubleClick=function(e){if(!sf.base.isNullOrUndefined(this.dotNetRef)){if(2===e.detail&&this.options.enableZoom&&this.options.doubleClickZoom){var t=document.getElementById(this.id).getBoundingClientRect(),i=this.scaleFactor+1;i>=1&&(this.scaleFactor=i,this.removeCluster(),this.dotNetRef.invokeMethodAsync("MouseWheelZoom",e.pageX-t.x,e.pageY-t.y,e.which,"doubleClick"))}var n=e.target.id,s=this.getMousePosition(e.pageX,e.pageY);if("DoubleClick"===this.options.tooltipDisplayMode){var o=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);if(n.indexOf("shapeIndex")>-1){var r=parseInt(n.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,s.x,s.y,o,r,"Shape",0)}else if(n.indexOf("_MarkerIndex_")>-1&&-1===n.indexOf("_cluster_")){var a=parseInt(n.split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(n.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,s.x,s.y,o,l,"Marker",a)}else if(n.indexOf("_BubbleIndex_")>-1){a=parseInt(n.split("_BubbleIndex_")[1].split("_")[0],10),l=parseInt(n.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",n,s.x,s.y,o,l,"Bubble",a)}else-1===n.indexOf("_shapeIndex_")&&-1===n.indexOf("_MarkerIndex_")&&-1===n.indexOf("_BubbleIndex_")&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",s.x,s.y,0,0,"",0)}this.dotNetRef.invokeMethodAsync("TriggerDoubleClick",s.x,s.y,document.getElementById(n),e.layerX,e.layerY)}},r.prototype.mapMouseWheel=function(e){this.mergeSeparation();document.getElementById(this.element.id).getBoundingClientRect();var t=sf.base.isNullOrUndefined(e.wheelDelta)?-e.deltaY:e.wheelDelta,i="ZoomIn"===(t/120>0?"ZoomIn":"ZoomOut")?this.scaleFactor+1:this.scaleFactor-1,n=0==i;this.scaleFactor=i=this.options.maxZoom>=i&&this.options.minZoom<=i?i:i>this.options.maxZoom?this.options.maxZoom:this.options.minZoom,this.isReset=!1,this.setToolbarButtonColor(i,sf.base.Browser.isDevice?this.element.id+"_Zooming_":e.target.id);var s=this.getMousePosition(e.pageX,e.pageY);this.options.enableZoom&&this.options.enableMouseWheelZoom&&i>=1&&!n&&(e.preventDefault(),this.scaleFactor=i,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("MouseWheelZoom",s.x,s.y,t,"wheelZoom"))},r.prototype.getGeoLocation=function(e,t,i){var n=this.calculateFactor(i),s=this.shapeTranslatePoint.x*this.scaleFactor,o=this.shapeTranslatePoint.y*this.scaleFactor,r=Math.min(this.areaRect.height,this.areaRect.width)*n*this.scaleFactor,a=Math.min(Math.max(e-s,0),r-1)/r-.5,l=.5-Math.min(Math.max(t-o,0),r-1)/r;return{latitude:90-360*Math.atan(Math.exp(2*-l*Math.PI))/Math.PI,longitude:360*a}},r.prototype.getClickLocation=function(e,t){var i=null;if(!this.isTileMap&&"Normal"===this.geometryType[this.markerDragArgument.layerIndex]&&!sf.base.isNullOrUndefined(this.markerDragArgument)){var n=this.calculateFactor(this.markerDragArgument.layerIndex),s=document.getElementById(this.element.id+"_LayerIndex_"+this.markerDragArgument.layerIndex).getBoundingClientRect(),o={x:e+this.positionX>s.left?Math.abs(s.left-(e+this.positionX)):0,y:t+this.positionY>s.top?Math.abs(s.top-(t+this.positionY)):0},r=Math.abs(-this.baseMapBounds.longitudeMin*n),a=Math.abs(this.baseMapBounds.latitudeMax*n);i={latitude:Math.abs(this.baseMapBounds.latitudeMax-o.y/(n*this.scaleFactor)),longitude:Math.abs(o.x/(n*this.scaleFactor)+this.baseMapBounds.longitudeMin)},this.baseMapBounds.longitudeMin<0&&r>o.x&&(i.longitude=-i.longitude),this.baseMapBounds.latitudeMin<0&&a>o.y&&(i.latitude=-i.latitude)}return this.isTileMap?this.pointToLatLong(e-this.areaRect.x,t-this.areaRect.y):sf.base.isNullOrUndefined(i)?this.getGeoLocation(e,t,this.markerDragArgument.layerIndex):i},r.prototype.getMarkerClickLocation=function(e,t,i,n,s){var o=this.markerDragArgument,r=this.calculateFactor(o.layerIndex),a=document.getElementById(o.targetId);this.changeCursorPointer(o.targetId);var l=this.getClickLocation(e,t),h=this.isTileMap?this.convertTileLatLongToPoint({x:l.longitude,y:l.latitude},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(l.latitude,l.longitude,r,o.layerIndex),d=this.shapeTranslatePoint,c=this.isTileMap?h.x:(h.x+d.x)*this.scaleFactor,p=this.isTileMap?h.y:(h.y+d.y)*this.scaleFactor,u=this.markerSettings[o.layerIndex][o.markerIndex];if("Balloon"===this.dataSource[o.layerIndex][o.markerIndex][o.dataIndex][this.markerSettings[o.layerIndex][o.markerIndex].ShapeValuePath]||"Balloon"==u.Type?a.setAttribute("transform","translate( "+(c-u.Width/2)+" "+(p-u.Height)+" )scale("+u.Width/30+" "+u.Height/30+" )"):"Rectangle"===this.dataSource[o.layerIndex][o.markerIndex][o.dataIndex][this.markerSettings[o.layerIndex][o.markerIndex].ShapeValuePath]||"Rectangle"==u.Type?a.setAttribute("transform","translate( "+(c-u.Width/2)+" "+(p-u.Height/2)+" )"):a.setAttribute("transform","translate( "+c+" "+p+" )"),s){var f=this.getClickLocation(e-u.X,t-u.Y);this.dotNetRef.invokeMethodAsync("TriggerMarkerDragEnd",this.markerDragArgument.layerIndex,this.markerDragArgument.markerIndex,this.markerDragArgument.dataIndex,e,t,f.latitude,f.longitude)}},r.prototype.changeCursorPointer=function(e){if(e.indexOf("_MarkerIndex_")>-1&&e.indexOf("_LayerIndex_")>-1&&!(e.indexOf("cluster")>-1)){var t=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),i=parseInt(e.split("_MarkerIndex_")[1].split("_")[0],10);this.markerSettings[t][i].EnableDrag&&sf.base.isNullOrUndefined(this.markerDragArgument)?document.getElementById(this.element.id+"_svg").setAttribute("style","cursor: pointer"):this.markerSettings[t][i].EnableDrag&&!sf.base.isNullOrUndefined(this.markerDragArgument)?document.getElementById(this.element.id+"_svg").setAttribute("style","cursor: grabbing"):document.getElementById(this.element.id+"_svg").setAttribute("style","cursor: auto")}},r.prototype.mouseUp=function(e){var t,i,n=e.target.id,s=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,o=!1;this.lastScale=1,"touchend"===e.type?((n.indexOf("LayerIndex")>-1||this.options.enableZoom&&(this.options.enablePinchZooming||this.options.enablePanning||this.enableSelectionZoom)||!sf.base.isNullOrUndefined(this.markerDragArgument))&&e.preventDefault(),this.moveClientX=t=e.changedTouches[0].pageX,this.moveClientY=i=e.changedTouches[0].pageY,o=!0,this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[]):(this.moveClientX=e.pageX,this.moveClientY=e.pageY,t=e.layerX,i=e.layerY);var r=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=r.x,this.moveClientY=r.y;n.split("_")[0];if(this.options.doubleClickZoom&&"touchend"===e.type){this.tapCount=this.tapCount>1?0:this.tapCount+1;var a=this;sf.base.isNullOrUndefined(this.tapCountTimer)&&(this.tapCountTimer=setTimeout((function(){window.clearTimeout(a.tapCountTimer),a.tapCountTimer=null,a.tapCount=0}),1e3))}if(!(n.indexOf("_Zooming_")>-1)&&this.options.enableZoom&&!this.isPanning&&"mouseleave"!==e.type&&(this.options.zoomOnClick||this.options.doubleClickZoom&&"touchend"===e.type&&this.tapCount>1)&&!this.isPinch){this.tapCount=0;var l=this.scaleFactor+(this.isPinchZoomed?0:1);if(l>=1){this.scaleFactor=l,this.removeCluster();var h="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,d="touchend"===e.type?e.changedTouches[0].pageY:e.pageY,c=this.getMousePosition(h,d);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("MouseWheelZoom",c.x,c.y,"touchend"===e.type?1:e.which,this.options.zoomOnClick?"click":"doubleClick")}}if(this.allowPanning&&this.isPanning&&this.options.enablePanning||this.isPinchZoomed){var p=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&this.isPinchZoomed&&(p.style.removeProperty("transform"),this.scaleFactor=this.tileZoomLevel=Math.round(this.scaleFactor),this.getTileTranslatePosition(this.scaleFactor,this.scaleFactor,this.currentTouchCenter,null),this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers()),this.isTileMap&&!sf.base.isNullOrUndefined(this.currentTiles)&&!sf.base.isNullOrUndefined(p)&&this.currentTiles.childElementCount!=p.childElementCount&&this.currentTiles.childElementCount<p.childElementCount)for(var u=p.childElementCount-1;u>=this.currentTiles.childElementCount;u--)p.removeChild(p.children[u]);this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.isPinchZoomed||(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1),this.panComplete&&this.dotNetRef.invokeMethodAsync("TriggerPanningComplete",this.previousPoint.x,this.previousPoint.y,s.x,s.y,t,i,this.scaleFactor))}if(this.isPinchZoomed&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!0),this.pinchComplete&&this.dotNetRef.invokeMethodAsync("TriggerOnZoomComplete",s.x,s.y)),this.isPanning=!1,this.allowPanning=!1,this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick){this.svgCreated=!1,this.mouseClick=!1;var f=document.getElementById(this.element.id+"drawRect");if(f){f.remove(),this.mergeSeparation(),this.removeCluster();var g=0;if(this.height>0&&this.width>0){var m=this.element.getBoundingClientRect();this.isTileMap?(g=this.scaleFactor+Math.round(this.scaleFactor+(m.width/this.width+m.height/this.height)/2),g-=2):g=this.scaleFactor+Math.round((m.width/this.width+m.height/this.height)/2),this.scaleFactor=g}this.setToolbarButtonColor(this.scaleFactor,this.element.id+"_Zooming_"),g>=1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerZoomSelection",this.position.x,this.position.y,this.height,this.width)}}if(n.indexOf("_LayerIndex_")>-1){var v=void 0,b=void 0,y=void 0,C=void 0,w=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10);if(n.indexOf("shapeIndex")>-1&&this.shapeSelection(n,w),n.indexOf("_BubbleIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(b=parseInt(n.split("_BubbleIndex_")[1].split("_")[0],10),v=-1!==n.indexOf("_dataIndex_")?parseInt(n.split("_dataIndex_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,w,v,"Bubble",b)),n.indexOf("_NavigationIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(y=parseInt(n.split("_NavigationIndex_")[1].split("_")[0],10),v=-1!==n.indexOf("_Line_")?parseInt(n.split("_Line_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,w,v,"NavigationLine",y)),n.indexOf("_PolygonIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(C=parseInt(n.split("_PolygonIndex_")[1].split("_")[0],10),this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",n,w,C,"Polygon",C)),o&&n.indexOf("MarkerIndex")>-1&&!(n.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var M=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10),S=parseInt(n.split("_MarkerIndex_")[1].split("_")[0],10);v=parseInt(n.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",M,S,v,t,i,o)}}var x=document.getElementById(this.element.id+"_AnnotationGroup"),N=!sf.base.isNullOrUndefined(x)&&x.contains(e.target);n.indexOf("_Zooming_")>-1||!sf.base.isNullOrUndefined(this.markerDragArgument)||"mouseleave"===e.type||this.isPinchZoomed||!this.element.contains(e.target)||sf.base.isNullOrUndefined(this.dotNetRef)||N||this.dotNetRef.invokeMethodAsync("TriggerClickEventArgs",!1,r.x,r.y,this.getDomObject("Target",document.getElementById(n)),!sf.base.isNullOrUndefined(this.isTileMap)&&this.isTileMap),sf.base.isNullOrUndefined(this.markerDragArgument)||"mouseleave"===e.type||(this.getMarkerClickLocation(this.moveClientX,this.moveClientY,t,i,!0),this.dotNetRef.invokeMethodAsync("TriggerMouseMove",this.markerDragArgument.layerIndex,this.markerDragArgument.markerIndex,this.markerDragArgument.dataIndex,n,this.moveClientX,this.moveClientY,n.indexOf("cluster")>-1?"cluster":"marker",o,!1,!1,t,i),this.markerDragArgument=null,this.changeCursorPointer(n),this.isMarkerDrag=!0),(sf.base.Browser.isDevice||n.indexOf("Reset")>-1)&&(this.enableSelectionZoom=!(n.indexOf("Reset")>-1)&&this.enableSelectionZoom,this.isReset=n.indexOf("Reset")>-1,this.setToolbarButtonColor(n.indexOf("Reset")>-1?this.options.minZoom:this.scaleFactor,this.element.id+"_Zooming_")),this.isPinchZoomed=!1},r.prototype.getDomObject=function(e,t){return null!=t?window.sfBlazor.getDomObject(e,t):null},r.prototype.targetTouches=function(e){for(var t=[],i=0;i<e.length;i++)t.push({pageX:e[i].pageX,pageY:e[i].pageY});return t},r.prototype.mouseMove=function(e){var t,n,s=e.target.id;this.mouseMoveId=s,this.moveClientX=e.pageX,this.moveClientY=e.pageY;var o,r,a=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,l=!1;"touchmove"===e.type?(this.moveClientX=o=e.touches[0].pageX,this.moveClientY=r=e.touches[0].pageY,2===e.touches.length&&(this.touchMoveList=this.targetTouches(e.touches)),(this.options.enableZoom&&(this.options.enablePinchZooming||this.options.enablePanning||this.enableSelectionZoom)||!sf.base.isNullOrUndefined(this.markerDragArgument))&&e.preventDefault(),t=0,n=0,l=!0):(this.moveClientX=e.pageX,this.moveClientY=e.pageY,o=e.clientX,r=e.clientY,t=e.layerX,n=e.layerY),this.tooltipVisiblityChange(),this.setToolbarButtonColor(this.scaleFactor,s),this.renderInteractiveLegend(s,e);var h=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=h.x,this.moveClientY=h.y;var d=s.split("_")[0];if(-1==s.indexOf("_MapAreaBorder")?this.highlightMap(e):this.removeAllHighlight(),this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick&&this.options.maxZoom>this.options.factor&&this.enableSelectionZoom){e.preventDefault(),this.svgCreated||(this.startValue=this.svgPoint(this.svg,o,r),this.svgCreated=!0),this.position=this.svgPoint(this.svg,o,r);var c=document.getElementById(this.element.id).getBoundingClientRect();this.width=Math.abs(this.position.x-this.startValue.x),this.height=Math.abs(this.position.y-this.startValue.y),this.position.x>this.startValue.x&&(this.position.x=this.startValue.x),this.position.y>this.startValue.y&&(this.position.y=this.startValue.y),this.position.x=this.position.x-c.x,this.position.y=this.position.y-c.y,i.setAttributeNS(null,"x",this.position.x.toString()),i.setAttributeNS(null,"y",this.position.y.toString()),i.setAttributeNS(null,"id",this.element.id+"drawRect"),i.setAttributeNS(null,"width",this.width.toString()),i.setAttributeNS(null,"height",this.height.toString()),i.setAttributeNS(null,"fill",this.options.rectangleZoomFillColor),i.setAttributeNS(null,"stroke-dasharray","3"),i.setAttributeNS(null,"opacity",this.options.rectangleZoomFillOpacity.toString()),i.setAttributeNS(null,"stroke",this.options.rectangleZoomBorderColor),null!==document.getElementById(this.element.id+"_tile_parent")?document.getElementById(this.element.id+"_LayerCollections").parentNode.appendChild(i):document.getElementById(this.element.id+"_svg").appendChild(i)}if(this.isPinch=!1,this.options.enableZoom&&this.options.enablePinchZooming&&this.touchMoveList.length>=2&&this.touchStartList.length>=2&&(this.isPinchZoomed=this.isPinch=!0,this.pinchComplete||this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerOnZoom",a.x,a.y),this.pinchZooming(e),this.pinchComplete=!0),sf.base.isNullOrUndefined(this.markerDragArgument)&&this.allowPanning&&this.options.enablePanning&&(this.clientX!==this.moveClientX||this.clientY!==this.moveClientY)&&!this.isPinchZoomed){if(this.isPanning=!0,!this.isTileMap){for(var p=document.getElementById(this.element.id+"_LayerCollections"),u=0;u<p.children.length;u++)for(var f=0;f<p.children[u].childElementCount;f++)if(p.children[u].children[f].id.indexOf("Polygon_Group")>-1){this.scaleFactor=p.children[u].children[f].transform.baseVal[0].matrix.a;break}if(this.clientX!==this.moveClientX&&this.clientY!==this.moveClientY){var g=this.clientX-this.moveClientX,m=this.clientY-this.moveClientY,v=a.x-g/this.scaleFactor,b=a.y-m/this.scaleFactor;this.panComplete||this.pinchComplete||sf.base.isNullOrUndefined(this.dotNetRef)||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerPanning",a.x,a.y,v,b,t,n,this.scaleFactor)),this.panning(g,m,t,n,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(s.indexOf(d)>-1)if(null!==(p=document.getElementById(e.currentTarget.id+"_animated_tiles"))){this.isTileMap=!0,this.scaleFactor=parseInt(p.className,10);g=this.clientX-this.moveClientX,m=this.clientY-this.moveClientY;this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||2===this.touchMoveList.length||2===this.touchStartList.length||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerTilePanning",this.previousPoint.x,this.previousPoint.y,a.x,a.y,t,n,this.scaleFactor)),this.panning(g,m,t,n,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(!sf.base.isNullOrUndefined(this.dotNetRef)){if(!(this.allowPanning||this.mouseClick&&this.zoomClick)&&s.indexOf("shapeIndex")>-1&&"MouseMove"===this.options.tooltipDisplayMode){var y=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),C=parseInt(s.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,h.x,h.y,y,C,"Shape",0)}if((""===s||-1===s.indexOf(this.element.id))&&!sf.base.isNullOrUndefined(e.target.offsetParent)){var w=e.target.offsetParent.id;s=w.indexOf("_MarkerIndex_")>-1?w:s}if((s.indexOf("_MapAreaBorder")>-1||s.indexOf("_MapMargin")>-1||""==s||s.indexOf("_svg")>-1||this.isToolbarTooltip&&s.indexOf("_Zooming_ToolBar_")>-1)&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",h.x,h.y,0,0,"",0),this.isToolbarTooltip=!1,s.indexOf("_Zooming_ToolBar_")>-1){this.isToolbarTooltip=!0;var M=s.split("_Zooming_ToolBar_")[1].split("_")[0];this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,h.x,h.y,0,0,M,0)}if(this.renderTitleTooltip(s,h,e),this.renderLegendTitleTooltip(s,h,e),this.renderLegendTextTooltip(s,h,e),!this.isMarkerDrag&&s.indexOf("_LayerIndex_")>-1&&s.indexOf("_MarkerIndex_")>-1||l&&s.indexOf("MarkerIndex")>-1&&!(s.indexOf("cluster")>-1)){y=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10);var S=parseInt(s.split("_MarkerIndex_")[1].split("_")[0],10),x=parseInt(s.split("_dataIndex_")[1].split("_")[0],10);this.changeCursorPointer(s),this.dotNetRef.invokeMethodAsync("TriggerMouseMove",y,S,x,s,h.x,h.y,s.indexOf("cluster")>-1?"cluster":"marker",l,!sf.base.isNullOrUndefined(this.markerDragArgument),!0,t,n)}if(this.isMarkerDrag=!1,s.indexOf("_LayerIndex_")>-1&&s.indexOf("_BubbleIndex_")>-1){y=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),S=parseInt(s.split("_BubbleIndex_")[1].split("_")[0],10),x=parseInt(s.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerBubbleMouseMove",y,S,x,s,h.x,h.y,t,n)}if(this.previousMarkerId.indexOf("_MarkerIndex_")>-1&&this.previousMarkerId!=s){y=parseInt(this.previousMarkerId.split("_LayerIndex_")[1].split("_")[0],10),S=parseInt(this.previousMarkerId.split("_MarkerIndex_")[1].split("_")[0],10),x=parseInt(this.previousMarkerId.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",y,S,x,t,n,l)}}sf.base.isNullOrUndefined(this.markerDragArgument)?s.indexOf("MarkerIndex")>-1||document.getElementById(this.element.id+"_svg").setAttribute("style","cursor: auto"):(this.getMarkerClickLocation(this.moveClientX,this.moveClientY,t,n,!1),this.changeCursorPointer(s)),this.previousMarkerId=s.indexOf("MarkerIndex")>-1&&!(s.indexOf("cluster")>-1)?s:""},r.prototype.removeInteractiveLegend=function(){var e=document.getElementById(this.element.id+"_Interactive_Legend_Group");null!==e&&e.setAttribute("style","display: none;")},r.prototype.renderInteractiveLegend=function(e,t){var i=this;if(!sf.base.isNullOrUndefined(this.legendSettings)&&"Interactive"===this.legendSettings.mode&&e.indexOf("_LayerIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var n=document.getElementById(t.target.id).getAttribute("fill");if(e.indexOf("_shapeIndex")>-1&&"Layers"===this.legendSettings.type){var s=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10);document.getElementById(e);clearTimeout(this.arrowCountTimer),this.renderInteractive(n,s,o,0),"touch"===t.pointerType&&(this.arrowCountTimer=setTimeout((function(){i.removeInteractiveLegend()}),1500))}else if(e.indexOf("_MarkerIndex_")>-1&&"Markers"===this.legendSettings.type){s=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10);var r=parseInt(e.split("_MarkerIndex_")[1].split("_")[0],10),a=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null;clearTimeout(this.arrowCountTimer),this.renderInteractive(n,s,r,a),"touch"===t.pointerType&&(this.arrowCountTimer=setTimeout((function(){i.removeInteractiveLegend()}),1500))}else if(e.indexOf("_BubbleIndex_")>-1&&"Bubbles"===this.legendSettings.type){s=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10);var l=parseInt(e.split("_BubbleIndex_")[1].split("_")[0],10);a=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null;clearTimeout(this.arrowCountTimer),this.renderInteractive(n,s,l,a),"touch"===t.pointerType&&(this.arrowCountTimer=setTimeout((function(){i.removeInteractiveLegend()}),1500))}else this.removeInteractiveLegend()}else sf.base.isNullOrUndefined(this.legendSettings)||"Interactive"!==this.legendSettings.mode||sf.base.isNullOrUndefined(this.dotNetRef)||this.removeInteractiveLegend()},r.prototype.renderInteractive=function(e,t,i,n){for(var s=0;s<this.legendDetails.length;s++){for(var o=!1,r=0;r<this.legendDetails[s].length;r++){var a=this.legendDetails[s][r];if("Bubbles"===this.legendSettings.type&&parseInt(a.layerIndex)===t&&parseInt(a.dataIndex)===n||"Markers"===this.legendSettings.type&&parseInt(a.layerIndex)===t&&parseInt(a.dataIndex)===n&&parseInt(a.settingIndex)===i||"Layers"===this.legendSettings.type&&parseInt(a.layerIndex)===t&&parseInt(a.settingIndex)===i){var l=this.getLegendRect(this.legendShapeCollection[s].ShapeId);sf.base.isNullOrUndefined(l)||this.renderInteractivePointer(e,l),o=!0;break}this.removeInteractiveLegend()}if(o)break}},r.prototype.getLegendRect=function(e){var t=document.getElementById(e).getBoundingClientRect(),i=e.split("_Legend_")[0],n=document.getElementById(i).getBoundingClientRect();return{x:t.left-n.left,y:t.top-n.top,width:t.width,height:t.height}},r.prototype.renderInteractivePointer=function(e,t){var i,n,o,r="None"===this.legendSettings.orientation?"Top"===this.legendSettings.position||"Bottom"===this.legendSettings.position?"Horizontal":"Vertical":this.legendSettings.orientation;if(t.y="Float"===this.legendSettings.position&&this.isTileMap?t.y-this.baseMapBounds.mapsAreaRect.y:t.y,"Horizontal"===r){n=t.x+t.width/2-("Float"===this.legendSettings.position&&this.isTileMap?this.baseMapBounds.mapsAreaRect.y:0);var a=0;a="False"===this.legendSettings.invertedPointer?(o=t.y)-10:(o=t.y+t.height)+10,i=this.createInteractiveArrow(n,o,10,10,0,a,!0)}else{o=t.y+t.height/2;var l=0;l="False"===this.legendSettings.invertedPointer?(n=t.x+t.width-("Float"===this.legendSettings.position&&this.isTileMap?this.baseMapBounds.mapsAreaRect.x:0))+10:(n=t.x-("Float"===this.legendSettings.position&&this.isTileMap?this.baseMapBounds.mapsAreaRect.x:0))-10,i=this.createInteractiveArrow(n,o,10,10,l,0,!1)}var h={d:i,id:this.element.id+"_Interactive_Legend",fill:e,stroke:"#000000",opacity:1,strokeWidth:0},d=document.getElementById(this.element.id+"_Interactive_Legend_Group");null===d&&(d=s(this.element.id+"_Interactive_Legend_Group")),d.setAttribute("style","display: block;");var c=this.drawPath(h),p=document.getElementById(this.element.id+"_svg");d.appendChild(c),p.appendChild(d)},r.prototype.createInteractiveArrow=function(e,t,i,n,s,o,r){return"M "+e+" "+t+" L "+(r?e-i:s)+" "+(r?o:t-n)+" L "+(r?e+i:s)+" "+(r?o:t+n)+" Z"},r.prototype.renderTitleTooltip=function(e,t,i){var n=this;e===this.element.id+"_Map_title"&&i.target.textContent.indexOf("...")>-1&&!this.isPanning&&(clearTimeout(this.tooltipCountTimer),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","_Map_title",t.x,t.y,0,0,"Title",0),"touch"===i.pointerType&&(this.tooltipCountTimer=setTimeout((function(){n.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",t.x,t.y,0,0,"",0)}),1500)))},r.prototype.renderLegendTitleTooltip=function(e,t,i){var n=this;e===this.element.id+"_LegendTitle"&&i.target.textContent.indexOf("...")>-1&&!this.isPanning&&(clearTimeout(this.tooltipCountTimer),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","_LegendTitle",t.x,t.y,0,0,"LegendTitle",0),"touch"===i.pointerType&&(this.tooltipCountTimer=setTimeout((function(){n.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",t.x,t.y,0,0,"",0)}),1500)))},r.prototype.renderLegendTextTooltip=function(e,t,i){var n=this;e.indexOf("_Legend_Text_Index_")>-1&&i.target.textContent.indexOf("...")>-1&&!this.isPanning&&(clearTimeout(this.tooltipCountTimer),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","_LegendText_",t.x,t.y,0,parseInt(e.split("_Legend_Text_Index_")[1]),"LegendText",0),"touch"===i.pointerType&&(this.tooltipCountTimer=setTimeout((function(){n.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",t.x,t.y,0,0,"",0)}),1500)))},r.prototype.tooltipVisiblityChange=function(){if(sf.base.Browser.isDevice){var e=this;window.clearTimeout(e.tooltipCountTimer),this.tooltipCountTimer=setTimeout((function(){e.tooltipCountTimer=null,document.getElementById(e.element.id+"_Tooltip")&&(document.getElementById(e.element.id+"_Tooltip").style.visibility="hidden")}),2e3)}},r.prototype.mouseDown=function(e){this.isPinch=!1;var t=e.target.id,i=this.options.factor+(t.indexOf("_ZoomIn_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect").getAttribute("stroke-opacity")?1:0)+(t.indexOf("_ZoomOut_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect").getAttribute("stroke-opacity")?-1:0);i=t.indexOf("_Reset_")>1?this.options.minZoom:i,this.isPinchZoomed=!1,this.isTouch=!1,this.panComplete=!1,this.pinchComplete=!1,this.currentTiles=null,this.isReset=!1;var n=document.getElementById(this.element.id+"_animated_tiles");this.isTileMap&&!sf.base.isNullOrUndefined(n)&&(this.currentTiles=n.cloneNode(!0)),"touchstart"===e.type?(this.options.enableZoom&&(this.options.enablePinchZooming||this.options.enablePanning||this.enableSelectionZoom||!sf.base.isNullOrUndefined(this.markerDragArgument))&&e.preventDefault(),this.clientX=e.touches[0].pageX,this.clientY=e.touches[0].pageY,2===e.touches.length&&(this.touchStartList=this.targetTouches(e.touches)),this.isTouch=!0):(this.clientX=e.pageX,this.clientY=e.pageY),this.tooltipVisiblityChange();var s=this.getMousePosition(this.clientX,this.clientY);if(this.clientX=s.x,this.clientY=s.y,this.options.enableZoom&&this.options.enableSelectionZooming&&this.zoomClick&&(this.mouseClick=!0,e.preventDefault()),this.mouseClick||-1!==t.indexOf("ToolBar_Pan")||(t.indexOf("_MapAreaBorder")>-1&&this.options.enablePanning&&(this.allowPanning=!0),!this.enableSelectionZoom&&t.indexOf("")>-1&&!(t.indexOf("Zooming")>-1)&&this.options.enablePanning&&(this.allowPanning=!0)),t.indexOf("MarkerIndex")>-1&&!(t.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var o=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),a=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),l=!1;!sf.base.isNullOrUndefined(this.clusterData)&&this.clusterData.length>0&&(l=this.clusterData[0].data.filter((function(e){return e.index==a})).length>0&&this.clusterData[0].layerIndex===o&&this.clusterData[0].markerIndex===r),this.markerSettings[o][r].EnableDrag&&!l&&(this.markerDragArgument={layerIndex:o,markerIndex:r,dataIndex:a,latitude:this.dataSource[o][r][a].Latitude,longitude:this.dataSource[o][r][a].Longitude,targetId:t},this.allowMarkerDragStartEvent&&this.dotNetRef.invokeMethodAsync("TriggerMarkerDragStart",o,r,a,this.clientX,this.clientY))}-1==t.indexOf("Reset")&&this.setToolbarButtonColor(i,t),t.indexOf("_Zoom_")>-1&&this.options.enableSelectionZooming&&i>this.options.max?(this.removeZoomColor(this.toolbarSelection),this.removePanColor(this.toolbarColor)):t.indexOf("_Pan_")>-1&&this.options.enablePanning&&!this.options.isTileMap&&i>1&&(this.removeZoomColor(this.toolbarColor),this.removePanColor(this.toolbarSelection))},r.prototype.removeToolbarClass=function(e,t,i,n,s){this.getElementByID(this.element.id+"_Zooming_KitCollection")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",t),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",i),document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class",s),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",n))},r.prototype.setOpacity=function(e,t,i,n){this.getElementByID(this.element.id+e)&&(this.getElementByID(this.element.id+e).setAttribute("stroke-opacity",i.toString()),this.getElementByID(this.element.id+e).setAttribute("fill-opacity",i.toString()),this.getElementByID(this.element.id+t).setAttribute("stroke-opacity",n.toString()),this.getElementByID(this.element.id+t).setAttribute("fill-opacity",n.toString()))},r.prototype.removeZoomOpacity=function(e,t,i,n,s,o,r,a,l,h){this.setOpacity("_Zooming_ToolBar_Zoom_Rect","_Zooming_ToolBar_Zoom_Path",t,e),this.setOpacity("_Zooming_ToolBar_ZoomIn_Rect","_Zooming_ToolBar_ZoomIn_Path",n,i),this.setOpacity("_Zooming_ToolBar_ZoomOut_Rect","_Zooming_ToolBar_ZoomOut_Path",o,s),this.setOpacity("_Zooming_ToolBar_Pan_Rect","_Zooming_ToolBar_Pan_Path",a,r),this.setOpacity("_Zooming_ToolBar_Reset_Rect","_Zooming_ToolBar_Reset_Path",h,l)},r.prototype.getElementByID=function(e){return document.getElementById(e)},r.prototype.setToolbarButtonColor=function(e,t){if(document.getElementById(this.element.id+"_Zooming_KitCollection")&&t.indexOf(this.element.id+"_Zooming_")>-1&&this.options.enableZoom){document.getElementById(this.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"),sf.base.Browser.isDevice?this.removeToolbarClass("","","","",""):this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","e-maps-toolbar",this.options.enablePanning?"e-maps-toolbar":"","e-maps-toolbar");var i=this.toolbarShapeOpacity,n=this.toolbarButtonOpacity;this.isTileMap&&e<=1.2?(sf.base.Browser.isDevice||this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","",this.options.enablePanning?"e-maps-toolbar":"",""),this.options.enablePanning&&this.removePanColor(this.toolbarSelection),this.enableSelectionZoom&&this.options.enableSelectionZooming&&!this.isReset&&(this.removeZoomColor(this.toolbarSelection),this.removePanColor(this.toolbarColor)),this.isReset&&(this.removeZoomColor(this.toolbarColor),this.removePanColor(this.toolbarSelection)),this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?n:.3,i,n,.3,.3,this.options.enablePanning?i:.3,this.options.enablePanning?n:.3,.3,.3)):e<=1.2?(sf.base.Browser.isDevice||this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","","",""),!this.enableSelectionZoom&&this.options.enablePanning&&this.removePanColor(this.toolbarColor),this.enableSelectionZoom&&this.options.enableSelectionZooming&&!this.isReset&&(this.removeZoomColor(this.toolbarSelection),this.removePanColor(this.toolbarColor)),this.isReset&&this.removeZoomColor(this.toolbarColor),this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?n:.3,i,n,.3,.3,.3,.3,.3,.3)):e<this.options.maxZoom?(sf.base.Browser.isDevice||this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","e-maps-toolbar",this.options.enablePanning?"e-maps-toolbar":"","e-maps-toolbar"),this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?n:.3,i,n,i,n,this.options.enablePanning?i:.3,this.options.enablePanning?n:.3,i,n),(this.isReset||e===this.options.minZoom)&&(this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?n:.3,i,n,.3,.3,this.options.enablePanning?i:.3,this.options.enablePanning?n:.3,.3,.3),this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","",this.options.enablePanning?"e-maps-toolbar":"","")),this.enableSelectionZoom&&this.options.enableSelectionZooming?(this.removeZoomColor(this.toolbarSelection),this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarColor)):!this.enableSelectionZoom&&this.options.enablePanning&&(this.removePanColor(this.toolbarSelection),this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarColor))):(sf.base.Browser.isDevice||this.removeToolbarClass("","","e-maps-toolbar",this.options.enablePanning?"e-maps-toolbar":"","e-maps-toolbar"),this.removeZoomOpacity(.3,.3,.3,.3,i,n,this.options.enablePanning?i:.3,this.options.enablePanning?n:.3,i,n),this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarColor),!this.enableSelectionZoom&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection))}else sf.base.Browser.isDevice||(this.removePanColor(this.toolbarColor),this.removeZoomColor(this.toolbarColor),this.removeZoomOpacity(1,1,1,1,1,1,1,1,1,1),document.getElementById(this.element.id+"_Zooming_KitCollection")&&document.getElementById(this.element.id+"_Zooming_KitCollection").setAttribute("opacity","0.3"))},r.prototype.pinchZooming=function(e){this.pinchFactor=this.scaleFactor;var t=this.scaleFactor,i=this.getBound(this.element.id);if(this.isTileMap){a=this.getTouchCenterPoint();var n=Math.sqrt(Math.pow(this.touchMoveList[0].pageX-this.touchMoveList[1].pageX,2)+Math.pow(this.touchMoveList[0].pageY-this.touchMoveList[1].pageY,2)),s=this.pinchFactor;sf.base.isNullOrUndefined(this.pinchDistance)||(this.pinchDistance>n?s-=1:this.pinchDistance<n&&(s+=1),(s=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,s)))!=this.pinchFactor&&(this.pinchFactor=s,this.tileZoomLevel=this.pinchFactor,this.scaleFactor=this.pinchFactor,this.currentTouchCenter=a,this.getTileTranslatePosition(t,this.pinchFactor,{x:a.x,y:a.y},null),this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers(),this.clusterMarkerProcess())),this.pinchDistance=n}else{var o=this.areaRect;this.previousScale=this.scaleFactor,this.previousPoint=this.shapeTranslatePoint;this.tileTranslatePoint;var r=this.calculateScale(this.touchStartList,this.touchMoveList),a=this.getTouchCenter(this.touchMoveList),l=r/this.lastScale;this.lastScale=r,this.pinchFactor*=l,this.pinchFactor=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,this.pinchFactor));var h=Math.abs(this.baseMapBounds.minBounds.x-this.baseMapBounds.maxBounds.x),d=Math.abs(this.baseMapBounds.minBounds.y-this.baseMapBounds.maxBounds.y),c=Math.abs(this.baseMapBounds.maxBounds.y-this.baseMapBounds.minBounds.y)*this.pinchFactor,p=this.shapeTranslatePoint.x-(o.width/this.scaleFactor-o.width/this.pinchFactor)/(o.width/(a.x-i.x)),u=this.shapeTranslatePoint.y-(o.height/this.scaleFactor-o.height/this.pinchFactor)/(o.height/(a.y-i.y));p=c<this.areaRect.height&&!sf.base.Browser.isDevice?o.x+(-this.baseMapBounds.minBounds.x+(o.width/2-h/2)):p,u=c<this.areaRect.height&&!sf.base.Browser.isDevice?o.y+(-this.baseMapBounds.minBounds.y+(o.height/2-d/2)):u,this.scaleFactor=this.pinchFactor,this.shapeTranslatePoint={x:p,y:u},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)}},r.prototype.removePanColor=function(e){document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&this.options.enablePanning&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",e))},r.prototype.removeZoomColor=function(e){document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&this.options.enableSelectionZooming&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",e))},r.prototype.getTileTranslatePosition=function(e,t,i,n){var s=256*Math.pow(2,e),o=256*Math.pow(2,t),r=(i.x-this.tileTranslatePoint.x)/s*100,a=(i.y-this.tileTranslatePoint.y)/s*100,l=this.baseMapBounds.availableSize;this.tileTranslatePoint.x=1===t?l.width/2-256:i.x-r*o/100,this.tileTranslatePoint.y=1===t?l.height/2-256:i.y-a*o/100},r.prototype.calculateScale=function(e,t){var i=this.getDistance(e[0],e[1]);return this.getDistance(t[0],t[1])/i},r.prototype.getDistance=function(e,t){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},r.prototype.sum=function(e,t){return e+t},r.prototype.getTouchCenter=function(e){return{x:e.map((function(e){return e.pageX})).reduce(this.sum)/e.length,y:e.map((function(e){return e.pageY})).reduce(this.sum)/e.length}},r.prototype.getTouchCenterPoint=function(){for(var e=[],t=0;t<this.touchMoveList.length;t++)e.push(this.getMousePosition(this.touchMoveList[t].pageX,this.touchMoveList[t].pageY));return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}},r.prototype.highlightMap=function(e){var t=e.target,i=t.id;if(t.classList.contains("highlightLine")||t.classList.contains("highlightShape")||t.classList.contains("highlightMarker")||t.classList.contains("highlightBubble")||t.classList.contains("highlightNavigation")||t.classList.contains("highlightPolygon")||this.removeAllHighlight(),this.targetElementPath=t,i.indexOf("_LayerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var n=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),s=i.indexOf("_dataIndex_")>-1?parseInt(i.split("_dataIndex_")[1].split("_")[0],10):0;if(i.indexOf("shapeIndex")>-1&&-1==i.indexOf("LabelIndex_")&&this.options.layerHighlightSettings[n]&&this.options.layerHighlightSettings[n].Enable){if(!t.classList.contains("mapShapeSelection")){var o=parseInt(i.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",n,o,i)}}else if(i.indexOf("_BubbleIndex_")>-1){var r=parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10);this.options.bubbleHighlightSettings[n][r]&&this.options.bubbleHighlightSettings[n][r].Enable&&!t.classList.contains("mapBubbleSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Bubble",n,r,s,i)}else if(i.indexOf("_NavigationIndex_")>-1){var a=parseInt(i.split("_NavigationIndex_")[1].split("_")[0],10);this.options.navigationHighlightSettings[n][a]&&this.options.navigationHighlightSettings[n][a].Enable&&!t.classList.contains("mapNavigationSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Navigation",n,a,0,i)}else if(i.indexOf("_PolygonIndex_")>-1){var l=parseInt(i.split("_PolygonIndex_")[1].split("_")[0],10);this.options.polygonHighlightSettings[n]&&this.options.polygonHighlightSettings[n].Enable&&!t.classList.contains("mapPolygonSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Polygon",n,l,0,i)}else if(i.indexOf("_MarkerIndex_")>-1&&-1===i.indexOf("_cluster_")&&!(i.indexOf("markerClusterConnectorLine")>-1)){var h=parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10);this.options.markerHighlightSettings[n][h]&&this.options.markerHighlightSettings[n][h].Enable&&!t.classList.contains("mapMarkerSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Marker",n,h,s,i)}}else if(i.indexOf("_Legend_Shape_")>-1){var d=parseInt(i.split("_Index_")[1],10),c=this.legendDetails[d];if("Layers"===this.legendSettings.type){if(!t.classList.contains("mapShapeSelection"))for(var p=0;p<c.length;p++)if(this.options.layerHighlightSettings[c[p].layerIndex]&&!sf.base.isNullOrUndefined(this.options.layerHighlightSettings[c[p].layerIndex])&&this.options.layerHighlightSettings[c[p].layerIndex].Enable){t.classList.add("highlightShape");var u=document.getElementById(this.element.id+"_LayerIndex_"+c[p].layerIndex+"_shapeIndex_"+c[p].settingIndex);this.handleHighlight(u,"Shape",this.options.layerHighlightSettings[c[p].layerIndex])}}else if("Markers"===this.legendSettings.type){if(!t.classList.contains("mapMarkerSelection"))for(p=0;p<c.length;p++)if(this.options.markerHighlightSettings[c[p].layerIndex]&&!sf.base.isNullOrUndefined(this.options.markerHighlightSettings[c[p].layerIndex][c[p].settingIndex])&&this.options.markerHighlightSettings[c[p].layerIndex][c[p].settingIndex].Enable){t.classList.add("highlightMarker");u=document.getElementById(this.element.id+"_LayerIndex_"+c[p].layerIndex+"_MarkerIndex_"+c[p].settingIndex+"_dataIndex_"+c[p].dataIndex);this.handleHighlight(u,"Marker",this.options.markerHighlightSettings[c[p].layerIndex][c[p].settingIndex])}}else if("Bubbles"===this.legendSettings.type&&!t.classList.contains("mapBubbleSelection"))for(p=0;p<c.length;p++)if(this.options.bubbleHighlightSettings[c[p].layerIndex]&&!sf.base.isNullOrUndefined(this.options.bubbleHighlightSettings[c[p].layerIndex][c[p].settingIndex])&&this.options.bubbleHighlightSettings[c[p].layerIndex][c[p].settingIndex].Enable){t.classList.add("highlightBubble");u=document.getElementById(this.element.id+"_LayerIndex_"+c[p].layerIndex+"_BubbleIndex_"+c[p].settingIndex+"_dataIndex_"+c[p].dataIndex);this.handleHighlight(u,"Bubble",this.options.bubbleHighlightSettings[c[p].layerIndex][c[p].settingIndex])}}},r.prototype.removeAllHighlight=function(){this.removeHighlight("Shape"),this.removeHighlight("Line"),this.removeHighlight("Marker"),this.removeHighlight("Bubble"),this.removeHighlight("Navigation"),this.removeHighlight("Polygon")},r.prototype.handleHighlight=function(e,t,i){if(("Marker"===t||"Bubble"===t||"Shape"===t)&&!sf.base.isNullOrUndefined(this.legendDetails)&&0!==this.legendDetails.length)for(var n=0;n<this.legendDetails.length;n++)for(var s=0;s<this.legendDetails[n].length;s++)if("Marker"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][s].layerIndex+"_MarkerIndex_"+this.legendDetails[n][s].settingIndex+"_dataIndex_"+this.legendDetails[n][s].dataIndex||"Bubble"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][s].layerIndex+"_BubbleIndex_"+this.legendDetails[n][s].settingIndex+"_dataIndex_"+this.legendDetails[n][s].dataIndex||"Shape"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[n][s].layerIndex+"_shapeIndex_"+this.legendDetails[n][s].settingIndex){document.getElementById(this.element.id+"_Legend_Shape_Index_"+n).classList.add("highlight"+t);break}if("Arrow"!==t){var o=!sf.base.isNullOrUndefined(e.getAttribute("data-geometry"))&&e.getAttribute("data-geometry").indexOf("LineString")>-1?"Line":t;("Bubble"===o&&e.id.indexOf("_BubbleIndex_")>-1&&i.Enable||"Marker"===o&&e.id.indexOf("_MarkerIndex_")>-1&&i.Enable||("Shape"===o||"Line"===o)&&e.id.indexOf("_shapeIndex_")>-1&&i.Enable||"Navigation"===o&&e.id.indexOf("_NavigationIndex_")>-1&&i.Enable||"Polygon"===o&&e.id.indexOf("_PolygonIndex_")>-1&&i.Enable)&&(e.classList.add("highlight"+o),null!==document.querySelector("#highlight"+o+"Style")&&0!==document.querySelector("#highlight"+o+"Style").length?this.customizeStyle("highlight"+o+"Style","highlight"+o,i,e.id):this.createStyle("highlight"+o+"Style","highlight"+o,i,e.id))}else e.setAttribute("fill",i.Fill),e.setAttribute("fill-opacity",i.opacity),e.setAttribute("stroke-opacity",i.BorderOpacity)},r.prototype.removeHighlight=function(e){var t=document.querySelectorAll(".highlight"+e);if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i].classList.remove("highlight"+e),"Navigation"===e&&""!==t[i].id&&(""!==t[i].getAttribute("marker-start")||""!==t[i].getAttribute("marker-end"))){var n=document.getElementById(t[i].id+"_triangle"),s=parseInt(t[i].id.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(t[i].id.split("_NavigationIndex_")[1].split("_")[0],10);sf.base.isNullOrUndefined(n)||(n.setAttribute("fill",this.navigation[s][o].ArrowColor),n.setAttribute("opacity","1"))}},r.prototype.createStyle=function(e,t,i,n){var s=document.createElement("style");s.id=e,this.highlightStyle(s,t,i,n),document.body.appendChild(s)},r.prototype.highlightStyle=function(e,t,i,n){if(n.indexOf("NavigationIndex")>-1){var s=sf.base.isNullOrUndefined(i.Fill)?sf.base.isNullOrUndefined(i.BorderColor)?"transparent":i.BorderColor:i.Fill,o=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(n.split("_NavigationIndex_")[1].split("_")[0],10);this.navigation[o][r].Angle,e.innerHTML="."+t+" {fill: none;fill-opacity:"+i.Opacity+";stroke:"+s+";stroke-width:"+i.BorderWidth+";stroke-opacity:"+i.BorderOpacity}else t.indexOf("Line")>-1?e.innerHTML="."+t+" {fill: transparent;fill-opacity:"+i.Opacity+";stroke:"+i.Fill+";stroke-width:"+(this.isTileMap?i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity:e.innerHTML="."+t+" {fill:"+i.Fill+";fill-opacity:"+i.Opacity+";stroke:"+i.BorderColor+";stroke-width:"+(this.isTileMap?i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity},r.prototype.customizeStyle=function(e,t,i,n){var s=document.getElementById(e);this.highlightStyle(s,t,i,n)},r.prototype.renderMarkers=function(){for(var e=document.getElementById(this.element.id+"_LayerCollections"),t=0;t<this.layerCount;t++){var i=document.getElementById(this.element.id+"_LayerIndex_"+t+"_Markers_Template_Group");this.markerTemplateTranslate(i,0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor);var n=document.getElementById(this.element.id+"_LayerIndex_"+t+"_DataLabel_Group");this.labelTemplateTranslate(n,this.translatePoint.x,this.translatePoint.y,this.scaleFactor)}for(var s=0;s<e.childElementCount;s++){var o=e.children[s];if("g"===o.tagName){o.id.indexOf("_LayerIndex_")>-1&&parseFloat(o.id.split("_LayerIndex_")[1].split("_")[0]);for(var r=0;r<o.children.length;r++){var a=o.children[r];if(a.COMMENT_NODE!==a.nodeType)if(a.id.indexOf("_Polygon_Group")>-1)a.setAttribute("transform","scale("+Math.pow(2,this.scaleFactor-1)+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(a.id.indexOf("_MarkerGroup")>-1)for(t=0;t<a.childElementCount;t++)this.markerTranslate(a.children[t],0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor,!1);else if(a.id.indexOf("_Polygons_Group")>-1)if(this.isTileMap)for(var l=0;l<a.childElementCount;l++){var h=document.getElementById(a.children[l].id);for(t=0;t<h.childElementCount;t++)if(""!==h.children[t].id){var d=parseInt(h.children[t].id.split("_LayerIndex_")[1].split("_")[0],10),c=parseInt(h.children[t].id.split("_PolygonIndex_")[1].split("_")[0],10);this.polygonTranslate(h.children[t],0,d,c)}}else a.setAttribute("transform","scale("+this.scaleFactor+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(a.id.indexOf("_line_Group")>-1)this.isTileMap?a.setAttribute("transform","scale("+Math.pow(2,this.scaleFactor-1)+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )"):a.setAttribute("transform","scale("+this.scaleFactor+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(a.id.indexOf("_dataLableIndex_Group")>-1){var p=Math.pow(2,this.scaleFactor-1);for(t=0;t<a.children.length;t++)this.dataLabelTranslate(a.children[t],0,this.translatePoint.x,this.translatePoint.y,p,"DataLabel")}}}}},r.prototype.setMarkerTranslate=function(e,t,i,n,s){"Balloon"!==this.dataSource[t][i][n][this.markerSettings[t][i].ShapeValuePath]&&"Balloon"!=this.markerSettings[t][i].Type||e.id.indexOf("cluster")>-1?"Rectangle"!==this.dataSource[t][i][n][this.markerSettings[t][i].ShapeValuePath]&&"Rectangle"!=this.markerSettings[t][i].Type||e.id.indexOf("cluster")>-1?this.isTileMap&&e.classList.contains("e-maps-cluster")?e.setAttribute("transform","translate( "+(s.x-this.areaRect.x)+" "+(s.y-this.areaRect.y)+" )"):e.setAttribute("transform","translate( "+s.x+" "+s.y+" )"):e.setAttribute("transform","translate( "+(s.x-this.markerSettings[t][i].Width/2)+" "+(s.y-this.markerSettings[t][i].Height/2)+" )"):e.setAttribute("transform","translate( "+(s.x-this.markerSettings[t][i].Width/2)+" "+(s.y-this.markerSettings[t][i].Height)+" )scale("+this.markerSettings[t][i].Width/30+" "+this.markerSettings[t][i].Height/30+" )")},r.prototype.markerTranslate=function(e,t,i,n,s,o){if(e.COMMENT_NODE!==e.nodeType&&e.TEXT_NODE!==e.nodeType){var r=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),a=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),h=sf.base.isNullOrUndefined(this.markerSettings[r][a].LatitudeValuePath)||""===this.markerSettings[r][a].LatitudeValuePath?sf.base.isNullOrUndefined(this.dataSource[r][a][l].Latitude)?"latitude":"Latitude":this.markerSettings[r][a].LatitudeValuePath,d=sf.base.isNullOrUndefined(this.markerSettings[r][a].LongitudeValuePath)||""===this.markerSettings[r][a].LongitudeValuePath?sf.base.isNullOrUndefined(this.dataSource[r][a][l].Longitude)?"longitude":"Longitude":this.markerSettings[r][a].LongitudeValuePath,c=0!==this.dataSource[r].length&&0!==this.dataSource[r][a].length?this.dataSource[r][a][l][d]:null,p=0!==this.dataSource[r].length&&0!==this.dataSource[r][a].length?this.dataSource[r][a][l][h]:null;if(p&&c)if(this.isTileMap){var u=this.convertTileLatLongToPoint({x:c,y:p},this.tileZoomLevel,this.tileTranslatePoint,!0);u.x=u.x+this.markerSettings[r][a].X,u.y=u.y+this.markerSettings[r][a].Y,o?(e.style.left=u.x-this.areaRect.x+"px",e.style.top=u.y-this.areaRect.y+"px"):this.setMarkerTranslate(e,r,a,l,u)}else{var f=this.convertGeoToPoint(p,c,t,r);f.x=(f.x+i)*s+this.markerSettings[r][a].X,f.y=(f.y+n)*s+this.markerSettings[r][a].Y,o?(e.style.left=f.x-this.areaRect.x+"px",e.style.top=f.y-this.areaRect.y+"px"):this.setMarkerTranslate(e,r,a,l,f)}}},r.prototype.polygonTranslate=function(e,t,i,n){if(!sf.base.isNullOrUndefined(this.polygon[i])){for(var s="",o=[],r=0;r<this.polygonDataSource[i][n].length;r++){var a=this.isTileMap?this.convertTileLatLongToPoint({x:this.polygonDataSource[i][n][r].Longitude,y:this.polygonDataSource[i][n][r].Latitude},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(this.polygonDataSource[i][n][r].Latitude,this.polygonDataSource[i][n][r].Longitude,t,i);o.push(a)}for(var l=0;l<o.length;l++)s+=0===l?"M "+o[l].x+","+o[l].y:" L "+o[l].x+","+o[l].y;s+=" z ",document.getElementById(this.id+"_LayerIndex_"+i+"_PolygonIndex_"+n).setAttribute("d",s)}},r.prototype.navigationTranslate=function(e,t,i,n){if(!sf.base.isNullOrUndefined(this.navigation[i])){var s=this.navigation[i][n].Angle,o=void 0,r=void 0,a=[];if(this.navigation[i][n].Latitude.length===this.navigation[i][n].Longitude.length)for(var l=0;l<this.navigation[i][n].Latitude.length;l++){var h=this.isTileMap?this.convertTileLatLongToPoint({x:this.navigation[i][n].Longitude[l],y:this.navigation[i][n].Latitude[l]},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(this.navigation[i][n].Latitude[l],this.navigation[i][n].Longitude[l],t,i);a.push(h)}for(var d=0;d<a.length-1;d++){s=1<(s=-1>s?-1:s)?1:s;var c=this.convertRadius(a[d],a[d+1]);s<=1&&s>0&&(o=0,a[d].x>a[d+1].x&&(o=1)),s>=-1&&s<0&&(o=1,a[d].x>a[d+1].x&&(o=0)),r=0===(s=Math.abs(s))?"M "+a[d].x+","+a[d].y+"L "+a[d+1].x+","+a[d+1].y+" ":"M "+a[d].x+","+a[d].y+" A "+(c/2+(1-s)*c/(10*s))+" "+(c/2+(1-s)*c/(10*s))+" 0,0,"+o+" , "+a[d+1].x+","+a[d+1].y+" ",document.getElementById(this.id+"_LayerIndex_"+i+"_NavigationIndex_"+n+"_Line_"+d).setAttribute("d",r)}}},r.prototype.dataLabelTranslate=function(e,t,i,n,s,o){if(e.COMMENT_NODE!==e.nodeType&&e.TEXT_NODE!==e.nodeType){var r,a,l=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),h=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]);if("Template"!==o){r=(d=this.labelCollection[l][h]).LocationX,a=d.LocationY;r=(r+i)*s-d.BorderSize.Height/4+d.OffsetX,a=(a+n)*s+d.BorderSize.Height/4+d.OffsetY,e.id.indexOf("_RectIndex_")>-1?(e.setAttribute("x",(r-parseInt(e.getAttribute("width"))/2).toString()),e.setAttribute("y",(a-(5+parseInt(e.getAttribute("height"))/2)).toString())):e.setAttribute("transform","translate( "+r+" "+a+" )")}else{var d;r=((d=this.dataLabelTemplateCollection[l][h]).LocationX+i)*s+d.OffsetX,a=(d.LocationY+n)*s+d.OffsetY,e.style.left=r+"px",e.style.top=a+"px"}}},r.prototype.convertTileLatLongToPoint=function(e,t,i,n){var s=256*Math.pow(2,t),o=(e.x+180)/360,r=Math.sin(e.y*Math.PI/180),a=.5-Math.log((1+r)/(1-r))/(4*Math.PI),l=e.x,h=e.y;return n&&(l=o*s+.5+i.x,h=a*s+.5+i.y),{x:l,y:h}},r.prototype.panning=function(e,t,i,n,s,o){if(this.mergeSeparation(),this.isTileMap){r=this.tileTranslatePoint.x-e-(sf.base.Browser.isDevice&&1==s?e/2:0),a=this.tileTranslatePoint.y-t;this.tileTranslatePoint.x=r,this.tileTranslatePoint.y=a,(this.tileTranslatePoint.y>-10&&t<0||this.tileTranslatePoint.y<-256*(Math.pow(2,s)-2)&&t>0)&&(this.tileTranslatePoint.x=r+e,this.tileTranslatePoint.y=a+t),o&&(e=0,t=0),this.translatePoint.x=this.tileTranslatePoint.x/Math.pow(2,s-1),this.translatePoint.y=this.tileTranslatePoint.y/Math.pow(2,s-1),this.generateTiles(),this.renderMarkers()}else{this.shapeTranslatePoint;var r=this.shapeTranslatePoint.x-e/s,a=this.shapeTranslatePoint.y-t/s,l=document.getElementById(this.element.id+"_LayerCollections").getBoundingClientRect(),h=document.getElementById(this.element.id+"_svg").getBoundingClientRect(),d=document.getElementById(this.element.id+"_Legend_Group"),c=sf.base.isNullOrUndefined(d)?0:d.getClientRects()[0].height,p=e<0?l.left<=h.left+this.areaRect.x:l.left+l.width>=h.left+h.width+this.areaRect.x+this.marginLeft,u=t<0?l.top<=h.top+this.areaRect.y:l.top+l.height+c+this.marginTop>=h.top+h.height;p&&u?(this.shapeTranslatePoint={x:r,y:a},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):p?(this.shapeTranslatePoint={x:r,y:this.shapeTranslatePoint.y},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):u&&(this.shapeTranslatePoint={x:this.shapeTranslatePoint.x,y:a},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint))}},r.prototype.applyTransform=function(e,t){for(var i=this.isTileMap?this.translatePoint.x:t.x,n=this.isTileMap?this.translatePoint.y:t.y,s=document.getElementById(this.element.id+"_LayerCollections"),o=0;o<s.children.length;o++){var r=s.children[o];if(r.COMMENT_NODE!==r.nodeType&&"g"===r.tagName)for(var a=this.calculateFactor(parseFloat(r.id.split("_LayerIndex_")[1].split("_")[0])),l=(r.id.indexOf("_LayerIndex_")>-1&&parseFloat(r.id.split("_LayerIndex_")[1].split("_")[0]),0);l<r.children.length;l++){var h=r.children[l];if(h.COMMENT_NODE!==h.nodeType&&!sf.base.isNullOrUndefined(h.id))if(h.id.indexOf("Polygon")>-1||h.id.indexOf("_line_Group")>-1)h.setAttribute("transform","scale("+e+") translate( "+i+" "+n+" )");else if(h.id.indexOf("_MarkerGroup")>-1)for(var d=0;d<h.children.length;d++)sf.base.isNullOrUndefined(h.children[d].id)||this.markerTranslate(h.children[d],a,i,n,e,!1);else if(h.id.indexOf("_bubble_Group_")>-1)for(d=0;d<h.children.length;d++){var c=h.children[d];if(!sf.base.isNullOrUndefined(c.id)){var p=parseFloat(c.id.split("_LayerIndex_")[1].split("_")[0]),u=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[0]),f=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[2]);if(this.bubbleCollection[p]&&this.bubbleCollection[p][u]){var g=this.bubbleCollection[p][u][f],m=(g.ZoomTranslatePoint.X+i)*e,v=(g.ZoomTranslatePoint.Y+n)*e;1==g.Type&&(m-=g.Radius,v-=g.Radius),c.setAttribute("transform","translate( "+m+" "+v+" )")}}}else if(h.id.indexOf("_dataLableIndex_Group")>-1)for(d=0;d<h.children.length;d++)this.dataLabelTranslate(h.children[d],a,i,n,e,"DataLabel")}}for(var b=0;b<this.layerCount;b++){a=this.calculateFactor(b);var y=document.getElementById(this.element.id+"_LayerIndex_"+b+"_Markers_Template_Group");this.markerTemplateTranslate(y,a,i,n,e);var C=document.getElementById(this.element.id+"_LayerIndex_"+b+"_DataLabel_Group");this.labelTemplateTranslate(C,i,n,e)}},r.prototype.markerTemplateTranslate=function(e,t,i,n,s){if(e)for(var o=0;o<e.childElementCount;o++)this.markerTranslate(e.children[o],t,i,n,s,!0)},r.prototype.labelTemplateTranslate=function(e,t,i,n){if(e)for(var s=this.isTileMap?Math.pow(2,n-1):n,o=0;o<e.childElementCount;o++)this.dataLabelTranslate(e.children[o],0,t,i,s,"Template")},r.prototype.calculateFactor=function(e){var t,i,n,s=1,o=this.baseMapBounds,r=this.areaRect.width,a=this.areaRect.height;if(o){var l=this.convertGeoToPoint(o.latitudeMin,o.longitudeMin,null,e),h=this.convertGeoToPoint(o.latitudeMax,o.longitudeMax,null,e);i=h.y-l.y,n=h.x-l.x}else i=n=500;return t=i<a?parseFloat(Math.abs(100*Number(a/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:a/i,s=n<r?parseFloat(Math.abs(100*Number(r/Number(n.toString()+"e+1"))).toString().split(".")[0])/10:r/n,Math.min(s,t)},r.prototype.convertRadius=function(e,t){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},r.prototype.convertGeoToPoint=function(e,t,i,n){var s,o,r,a,l={width:this.areaRect.width,height:this.areaRect.height},h=this.degreesToRadians(e),d=this.degreesToRadians(t),c=null==i?Math.min(l.width,l.height):Math.min(l.width,l.height)*i,p=this.projectionType;if("Normal"!=this.geometryType[n])switch(p){case"Mercator":var u={x:c/2,y:c/2};s=u.x+t*(c/360);var f=this.calculateBound(Math.sin(this.degreesToRadians(e)),-.9999,.9999);o=u.y+.5*Math.log((1+f)/(1-f))*(-c/(2*Math.PI));break;case"Winkel3":((r=this.aitoff(d,h)).x+d/(Math.PI/2))/2,(r.y+h)/2;break;case"Miller":d,1.25*Math.log(Math.tan(Math.PI/4+.4*h));break;case"Eckert3":2/(a=Math.sqrt(Math.PI*(4+Math.PI)))*d*(1+Math.sqrt(1-4*h*h/(Math.PI*Math.PI))),4/a*h;break;case"AitOff":(r=this.aitoff(d,h)).x,r.y;break;case"Eckert5":d*(1+Math.cos(h))/Math.sqrt(2+Math.PI),2*h/Math.sqrt(2+Math.PI);break;case"Equirectangular":d,h;break;case"Eckert6":a=(1+Math.PI/2)*Math.sin(h);for(var g=1/0,m=0;m<10&&Math.abs(g)>1e-6;m++)h-=g=(h+Math.sin(h)-a)/(1+Math.cos(h));a=Math.sqrt(2+Math.PI),d*(1+Math.cos(h))/a,2*h/a}else s=null==i?t:Math.abs((t-this.baseMapBounds.longitudeMin)*i),o=null==i?e:Math.abs((this.baseMapBounds.latitudeMax-e)*i);return{x:s,y:o}},r.prototype.aitoff=function(e,t){var i=Math.cos(t),n=Math.sin(Math.cos(i*Math.cos(e/=2)));return{x:2*i*Math.sin(e)*n,y:Math.sin(t)*n}},r.prototype.degreesToRadians=function(e){return e*(Math.PI/180)},r.prototype.calculateBound=function(e,t,i){return sf.base.isNullOrUndefined(t)||(e=Math.max(e,t)),sf.base.isNullOrUndefined(i)||(e=Math.min(e,i)),e},r.prototype.getTileGeoLocation=function(e,t){var i=this.getBound(this.element.id),n=this.getBound(this.element.id+"_tile_parent");return this.pointToLatLong(e+this.areaRect.x-(n.x-i.x),t+this.areaRect.y-(n.y-i.y))},r.prototype.pointToLatLong=function(e,t){var i=256*Math.pow(2,this.scaleFactor),n=this.clip(e-this.translatePoint.x*Math.pow(2,this.scaleFactor-1),0,i-1)/i-.5,s=.5-this.clip(t-this.translatePoint.y*Math.pow(2,this.scaleFactor-1),0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-s*Math.PI))/Math.PI,longitude:360*n}},r.prototype.generateTiles=function(){var e,t=this.baseMapBounds.availableSize.width,i=this.baseMapBounds.availableSize.height,n=0,s=0,o=0;n=e=Math.pow(2,this.tileZoomLevel);var r=[];this.tileTranslatePoint.x+256*n<t&&(s=this.tileTranslatePoint.x>0?Math.ceil(this.tileTranslatePoint.x/256):0,o=this.tileTranslatePoint.x+256*n<t?Math.ceil((t-(this.tileTranslatePoint.x+256*n))/256):0),n+=s+o,n=this.horizontalPanXCount>=n?this.horizontalPanXCount:n,this.horizontalPan=!1;for(var a=Math.min(e,(-this.tileTranslatePoint.y+i)/256+1),l=Math.min(n,(-this.tileTranslatePoint.x+t+256*o)/256+1),h=-(this.tileTranslatePoint.x+256*s+256)/256,d=-(this.tileTranslatePoint.y+256)/256,c=Math.round(h);c<Math.round(l);c++)for(var p=Math.round(d);p<Math.round(a);p++){var u=256*c+this.tileTranslatePoint.x,f=256*p+this.tileTranslatePoint.y;if(u>-256&&u<=t&&f>-256&&f<i&&p>=0){var g=c;c<0&&(g=g%e+e);var m={x:g%e,y:p,left:u,top:f,height:256,width:256,src:null};-1===this.urlTemplate.indexOf("virtualearth")?m.src=this.urlTemplate.replace("level",this.scaleFactor.toString()).replace("tileX",m.x.toString()).replace("tileY",m.y.toString()):m.src=this.getBingMap(m,this.urlTemplate),r.push(m)}}var v=document.getElementById(this.element.id+"_animated_tiles"),b=[];for(p=0;p<r.length;p++){var y=document.getElementById(this.element.id+"tile"+p),C=null,w=!1;b.push(p),y?(y.style.removeProperty("display"),C=y.children[0]):((y=document.createElement("div")).id=this.element.id+"tile"+p,y.style.userSelect="none",C=document.createElement("img"),w=!0),C.src!==r[p].src&&C.setAttribute("src",r[p].src),y.style.position="absolute",y.style.left=r[p].left+"px",y.style.top=r[p].top+"px",y.style.height=r[p].height+"px",y.style.width=r[p].width+"px",w&&(y.appendChild(C),v.appendChild(y))}for(var M=r.length;M<v.childElementCount;M++){for(var S=!1,x=0;x<this.currentTiles.childElementCount;x++)S||this.currentTiles.children[x].id!==v.children[M].id||(S=!0);S?v.children[M].style.display="none":v.removeChild(v.children[M])}},r.prototype.getBingMap=function(e,t){for(var i="",n=["t0","t1","t2","t3"],s=Math.min(this.tileZoomLevel,this.options.maxZoom);s>0;s--){var o=0,r=1<<s-1;0!=(e.x&r)&&o++,0!=(e.y&r)&&(o+=2),i=i+""+o}var a=n[Math.min(parseInt(i.substr(i.length-1,1),10),n.length)];return(t=t.replace("{quadkey}",i).replace("{subdomain}",a))+"&mkt=en-US&ur=IN&Key="+this.key},r.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},r.prototype.svgPoint=function(e,t,i){var n=this.svg.createSVGPoint();return n.x=t-(this.isTileMap?this.areaRect.x:0),n.y=i-(this.isTileMap?this.areaRect.y:0),n.matrixTransform(e.getScreenCTM().inverse())},r.prototype.clusterExpand=function(e,t){var i,n=JSON.parse(t.dataSource),s=parseInt(e[0].split("_LayerIndex_")[1].split("_")[0],10),o=this.markerClusterCollection[s],r=e[0].split("_LayerIndex_"),a=parseInt(r[1].split("_")[0],10),l=[],h=[];if(e[0].indexOf("_MarkerIndex_")>-1){var d=parseInt(r[1].split("_MarkerIndex_")[1].split("_")[0],10),c=parseInt(r[1].split("_dataIndex_")[1].split("_")[0],10);if(!isNaN(d)){i=n[c];var p=[];if(e[0].indexOf("_cluster_")>-1&&o.AllowClustering)for(var u=0;u<n.length;u++)n[u].Latitude===i.Latitude&&n[u].Longitude===i.Longitude&&p.push({data:i,index:a});if(e[0].indexOf("_cluster_")>-1){var f=document.getElementById(e[0].indexOf("_datalabel_")>-1?e[0].split("_datalabel_")[0]:e[0]),g=void 0;"Balloon"===this.markerClusterCollection[s].Shape||sf.base.isNullOrUndefined(f)?sf.base.isNullOrUndefined(f.firstElementChild)||(g=f.firstElementChild.innerHTML.split(",").map(String)):g=f.innerHTML.split(",").map(String),p=[];for(var m=0;m<g.length;m++){var v=this.dataSource[s][parseInt(g[m].split(":")[0])][parseInt(g[m].split(":")[1])];p.push({data:v,index:parseInt(g[m].split(":")[1])}),v.text="",l.push(v)}!1,h.push({data:p,layerIndex:a,markerIndex:d,dataIndex:c,targetClusterIndex:+(e[0].split("_cluster_")[1].indexOf("_datalabel_")>-1?e[0].split("_cluster_")[1].split("_datalabel_")[0]:e[0].split("_cluster_")[1]),isClusterSame:!1})}}}if(h.length>0){this.clusterData=h;var b=document.getElementById(r[0]+"_LayerIndex_"+s+"_MarkerGroup");this.markerClusterExpandCheck?(this.mergeSeparateCluster(this.clusterData,r[0]),this.markerClusterExpandCheck=!1):(this.clusterSeparate(this.clusterData,b,!0,r[0],o),this.markerClusterExpandCheck=!0)}},r.prototype.mergeSeparateCluster=function(e,t){var i,n=e[0].layerIndex,s=e[0].targetClusterIndex,o=e[0].markerIndex,r=t+"_LayerIndex_"+n+"_MarkerIndex_"+o+"_dataIndex_"+e[0].dataIndex+"_cluster_"+s,a=this.getElementId(r),l=this.getElementId(r+"_datalabel_"+s);sf.base.isNullOrUndefined(a)||(a.style.visibility="visible"),sf.base.isNullOrUndefined(l)||(l.style.visibility="visible");var h=e[0].data.length;if(0!=this.clusterLocation.length){var d=[];d="g"==a.tagName?a.firstElementChild.innerHTML.split(",").map(String):a.innerHTML.split(",").map(String);for(var c=0;c<h;c++){var p=parseInt(d[c].split(":")[0]),u=parseInt(d[c].split(":")[1]),f=t+"_LayerIndex_"+n+"_MarkerIndex_"+p;if(i=this.getElementId(f+"_dataIndex_"+u),!sf.base.isNullOrUndefined(i)){if(-1===i.parentElement.id.indexOf("Template")){var g=this.markerSettings[n][o];"Balloon"===g.Type?i.setAttribute("transform","translate( "+this.clusterLocation[c].x+" "+this.clusterLocation[c].y+")scale( "+g.Width/30+" "+g.Height/30+" ) "):i.setAttribute("transform","translate( "+this.clusterLocation[c].x+" "+this.clusterLocation[c].y+")")}else i.style.left=this.clusterLocation[c].x+"px",i.style.top=this.clusterLocation[c].y+"px";i.style.visibility="hidden",i.style.content="marker",i.classList.add("e-maps-marker-hidden")}}}this.clusterLocation=[],this.removeElement(t+"_LayerIndex_"+n+"_MarkerIndex_"+o+"_markerClusterConnectorLine")},r.prototype.removeElement=function(e){var t=document.getElementById(e);sf.base.isNullOrUndefined(t)||t.remove()},r.prototype.drawPath=function(e){var t=document.getElementById(e.id);return sf.base.isNullOrUndefined(t)&&(t=document.createElementNS("http://www.w3.org/2000/svg","path")),t.setAttribute("id",e.id),t.setAttribute("d",e.d),t.setAttribute("opacity",e.opacity.toString()),t.setAttribute("stroke",e.stroke),t.setAttribute("stroke-width",e.strokeWidth.toString()),sf.base.isNullOrUndefined(e.fill)||t.setAttribute("fill",e.fill),t},r.prototype.clusterSeparate=function(e,t,i,n,o){var r=e[0].layerIndex,a=e[0].markerIndex,l=e[0].targetClusterIndex,h=e[0].dataIndex,d=(document.getElementById(n).getBoundingClientRect(),i?this.getElementId:t.querySelector.bind(t)),c=i?"":"#",p=n+"_LayerIndex_"+r+"_MarkerIndex_"+a,u=p+"_dataIndex_"+h+"_cluster_"+l,f=d(c+""+u),g=d(c+""+u+"_datalabel_"+l);f.style.visibility="hidden",g.style.visibility="hidden";var m=d(c+""+p+"_dataIndex_"+h),v=+f.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],b=+f.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),y=30,C=6.28*y,w=0,M=Math.round(C/25);w+=M;var S=e[0].data.length,x=Math.round(25/C*100),N=(x=S<M?100/S:x)/100*360,O=S<M?45:0,E=1,I="M "+v+" "+b+" ",T="",D=[];D="g"==f.tagName?f.firstElementChild.innerHTML.split(",").map(String):f.innerHTML.split(",").map(String);for(var j=0;j<S;j++){var A=parseInt(D[j].split(":")[0]),z=parseInt(D[j].split(":")[1]),k=n+"_LayerIndex_"+r+"_MarkerIndex_"+A;if(w===j||Math.round(O)>=360){for(O=0,C=6.28*(y=30*++E),M=Math.round(C/25),x=Math.round(25/C*100);(0===x?1:x)*M<100;)M++;N=x/100*360,w+=M}var P=v+y*Math.sin(2*Math.PI*O/360),L=b+y*Math.cos(2*Math.PI*O/360);if(T+=I+"L "+P+" "+L+" ",m=d(c+""+k+"_dataIndex_"+z),sf.base.isNullOrUndefined(m.getAttribute("transform")))m.parentElement.id.indexOf("Template")>-1&&this.clusterLocation.push({x:parseFloat(m.style.left.replace("px","")),y:parseFloat(m.style.top.replace("px",""))});else{var B=parseFloat(m.getAttribute("transform").split("translate(")[1].trim().split(" ")[0]),R=parseFloat(m.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim());this.clusterLocation.push({x:B,y:R})}var U=this.markerSettings[r][A];-1===m.parentElement.id.indexOf("Template")?"Balloon"===U.Type?m.setAttribute("transform","translate( "+(P-U.Width/2)+" "+(L-U.Height)+"  ) scale( "+U.Width/30+" "+U.Height/30+" ) "):m.setAttribute("transform","translate( "+P+" "+L+")"):(m.style.left=P+"px",m.style.top=L+"px"),m.style.visibility="visible",g.style.visibility="hidden",O+=N}var H={d:T,id:n+"_LayerIndex_"+r+"_MarkerIndex_"+a+"_dataIndex_"+h+"_markerClusterConnectorLine",stroke:sf.base.isNullOrUndefined(o.LineColor)?"#000000":o.LineColor,opacity:o.LineOpacity,strokeWidth:o.LineWidth};t=i?d(n+"_LayerIndex_"+r+"_MarkerGroup"):t;var F=s(n+"_LayerIndex_"+r+"_MarkerIndex_"+a+"_markerClusterConnectorLine");F.appendChild(this.drawPath(H)),t.insertBefore(F,t.querySelector("#"+p+"_dataIndex_0"))},r.prototype.getElementId=function(e){return document.getElementById(e)},r.prototype.shapeHighlightHandle=function(e,t,i){var n=this.options.layerHighlightSettings[i];this.handleHighlight(this.targetElementPath,"Shape",{BorderColor:n.BorderColor,BorderWidth:n.BorderWidth/this.scaleFactor,BorderOpacity:n.BorderOpacity,Enable:n.Enable,EnableMultiSelect:n.EnableMultiSelect,Fill:e,Opacity:t})},r.prototype.itemHighlightHandle=function(e,t,i,n,s){if("Bubble"===s){var o=this.options.bubbleHighlightSettings[i][n];this.handleHighlight(this.targetElementPath,"Bubble",{BorderColor:o.BorderColor,BorderWidth:o.BorderWidth,BorderOpacity:o.BorderOpacity,Enable:o.Enable,EnableMultiSelect:o.EnableMultiSelect,Fill:e,Opacity:t})}if("Marker"===s){var r=this.options.markerHighlightSettings[i][n];this.handleHighlight(this.targetElementPath,"Marker",{BorderColor:r.BorderColor,BorderWidth:r.BorderWidth,BorderOpacity:r.BorderOpacity,Enable:r.Enable,EnableMultiSelect:r.EnableMultiSelect,Fill:e,Opacity:t})}if("Navigation"===s){for(var a=this.options.navigationHighlightSettings[i][n],l=0;l<=this.navigation[i][n].Latitude.length;l++){var h=document.getElementById(this.element.id+"_LayerIndex_"+i+"_NavigationIndex_0_Line_"+l);this.handleHighlight(h,"Navigation",{BorderColor:a.BorderColor,BorderWidth:a.BorderWidth,BorderOpacity:a.BorderOpacity,Enable:a.Enable,EnableMultiSelect:a.EnableMultiSelect,Fill:e,Opacity:t})}if(""!==this.targetElementPath.getAttribute("marker-start")||""!==this.targetElementPath.getAttribute("marker-end")){var d=document.getElementById(this.targetElementPath.id+"_triangle");this.handleHighlight(d,"Arrow",{BorderColor:d.BorderColor,BorderWidth:d.BorderWidth,BorderOpacity:d.BorderOpacity,Enable:d.Enable,EnableMultiSelect:d.EnableMultiSelect,Fill:e,Opacity:t})}}if("Polygon"===s){var c=this.options.polygonHighlightSettings[i],p=document.getElementById(this.element.id+"_LayerIndex_"+i+"_PolygonIndex_"+n);this.handleHighlight(p,"Polygon",{BorderColor:c.BorderColor,BorderWidth:c.BorderWidth,BorderOpacity:c.BorderOpacity,Enable:c.Enable,EnableMultiSelect:c.EnableMultiSelect,Fill:e,Opacity:t})}},r.prototype.datalabelAnimate=function(e,t,i,n){var s=0;new sf.base.Animation({}).animate(e,{duration:t,delay:0,progress:function(t){t.timeStamp>t.delay&&(s=(t.timeStamp-t.delay)/t.duration,e.setAttribute("style","user-select: none; visibility: visible;"),e.setAttribute(n?"fill-opacity":"opacity",(i*s).toString()))},end:function(t){e.style.visibility="visible",e.setAttribute(n?"fill-opacity":"opacity",i.toString())}})},r.prototype.elementAnimate=function(e,t,i,n,s,o,r,a,l,h,d){var c=this;sf.base.isNullOrUndefined(r)&&(r=0);var p=n,u=s,f=0;new sf.base.Animation({}).animate(e,{duration:i,delay:t,progress:function(t){t.timeStamp>t.delay&&(f=(t.timeStamp-t.delay)/t.duration,e.style.visibility="visible",e.setAttribute("transform","translate( "+(p-r*f)+" "+(u-r*f)+" ) scale("+f+")"))},end:function(t){e.style.visibility="visible",e.setAttribute("transform",""),"Balloon"===a||"Balloon"===l?e.setAttribute("transform","translate( "+n+" "+s+"  ) scale( "+h/30+" "+d/30+" ) "):e.setAttribute("transform","translate( "+n+" "+s+"  )"),sf.base.isNullOrUndefined(c.dotNetRef)||c.dotNetRef.invokeMethodAsync("TriggerAnimation",e)}})},r.prototype.markerAnimation=function(e,t){for(var i=JSON.parse(t.markerData),n=0;n<i.length;n++)for(var s=0;s<i[n].MarkerAnimation.length;s++)if(i[n].MarkerAnimation[s].IsMarkerShape)for(var o=0;o<i[n].MarkerAnimation[s].DataSourceLength;o++){var r=document.getElementById(e+"_LayerIndex_"+n+"_MarkerIndex_"+s+"_dataIndex_"+o),a=sf.base.isNullOrUndefined(this.dataSource[i[n].MarkerAnimation[s].Layer][s][o][i[n].MarkerAnimation[s].ShapeValuePath])?" ":this.dataSource[i[n].MarkerAnimation[s].Layer][s][o][i[n].MarkerAnimation[s].ShapeValuePath];this.elementAnimate(r,i[n].MarkerAnimation[s].AnimationDelay,i[n].MarkerAnimation[s].AnimationDuration,r.transform.baseVal[0].matrix.e,r.transform.baseVal[0].matrix.f,null,0,i[n].MarkerAnimation[s].MarkerType,a,i[n].MarkerAnimation[s].Width,i[n].MarkerAnimation[s].Height)}for(n=0;n<this.labelCollection.length;n++){if(null!=this.labelCollection[n]&&this.labelCollection[n].length>0&&this.labelCollection[n][0].AnimationDuration>0)for(s=0;s<(null!=this.labelCollection[n]?this.labelCollection[n].length:0);s++){var l=this.labelCollection[n][s],h=document.getElementById(e+"_LayerIndex_"+n+"_shapeIndex_"+s+"_LabelIndex_"+s),d=document.getElementById(e+"_LayerIndex_"+n+"_shapeIndex_"+s+"_RectIndex_"+s);sf.base.isNullOrUndefined(h)||(this.datalabelAnimate(h,l.AnimationDuration,l.Font.Opacity,!1),sf.base.isNullOrUndefined(d)||this.datalabelAnimate(d,l.AnimationDuration,l.Opacity,!0))}}},r.prototype.bubbleAnimation=function(e,t){for(var i=JSON.parse(t.bubbleData),n=0;n<i.length;n++)for(var s=0;s<i[n].MarkerAnimation.length;s++)for(var o=0;o<i[n].MarkerAnimation[s].DataSourceLength;o++){var r=document.getElementById(e+"_LayerIndex_"+n+"_BubbleIndex_"+s+"_dataIndex_"+o);sf.base.isNullOrUndefined(r)||this.elementAnimate(r,i[n].MarkerAnimation[s].AnimationDelay,i[n].MarkerAnimation[s].AnimationDuration,r.transform.baseVal[0].matrix.e,r.transform.baseVal[0].matrix.f,null,0," "," ",0,0)}},r.prototype.toolbarOpacity=function(e,t){this.removeZoomOpacity(t,e,t,e,t,e,t,e,t,e)},r.prototype.clusterMarkerProcess=function(){for(var e=!1,t=0;t<this.layerCount;t++)e||(this.mergeSeparation(),this.removeCluster(),e=!0),this.clusterMarkers(t)},r.prototype.clusterMarkers=function(e){var t=this.markerClusterCollection[e];if(t.AllowClustering){var i=void 0,n=void 0,r=this.id,a=[],l=[],h=0,d=0,c=s(r+"_LayerIndex_"+e+"_cluster"),p=3.75,u=0,f=void 0,g=void 0,m=void 0,v=[],b=void 0,y=document.getElementById(r),C=document.getElementById(r+"_LayerIndex_"+e+"_MarkerGroup");if(!sf.base.isNullOrUndefined(C)&&C.childElementCount<=0&&C.childElementCount<=0&&(C=document.getElementById(r+"_LayerIndex_"+e+"_Markers_Template_Group"),b=!0),C=sf.base.isNullOrUndefined(C)?document.getElementById(r+"_LayerIndex_"+e+"_Markers_Template_Group"):C)for(var w=0;w<C.childElementCount;w++)if(!(C.children[w].id.indexOf("markerClusterConnectorLine")>-1)){a=[];var M=parseInt(C.children[w].id.split("_MarkerIndex_")[1].split("_")[0],10),S=parseInt(C.children[w].id.split("_dataIndex_")[1].split("_")[0],10),x=("Balloon"===this.markerSettings[e][M].Type||"Image"===this.markerSettings[e][M].Type)&&sf.base.isNullOrUndefined(this.markerSettings[e][M].ShapeValuePath);if("hidden"!==C.children[w].style.visibility){var N=(g=C.children[w]).getBoundingClientRect();if(a.push(M.toString()+":"+S.toString()),null!==N){for(var O=w+1;O<C.childElementCount;O++)if("hidden"!==C.children[O].style.visibility){g=C.children[O];var E=parseInt(g.id.split("_MarkerIndex_")[1].split("_")[0],10),I=parseInt(g.id.split("_dataIndex_")[1].split("_")[0],10),T=g.getBoundingClientRect();null!==T&&(N.left>T.right||N.right<T.left||N.top>T.bottom||N.bottom<T.top||(l.push(T),C.children[O].style.visibility="hidden",C.children[O].style.content="marker",C.children[O].classList.add("e-maps-marker-hidden"),a.push(E.toString()+":"+I.toString())))}if(h=N.left+N.width/2,d=N.top+(x?N.height:N.height/2),l.length>0){var D=y.getBoundingClientRect();h=this.isTileMap?h-D.left-this.areaRect.x:h-D.left,d=this.isTileMap?d-D.top-this.areaRect.y:d-D.top;var j=parseInt(C.children[w].id.split("_dataIndex_")[1].split("_")[0],10),A=parseInt(C.children[w].id.split("_LayerIndex_")[1].split("_")[0],10);C.children[w].getAttribute("transform")?(h+=this.isTileMap?0:b?this.areaRect.x:0,d+=this.isTileMap?0:b?this.areaRect.y:0):(h=parseFloat(C.children[w].style.left.replace("px",""))+(this.isTileMap?0:b?this.areaRect.x:0),d=parseFloat(C.children[w].style.top.replace("px",""))+(this.isTileMap?0:b?this.areaRect.y:0));var z=r+"_LayerIndex_"+A+"_MarkerIndex_"+M+"_dataIndex_"+j+"_cluster_"+u,k=r+"_LayerIndex_"+A+"_MarkerIndex_"+M+"_dataIndex_"+j+"_cluster_"+u+"_datalabel_"+u;u++;var P=void 0;switch(t.Shape){case"Circle":(P=this.createClusterShape("circle",z,t.Fill,t.Opacity,"translate( "+h+" "+d+" )",!0,a,t)).setAttribute("r",(t.Height+t.Width)/4);break;case"Rectangle":(P=this.createClusterShape("rect",z,t.Fill,t.Opacity,"translate( "+h+" "+d+" )",!0,a,t)).setAttribute("x",-t.Width/2),P.setAttribute("y",-t.Height/2),P.setAttribute("height",t.Height),P.setAttribute("width",t.Width);break;case"Balloon":m=s(z);(P=this.createClusterShape("path",z,t.Fill,t.Opacity,"translate( "+-t.Width/2+", "+-t.Height+" ) scale( "+t.Width/30+", "+t.Height/30+" )",!0,a,t)).classList.remove("clusterGroup"),P.setAttribute("d","M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z"),m.appendChild(P),m.style.visibility="visible",m.style.cursor="pointer",m.setAttribute("class","clusterGroup"),b&&m.classList.add("e-maps-cluster"),m.setAttribute("transform","translate( "+h+" "+d+" )");break;case"Image":var L=-(0+t.Width/2),B=-(0+t.Height/2);(P=this.createClusterShape("image",z,null,null,"translate( "+h+" "+d+" )",!0,a,t)).setAttributeNS(null,"height",t.Height),P.setAttributeNS(null,"width",t.Width),P.setAttributeNS("http://www.w3.org/1999/xlink","href",t.ImageUrl),P.setAttributeNS(null,"x",L),P.setAttributeNS(null,"y",B);break;case"Cross":case"Diamond":case"Star":case"Triangle":case"HorizontalLine":case"VerticalLine":case"InvertedTriangle":case"Pentagon":var R;R=o(t.Shape,{height:t.Height,width:t.Width},{x:0,y:0}),(P=this.createClusterShape("path",z,t.Fill,t.Opacity,"translate( "+h+" "+d+" )",!1,a,t)).setAttribute("d",R),"Cross"!==t.Shape&&"HorizontalLine"!==t.Shape&&"VerticalLine"!==t.Shape||(P.setAttribute("stroke",t.Fill),P.setAttribute("stroke-width",((t.Width+t.Height)/4).toString()))}"Balloon"!==t.Shape&&(b&&this.isTileMap||P.setAttribute("class","clusterGroup")),b&&"Balloon"!==t.Shape&&P.classList.add("e-maps-cluster");var U=document.createElementNS("http://www.w3.org/2000/svg","text");U.setAttribute("id",k),U.setAttribute("x","0"),U.setAttribute("y",p.toString()),U.setAttribute("fill",t.LabelColor),U.setAttribute("font-size",t.LabelSize),U.setAttribute("font-style",t.LabelFontStyle),U.setAttribute("font-family",t.LabelFontFamily),U.setAttribute("font-weight",t.LabelFontWeight),U.setAttribute("text-anchor","middle"),U.setAttribute("transform","translate( "+h+" "+d+" )"),U.setAttribute("opacity",t.LabelOpacity),U.style.visibility="visible",U.style.cursor="pointer",U.setAttribute("class","clusterGroup"),U.innerHTML=(l.length+1).toString(),b&&U.classList.add("e-maps-cluster"),c.appendChild(U),c.setAttribute("class","clusterGroup"),"Balloon"!==t.Shape?c.appendChild(P):c.appendChild(m),C.children[w].style.visibility="hidden",C.children[w].style.content="marker",C.children[w].classList.add("e-maps-marker-hidden")}l=[]}}}if(c.childElementCount>0){var H=document.getElementById(r+"_LayerIndex_"+e);H.appendChild(c),f=document.getElementById(r+"_LayerIndex_"+e+"_MarkerGroup");for(w=0;w<c.childElementCount;w++)if("hidden"!==c.children[w].style.visibility&&null!==(i=(g=c.children[w]).getBoundingClientRect())&&!(g.id.indexOf("_datalabel_")>-1)){for(O=w+1;O<c.childElementCount;O++)if("hidden"!==c.children[O].style.visibility){var F=c.children[O];M=parseInt(F.id.split("_MarkerIndex_")[1].split("_")[0],10),S=parseInt(F.id.split("_dataIndex_")[1].split("_")[0],10);null===(n=F.getBoundingClientRect())||F.id.indexOf("_datalabel_")>-1||i.left>n.right||i.right<n.left||i.top>n.bottom||i.bottom<n.top||(v.push(F),v.push(c.children[O-1]),c.children[O].style.visibility="hidden",c.children[O-1].style.visibility="hidden",a.push(M.toString()+":"+S.toString()))}if(v.length>0){g=c.children[w];for(var Y=0;Y<v.length;Y++)"g"===g.tagName?g.children[0].textContent=g.children[0].textContent+","+v[Y].textContent:g.textContent=g.textContent+","+v[Y].textContent,c.children[w-1].textContent=(+c.children[w-1].textContent+ +v[Y+1].textContent).toString(),Y++}v=[]}for(;0<c.children.length;)f.insertBefore(c.children[0],f.firstChild);(H=document.getElementById(r+"_LayerIndex_"+e)).appendChild(f),H.removeChild(c)}}},r.prototype.createClusterShape=function(e,t,i,n,s,o,r,a){var l=document.createElementNS("http://www.w3.org/2000/svg",e);return l.setAttribute("id",t),l.setAttribute("fill",i),l.setAttribute("stroke",a.BorderColor),l.setAttribute("stroke-width",a.BorderWidth),l.setAttribute("stroke-dasharray",a.DashArray),l.setAttribute("fill-opacity",n),l.setAttribute("stroke-opacity",a.BorderOpacity),l.setAttribute("transform",s),l.setAttribute("style","visibility:visible"),l.setAttribute("style","cursor: pointer"),o?l.setAttribute("class","clusterGroup"):l.setAttribute(null,"class","clusterGroup"),l.innerHTML=r,l},r.prototype.mergeSeparation=function(){this.markerClusterExpandCheck&&this.clusterData&&(this.mergeSeparateCluster(this.clusterData,this.id),this.markerClusterExpandCheck=!1)},r.prototype.click=function(e){var t=this;if("pointerdown"!==e.type||"mouse"!==e.pointerType){var i=e.target.id,n=this.getMousePosition(e.pageX,e.pageY);i.split("_")[0];if((i.indexOf("_Left_Page_Rect")>-1||i.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",i.indexOf("_Left_Page_Rect")>-1?1:0),i.indexOf("_Zooming_")>-1&&this.options.enableZoom){var s="pointerdown"===e.type?"click":e.type,o=1;if(this.mergeSeparation(),i.indexOf("_ZoomIn_")>-1&&(o=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(o,i.split("_Zooming_ToolBar_")[1].split("_")[0],s)),i.indexOf("_ZoomOut_")>-1&&(o=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,this.factorCount++,this.triggerEnableZoom(o,i.split("_Zooming_ToolBar_")[1].split("_")[0],s)),i.indexOf("_Reset_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){this.zoomClick=!1;var r=i.split("_Zooming_ToolBar_")[1].split("_")[0];this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",r,s)}i.indexOf("_Zoom_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Zoom_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!0,this.allowPanning=!1,this.enableSelectionZoom=!0),i.indexOf("_Pan_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Pan_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!1,this.allowPanning=!1,this.enableSelectionZoom=!1,this.isPan=!0)}if((i.indexOf("MapAreaBorder")>-1||i.indexOf("shapeIndex")>-1||i.indexOf("_Legend_")>-1||i.indexOf("BubbleIndex")>-1||i.indexOf("Zooming")>-1||i.indexOf("MapMargin")>-1||""===i||this.markerClusterExpandCheck)&&this.mergeSeparation(),(""===i||-1===i.indexOf(this.element.id))&&!sf.base.isNullOrUndefined(e.target.offsetParent)){var a=e.target.offsetParent.id;i=a.indexOf("_MarkerIndex_")>-1?a:i}if(i.indexOf("_LayerIndex_")>-1&&i.indexOf("_MarkerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var l=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),h=parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10),d=parseInt(i.split("_dataIndex_")[1].split("_")[0],10),c=document.getElementById(i),p=void 0;(i.indexOf("cluster")>-1||i.indexOf("Cluster")>-1)&&(this.mergeSeparation(),i.indexOf("_cluster_")>-1&&i.indexOf("_datalabel_")>-1&&(c=document.getElementById(i.split("_datalabel")[0])),"Balloon"===this.markerClusterCollection[l].Shape?!sf.base.isNullOrUndefined(c.firstElementChild)&&c.firstElementChild.innerHTML.length>0&&(p=c.firstElementChild.innerHTML.split(",")):!sf.base.isNullOrUndefined(c)&&c.innerHTML.length>0&&(p=c.innerHTML.split(","))),this.removeAllHighlight(),(!(i.indexOf("markerClusterConnectorLine")>-1)&&i.indexOf("_MarkerIndex_")>-1||i.indexOf("cluster")>-1&&("click"==e.type||"pointerdown"==e.type))&&this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",l,h,d,i,n.x,n.y,p,i.indexOf("cluster")>-1?"cluster":"marker",this.isTouch,e.layerX,e.layerY)}if(i.indexOf("shapeIndex")>-1&&"Click"===this.options.tooltipDisplayMode&&!sf.base.isNullOrUndefined(this.dotNetRef)){l=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10);var u=parseInt(i.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",i,n.x,n.y,l,u,"Shape",0)}if(i.indexOf("_LayerIndex_")>-1&&i.indexOf("BubbleIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){l=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),h=parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10),d=parseInt(i.split("_dataIndex_")[1].split("_")[0],10),c=document.getElementById(i);this.dotNetRef.invokeMethodAsync("TriggerBubbleClick",l,h,d,i,n.x,n.y,e.layerX,e.layerY)}if(i.indexOf("_Legend_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.removeAllHighlight(),"touch"===e.pointerType&&"pointerdown"===e.type||this.dotNetRef.invokeMethodAsync("TriggerLegendClick",parseInt(i.split("_Index_")[1].split("_")[0],10))),-1!==i.indexOf("_shapeIndex_")||-1!==i.indexOf("_MarkerIndex_")||-1!==i.indexOf("_BubbleIndex_")||"Click"!==this.options.tooltipDisplayMode||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",n.x,n.y,0,0,"",0),"touch"===e.pointerType&&-1===i.indexOf("_cluster_")&&(i.indexOf("_shapeIndex_")>-1||i.indexOf("BubbleIndex")>-1||i.indexOf("_MarkerIndex_")>-1)){l=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),h=i.indexOf("_BubbleIndex_")>-1?parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10):i.indexOf("_MarkerIndex_")>-1?parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10):parseInt(i.split("_shapeIndex_")[1].split("_")[0],10),d=i.indexOf("_BubbleIndex_")>-1||i.indexOf("_MarkerIndex_")>-1?parseInt(i.split("_dataIndex_")[1].split("_")[0],10):0;var f=i.indexOf("_BubbleIndex_")>-1?"Bubble":i.indexOf("_MarkerIndex_")>-1?"Marker":"Shape";clearTimeout(this.tooltipCountTimer),this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",i,n.x,n.y,l,"Shape"===f?h:d,f,h),this.tooltipCountTimer=setTimeout((function(){t.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",n.x,n.y,0,0,"",0)}),1500)}this.renderTitleTooltip(i,n,e),this.renderLegendTitleTooltip(i,n,e),this.renderLegendTextTooltip(i,n,e),this.renderInteractiveLegend(i,e)}},r.prototype.removeCluster=function(){var e=document.querySelectorAll('[class="clusterGroup"]');if(e.length>0)for(var t=0;t<e.length;t++)document.getElementById(e[t].id).remove();else if((e=document.querySelectorAll('[class="clusterGroup e-maps-cluster"]')).length>0)for(var i=0;i<e.length;i++)document.getElementById(e[i].id).remove();for(var n=document.querySelectorAll('[class="e-maps-marker-hidden"]'),s=0;s<n.length;s++){var o=document.getElementById(n[s].id);o.style.visibility="visible",o.classList.remove("e-maps-marker-hidden")}},r.prototype.createImageUrl=function(e,t){var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e.outerHTML+"</svg>";return window.URL.createObjectURL(new Blob("SVG"===t?[i]:[(new XMLSerializer).serializeToString(e)],{type:"image/svg+xml"}))},r.prototype.imageExport=function(i,n,s,o){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){return e=this,[2,new Promise((function(t,r){var a=document.createElement("canvas"),l=e.element.getBoundingClientRect();a.width=l.width,a.height=l.height;var h=document.getElementById(e.element.id+"_svg"),d=e.createImageUrl(h,i),c=document.getElementById(e.element.id+"_animated_tiles").children.length,p=a.getContext("2d"),u=document.getElementById(e.element.id+"_Map_title"),f=document.getElementById(e.element.id+"_MapMargin");sf.base.isNullOrUndefined(f)||(p.fillStyle=f.getAttribute("fill"),"Tailwind"!==o&&"Bootstrap5"!==o&&"Fluent"!==o&&"Material3"!==o||"rgba(255, 255, 255, 0)"!==p.fillStyle&&"rgba(0, 0, 0, 0)"!==p.fillStyle&&"transparent"!==p.fillStyle?"TailwindDark"!==o&&"Bootstrap5Dark"!==o&&"FluentDark"!==o&&"Material3Dark"!==o||"rgba(255, 255, 255, 0)"!==p.fillStyle&&"rgba(0, 0, 0, 0)"!==p.fillStyle&&"transparent"!==p.fillStyle||(p.fillStyle="rgba(0, 0, 0, 1)"):p.fillStyle="rgba(255,255,255, 1)",p.fillRect(0,0,l.width,l.height)),sf.base.isNullOrUndefined(u)||(p.font=u.getAttribute("font-size")+" Arial",p.fillStyle=u.getAttribute("fill"),p.fillText(u.textContent,parseFloat(u.getAttribute("x")),parseFloat(u.getAttribute("y")))),p.save();var g=document.getElementById(e.element.id+"_Tile_SVG_Parent");p.rect(parseFloat(g.style.left),parseFloat(g.style.top),parseFloat(g.style.width),parseFloat(g.style.height)),p.clip(),p.fillRect(0,0,l.width,l.height),e.exportedCount=0;for(var m=[],v=0;v<c;v++){var b=document.getElementById(e.element.id+"tile"+v),y=new Image;y.crossOrigin="Anonymous",m.push(e.renderImages(a,b,p,y,c,i,n,d,e,s)),y.src=b.children[0].getAttribute("src")}Promise.all(m).then((function(e){for(var i=0;i<e.length;i++)if(null!=e[i]){t(e[i]);break}}))}))]}))}))},r.prototype.renderImages=function(e,t,i,n,s,o,r,a,l,h){return new Promise((function(d,c){n.onload=function(){l.exportedCount++,i.setTransform(1,0,0,1,parseFloat(t.style.left)+10,parseFloat(t.style.top)+parseFloat(document.getElementById(l.element.id+"_tile_parent").style.top));if(i.drawImage(n,0,0,257,257),l.exportedCount===s){var c=document.getElementById(l.element.id+"_Tile_SVG_Parent");a=l.createImageUrl(c.children[0],o);var p=new Image;p.onload=function(){if(i.setTransform(1,0,0,1,parseFloat(c.style.left),parseFloat(c.style.top)),i.drawImage(p,0,0),h)l.triggerDownload(o,r,e.toDataURL("image/png").replace("image/png","image/octet-stream")),d(null);else{var t="JPEG"===o?e.toDataURL("image/jpeg"):"PNG"===o?e.toDataURL("image/png"):"";d(t)}},p.src=a}else d(null)}}))},r.prototype.triggerDownload=function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},r.prototype.getMousePosition=function(e,t){var i=this.element.getBoundingClientRect(),s=this.element.ownerDocument.defaultView.pageXOffset,o=this.element.ownerDocument.defaultView.pageYOffset,r=this.element.ownerDocument.documentElement.clientTop,a=this.element.ownerDocument.documentElement.clientLeft;return this.positionX=i.left+s-a,this.positionY=i.top+o-r,new n(e-this.positionX,t-this.positionY)},r.prototype.getBound=function(e){var t=document.getElementById(e);return{x:t.offsetLeft,y:t.offsetTop}},r.prototype.createToolbarStyle=function(e,t){var i=document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path");sf.base.isNullOrUndefined(i)||i.setAttribute("stroke",this.toolbarColor),this.enableSelectionZoom||(this.zoomClick=!1);var n=document.getElementById(this.element+"_zoomToolbar_style");n&&n.parentNode.removeChild(n);var s=".e-maps-toolbar:hover { opacity:1; } .e-maps-toolbar:hover > circle { stroke:"+e+"; } .e-maps-toolbar:hover > path { fill: "+e+" ;  stroke: "+e+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",o=document.createElement("style");o.id=this.element+"_zoomToolbar_style",o.appendChild(document.createTextNode(s)),t.appendChild(o)},r.prototype.render=function(){this.wireEvents()},r}();return{getMarker:function(e,t,i){var n=window.sfBlazor.getCompInstance(i);n&&n.element&&n.clusterExpand(e,t)},markerCluster:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.clusterMarkerProcess()},clusterSeperation:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.mergeSeparation()},itemHighlight:function(e,t,i,n,s,o){var r=window.sfBlazor.getCompInstance(o);r&&r.element&&r.itemHighlightHandle(e,t,i,n,s)},shapeHighlight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(n);s&&s.element&&s.shapeHighlightHandle(e,t,i)},panDirection:function(e,t,i,n,s,o){var r=window.sfBlazor.getCompInstance(o);if(r&&r.element){var a=document.getElementById(r.element.id+"_animated_tiles");r.isTileMap&&!sf.base.isNullOrUndefined(a)&&(r.currentTiles=a.cloneNode(!0)),r.panning(e,t,i,n,s,!1),sf.base.isNullOrUndefined(r.dotNetRef)||r.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",r.isTileMap?r.translatePoint:r.shapeTranslatePoint,r.tileTranslatePoint,r.scaleFactor,!1)}},initialize:function(e,t,i){return new r(e.id,e,t,i).render(),this.getElementSize(e.id)},updateInstance:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.dataSource=t.dataSource?JSON.parse(t.dataSource):null,i.options.layerHighlightSettings=JSON.parse(t.layerHighlightSettings),i.options.markerHighlightSettings=JSON.parse(t.markerHighlightSettings),i.options.bubbleHighlightSettings=JSON.parse(t.bubbleHighlightSettings),i.options.navigationHighlightSettings=JSON.parse(t.navigationHighlightSettings),i.options.polygonHighlightSettings=JSON.parse(t.polygonHighlightSettings),i.options.selectionSettings=JSON.parse(t.selectionSettings))},getElementSize:function(e){var t,i,n,s,o=document.getElementById(e);if(null!==o){var r=o.getBoundingClientRect();t=r.width,i=r.height,n=r.x,s=r.y}return{width:t,height:i,isIE:sf.base.Browser.isIE,x:n,y:s,isDevice:sf.base.Browser.isDevice}},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},getBound:function(e){var t=document.getElementById(e);return{x:t.offsetLeft,y:t.offsetTop}},getBoundData:function(e){var t=document.getElementById(e);return{x:t.getBoundingClientRect().x,y:t.getBoundingClientRect().y}},getTileZoom:function(i,n,s,o,r,a,l){return e(this,void 0,void 0,(function(){var e,h,d,c,p,u,f,g,m,v,b;return t(this,(function(t){switch(t.label){case 0:e=document.getElementById(i+"_animated_tiles"),h=parseInt(e.className,10),e.children[l].setAttribute("style","top:"+s+"; height:"+r+";width:"+a+"; left:"+n+"; position:absolute;"),e.children[l].innerHTML="",(d=document.createElement("img")).src=o,e.children[l].appendChild(d),c=document.getElementById(i+"_LayerCollections"),p=0,t.label=1;case 1:if(!(p<c.children.length))return[3,8];u=0,t.label=2;case 2:if(!(u<c.children[p].childElementCount))return[3,7];if(!(c.children[p].children[u].id.indexOf("MarkerGroup")>-1))return[3,6];f=0,t.label=3;case 3:return f<c.children[p].children[u].childElementCount?(g=parseInt(c.children[p].children[u].children[f].id.split("_LayerIndex_")[1].split("_")[0],10),m=parseInt(c.children[p].children[u].children[f].id.split("_MarkerIndex_")[1].split("_")[0],10),v=parseInt(c.children[p].children[u].children[f].id.split("_dataIndex_")[1].split("_")[0],10),[4,this.dotNetRef.invokeMethodAsync("ZoomMarker",g,m,v,0,0,h)]):[3,6];case 4:b=t.sent(),c.children[p].children[u].children[f].setAttribute("transform","translate("+b[0]+","+b[1]+")"),t.label=5;case 5:return f++,[3,3];case 6:return u++,[3,2];case 7:return p++,[3,1];case 8:return[2,l]}}))}))},getLayer:function(e){var t=document.getElementById(e+"_LayerCollections").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getElement:function(e){var t=document.getElementById(e).getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getSvg:function(e){var t=document.getElementById(e+"_svg").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},updateTileTranslatePoint:function(e,t,i,n,s,o,r,a,l,h,d,c){var p=window.sfBlazor.getCompInstance(c);p&&p.element&&(p.tileTranslatePoint={x:e.x,y:e.y},p.translatePoint={x:t.x,y:t.y},p.areaRect={x:i,y:n,width:s,height:o},p.marginLeft=r,p.marginTop=a,p.labelCollection=JSON.parse(h),p.dataLabelTemplateCollection=JSON.parse(d),p.tileZoomLevel=p.options.factor=p.scaleFactor=l,(l===p.options.maxZoom||l>1||1===l)&&""===p.previousId&&(sf.base.Browser.isDevice&&p.setToolbarButtonColor(p.tileZoomLevel,c+"_Zooming_"),l===p.options.maxZoom&&document.getElementById(p.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(p.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",p.toolbarColor),document.getElementById(p.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",p.toolbarColor),p.isPan=!1)),p.isTileMap&&p.previousId.indexOf("_Reset_")>-1&&(p.options.enablePanning||document.getElementById(p.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(p.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",p.toolbarColor),document.getElementById(p.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",p.toolbarColor)),p.enableSelectionZoom=!p.enableSelectionZoom&&p.enableSelectionZoom),p.isPan=!!(p.previousId.indexOf("_Reset_")>-1&&p.options.enablePanning)||p.isPan)},updateTranslatePoint:function(e,t,i,n,s,o,r,a,l,h,d){var c=window.sfBlazor.getCompInstance(d);c&&c.element&&(c.shapeTranslatePoint=e,c.areaRect={x:t,y:i,width:n,height:s},c.marginLeft=o,c.marginTop=r,c.options.factor=c.scaleFactor=a,c.labelCollection=JSON.parse(l),c.dataLabelTemplateCollection=JSON.parse(h))},updateZoomSettings:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableZoom=t.enable,i.options.zoomOnClick=t.zoomOnClick,i.options.doubleClickZoom=t.doubleClickZoom,i.options.enablePanning=t.enablePanning,i.options.enablePinchZooming=t.pinchZooming,i.options.enableSelectionZooming=t.enableSelectionZooming,i.options.enableMouseWheelZoom=t.mouseWheelZoom)},updateMarkerCollection:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.dataSource=JSON.parse(t.markerDataSource))},updateCollection:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.layerHighlightSettings=JSON.parse(t.layerHighlightSettings),i.options.markerHighlightSettings=JSON.parse(t.markerHighlightSettings),i.options.navigationHighlightSettings=JSON.parse(t.navigationHighlightSettings),i.options.polygonHighlightSettings=JSON.parse(t.polygonHighlightSettings),i.bubbleCollection=JSON.parse(t.bubble),i.labelCollection=JSON.parse(t.dataLabel),i.dataLabelTemplateCollection=JSON.parse(t.dataLabelTemplate),i.markerSettings=JSON.parse(t.markerSettings),i.geometryType=JSON.parse(t.geometryType),i.allowMarkerDragStartEvent=t.allowMarkerDragStartEvent,i.navigation=JSON.parse(t.navigationLine),i.polygon=JSON.parse(t.polygon),i.markerClusterCollection=JSON.parse(t.markerCluster),i.baseMapBounds={latitudeMax:t.latitudeMax,latitudeMin:t.latitudeMin,longitudeMax:t.longitudeMax,longitudeMin:t.longitudeMin,minBounds:t.minBounds,maxBounds:t.maxBounds,availableSize:t.availableSize,mapsAreaRect:t.mapsAreaRect},i.isTileMap=t.isTileMap,i.legendSettings=JSON.parse(t.legendSettings),i.legendDetails=null!=t.legendDetails?JSON.parse(t.legendDetails):null,i.legendFill=null!=t.legendFill?JSON.parse(t.legendFill):null,i.legendShapeCollection=null!=t.legendShapeCollection?JSON.parse(t.legendShapeCollection):null,i.urlTemplate=t.urlTemplate,i.key=t.key,i.dataSource=JSON.parse(t.markerDataSource),i.polygonDataSource=JSON.parse(t.polygonDataSource),i.toolbarSelection=t.toolbarSelection,i.toolbarColor=t.toolbarColor,i.mapsBorderWidth=t.mapsBorder,i.toolbarButtonOpacity=t.toolbarButtonOpacity,i.toolbarShapeOpacity=t.toolbarShapeOpacity,i.removeAllHighlight())},updateLayerHighlight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(n);s&&s.element&&(i?(s.options.layerHighlightSettings[e].BorderColor=t.borderColor,s.options.layerHighlightSettings[e].BorderWidth=t.borderWidth,s.options.layerHighlightSettings[e].BorderOpacity=t.borderOpacity):(s.options.layerHighlightSettings[e].Fill=t.fill,s.options.layerHighlightSettings[e].Opacity=t.opacity,s.options.layerHighlightSettings[e].Enable=t.enable))},updateMarkerHighlight:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(s);o&&o.element&&(n?(o.options.markerHighlightSettings[e][t].BorderColor=i.borderColor,o.options.markerHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.markerHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.markerHighlightSettings[e][t].Fill=i.fill,o.options.markerHighlightSettings[e][t].Opacity=i.opacity,o.options.markerHighlightSettings[e][t].Enable=i.enable))},updateBubbleHighlight:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(s);o&&o.element&&(n?(o.options.bubbleHighlightSettings[e][t].BorderColor=i.borderColor,o.options.bubbleHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.bubbleHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.bubbleHighlightSettings[e][t].Fill=i.fill,o.options.bubbleHighlightSettings[e][t].Opacity=i.opacity,o.options.bubbleHighlightSettings[e][t].Enable=i.enable))},updateTooltipDisplayMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.tooltipDisplayMode=t)},updateNavigationHighlight:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(s);o&&o.element&&(n?(o.options.navigationHighlightSettings[e][t].BorderColor=i.borderColor,o.options.navigationHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.navigationHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.navigationHighlightSettings[e][t].Fill=i.fill,o.options.navigationHighlightSettings[e][t].Opacity=i.opacity,o.options.navigationHighlightSettings[e][t].Enable=i.enable))},updatePolygonHighlight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(n);s&&s.element&&(i?(s.options.polygonHighlightSettings[e].BorderColor=t.borderColor,s.options.polygonHighlightSettings[e].BorderWidth=t.borderWidth,s.options.polygonHighlightSettings[e].BorderOpacity=t.borderOpacity):(s.options.polygonHighlightSettings[e].Fill=t.fill,s.options.polygonHighlightSettings[e].Opacity=t.opacity,s.options.polygonHighlightSettings[e].Enable=t.enable))},exportToImage:function(i,n,s,o,r){return e(this,void 0,void 0,(function(){var a,l,h=this;return t(this,(function(d){switch(d.label){case 0:return(l=window.sfBlazor.getCompInstance(o))&&l.element?[4,l.imageExport(i,n,s,r)]:[3,2];case 1:a=d.sent(),d.label=2;case 2:return a instanceof Promise?[4,a.then((function(i){return e(h,void 0,void 0,(function(){return t(this,(function(e){return[2,i]}))}))}))]:[3,4];case 3:return d.sent(),[3,5];case 4:return[2,a];case 5:return[2]}}))}))},getLegendRect:function(e,t){var i=document.getElementById(e).getBoundingClientRect(),n=e.split("_Legend_")[0],s=document.getElementById(n).getBoundingClientRect();return{x:i.left-s.left,y:i.top-s.top,width:i.width,height:i.height}},markerAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.markerAnimation(e,t)},layerAnimation:function(e,t,i,n,s,o){var r=window.sfBlazor.getCompInstance(e);if(r&&r.element)for(var a=document.getElementById(e+"_LayerIndex_0"),l=0;l<a.children.length;l++)null!==a.children[l].getAttribute("transform")&&this.zoomAnimation(a.children[l],0,o,n,s,t,i,r)},slope:function(e,t){return e.x===t.x?null:(t.y-e.y)/(t.x-e.x)},interception:function(e,t){return null===t?e.x:e.y-t*e.x},zoomAnimation:function(e,t,i,n,s,o,r,a){var l=0,h={x:n.x,y:n.y},d=s-r,c={x:0,y:0},p=1;if(s!==r){var u=this.slope(o,h),f=this.interception(o,u),g=h.x-o.x,m=h.y-o.y;e.style.removeProperty("visibility"),this.animate(e,i,(function(e){e.timeStamp>e.delay&&(l=(e.timeStamp-e.delay)/e.duration,p=r+l*d,c.x=o.x+l*g/(p/s),sf.base.isNullOrUndefined(u)?c.y=o.y+l*m:c.y=u*c.x+f,a.applyTransform(p,c))}),(function(t){a.applyTransform(s,h),this.markerCluster(a.id),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerAnimation",e)}))}else e.setAttribute("transform","scale( "+s+" ) translate( "+h.x+" "+h.y+" )")},bubbleAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.bubbleAnimation(e,t)},animate:function(e,t,i,n){var s,o=this,r=null;s=window.requestAnimationFrame((function a(l){r||(r=l);var h=l-r;h<t?(i.call(o,{element:e,delay:0,timeStamp:h,duration:t}),window.requestAnimationFrame(a)):(window.cancelAnimationFrame(s),n.call(o,{element:e}),e.setAttribute("style","visibility:visible"))}))},getToolbarAlign:function(e,t){var i,n,s=t.verticalAlignment,o=t.horizontalAlignment,r=document.getElementById(e+"_Zooming_KitCollection");sf.base.isNullOrUndefined(r)||(i=r.getBoundingClientRect());var a=document.getElementById(e+"_ToolBar");sf.base.isNullOrUndefined(a)||(n=a.getBoundingClientRect());var l=0,h=0;switch(s){case 0:h=t.y;break;case 1:h=t.height/2-i.height/2+t.mapsBorder;break;case 2:h=t.height-i.height+t.mapsBorder-2*t.buttonPadding}switch(o){case 0:l=t.x;break;case 1:l=t.width/2-(sf.base.isNullOrUndefined(i)?0:0===i.width?n.width:i.width)/2+t.mapsBorder;break;case 2:l=t.width-(sf.base.isNullOrUndefined(i)?0:0===i.width?n.width:i.width)-2*t.buttonPadding+t.mapsBorder}var d=document.getElementById(e+"_ToolBar");d.style.left=l+"px",d.style.top=h+"px",d.style.visibility="visible";var c=t.color,p=window.sfBlazor.getCompInstance(e);p&&p.element&&p.createToolbarStyle(c,d)},getTemplate:function(e,t,i,n,s,o,r,a){for(var l=e[0],h=Object.keys(l),d=t,c=0;c<h.length;c++)"latitude"!==h[c].toLowerCase()&&"longitude"!==h[c].toLowerCase()&&(d=d.replace(new RegExp("{{:"+h[c]+"}}","g"),l[h[c].toString()]));var p=document.createElementNS("http://www.w3.org/2000/svg","div");p.setAttribute("id",s),p.style.position="absolute",p.style.transform="translate(-50 %, -50 %)",p.style.left=n.toString(),p.style.top=i.toString(),p.innerHTML=d.toString();var u=document.getElementById(a+"_LayerIndex_0_Markers_Template_Group");u.appendChild(p);var f=document.getElementById(a+"_Secondary_Element");return f.appendChild(u),document.getElementById(a).appendChild(f),d},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-maskedtextbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.MaskedTextBox=function(){"use strict";var e=function(){function e(e,t,i,n,s){this.ismultipledelete=!1,this.isClicked=!1,this.previousVal="",this.inputData=null,this.isFocusInput=!1,this.isKeyDown=!1,window.sfBlazor=window.sfBlazor,this.dataId=e,this.wrapperElement=t,this.isClicked=!1,this.sIndex=0,this.eIndex=0,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n,this.previousVal=this.options.maskedValue}return e.prototype.initialize=function(){sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"blur",this.focusOutHandler,this),sf.base.EventHandler.add(this.element,"paste",this.pasteHandler,this),sf.base.EventHandler.add(this.element,"cut",this.cutHandler,this),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.element,"input",this.inputHandler,this),sf.base.EventHandler.add(this.element,"select",this.selectionHandler,this)},e.prototype.focusOutHandler=function(e){var t=this.wrapperElement.querySelector(".e-clear-icon");null!==t&&t.classList.add("e-clear-icon-hide")},e.prototype.mouseDownHandler=function(e){this.isClicked=!0},e.prototype.mouseUpHandler=function(e){this.isClicked=!1,sf.base.Browser.isDevice&&(this.ismultipledelete=!1,this.sIndex=this.eIndex=0)},e.prototype.selectionHandler=function(e){var t=this.element;t.selectionStart!==t.selectionEnd&&sf.base.Browser.isDevice&&(this.sIndex=t.selectionStart,this.eIndex=t.selectionEnd)},e.prototype.keyDownHandler=function(e){var t=this.element;this.previousVal=t.value,this.isKeyDown=!0,sf.base.Browser.isDevice||(t.selectionStart!==t.selectionEnd?(this.sIndex=t.selectionStart,this.eIndex=t.selectionEnd):(this.ismultipledelete=!1,this.sIndex=this.eIndex=0))},e.prototype.inputHandler=function(e){if(this.options.mask){var t=this.element,i=t.selectionStart,n=t.selectionEnd;if(e.data&&"insertText"!==e.inputType)t.value=this.previousVal,t.selectionStart=t.selectionEnd=i-1;else if((e.data||e.inputType)&&this.isKeyDown){var s=e.data?e.data:"deleteContentBackward"===e.inputType?"Backspace":"deleteContentForward"===e.inputType?"Delete":null;if(this.sIndex!==this.eIndex?(this.ismultipledelete=!0,i=this.sIndex,n=this.eIndex,this.sIndex=this.eIndex=0):n=i=e.data?i-1:"deleteContentBackward"===e.inputType?i+1:i,t.value=this.previousVal,t.selectionStart=t.selectionEnd=i,this.ismultipledelete){this.ismultipledelete=!1;var o=this.multipleDeletion(this.previousVal,i,n);t.value=o,this.previousVal=t.value,t.selectionStart=t.selectionEnd=i,null!==s&&"Backspace"!==s&&"Delete"!==s&&this.updateMask(s,i)}else this.updateMask(s,i);this.previousVal=t.value,this.updateServerValue()}else this.inputData=t.value,t.value=this.previousVal,t.selectionStart=t.selectionEnd=t.selectionStart,this.pasteHandler(e);this.isKeyDown=!1}},e.prototype.multipleDeletion=function(e,t,i){for(var n=e,s=t;s<i;s++)n=n.substring(0,s)+this.options.promptMask[s]+n.substring(s+1);return n},e.prototype.updateServerValue=function(){var e=this,t=this.element;setTimeout((function(){e.dotNetRef.invokeMethodAsync("UpdateInputValue",t.value,!1)}),20)},e.prototype.updateMask=function(e,t){var i=this.element;if(!this.ismultipledelete){var n=this.previousVal,s="";t>=0&&t<this.options.customRegExpCollec.length&&(s=1===this.options.customRegExpCollec[t].length?this.getRegex(this.options.customRegExpCollec[t]):this.options.customRegExpCollec[t]);var o=new RegExp(s);if("Backspace"===e||"Delete"===e)"Backspace"===e?(this.options.promptMask[t-1]===this.options.promptCharacter?i.value=n.substring(0,t-1)+this.options.promptCharacter+n.substring(t):i.value=n.substring(0,t-1)+this.options.promptMask[t-1]+n.substring(t),i.selectionStart=i.selectionEnd=t-1):(this.options.promptMask[t]===this.options.promptCharacter?i.value=n.substring(0,t)+this.options.promptCharacter+n.substring(t+1):i.value=n.substring(0,t)+this.options.promptMask[t]+n.substring(t+1),i.selectionStart=i.selectionEnd=t);else if(t<this.options.promptMask.length)if(this.options.promptMask[t]===this.options.promptCharacter){if(o.test(e)){var r=this.getLetterCase(e,t);i.value=n.substring(0,t)+r+n.substring(t+1),i.selectionStart=i.selectionEnd=t+1}}else i.selectionStart=i.selectionEnd=t+1,this.updateMask(e,i.selectionStart)}},e.prototype.getRegex=function(e){var t="";switch(e){case"0":t="\\d";break;case"9":t="[0-9 ]";break;case"L":t="[A-Za-z]";break;case"A":t="[A-Za-z0-9]";break;case"a":t="[A-Za-z0-9 ]";break;case"C":t="[^]+";break;case"#":t="[0-9 +-]";break;case"?":t="[A-Za-z ]";break;case"&":t="[^ ]+";break;default:t="("===e||"+"===e||")"===e?"\\"+e:e}return t},e.prototype.getLetterCase=function(e,t){for(var i=!1,n=!1,s=!1,o=!1,r=this.options.hiddenMask,a=[],l=[],h=0;h<r.length;h++)"<"!==r[h]&&!i||">"===r[h]||"|"===r[h]?">"!==r[h]&&!n||"<"===r[h]||"|"===r[h]?"|"!==r[h]&&!s||"<"===r[h]||">"===r[h]?o||(a[h]=!1,l[h]=!1):(s=o=!0,n=i=!1,a[h]=!1,l[h]=!1,"|"===r[h]&&(r=r.replace(r[h],""))):(n=o=!0,i=s=!1,a[h]=!1,l[h]=!0,">"===r[h]&&(r=r.replace(r[h],""))):(i=o=!0,n=s=!1,a[h]=!0,l[h]=!1,"<"===r[h]&&(r=r.replace(r[h],"")));return l[t]?e.toUpperCase():a[t]?e.toLowerCase():e},e.prototype.focusHandler=function(e){var t=this,i=this.element,n=0,s=this.stripValue(i.value),o=!1,r=!1;if(null!==this.options.mask&&(null!==s&&""!==s||"Always"===this.options.floatLabelType||null===this.options.placeHolder||""===this.options.placeHolder||(i.value=this.options.maskedValue),setTimeout((function(){if(i.selectionStart===t.options.mask.length||i.value[i.selectionStart]===t.options.promptCharacter)o=!0;else for(var e=i.selectionStart;e<t.options.mask.length;e++){if(i.value[e]===t.options.promptCharacter){o=!0;break}if(i.value[e]!==t.options.mask[e]){o=!1;break}}})),setTimeout((function(){var e=i.selectionStart-1;if(e===t.options.mask.length-1||i.value[e]===t.options.promptCharacter)r=!0;else for(var n=e;n>=0;n--){if(i.value[n]===t.options.promptCharacter){r=!0;break}if(i.value[n]!==t.options.mask[n]){r=!1;break}}})),this.isClicked||this.isFocusInput||"Always"!==this.options.floatLabelType&&(null===s||""===s)&&null!==this.options.placeHolder&&""!==this.options.placeHolder)){for(this.isFocusInput=!0,n=0;n<this.options.mask.length;n++)if(i.value[n]===this.options.promptCharacter){setTimeout((function(){(o||r)&&(i.selectionEnd=n,i.selectionStart=n)}),110);break}this.isClicked=!1}},e.prototype.stripValue=function(e){var t="";if(null!==this.options.mask&&null!=e&&""!==e)for(var i=0;i<this.options.mask.length;i++)this.options.mask[i]!==e[i]&&(t+=e[i]);return t},e.prototype.pasteHandler=function(e){var t=this;if(null!==this.options.mask&&!this.options.readonly&&this.options.enabled){var i=this.element,n=void 0;if(void 0===e.clipboardData||this.inputData?(n=this.inputData,i.selectionStart=i.selectionEnd=0,this.inputData=null):n=e.clipboardData.getData("text/plain"),null!==n){var s={Readonly:!1,Enabled:!0,Value:i.value,selectionEnd:i.selectionEnd,selectionStart:i.selectionStart,IsMultipleDelete:this.ismultipledelete,PasteValue:n};e.preventDefault(),this.dotNetRef.invokeMethodAsync("UpdatePasteValue",s).then((function(e){i.value=e.inputValue,i.selectionStart=i.selectionEnd=e.cursorPosition,t.previousVal=i.value}))}}},e.prototype.cutHandler=function(e){if(this.options.mask){var t=this.element,i=t.selectionStart,n=t.selectionEnd;if(i!==n&&null!==this.options.mask){this.ismultipledelete=!0;var s=t.value.substring(i,n);e.clipboardData.setData("text",s),window.clipboardData.setData("text",s),t.value=this.multipleDeletion(t.value,i,n),t.selectionStart=t.selectionEnd=i,this.previousVal=t.value,this.updateServerValue()}}},e.prototype.propertyChange=function(e){var t=this.options.mask!==e.mask||this.options.promptCharacter!==e.promptCharacter;this.options=e,this.previousVal=this.options.maskedValue,t&&e.maskValue&&(this.element.value=e.maskValue,this.element.setSelectionRange(e.selectionStart,e.selectionStart))},e}();return{initialize:function(t,i,n,s,o){n&&new e(t,i,n,s,o).initialize()},propertyChange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.propertyChange(t)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.isFocusInput=!0,t.element.focus())},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()}}}()},"./modules/sf-mention.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Mention=function(){"use strict";var e="HidePopupAsync",t="ShowPopupAsync",i="OnSearchAsync",n=function(){function n(e,t,i,n,s){this.activeIndex=null,this.collision=[],window.sfBlazor=window.sfBlazor,this.dataId=e;var o=document.querySelector(t);this.inputElement=i?o.firstElementChild:this.checkAndUpdateInternalComponent(o),i&&(o.insertAdjacentElement("beforebegin",o.firstElementChild),sf.base.detach(o)),this.isContentEditable(this.inputElement)&&(this.inputElement.setAttribute("contenteditable","true"),sf.base.addClass([this.inputElement],["e-mention"])),this.inputElement.setAttribute("role","textbox"),this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return n.prototype.initialize=function(e){this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},sf.base.EventHandler.add(e,"keyup",this.onKeyUp,this),sf.base.Browser.isDevice||new sf.base.KeyboardEvents(e,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})},n.prototype.checkAndUpdateInternalComponent=function(e){return e&&e.classList.contains("e-richtexteditor")?e.querySelector(".e-content"):e},n.prototype.keyActionHandler=function(e){var t={Action:e.action,Key:e.key,Events:e,Type:e.type};this.isDisposed||this.dotNetRef.invokeMethodAsync("KeyActionHandlerAsync",t),("tab"!==e.action&&"up"!==e.action&&"down"!==e.action&&"close"!==e.action&&"space"!==e.action&&"enter"!==e.action&&"open"!==e.action&&("SfMention"===this.options.moduleName||"home"!==e.action&&"end"!==e.action)||"enter"===e.action&&!sf.base.isNullOrUndefined(this.isPopupOpen())||("up"===e.action||"down"===e.action)&&this.isPopupOpen())&&e.preventDefault()},n.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var n=i[t];switch(n){case"MinLength":this.options.minLength=e[n];break;case"SuffixText":this.options.suffixText=e[n];break;case"AllowSpaces":this.options.allowSpaces=e[n];break;case"MentionChar":this.options.mentionChar=e[n];break;case"ShowMentionChar":this.options.showMentionChar=e[n]}}},n.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},n.prototype.onKeyUp=function(n){var s,o={Key:n.key,Code:n.code,Location:n.location,CtrlKey:n.ctrlKey,ShiftKey:n.shiftKey,AltKey:n.altKey,MetaKey:n.metaKey,Repeat:n.repeat,Type:n.type};this.isContentEditable(this.inputElement)&&(this.range=this.getCurrentRange(),s=this.range.startContainer.textContent.split(""));var r=this.getTextRange(),a=this.getLastLetter(r),l=new RegExp("\\".concat(this.options.mentionChar),"g"),h=new RegExp("[a-zA-Z]","g");"Shift"!==n.key&&37!==n.keyCode&&39!==n.keyCode&&(!r||!a||"Enter"===n.code||27===n.keyCode||a.match(l)&&a.match(l).length>1||this.isContentEditable(this.inputElement)&&this.range.startContainer&&this.range.startContainer.previousElementSibling&&"BR"!==this.range.startContainer.previousElementSibling.nodeName&&this.range.startContainer.textContent.split("").length>0&&(1===s.length||-1===s[s.length-2].indexOf("")||1===this.range.startContainer.nodeType)?this.options.allowSpaces&&this.isPopupOpen()&&r&&""!==r.trim()&&h.test(r)&&-1!==r.indexOf(this.options.mentionChar)&&!this.isMatchedText()&&r.length>1&&" "!==r.replace(/\u00A0/g," ").charAt(r.length-2)&&this.list&&this.list.querySelectorAll("ul").length>0?(this.queryString=r.substring(r.lastIndexOf(this.options.mentionChar)+1).replace(" "," "),this.dotNetRef.invokeMethodAsync(i,o,this.queryString)):!this.isPopupOpen()||this.options.allowSpaces&&a?"Backspace"!==n.key&&"Delete"!==n.key||this.range.startOffset===this.range.endOffset||this.range.deleteContents():(this.dotNetRef.invokeMethodAsync(e),this.lineBreak=!0):(this.queryString=a.replace(this.options.mentionChar,""),this.options.mentionChar.charCodeAt(0)===a.charCodeAt(0)&&""!==this.queryString&&!this.lineBreak||""===this.queryString&&this.isPopupOpen()&&38!==n.keyCode&&40!==n.keyCode?this.dotNetRef.invokeMethodAsync(i,o,this.queryString):0!==a.indexOf(this.options.mentionChar)||this.isPopupOpen()||8===n.keyCode?this.options.allowSpaces&&this.isPopupOpen()&&""!==this.queryString&&r&&""!==r.trim()&&r.replace(" "," ").lastIndexOf(" ")<r.length-1&&38!==n.keyCode&&40!==n.keyCode&&8!==n.keyCode&&(this.queryString=r.substring(r.lastIndexOf(this.options.mentionChar)+1).replace(" "," "),this.dotNetRef.invokeMethodAsync(i,o,this.queryString)):(this.dotNetRef.invokeMethodAsync(i,o,this.queryString),this.isPopupOpen()||38===n.keyCode||40===n.keyCode||(this.dotNetRef.invokeMethodAsync(t),this.lineBreak=!1))))},n.prototype.isMatchedText=function(){for(var e=!1,t=0;t<(this.liCollections&&this.liCollections.length);t++)this.getTextRange()&&this.getTextRange().substring(this.getTextRange().lastIndexOf(this.options.mentionChar)+1).replace(" "," ").trim()===this.liCollections[t].getAttribute("data-value").toLowerCase()&&(e=!0);return e},n.prototype.getCurrentRange=function(){return this.range=this.inputElement.ownerDocument.getSelection().getRangeAt(0),this.range},n.prototype.getTextRange=function(){var e;if(this.isContentEditable(this.inputElement)){var t=this.range.startContainer;if(!sf.base.isNullOrUndefined(t)){var i=t.textContent,n=this.range.startOffset;i&&n>=0&&(e=i.substring(0,n))}}else{var s=this.inputElement;if(!sf.base.isNullOrUndefined(s)){var o=s.selectionStart;s.value&&o>=0&&(e=s.value.substring(0,o))}}return e},n.prototype.getLastLetter=function(e){if(sf.base.isNullOrUndefined(e))return"";var t=e.replace(/\u00A0/g," ").split(/\s+/);return t[t.length-1].trim()},n.prototype.renderPopup=function(e,t,i){if(!this.isPopupOpen()){var n;this.isContentEditable(this.inputElement)&&(this.range=this.getCurrentRange()),this.options=t,this.list=e.querySelector(".e-content"),this.list.querySelector(".e-active")&&sf.base.attributes(this.inputElement,{"aria-activedescendant":this.list.querySelector(".e-active").id}),sf.base.attributes(this.inputElement,{"aria-owns":this.dataId+"_options"}),this.liCollections=this.getItems();var s=sf.base.formatUnit(this.options.popupHeight);if(this.wireListEvents(),e){var o=document.getElementById(e.id);o&&sf.base.remove(o)}document.body.appendChild(e),e.style.visibility="hidden",e.style.display="block","auto"!==this.options.popupHeight?(this.list.style.maxHeight=(parseInt(s,10)-2).toString()+"px",e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)):e.style.height="auto",this.initializePopup(e,0,0),this.checkCollision(e),e.style.visibility="visible";var r=e.parentElement.offsetWidth-e.offsetWidth,a=e.offsetHeight;sf.base.addClass([e],"e-popup-close");this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),this.inputElement),n=this.getCoordinates(this.inputElement,this.getTriggerCharPosition()),this.isCollided?(this.collision.length>0&&this.collision.indexOf("right")>-1&&-1===this.collision.indexOf("bottom")?e.style.cssText="top: ".concat(n.top.toString(),"px;\n left: ").concat(r.toString(),"px;\nposition: absolute;\n display: block;"):this.collision&&this.collision.length>0&&this.collision.indexOf("bottom")>-1&&-1===this.collision.indexOf("right")?(e.style.left=sf.base.formatUnit(n.left),e.style.top=sf.base.formatUnit(n.top-parseInt(a.toString()))):this.collision&&this.collision.length>0&&this.collision.indexOf("bottom")>-1&&this.collision.indexOf("right")>-1?(e.style.left=sf.base.formatUnit(r),e.style.top=sf.base.formatUnit(n.top-parseInt(a.toString()))):e.style.left=sf.base.formatUnit(n.left),this.collision=[],this.isCollided=!1):e.style.cssText="top: ".concat(n.top.toString(),"px;\n left: ").concat(n.left.toString(),"px;\nposition: absolute;\n display: block;"),e.style.width="100%"===this.options.popupWidth||sf.base.isNullOrUndefined(this.options.popupWidth)?"auto":sf.base.formatUnit(this.options.popupWidth),"auto"!==this.options.popupHeight?(this.list.style.maxHeight=(parseInt(s,10)-2).toString()+"px",e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)):e.style.height="auto",e.style.zIndex=1e3===this.options.zIndex?sf.popups.getZindexPartial(e).toString():this.options.zIndex.toString(),this.isPopupOpen()||this.inputElement.removeAttribute("aria-activedescendant")}},n.prototype.search=function(i,n,s){var o=this,r=this.getTextRange(),a=this.getLastLetter(r);this.options.ignoreCase&&(i===a||i===a.toLowerCase())||!this.options.ignoreCase&&i===a?this.dotNetRef.invokeMethodAsync(t).then((function(){sf.base.isNullOrUndefined(o.popupObj)||(o.popupObj.element.style.left=sf.base.formatUnit(n),o.popupObj.element.style.top=sf.base.formatUnit(s))})):this.isPopupOpen()&&this.dotNetRef.invokeMethodAsync(e)},n.prototype.getCoordinates=function(e,t){var i,n,s,o,r,a,l;if(this.isContentEditable(this.inputElement)){var h=this.getTriggerCharPosition();o=this.range,s=document.createRange(),this.getTextRange()&&-1!==this.getTextRange().lastIndexOf(this.options.mentionChar)?(s.setStart(o.startContainer,h),s.setEnd(o.startContainer,h)):(s.setStart(o.startContainer,o.startOffset),s.setEnd(o.startContainer,o.endOffset)),s.collapse(!1),l=0===s.getBoundingClientRect().top?s.startContainer.getClientRects()[0]:s.getBoundingClientRect()}else i=sf.base.createElement("div",{className:"e-form-mirror-div"}),document.body.appendChild(i),a=getComputedStyle(e),i.style.position="absolute",i.style.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach((function(e){i.style[e]=a[e]})),i.textContent=e.value.substring(0,t),"INPUT"===this.inputElement.nodeName&&(i.textContent=i.textContent.replace(/\s/g," ")),(n=sf.base.createElement("span")).textContent=e.value.substring(t)||".",i.appendChild(n),l=e.getBoundingClientRect();var d=document.documentElement,c=(window.pageXOffset||d.scrollLeft)-(d.clientLeft||0),p=(window.pageYOffset||d.scrollTop)-(d.clientTop||0),u=0;if(!sf.base.isNullOrUndefined(s)&&0===s.getBoundingClientRect().top)for(var f=0;f<this.range.startContainer.childNodes.length;f++)if(this.range.startContainer.childNodes[f].nodeType!==Node.TEXT_NODE&&""!==this.range.startContainer.childNodes[f].textContent.trim())u+=this.range.startContainer.childNodes[f].getClientRects()[0].width;else if(""!==this.range.startContainer.childNodes[f].textContent){var g=document.createElement("span");g.innerHTML=this.range.startContainer.childNodes[f].nodeValue,document.body.appendChild(g);var m=g.offsetWidth;document.body.removeChild(g),u+=m}return this.isContentEditable(this.inputElement)?r=this.collision&&this.collision.length>0&&this.collision.indexOf("right")>-1&&-1===this.collision.indexOf("bottom")?{top:l.top+p+parseInt(getComputedStyle(this.inputElement).fontSize,10),left:l.left+c+u}:{top:l.top+p+parseInt(getComputedStyle(this.inputElement).fontSize,10)-(this.isCollided?10:0),left:l.left+c+u}:(r={top:l.top+p+n.offsetTop+parseInt(a.borderTopWidth,10)+parseInt(a.fontSize,10)+3-e.scrollTop,left:l.left+c+n.offsetLeft+parseInt(a.borderLeftWidth,10)},document.body.removeChild(i)),r},n.prototype.getTriggerCharPosition=function(){var e,t=this.getTextRange();if(null!=t){e=0;var i=t.lastIndexOf(this.options.mentionChar);i>=e&&(e=i)}return e},n.prototype.isContentEditable=function(e){return e&&"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName},n.prototype.wireListEvents=function(){sf.base.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},n.prototype.unWireListEvents=function(){sf.base.EventHandler.remove(this.list,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},n.prototype.onMouseOver=function(e){var t=sf.base.closest(e.target,".e-list-item");this.setHover(t)},n.prototype.onMouseLeave=function(e){this.removeHover()},n.prototype.checkCollision=function(e){if(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&"SfMention"!==this.options.moduleName){var t=this.getCoordinates(this.inputElement,this.getTriggerCharPosition());this.collision=sf.popups.isCollide(e,null,t.left,t.top),this.collision.length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px",this.isCollided=!0)}},n.prototype.destroy=function(){sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick)},n.prototype.initializePopup=function(e,t,i){var n=this;this.popupContainer=e,this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.inputElement,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.options.enableRtl,offsetX:i,position:{X:"top",Y:"left"},actionOnScroll:"hide",zIndex:this.options.zIndex,close:function(){n.unWireListEvents(),n.popupObj&&n.popupObj.destroy(),!n.isDisposed&&document.body.contains(n.inputElement)&&n.dotNetRef.invokeMethodAsync("ClosePopupAsync").catch((function(){})),n.popupObj=null},open:function(){sf.base.EventHandler.add(document,"mousedown",n.onDocumentClick,n)}})},n.prototype.setValue=function(e,t){var i,n,s,o,r,a=this.inputElement.ownerDocument.getSelection(),l=this.getTriggerCharPosition();if(i="string"==typeof this.options.suffixText?this.options.suffixText:"",null!==e.text&&(n=this.mentionVal(e.text)),this.isContentEditable(this.inputElement)){s=this.getTriggerCharPosition()+this.options.mentionChar.length,this.range&&this.range.startContainer.textContent.trim()!==this.options.mentionChar&&(s=this.range.endOffset),r=this.range,o=document.createRange(),this.getTextRange()&&-1!==this.getTextRange().lastIndexOf(this.options.mentionChar)||this.getTextRange()&&this.getTextRange().trim()===this.options.mentionChar?(o.setStart(r.startContainer,l),o.setEnd(r.startContainer,s)):""!==r.commonAncestorContainer.textContent.trim()&&!sf.base.isNullOrUndefined(r.commonAncestorContainer.textContent.trim())&&this.getTextRange()&&-1!==this.getTextRange().lastIndexOf(this.options.mentionChar)?(o.setStart(r.startContainer,r.startOffset-1),o.setEnd(r.startContainer,r.endOffset-1)):(o.setStart(r.startContainer,r.startOffset),o.setEnd(r.startContainer,r.endOffset)),o.deleteContents();var h=sf.base.createElement("div");h.innerHTML=n;for(var d=document.createDocumentFragment(),c=void 0,p=void 0;c=h.firstChild;)p=d.appendChild(c);o.insertNode(d),p&&((o=o.cloneRange()).setStartAfter(p),o.collapse(!0),a.removeAllRanges(),a.addRange(o)),this.isPopupOpen()&&this.inputElement.focus();var u=new CustomEvent("UpdateEditorValue",{detail:{click:t}});return this.inputElement.dispatchEvent(u),!0}var f=this.inputElement,g=this.getTextRange().substring(l+this.options.mentionChar.length,this.getTextRange().length);return n+=i,s=l+this.options.mentionChar.length,s+=g.length,f.value=f.value.substring(0,l)+n+f.value.substring(s,f.value.length),f.selectionStart=l+n.length,f.selectionEnd=l+n.length,this.isPopupOpen()&&this.inputElement.focus(),!0},n.prototype.mentionVal=function(e){var t=this.options.showMentionChar?this.options.mentionChar:"";return this.options.hasDisplayTemplate&&(e=this.removeComments(document.querySelector("#"+this.dataId+"_displayTemplate"))),this.isContentEditable(this.inputElement)?'<span contenteditable="false" class="e-mention-chip">'+t+e+"</span>".concat("string"==typeof this.options.suffixText?this.options.suffixText:" "):t+e},n.prototype.removeComments=function(e){var t=e.innerHTML;return(t=t.replace(/<!--[\s\S]*?-->/g,"")).trim()},n.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);e.indexOf("%")>-1&&(e=(this.inputElement.offsetWidth*parseFloat(e)/100).toString()+"px");return e},n.prototype.onDocumentClick=function(t){var i=t.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(i,"#"+this.popupObj.element.id)||!this.isPopupOpen()||this.dotNetRef.invokeMethodAsync(e)},n.prototype.closePopup=function(e,t){if(this.options=t,this.isPopupOpen()&&!e.cancel&&this.popupObj){this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:20,delay:0})),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant")}},n.prototype.setScrollPosition=function(e){if(sf.base.isNullOrUndefined(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},n.prototype.scrollBottom=function(e){if(this.list&&this.list.querySelector(".e-active")&&!e){var t=this.list.querySelector(".e-active"),i=this.list.offsetHeight,n=t.offsetTop+t.offsetHeight-this.list.scrollTop,s=this.list.scrollTop+n-i;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s+parseInt(getComputedStyle(this.list).paddingTop,10);var o=t.offsetTop+t.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:(n>i||!(o>0&&this.list.offsetHeight>o))&&(this.list.scrollTop=s)}},n.prototype.scrollTop=function(){if(this.list&&this.list.querySelector(".e-active")){var e=this.list.querySelector(".e-active"),t=e.offsetTop-this.list.scrollTop,i=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:t<0?this.list.scrollTop=this.list.scrollTop+t:i>0&&this.list.offsetHeight>i||(this.list.scrollTop=e.offsetTop)}},n.prototype.setHover=function(e){e&&!e.classList.contains("e-hover")&&(this.removeHover(),sf.base.addClass([e],"e-hover"))},n.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&sf.base.removeClass(e,"e-hover")}},n.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},n}();return{initialize:function(e,t,i,s,o){if(document.querySelector(t)){var r=i?document.querySelector(t).firstElementChild:document.querySelector(t);new n(e,t,i,s,o).initialize(r)}},renderPopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e),s=document.querySelector("#"+e+"_popup");!sf.base.isNullOrUndefined(n)&&s&&n.renderPopup(s,t,i)},search:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.search(t,i,n)},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.closePopup(t,i)},setValue:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.setValue(t,i)},updateScrollPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setScrollPosition(t)},onPropertyChanged:function(e){var t=window.sfBlazor.getCompInstance(e.dataId);sf.base.isNullOrUndefined(t)||t.onPropertyChanged(e)},destroy:function(e,t,i){var n=window.sfBlazor.getCompInstance(e),s=document.querySelector(i.target),o=document.querySelector("#"+e+"_popup");sf.base.EventHandler.remove(s,"keyup",this.onKeyUp),sf.base.isNullOrUndefined(n)||(o&&o instanceof HTMLElement&&(n.isDisposed=!0,n.closePopup(t,i)),n.destroy())}}}()},"./modules/sf-menu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Menu=function(){"use strict";function e(e,i,n,s){if(9===n&&s&&(n=39),40===n||38===n){var o=void 0,r=void 0,a=void 0;i.classList.contains("e-menu-parent")?((a=(r=i).querySelector(".e-menu-item.e-focused"))?(o=Array.prototype.indexOf.call(r.children,a),o=40===n?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1):o=0,o=t(r,o,40===n)):i.classList.contains("e-menu-item")&&(a=(r=i.parentElement).querySelector(".e-menu-item.e-focused"),o=Array.prototype.indexOf.call(r.children,a||i),o=t(r,o=40===n?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1,40===n)),r&&-1!==o&&r.children[o].focus()}else if(((e.classList.contains("e-rtl")?39===n:37===n)||27===n||39===n&&!i.classList.contains("e-menu-caret-icon")&&s||13===n&&sf.base.closest(i,".e-menu-container"))&&(i.classList.contains("e-ul")||i.classList.contains("e-menu-item")&&!i.parentElement.classList.contains("e-contextmenu"))){var l=void 0;s&&(l=sf.base.select(s));r=i.classList.contains("e-ul")?i:i.parentElement;var h=sf.base.closest(r,".e-menu-vscroll"),d=void 0,c=h?h.previousElementSibling:r.previousElementSibling;if(!l||c&&13!==n){var p=sf.base.closest(r,".e-hamburger");d=p?sf.base.select(".e-menu-item.e-selected",p):sf.base.select(".e-menu-item.e-selected",c)}else d=sf.base.select(".e-menu-item.e-selected",l),(h=sf.base.select(".e-menu-vscroll",e))&&l.blazor__instance.destroyScroll("none");d&&d.focus()}}function t(e,i,n,s){void 0===s&&(s=0);var o=e.children[i];return s===e.childElementCount?-1:((o.classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=n?i===e.childElementCount-1?0:i+1:0===i?e.childElementCount-1:i-1,s++),((o=e.children[i]).classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=t(e,i,n)),i)}var i,n="e-menu-item",s=".e-focused",o="e-vertical",r=function(){function t(e,t){this.dataId=e.dataId,this.element=e.element,this.dotnetRef=t,this.enableScroller=e.enableScrolling,window.sfBlazor.setCompInstance(this),this.addEventListener(),this.updateScroll(e.enableScrolling,e.isRtl,!1)}return t.prototype.calculatePosition=function(e,t){var s,o;i=e;var r=e.element.getElementsByClassName(n)[e.itemIndex].getBoundingClientRect();this.popupInstance=window.sfBlazor.getCompInstance(e.popupDataId);var a=this.popupInstance.hideMenu(!0);if(a){if(this.popup=e.popup,e.enableScrolling){a=this.positionHelper(e,a);var l=this.popup.querySelector(".e-vscroll-bar");l&&sf.base.EventHandler.add(l,"scroll",this.scrollHandler,this)}var h=a.classList.contains("e-menu-parent")?a:sf.base.select(".e-menu-parent",a);this.popupInstance.setBlankIconStyle(h,e.isRtl);var d,c=h.getBoundingClientRect(),p=this.popupInstance.getMenuWidth(h,c.width,e.isRtl);if(e.isVertical){if(o=r.top,e.isRtl){if((s=r.left)-p<document.documentElement.clientLeft)(d=r.right+p)<document.documentElement.clientWidth&&(s=d)}else if((s=r.right)+p>document.documentElement.clientWidth)(d=r.left-p)>document.documentElement.clientLeft&&(s=d)}else if(o=r.bottom,e.isRtl){if(s=r.right,r.right-p<document.documentElement.clientLeft)(d=r.left+p)<document.documentElement.clientWidth&&(s=d)}else if((s=r.left)+p>document.documentElement.clientWidth)(d=r.right-p)>document.documentElement.clientLeft&&(s=d);var u=e.scrollHeight||c.height;if(o+u>document.documentElement.clientHeight){var f=document.documentElement.clientHeight-u-20;f>document.documentElement.clientTop&&(o=f)}this.popupInstance.updateProperty(e.showItemOnClick,e.element),this.popup.style.zIndex=sf.popups.getZindexPartial(this.popup).toString(),a.style.width=Math.ceil(p)+"px",this.popup.style.left=Math.ceil(s)+"px",this.popup.style.top=Math.ceil(o)+"px",h.style.visibility="",t&&h.focus()}},t.prototype.subMenuPosition=function(e,t){var i=window.sfBlazor.getCompInstance(e.popupDataId),n=i.hideMenu();e.enableScrolling&&n&&(n=this.positionHelper(e,n)),i.subMenuPosition(n,e.isRtl,e.showItemOnClick,!1,e.scrollHeight,!1,t)},t.prototype.positionHelper=function(e,t){return this.destroyScroll(null,t),e.scrollHeight?sf.navigations.addScrolling(sf.base.createElement,e.popup,t,"vscroll",e.isRtl,e.scrollHeight):t},t.prototype.clickHandler=function(e){var t=e.target;if(!sf.base.isNullOrUndefined(this.popup)&&sf.base.closest(t,"#"+this.popup.id)){if((o=sf.base.closest(t,"."+n))&&!o.classList.contains("e-menu-caret-icon")){sf.base.closest(t,"."+n+".e-selected")||this.destroyScroll("none");var i=sf.base.select(".e-selected",this.element);!i||sf.base.closest(document.activeElement,"#"+this.popup.id)&&"LI"!==document.activeElement.tagName||i.focus()}}else if(sf.base.closest(t,"#"+this.element.id+".e-hamburger")&&!t.classList.contains("e-menu-parent")&&!t.classList.contains("e-menu-container")){var o;(o=t.classList.contains(n)?t:sf.base.closest(t,"."+n+s))&&!o.classList.contains("e-menu-caret-icon")&&this.focusMenu(!0)}},t.prototype.resizeMenu=function(){if(this.enableScroller){var e=this.element.parentElement.querySelectorAll(".e-menu-container")[0],t=e.getElementsByClassName("e-menu-parent")[0],i=sf.base.select(".e-menu-hscroll",e),n=t&&t.offsetWidth,s=window.innerWidth-t.getBoundingClientRect().left;if(n>s){if(e.style.width=Math.ceil(s)+"px",!i){var r=sf.base.select(".e-menu",e);r&&sf.navigations.addScrolling(sf.base.createElement,e,r,"hscroll",!1)}}else if(i){var a=this.element.classList.contains(o)?sf.base.getInstance(i,sf.navigations.VScroll):sf.base.getInstance(i,sf.navigations.HScroll);sf.navigations.destroyScroll(a,i),e.style.width=""}}},t.prototype.scrollHandler=function(){var e=this.popup.querySelector(".e-menu-parent");null!=e&&e.classList.contains("e-transparent")&&e.classList.remove("e-transparent")},t.prototype.keyDownHandler=function(t){(this.element.children[0].tabIndex=-1,9===t.keyCode||t.shiftKey||t.preventDefault(),this.element.classList.contains("e-hamburger"))?e(this.element,t.target,t.keyCode):sf.base.select(".e-menu",this.element).classList.contains(o)?38!==t.keyCode&&40!==t.keyCode||e(this.element,t.target,t.keyCode):37!==t.keyCode&&39!==t.keyCode||e(this.element,t.target,37===t.keyCode?38:40);if(this.isTabFocused&&(t.target.classList.remove("e-focused"),this.isTabFocused=!1),9===t.keyCode||9===t.keyCode&&t.shiftKey){t.target.blur();var i=this;setTimeout((function(){i.element.children[0].tabIndex=0}),5)}},t.prototype.focusHandler=function(e){e.relatedTarget&&(e.target.querySelector("."+n+s)||(this.element.children[0].tabIndex=-1,e.target.children[0].focus(),e.target.children[0].classList.add("e-focused"),this.isTabFocused=!0))},t.prototype.focusMenu=function(e){if(sf.base.select(".e-menu-vscroll",this.popup)){this.destroyScroll("");var t=this.popupInstance.getLastMenu();t&&t.focus()}else{var i=sf.base.selectAll(".e-menu-parent",this.element);if(i.length)if(e)i[0].focus();else{var o=sf.base.select("."+n+s,i[i.length-1]);(o||i[i.length-1]).focus()}}},t.prototype.destroyScroll=function(e,t,i){var n,s=sf.base.selectAll(".e-menu-vscroll",this.popup),o=[].slice.call(sf.base.selectAll(".e-menu-parent",this.popup)),r=-1;!sf.base.isNullOrUndefined(e)&&t&&(r=o.indexOf(t)),s.forEach((function(s){null,n=sf.base.select(".e-ul",s),i||n&&!sf.base.isNullOrUndefined(e)?t?o.indexOf(n)>r&&(s.style.display=e):s.style.display=e:sf.navigations.destroyScroll(sf.base.getInstance(s,sf.navigations.VScroll),s,t)}))},t.prototype.mouseDownHandler=function(e){var t=e.target;if(this.isTabFocused){var i=this.element.querySelector("."+n+s);i&&(i.classList.remove("e-focused"),this.isTabFocused=!1)}this.element.children[0].tabIndex=0;var o=!document.body.contains(this.element);(sf.base.isNullOrUndefined(this.element)||o)&&this.removeEventListener(!1);var r=sf.base.closest(t,".e-scroll-nav");if(sf.base.isNullOrUndefined(this.popup)||!sf.base.closest(t,"#"+this.popup.id)||r){var a=sf.base.selectAll(".e-ul",this.element).length;if(o||!sf.base.select(s,this.element)&&!sf.base.select(".e-selected",this.element)||sf.base.closest(e.target,"#"+this.element.id)||r&&!(a>1)||this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!0,!1,!sf.base.isNullOrUndefined(r),!1,!1),!(sf.base.isNullOrUndefined(this.popup)||sf.base.isNullOrUndefined(this.popupInstance)||sf.base.closest(e.target,"."+n+".e-selected")&&this.popupInstance.subMenuOpen||r))if(this.popupInstance.subMenuOpen)this.destroyScroll("none");else{var l=sf.base.closest(e.target,".e-ul");sf.base.select(".e-menu-vscroll",this.popup)&&this.destroyScroll("none",l)}}},t.prototype.mouseOverHandler=function(e){var t=document.body.contains(this.element);!sf.base.isNullOrUndefined(this.element)&&t||this.removeEventListener(!1);var o=sf.base.closest(e.target,"."+n);this.popup&&this.popupInstance.subMenuOpen&&sf.base.closest(e.target,"#"+this.element.id)&&o&&(o.querySelector(".e-caret")&&parseInt(this.popup.style.top)===Math.ceil(e.target.getBoundingClientRect().top)||(this.destroyScroll("none",sf.base.closest(e.target,".e-ul"),!0),this.enableScroller&&i&&this.calculatePosition(i))),t&&sf.base.select(s,this.element)&&!sf.base.closest(e.target,"#"+this.element.id)&&this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!1,!1,!1,!0,!0)},t.prototype.updateScroll=function(e,t,i){if(e){sf.base.EventHandler.add(window,"resize",this.resizeMenu,this);var n=sf.base.select(".e-menu",this.element);n&&sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))&&sf.navigations.addScrolling(sf.base.createElement,this.element,n,n.classList.contains(o)?"vscroll":"hscroll",t)}else if(i){var s=sf.base.select(".e-menu-"+(this.element.classList.contains(o)?"vscroll":"hscroll"),this.element);if(s){sf.base.EventHandler.remove(window,"resize",this.resizeMenu);var r=this.element.classList.contains(o)?sf.base.getInstance(s,sf.navigations.VScroll):sf.base.getInstance(s,sf.navigations.HScroll);sf.navigations.destroyScroll(r,s)}}},t.prototype.orientationScroll=function(e,t){var i=sf.base.select(".e-menu-"+(this.element.classList.contains(o)?"vscroll":"hscroll"),this.element);if(i){sf.base.EventHandler.remove(window,"resize",this.resizeMenu);var n=this.element.classList.contains(o)?sf.base.getInstance(i,sf.navigations.VScroll):sf.base.getInstance(i,sf.navigations.HScroll);sf.navigations.destroyScroll(n,i)}else if(e&&!i){sf.base.EventHandler.add(window,"resize",this.resizeMenu,this);var s=sf.base.select(".e-menu",this.element);s&&sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))&&sf.navigations.addScrolling(sf.base.createElement,this.element,s,s.classList.contains(o)?"vscroll":"hscroll",t)}},t.prototype.addDocEvent=function(e,t,i,n){e.__eventList={};var s=e.__eventList.events=[],o=i;n&&(o=o.bind(n));for(var r=t.split(" "),a=0;a<r.length;a++)s.push({name:r[a],listener:i,debounce:o,id:n.element.id}),sf.base.Browser.isIE?e.addEventListener(r[a],o):e.addEventListener(r[a],o,{passive:!1});return o},t.prototype.removeDocEvent=function(e,t,i,n){var s,o,r=-1;"__eventList"in e&&(s=e.__eventList.events);for(var a=t.split(" "),l=0;l<a.length;l++){for(var h=s.length-1;h>=0;h--)s[h].name===a[l]&&s[h].listener===i&&s[h].id===n&&(r=h,o=s[h].debounce);-1!==r&&s.splice(r,1),o&&e.removeEventListener(a[l],o)}},t.prototype.addEventListener=function(){sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.element.children[0],"focus",this.focusHandler,this),this.addDocEvent(document,"mousedown touchstart",this.mouseDownHandler,this),this.addDocEvent(document,"mouseover",this.mouseOverHandler,this),this.addDocEvent(document,"click",this.clickHandler,this)},t.prototype.removeEventListener=function(e){e&&(sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(this.element.children[0],"focus",this.focusHandler)),this.removeDocEvent(document,"mousedown touchstart",this.mouseDownHandler,this.element.id),this.removeDocEvent(document,"mouseover",this.mouseOverHandler,this.element.id),this.removeDocEvent(document,"click",this.clickHandler,this.element.id)},t}();return{initialize:function(e,t){sf.base.isNullOrUndefined(e.element)||new r(e,t)},calculatePosition:function(e,t){var i=window.sfBlazor.getCompInstance(e.dataId);sf.base.isNullOrUndefined(i)||i.calculatePosition(e,t)},subMenuPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e.dataId);sf.base.isNullOrUndefined(i)||i.subMenuPosition(e,t)},focusMenu:function(e){var t=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(t)&&"INPUT"!==document.activeElement.tagName&&document.activeElement.className.indexOf("e-input")<0&&t.focusMenu(!1)},updateScroll:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.updateScroll(t,i,!0)},orientationScroll:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.orientationScroll(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeEventListener(!0)}}}()},"./modules/sf-multiselect.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.MultiSelect=function(){"use strict";var e="e-list-group-item",t=function(){function t(e,t,i,n,s,o){window.sfBlazor=window.sfBlazor,this.dataId=e,this.containerElement=t,this.childContainerElement=i,this.element=n,this.options=o,window.sfBlazor.setCompInstance(this),this.dotNetRef=s,this.isDisposed=!1}return t.prototype.initialize=function(){sf.base.EventHandler.add(window,"resize",this.windowResize,this),sf.base.EventHandler.add(this.element,"blur",this.blurHandler,this),sf.base.EventHandler.add(this.element,"input",this.inputHandler,this),sf.base.EventHandler.add(this.element,"touchstart",this.touchHandler,this)},t.prototype.blurHandler=function(){this.isDisposed||this.dotNetRef.invokeMethodAsync("InvokeBlurHandlerAsync")},t.prototype.touchHandler=function(){!!navigator.platform&&/iPad|iPhone|iPod|MacIntel/.test(navigator.platform)&&this.element.focus()},t.prototype.inputHandler=function(e){var t=null!=this.element&&this.element.placeholder.length,i=null!=e?e.target.value.length:0;this.element.size=Math.max(t,i)>0?Math.max(t,i):1},t.prototype.getPopupHeight=function(e,t,i){var n=Math.round(i.getBoundingClientRect().height);return(parseInt(e,10)-(n+t)).toString()+"px"},t.prototype.renderPopup=function(e,t,i,n,s,o){this.options=s,this.popupHolder=t,this.list=t.querySelector(".e-content")||sf.base.select(".e-content"),this.liCollections=this.getItems();var r,a=sf.base.formatUnit(this.options.popupHeight);if(document.body.appendChild(e),e.style.visibility="hidden",this.options.allowFiltering&&"CheckBox"===this.options.mode?(this.filterInput=e.querySelector("input.e-input"),r=this.filterInput.parentElement,sf.base.EventHandler.add(this.filterInput,"keypress",this.filterKeydown,this)):this.filterInput=this.element,"auto"!==this.options.popupHeight){var l=0;sf.base.isNullOrUndefined(r)||(l=r.parentElement.getBoundingClientRect().height,a=(parseInt(a,10)-l).toString()+"px");var h=0,d=e.querySelector(".e-selectall-parent");if(d&&(h=d.getBoundingClientRect().height,a=(parseInt(a,10)-h).toString()+"px"),e.querySelector(".e-ddl-header")){var c=e.querySelector(".e-ddl-header");a=this.getPopupHeight(a,l,c)}if(e.querySelector(".e-ddl-footer")){var p=e.querySelector(".e-ddl-footer");a=this.getPopupHeight(a,l,p)}this.list.style.maxHeight=(parseInt(a,10)-2).toString()+"px",e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)}else e.style.height="auto";if(this.popupCreation(e),sf.base.Browser.isDevice&&"CheckBox"===this.options.mode&&this.options.allowFiltering&&(this.popupObj.element.classList.add("e-ddl-device"),this.popupObj.element.classList.add("e-ddl-device-filter"),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),sf.base.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),sf.base.addClass([document.body,this.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition()),e.style.visibility="visible",sf.base.addClass([e],"e-popup-close"),sf.base.attributes(this.element,{"aria-expanded":"true"}),null!==i&&null!==i.popup&&n){for(var u=0,f=Object.keys(i.popup);u<f.length;u++){switch(f[u]){case"collision":!i.popup.collision||this.popupObj.collision.X===i.popup.collision.X.toLowerCase()&&this.popupObj.collision.Y===i.popup.collision.Y.toLowerCase()||(this.popupObj.collision={X:i.popup.collision.X.toLowerCase(),Y:i.popup.collision.Y.toLowerCase()});break;case"position":!this.popupObj.position||this.popupObj.position.X===i.popup.position.X&&this.popupObj.position.Y===i.popup.position.Y||(this.popupObj.position={X:i.popup.position.X,Y:i.popup.position.Y});break;case"relateTo":this.popupObj.relateTo!==i.popup.relateTo&&(this.popupObj.relateTo=i.popup.relateTo);break;case"targetType":this.popupObj.targetType!==i.popup.targetType.toLowerCase()&&(this.popupObj.targetType=i.popup.targetType);break;case"offsetX":this.popupObj.offsetX!==i.popup.offsetX&&(this.popupObj.offsetX=i.popup.offsetX);break;case"offsetY":this.popupObj.offsetY!==i.popup.offsetY&&(this.popupObj.offsetY=i.popup.offsetY)}}this.popupObj.dataBind(),this.popupObj.refreshPosition(this.popupObj.relateTo,!0)}this.options.enableVirtualization&&sf.base.EventHandler.add(this.list,"scroll",this.virtualScroll,this);this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),1e3===this.options.zIndex?this.element:null)},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px"},t.prototype.filterKeydown=function(e){""===this.filterInput.value&&32===e.keyCode&&this.list.querySelector(".e-item-focus")&&e.preventDefault()},t.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);e.indexOf("%")>-1&&(e=(this.containerElement.offsetWidth*parseFloat(e)/100).toString()+"px");return e},t.prototype.popupCreation=function(t){var i=this;this.popupContainer=t,this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.containerElement,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.options.enableRtl,position:{X:"left",Y:"bottom"},zIndex:this.options.zIndex,close:function(){sf.base.EventHandler.remove(i.list,"scroll",i.setFloatingHeader),sf.base.removeClass([i.containerElement],"e-icon-anim"),i.fixedHeaderElement=null,i.popupHolder.appendChild(i.popupContainer),sf.base.EventHandler.remove(document,"mousedown",i.onDocumentClick),sf.base.Browser.isDevice&&i.isFilterLayout()&&(sf.base.removeClass([document.body,i.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(i.list,"scroll",i.listScroll)),i.options.enableVirtualization&&sf.base.EventHandler.remove(i.list,"scroll",i.virtualScroll),i.popupObj&&i.popupObj.destroy(),sf.base.isNullOrUndefined(i.isDisposed)||i.isDisposed||i.dotNetRef.invokeMethodAsync("ClosePopup"),i.popupObj=null},open:function(){sf.base.EventHandler.add(document,"mousedown",i.onDocumentClick,i),i.options.allowFiltering&&i.filterInput&&i.filterInput.focus(),i.list.querySelector("li")&&i.list.querySelector("li").classList.contains(e)&&!t.classList.contains("e-multiselect-group")&&sf.base.EventHandler.add(i.list,"scroll",i.setFloatingHeader,i),i.setScrollPosition()},targetExitViewport:function(){sf.base.Browser.isDevice||i.isDisposed||i.dotNetRef.invokeMethodAsync("Hide")}})},t.prototype.virtualScroll=function(){if(this.popupObj&&this.popupObj.element){var e=parseInt(getComputedStyle(this.popupObj.element).borderWidth,10);e=0==e?1:e;var t=this.popupObj.element.classList.contains("e-popup-open");this.list.scrollTop+this.list.offsetHeight+e>=this.list.scrollHeight&&t&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("VirtualScrollHandlerAsync")}},t.prototype.onDocumentClick=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"[id='"+this.popupObj.element.id+"']")||this.containerElement.contains(e.target)?t===this.element||this.options.allowFiltering&&"CheckBox"===this.options.mode&&t===this.filterInput||!this.options.allowFiltering&&sf.base.Browser.isDevice&&t===this.containerElement.querySelector(".e-ddl-icon")||e.preventDefault():(!this.isDisposed&&this.containerElement.classList.contains("e-input-focus")||this.isPopupOpen())&&this.dotNetRef.invokeMethodAsync("Hide")},t.prototype.listScroll=function(){this.filterInput.blur()},t.prototype.setFloatingHeader=function(t){sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=sf.base.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(e)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),this.scrollStop(t)},t.prototype.isFilterLayout=function(){return"CheckBox"===this.options.mode&&this.options.allowFiltering},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var i=this.liCollections[0].offsetWidth-t;this.fixedHeaderElement.style.width=i.toString()+"px",sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var n=this.list.querySelector("."+e);this.fixedHeaderElement.innerHTML=n.innerHTML},t.prototype.scrollStop=function(t){for(var i=t.target,n=parseInt(getComputedStyle(this.list.getElementsByClassName("e-list-item")[0],null).getPropertyValue("height"),10),s=Math.round(i.scrollTop/n),o=this.list.querySelectorAll("li"),r=s;r>-1;r--){if(!sf.base.isNullOrUndefined(o[r])&&o[r].classList.contains(e)){var a=o[r];this.fixedHeaderElement.innerHTML=a.innerHTML,this.fixedHeaderElement.style.top=t.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.closePopup=function(e,t){if(this.options=t,this.isPopupOpen()&&!e.cancel&&this.popupObj){this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:100,delay:0}))}},t.prototype.setScrollPosition=function(e){if(sf.base.isNullOrUndefined(e)||""===e)this.scrollBottom(!0);else switch(e){case"PageDown":case"ArrowDown":case"End":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.scrollBottom=function(t){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var i=(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active")).nextElementSibling,n=this.list.offsetHeight,s=this.list.querySelector("li").classList.contains(e),o=i.offsetTop+i.offsetHeight-this.list.scrollTop,r=this.list.scrollTop+o-n;r=t?r+2*parseInt(getComputedStyle(this.list).paddingTop,10):r+parseInt(getComputedStyle(this.list).paddingTop,10);var a=i.offsetTop+i.offsetHeight-this.list.scrollTop;a=s&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a,(o>n||!(a>0&&this.list.offsetHeight>a))&&(this.list.scrollTop=r)}},t.prototype.scrollTop=function(){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var t=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),i=t.offsetTop-this.list.scrollTop,n=this.list.querySelector("li").classList.contains(e);i=n&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;var s=t.offsetTop+t.offsetHeight-this.list.scrollTop;i<0?this.list.scrollTop=this.list.scrollTop+i:s>0&&this.list.offsetHeight>s||(this.list.scrollTop=t.offsetTop-(n&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.windowResize=function(){"Box"!==this.options.mode&&"Default"!==this.options.mode&&this.viewContainer&&this.updateDelimViews(this.viewContainer,this.options)},t.prototype.updateDelimViews=function(e,t){this.options=t,this.viewContainer=e;var i=this.options.delimiterValue;if(this.viewContainer&&this.viewContainer.previousElementSibling&&!sf.base.isNullOrUndefined(i)&&i.length>0&&this.viewContainer.previousElementSibling.classList.add("e-delim-hide"),!sf.base.isNullOrUndefined(i)&&i.length>0?this.viewContainer.classList.remove("e-delim-hide"):this.viewContainer.innerHTML="",this.dropIconEle=this.containerElement.querySelector(".e-input-group-icon e-ddl-icon"),this.clearIconEle=this.containerElement.querySelector(".e-clear-icon"),this.viewContainer.classList.remove("e-delim-total"),i&&i.length>0){var n="",s=void 0,o=void 0,r=1,a=void 0,l=void 0,h=0,d=0,c=void 0;this.viewContainer.innerHTML="";var p=sf.base.createElement("span",{className:"e-remain"});p.innerHTML=this.options.overFlowContent,this.viewContainer.appendChild(p);var u=p.offsetWidth;if(sf.base.remove(p),this.dropIconEle&&(h=this.dropIconEle.offsetWidth+parseInt(window.getComputedStyle(this.dropIconEle).marginRight,10)),this.clearIconEle&&(d=this.clearIconEle.offsetWidth+parseInt(window.getComputedStyle(this.clearIconEle).marginRight,10)),sf.base.isNullOrUndefined(i))this.viewContainer.innerHTML="",this.viewContainer.style.display="none";else{for(var f=0;!sf.base.isNullOrUndefined(i[f]);f++){if(n+=0===f?"":this.options.delimiterCharacter+" ",n+=s=i[f],s=this.viewContainer.innerHTML,this.viewContainer.innerHTML=n,(a=this.viewContainer.offsetWidth+parseInt(window.getComputedStyle(this.viewContainer).paddingRight,10))+h+d>(c=this.childContainerElement.offsetWidth-parseInt(window.getComputedStyle(this.childContainerElement).paddingLeft,10)-parseInt(window.getComputedStyle(this.childContainerElement).paddingRight,10))){for(sf.base.isNullOrUndefined(o)||""===o||(s=o,f=r+1),this.viewContainer.innerHTML=s,l=i.length-f,a=this.viewContainer.offsetWidth;a+u+h>c&&0!==a&&""!==this.viewContainer.innerHTML;){var g=this.viewContainer.innerHTML.split(this.options.delimiterCharacter),m=g.length;g.pop();var v=g.length;this.viewContainer.innerHTML=g.join(this.options.delimiterCharacter),v!==m&&0!==v&&(l=l-v+m),""===this.viewContainer.innerHTML&&l++,a=this.viewContainer.offsetWidth}break}a+u+h+d<=c?(o=n,r=f):0===f&&(o="",r=-1)}if(l>0){var b=c-h-d;this.updateRemainElement(p,this.viewContainer,l,b)}}}},t.prototype.updateRemainWidth=function(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")},t.prototype.updateRemainElement=function(e,t,i,n){var s=this;t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="",this.isDisposed||this.dotNetRef.invokeMethodAsync("RetrieveRemainderCountAsync",i).then((function(i){var o=s.options.overFlowContent.replace("${count}",i),r=s.options.totalCountContent.replace("${count}",i);e.innerHTML=t.firstChild&&3===t.firstChild.nodeType?o:r,t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),s.updateRemainWidth(t,n));var a=s.viewContainer.querySelector(".e-remain");a&&sf.base.remove(a),s.viewContainer.appendChild(e),s.updateRemainWidth(s.viewContainer,n)}))},t.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},t.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},t.prototype.refreshPopup=function(){this.isPopupOpen()&&(this.list.classList.contains("e-nodata")?this.fixedHeaderElement.style.display="none":this.list&&this.fixedHeaderElement&&(this.fixedHeaderElement.innerHTML=this.list.querySelector("."+e).innerHTML),this.popupObj.refreshPosition(this.containerElement))},t}();return{initialize:function(e,i,n,s,o,r){if(s){var a=new t(e,i,n,s,o,r);if(a.initialize(),!sf.base.isNullOrUndefined(sf.base.closest(s,"fieldset"))&&sf.base.closest(s,"fieldset").disabled){var l=r.enabled=!1;a.dotNetRef.invokeMethodAsync("UpdateFieldSetStatus",l)}}},renderPopup:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(a)&&t&&i&&a.renderPopup(t,i,n,s,o,r)},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.closePopup(t,i)},refreshPopup:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.refreshPopup()},updateScrollPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setScrollPosition(t)},getPageCount:function(e){var t=e&&e.querySelector(".e-content");if(t){var i=t.classList.contains("e-nodata")?null:getComputedStyle(t.querySelectorAll(".e-list-item:not(.e-hide-listitem)")[0],null).getPropertyValue("height");return Math.round(t.getBoundingClientRect().height/parseInt(i,10))}return 0},updateDelimViews:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.updateDelimViews(t,i)},setInputValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.element.value=t)},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s))},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()}}}()},"./modules/sf-numerictextbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.NumericTextBox=function(){"use strict";var e=new RegExp("^(-)?(\\d*)$"),t=0,i=null,n=function(){function n(e,t,i,n,s){window.sfBlazor=window.sfBlazor,this.keyCharCodeHelper=function(e){return this.element.value.substring(0,this.element.selectionStart)+String.fromCharCode(e.which)+this.element.value.substring(this.element.selectionEnd)},this.keyHelper=function(e){return this.element.value.substring(0,this.element.selectionStart)+e.key+this.element.value.substring(this.element.selectionEnd)},this.dataId=e,this.wrapperElement=t,this.element=i,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return n.prototype.initialize=function(){this.spinButtonEvents(),sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"blur",this.focusOutHandler,this),sf.base.EventHandler.add(this.element,"keypress",this.keyPressHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.element,"paste",this.pasteHandler,this),sf.base.Browser.isDevice&&sf.base.EventHandler.add(document,"scroll",this.scrollHandler)},n.prototype.clearInvalid=function(e){this.element.value=e,i=null},n.prototype.keyPressHandler=function(e){if(!this.options.enabled||this.options.readonly)return!0;var t=e.keyCode;if(0===e.which||e.metaKey||e.ctrlKey||8===t||13===t)return!0;var i=this.options.decimalSeparator,n=String.fromCharCode(e.which),s="NumpadDecimal"===e.code&&this.keyCharCodeHelper(e)!==i;s&&(n=i);var o=this.element.value;if(o=o.substring(0,this.element.selectionStart)+n+o.substring(this.element.selectionEnd),this.numericRegex().test(o)){if(s){var r=this.element.selectionStart+1;this.element.value=o,this.element.setSelectionRange(r,r),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},n.prototype.pasteHandler=function(e){if(this.options.enabled&&!this.options.readonly){var t=e.clipboardData.getData("text/plain");this.numericRegex().test(t.trim())?this.dotNetRef.invokeMethodAsync("InvokePasteHandler",t):(t=t.replace(/[^0-9.]/g,""),i&&i==t?e.preventDefault():(this.dotNetRef.invokeMethodAsync("InvokePasteHandler",t),i=t))}},n.prototype.preventHandler=function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod|MacIntel/.test(navigator.platform);setTimeout((function(){if(e.element.selectionStart>0){var i=e.element.selectionStart,n=e.element.selectionStart-1,s=e.element.value.split(""),o=e.options.decimalSeparator.charCodeAt(0);" "===e.element.value[n]&&e.element.selectionStart>0&&!t?(sf.base.isNullOrUndefined(e.prevVal)?e.element.value=e.element.value.trim():0!==n?e.element.value=e.prevVal:0===n&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(n,n)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(s.indexOf(e.element.value[e.element.selectionStart-1])!==s.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===o||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==o)&&(e.element.value=e.element.value.substring(0,n)+e.element.value.substring(i,e.element.value.length),e.element.setSelectionRange(n,n),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(s.indexOf(e.element.value[e.element.selectionStart-2])!==s.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===o||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==o)&&(e.element.setSelectionRange(n,n),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(sf.base.isNullOrUndefined(e.prevVal)?e.element.value=e.element.value:e.element.value=e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.prevVal=e.element.value}}))},n.prototype.keyDownHandler=function(e){var t=!!navigator.platform&&/iPad|iPhone|iPod|MacIntel/.test(navigator.platform);this.options.readonly||(sf.base.Browser.isDevice&&38!==e.keyCode&&40!==e.keyCode&&8!==e.keyCode&&(this.numericRegex().test(this.keyCharCodeHelper(e))||this.numericRegex().test(this.keyHelper(e))||(t&&sf.base.Browser.isDevice?this.preventHandler():e.preventDefault())),!t&&sf.base.Browser.isDevice&&this.preventHandler(),38===e.keyCode?(e.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","increment",e,this.element.value)):40===e.keyCode&&(e.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","decrement",e,this.element.value)))},n.prototype.numericRegex=function(){var t=this.options.decimalSeparator,i="*";return"."===t&&(t="\\"+t),0===this.options.decimals&&this.options.validateDecimalOnType?e:(this.options.decimals&&this.options.validateDecimalOnType&&(i="{0,"+this.options.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+i+")?)|("+t+"\\d"+i+")))?$"))},n.prototype.mouseWheel=function(e){var t;e.preventDefault();var i=e;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this.dotNetRef.invokeMethodAsync("ServerAction","increment",e,this.element.value):t<0&&this.dotNetRef.invokeMethodAsync("ServerAction","decrement",e,this.element.value)},n.prototype.focusHandler=function(e){this.isFocused=!0,this.options.enabled&&!this.options.readonly&&(sf.base.Browser.isDevice||sf.base.EventHandler.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this))},n.prototype.focusOutHandler=function(e){this.isFocused=!1,e.preventDefault(),sf.base.Browser.isDevice||sf.base.EventHandler.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)},n.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.options.enabled&&!this.options.readonly){this.isFocused&&(this.isPrevFocused=!0,e.cancelable&&e.preventDefault());var i=e.currentTarget,n=i.classList.contains("e-spin-up")?"increment":"decrement";sf.base.EventHandler.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval((function(){t.isCalled=!0,t.dotNetRef.invokeMethodAsync("ServerAction",n,e,t.element.value)}),150),sf.base.EventHandler.add(document,"mouseup",this.mouseUpClick,this)}},n.prototype.mouseUpOnSpinner=function(e){if(this.options.enabled&&!this.options.readonly){if(this.isPrevFocused&&(this.element.focus(),!sf.base.Browser.isDevice&&e.cancelable&&(this.isPrevFocused=!1)),sf.base.Browser.isDevice||e.preventDefault(),!this.getElementData(e))return;var t=e.currentTarget,i=t.classList.contains("e-spin-up")?"increment":"decrement";sf.base.EventHandler.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.dotNetRef.invokeMethodAsync("ServerAction",i,e,this.element.value),this.isCalled=!1,sf.base.EventHandler.remove(document,"mouseup",this.mouseUpClick)}},n.prototype.touchMoveOnSpinner=function(e){!this.options.enabled||this.options.readonly?document.elementFromPoint(e.clientX,e.clientY).classList.contains("e-input-group-icon")||clearInterval(this.timeOut):clearInterval(this.timeOut)},n.prototype.scrollHandler=function(e){clearInterval(this.timeOut)},n.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.options.enabled||this.options.readonly)&&(clearInterval(this.timeOut),!0)},n.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,sf.base.EventHandler.remove(this.spinUp,"mouseleave",this.mouseUpClick),sf.base.EventHandler.remove(this.spinDown,"mouseleave",this.mouseUpClick)},n.prototype.selectRange=function(e){var i=this;if(clearTimeout(t),sf.base.Browser.isDevice||"11.0"!==sf.base.Browser.info.version){var n=sf.base.Browser.isDevice&&sf.base.Browser.isIos?600:30;t=setTimeout((function(){"number"!==i.element.type&&i.element.setSelectionRange(0,e.length)}),n)}else this.element.setSelectionRange(0,e.length)},n.prototype.isDevice=function(){return sf.base.Browser.isDevice},n.prototype.spinButtonEvents=function(){this.spinDown=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-down"):null,this.spinUp=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-up"):null,this.spinDown&&this.spinUp&&(this.unBindSpinButton(),this.bindSpinButton())},n.prototype.bindSpinButton=function(){sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this),sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this),sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this)},n.prototype.unBindSpinButton=function(){sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner),sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner),sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner)},n.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler),sf.base.EventHandler.remove(this.element,"blur",this.focusOutHandler),sf.base.EventHandler.remove(this.element,"keypress",this.keyPressHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(this.element,"paste",this.pasteHandler),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(document,"scroll",this.scrollHandler)},n}();return{initialize:function(e,t,i,s,o){i&&e&&new n(e,t,i,s,o).initialize()},selectRange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.selectRange(t)},propertyChanges:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.options=t)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},spinButtonEvents:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.spinButtonEvents()},clearInvalid:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.clearInvalid(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-pager.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Pager=function(){"use strict";var e=function(){function e(e,t,i){this.previousBrowserWidth=0,this.element=t,this.dataId=e,this.dotnetRef=i,this.wireEvents(),window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.documentKeyHandler,this),sf.base.EventHandler.add(window,"resize",this.windowResized,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"keydown",this.documentKeyHandler),sf.base.EventHandler.remove(window,"resize",this.windowResized)},e.prototype.windowResized=function(){var e=this;setTimeout((function(){var t=e.element.querySelector(".e-parentmsgbar"),i=e.element.querySelector(".e-mfirst");if(sf.base.isNullOrUndefined(i)||0!=i.offsetWidth)sf.base.isNullOrUndefined(t)||(t.style.display="",e.refresh());else{var n=e.element.offsetWidth,s=e.element.offsetWidth-e.getMargin(e.element,"Left")-e.getMargin(e.element,"Right")-16,o=e.element.querySelector(".e-pagercontainer").offsetWidth+e.getMargin(e.element.querySelector(".e-pagercontainer"),"Left")+4,r=e.element.querySelector(".e-pagesizes"),a=void 0,l=void 0,h=0;e.element.classList.contains("e-adaptive")&&(setTimeout((function(){e.element.classList.remove("e-adaptive")}),0),e.dotnetRef.invokeMethodAsync("IsMobileDevice",!1)),sf.base.isNullOrUndefined(r)||(a=r.querySelector(".e-pagerdropdown"),l=r.querySelector(".e-pagerconstant"),h=a.offsetWidth+e.getMargin(a,"Left")+e.getMargin(a,"Right")+l.offsetWidth+e.getMargin(l,"Left")+e.getMargin(l,"Right")+5),o+h+t.offsetWidth>s&&e.previousBrowserWidth>n?(t.style.display="none",o+h>s&&(sf.base.isNullOrUndefined(r)||(l.style.display="none",o+a.offsetWidth+e.getMargin(a,"Left")+e.getMargin(a,"Right")+3>s&&(a.style.display="none")))):e.previousBrowserWidth<n&&(o+h<s?(sf.base.isNullOrUndefined(r)||(a.style.display="",o+a.offsetWidth+e.getMargin(a,"Left")+e.getMargin(a,"Right")+105<s&&(l.style.display="")),o+h<s&&(t.style.visibility="hidden",t.style.display="",o+h+t.offsetWidth>s&&(t.style.display="none"),t.style.visibility="visible")):sf.base.isNullOrUndefined(r)||(t.style.display="none"))}e.previousBrowserWidth=e.element.offsetWidth}),50)},e.prototype.refresh=function(){var e=this,t=e.element.querySelector(".e-mfirst"),i=e.element.querySelector(".e-pagesizes"),n=e.element.querySelector(".e-parentmsgbar"),s=e.element.querySelector(".e-pagerconstant"),o=e.element.querySelector(".e-pagerdropdown");!sf.base.isNullOrUndefined(t)&&0!=t.offsetWidth&&this.element.offsetWidth<769?(this.element.offsetWidth<481?this.dotnetRef.invokeMethodAsync("IsMobileDevice",!0):this.dotnetRef.invokeMethodAsync("IsMobileDevice",!1),setTimeout((function(){sf.base.isNullOrUndefined(i)||i.classList.remove("e-hide"),sf.base.isNullOrUndefined(n)||n.classList.remove("e-hide"),sf.base.isNullOrUndefined(s)||(s.style.display=""),sf.base.isNullOrUndefined(o)||(o.style.display=""),e.element.classList.add("e-adaptive")}),0)):this.element.classList.contains("e-adaptive")&&(setTimeout((function(){e.element.classList.remove("e-adaptive")}),0),this.dotnetRef.invokeMethodAsync("IsMobileDevice",!1))},e.prototype.getMargin=function(e,t){var i="Left"===t?getComputedStyle(e).marginLeft:getComputedStyle(e).marginRight;return Number(i.replace("px",""))},e.prototype.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus();var t=document.activeElement;e.shiftKey&&9==e.keyCode&&null!=t&&t.classList.contains("e-pager")&&e.stopImmediatePropagation()},e}();return{initialize:function(t,i,n){sf.base.enableBlazorMode(),new e(t,i,n)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t.previousBrowserWidth=0,t.unWireEvents()},refresh:function(e){window.sfBlazor.getCompInstance(e).refresh()},currentPageFocus:function(e,t,i){var n=window.sfBlazor.getCompInstance(e).element.querySelector(".e-numericcontainer"),s=n.querySelectorAll(".e-link:last-child")[0];"PreviousPage"!=t&&s.innerText==i||t==s.innerText||"LastPage"!=t||null==s.nextElementSibling?"FirstPage"==t||document.activeElement.classList.contains("e-first")||"1"==i||s.focus():n.querySelector(".e-link").focus()},pagerFocus:function(e,t){var i,n=window.sfBlazor.getCompInstance(e),s=n.element.querySelector(".e-pagercontainer"),o=s.querySelector(".e-numericcontainer"),r=s.querySelector(".e-firstpage.e-pager-default"),a=n.element.querySelector(".e-mfirst"),l=n.element.querySelector(".e-mnext"),h=n.element.querySelector(".e-mprev"),d=n.element.querySelector(".e-mlast"),c=s.querySelector(".e-prevpage.e-pager-default"),p=s.querySelector(".e-pp"),u=o.querySelectorAll(".e-link")[0],f=o.querySelectorAll(".e-link.e-focused"),g=o.querySelector(".e-link.e-focused"),m=s.querySelector(".e-nextpage"),v=s.querySelector(".e-lastpage"),b=o.querySelectorAll(".e-link"),y=n.element.querySelector(".e-ddl"),C=document.activeElement;if(sf.base.isNullOrUndefined(c)||(i=c.classList.contains("e-focused")),"ArrowDown"===t)return r?(r.focus(),"FirstPage"):c&&r?(r.focus(),"PreviousPage"):(b[1].focus(),"1");if("Tab"==t)return"none"==window.getComputedStyle(a).display?null!=C&&C.classList.contains("e-pager")?s&&s.firstElementChild&&s.firstElementChild.classList.contains("e-firstpagedisabled")?(u.focus(),"1"):(r.focus(),"FirstPage"):null!=r&&r.classList.contains("e-focused")?(c.focus(),"PreviousPage"):null!=c&&i||null!=s.querySelector(".e-pp.e-focused")?null==p||p.classList.contains("e-focused")?(u.focus(),u.innerText):(p.focus(),"PreviousPagerCount"):!sf.base.isNullOrUndefined(g)&&f.length>0&&null!=s.querySelector(".e-link.e-focused")&&null!=s.querySelector(".e-link.e-focused").nextElementSibling?(g.nextElementSibling.focus(),g.nextElementSibling.innerText):f.length>0&&null!=s.querySelector(".e-np")&&null==s.querySelector(".e-np.e-focused")?(s.querySelector(".e-np").focus(),"NextPagerCount"):!sf.base.isNullOrUndefined(g)&&g.classList.contains("e-focused")&&f.length>0||s.querySelectorAll(".e-np.e-focused").length>0?null!=m?(m.focus(),"NextPage"):sf.base.isNullOrUndefined(y)||y.classList.contains("e-input-focus")?sf.base.isNullOrUndefined(y)?"":(g.blur(),n.element.blur(),null!=C&&C.classList.contains("e-numericitem")&&C.blur(),"FocusOut"):(y.focus(),"DropDown"):null!=s.querySelector(".e-nextpage.e-focused")?(v.focus(),"LastPage"):sf.base.isNullOrUndefined(v)||v.classList.contains("e-focused")||sf.base.isNullOrUndefined(y)||y.classList.contains("e-input-focus")?sf.base.isNullOrUndefined(y)||y.classList.contains("e-input-focus")?!sf.base.isNullOrUndefined(v)&&v.classList.contains("e-focused")&&sf.base.isNullOrUndefined(y)?(v.blur(),"FocusOut"):(sf.base.isNullOrUndefined(y)||y.blur(),n.element.blur(),"FocusOut"):(y.focus(),"DropDown"):(v.focus(),"LastPage"):null!=C&&C.classList.contains("e-pager")?a.classList.contains("e-firstpagedisabled")&&!l.classList.contains("e-nextpagedisabled")?(l.focus(),"mNextPage"):a.classList.contains("e-firstpagedisabled")?(n.element.blur(),"FocusOut"):(a.focus(),"mFirstPage"):a.classList.contains("e-focused")?(h.focus(),"mPreviousPage"):h.classList.contains("e-focused")?l.classList.contains("e-nextpagedisabled")?(h.blur(),"FocusOut"):(l.focus(),"mNextPage"):l.classList.contains("e-focused")?(d.focus(),"mLastPage"):d.classList.contains("e-focused")?(d.blur(),"FocusOut"):"0";if("ShiftTab"==t){if("none"==window.getComputedStyle(a).display){if(!sf.base.isNullOrUndefined(y)&&y.classList.contains("e-input-focus"))return sf.base.isNullOrUndefined(v)?(o.lastElementChild.focus(),o.lastElementChild.innerText):(v.focus(),"LastPage");if(null!=c&&i)return r.focus(),"FirstPage";if(c&&s.querySelector(".e-pp.e-focused"))return c.focus(),"PreviousPage";if(b[0].classList.contains("e-focused")||document.activeElement==b[0])return null!=p?(p.focus(),"PreviousPagerCount"):c?(c.focus(),"PreviousPage"):(u.blur(),n.element.focus(),"FocusOut");if(f.length>0)return g.previousElementSibling.focus(),g.previousElementSibling.innerText;if(s.querySelectorAll(".e-nextpage.e-focused").length>0&&null!=s.querySelector(".e-np"))return s.querySelector(".e-np").focus(),"NextPagerCount";if(s.querySelectorAll(".e-nextpage.e-focused").length>0||s.querySelectorAll(".e-np.e-focused").length>0)return b[b.length-1].focus(),o.querySelectorAll(".e-link:last-child")[0].innerText;if(null!=C&&C.classList.contains("e-numericitem")){var w=C.previousElementSibling.innerText;return C.previousElementSibling.focus(),w}return null!=s.querySelector(".e-lastpage.e-focused")||C.classList.contains("e-lastpage")?(m.focus(),"NextPage"):r.classList.contains("e-focused")?(r.blur(),n.element.focus(),"FocusOut"):r.classList.contains(".e-disabled")?"0":(r.focus(),"FirstPage")}return d.classList.contains("e-focused")||C.classList.contains("e-lastpage")?(l.focus(),"mNextPage"):l.classList.contains("e-focused")&&!h.classList.contains("e-prevpagedisabled")?(h.focus(),"mPreviousPage"):h.classList.contains("e-focused")||C.classList.contains("e-mprev")?(a.focus(),"mFirstPage"):a.classList.contains("e-focused")?(a.blur(),n.element.focus(),"FocusOut"):l.classList.contains("e-focused")?(l.blur(),n.element.focus(),"FocusOut"):"0"}return"0"}}}()},"./modules/sf-pivotview.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.PivotView=function(){"use strict";var e="e-icons",t="e-group-row",i="e-headercell",n="e-format",s="e-pivot-formula",o="e-headercontent",r="e-remove-report",a="e-pivot-toolbar",l="e-list-icon",h="e-popup",d="e-popup-open",c="e-rowsheader",p="e-columnsheader",u="e-cellselectionbackground",f="e-selectionbackground",g="e-table",m="e-dlg-closeicon-btn.e-icon-btn",v="e-pivot-content-loader",b="e-movablescrolldiv",y=function(){function e(e){this.parent=e,this.parent.pivotButtonModule=this}return e.prototype.createPivotButtonDrop=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));e<t.length;e++){var i=t[e];new sf.base.Droppable(i,{}),this.unWireEvents(i),this.wireEvents(i)}},e.prototype.setPivotButtonDrag=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll("."+(this.parent instanceof j?"e-grouping-bar":"e-pivotfieldlist")+"-button"));e<t.length;e++){var i=t[e],n=!!sf.base.closest(i,".e-group-all-fields"),s=i.querySelector(".e-pivot-button");this.parent.pivotButtonModule.createDraggable(n,this.parent instanceof j?s.querySelector(".e-pvt-btn-content"):s.firstElementChild,n?this.parent.commonActionModule.getFieldInfo(s.getAttribute("data-uid")).fieldItem:JSON.parse(s.getAttribute("data-fieldInfo")))}},e.prototype.createDraggable=function(e,t,i){var n=this;this.draggable=new sf.base.Draggable(t,{clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.createDragClone.bind(this,i,e),dragStart:this.onDragStart.bind(this,e),drag:function(e){n.draggable.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(e.event.targetTouches)||sf.base.Browser.isDevice?60:-20}})},dragStop:this.onDragStop.bind(this,e),abort:this.parent instanceof j?this.parent.groupingBarSettings.allowDragAndDrop&&i.allowDragAndDrop?"":".e-pivot-button":i.allowDragAndDrop?"":".e-pivot-button"}),e||(this.unWireEvents(this.parent instanceof j?sf.base.closest(t,".e-grouping-bar-button"):t),this.wireEvents(this.parent instanceof j?sf.base.closest(t,".e-grouping-bar-button"):t))},e.prototype.createDragClone=function(e,t,i){var n=t?null:sf.base.closest(i.element,".e-pivot-button");e=n?JSON.parse(n.getAttribute("data-fieldInfo")):e;var s=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-button-drag-clone"}),o=sf.base.createElement("span",{className:"e-text-content"});return o.innerText=e?e.caption?e.caption:e.name:"",s.appendChild(o),document.body.appendChild(s),s},e.prototype.onDragStart=function(e,t){var i=this,n=sf.base.closest(t.element,"."+(e?this.parent instanceof j?"e-pivot-button":"e-list-item":"e-pivot-button"));this.parent.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",n.getAttribute("data-uid")).then((function(s){if(s.cancel)i.parent.isDragging=!1,i.draggable.intDestroy(t.event),sf.base.detach(document.getElementById(i.parent.element.id+"_DragClone"));else{i.parent.isDragging=!0;var o=i.parent.fieldList[n.getAttribute("data-uid")],r=["e-rows","e-columns","e-filters"];if(sf.base.addClass([e?i.parent instanceof j?n:n.querySelector(".e-list-text"):n],"e-list-selected"),o&&"CalculatedField"===o.aggregateType)for(var a=0,l=r;a<l.length;a++){var h=l[a];sf.base.addClass([i.parent.parentElement.querySelector("."+h)],"e-drag-restrict")}if(document.getElementById(i.parent.element.id+"_DragClone")){var d=sf.popups.getZindexPartial(n);document.getElementById(i.parent.element.id+"_DragClone").style.zIndex=d?d.toString():"100000"}t.bindEvents(t.dragElement)}}))},e.prototype.onDragStop=function(e,t){this.parent.isDragging=!1;var i=!1;t.target&&t.element&&sf.base.closest(t.element,".e-group-all-fields")&&!sf.base.closest(t.target,".e-droppable")&&(i=!0);var n=sf.base.closest(t.element,"."+(e?this.parent instanceof j?"e-pivot-button":"e-list-item":"e-pivot-button"));this.parent.parentElement.querySelector(".e-list-selected")&&sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-list-selected")),"e-list-selected");for(var s=0,o=["e-rows","e-columns","e-filters"];s<o.length;s++){var r=o[s];sf.base.removeClass([this.parent.parentElement.querySelector("."+r)],"e-drag-restrict")}sf.base.removeClass([e?this.parent instanceof j?n:n.querySelector(".e-list-text"):n],"e-list-selected"),document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(t.helper?t.helper:document.getElementById(this.parent.element.id+"_DragClone")),document.body.style.cursor="auto",!this.isNodeDropped(e,t,n)||!e&&i||this.nodeStateModified(e,t,i,n.getAttribute("data-uid"))},e.prototype.nodeStateModified=function(e,t,i,n){var s=sf.base.closest(t.target,".e-droppable")?JSON.stringify(sf.base.closest(t.target,".e-droppable").className.split(" ")):void 0,o=e||!t.element.parentElement?void 0:JSON.stringify({isvalue:t.element.parentElement.getAttribute("isvalue")});this.parent.dotNetRef.invokeMethodAsync("OnFieldDropped",window.sfBlazor.getDomObject("target",t.target).xPath,s,o,!(!e&&!i),n)},e.prototype.isNodeDropped=function(e,t,i){var n=!0,s=i.getAttribute("data-uid");if(this.parent.fieldList[s]&&this.parent.fieldList[s].isSelected||!e){var o=e?this.getButton(s):i,r=sf.base.closest(o,".e-droppable"),a=sf.base.closest(t.target,".e-droppable");if(o&&r&&r===a){for(var l=[].slice.call(r.querySelectorAll(".e-pivot-button")),h=sf.base.closest(t.target,".e-pvt-btn-div"),d=void 0,c=-1,p=0;p<l.length;p++)if(l[p].id===o.id&&(d=p),h){var u=h.querySelector(".e-pivot-button");l[p].id===u.id&&(c=p)}(d===c||d===l.length-1&&-1===c)&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),n=!1)}}return n},e.prototype.getButton=function(e){for(var t=0,i=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++){var n=i[t];if(n.id===e)return n}},e.prototype.getButtonPosition=function(e,t){var i=sf.base.closest(e,".e-pvt-btn-div");if(i){i=i.querySelector(".e-pivot-button");for(var n=this.parent instanceof j?this.parent.parentElement.querySelector(".e-chart-grouping-bar"):void 0,s=[].slice.call((n&&"Chart"===this.parent.currentView?n:this.parent.parentElement).querySelector(".e-"+t).querySelectorAll(".e-pivot-button")),o=0,r=s.length;o<r;o++)if(s[o].id===i.id)return o}return-1},e.prototype.wireEvents=function(e){sf.base.EventHandler.add(e,"mouseover",this.parent.commonActionModule.updateDropIndicator,this),sf.base.EventHandler.add(e,"mouseleave",this.parent.commonActionModule.updateDropIndicator,this)},e.prototype.unWireEvents=function(e){sf.base.EventHandler.remove(e,"mouseover",this.parent.commonActionModule.updateDropIndicator),sf.base.EventHandler.remove(e,"mouseleave",this.parent.commonActionModule.updateDropIndicator)},e.prototype.destroy=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));e<t.length;e++){var i=t[e];this.unWireEvents(i)}this.draggable&&this.draggable.isDestroyed&&this.draggable.destroy()},e}(),C=function(){function e(e){this.parent=e,this.parent.groupingBarModule=this,this.parent.pivotButtonModule=new y(this.parent)}return e.prototype.updatePivotButtons=function(){this.createPivotButtonDrop(),this.parent.pivotButtonModule.setPivotButtonDrag()},e.prototype.createPivotButtonDrop=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var i=t[e].firstElementChild;this.parent.groupingBarSettings.allowDragAndDrop&&new sf.base.Droppable(i,{}),this.unWireEvent(i),this.wireEvent(i)}},e.prototype.refreshUI=function(){this.parent.element.querySelector(".e-grouping-bar")&&this.updatePivotButtons();var e=this.parent.element.querySelector(".e-pivot-grouping-bar");if(e){e.style.minWidth="400px";var n=e.querySelector(".e-group-rows"),s=e.querySelector(".e-group-values"),r=e.querySelector(".e-group-columns"),a=e.querySelector(".e-group-filters"),l=e.querySelector(".e-left-axis-fields"),h=e.querySelector(".e-right-axis-fields"),d=this.parent.element.querySelector("."+o).querySelector("colgroup").children[0],c=e.offsetWidth-parseInt(d.style.width,10)+"px";if(l.style.minWidth=d.style.width,s.style.width=d.style.width,h.style.width=c,sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element)){var p=this.parent.element.querySelector("."+o).querySelector(".e-columnheader");p.querySelector("."+i).classList.add(t),p.style.height="auto",sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")&&p.querySelector(".e-axis-row")?n?(n.style.height=this.parent.element.querySelector("."+o).offsetHeight+"px",sf.base.remove(p.querySelector(".e-axis-row")),p.querySelector("."+t).appendChild(e.querySelector(".e-axis-row"))):(n=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")).style.height="auto":(n.style.height=this.parent.element.querySelector("."+o).offsetHeight+"px",p.querySelector("."+t).appendChild(e.querySelector(".e-axis-row"))),p.querySelector("."+t).querySelector(".e-headercelldiv").style.display="none",p.querySelector("."+t).querySelector(".e-sortfilterdiv").style.display="none";for(var u=0,f=[].slice.call(this.parent.element.querySelector("."+o).querySelector("thead").querySelectorAll("tr")).filter((function(e){return e.childNodes.length>0}));u<f.length;u++){var g=f[u];sf.base.setStyleAttribute(g,{height:"auto"})}var m=this.parent.element.querySelector("."+o).offsetHeight;n.style.height=m+"px",r.style.height=a.style.height="auto";var v=s.offsetHeight/2;v>r.offsetHeight&&(sf.base.setStyleAttribute(a,{height:sf.base.formatUnit(v)}),sf.base.setStyleAttribute(r,{height:sf.base.formatUnit(v+2)}))}}},e.prototype.wireEvent=function(e){sf.base.EventHandler.add(e,"mouseover",this.dropIndicatorUpdate,this),sf.base.EventHandler.add(e,"mouseleave",this.dropIndicatorUpdate,this)},e.prototype.unWireEvent=function(e){sf.base.EventHandler.remove(e,"mouseover",this.dropIndicatorUpdate),sf.base.EventHandler.remove(e,"mouseleave",this.dropIndicatorUpdate)},e.prototype.dropIndicatorUpdate=function(e){(this.parent.isDragging&&e.target.classList.contains("e-droppable")&&"mouseover"===e.type||"mouseleave"===e.type)&&(sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"))},e.prototype.destroy=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var i=t[e];this.unWireEvent(i.firstElementChild)}},e}(),w=function(){function t(e){this.parent=e,this.parent.calculatedFieldModule=this}return t.prototype.getNodeLocation=function(e,t){var i=e.querySelector('li[data-uid="'+CSS.escape(JSON.parse(t))+'"]').getBoundingClientRect();return JSON.stringify([i.top+(window.scrollY||document.documentElement.scrollTop),i.left])},t.prototype.setSelectionRange=function(e){e&&sf.base.select("#"+this.parent.element.id+"droppable").setSelectionRange(e,e),sf.base.select("#"+this.parent.element.id+"droppable").focus()},t.prototype.getIconInfo=function(e,t){var i=document.elementFromPoint(t,e);if(i){if(i.classList.contains(n))return JSON.stringify(n);if(i.classList.contains("e-edit"))return JSON.stringify("e-edit");if(i.classList.contains(r))return JSON.stringify(r);if(i.classList.contains("e-edited"))return JSON.stringify("e-edited")}},t.prototype.emptyFieldName=function(e){sf.base.addClass([document.getElementById(e+"ddlelement")],["e-empty-field","e-pivot-calc-input"]),document.getElementById(e+"ddlelement").focus()},t.prototype.editCalculatedFieldInfo=function(e,t,i,n){var s=sf.base.closest(document.elementFromPoint(i,t),"li");e?("pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),sf.base.addClass([s.querySelector("."+l)],"e-edited"),sf.base.removeClass([s.querySelector("."+l)],"e-edit"),s.querySelector(".e-edited").setAttribute("title",n)),sf.base.select("#"+this.parent.element.id+"droppable").value=s.getAttribute("data-uid")):this.updatedCalculatedFieldInfo(s,n)},t.prototype.updatedCalculatedFieldInfo=function(e,t){"pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),e.querySelector(".e-edit").setAttribute("title",t)),sf.base.select("#"+this.parent.element.id+"droppable").value=""},t.prototype.updateNodeExpandIcons=function(t,i){for(var n=t.querySelector('li[data-uid="'+CSS.escape(i)+'"]'),s=[].slice.call(n.querySelectorAll("li")),o=0;o<s.length;o++){var a=s[o].querySelector(".e-text-content");if("CalculatedField"===s[o].getAttribute("data-type")&&a&&s[o].querySelector("."+l+".e-calc-member")&&!s[o].querySelector("."+r)){var h=sf.base.createElement("span",{className:r+" "+e+" "+l});a.classList.add("e-calcfieldmember"),a.appendChild(h)}(s[o].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||s[o].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||s[o].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(s[o])}return this.olapExpand(n)},t.prototype.olapExpand=function(e){if(e&&e.querySelector("."+l)&&e.querySelector(".e-icon-expandable")&&e.querySelector("."+l).className.indexOf("e-folderCDB-icon")>-1){var t=e.querySelector("."+l);return sf.base.removeClass([t],"e-folderCDB-icon"),sf.base.addClass([t],"e-folderCDB-open-icon"),JSON.stringify(!1)}return e&&e.querySelector("."+l)&&e.querySelector(".e-icon-collapsible")&&e.querySelector("."+l).className.indexOf("e-folderCDB-open-icon")>-1?(e=e.querySelector("."+l),sf.base.removeClass([e],"e-folderCDB-open-icon"),sf.base.addClass([e],"e-folderCDB-icon"),JSON.stringify(!1)):JSON.stringify(!0)},t.prototype.updateEditOptions=function(t){var i=[].slice.call(sf.base.selectAll("#"+t+" .e-acrdn-item"));sf.base.addClass(sf.base.selectAll("#"+t),"e-pivot-accord");for(var n=0;n<i.length;n++)if(i[n].querySelector('[data-type="CalculatedField"]')){var s=i[n].querySelector(".e-acrdn-header .e-toggle-icon");sf.base.removeClass([s],"e-toggle-icon"),sf.base.addClass([s],"e-acrdn-header-icon");var o=s.querySelector(".e-tgl-collapse-icon");sf.base.removeClass([o],"e-tgl-collapse-icon"),sf.base.addClass([o],[l,"e-edit"]),s.appendChild(sf.base.createElement("span",{className:r+" "+e+" "+l}))}},t.prototype.updateAccordionLabel=function(e){var t=document.elementFromPoint(JSON.parse(e).ClientX,JSON.parse(e).ClientY),i=t.parentElement.querySelector(".e-label").innerText,n=sf.base.closest(t,".e-acrdn-item").querySelector("[data-field").getAttribute("data-caption"),s=sf.base.closest(t,".e-adaptive-calc-radio-btn").querySelector("input");sf.base.closest(t,".e-acrdn-item").querySelector(".e-label").innerText=n+" ("+i+")",sf.base.closest(t,".e-acrdn-item").querySelector("[data-type").setAttribute("data-type",s.getAttribute("data-value"))},t.prototype.accordionClick=function(e,t,i){var n=document.elementFromPoint(JSON.parse(e),JSON.parse(t));if(sf.base.closest(n,".e-acrdn-header-icon")){var s=sf.base.closest(n,".e-acrdn-header").querySelector(".e-pivot-calc-check input");if(s){var o=void 0,a=sf.base.closest(n,".e-acrdn-header-icon");return a.querySelector(".e-edit")&&n.classList.contains("e-edit")?(sf.base.addClass([a.querySelector("."+l)],"e-edited"),sf.base.removeClass([a.querySelector("."+l)],"e-edit"),o="e-edit"):a.querySelector(".e-edited")&&n.classList.contains("e-edited")?(sf.base.addClass([a.querySelector("."+l)],"e-edit"),sf.base.removeClass([a.querySelector("."+l)],"e-edited"),o="e-edited"):a.querySelector("."+r)&&n.classList.contains(r)&&(o=r),JSON.stringify([s.getAttribute("data-field"),o,s.getAttribute("id").split(i+"_")[1]])}}return JSON.stringify([])},t.prototype.getAccordionValue=function(){for(var e="",t=[].slice.call(document.querySelectorAll(".e-accordion .e-check")),i=0;i<t.length;i++){var n=t[i].parentElement.querySelector("[data-field]").getAttribute("data-field"),s=t[i].parentElement.querySelector("[data-type]").getAttribute("data-type");-1===s.indexOf("CalculatedField")?e=e+'"'+s+"("+n+')"':e+=t[i].parentElement.querySelector("[data-formula]").getAttribute("data-formula")}return""===e?null:e},t.prototype.createFormulaDroppable=function(t,i,o,a,h,d,c){var p=document.getElementById(this.parent.element.id+c);if(p.querySelector("."+s)){new sf.base.Droppable(p.querySelector("."+s),{});for(var u=[].slice.call(p.querySelectorAll(".e-pivot-treeview ul li")),f=0;f<u.length;f++){var g=u[f].getAttribute("data-field");if("olap"===this.parent.options.dataType){u[f].querySelector(".e-measure-icon")&&(u[f].querySelector("."+l).style.display="none");var m=u[f].querySelector(".e-text-content");"CalculatedField"===u[f].getAttribute("data-type")&&m&&u[f].querySelector("."+l+".e-calc-member")&&(m.classList.add("e-calcfieldmember"),m.appendChild(sf.base.createElement("span",{className:r+" "+e+" "+l}))),(u[f].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||u[f].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||u[f].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(u[f])}else if("pivot"===this.parent.options.dataType&&!u[f].querySelector(".e-text-content span.e-drag")&&u[f].querySelector(".e-text-content span")){var v=u[f].getAttribute("data-type"),b=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:i},className:e+" e-drag"}),y=sf.base.createElement("div",{className:" e-iconspace"});sf.base.prepend([b],u[f].querySelector(".e-text-content")),sf.base.append([y,u[f].querySelector("."+n)],u[f].querySelector(".e-text-content")),"CalculatedField"===v&&(u[f].querySelector("."+n).setAttribute("title",o),sf.base.addClass([u[f].querySelector("."+n)],r),h&&d===g&&(sf.base.select("#"+this.parent.element.id+"droppable",p).value=u[f].getAttribute("data-uid")),sf.base.addClass([u[f].querySelector(".e-iconspace")],[h&&d===g?"e-edited":"e-edit",e,l]),u[f].querySelector(".e-edit,.e-edited").setAttribute("title",h&&d===g?a:t),u[f].querySelector(".e-edit,.e-edited").setAttribute("aria-disabled","false"),u[f].querySelector(".e-edit,.e-edited").setAttribute("tabindex","-1"),sf.base.removeClass([u[f].querySelector("."+n)],n),sf.base.removeClass([u[f].querySelector(".e-iconspace")],"e-iconspace")),this.createDraggable(b)}}}},t.prototype.createDraggable=function(e){new sf.base.Draggable(e,{dragTarget:".e-list-item",clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.calculatedDragClone.bind(this),dragStart:this.onCalcDragStart.bind(this),drag:this.onDragging.bind(this),dragStop:this.onCalcDragStop.bind(this)})},t.prototype.onDragging=function(e){var t=sf.base.select("#"+this.parent.element.id+"_DragClone ");e.target&&e.target.classList.contains(s)?(sf.base.removeClass([t],"e-drag-restrict"),sf.base.addClass([e.target],"e-copy-drop")):(sf.base.addClass([t],"e-drag-restrict"),sf.base.removeClass([e.target],"e-copy-drop"),sf.base.addClass([t],"e-icon-expandable"),sf.base.removeClass([t],l))},t.prototype.onCalcDragStop=function(e){var t=document.getElementById(this.parent.element.id+"droppable"),i=sf.base.closest(e.element,".e-list-item");sf.base.removeClass([t],"e-copy-drop"),sf.base.removeClass([i.querySelector(".e-list-text")],"e-list-selected");var n=t.selectionStart;e.target.id===this.parent.element.id+"droppable"&&this.parent.dotNetRef.invokeMethodAsync("UpdateCalcDroppable",i.getAttribute("data-uid"),n,e.target.id),document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(e.helper),document.body.style.cursor="auto",this.parent.isDragging=!1},t.prototype.onCalcDragStart=function(e){var t=sf.base.closest(e.element,".e-list-item"),i=document.getElementById(this.parent.element.id+"_DragClone");if(i&&t&&("pivot"===this.parent.options.dataType&&e.target&&e.target.classList.contains("e-drag")||"olap"===this.parent.options.dataType&&(t.querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||t.querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||t.querySelector(".e-level-members,.e-namedSetCDB-icon")))){sf.base.addClass([t.querySelector(".e-list-text")],"e-list-selected");var n=sf.popups.getZindexPartial(t);i.style.zIndex=n?n.toString():document.querySelector(".e-pivot-calc-dialog-div.e-olap-calc-dialog-div").style.zIndex+1,i.style.display="inline",this.parent.isDragging=!0}else this.parent.isDragging=!1;e.bindEvents(e.dragElement)},t.prototype.calculatedDragClone=function(t){var i=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-drag-item e-treeview e-pivot-calc"}),n=sf.base.createElement("div",{className:"e-text-content e-calcfieldmember"});return n.appendChild(sf.base.createElement("div",{className:e})),n.appendChild(sf.base.createElement("span",{className:"e-list-text"})),n.innerText=sf.base.closest(t.element,"li").getAttribute("data-caption"),i.appendChild(n),document.body.appendChild(i),i},t}(),M=function(){function e(e){this.parent=e,this.parent.toolbarModule=this}return e.prototype.renderToolbar=function(){this.parent.element.querySelector("."+a)&&this.updateItemElements(this.parent.element.querySelector("."+a))},e.prototype.updateItemElements=function(e){for(var t=0,i=[].slice.call(e.querySelectorAll(".e-toolbar-item"));t<i.length;t++){var n=i[t];n.querySelector("button")?n.classList.contains("e-overlay")||n.querySelector("button").setAttribute("tabindex","0"):n.querySelector(".e-menu.e-menu-parent")&&(n.querySelector(".e-menu.e-menu-parent").setAttribute("tabindex","-1"),!n.classList.contains("e-overlay")&&n.querySelector(".e-menu-item.e-menu-caret-icon")&&n.querySelector(".e-menu-item.e-menu-caret-icon").setAttribute("tabindex","0"))}},e.prototype.focusToolBar=function(){sf.base.removeClass(document.querySelector("."+a).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),sf.base.removeClass(document.querySelector("."+a).querySelectorAll(".e-menu-item.e-selected"),"e-selected"),document.querySelector(".e-toolbar-items")&&sf.base.addClass([document.querySelector(".e-toolbar-items")],"e-focused")},e.prototype.selectInputRange=function(e){if(e.querySelector(".e-pivotview-report-input")){var t=e.querySelector(".e-pivotview-report-input input");t.setSelectionRange(t.value.length,t.value.length)}},e.prototype.copyMdxQuery=function(e){if(e.querySelector(".e-mdx-query-content")){var t=e.querySelector(".e-mdx-query-content");try{t.select(),document.execCommand("copy")}catch(e){window.alert("Oops, unable to copy")}}else;},e}(),S=function(){function t(e){this.parent=e,this.parent.treeRendererModule=this}return t.prototype.updateFieldListIcons=function(e,t){if(this.parent.fieldList)for(var i=document.getElementById(e),n=[].slice.call(i.querySelectorAll("ul li")),s=0;s<n.length;s++){var o=n[s].getAttribute("data-uid");this.updateTreeNode(n[s],o,t)}},t.prototype.updateTreeNode=function(t,i,n){var s=!1;s="olap"!==this.parent.options.dataType||this.updateOlapTreeNode(t);var o=t.querySelector(".e-text-content");if(t.querySelector("."+l)&&o){var r=t.querySelector("."+l);o.insertBefore(r,t.querySelector(".e-list-text"))}if(s&&!this.parent.isAdaptive){var a=this.parent.commonActionModule.getFieldInfo(i);s=!1;var h=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"}});h.appendChild(sf.base.createElement("span",{attrs:{tabindex:"-1",title:a.fieldItem?a.fieldItem.allowDragAndDrop?n:"":n,"aria-disabled":"false"},className:e+" e-drag "+(a.fieldItem?a.fieldItem.allowDragAndDrop?"":"e-disable-drag":"")})),t.querySelector(".e-checkbox-wrapper")&&!t.querySelector(".e-drag")&&o&&o.appendChild(h),this.parent.pivotButtonModule.createDraggable(!0,h,a.fieldItem)}t.querySelector(".e-check")&&sf.base.addClass([t.querySelector(".e-list-text")],"e-selected-node")},t.prototype.updateOlapTreeNode=function(e){if("olap"!==this.parent.options.dataType||!e)return!0;var t=e.querySelector(".e-text-content");return!!(t.querySelector(".e-hierarchyCDB-icon,.e-attributeCDB-icon,.e-namedSetCDB-icon")||t.querySelector(".e-measure-icon,.e-kpiGoal-icon,.e-kpiStatus-icon,.e-kpiTrend-icon,.e-kpiValue-icon")||t.querySelector(".e-calc-measure-icon,.e-calc-dimension-icon"))},t}(),x=function(){function e(e,t,i,n){window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=n,this.dataId=e,window.sfBlazor.setCompInstance(this),this.getOptions(t,i)}return e.prototype.getOptions=function(e,t){this.element=e,this.options=t,this.parentElement=document.getElementById(e.id+"_Dialog_Container"),this.isAdaptive=sf.base.Browser.isDevice,this.pivotGridModule=t.pivotGridModule?window.sfBlazor.getCompInstance(t.pivotGridModule):this.pivotGridModule,this.pivotGridModule&&sf.base.isNullOrUndefined(this.pivotGridModule.pivotFieldListModule)&&(this.pivotGridModule.pivotFieldListModule=this),this.fieldList=t.fieldList?t.fieldList:this.fieldList,this.dataSourceSettings=t.dataSourceSettings,this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:t.allowDeferLayoutUpdate&&this.isAdaptive?"auto":"100%"})},e.prototype.initModules=function(){this.treeRendererModule=new S(this),this.commonActionModule=new O(this),this.pivotButtonModule=new y(this),this.options.allowCalculatedField&&(this.calculatedFieldModule=new w(this)),this.unWireEvents(),this.wireEvents()},e.prototype.contentReady=function(){this.initModules(),this.pivotButtonModule&&(this.pivotButtonModule.createPivotButtonDrop(),this.pivotButtonModule.setPivotButtonDrag()),this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:"100%"})},e.prototype.onShowFieldList=function(e,t){e.querySelector(".e-toggle-field-list")&&sf.base.addClass([e.querySelector(".e-toggle-field-list")],"e-hide"),t.style.top=parseInt(t.style.top,10)<0?"0px":t.style.top},e.prototype.removeFieldListIcon=function(e){document.getElementById(e.id+"calculateddialog")&&!document.getElementById(e.id+"calculateddialog").classList.contains("e-popup-close")||!e.querySelector(".e-toggle-field-list")||sf.base.removeClass([e.querySelector(".e-toggle-field-list")],"e-hide")},e.prototype.updateFieldList=function(e){var t=e.querySelectorAll(".e-footer-content")[1];sf.base.select("#"+e.id+"_dialog-content",e)?(sf.base.setStyleAttribute(sf.base.select("#"+e.id+"_dialog-content",e),{padding:"0"}),t&&t.querySelector(".e-field-list-footer-content")&&sf.base.addClass([t],"e-field-list-footer")):e.querySelector(".e-adaptive-container").appendChild(t)},e.prototype.updateSelectedNodes=function(e,t){e=sf.base.closest(e,".e-text-content"),"check"===t?sf.base.addClass([e.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([e.querySelector(".e-list-text")],"e-selected-node");var i=sf.base.closest(e,"li");if(i&&i.querySelector("ul"))for(var n=0,s=[].slice.call(i.querySelectorAll("li"));n<s.length;n++){var o=s[n];"check"===t?sf.base.addClass([o.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([o.querySelector(".e-list-text")],"e-selected-node")}},e.prototype.removeFocusedElements=function(){this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused")},e.prototype.wireEvents=function(){sf.base.EventHandler.add(document,"click",this.removeFocusedElements,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(document,"click",this.removeFocusedElements)},e.prototype.destroy=function(e){this.unWireEvents(),this.commonActionModule.destroy(),this.pivotButtonModule.destroy(),this.isDestroyed=e},e}(),N=function(){function e(e){this.keyConfigs={shiftF:"shift+F",shiftS:"shift+S",shiftE:"shift+E",delete:"delete",enter:"enter",escape:"escape",upArrow:"upArrow",downArrow:"downArrow"},this.parent=e,this.parent.parentElement.tabIndex=-1===this.parent.parentElement.tabIndex?0:this.parent.parentElement.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.parentElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"shiftF":this.processFilter(e);break;case"shiftS":this.processSort(e);break;case"shiftE":this.processEdit(e);break;case"delete":this.processDelete(e);break;case"enter":this.processEnter(e);break;case"escape":this.processClose(e);break;case"upArrow":case"downArrow":this.processFilterNodeSelection(e)}},e.prototype.getButtonElement=function(e){for(var t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button")),i=0,n=t.length;i<n;i++)if(t[i].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[i];return e},e.prototype.processEnter=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button"))return t.querySelector(".e-dropdown-icon")&&sf.base.closest(t,".e-values")?t.querySelector(".e-dropdown-icon").click():t.querySelector(".e-edit")?t.querySelector(".e-edit").click():!t.querySelector(".e-sort")||sf.base.closest(t,".e-values")||sf.base.closest(t,".e-axis-filter")?t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values")&&t.querySelector(".e-btn-filter").click():(t.querySelector(".e-sort").click(),this.getButtonElement(t).focus()),e.stopPropagation(),void e.preventDefault()},e.prototype.processSort=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-sort")&&!sf.base.closest(t,".e-values")&&!sf.base.closest(t,".e-axis-filter"))return t.querySelector(".e-sort").click(),this.getButtonElement(t).focus(),e.stopPropagation(),void e.preventDefault()},e.prototype.processEdit=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-edit"))return t.querySelector(".e-edit").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processFilter=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values"))return t.querySelector(".e-btn-filter").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processFilterNodeSelection=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-select-all")&&40===e.keyCode){if((i=sf.base.closest(t,".e-member-editor-outer-container").querySelector(".e-member-editor-container"))&&i.querySelector("li"))return(s=i.querySelector("li"))&&sf.base.removeClass([s],["e-node-focus"]),sf.base.addClass([s],["e-node-focus"]),s.focus(),e.stopPropagation(),void e.preventDefault()}else if(t&&sf.base.closest(t,".e-member-editor-container")&&38===e.keyCode){var i;if((i=sf.base.closest(t,".e-member-editor-container")).querySelector("li.e-node-focus")&&i.querySelector("li")&&i.querySelector("li")===i.querySelector("li.e-node-focus")){sf.base.removeClass(i.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node");var n=sf.base.closest(t,".e-member-editor-outer-container").querySelector(".e-select-all");if(n&&n.querySelector("li")){var s=n.querySelector("li");return sf.base.addClass([s],["e-node-focus"]),s.focus(),e.stopPropagation(),void e.preventDefault()}}}},e.prototype.processDelete=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-remove"))return t.querySelector(".e-remove").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processClose=function(e){var t=e.target;if(t&&sf.base.closest(t,"."+h+"."+d)){var i=sf.base.closest(t,"."+h+"."+d).blazor__instance,n=this;if(i&&!i.closeOnEscape){var s=i.element.getAttribute("data-fieldName");i.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}).then((function(){if(n.parent.parentElement)for(var t=0,i=[].slice.call(n.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++){var o=i[t];if(o.getAttribute("data-uid")===s){o.focus();break}}e.preventDefault()}))}else this.closeDialog(sf.base.closest(t,"."+h+"."+d),e)}},e.prototype.closeDialog=function(e,t){return e.querySelector("."+m)?(e.querySelector("."+m).click(),void t.preventDefault()):e.querySelector(".e-cancel-btn")?(e.querySelector(".e-cancel-btn").click(),void t.preventDefault()):void 0},e.prototype.destroy=function(){this.keyboardModule&&this.keyboardModule.destroy()},e}(),O=function(){function e(e){this.parent=e,this.parent.commonActionModule=this,this.keyboardModule=new N(e),this.getElementInfo()}return e.prototype.getElementInfo=function(){if(this.parent instanceof j){var e=this.parent.element.getBoundingClientRect();this.parent.dotNetRef.invokeMethodAsync("GetElementInfo",e.width,e.height,this.parent.element.clientWidth,this.parent.element.clientHeight)}},e.prototype.updateActiveNode=function(e,t){var i=e.querySelectorAll("li.e-node-focus");return sf.base.removeClass(e.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),sf.base.addClass([e.querySelector('li[data-uid="'+t+'"]')],"e-prev-active-node"),i&&i.length>0&&e.querySelectorAll("li")[0]===i[0]},e.prototype.isFullRowElement=function(e,t){var i=document.elementFromPoint(t,e),n=i.classList.contains("e-fullrow");return JSON.stringify(this.parent instanceof x&&sf.base.closest(i,".e-field-list-tree-outer-div")?n&&!sf.base.isNullOrUndefined(i.parentElement.querySelector(".e-drag")):n)},e.prototype.validateInputs=function(e){var t=e.value1,i=e.value2,n=e.condition,s=e.type;if(sf.base.isNullOrUndefined(t)||""===t||["Between","NotBetween"].indexOf(n)>-1&&(sf.base.isNullOrUndefined(i)||""===i)){var o=sf.base.select("#"+this.parent.element.id+"_"+s.toLowerCase()+(sf.base.isNullOrUndefined(t)||""===t?"_input_option_1":"_input_option_2"),this.parent.parentElement);sf.base.addClass([o],"e-empty-field"),o.focus()}},e.prototype.updateDropIndicator=function(e){this.parent.isDragging&&e.target.classList.contains("e-axis-content")&&"mouseover"===e.type?(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),(t=[].slice.call(e.target.querySelectorAll(".e-pvt-btn-div"))).length>0&&sf.base.addClass([t[t.length-1].querySelector(".e-drop-indicator-last")],"e-drop-hover")):this.parent instanceof x&&(!this.parent.isDragging||!e.target.classList.contains("e-droppable")&&"mouseleave"===e.type)&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"));if(this.parent.isDragging&&sf.base.closest(e.target,".e-pvt-btn-div")&&"mouseover"===e.type&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.closest(e.target,".e-droppable"))){var t=sf.base.closest(e.target,".e-pvt-btn-div");sf.base.addClass([t.querySelector(".e-drop-indicator")],"e-drop-hover")}},e.prototype.getFieldInfo=function(e,t){for(var i=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],n=0,s=i.length;n<s;n++)for(var o=0,r=i[n]?i[n].length:0;o<r&&!t;o++)if(i[n][o]&&i[n][o].name===e)return{fieldName:e,fieldItem:i[n][o],axis:0===n?"rows":1===n?"columns":2===n?"values":"filters",position:o};var a=this.parent.fieldList[e];return{fieldName:e,fieldItem:a||t?{name:e,caption:a?a.caption:e,baseField:a?a.baseField:void 0,baseItem:a?a.baseItem:void 0,isCalculatedField:!!a&&a.isCalculatedField,isNamedSet:!!a&&a.isNamedSets,showNoDataItems:!!a&&a.showNoDataItems,showSubTotals:!!a&&a.showSubTotals,type:a?a.aggregateType:void 0,showFilterIcon:!!a&&a.showFilterIcon,showSortIcon:!!a&&a.showSortIcon,showRemoveIcon:!a||a.showRemoveIcon,showValueTypeIcon:!!a&&a.showValueTypeIcon,showEditIcon:!!a&&a.showEditIcon,allowDragAndDrop:!a||a.allowDragAndDrop}:void 0,axis:t?"row"===this.parent.dataSourceSettings.valueAxis?"rows":"columns":"fieldlist",position:-1}},e.prototype.getAggregateIcoPosition=function(e){var t=this.parent instanceof j?this.parent.parentElement.querySelector(".e-chart-grouping-bar"):void 0,i=(t&&"Chart"===this.parent.currentView?t:this.parent.parentElement).querySelector(".e-pivot-button."+e);if(i&&i.querySelector(".e-dropdown-icon")){var n=i.querySelector(".e-dropdown-icon").getBoundingClientRect(),s={};return s.top=n.top,s.left=n.left,s.bottom=n.bottom,s.right=n.right,JSON.stringify(s)}return null},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),E=function(){function i(e){this.keyConfigs={tab:"tab",shiftTab:"shift+tab",enter:"enter",shiftEnter:"shift+enter",ctrlEnter:"ctrl+enter",ctrlShiftF:"ctrl+shift+f"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.pivotViewKeyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return i.prototype.keyActionHandler=function(e){var t=e.target;if(!t||!sf.base.closest(t,".e-pivotfieldlist-container"))switch(e.action){case"tab":this.processTab(e);break;case"shiftTab":this.processShiftTab(e);break;case"enter":case"shiftEnter":case"ctrlEnter":this.processEnter(e);break;case"ctrlShiftF":this.toggleFieldList(e)}},i.prototype.getAdjacentButton=function(e,t){var i=this.allpivotButtons(e);if(sf.base.removeClass(i,"e-btn-focused"),this.parent.internalGrid&&i)for(var n=i.length,s=0;s<n;s++)if(i[s].getAttribute("data-uid")===e.getAttribute("data-uid")){var o="next"===t?i[s+1]:i[s-1];return o||e}return e},i.prototype.allpivotButtons=function(e){var t=[];if(e&&this.parent.options.showGroupingBar){var i=sf.base.closest(e,".e-pivot-grouping-bar"),n=sf.base.closest(e,".e-group-pivot-rows"),s=sf.base.closest(e,".e-chart-grouping-bar"),o=e.classList.contains(c),r=void 0,a=void 0,l=void 0;if(null!==i?a=i.classList.contains("e-pivot-grouping-bar"):null!==n?l=n.classList.contains("e-group-pivot-rows"):null!==s&&(r=s.classList.contains("e-chart-grouping-bar")),a||l||o){var h=[].slice.call(this.parent.element.querySelector(".e-pivot-grouping-bar").querySelectorAll(".e-pivot-button")),d=[].slice.call(this.parent.element.querySelector(".e-group-pivot-rows").querySelectorAll(".e-pivot-button"));t=h.concat(d)}else r&&(t=[].slice.call(this.parent.element.querySelector(".e-chart-grouping-bar").querySelectorAll(".e-pivot-button")))}return t},i.prototype.processTab=function(e){var i=this,n=e.target;if(n&&(sf.base.closest(n,".e-pivot-button")||n.classList.contains(t))){if(this.parent.internalGrid){if(n.parentElement.parentElement.classList.contains("e-group-rows")&&n.classList.contains("e-btn-focused")){var s=this.getAdjacentButton(n,"next");return s.getAttribute("data-uid")!==n.getAttribute("data-uid")&&(sf.base.addClass([s],"e-btn-focused"),s.focus()),e.stopPropagation(),void e.preventDefault()}var o=this.getAdjacentButton(n,"next");return o.getAttribute("data-uid")!==n.getAttribute("data-uid")&&(sf.base.addClass([o],"e-btn-focused"),o.focus()),void e.preventDefault()}}else n&&sf.base.closest(n,"."+a)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var e=i.getAdjacentToolbarItem(document.activeElement,"next");sf.base.removeClass(sf.base.closest(n,"."+a).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),e&&e.classList.contains("e-menu-item")&&sf.base.addClass([e],"e-focused")})))},i.prototype.getAdjacentToolbarItem=function(e,t){if(e.classList.contains("e-menu-item")&&e.classList.contains("e-focused")){var i=sf.base.closest(e,".e-toolbar-item"),n=[].slice.call(sf.base.closest(e,"."+a).querySelectorAll(".e-toolbar-item:not(.e-overlay)"));if("next"===t){for(var s=0;s<n.length;s++)if(i.id===n[s].id)return this.getActiveElement(n[s+1])}else for(s=n.length-1;s>-1;s--)if(i.id===n[s].id)return this.getActiveElement(n[s-1])}return e},i.prototype.getActiveElement=function(e){if(e){if("button"===e.firstElementChild.tagName.toLowerCase())return e.firstElementChild.focus(),e.firstElementChild;if(e.querySelector(".e-menu-item"))return e.querySelector(".e-menu-item").focus(),e.querySelector(".e-menu-item")}return document.activeElement},i.prototype.processShiftTab=function(e){var i=this,n=e.target;if(n&&(sf.base.closest(n,".e-pivot-button")||n.classList.contains(t))){if(this.parent.internalGrid){if(n.classList.contains(t)&&n.querySelector(".e-btn-focused"))n=n.querySelector(".e-btn-focused");else if(n.classList.contains(t)){n=this.parent.element.querySelector(".e-btn-focused")?this.parent.element.querySelector(".e-btn-focused"):this.parent.element.querySelector(".e-pivot-grouping-bar");var s=this.allpivotButtons(n);if(s.length>0&&s[s.length-1])return s[s.length-1].focus(),sf.base.removeClass(s,"e-btn-focused"),sf.base.addClass([s[s.length-1]],"e-btn-focused"),e.stopPropagation(),void e.preventDefault()}var o=this.getAdjacentButton(n,"previous");if(o.getAttribute("data-uid")!==n.getAttribute("data-uid"))return o.focus(),e.stopPropagation(),void e.preventDefault()}}else if(n&&this.parent.internalGrid&&(n.classList.contains("e-movablefirst")||n.classList.contains(c)&&sf.base.closest(n,"tr").getAttribute("data-uid")===this.parent.internalGrid.element.querySelector(".e-frozencontent tr").getAttribute("data-uid"))){var r=this.allpivotButtons(n);if(r.length>0)return setTimeout((function(){r[r.length-1].focus()})),sf.base.removeClass(r,"e-btn-focused"),sf.base.addClass([r[r.length-1]],"e-btn-focused"),e.stopPropagation(),void e.preventDefault()}else n&&sf.base.closest(n,"."+a)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var e=i.getAdjacentToolbarItem(document.activeElement,"previous");sf.base.removeClass(sf.base.closest(n,"."+a).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),e&&e.classList.contains("e-menu-item")&&sf.base.addClass([e],"e-focused")})))},i.prototype.processEnter=function(t){var i=t.target;if(i&&sf.base.closest(i,".e-grid"))return 13!==t.keyCode||t.shiftKey||t.ctrlKey?13===t.keyCode&&t.shiftKey&&!t.ctrlKey?this.parent.options.enableValueSorting&&(this.event=t,i.click()):13===t.keyCode&&!t.shiftKey&&t.ctrlKey&&this.parent.options.hyperlinkSettings&&i.querySelector("a")&&i.querySelector("a").click():i.querySelector("."+e)?(this.event=t,i.querySelector("."+e).click()):i.classList.contains("e-valuescontent")&&i.dispatchEvent(new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0})),void t.preventDefault()},i.prototype.toggleFieldList=function(e){var t=this.parent,i=e.target;if(t&&t.element&&t.options.showFieldList&&t.pivotFieldListModule){t.pivotFieldListModule=t.pivotFieldListModule&&t.pivotFieldListModule.blazor__instance?t.pivotFieldListModule.blazor__instance:t.pivotFieldListModule;var n=t.element.querySelector("#"+t.element.id+"fieldlist");if(t.options.showToolbar&&t.toolbarModule&&n&&n.querySelector("button")&&t.pivotFieldListModule.parentElement.classList.contains("e-popup-close"))return n.click(),void e.preventDefault();if(t.element.querySelector(".e-toggle-field-list")){if(!t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide"))return t.element.querySelector(".e-toggle-field-list").click(),void e.preventDefault();if((t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide")||t.options.showToolbar)&&i&&sf.base.closest(i,".e-pivotview")&&t.pivotFieldListModule.parentElement&&t.pivotFieldListModule.parentElement.classList.contains(d)){var s=t.pivotFieldListModule.parentElement.blazor__instance;s&&!s.closeOnEscape?s.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}):t.closeDialog(t.pivotFieldListModule.parentElement,e)}}}},i.prototype.destroy=function(){this.pivotViewKeyboardModule&&this.pivotViewKeyboardModule.destroy()},i}(),I=function(){function e(e){this.isPopupClicked=!1,this.shiftLockedPos=[],this.savedSelectedCellsPos=[],this.cellSelectionPos=[],this.parent=e,this.parent.selectionModule=this}return e.prototype.addInternalEvents=function(){this.wireEvents()},e.prototype.wireEvents=function(){this.unWireEvents(),sf.base.EventHandler.add(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler)},e.prototype.mouseClickHandler=function(e){(3===e.which||0===e.which)&&(this.lastCellClicked=e.target);var t=e.target;if((t.classList.contains(i)||t.classList.contains("e-headercelldiv")||t.classList.contains(c)||t.classList.contains("e-rowcell")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadertext"))&&"pivot"===this.parent.options.dataType){t.classList.contains(i)||t.classList.contains(c)||t.classList.contains("e-rowcell")?t:t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-cellvalue")||t.classList.contains("e-headercelldiv")||t.classList.contains("e-ascending")||t.classList.contains("e-descending")?t.parentElement:t.classList.contains("e-headertext")&&t.parentElement.parentElement,this.cellClicked(t,e)}else this.cellClicked(t,e)},e.prototype.cellClicked=function(e,t){var n=this,s=null;if(e.classList.contains(i)||e.classList.contains("e-stackedheadercell")||e.classList.contains("e-stackedheadercelldiv")||e.classList.contains("e-stackedheadertext")||e.classList.contains("e-pivotcell-container")||e.classList.contains("e-headertext")||e.classList.contains("e-headercelldiv")?s=sf.base.closest(e,"th."+i):e.classList.contains("e-cellvalue")||e.classList.contains("e-rowcell")?s=sf.base.closest(e,"td.e-rowcell"):e.classList.contains("e-rowselect")&&(e.classList.contains("e-spanclicked")?this.isPopupClicked=!1:this.isPopupClicked=!0),s){var o=Number(s.getAttribute("aria-colindex")),r=Number(s.getAttribute("index")),a=Number(s.getAttribute("aria-colspan"));this.parent.gridSettings.allowSelection&&(("Both"===this.parent.gridSettings.selectionSettings.mode?!s.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?s.classList.contains(p):"Row"!==this.parent.gridSettings.selectionSettings.mode)?this.parent.dotNetRef.invokeMethodAsync("ColumnSelectHandler",r,o,t).then((function(e){n.clearSelection(s,t,o,r),e||(n.clearSelection(s,t,o,r),n.applyColumnSelection(t,s,o,o+(a>0?a-1:0),r),n.afterColumnSelected(s,t,o,r))})):(this.clearSelection(s,t,o,r),this.afterColumnSelected(s,t,o,r))),this.parent.gridSettings.allowSelection||e.classList.contains("e-expand")||e.classList.contains("e-collapse")||this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",r,o,t)}},e.prototype.afterColumnSelected=function(e,t,i,n){this.getSelectedCellsPos();var s=JSON.stringify(this.savedSelectedCellsPos);("Both"===this.parent.gridSettings.selectionSettings.mode?!e.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?e.classList.contains(p):"Row"!==this.parent.gridSettings.selectionSettings.mode)&&(this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",n,i,t),this.parent.dotNetRef.invokeMethodAsync("SelectHandler",i,n,s),this.savedSelectedCellsPos=[])},e.prototype.clearSelection=function(e,t,i,n){if(sf.base.isNullOrUndefined(e))for(var s=0,o=[].slice.call(this.parent.element.querySelectorAll("."+f+", ."+u));s<o.length;s++){var r=o[s];sf.base.removeClass([r],["e-active",f,u])}else if(!t.shiftKey&&!t.ctrlKey||"Single"===this.parent.gridSettings.selectionSettings.type)if("Cell"===this.parent.gridSettings.selectionSettings.mode)e.classList.contains(p)?sf.base.removeClass(this.parent.element.querySelectorAll(".e-rowcell."+u),u):sf.base.removeClass(this.parent.element.querySelectorAll("."+p+".e-active"),["e-active",f]);else if("Both"===this.parent.gridSettings.selectionSettings.mode||"Row"===this.parent.gridSettings.selectionSettings.mode)if(e.classList.contains("e-rowcell"))for(var a=0,l=[].slice.call(this.parent.element.querySelectorAll("."+f+", ."+u));a<l.length;a++){r=l[a];sf.base.removeClass([r],["e-active",f,u])}else sf.base.removeClass(this.parent.element.querySelectorAll("."+u),u)},e.prototype.applyColumnSelection=function(e,t,n,s,o){var r=Number(t.getAttribute("index"));if(!t.classList.contains(c)||"Cell"!==this.parent.gridSettings.selectionSettings.mode||t.classList.contains(p)){var a=e.ctrlKey;"Multiple"===this.parent.gridSettings.selectionSettings.type&&null!==this.parent.element.querySelector(".e-rowselect")&&(this.isPopupClicked?(this.parent.element.querySelector(".e-rowselect").classList.add("e-spanclicked"),a=!0):(this.parent.element.querySelector(".e-rowselect").classList.remove("e-spanclicked"),a=!1));for(var l=[],h=this.parent.gridSettings.selectionSettings.type,d=t.classList.contains("e-active"),g=[],m={},v=n;v<=s;v++)g.push(v.toString());if(a&&"Single"!==h)d=!1;else{for(var b=0,y=[].slice.call(this.parent.element.querySelectorAll(".e-active"));b<y.length;b++){var C=y[b];sf.base.removeClass([C],["e-active",f]),-1===g.indexOf(C.getAttribute("aria-colindex"))&&(d=!1);var w=Number(C.getAttribute("aria-colindex"));m[w]=w}g=Object.keys(m).length>0?Object.keys(m).sort((function(e,t){return e-t})):g}"Multiple"===h&&e.shiftKey?(this.shiftLockedPos=0===this.shiftLockedPos.length?g:this.shiftLockedPos,Number(this.shiftLockedPos[0])<=n?n=Number(this.shiftLockedPos[0]):s=s<Number(this.shiftLockedPos[this.shiftLockedPos.length-1])?Number(this.shiftLockedPos[this.shiftLockedPos.length-1]):s):this.shiftLockedPos=[];var M=[];if(e.ctrlKey&&"Both"===this.parent.gridSettings.selectionSettings.mode&&"Multiple"===h&&!t.classList.contains(c))for(var S=0,x=[].slice.call(this.parent.element.querySelectorAll("."+c+"."+u));S<x.length;S++){C=x[S];M.push(C.getAttribute("index"))}for(var N=n;N<=s;)l.push('[aria-colindex="'+N+'"]'+("Cell"===this.parent.gridSettings.selectionSettings.mode?'[index="'+o+'"]':"")),N++;if(!d){o=t.classList.contains(i)?o:this.parent.scrollPageInfo.rowStartPos-1;for(var O=t.classList.contains("e-active"),E=0,I=[].slice.call(this.parent.element.querySelectorAll(l.toString()));E<I.length;E++){C=I[E];Number(C.getAttribute("index"))>=o&&(O&&a&&-1===M.indexOf(r.toString())?sf.base.removeClass([C],["e-active",f]):sf.base.addClass([C],["e-active",f]))}}}},e.prototype.getSelectedCellsPos=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll("."+f));e<t.length;e++){var i=t[e];this.savedSelectedCellsPos.push({rowIndex:i.getAttribute("index"),colIndex:i.getAttribute("aria-colindex")})}for(var n=0,s=[].slice.call(this.parent.element.querySelectorAll("."+u));n<s.length;n++){i=s[n];this.cellSelectionPos.push({rowIndex:i.getAttribute("index"),colIndex:i.getAttribute("aria-colindex")})}},e.prototype.destroy=function(){this.unWireEvents()},e}(),T=function(){function e(e){this.previousValues={top:0,left:0},this.frozenPreviousValues={top:0,left:0},this.eventType="",this.isScrolling=!1,this.isFireFox=sf.base.Browser.userAgent.toLowerCase().indexOf("firefox")>-1,this.parent=e,this.parent.virtualScrollModule=this}return e.prototype.addInternalEvents=function(){this.wireEvents()},e.prototype.wireEvents=function(){if(this.unWireEvents(),"Chart"!==this.parent.displayOptions.view){var e=this.parent.element.querySelector(".e-content-virtualtable"),t=this.parent.element.querySelector(".e-gridcontent"),i=this.parent.element.querySelector(".e-headercontent"),n=t.querySelector("."+b);sf.base.EventHandler.clearEvents(e),this.isFireFox&&sf.base.EventHandler.clearEvents(i);var s=this.parent.isAdaptive?e:t.querySelector("."+b);sf.base.EventHandler.add(s,"scroll touchmove pointermove",this.onHorizondalScroll(i,e,e),this),sf.base.EventHandler.add(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(e,e.parentElement),this),this.isFireFox?(sf.base.EventHandler.add(s,"mouseup touchend scroll",this.common(i,e,e),this),this.parent.isAdaptive||sf.base.EventHandler.add(e.parentElement,"mouseup touchend scroll",this.common(i,e.parentElement,e),this)):(sf.base.EventHandler.add(s,"mouseup touchend",this.common(i,e,e),this),this.parent.isAdaptive||sf.base.EventHandler.add(e.parentElement,"mouseup touchend",this.common(i,e.parentElement,e),this)),sf.base.EventHandler.add(n,"scroll",this.onCustomScrollbarScroll(e,i),this),sf.base.EventHandler.add(e,"scroll",this.onCustomScrollbarScroll(n,i),this),sf.base.EventHandler.add(i,"scroll",this.onCustomScrollbarScroll(n,e),this),sf.base.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(i,e,e),this),sf.base.EventHandler.add(e,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(e,"touchmove pointermove",this.onTouchScroll(i,e,e),this)}},e.prototype.unWireEvents=function(){if("Chart"!==this.parent.displayOptions.view){var e=this.parent.element.querySelector(".e-content-virtualtable"),t=this.parent.element.querySelector(".e-gridcontent"),i=this.parent.element.querySelector(".e-headercontent"),n=t.querySelector("."+b),s=this.parent.isAdaptive?e:t.querySelector("."+b);sf.base.EventHandler.remove(s,"scroll touchmove pointermove",this.onHorizondalScroll(i,e,e)),sf.base.EventHandler.remove(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(e,e.parentElement)),this.isFireFox?(sf.base.EventHandler.remove(s,"mouseup touchend scroll",this.common(i,e,e)),this.parent.isAdaptive||sf.base.EventHandler.remove(e.parentElement,"mouseup touchend scroll",this.common(i,e.parentElement,e))):(sf.base.EventHandler.remove(s,"mouseup touchend",this.common(i,e,e)),this.parent.isAdaptive||sf.base.EventHandler.remove(e.parentElement,"mouseup touchend",this.common(i,e.parentElement,e))),sf.base.EventHandler.remove(n,"scroll",this.onCustomScrollbarScroll(e,i)),sf.base.EventHandler.remove(e,"scroll",this.onCustomScrollbarScroll(n,i)),sf.base.EventHandler.remove(i,"scroll",this.onCustomScrollbarScroll(n,e)),sf.base.EventHandler.remove(i,"touchstart pointerdown",this.setPageXY()),sf.base.EventHandler.remove(i,"touchmove pointermove",this.onTouchScroll(i,e,e)),sf.base.EventHandler.remove(e,"touchstart pointerdown",this.setPageXY()),sf.base.EventHandler.remove(e,"touchmove pointermove",this.onTouchScroll(i,e,e))}},e.prototype.onWheelScroll=function(e,t){var i=this,n=e;return function(e){var t=n.parentElement.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);i.frozenPreviousValues.top!==t&&(e.preventDefault(),i.frozenPreviousValues.top=t,i.eventType=e.type)}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.onCustomScrollbarScroll=function(e,t){var i=this,n=e,s=t;return function(e){if(null!==i.parent.element.querySelector(".e-content").querySelector("tbody")){var t=e.target,o=t.scrollLeft;i.previousValues.left===o||i.isFireFox&&t.classList.contains("e-headercontent")||(n.scrollLeft=o,s.scrollLeft=o,i.parent.isDestroyed)}}},e.prototype.onTouchScroll=function(e,t,i){var n=this,s=t;return function(i){if("mouse"!==i.pointerType){var o=n.getPointXY(i),r=n.parent.element.querySelector(".e-grid .e-content").scrollTop+(n.pageXY.y-o.y),a=n.parent.isAdaptive?t:sf.base.closest(s,".e-gridcontent").querySelector("."+b),l=a.scrollLeft+(n.pageXY.x-o.x);n.frozenPreviousValues.left===l||l<0||(e.scrollLeft=l,a.scrollLeft=l,n.pageXY.x=o.x,n.frozenPreviousValues.left=l,n.frozenPreviousValues.top===r||r<0||(n.pageXY.y=o.y,n.frozenPreviousValues.top=r,n.eventType=i.type))}}},e.prototype.update=function(e,t,i,n,s,o,r){var a=this;if(this.isScrolling=!0,this.parent.pageSettings)if("vertical"===this.direction){var l=t.parentElement.scrollHeight-(n+t.parentElement.offsetHeight),h="pivot"===this.parent.options.dataType&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,d=this.parent.pageSettings.rowPageSize*h*this.parent.gridSettings.rowHeight,c=Math.ceil(n/d);if(c+=this.parent.options.enableOptimizedRendering&&l<=0?1:0,this.parent.scrollPosObject.vertical===c||this.parent.pageSettings.rowPageSize>=this.parent.scrollPageInfo.rowCount)return void(this.parent.options.enableOptimizedRendering&&this.parent.element.querySelector("."+v)&&(sf.base.removeClass([i],["e-virtual-pivot-content"]),sf.base.addClass([this.parent.element.querySelector("."+v)],["e-hide-loader"])));this.parent.scrollPosObject.vertical=c,this.parent.pageSettings.currentRowPage=c>1?c:1;var p=0;this.parent.options.enableOptimizedRendering&&this.parent.internalGrid&&this.parent.internalGrid.element.querySelector(".e-spinner-inner")&&sf.base.addClass([this.parent.internalGrid.element.querySelector(".e-spinner-inner")],["e-hide-loader"]),this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",c,this.direction).then((function(e){a.parent.getScrollInfo(e),p=a.parent.scrollPageInfo.rowStartPos;var t=Math.ceil(p/(a.parent.pageSettings.rowPageSize*h)),n=d*t-a.parent.scrollPageInfo.rowFirstLvl*h*a.parent.gridSettings.rowHeight;a.parent.scrollPosObject.verticalSection=n,a.parent.options.enableOptimizedRendering&&a.parent.element.querySelector("."+v)&&(sf.base.removeClass([i],["e-virtual-pivot-content"]),sf.base.addClass([a.parent.element.querySelector("."+v)],["e-hide-loader"]),a.parent.internalGrid&&a.parent.internalGrid.element.querySelector(".e-spinner-inner")&&sf.base.removeClass([a.parent.internalGrid.element.querySelector(".e-spinner-inner")],["e-hide-loader"]))}))}else{var u=r.scrollWidth-(r.scrollLeft+r.offsetWidth),f="pivot"===this.parent.options.dataType&&"column"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,g=this.parent.pageSettings.columnPageSize*f*this.parent.gridSettings.columnWidth;c=Math.ceil(Math.abs(s)/g);if(c+=this.parent.options.enableOptimizedRendering&&u<=0?1:0,this.parent.scrollPosObject.horizontal===c)return void(this.parent.options.enableOptimizedRendering&&this.parent.element.querySelector("."+v)&&(sf.base.removeClass([e,t],["e-virtual-pivot-content"]),sf.base.addClass([this.parent.element.querySelector("."+v)],["e-hide-loader"])));this.parent.scrollPosObject.horizontal=c,this.parent.pageSettings.currentColumnPage=c>1?c:1;var m=0;this.parent.options.enableOptimizedRendering&&this.parent.internalGrid&&this.parent.internalGrid.element.querySelector(".e-spinner-inner")&&sf.base.addClass([this.parent.internalGrid.element.querySelector(".e-spinner-inner")],["e-hide-loader"]),this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",c,this.direction).then((function(i){a.parent.getScrollInfo(i),m=a.parent.scrollPageInfo.colStartPos;var n=Math.ceil(m/(a.parent.pageSettings.columnPageSize*f)),s=g*n-a.parent.scrollPageInfo.colFirstLvl*f*a.parent.gridSettings.columnWidth;a.parent.scrollPosObject.horizontalSection=s,a.parent.options.enableOptimizedRendering&&a.parent.element.querySelector("."+v)&&(sf.base.removeClass([e,t],["e-virtual-pivot-content"]),sf.base.addClass([a.parent.element.querySelector("."+v)],["e-hide-loader"]),a.parent.internalGrid&&a.parent.internalGrid.element.querySelector(".e-spinner-inner")&&sf.base.removeClass([a.parent.internalGrid.element.querySelector(".e-spinner-inner")],["e-hide-loader"]))}))}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.common=function(e,t,i){var n=this;return function(s){var o=n.parent.isAdaptive?t:sf.base.closest(t,".e-gridcontent").querySelector("."+b);n.parent.options.enableOptimizedRendering&&("vertical"===n.direction?n.parent.element.querySelector("."+v)&&(sf.base.addClass([i],["e-virtual-pivot-content"]),sf.base.removeClass([n.parent.element.querySelector("."+v)],["e-hide-loader"])):n.parent.element.querySelector("."+v)&&(sf.base.addClass([e,t],["e-virtual-pivot-content"]),sf.base.removeClass([n.parent.element.querySelector("."+v)],["e-hide-loader"]))),n.update(e,t,i,n.parent.element.querySelector(".e-grid .e-content").scrollTop*n.parent.verticalScrollScale,o.scrollLeft*n.parent.horizontalScrollScale,s,o)}},e.prototype.onHorizondalScroll=function(e,t,n){var s,o=this,r=this.parent.isAdaptive?t:sf.base.closest(t,".e-gridcontent").querySelector("."+b),a=Math.abs(r.scrollLeft),l=a*this.parent.horizontalScrollScale,h=l-this.parent.scrollPosObject.horizontalSection-a;h=this.parent.options.enableRtl?h:-h;for(var d=0,c=this.parent.element.querySelectorAll(".e-leftfreeze");d<c.length;d++)this.parent.options.enableRtl?c[d].style.right=Number(h)+"px":c[d].style.left=Number(-h)+"px";return function(d){if(a=Math.abs(r.scrollLeft),l=a*o.parent.horizontalScrollScale,"wheel"!==d.type&&"touchmove"!==d.type&&"wheel"!==o.eventType&&"touchmove"!==o.eventType||(clearTimeout(s),s=setTimeout((function(){l="touchmove"===d.type?a:l,o.update(e,t,n,t.parentElement.scrollTop*o.parent.verticalScrollScale,l,d,r)}),300)),o.previousValues.left!==l){o.scrollDirection=o.direction="horizondal",h=l-o.parent.scrollPosObject.horizontalSection-a,h=o.parent.options.enableRtl?h:-h;var c=t.querySelector("."+g).style.transform.split(",").length>1?t.querySelector("."+g).style.transform.split(",")[1].trim():"0px)";if(a<o.parent.scrollerBrowserLimit){sf.base.setStyleAttribute(t.querySelector("."+g),{transform:"translate("+h+"px,"+c}),sf.base.setStyleAttribute(e.querySelector("."+g),{transform:"translate("+h+"px,0px)"});for(var p=0,u=o.parent.element.querySelectorAll(".e-leftfreeze");p<u.length;p++)o.parent.options.enableRtl?u[p].style.right=Number(h)+"px":u[p].style.left=Number(-h)+"px"}var f=o.parent.scrollPosObject.horizontalSection>l?-(o.parent.scrollPosObject.horizontalSection-l):l+(e.offsetWidth-e.querySelector(".e-headercell.e-leftfreeze").offsetWidth)-(o.parent.scrollPosObject.horizontalSection+(t.querySelector("."+g).offsetWidth-t.querySelector("."+g).querySelector(".e-leftfreeze.e-rowsheader").offsetWidth)),m=Math.ceil(o.parent.scrollPosObject.horizontalSection/o.parent.horizontalScrollScale)<o.parent.scrollerBrowserLimit;if(o.parent.scrollPosObject.horizontalSection>l||f>1&&m){o.parent.options.enableOptimizedRendering&&o.parent.element.querySelector("."+v)&&(sf.base.addClass([e,t],["e-virtual-pivot-content"]),sf.base.removeClass([o.parent.element.querySelector("."+v)],["e-hide-loader"])),l>e.clientWidth?(o.parent.scrollPosObject.left<1&&(o.parent.scrollPosObject.left=e.clientWidth),o.parent.scrollPosObject.left=o.parent.scrollPosObject.left-50,f=o.parent.scrollPosObject.horizontalSection>l?f-o.parent.scrollPosObject.left:f+o.parent.scrollPosObject.left):f=-o.parent.scrollPosObject.horizontalSection,h=-(l-(o.parent.scrollPosObject.horizontalSection+f)-sf.base.closest(t,".e-gridcontent").querySelector("."+b).scrollLeft);var y=o.parent.gridSettings.columnWidth*o.parent.scrollPageInfo.columnCount;y>o.parent.scrollerBrowserLimit&&(o.parent.horizontalScrollScale=y/o.parent.scrollerBrowserLimit,y=o.parent.scrollerBrowserLimit),h>y&&h>l&&(h=l,f=0),sf.base.setStyleAttribute(t.querySelector("."+g),{transform:"translate("+h+"px,"+c}),sf.base.setStyleAttribute(e.querySelector("."+g),{transform:"translate("+h+"px,0px)"});for(p=0,u=o.parent.element.querySelectorAll(".e-leftfreeze");p<u.length;p++)o.parent.options.enableRtl?u[p].style.right=Number(h)+"px":u[p].style.left=Number(-h)+"px";o.parent.scrollPosObject.horizontalSection=o.parent.scrollPosObject.horizontalSection+f}var C=r.scrollWidth-(a+(r.offsetWidth-o.parent.element.querySelector(".e-grid").querySelector("."+i+".e-leftfreeze").offsetWidth));if(C<=0){var w=t.querySelector(".e-virtualtrack");w.style.display="none";var M=t.scrollWidth-(t.scrollLeft+t.offsetWidth);w.style.display="";var S=t.scrollWidth-(t.scrollLeft+t.offsetWidth);o.parent.scrollPosObject.horizontalSection-=M>C?M:-S,h=r.scrollLeft>o.parent.scrollerBrowserLimit?Number(t.querySelector("."+g).style.transform.split(",")[0].split("px")[0].trim()):-(r.scrollLeft*o.parent.horizontalScrollScale-o.parent.scrollPosObject.horizontalSection-r.scrollLeft),sf.base.setStyleAttribute(t.querySelector("."+g),{transform:"translate("+h+"px,"+c}),sf.base.setStyleAttribute(e.querySelector("."+g),{transform:"translate("+h+"px,0px)"});for(p=0,u=o.parent.element.querySelectorAll(".e-leftfreeze");p<u.length;p++)o.parent.options.enableRtl?u[p].style.right=Number(h)+"px":u[p].style.left=Number(-h)+"px"}o.previousValues.left=l,o.frozenPreviousValues.left=l,o.eventType="",e.scrollLeft=r.scrollLeft,t.scrollLeft=r.scrollLeft}}},e.prototype.onVerticalScroll=function(e,t){var i,n=this;return function(s){var o=t.scrollTop*n.parent.verticalScrollScale;if("wheel"===s.type||"touchmove"===s.type||"wheel"===n.eventType||"touchmove"===n.eventType||"keyup"===s.type||"keydown"===s.type){var r=n.parent.isAdaptive?t:sf.base.closest(t,".e-gridcontent").querySelector("."+b);clearTimeout(i),i=setTimeout((function(){var i=0;if(n.parent.isAdaptive){var o=r.querySelector(".e-content-virtualtable");i=r.scrollLeft===o.scrollLeft?r.scrollLeft:o.scrollLeft}else i=r.scrollLeft;n.update(null,t,e,t.scrollTop*n.parent.verticalScrollScale,i*n.parent.horizontalScrollScale,s,r)}),300)}if(n.previousValues.top!==o){n.parent.scrollPosObject.horizontalSection<0&&(n.parent.scrollPosObject.horizontalSection=0),n.scrollDirection=n.direction="vertical";var a=-(o-n.parent.scrollPosObject.verticalSection-t.scrollTop),l=t.querySelector("."+g).style.transform.split(",")[0].trim();a>n.virtualDiv.clientHeight&&(a=n.virtualDiv.clientHeight),t.scrollTop<n.parent.scrollerBrowserLimit&&(sf.base.setStyleAttribute(t.querySelector("."+g),{transform:"translate(0px,"+a+"px)"}),sf.base.setStyleAttribute(t.querySelector("."+g),{transform:l+","+a+"px)"}));var h=n.parent.scrollPosObject.verticalSection>o?-(n.parent.scrollPosObject.verticalSection-o):o+t.clientHeight-(n.parent.scrollPosObject.verticalSection+e.querySelector("."+g).offsetHeight),d=Math.ceil(n.parent.scrollPosObject.verticalSection/n.parent.verticalScrollScale)<n.parent.scrollerBrowserLimit;if(n.parent.scrollPosObject.verticalSection>o||h>1&&d){n.parent.options.enableOptimizedRendering&&n.parent.element.querySelector("."+v)&&(sf.base.addClass([e],["e-virtual-pivot-content"]),sf.base.removeClass([n.parent.element.querySelector("."+v)],["e-hide-loader"])),o>t.clientHeight?(n.parent.scrollPosObject.top<1&&(n.parent.scrollPosObject.top=t.clientHeight),n.parent.scrollPosObject.top=n.parent.scrollPosObject.top-50,h=n.parent.scrollPosObject.verticalSection>o?h-n.parent.scrollPosObject.top:h+n.parent.scrollPosObject.top):h=-n.parent.scrollPosObject.verticalSection;var c=n.parent.element.querySelector(".e-content").querySelector("."+g);a=-(o-(n.parent.scrollPosObject.verticalSection+h)-t.scrollTop);var p=n.parent.gridSettings.rowHeight*n.parent.scrollPageInfo.rowCount+.1-c.clientHeight;p>n.parent.scrollerBrowserLimit&&(n.parent.verticalScrollScale=p/n.parent.scrollerBrowserLimit,p=n.parent.scrollerBrowserLimit),a>p&&a>o&&(a=o,h=0),a>n.virtualDiv.clientHeight&&(a=n.virtualDiv.clientHeight),sf.base.setStyleAttribute(t.querySelector("."+g),{transform:"translate(0px,"+a+"px)"}),sf.base.setStyleAttribute(t.querySelector("."+g),{transform:l+","+a+"px)"}),n.parent.scrollPosObject.verticalSection=n.parent.scrollPosObject.verticalSection+h}n.previousValues.top=o,n.frozenPreviousValues.top=o,n.eventType=""}}},e.prototype.updateScrollInfo=function(e,t,n){if(this.parent.options.enableVirtualization){var s=this.parent.getScrollBarWidth(),r=e.querySelector(".e-content-virtualtable")?e.querySelector(".e-content-virtualtable"):e.querySelector(".e-content"),a=(e.querySelector(".e-frozencontent"),e.querySelector(".e-headercontent")),l=e.querySelector(".e-gridcontent"),h=r.parentElement.offsetWidth<r.querySelector("."+g).offsetWidth;if(this.parent.options.enableOptimizedRendering){var d=e.querySelector("."+v);if(d||(d=sf.base.createElement("div",{className:v+" e-hide-loader",innerHTML:this.parent.options.localeObj.loading}),this.parent.internalGrid&&this.parent.internalGrid.element&&!e.querySelector("."+v)&&this.parent.internalGrid.element.insertBefore(d,this.parent.internalGrid.element.firstElementChild)),e.querySelector("."+o)&&e.querySelector(".e-gridcontent")){var c=e.querySelector(".e-gridcontent").offsetHeight+e.querySelector("."+o).offsetHeight;sf.base.setStyleAttribute(d,{height:c+"px",width:e.querySelector("."+o).offsetWidth+"px",padding:Math.floor(c/2)+"px"})}}e.querySelector(".e-content")&&!e.querySelector(".e-content").querySelector(".e-virtualtrack")&&(this.virtualDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),e.querySelector(".e-content").appendChild(this.virtualDiv)),e.querySelector(".e-headercontent")&&!e.querySelector(".e-headercontent").querySelector(".e-virtualtrack")?(this.virtualHeaderDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),e.querySelector(".e-headercontent").appendChild(this.virtualHeaderDiv)):this.virtualHeaderDiv=e.querySelector(".e-headercontent").querySelector(".e-virtualtrack");var p=l.querySelector("."+b);if(l&&!p){this.virtualTableDiv=sf.base.createElement("div",{className:b}),l.appendChild(this.virtualTableDiv),p=l.querySelector("."+b),this.virtualScrollDiv=sf.base.createElement("div",{className:"e-movablescroll"}),p.appendChild(this.virtualScrollDiv),sf.base.setStyleAttribute(p,{minHeight:s+"px",maxHeight:s+"px",overflowX:"scroll"}),sf.base.setStyleAttribute(this.virtualScrollDiv,{height:"0.1px"});var u=sf.base.createElement("div",{className:"e-content-virtualtable"});u.append.apply(u,r.childNodes),r.appendChild(u),u.scrollLeft=0}var f=e.querySelector(".e-content").querySelector("."+g),m=this.parent.gridSettings.rowHeight*n+.1-f.clientHeight;m>this.parent.scrollerBrowserLimit&&(this.parent.verticalScrollScale=m/this.parent.scrollerBrowserLimit,m=this.parent.scrollerBrowserLimit);var y=this.parent.gridSettings.columnWidth*t;y>this.parent.scrollerBrowserLimit&&(this.parent.horizontalScrollScale=y/this.parent.scrollerBrowserLimit,y=this.parent.scrollerBrowserLimit),sf.base.setStyleAttribute(this.virtualDiv,{height:(m>.1?m:.1)+"px",width:(y>.1?y:.1)+"px"}),sf.base.setStyleAttribute(this.virtualHeaderDiv,{height:0,width:(y>.1?y:.1)+"px"}),this.parent.isAdaptive&&(r.style.minHeight="1px",r.style.minHeight="1px");var C=this.parent.isAdaptive?r:l.querySelector("."+b)?l.querySelector("."+b):r,w=r.parentElement.scrollTop>this.parent.scrollerBrowserLimit||"horizondal"===this.direction?r.querySelector("."+g).style.transform.split(",")[1].trim():(this.parent.options.enableOptimizedRendering?r.parentElement.scrollTop:-(r.parentElement.scrollTop*this.parent.verticalScrollScale-this.parent.scrollPosObject.verticalSection-r.parentElement.scrollTop))+"px)",M=Math.abs(C.scrollLeft),S=M>this.parent.scrollerBrowserLimit?r.querySelector("."+g).style.transform.split(",")[0].trim()+",":"translate("+(this.parent.options.enableRtl?1:-1)*(M*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-M)+"px,";sf.base.setStyleAttribute(r.querySelector("."+g),{transform:S+w}),sf.base.setStyleAttribute(a.querySelector("."+g),{transform:S+0+"px)"}),!h&&l&&p||this.parent.isAdaptive?p.style.display="none":p.style.display="block";for(var x=Number(-r.querySelector("."+g).style.transform.split("(")[1].split(",")[0].split("px")[0]),N=0,O=e.querySelectorAll(".e-leftfreeze");N<O.length;N++)this.parent.options.enableRtl?O[N].style.right=-x+"px":O[N].style.left=x+"px";if(h){var E=0;E=t<25?y+r.querySelector("."+g).querySelector(".e-leftfreeze").offsetWidth+(l.offsetWidth-l.clientWidth):y+(l.offsetWidth-l.clientWidth),"auto"!==this.parent.options.height?e.querySelector(".e-movablescroll").style.width=E+s+"px":e.querySelector(".e-movablescroll").style.width=E+"px"}var I="pivot"===this.parent.options.dataType&&"column"===this.parent.options.dataSourceSettings.valueAxis?this.parent.options.dataSourceSettings.values.length:1,T=this.parent.pageSettings.columnPageSize*I*this.parent.options.gridSettings.columnWidth,D=C.scrollWidth-(Math.abs(M)+C.offsetWidth);if(this.parent&&T>0&&D<=T&&C.scrollLeft>0){var j=r.scrollWidth-(Math.abs(r.scrollLeft)+r.parentElement.offsetWidth);j<1&&"horizondal"===this.scrollDirection&&(this.virtualDiv.style.display="none",j=r.scrollWidth-(Math.abs(r.scrollLeft)+r.parentElement.offsetWidth)),this.virtualDiv.style.display="";var A=r.scrollWidth-(Math.abs(r.scrollLeft)+r.parentElement.offsetWidth);j>1&&(this.parent.scrollPosObject.horizontalSection-=D<=0?j>D?j:-A:A===j?j-D:j<A&&(D===A||D>j)?-(A-j):0,"auto"!==this.parent.options.height&&(this.parent.scrollPosObject.horizontalSection-=s),this.parent.scrollPosObject.horizontalSection=this.parent.scrollPosObject.horizontalSection>=-e.querySelector(".e-grid").querySelector("."+i+".e-leftfreeze").offsetWidth?this.parent.scrollPosObject.horizontalSection:-e.querySelector(".e-grid").querySelector("."+i+".e-leftfreeze").offsetWidth),S=C.scrollLeft>this.parent.scrollerBrowserLimit?r.querySelector("."+g).style.transform.split(",")[0].trim()+",":"translate("+-(C.scrollLeft*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-C.scrollLeft)+"px,",sf.base.setStyleAttribute(r.querySelector("."+g),{transform:S+w}),sf.base.setStyleAttribute(a.querySelector("."+g),{transform:S+0+"px)"}),x=Number(-r.querySelector("."+g).style.transform.split("(")[1].split(",")[0].split("px")[0]);for(N=0,O=e.querySelectorAll(".e-leftfreeze");N<O.length;N++)this.parent.options.enableRtl?O[N].style.right=-x+"px":O[N].style.left=x+"px"}if(e.querySelector(".e-movablescroll")){var z=e.querySelector(".e-movablescroll").style.width;z&&Number(z.replace("px",""))>0||(sf.base.closest(e.querySelector(".e-movablescroll"),"."+b).style.display="none")}this.parent.options.isEmptyData&&(r.style.height=(f?f.querySelector("tr").offsetHeight:30)+"px"),this.parent.virtualScrollModule&&!this.parent.options.isEmptyData&&this.onHorizondalScroll(a,r,r)}},e.prototype.destroy=function(){this.unWireEvents()},e}(),D=function(){function e(e){this.keyConfigs={escape:"escape"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;var t=document.getElementById(this.parent.element.id+"_drillthrough");this.drillThroughKeyboardModule=new sf.base.KeyboardEvents(t,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"escape":this.processClose(e)}},e.prototype.processClose=function(e){var t=e.target;if(t&&sf.base.closest(t,"."+h+"."+d)){var i=sf.base.closest(t,"."+h+"."+d).blazor__instance,n=this;if(i&&!i.closeOnEscape){var s=i.element.getAttribute("data-fieldName");i.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}).then((function(){if(n.parent.parentElement)for(var t=0,i=[].slice.call(n.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++){var o=i[t];if(o.getAttribute("data-uid")===s){o.focus();break}}e.preventDefault()}))}else n.parent.closeDialog(sf.base.closest(t,"."+h+"."+d),e)}},e.prototype.destroy=function(){this.drillThroughKeyboardModule&&!this.drillThroughKeyboardModule.isDestroyed&&this.drillThroughKeyboardModule.destroy()},e}(),j=function(){function t(e,t,i,n){this.scrollPageInfo={rowCount:0,columnCount:0,colFirstLvl:0,rowFirstLvl:0,colStartPos:0,rowStartPos:0},this.verticalScrollScale=1,this.horizontalScrollScale=1,this.scrollerBrowserLimit=8e6,this.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=n,this.dataId=e,window.sfBlazor.setCompInstance(this),this.getOptions(t,i),this.initModules()}return t.prototype.getOptions=function(e,t){this.element=e,this.options=t,this.parentElement=e,this.isAdaptive=sf.base.Browser.isDevice,this.internalGrid=t.internalGrid?window.sfBlazor.getCompInstance(t.internalGrid):this.internalGrid,this.pivotFieldListModule=t.fieldListModule?window.sfBlazor.getCompInstance(t.fieldListModule):this.pivotFieldListModule,this.fieldList=t.fieldList?t.fieldList:this.fieldList,this.dataSourceSettings=t.dataSourceSettings,this.gridSettings=t.gridSettings,this.editSettings=t.editSettings,this.displayOptions=t.displayOptions,this.enableValueSorting=t.enableValueSorting,this.currentView="Both"===this.displayOptions.view?this.displayOptions.primary:this.displayOptions.view,this.groupingBarSettings=this.options.groupingBarsettings,this.pageSettings=this.options.pageSettings,this.options.scrollPageInfo&&this.getScrollInfo(this.options.scrollPageInfo)},t.prototype.initModules=function(){this.options.showGroupingBar&&(this.groupingBarModule=new C(this)),this.options.showToolbar&&(this.toolbarModule=new M(this)),this.options.allowCalculatedField&&(this.calculatedFieldModule=new w(this)),this.options.enableVirtualization&&(this.virtualScrollModule=new T(this)),this.gridSettings.allowSelection&&(this.selectionModule=new I(this)),this.keyboardModule=new E(this),this.commonActionModule=new O(this),this.contentReady(),this.unWireEvents(),this.wireEvents()},t.prototype.updateModuleProperties=function(){this.options.showGroupingBar&&(this.groupingBarModule?this.groupingBarModule.parent=this.pivotButtonModule.parent=this:this.groupingBarModule=new C(this)),this.options.showToolbar&&(this.toolbarModule?this.toolbarModule.parent=this:this.toolbarModule=new M(this)),this.options.allowCalculatedField&&(this.calculatedFieldModule?this.calculatedFieldModule.parent=this:this.calculatedFieldModule=new w(this)),this.gridSettings.allowSelection&&(this.selectionModule?this.selectionModule.parent=this:this.selectionModule=new I(this)),this.options.enableVirtualization&&(this.virtualScrollModule?this.virtualScrollModule.parent=this:this.virtualScrollModule=new T(this)),this.editSettings.allowEditing&&this.drillThroughModule&&(this.drillThroughModule.parent=this),this.keyboardModule.parent=this.commonActionModule.parent=this.commonActionModule.keyboardModule.parent=this},t.prototype.getChartHeight=function(e){var t;return this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.width=this.element.querySelector(".e-pivotchart").style.width,e=this.element.querySelector(".e-chart-grouping-bar").clientHeight),this.options.showToolbar&&this.options.showGroupingBar?t=(e-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString():this.options.showToolbar?t=(e-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)).toString():this.options.showGroupingBar&&(t=(e-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString()),t},t.prototype.contentReady=function(){if(this.updateModuleProperties(),this.options.renderGrid){if(("Both"!=this.displayOptions.view||this.options.showToolbar&&"Table"!=this.displayOptions.primary)&&"Table"!=this.displayOptions.view?(this.options.showToolbar&&"Both"==this.displayOptions.view&&"Chart"==this.displayOptions.primary||"Chart"==this.displayOptions.view)&&this.options.showGroupingBar&&this.groupingBarModule&&this.groupingBarModule.refreshUI():this.updateGridUI(this.element,this.options,this.scrollPageInfo.columnCount,this.scrollPageInfo.rowCount),(!this.options.showGroupingBar||!this.groupingBarModule)&&this.element&&this.element.querySelectorAll(".e-axis-container").length>0)for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var i=t[e];sf.base.closest(i,".e-pivotfieldlist-container")||sf.base.remove(i)}this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.addInternalEvents(),this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.addInternalEvents()}},t.prototype.getSelectedCellDom=function(e){return e?JSON.stringify(window.sfBlazor.getDomObject("currentCell",e)):null},t.prototype.selectedCell=function(e,t,i){return i?this.getSelectedCellDom(this.element.querySelector("."+(0===e?"e-frozenheader":"e-headercontent")+' th[index="'+t+'"][aria-colindex="'+e+'"]')):this.getSelectedCellDom(this.element.querySelector("."+(0===e?"e-frozencontent":"e-movablecontent")+' td[index="'+t+'"][aria-colindex="'+e+'"]'))},t.prototype.hyperlinkCellclick=function(e,t){if(null!=e){e.currentCell=window.sfBlazor.getElementByXpath(t);var i=e.currentCell.getAttribute("data-url")?e.currentCell.getAttribute("data-url"):e.currentCell.querySelector("a").getAttribute("data-url");window.open(i)}},t.prototype.createSheet=function(e,t,i){var n=".format"+t+i;this.createStyleSheet().insertRule(n+", "+n+" .e-cellvalue{"+e+"}",0)},t.prototype.getScrollInfo=function(e){e&&(this.scrollPageInfo.colFirstLvl=e.colFirstLvl,this.scrollPageInfo.rowFirstLvl=e.rowFirstLvl,this.scrollPageInfo.columnCount=e.columnCount,this.scrollPageInfo.rowCount=e.rowCount,this.scrollPageInfo.colStartPos=e.colStartPos,this.scrollPageInfo.rowStartPos=e.rowStartPos)},t.prototype.exportDocument=function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);var o=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},t.prototype.createStyleSheet=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet},t.prototype.getSelectedCells=function(){for(var e=[],t=0,i=[].slice.call(this.element.querySelectorAll("."+u+",."+f));t<i.length;t++){var n=i[t],s=Number(n.getAttribute("aria-colindex")),o=Number(n.getAttribute("index")),r={};sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(o)||(r.index=o,r["aria-colindex"]=s,e.push(r))}return JSON.stringify(e)},t.prototype.onContextMenuOpen=function(){if(this.options.allowGrouping&&this.lastCellClicked){var e=sf.base.closest(this.lastCellClicked,"td."+c+",th."+p);if(this.lastCellClicked=void 0,e&&!e.classList.contains("e-valuesheader")){var t=Number(e.getAttribute("aria-colindex")),i=Number(e.getAttribute("index")),n={};if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i))return n.index=i,n["aria-colindex"]=t,JSON.stringify(n)}return null}return null},t.prototype.mouseRclickHandler=function(e){this.lastCellClicked=e.target},t.prototype.mouseClickHandler=function(e){this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused"),this.element.querySelector("."+a)&&this.element.querySelector("."+a).querySelectorAll(".e-menu-item.e-focused").length>0&&sf.base.removeClass(this.element.querySelector("."+a).querySelectorAll(".e-menu-item.e-focused"),"e-focused");var t=e.target;if(this.enableValueSorting&&"pivot"===this.options.dataType&&(t.classList.contains("e-sortfilterdiv")||t.classList.contains("e-stackedheadertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headercelldiv")||t.classList.contains(i)||t.classList.contains("e-cellvalue")||t.classList.contains(p)||t.classList.contains(c)||t.classList.contains("e-pivotcell-container"))){if((r=sf.base.closest(t,"td."+c+",th."+p))&&(sf.base.closest(r,"."+o)&&"column"===this.dataSourceSettings.valueAxis||sf.base.closest(r,"tr.e-row")&&"row"===this.dataSourceSettings.valueAxis&&(r.classList.contains(c)||r.classList.contains("e-stot")))){if(this.enableValueSorting){var n=Number(r.getAttribute("aria-colindex")),s=Number(r.getAttribute("index"));"column"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(n=Number(r.getAttribute("aria-colindex"))+Number(r.getAttribute("colspan"))-1),this.dotNetRef.invokeMethodAsync("MouseClickHandler",s,n)}e.preventDefault()}}else if(!this.gridSettings.allowSelection){var r;if(null!==(r=sf.base.closest(t,"td."+c+",th."+p+",td.e-rowcell"))){n=Number(r.getAttribute("aria-colindex")),s=Number(r.getAttribute("index"));t.classList.contains("e-expand")||t.classList.contains("e-collapse")||this.dotNetRef.invokeMethodAsync("CellClickedHandler",s,n,e)}}},t.prototype.getHeightAsNumber=function(){var e;return isNaN(this.options.height)?this.options.height.toString().indexOf("%")>-1?e=parseFloat(this.options.height.toString())/100*this.element.offsetHeight:this.options.height.toString().indexOf("px")>-1?e=Number(this.options.height.toString().split("px")[0]):"auto"===this.options.height&&(e=this.element.offsetHeight):e=Number(this.options.height),e<this.getminHeightAsNumber()&&(e=this.getminHeightAsNumber()),e},t.prototype.getminHeightAsNumber=function(){var e;return isNaN(this.options.minHeight)?this.options.minHeight.toString().indexOf("%")>-1?e=parseFloat(this.options.minHeight.toString())/100*this.element.offsetHeight:this.options.minHeight.toString().indexOf("px")>-1?e=Number(this.options.minHeight.toString().split("px")[0]):"auto"===this.options.minHeight&&(e=this.element.offsetHeight):e=300,e},t.prototype.calculateGridHeight=function(e,t,i){var n=this.options.height,s=this.getHeightAsNumber(),o=t*this.gridSettings.rowHeight;isNaN(s)&&(s=s>this.getminHeightAsNumber()?s:this.getminHeightAsNumber());var r=this.element.getBoundingClientRect(),l={width:r.width.toString(),height:r.height.toString(),clientWidth:this.element.clientWidth.toString(),clientHeight:this.element.clientHeight.toString(),gridHeight:n?n.toString():n};if("auto"===this.gridSettings.height&&s&&this.element.querySelector(".e-gridheader")){if(n=s-(this.element.querySelector(".e-gridheader").offsetHeight+(this.element.querySelector(".e-grouping-bar")?this.element.querySelector(".e-grouping-bar").offsetHeight:0)+(this.element.querySelector("."+a)?this.element.querySelector("."+a).clientHeight:0)+(this.element.querySelector(".pivot-pager-container")?this.element.querySelector(".pivot-pager-container").offsetHeight:0))-1,e){var h=this.internalGrid&&this.internalGrid.options&&!isNaN(this.internalGrid.options.height)?Number(this.internalGrid.options.height):this.element.querySelector(".e-content ."+g).offsetHeight,d=this.element.querySelector(".e-content ."+g).offsetWidth,c=this.element.querySelector(".e-content ."+g).offsetWidth<=d;if(this.options.enableVirtualization){var p=this.element.querySelector(".e-scrollbar")?this.element.querySelector(".e-scrollbar").offsetHeight:0;n=c?n-p:n}if(n>=o&&(!c||n>=h)&&!(h<o)&&!!!(c&&n-o<18))return l.gridHeight="auto",JSON.stringify(l)}else if(n>t*this.gridSettings.rowHeight)return l.gridHeight="auto",JSON.stringify(l)}else n=this.gridSettings.height;return l.gridHeight=n<this.gridSettings.rowHeight?this.gridSettings.rowHeight.toString():o<n?"auto":n.toString(),JSON.stringify(l)},t.prototype.updateGridUI=function(e,t,i,n){if(t&&this.getOptions(e,t),this.options.showGroupingBar&&this.groupingBarModule)this.groupingBarModule.refreshUI();else{var s=e.querySelector("."+o).querySelector(".e-leftfreeze");s&&s.querySelector(".e-rhandler")&&(s.style.height=s.querySelector(".e-rhandler").style.height="auto",s.style.height=s.querySelector(".e-rhandler").style.height=e.querySelector("."+o).offsetHeight+"px")}if(e.querySelector("."+o+" ."+g)&&"0px"===e.querySelector("."+o+" ."+g).style.width&&(e.querySelector(".e-content ."+g).style.width=e.querySelector("."+o+" ."+g).style.width=""),e.querySelector("."+o+" ."+g+" th.e-firstcell.e-lastcell")&&e.querySelector("."+o+" ."+g+" th.e-firstcell.e-lastcell").offsetWidth<=0){var r=e.querySelector("."+o+" ."+g+" colgroup").children,a=e.querySelector(".e-content ."+g+" colgroup").children,l=sf.base.formatUnit(this.options.gridSettings.columnWidth);r.length>1&&"auto"===r[r.length-1].style.width&&(r[r.length-1].style.width=l),a.length>1&&"auto"===a[a.length-1].style.width&&(a[a.length-1].style.width=l)}t&&this.virtualScrollModule&&this.virtualScrollModule.updateScrollInfo(e,i,n)},t.prototype.getScrollBarWidth=function(){if(!sf.base.isNullOrUndefined(this.scrollWidth))return this.scrollWidth;var e,t=document.createElement("div");return t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth|0,document.body.removeChild(t),this.scrollWidth=e},t.prototype.updateView=function(e,t){e&&(this.displayOptions=JSON.parse(t),"Both"===this.displayOptions.view&&"Table"===this.displayOptions.primary?(this.element.querySelector(".e-pivotchart").style.display="none",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="",this.options.showGroupingBar&&this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.display="none",this.element.querySelector(".e-pivot-grouping-bar").style.display="")):"Both"===this.displayOptions.view&&"Chart"===this.displayOptions.primary&&(this.element.querySelector(".e-pivotchart").style.display="",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="none",this.options.showGroupingBar&&this.element.querySelector(".e-pivot-grouping-bar")&&(this.element.querySelector(".e-pivot-grouping-bar").style.display="none",this.element.querySelector(".e-chart-grouping-bar").style.display="")))},t.prototype.updateGridSettings=function(e,t,i){e&&null!==t&&(this.gridSettings=JSON.parse(t)),i&&this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.getClientWidth=function(e,t){return e&&null!==t?document.getElementById(t).clientWidth:null},t.prototype.getTableCellNode=function(e,t,i){if(e){var n=document.elementFromPoint(i,t);if(n){var s=Number(n.getAttribute("aria-colindex")),o=Number(n.getAttribute("index")),r={};if(s&&o)return r.index=o,r["aria-colindex"]=s,JSON.stringify(r)}}return null},t.prototype.updateColorPickerUI=function(t){if(t){for(var i=[].slice.call(t.querySelectorAll(".e-colorpicker-container.e-format-font-color-picker-container")),n=[].slice.call(t.querySelectorAll(".e-colorpicker-container.e-format-back-color-picker-container")),s=0,o=i;s<o.length;s++){var r=o[s];sf.base.addClass([r],["e-format-color-picker","e-format-font-color-picker"]),sf.base.addClass([r.querySelector(".e-colorpicker")],"e-format-font-color"),sf.base.addClass([r.querySelector(".e-selected-color")],e)}for(var a=0,l=n;a<l.length;a++){r=l[a];sf.base.addClass([r],"e-format-color-picker"),sf.base.addClass([r.querySelector(".e-colorpicker")],"e-format-back-color"),sf.base.addClass([r.querySelector(".e-selected-color")],e)}}},t.prototype.onWindowResize=function(){var e=this;this.isDestroyed||(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var t=e.element.getBoundingClientRect();e.dotNetRef.invokeMethodAsync("LayoutRefresh",t.width,t.height)}),500))},t.prototype.drillthroughIntialize=function(e){e&&this.editSettings.allowEditing&&(this.drillThroughModule=new D(this))},t.prototype.closeDialog=function(e,t){return e.querySelector("."+m)?(e.querySelector("."+m).click(),void t.preventDefault()):e.querySelector(".e-cancel-btn")?(e.querySelector(".e-cancel-btn").click(),void t.preventDefault()):void 0},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler,this),sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler,this),window.addEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler),sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler),window.removeEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.destroy=function(e){this.unWireEvents(),this.keyboardModule.destroy(),this.commonActionModule.destroy(),this.options.showGroupingBar&&(this.groupingBarModule.destroy(),this.pivotButtonModule.destroy()),this.options.showFieldList&&this.pivotFieldListModule&&!this.pivotFieldListModule.isDestroyed&&this.pivotFieldListModule.destroy(e),this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.destroy(),this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.destroy(),this.editSettings.allowEditing&&this.drillThroughModule&&this.drillThroughModule.destroy(),this.isDestroyed=e},t}();return{initialize:function(e,t,i,n){sf.base.enableBlazorMode(),new j(e,t,i,n)},initializeFieldList:function(e,t,i,n){sf.base.enableBlazorMode(),new x(e,t,i,n)},contentReady:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&(n.options=t,n.getOptions(n.element,t),i||n.contentReady())},getChartHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.getChartHeight(t)},onShowFieldList:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.onShowFieldList(i.element,document.getElementById(t))},removeFieldListIcon:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.removeFieldListIcon(t.element)},updateFieldListIcons:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.treeRendererModule.updateFieldListIcons(t,i)},setPivotButtonDraggable:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.pivotButtonModule&&(i.options=t,i.getOptions(i.element,t),i.pivotButtonModule.createPivotButtonDrop(),i.pivotButtonModule.setPivotButtonDrag())},isFullRowElement:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return n&&n.element?n.commonActionModule.isFullRowElement(t,i):JSON.stringify(!1)},updateActiveNode:function(e,t,i){var n=!1,s=window.sfBlazor.getCompInstance(e);return s&&s.element&&(n=s.commonActionModule.updateActiveNode(document.getElementById(t),i)),JSON.stringify(n)},updateSelectedNodes:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.updateSelectedNodes(window.sfBlazor.getElementByXpath(t),i)},updateFieldList:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.updateFieldList(document.getElementById(t))},renderToolbar:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.toolbarModule.renderToolbar()},focusToolBar:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.toolbarModule.focusToolBar()},getButtonPosition:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return n&&n.element?JSON.stringify(n.pivotButtonModule.getButtonPosition(window.sfBlazor.getElementByXpath(t),i)):null},selectInputRange:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.toolbarModule.selectInputRange(document.getElementById(t))},copyMdxQuery:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.toolbarModule.copyMdxQuery(document.getElementById(t))},validateInputs:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.commonActionModule.validateInputs(t)},selectedCell:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element)return s.selectedCell(t,i,n)},hyperlinkCellclick:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.hyperlinkCellclick(JSON.parse(t),JSON.parse(i))},updateEditOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.calculatedFieldModule.updateEditOptions(t)},accordionClick:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element)return s.calculatedFieldModule.accordionClick(t,i,n)},getAccordionValue:function(e){var t=window.sfBlazor.getCompInstance(e);if(t&&t.element)return t.calculatedFieldModule.getAccordionValue()},updateAccordionLabel:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.calculatedFieldModule.updateAccordionLabel(t)},getNodeLocation:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element)return n.calculatedFieldModule.getNodeLocation(document.getElementById(t),i)},getIconInfo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element)return n.calculatedFieldModule.getIconInfo(t,i)},emptyFieldName:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.calculatedFieldModule.emptyFieldName(t.element.id)},updateCalculatedFields:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.calculatedFieldModule.editCalculatedFieldInfo(t,i,n,s)},updateCalculatedFieldExpandIcons:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return n&&n.element?n.calculatedFieldModule.updateNodeExpandIcons(document.getElementById(t),i):JSON.stringify(!1)},createFormulaDroppable:function(e,t,i,n,s,o,r,a){var l=window.sfBlazor.getCompInstance(e);l&&l.element&&l.calculatedFieldModule.createFormulaDroppable(t,i,n,s,o,r,a)},createSheet:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.createSheet(t,i,n)},updateScrollInfo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.virtualScrollModule.updateScrollInfo(n.element,t,i)},getScrollInfo:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.getScrollInfo(t)},exportDocument:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.exportDocument(t,i)},calculateGridHeight:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);return s&&s.element?s.calculateGridHeight(t,i,n):null},onContextMenuOpen:function(e){var t=window.sfBlazor.getCompInstance(e);return t&&t.element?t.onContextMenuOpen():null},getSelectedCells:function(e){var t=window.sfBlazor.getCompInstance(e);return t&&t.element?t.getSelectedCells():null},updateGridUI:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.updateGridUI(s.element,t,i,n)},updateView:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.updateView(i.element,t)},updateGridSettings:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.updateGridSettings(n.element,t,i)},getClientWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);return i&&i.element?i.getClientWidth(i.element,t):null},getTableCellNode:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);return n&&n.element?n.getTableCellNode(n.element,t,i):null},updateColorPickerUI:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(i&&i.element)return i.updateColorPickerUI(document.getElementById(t))},drillthroughIntialize:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.drillthroughIntialize(t.element)},getElementInfo:function(e){var t=window.sfBlazor.getCompInstance(e);if(t&&t.element){var i=t.element.getBoundingClientRect(),n={width:i.width,height:i.height,clientWidth:t.element.clientWidth,clientHeight:t.element.clientHeight};return JSON.stringify(n)}return null},getAggregateIcoPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);return i&&i.element?i.commonActionModule.getAggregateIcoPosition(t):null},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.destroy(t)}}}()},"./modules/sf-progressbar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Progressbar=function(){"use strict";var e=function(){function e(e,t,i){window.sfBlazor=window.sfBlazor,this.resizeTo=0,this.element=t,this.dotNetRef=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this))},e.prototype.unWireEvents=function(){window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),this.element=null,this.dotNetRef=null},e.prototype.resize=function(){var e=this;(this.dotNetRef&&!this.cancelResize||this.lineardata&&this.lineardata.isActive||this.circularData&&this.circularData.isActive)&&(this.resizeTo&&clearTimeout(this.resizeTo),sf.base.isNullOrUndefined(this.dotNetRef)||(this.resizeTo=window.setTimeout((function(){e.dotNetRef.invokeMethodAsync("TriggerResize")}),500)))},e.prototype.getPathArc=function(e,t,i,n,s,o,r){var a=this.degreeToLocation(e,t,i,n),l=this.degreeToLocation(e,t,i,s),h="0",d=o?"0":"1";return h=o?(n>=s?n:n+360)-s<=180?"0":"1":(s>=n?s:s+360)-n<=180?"0":"1",r?"M "+e+" "+t+" L "+a.x+" "+a.y+" A "+i+" "+i+"  0  "+h+" "+d+" "+l.x+" "+l.y+" Z":"M"+a.x+" "+a.y+"A"+i+" "+i+" 0 "+h+" "+d+" "+l.x+" "+l.y},e.prototype.degreeToLocation=function(e,t,i,n){var s=(n-90)*(Math.PI/180);return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}},e.prototype.effect=function(e,t,i,n,s){return(s?i:-i)*Math.cos(e/n*(Math.PI/2))+(t+(s?-i:i))},e.prototype.activeAnimate=function(e,t,i,n){var s=1-Math.pow(1-e,3);return t+(n?-s*i:s*i)},e.prototype.getPathLine=function(e,t){var i=t.enableRtl?"Round"===t.cornerRadius?e+t.rectWidth-.45*t.thickness:e+t.rectWidth:"Round"===t.cornerRadius?e+.45*t.thickness:e,n=t.enableRtl?"Round"===t.cornerRadius&&t.progressWidth?i-t.progressWidth+.9*t.thickness:i-t.progressWidth:"Round"===t.cornerRadius&&t.progressWidth?i+t.progressWidth-.9*t.thickness:i+t.progressWidth;return"M"+i+" "+(t.rectX+t.rectHeight/2)+"L"+n+" "+(t.rectY+t.rectHeight/2)},e.prototype.circularAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathcircle"),n=0;i&&this.circularData&&(i.style.visibility="hidden",t.animate(i,{duration:this.circularData.duration,delay:this.circularData.delay,progress:function(t){if(e.cancelResize=!0,t.timeStamp>=t.delay){if(i.style.visibility="visible",e.circularData.isActive){n=e.activeAnimate(t.timeStamp/t.duration,e.circularData.startPos,e.circularData.endPos,e.circularData.enableRtl);var s=document.getElementById(e.element.id+"_CircularActiveProgress");s&&s.setAttribute("opacity",e.effect(t.timeStamp,.5,.5,t.duration,!0).toString())}else n=e.effect(t.timeStamp,e.circularData.startPos,e.circularData.endPos,t.duration,e.circularData.enableRtl);i.setAttribute("d",e.getPathArc(e.circularData.x,e.circularData.y,e.circularData.pathRadius,e.circularData.start,n%360,e.circularData.enableRtl,!0))}},end:function(){e.cancelResize=!1,i.setAttribute("d",e.getPathArc(e.circularData.x,e.circularData.y,e.circularData.pathRadius,e.circularData.start,e.circularData.progressEnd,e.circularData.enableRtl,!0)),e.circularData.isActive&&e.circularAnimation(),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e.prototype.circularBufferAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathBuffercircle"),n=0;i&&this.circularBufferData&&(i.style.visibility="hidden",t.animate(i,{duration:this.circularBufferData.duration,delay:this.circularBufferData.delay,progress:function(t){e.cancelResize=!0,t.timeStamp>=t.delay&&(i.style.visibility="visible",n=e.effect(t.timeStamp,e.circularBufferData.startPos,e.circularBufferData.endPos,t.duration,e.circularBufferData.enableRtl),i.setAttribute("d",e.getPathArc(e.circularBufferData.x,e.circularBufferData.y,e.circularBufferData.pathRadius,e.circularBufferData.start,n%360,e.circularBufferData.enableRtl,!0)))},end:function(){e.cancelResize=!1,i.setAttribute("d",e.getPathArc(e.circularBufferData.x,e.circularBufferData.y,e.circularBufferData.pathRadius,e.circularBufferData.start,e.circularBufferData.progressEnd,e.circularBufferData.enableRtl,!0)),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e.prototype.circularIndeterminateAnimation=function(e,t){var i=this;void 0===e&&(e=0),void 0===t&&(t=0);var n=document.getElementById(this.element.id+"_clippathcircle"),s=new sf.base.Animation({});n&&this.circularData&&(s.destroy(),s.animate(n,{duration:this.circularData.duration,delay:0,progress:function(){i.circularData&&i.circularData.enable&&i.circularData.isIndeterminate&&(n.style.visibility="visible",e+=i.circularData.enableRtl?-i.circularData.segmentValue:i.circularData.segmentValue,t+=i.circularData.enableRtl?-i.circularData.segmentValue:i.circularData.segmentValue,n.setAttribute("d",i.getPathArc(i.circularData.x,i.circularData.y,i.circularData.pathRadius,e%360,t%360,i.circularData.enableRtl,!i.circularData.enableProgressSegments)))},end:function(){i.circularData&&i.circularData.enable&&i.circularData.isIndeterminate&&i.circularIndeterminateAnimation(e,t)}}))},e.prototype.annotationAnimation=function(){var e,t,i=this,n=new sf.base.Animation({}),s=document.getElementById(this.element.id+"Annotation0").children[0];s&&s.children[0]&&"SPAN"===s.children[0].tagName&&(t=s.children[0]),t&&this.annotationData&&(e="Linear"===this.annotationData.type?document.getElementById(this.element.id+"_clippathrect"):document.getElementById(this.element.id+"_clippathcircle"),this.annotationData.isContent?t.innerHTML=this.annotationData.annotateValue+"%":e&&n.animate(e,{duration:this.annotationData.duration,delay:this.annotationData.delay,progress:function(e){i.cancelResize=!0;var n=i.effect(e.timeStamp,i.annotationData.startPos,i.annotationData.endPos,e.duration,!1),s=parseInt(((Math.round(n)-i.annotationData.start)/i.annotationData.totalAngle*100).toString(),10);t.innerHTML=s?s.toString()+"%":"0%"},end:function(){i.cancelResize=!1,t.innerHTML=i.annotationData.annotateValue+"%"}}))},e.prototype.labelAnimation=function(){var e,t=this;this.labelData&&(e="Linear"===this.labelData.type?document.getElementById(this.element.id+"_linearLabel"):document.getElementById(this.element.id+"_circularLabel"));var i=new sf.base.Animation({}),n=new sf.base.Animation({});e&&this.labelData&&!this.labelData.isStriped&&(e.style.visibility="hidden",i.animate(e,{duration:this.labelData.duration,delay:this.labelData.delay,progress:function(i){if(t.cancelResize=!0,"Linear"===t.labelData.type&&i.timeStamp>=i.delay&&""===t.labelData.labelText){e.style.visibility="visible";var n=t.effect(i.timeStamp,t.labelData.progressPos,Math.round(t.labelData.end-t.labelData.progressPos),i.duration,!1),s=parseInt((n/t.labelData.width*100).toString(),10);if(e.innerHTML=s.toString()+"%","Far"===t.labelData.labelPos||"Center"===t.labelData.labelPos){var o=t.effect(i.timeStamp,t.labelData.startPos,t.labelData.endPos-(t.labelData.enableRtl?0:t.labelData.startPos),i.duration,t.labelData.enableRtl);e.setAttribute("x",o.toString())}}else if("Circular"===t.labelData.type&&""===t.labelData.labelText){e.style.visibility="visible";n=t.effect(i.timeStamp,t.labelData.start,t.labelData.end-t.labelData.start,i.duration,!1),s=parseInt((n/t.labelData.totalAngle*100).toString(),10);e.innerHTML=s.toString()+"%"}},end:function(){t.cancelResize=!1,e&&""===t.labelData.labelText?(e.style.visibility="visible",e.innerHTML=t.labelData.text,e.setAttribute("x",t.labelData.x.toString())):n.animate(e,{progress:function(i){e.style.visibility="visible";var n=t.effect(i.timeStamp,0,1,i.duration,!1);e.setAttribute("opacity",n.toString())},end:function(){e.setAttribute("opacity","1")}})}}))},e.prototype.stripeAnimation=function(e){var t=this;void 0===e&&(e=0);var i=new sf.base.Animation({}),n=document.getElementById(this.element.id+"_LinearStriped");n&&this.stripeData&&i.animate(n,{duration:this.stripeData.duration,delay:this.stripeData.delay,progress:function(){t.stripeData.enable&&(e+=t.stripeData.enableRtl?-t.stripeData.durationValue:t.stripeData.durationValue,n.setAttribute("gradientTransform","translate("+e+") rotate(-45)"))},end:function(){t.stripeData.enable&&t.stripeAnimation(e)}})},e.prototype.linearIndeterminateAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathrect");i&&this.lineardata&&(i.style.visibility="hidden",t.animate(i,{duration:this.lineardata.duration,delay:0,progress:function(t){i.style.visibility="visible",e.lineardata.enableRtl&&e.lineardata.enableRtl&&e.lineardata.enable&&e.lineardata.isIndeterminate?e.animationProgress(i,t.timeStamp,e.lineardata.x||e.lineardata.rectX+e.lineardata.progressWidth,e.lineardata.end,t.duration,e.lineardata.enableRtl):e.lineardata.enable&&e.lineardata.isIndeterminate&&e.animationProgress(i,t.timeStamp,e.lineardata.start,e.lineardata.end,t.duration,e.lineardata.enableRtl)},end:function(){e.lineardata&&e.lineardata.enable&&e.lineardata.isIndeterminate&&(e.lineardata.enableRtl&&!e.lineardata.enableProgressSegments&&"Round4px"!==e.lineardata.cornerRadius?i.setAttribute("x",e.lineardata.x.toString()):e.lineardata.enableProgressSegments||i.setAttribute("x",e.lineardata.start.toString()),e.linearIndeterminateAnimation(),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete"))}}))},e.prototype.animationProgress=function(e,t,i,n,s,o){var r=this.effect(t,i,n,s,o);this.lineardata.enableProgressSegments?e.setAttribute("d",this.getPathLine(r,this.lineardata)):e.setAttribute("x",r.toString())},e.prototype.linearAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathrect"),n=0;i&&this.lineardata&&(i.style.visibility="hidden",t.animate(i,{duration:this.lineardata.duration,delay:this.lineardata.delay,progress:function(t){if(e.cancelResize=!0,e.lineardata.enableRtl&&"Round4px"!==e.lineardata.cornerRadius&&t.timeStamp>=t.delay)if(i.style.visibility="visible",e.lineardata.isActive){var s=document.getElementById(e.element.id+"_LinearActiveProgress");n=e.activeAnimate(t.timeStamp/t.duration,e.lineardata.x,e.lineardata.width,!0),s&&(s.setAttribute("opacity",e.effect(t.timeStamp,.5,.5,t.duration,!0).toString()),i.setAttribute("x",n.toString()))}else i.setAttribute("x",e.effect(t.timeStamp,e.lineardata.start,e.lineardata.end,t.duration,!0).toString());else if(t.timeStamp>=t.delay)if(i.style.visibility="visible",e.lineardata.isActive){s=document.getElementById(e.element.id+"_LinearActiveProgress");n=e.activeAnimate(t.timeStamp/t.duration,0,e.lineardata.width,e.lineardata.enableRtl),s&&(s.setAttribute("opacity",e.effect(t.timeStamp,.5,.5,t.duration,!0).toString()),i.setAttribute("width",n.toString()))}else i.setAttribute("width",e.effect(t.timeStamp,e.lineardata.start,e.lineardata.end,t.duration,!1).toString())},end:function(){e.cancelResize=!1,e.lineardata&&e.lineardata.enable&&e.lineardata.enableRtl&&"Round4px"!==e.lineardata.cornerRadius?e.lineardata.isActive?(i.setAttribute("x",e.lineardata.x.toString()),e.linearAnimation()):i.setAttribute("x",e.lineardata.rtlX.toString()):e.lineardata&&e.lineardata.enable&&(i.setAttribute("width",e.lineardata.width.toString()),e.lineardata.isActive&&e.linearAnimation()),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e.prototype.linearBufferAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathBufferrect");i&&this.linearBufferdata&&(i.style.visibility="hidden",t.animate(i,{duration:this.linearBufferdata.duration,delay:this.linearBufferdata.delay,progress:function(t){e.cancelResize=!0,e.linearBufferdata.enableRtl&&"Round4px"!==e.linearBufferdata.cornerRadius&&t.timeStamp>=t.delay?t.timeStamp>=t.delay&&(i.style.visibility="visible",i.setAttribute("x",e.effect(t.timeStamp,e.linearBufferdata.start,e.linearBufferdata.end,t.duration,!0).toString())):t.timeStamp>=t.delay&&(i.style.visibility="visible",i.setAttribute("width",e.effect(t.timeStamp,e.linearBufferdata.start,e.linearBufferdata.end,t.duration,!1).toString()))},end:function(){e.cancelResize=!1,i.style.visibility="",e.lineardata&&e.linearBufferdata.enable&&e.linearBufferdata.enableRtl&&"Round4px"!==e.linearBufferdata.cornerRadius?i.setAttribute("x",e.linearBufferdata.rtlX.toString()):e.linearBufferdata&&e.linearBufferdata.enable&&i.setAttribute("width",e.linearBufferdata.width.toString()),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e}();return{initialize:function(t,i,n,s,o){return new e(t,i,o).wireEvents(),this.getElementSize(i,n,s)},setSecondaryElementStyle:function(e){if(e){var t=document.getElementById(e.id+"SVG").getBoundingClientRect(),i=document.getElementById(e.id+"Secondary_Element"),n=e.getBoundingClientRect();i&&t&&(i.style.visibility="visible",i.style.left=Math.max(t.left-n.left,0)+"px",i.style.top=Math.max(t.top-n.top,0)+"px")}},getElementSize:function(e,t,i){var n,s;if(e){var o=e.style.display;e.style.display="block",e.style.height=t,e.style.width=i;var r=e.getBoundingClientRect();n=r.width,s=r.height,e.style.width="",e.style.height="",e.style.display=o}return{width:n,height:s}},doLinearBufferAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.linearBufferdata=t,i.linearBufferAnimation())},doLinearAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.lineardata=t,i.linearAnimation())},doLinearIndeterminate:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.lineardata=t,i.linearIndeterminateAnimation())},doStripedAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.stripeData=t,i.stripeAnimation())},doCircularAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.circularData=t,i.circularAnimation())},doCircularBufferAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.circularBufferData=t,i.circularBufferAnimation())},doCircularIndeterminate:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.circularData=t,i.circularIndeterminateAnimation(t.start,t.end))},doAnnotationAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.annotationData=t,i.annotationAnimation())},doLabelAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.labelData=t,i.labelAnimation())},update:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)){if("Linear"===i){var r=t;r.isStriped?o.stripeData=r:o.lineardata=r}else o.circularData=t;n&&(o.labelData=t),s&&(o.annotationData=t)}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-range-navigator.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.RangeNavigator=function(){"use strict";var e=function(){function e(e,t,i,n,s){window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.reSizeTo=0,this.isTooltipHide=!0,this.isDrag=!1,this.tooltip=[],this.id=t,this.element=i,this.dotNetRef=n,this.dataId=e,this.labels=s,window.sfBlazor.setCompInstance(this)}return e.prototype.destroy=function(){this.unWireEvents(this.id,this.dotNetRef)},e.prototype.unWireEvents=function(e,i){this.dotNetRef=i,t.dotnetrefCollection=t.dotnetrefCollection.filter((function(t){return t.id!==e}));var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.rangeOnMouseDown),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchEndEvent,this.mouseEnd),sf.base.EventHandler.remove(this.element,"click",this.rangeOnMouseClick),sf.base.EventHandler.remove(this.element,n,this.mouseLeave);var s=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,s,t.resizeBound)},e.prototype.wireEvents=function(e,i){this.dotNetRef=i,t.dotnetrefCollection.push({id:e,dotnetref:i});var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.rangeOnMouseDown,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.mouseEnd,this),sf.base.EventHandler.add(this.element,"click",this.rangeOnMouseClick,this),sf.base.EventHandler.add(this.element,n,this.mouseLeave,this),t.resizeBound=t.rangeResize.bind(this,t.dotnetrefCollection);var s=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,s,t.resizeBound)},e.prototype.rangeOnMouseDown=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);this.setMouseX(this.getPageX(e)),e.target.id.indexOf("_Thumb")>-1&&(t.isDrag=!0),this.dotNetRef.invokeMethodAsync("OnRangeMouseDown",this.getEventArgs(e))},e.prototype.mouseMove=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);document.getElementById(this.id.replace("_stockChart_rangeSelector","")+"_svg")&&(this.setMouseX(this.getPageX(e)),t.isDrag&&this.sliderChangeValue&&(t.changeSlider(),this.id.indexOf("stockchart")>-1&&this.dotNetRef.invokeMethodAsync("OnRangeMouseMove",this.getEventArgs(e))))},e.prototype.changeSlider=function(){var e,t;if(this.sliderChangeValue.isDrag&&this.mouseX>=this.sliderChangeValue.boundsX){switch(this.sliderChangeValue.currentSlider){case"Left":this.sliderChangeValue.startValue=this.getRangeValue(Math.abs(this.mouseX-this.sliderChangeValue.boundsX));break;case"Right":this.sliderChangeValue.endValue=this.getRangeValue(Math.abs(this.mouseX-this.sliderChangeValue.boundsX)),this.sliderChangeValue.endValue="DateTimeCategory"===this.sliderChangeValue.valueType&&this.sliderChangeValue.endValue>this.labels.length-1?this.labels.length-1:this.sliderChangeValue.endValue;break;case"Middle":e=Math.max(this.getRangeValue(Math.abs(this.sliderChangeValue.startX-(this.sliderChangeValue.previousMoveX-this.mouseX)-this.sliderChangeValue.boundsX)),this.sliderChangeValue.rangeMin),t=Math.min(this.getRangeValue(Math.abs(this.sliderChangeValue.endX-(this.sliderChangeValue.previousMoveX-this.mouseX)-this.sliderChangeValue.boundsX)),this.sliderChangeValue.rangeMax),Math.floor(Math.abs(this.getXLocation(t)-this.getXLocation(e)))===Math.floor(this.sliderChangeValue.sliderWidth)&&(this.sliderChangeValue.startValue=e,this.sliderChangeValue.endValue=t)}this.setSlider(this.sliderChangeValue.startValue,this.sliderChangeValue.endValue),this.sliderChangeValue.previousMoveX=this.mouseX}},e.prototype.setSlider=function(e,t){var i=window.sfBlazor.getCompInstance(this.dataId),n=document.getElementById(i.id+"_SelectedArea"),s=document.getElementById(i.id+"_leftUnSelectedArea"),o=document.getElementById(i.id+"_rightUnSelectedArea"),r=document.getElementById(i.id+"_LeftSlider"),a=document.getElementById(i.id+"_RightSlider");t>=e||(e=[t,t=e][0]);var l=this.sliderChangeValue.boundsX;e=t>=e?e:[t,t=e][0],e=Math.max(e,this.sliderChangeValue.rangeMin),t=Math.min(t,this.sliderChangeValue.rangeMax),this.sliderChangeValue.startX=l+this.getXLocation(e),this.sliderChangeValue.endX=l+this.getXLocation(t);var h=this.sliderChangeValue.enableRtl?this.sliderChangeValue.endX:this.sliderChangeValue.startX,d=this.sliderChangeValue.enableRtl?this.sliderChangeValue.startX:this.sliderChangeValue.endX;this.sliderChangeValue.sliderWidth=Math.abs(this.sliderChangeValue.endX-this.sliderChangeValue.startX),n.setAttribute("x",h+""),n.setAttribute("width",this.sliderChangeValue.sliderWidth+""),s.setAttribute("width",h-l+""),o.setAttribute("x",d+""),o.setAttribute("width",this.sliderChangeValue.boundsWidth-(d-l)+""),r.setAttribute("transform","translate("+(this.sliderChangeValue.startX-this.sliderChangeValue.thumpPadding)+", 0)"),a.setAttribute("transform","translate("+(this.sliderChangeValue.endX-this.sliderChangeValue.thumpPadding)+", 0)");var c=this.sliderChangeValue.enableRtl?this.sliderChangeValue.endX:this.sliderChangeValue.startX,p=this.sliderChangeValue.enableRtl?this.sliderChangeValue.startX:this.sliderChangeValue.endX,u={x:this.sliderChangeValue.isLeightWeight?0+l:l,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.isLeightWeight?c-l:c,height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight},f={x:this.sliderChangeValue.isLeightWeight?0+p:p,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.boundsWidth-(d-l),height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight},g={x:this.sliderChangeValue.isLeightWeight?c+0:0,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.isLeightWeight?Math.abs(this.sliderChangeValue.endX-this.sliderChangeValue.startX):p,height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight};i.tooltip.length>0&&this.updateTooltip(u,f,g,this.sliderChangeValue.startX,this.sliderChangeValue.endX)},e.prototype.updateTooltip=function(e,i,n,s,o){var r=window.sfBlazor.getCompInstance(this.dataId),a=this.getTooltipContent(this.sliderChangeValue.endValue),l=this.sliderChangeValue.enableRtl?e:i,h=r.tooltip[0].textStyle;t.measureText(a,h.size,h.fontWeight,h.fontStyle,h.fontFamily).Width>l.width&&(l=n),r.tooltip[0].location.x=o,r.tooltip[0].areaBounds=l,r.tooltip[0].content=[a],r.tooltip[0].dataBind(),a=this.getTooltipContent(this.sliderChangeValue.startValue),l=this.sliderChangeValue.enableRtl?i:e,h=r.tooltip[1].textStyle,t.measureText(a,h.size,h.fontWeight,h.fontStyle,h.fontFamily).Width>l.width&&((l=n).x=r.sliderChangeValue.isLeightWeight?0:l.x),r.tooltip[1].location.x=s,r.tooltip[1].content=[a],r.tooltip[1].areaBounds=l,r.tooltip[1].dataBind()},e.prototype.getTooltipContent=function(e){var t=this.sliderChangeValue.format,i=null!==t.match("{value}");e="DateTimeCategory"===this.sliderChangeValue.valueType?Math.floor(parseInt(this.labels[Math.floor(e)])):e;var n=new Date(e);return n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3),"DateTime"===this.sliderChangeValue.valueType||"DateTimeCategory"===this.sliderChangeValue.valueType?(new sf.base.Internationalization).getDateFormat({format:t||"MM/dd/yyyy"})(n):(new sf.base.Internationalization).getNumberFormat({format:i?"":t,useGrouping:this.sliderChangeValue.useGrouping})("Logarithmic"===this.sliderChangeValue.valueType?Math.pow(this.sliderChangeValue.logBase,e):e)},e.prototype.getRangeValue=function(e){return(this.sliderChangeValue.enableRtl?1-e/this.sliderChangeValue.boundsWidth:e/this.sliderChangeValue.boundsWidth)*this.sliderChangeValue.rangeDelta+this.sliderChangeValue.rangeMin},e.prototype.getXLocation=function(e){var t=(e-this.sliderChangeValue.rangeMin)/this.sliderChangeValue.rangeDelta;return(this.sliderChangeValue.enableRtl?1-t:t)*this.sliderChangeValue.boundsWidth},e.prototype.mouseEnd=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);t.isDrag&&this.sliderChangeValue&&(this.dotNetRef.invokeMethodAsync("SetStartEndValue",this.sliderChangeValue.startValue,this.sliderChangeValue.endValue,!0,this.sliderChangeValue.enableTooltip),t.isDrag=!1),e.type.indexOf("touch")>-1&&this.isTooltipHide&&this.fadeOutTooltip(),this.dotNetRef.invokeMethodAsync("OnRangeMouseEnd",this.getEventArgs(e))},e.prototype.rangeOnMouseClick=function(e){this.dotNetRef.invokeMethodAsync("OnRangeMouseClick",this.getEventArgs(e))},e.prototype.mouseLeave=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);this.setMouseX(this.getPageX(e)),t.isDrag=!1,this.dotNetRef.invokeMethodAsync("OnRangeMouseLeave",this.getEventArgs(e)),this.isTooltipHide&&this.fadeOutTooltip()},e.prototype.fadeOutTooltip=function(e){if(void 0===e&&(e=!1),this.sliderChangeValue&&this.sliderChangeValue.isTooltipHide||e){e||window.clearInterval(this.toolTipInterval);var t=window.sfBlazor.getCompInstance(this.dataId);(t.tooltip[1]||e)&&(this.toolTipInterval=window.setTimeout((function(){t.tooltip[1]&&(t.tooltip[0].fadeOut(),t.tooltip[1].fadeOut())}),1e3))}},e.prototype.getPageX=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0].clientX:e.clientX},e.prototype.setMouseX=function(e){var t=document.getElementById(this.id.replace("_stockChart_rangeSelector","")+"_svg");if(t){var i=t.getBoundingClientRect(),n=document.getElementById(this.id).getBoundingClientRect();this.mouseX=e-n.left-Math.max(i.left-n.left,0)}},e.prototype.getEventArgs=function(e){return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0}}},e}(),t={getParentElementBoundsById:function(t,i,n,s){var o=document.getElementById(i);if(o){var r=new e(t,i,o,n,s);r.unWireEvents(i,n),r.wireEvents(i,n),o.style.width="100%",o.style.height="100%";var a=o.getBoundingClientRect();return{width:a.width||o.clientWidth||o.offsetWidth,height:a.height||o.clientHeight||o.offsetHeight,left:a.left,top:a.top,right:a.right,bottom:a.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(t,i,n,s,o,r,a){if(s=document.getElementById(i)){var l=new e(t,i,s,n,o);return l.unWireEvents(i,n),l.wireEvents(i,n),this.getElementSize(s,r,a)}return{width:0,height:0}},getElementSize:function(e,t,i){return e?(e.style.height=t,e.style.width=i,{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight}):{width:0,height:0}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},charCollection:["0","1","2","3","4","5","6","7","8","9","!",'"',"#","$","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"," "],measureText:function(e,t,i,n,s){var o=document.getElementById("chartmeasuretext");return null===o&&(o=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(o))," "===e&&(e="&nbsp;"),o.innerHTML=e,o.style.position="fixed",o.style.fontSize=t,o.style.fontWeight=i,o.style.fontStyle=n,o.style.fontFamily=s,o.style.visibility="hidden",o.style.top="-100",o.style.left="0",o.style.whiteSpace="nowrap",o.style.lineHeight="normal",{Width:o.clientWidth,Height:o.clientHeight}},getCharSizeByFontKeys:function(e){for(var t={},i=this.charCollection,n=e.length,s=0;s<n;s++)for(var o=e[s].split("_"),r=o[0],a=o[1],l=o[2],h="_"+r+"_"+a+"_"+l,d=0;d<i.length;d++)t[i[d]+h]=this.measureText(i[d],"100px",r,a,l);return JSON.stringify(t)},getCharSizeByCharKey:function(e){var t=e.split("_");return this.measureText(t[0],"100px",t[2],t[3],t[4])},dotnetref:{},setValueOnSliderSelect:function(e,t,i){t=document.getElementById(t.id);var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.sliderChangeValue=i,n.isTooltipHide=i.isTooltipHide,n.isDrag=!0)},getElementRect:function(e){var t,i=document.getElementById(e);return i&&(t=i.getBoundingClientRect(),sf.base.remove(i)),{Left:t.left,Right:t.right,Top:t.top,Bottom:t.bottom,Width:t.width,Height:t.height}},dotnetrefCollection:[],renderTooltip:function(e,t,i,n,s,o){var r,a,l,h=window.sfBlazor.getCompInstance(o),d=[i,n],c=[e,t];s=document.getElementById(s.id);for(var p=1;p>=0;p--)a=d[p],!((r=document.getElementById(a.replace("_stockChart_rangeSelector","")+"_svg"))&&parseInt(r.getAttribute("opacity"),10)>0),l=JSON.parse(c[p]),h.tooltip[p]=new sf.svgbase.Tooltip(l),h.tooltip[p].appendTo("#"+a)},performSliderAnimation:function(e,t,i,n,s,o,r,a,l,h,d){var c=this;e=document.getElementById(e.id);var p=window.sfBlazor.getCompInstance(d);p.sliderChangeValue=h,new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:0===n?500:n,progress:function(e){var n=c.linear(e.timeStamp,0,t-s,e.duration)+s,r=c.linear(e.timeStamp,0,i-o,e.duration)+o;p.setSlider(n,r)},end:function(){p.setSlider(t,i),a?l.invokeMethodAsync("PerformSnapping",t,i,!0,r):p.dotNetRef.invokeMethodAsync("SetStartEndValue",t,i,!0,r)}})},linear:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},setAttribute:function(e,t,i){var n=document.getElementById(e);n&&n.setAttribute(t,i)},getAndSetTextContent:function(e,t,i){var n=document.getElementById(e);if(n){if(t)return n.textContent;n.textContent=i}return null},resizeBound:{},resize:{},rangeResize:function(e,t){var i=this;return window.sfBlazor.getCompInstance(this.dataId).isDrag=!1,this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var n,s=e.length,o=0;o<s;o++)n=e[o].dotnetref,e[o].id.indexOf("_stockChart_")<0&&n.invokeMethodAsync("OnRangeResize",t);clearTimeout(i.resize)}),500),!1}};return t}()},"./modules/sf-rating.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Rating=function(){"use strict";var e=function(){function e(e){window.sfBlazor=window.sfBlazor,this.isResetAdded=!1,this.isTouchSelected=!1,this.updateContext(e),window.sfBlazor.setCompInstance(this),this.listElement=this.element.querySelector(".e-rating-item-list"),this.getElements(),this.bindEvent(),this.updateReset()}return e.prototype.updateContext=function(e){sf.base.extend(this,this,e)},e.prototype.getElements=function(){this.containerElements=this.element.querySelectorAll(".e-rating-item-container"),this.resetElement=this.allowReset?this.element.querySelector(".e-reset"):null,this.ratingLabel=this.showLabel?this.element.querySelector(".e-rating-label"):null},e.prototype.updateReset=function(e){void 0===e&&(e=!1),(e||this.isResetAdded!==this.allowReset)&&(this.resetElement=this.allowReset?this.element.querySelector(".e-reset"):null,!e&&this.allowReset?(sf.base.EventHandler.add(this.resetElement,"click",this.resetClickHandler,this),sf.base.EventHandler.add(this.resetElement,"keydown",this.resetKeyActionHandler.bind(this),this)):this.isResetAdded&&(sf.base.EventHandler.remove(this.resetElement,"click",this.resetClickHandler.bind(this)),sf.base.EventHandler.remove(this.resetElement,"keydown",this.resetKeyActionHandler.bind(this))),this.isResetAdded=this.allowReset)},e.prototype.bindItemEvent=function(e,t){var i=this;sf.base.EventHandler.add(e,"mousemove",(function(e){return i.mouseMoveHandler(t+1,e)}),this),sf.base.EventHandler.add(e,"mouseleave",this.mouseLeaveHandler.bind(this),this),sf.base.EventHandler.add(e,"click",this.clickHandler.bind(this),this)},e.prototype.bindEvent=function(){sf.base.EventHandler.add(this.listElement,"keydown",this.keyActionHandler.bind(this),this),sf.base.EventHandler.add(this.listElement,"touchmove",this.touchMoveHandler.bind(this),this),sf.base.EventHandler.add(this.listElement,"touchend",this.touchEndHandler.bind(this),this),sf.base.EventHandler.add(this.listElement,"touchstart",this.touchStartHandler.bind(this),this);for(var e=0;e<this.containerElements.length;e++)this.bindItemEvent(this.containerElements[e],e)},e.prototype.unBindItemEvent=function(e,t){var i=this;sf.base.EventHandler.remove(e,"mousemove",(function(e){return i.mouseMoveHandler(t+1,e)})),sf.base.EventHandler.remove(e,"mouseleave",this.mouseLeaveHandler.bind(this)),sf.base.EventHandler.remove(e,"click",this.clickHandler.bind(this))},e.prototype.unBindEvent=function(){sf.base.EventHandler.remove(this.listElement,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.listElement,"touchmove",this.touchMoveHandler.bind(this)),sf.base.EventHandler.remove(this.listElement,"touchend",this.touchEndHandler.bind(this)),sf.base.EventHandler.remove(this.listElement,"touchstart",this.touchStartHandler.bind(this));for(var e=0;e<this.containerElements.length;e++)this.unBindItemEvent(this.containerElements[e],e)},e.prototype.getRatingValue=function(e,t){return this.enableSingleSelection&&0==this.precision?e==t+1?1:0:e>=t+1?1:e<t?0:e-t},e.prototype.UpdateItemValue=function(){for(var e=0;e<this.itemsCount;e++){this.containerElements[e].classList.remove("e-rating-selected","e-rating-intermediate","e-selected-value");var t=this.getRatingValue(this.currentValue,e);1==t?this.containerElements[e].classList.add("e-rating-selected"):t>0?this.containerElements[e].classList.add("e-rating-intermediate"):0===this.precision&&e<this.value&&!this.enableSingleSelection&&this.containerElements[e].classList.add("e-selected-value"),this.containerElements[e].style.setProperty("--rating-value",100*t+"%"),this.containerElements[e].classList[0===this.value&&0===e||this.value===e+1||t>0&&t<1?"add":"remove"]("e-rating-focus")}this.allowReset&&this.resetElement.classList[this.value>this.min?"remove":"add"]("e-disabled")},e.prototype.updateCurrentValue=function(e){this.currentValue=e,this.UpdateItemValue(),this.updateLabel()},e.prototype.updateLabel=function(){this.showLabel&&!this.labelTemplate&&(this.ratingLabel.textContent=this.currentValue+" / "+this.itemsCount)},e.prototype.mouseMoveHandler=function(e,t){if(!this.preventAction){this.isTouchSelected&&(this.element.classList.remove("e-rating-touch"),this.isTouchSelected=!1);var i=e;0!=this.precision&&(i=t.offsetX/this.containerElements[e-1].clientWidth,i=this.enableRtl?1-i:i,2==this.precision?i=i<=.25?.25:i<=.5?.5:i<.75?.75:1:1==this.precision?i=i<=.5?.5:1:3==this.precision&&(i=0==(i=Math.ceil(10*i)/10)?.1:i),i=i+e-1),i=this.validateValue(i);var n=t.target.classList.contains("e-rating-item-container")?t.target:t.target.closest(".e-rating-item-container");(this.currentValue!=i||this.value==i&&this.showTooltip&&!this.element.querySelector(".e-rating-tooltip").classList.contains("e-show-tooltip"))&&(this.updateCurrentValue(i),this.showTooltip&&n&&!this.tooltipTemplate&&this.openTooltip(n),(this.callMouseMoveHandler||this.tooltipTemplate||this.labelTemplate)&&this.dotNetRef.invokeMethodAsync("MouseMoveHandler",this.currentValue))}},e.prototype.openTooltip=function(e){var t=this.element.querySelector(".e-rating-tooltip");t.querySelector(".e-tip-content").innerHTML=this.currentValue.toString(),e.appendChild(t),t.classList.add("e-show-tooltip")},e.prototype.closeTooltip=function(){this.element.querySelector(".e-rating-tooltip").classList.remove("e-show-tooltip")},e.prototype.validateValue=function(e){return e=0==this.precision?Math.round(e):1==this.precision?Math.round(2*e)/2:2==this.precision?Math.round(4*e)/4:Math.round(10*e)/10},e.prototype.touchMoveHandler=function(e){if(!this.preventAction){this.isTouchSelected||(this.element.classList.add("e-rating-touch"),this.isTouchSelected=!0),this.element.classList.add("e-touch-select");var t=this.listElement.getBoundingClientRect(),i=(e.touches[0].clientX-t.x)/t.width*this.itemsCount;i=(i=this.enableRtl?this.itemsCount-i:i)<this.min?this.min:i>this.itemsCount?this.itemsCount:i;var n=0===(i=this.validateValue(i))?null:this.containerElements[Math.ceil(i)-1];(this.currentValue!=i||this.value==i&&this.showTooltip&&!this.element.querySelector(".e-rating-tooltip").classList.contains("e-show-tooltip"))&&(this.value=i,this.updateCurrentValue(i),this.showTooltip&&!this.tooltipTemplate&&(n?this.openTooltip(n):this.closeTooltip()),this.dotNetRef.invokeMethodAsync("TouchEventHandler",this.currentValue,!0))}},e.prototype.clickHandler=function(){this.preventAction||(this.value=this.min>0&&this.currentValue<this.min?this.min:this.currentValue,this.updateCurrentValue(this.value),this.dotNetRef.invokeMethodAsync("SetValue",this.value))},e.prototype.mouseLeaveHandler=function(){this.preventAction||(this.showTooltip&&this.closeTooltip(),this.updateCurrentValue(this.value),this.dotNetRef.invokeMethodAsync("MouseOutHandler",this.currentValue))},e.prototype.touchStartHandler=function(){for(var e=document.querySelectorAll(".e-rating-item-container"),t=0;t<e.length;t++){var i=e[t].querySelector(".e-rating-tooltip");i&&i.classList.contains("e-show-tooltip")&&i.classList.remove("e-show-tooltip")}},e.prototype.touchEndHandler=function(){this.element.classList.remove("e-touch-select"),this.showTooltip&&(this.closeTooltip(),this.dotNetRef.invokeMethodAsync("TouchEventHandler",this.currentValue,!1))},e.prototype.resetClickHandler=function(){this.preventAction||this.value>this.min&&(this.value=this.min,this.updateCurrentValue(this.value),this.dotNetRef.invokeMethodAsync("SetValue",this.min))},e.prototype.keyActionHandler=function(e){switch(e.key){case"ArrowUp":this.handleNavigation(!0);break;case"ArrowDown":this.handleNavigation(!1);break;case"ArrowLeft":this.handleNavigation(this.enableRtl);break;case"ArrowRight":this.handleNavigation(!this.enableRtl)}},e.prototype.resetKeyActionHandler=function(e){switch(e.key){case" ":this.resetClickHandler()}},e.prototype.handleNavigation=function(e){if((!e&&this.value>this.min||e&&this.value<this.itemsCount)&&!this.preventAction){var t=0==this.precision?1:1==this.precision?.5:2==this.precision?.25:Math.round(1)/10;t=e?this.value+t:this.value-t,this.value=this.validateValue(t),this.updateCurrentValue(this.value),this.dotNetRef.invokeMethodAsync("SetValue",this.value)}},e.prototype.destroy=function(){this.unBindEvent(),this.updateReset(!0)},e}();return{initialize:function(t){t.dataId&&new e(t)},updateRatingProps:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);t.updateContext(e),t.getElements(),t.updateReset()}},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()}}}()},"./modules/sf-richtexteditor.js":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.RichTextEditor=function(){"use strict";var e="initial-end",t="destroy",i="keyUp",s="keyDown",o="selection-save",r="selection-restore",a="mouseDown",l="paste-content",h="checkUndoStack",d=function(){function e(e){this.parent=e,this.renderCount()}return e.prototype.renderCount=function(){this.parent.showCharCount&&(this.addEventListener(),this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},e.prototype.appendCount=function(){this.countElement=sf.base.createElement("span",{className:"e-rte-character-count",styles:"display: block"}),this.parent.element.appendChild(this.countElement),this.updateCount()},e.prototype.updateCount=function(){var e="Markdown"===this.parent.editorMode?this.parent.getEditPanel().value:this.parent.getEditPanel().textContent;"Markdown"!==this.parent.editorMode&&-1!==e.indexOf("​")?this.htmlLength=e.replace(/\u200B/g,"").length:this.htmlLength=e.length;var t=-1===this.parent.maxLength?this.htmlLength:this.htmlLength+" / "+this.parent.maxLength;this.countElement.innerHTML=t},e.prototype.charCountBackground=function(e){this.countElement=this.parent.element.querySelector(".e-rte-character-count");var t=e/this.parent.maxLength*100;t<85?(this.countElement.classList.remove("e-warning"),this.countElement.classList.remove("e-error")):t>85&&t<=90?(this.countElement.classList.remove("e-error"),this.countElement.classList.add("e-warning")):t>90&&(this.countElement.classList.remove("e-warning"),this.countElement.classList.add("e-error"))},e.prototype.refresh=function(){!sf.base.isNullOrUndefined(this.parent.element)&&this.parent.showCharCount&&(this.updateCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},e.prototype.destroy=function(){sf.base.detach(this.countElement),this.countElement=null,this.removeEventListener()},e.prototype.toggle=function(e){this.parent.showCharCount&&(this.countElement.style.display="viewSource"===e.member?"none":"block")},e.prototype.addEventListener=function(){this.parent.observer.on(i,this.refresh,this),this.parent.observer.on("count",this.refresh,this),this.parent.observer.on("refresh-begin",this.refresh,this),this.parent.observer.on(a,this.refresh,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("sourceCode",this.toggle,this),this.parent.observer.on("updateSource",this.toggle,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(i,this.refresh),this.parent.observer.off("refresh-begin",this.refresh),this.parent.observer.off("count",this.refresh),this.parent.observer.off(a,this.refresh),this.parent.observer.off(t,this.destroy),this.parent.observer.off("sourceCode",this.toggle),this.parent.observer.off("updateSource",this.toggle)},e}(),c=function(){function e(e){this.parent=e,this.renderResizable()}return e.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this)},e.prototype.renderResizable=function(){if(this.parent.enableResize){var e="e-icons e-resize-handle ";e+=this.parent.enableRtl?"e-south-west":"e-south-east",this.resizer=sf.base.createElement("div",{id:this.parent.id+"-resizable",className:e}),this.parent.element.classList.add("e-rte-resize"),this.parent.element.appendChild(this.resizer),this.parent.setContentHeight(),this.touchStartEvent="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart",sf.base.EventHandler.add(this.resizer,"mousedown",this.resizeStart,this),sf.base.EventHandler.add(this.resizer,this.touchStartEvent,this.resizeStart,this)}this.addEventListener()},e.prototype.resizeStart=function(e){var t=this;e.cancelable&&e.preventDefault(),this.wireResizeEvents(),this.parent.observer.notify("resizeInitialized",{});this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"editor"}).then((function(e){e.cancel&&t.unwireResizeEvents()}))},e.prototype.performResize=function(e){var t=this.parent.element.getBoundingClientRect();if(this.isMouseEvent(e)){this.parent.element.style.height=e.clientY-t.top+"px",this.parent.element.style.width=(this.parent.enableRtl?t.right-e.clientX:e.clientX-t.left)+"px";var i=this.parent.getToolbarElement();if(null!==i&&i.classList.contains("e-rte-tb-float")&&this.parent.toolbarSettings.enableFloating&&this.parent.getToolbar()&&!this.parent.inlineMode.enable){var n=this.parent.contentPanel.getBoundingClientRect().width;i.style.width=n+"px"}}else{var s="msie"!==sf.base.Browser.info.name?e.touches[0]:e;this.parent.element.style.height=s.clientY-t.top+"px",this.parent.element.style.width=(this.parent.enableRtl?t.right-s.clientX:s.clientX-t.left)+"px"}this.parent.refresh()},e.prototype.stopResize=function(e){this.parent.refresh(),this.unwireResizeEvents();this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"editor"})},e.prototype.getEventType=function(e){return e.indexOf("mouse")>-1?"mouse":"touch"},e.prototype.isMouseEvent=function(e){var t=!1;return("mouse"===this.getEventType(e.type)||!sf.base.isNullOrUndefined(e.pointerType)&&"mouse"===this.getEventType(e.pointerType))&&(t=!0),t},e.prototype.wireResizeEvents=function(){sf.base.EventHandler.add(document,"mousemove",this.performResize,this),sf.base.EventHandler.add(document,"mouseup",this.stopResize,this),this.touchMoveEvent="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",this.touchEndEvent="msie"===sf.base.Browser.info.name?"pointerup":"touchend",sf.base.EventHandler.add(document,this.touchMoveEvent,this.performResize,this),sf.base.EventHandler.add(document,this.touchEndEvent,this.stopResize,this)},e.prototype.unwireResizeEvents=function(){sf.base.EventHandler.remove(document,"mousemove",this.performResize),sf.base.EventHandler.remove(document,"mouseup",this.stopResize),sf.base.EventHandler.remove(document,this.touchMoveEvent,this.performResize),sf.base.EventHandler.remove(document,this.touchEndEvent,this.stopResize)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.element.classList.remove("e-rte-resize"),sf.base.EventHandler.remove(this.resizer,"mousedown",this.resizeStart),sf.base.EventHandler.remove(this.resizer,this.touchStartEvent,this.resizeStart),this.resizer&&sf.base.detach(this.resizer),this.parent.observer.off(t,this.destroy)},e}(),p=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function u(){var e=!1;return sf.base.Browser.isDevice&&sf.base.Browser.isIos&&(e=!0),e}function f(e,t){if("BODY"===e.nodeName&&!sf.base.isNullOrUndefined(t)){var i=top.window.document.querySelector(t);sf.base.isNullOrUndefined(i)||i.contentWindow.focus()}}var g,m,v,b=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],y={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"}};function C(e,t){if(t.enableHtmlSanitizer){var i=sf.base.SanitizeHtmlHelper.beforeSanitize();if(sf.base.extend(i,i,{cancel:!1,helper:null}),!sf.base.isNullOrUndefined(t.deniedSanitizeSelectors)&&t.deniedSanitizeSelectors.length>0)for(var n=function(e){for(var n=0;n<i.selectors.tags.length;n++)i.selectors.tags[n]===t.deniedSanitizeSelectors[e]&&(i.selectors.tags=i.selectors.tags.filter((function(i){return i!=t.deniedSanitizeSelectors[e]})));for(var s=function(n){(i.selectors.attributes[n].attribute||i.selectors.attributes[n].selector)===t.deniedSanitizeSelectors[e]&&(i.selectors.attributes=i.selectors.attributes.filter((function(e){return e!=i.selectors.attributes[n]})))},o=0;o<i.selectors.attributes.length;o++)s(o)},s=0;s<t.deniedSanitizeSelectors.length;s++)n(s);return i.cancel||(e=sf.base.SanitizeHtmlHelper.serializeValue(i,e)),e}return e}function w(e,t){var i=-1;return t.some((function(t,n){return!sf.base.isNullOrUndefined(t)&&"string"==typeof t.subCommand&&e===t.subCommand.toLocaleLowerCase()&&(i=n,!0)})),i}function M(e,t,i,n){for(var s,o,r=0;r<e.length;r++){if("value"===i&&e[r].value.toLocaleLowerCase()===t.toLocaleLowerCase()){s=e[r];break}if("text"===i&&e[r].text.toLocaleLowerCase()===t.toLocaleLowerCase()){s=e[r];break}if("subCommand"===i&&e[r].subCommand.toLocaleLowerCase()===t.toLocaleLowerCase()){s=e[r];break}}if(!sf.base.isNullOrUndefined(s))switch(n){case"text":o=s.text;break;case"value":o=s.value;break;case"cssClass":o=s.cssClass}return o}function S(e,t){var i;return null!==e&&""!==e?(i=t.enableHtmlEncode?t.encode(N(O(e),t)):N(e,t),t.value=i):i="DIV"===t.enterKey?t.enableHtmlEncode?"&lt;div&gt;&lt;br/&gt;&lt;/div&gt;":"<div><br/></div>":"BR"===t.enterKey?t.enableHtmlEncode?"&lt;br/&gt;":"<br/>":t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",i}function x(e){return"DIV"===e.enterKey?"<div><br/></div>":"BR"===e.enterKey?"<br/>":"<p><br/></p>"}function N(e,t){var i=document.createElement("div"),n=document.createElement("div"),s=i.childNodes;if(i.innerHTML=e,i.setAttribute("class","tempDiv"),s.length>0){for(var o=void 0,r=void 0,a=void 0;i.firstChild;)"BR"!==t.enterKey&&("#text"===i.firstChild.nodeName&&(i.firstChild.textContent.indexOf("\n")<0||""!==i.firstChild.textContent.trim())||b.indexOf(i.firstChild.nodeName.toLocaleLowerCase())>=0)?(o?r.appendChild(i.firstChild):(a="DIV"===t.enterKey?sf.base.createElement("div"):sf.base.createElement("p"),n.appendChild(a),a.appendChild(i.firstChild)),r=a,o=!0):"#text"===i.firstChild.nodeName&&("\n"===i.firstChild.textContent||i.firstChild.textContent.indexOf("\n")>=0&&""===i.firstChild.textContent.trim())?sf.base.detach(i.firstChild):(n.appendChild(i.firstChild),o=!1);for(var l=n.querySelectorAll("img"),h=0;h<l.length;h++)l[h].classList.contains("e-rte-image")||l[h].classList.add("e-rte-image"),l[h].classList.contains("e-imginline")||l[h].classList.contains("e-imgbreak")||l[h].classList.add("e-imginline")}return n.innerHTML}function O(e){return e.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}function E(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}function I(e,t){var i=!1;return e.classList.contains(t)&&(i=!0),i}function T(e){var t=sf.base.createElement("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)}function D(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],n=atob(t[1]),s=n.length,o=new Uint8Array(s);s--;)o[s]=n.charCodeAt(s);return new Blob([o],{type:i})}function j(e){return sf.base.isNullOrUndefined(e)?"":e}function A(e,t){e.dropDownModule;for(var i=e.args,n=0,s=Object.keys(e.args);n<s.length;n++)for(var o=s[n],r=0;r<e.tbItems.length;r++){var a=e.tbItems[r]&&e.tbItems[r].subCommand,l=a&&a.toLocaleLowerCase();if(a&&l===o||"UL"===a&&"unorderedlist"===o||"OL"===a&&"orderedlist"===o||"pre"===l&&"insertcode"===o||"NumberFormatList"===a&&"numberFormatList"===o||"BulletFormatList"===a&&"bulletFormatList"===o)if("boolean"==typeof i[o])!0===i[o]?sf.base.addClass([e.tbElements[r]],["e-active"]):sf.base.removeClass([e.tbElements[r]],["e-active"]);else if(("string"==typeof i[o]||null===i[o])&&w(o,e.parent.toolbarSettings.items)>=-1){var h=i[o]?i[o]:"",d="",c=void 0;switch(o){case"formats":if(t)break;var p=e.parent.format.items;d=M(p,h,"subCommand","text");var u=sf.base.isNullOrUndefined(e.parent.format.default)?p[0].text:e.parent.format.default;(c=e.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=sf.base.isNullOrUndefined(d)?u:d,c.parentElement.style.width=e.parent.format.width;break;case"alignments":d=M(e.parent.alignments,h,"subCommand","cssClass"),c=e.tbElements[r].querySelector(".e-btn-icon.e-icons"),sf.base.removeClass([c],["e-justify-left","e-justify-center","e-justify-right","e-justify-full"]),sf.base.addClass([c],sf.base.isNullOrUndefined(d)?["e-icons","e-justify-left"]:d.split(" "));break;case"fontname":if(t)break;var f=e.parent.fontFamily.items;d=M(f,h,"value","text");var g=sf.base.isNullOrUndefined(e.parent.fontFamily.default)?f[0].text:e.parent.fontFamily.default,m=sf.base.isNullOrUndefined(d)?g:d;(c=e.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=m,c.parentElement.style.width=e.parent.fontFamily.width;break;case"fontsize":var v=e.parent.fontSize.items,b=sf.base.isNullOrUndefined(e.parent.fontSize.default)?v[1].value:e.parent.fontSize.default;d=M(v,""===h?b.replace(/\s/g,""):h,"value","text"),(c=e.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=j(d),c.parentElement.style.width=e.parent.fontSize.width;break;case"bulletFormatList":case"numberFormatList":sf.base.removeClass([e.tbElements[r]],["e-active"])}}}}!function(e){e[e.Toolbar=0]="Toolbar",e[e.Content=1]="Content",e[e.Popup=2]="Popup",e[e.LinkToolbar=3]="LinkToolbar",e[e.TextToolbar=4]="TextToolbar",e[e.ImageToolbar=5]="ImageToolbar",e[e.AudioToolbar=6]="AudioToolbar",e[e.VideoToolbar=7]="VideoToolbar",e[e.InlineToolbar=8]="InlineToolbar",e[e.TableToolbar=9]="TableToolbar"}(g||(g={})),function(e){e.Expand="Expand",e.MultiRow="MultiRow",e.Scrollable="Scrollable"}(m||(m={})),function(e){e.InsertLink="InsertLink",e.InsertImage="InsertImage",e.InsertAudio="InsertAudio",e.InsertVideo="InsertVideo",e.InsertTable="InsertTable"}(v||(v={}));var z,k,P=function(){function e(e){this.isToolbar=!1,this.isTransformChild=!1,this.parent=e,this.tbElement=this.parent.getToolbarElement(),this.checkIsTransformChild(),this.addEventListener(),this.wireEvents()}return e.prototype.getToolbarHeight=function(){return this.parent.getToolbar().offsetHeight},e.prototype.getExpandTBarPopHeight=function(){var e=0;if(this.parent.toolbarSettings.type===m.Expand&&this.parent.getToolbar().classList.contains("e-extended-toolbar")){var t=sf.base.select(".e-toolbar-extended",this.parent.getToolbar());t&&this.parent.getToolbar().classList.contains("e-expand-open")||t&&t.classList.contains("e-popup-open")?(sf.base.addClass([t],["e-visible"]),e+=t.offsetHeight,sf.base.removeClass([t],["e-visible"])):sf.base.removeClass([this.parent.getToolbar()],["e-expand-open"])}return e},e.prototype.updateToolbarStatus=function(e){this.parent.getToolbarElement()&&(!this.parent.inlineMode.enable||!u()&&sf.base.Browser.isDevice)&&A({args:e,dropDownModule:null,parent:this.parent,tbElements:sf.base.selectAll(".e-toolbar-item:not(.e-rte-custom-toolbar)",this.parent.getToolbarElement()),tbItems:this.parent.toolbarSettings.items},!!this.parent.inlineMode.enable)},e.prototype.checkIsTransformChild=function(){this.isTransformChild=!1;for(var e=sf.base.selectAll('[style*="transform"]',document),t=0;t<e.length;t++)if(!sf.base.isNullOrUndefined(e[t].contains)&&e[t].contains(this.parent.element)){this.isTransformChild=!0;break}},e.prototype.toggleFloatClass=function(e){var t,i,n=!1,s=!1,o=this.parent.floatingToolbarOffset;e&&this.parent.iframeSettings.enable&&this.parent.inputElement.ownerDocument===e.target?i=e.target.body:e&&e.target!==document?i=e.target:(n=!0,i=document.body);var r=this.getToolbarHeight()+this.getExpandTBarPopHeight();if(this.isTransformChild){t=0;var a=0,l=this.parent.element.offsetHeight;if(n){var h=window.getComputedStyle(i);a=parseFloat(h.marginTop.split("px")[0])+parseFloat(h.paddingTop.split("px")[0])}var d=this.parent.element.getBoundingClientRect().top,c=sf.base.Browser.isMSPointer&&n?window.pageYOffset:i.parentElement.scrollTop,p=i.getBoundingClientRect(),u=n?p.top+c:p.top;d>u+o||d<-l||d<0&&!(d-(n?0:u)+l>r+o)?(s=!1,sf.base.removeClass([this.tbElement],["e-rte-tb-abs-float"])):d<u+o&&(t=d<0?-d+u:u-d,t=n?t-a:t,sf.base.addClass([this.tbElement],["e-rte-tb-abs-float"]),s=!0)}else{var f=this.parent.element.getBoundingClientRect();if(window.innerHeight<f.top)return;t=e&&e.target!==document?i.getBoundingClientRect().top:0,f.bottom<o+r+t||f.bottom<0||f.top>o+t?s=!1:f.top<o&&(s=!0)}s?(sf.base.addClass([this.tbElement],["e-rte-tb-float"]),sf.base.setStyleAttribute(this.tbElement,{width:this.parent.element.offsetWidth+"px",top:o+t+"px"})):(sf.base.removeClass([this.tbElement],["e-rte-tb-float"]),sf.base.setStyleAttribute(this.tbElement,{top:"0px",width:"100%"}))},e.prototype.getDOMVisibility=function(e){return!(!e.offsetParent&&0===e.offsetWidth&&0===e.offsetHeight)},e.prototype.showFixedTBar=function(){this.tbElement=this.parent.getToolbarElement(),sf.base.addClass([this.tbElement],["e-show"]),sf.base.Browser.isIos&&sf.base.addClass([this.tbElement],["e-tbar-ios-fixed"])},e.prototype.hideFixedTBar=function(){this.tbElement=this.parent.getToolbarElement(),this.isToolbar?this.isToolbar=!1:sf.base.removeClass([this.tbElement],["e-show","e-tbar-ios-fixed"])},e.prototype.dropDownBeforeOpenHandler=function(e){this.isToolbar=!0,!sf.base.isNullOrUndefined(sf.base.closest(e.element,".e-rte-toolbar"))&&sf.base.isNullOrUndefined(sf.base.closest(e.element,".e-rte-quick-toolbar"))&&this.parent.hideTableQuickToolbar()},e.prototype.addEventListener=function(){this.parent.observer.on("scroll",this.scrollHandler,this),this.parent.observer.on("refresh-begin",this.onRefresh,this),this.parent.observer.on(a,this.mouseDownHandler,this),this.parent.observer.on("focusChange",this.focusChangeHandler,this),this.parent.observer.on("toolbar-updated",this.updateToolbarStatus,this),this.parent.observer.on("beforeDropDownOpen",this.dropDownBeforeOpenHandler,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("scroll",this.scrollHandler),this.parent.observer.off("refresh-begin",this.onRefresh),this.parent.observer.off(a,this.mouseDownHandler),this.parent.observer.off("focusChange",this.focusChangeHandler),this.parent.observer.off("toolbar-updated",this.updateToolbarStatus),this.parent.observer.off("beforeDropDownOpen",this.dropDownBeforeOpenHandler)},e.prototype.wireEvents=function(){this.parent.inlineMode.enable&&u()||(this.tbElement=this.parent.getToolbarElement(),this.tbElement&&(sf.base.EventHandler.add(this.tbElement,"focusin",this.tbFocusHandler,this),this.parent.inlineMode.enable||(this.keyBoardModule=new sf.base.KeyboardEvents(this.tbElement,{eventName:"keydown",keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter&&this.parent.formatter.keyConfig}))))},e.prototype.unWireEvents=function(){this.tbElement&&sf.base.EventHandler.remove(this.tbElement,"focusin",this.tbFocusHandler)},e.prototype.onRefresh=function(){this.parent.dotNetRef.invokeMethodAsync("RefreshToolbarOverflow"),this.parent.setContentHeight("",!0)},e.prototype.tbFocusHandler=function(e){var t=document.activeElement,i=sf.base.closest(t,".e-rte-toolbar");if(t===this.parent.getToolbarElement()||i===this.parent.getToolbarElement())for(var n=this.parent.getToolbarElement().querySelectorAll(".e-expended-nav"),s=0;s<n.length;s++)sf.base.isNullOrUndefined(this.parent.getToolbarElement().querySelector(".e-insert-table-btn"))?n[s].setAttribute("tabindex","0"):n[s].setAttribute("tabindex","1")},e.prototype.toolBarKeyDown=function(e){switch(e.action){case"escape":this.parent.getEditPanel().focus()}},e.prototype.scrollHandler=function(e){this.parent.inlineMode.enable||(this.tbElement=this.parent.getToolbarElement(),this.parent.toolbarSettings.enableFloating&&this.getDOMVisibility(this.tbElement)&&this.toggleFloatClass(e.args))},e.prototype.mouseDownHandler=function(){sf.base.Browser.isDevice&&this.parent.inlineMode.enable&&!u()&&this.showFixedTBar()},e.prototype.focusChangeHandler=function(){sf.base.Browser.isDevice&&this.parent.inlineMode.enable&&!u()&&(this.isToolbar=!1,this.hideFixedTBar())},e.prototype.destroy=function(){this.removeEventListener(),this.unWireEvents()},e}(),L=function(){return(L=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},B=function(){function e(e){this.parent=e,this.rteId=this.parent.element.id,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on("unLink",this.removeLink,this),this.parent.observer.on("insertLink",this.linkDialog,this),this.parent.observer.on("link-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showLinkQuickToolbar,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(t,this.destroy),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off("unLink",this.removeLink),this.parent.observer.off("insertLink",this.linkDialog),this.parent.observer.off("link-toolbar-action",this.onToolbarAction),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showLinkQuickToolbar),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick)},e.prototype.linkDialog=function(e,t){if("HTML"===this.parent.editorMode&&e.selectParent.length>0&&!sf.base.isNullOrUndefined(e.selectParent[0].classList)&&e.selectParent[0].classList.contains("e-rte-anchor")&&sf.base.isNullOrUndefined(t))this.editLink(e);else{this.selectionObj={selection:e.selection,selectParent:e.selectParent,args:e.args};var i={url:"",text:"",title:"",target:!0};sf.base.isNullOrUndefined(t)||(i={url:t.url,text:t.text,title:t.title,target:""!==t.target});var n="HTML"===this.parent.editorMode?e.selection.getRange(this.parent.getDocument()).toString():e.text;("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(t)&&(!sf.base.isNullOrUndefined(n)&&""!==n&&0===e.selection.range.startOffset||e.selection.range.startOffset!==e.selection.range.endOffset)||"Markdown"===e.module)&&(i.text=n),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.isNullOrUndefined(sf.base.select(".e-rte-link-dialog",this.parent.element))?this.parent.dotNetRef.invokeMethodAsync("ShowLinkDialog",i,sf.base.isNullOrUndefined(t)?null:"Edit"):this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.hideInlineQTBar())}},e.prototype.insertLink=function(e){var t,i=e.url,n=e.text;"HTML"===this.parent.editorMode&&(t=e.title);var s=e.target?"_blank":null;if(""!==i){if(this.isUrl(i)?this.checkUrl(!1):(n=""===n?i:n,i=this.parent.enableAutoUrl||i.indexOf("http")>-1?i:"http://"+i),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus(),sf.base.Browser.isIE&&this.parent.iframeSettings.enable&&this.selectionObj.selection.restore();var o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)}var r,a={url:i,text:n,title:t,target:s,selection:this.selectionObj.selection,selectParent:this.selectionObj.selectParent};if(this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),u()&&this.parent.iframeSettings.enable&&sf.base.select("iframe",this.parent.element).contentWindow.focus(),"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.selectionObj.args)||"KeyK"!==this.selectionObj.args.code)r=this.selectionObj.args;else{var l=this.selectionObj.args,h={item:{command:"Links",subCommand:"CreateLink"},originalEvent:l=L({},l,{target:null})};sf.base.extend(this.selectionObj.args,h,!0),r=h}this.parent.formatter.process(this.parent,r,!sf.base.isNullOrUndefined(this.selectionObj.args)&&this.selectionObj.args.originalEvent,a),this.parent.getEditPanel().focus()}else this.checkUrl(!0)},e.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},e.prototype.checkUrl=function(e){var t=sf.base.isNullOrUndefined(this.parent.element.querySelector(".e-rte-link-dialog .e-rte-linkurl"))?document.querySelector(".e-rte-elements.e-rte-link-dialog .e-rte-linkurl"):this.parent.element.querySelector(".e-rte-link-dialog .e-rte-linkurl");e?(sf.base.addClass([t],"e-error"),t.setSelectionRange(0,t.value.length),t.focus()):sf.base.removeClass([t],"e-error")},e.prototype.cancelDialog=function(){u()?this.selectionObj.selection.restore():this.parent.getEditPanel().focus()},e.prototype.linkDialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel())},e.prototype.getAnchorNode=function(e){var t=sf.base.closest(e,"a");return t||e},e.prototype.openLink=function(e){var t=this.getAnchorNode(e.selectParent[0]);(t.classList.contains("e-rte-anchor")||"A"===t.tagName)&&this.parent.formatter.process(this.parent,e.args,e.args,{url:t.href,text:t.innerText,target:""===t.target?"_self":"_blank",selectNode:e.selectNode,subCommand:e.args.item.subCommand})},e.prototype.editLink=function(e){var t=this.getAnchorNode(e.selectNode[0]),i=this.getAnchorNode(e.selectParent[0]);if((i="A"===t.nodeName?t:i).classList.contains("e-rte-anchor")||"A"===i.tagName){var n={url:i.getAttribute("href"),text:i.innerText,title:i.title,target:i.target};this.linkDialog(e,n)}},e.prototype.removeLink=function(e){0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();var t=this.getAnchorNode(e.selectParent[0]);this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,selectParent:e.selectParent,selection:e.selection,text:t.innerText,subCommand:e.args.item.subCommand}),u()&&this.parent.iframeSettings.enable?sf.base.select("iframe",this.parent.element).contentWindow.focus():this.parent.getEditPanel().focus(),this.hideLinkQuickToolbar()},e.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case"OpenLink":this.openLink(e);break;case"EditLink":this.editLink(e);break;case"RemoveLink":this.removeLink(e)}},e.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideLinkQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){var n=t.target;n=this.getAnchorNode(n);var s;if(s=document.body.querySelector("#"+this.rteId+"_Link_Quick_Popup").classList.contains("e-rte-pop"),"A"===n.nodeName&&n.childNodes.length>0&&"IMG"!==n.childNodes[0].nodeName&&"IMG"!==e.args.target.nodeName){if(s)return;this.showLinkQuickToolbar({args:t,isNotify:!1,type:"Links",elements:[t.target]})}else this.hideLinkQuickToolbar()}}},e.prototype.showLinkQuickToolbar=function(e){if("enter"!==e.args.action&&"space"!==e.args.action){var t=void 0,i=void 0;if("Links"!==e.type||sf.base.isNullOrUndefined(this.parent.quickToolbarModule))return;this.quickToolObj=this.parent.quickToolbarModule;var n,s=this.parent.element.getBoundingClientRect().top,o=this.parent.element.getBoundingClientRect().left,r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),a=this.parent.getToolbarElement(),l=a?a.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;if([].forEach.call(e.elements,(function(e,t){0===t&&(n="#text"===e.nodeName?e.parentNode:e)})),e.isNotify){var h=n.getBoundingClientRect(),d=h.top,c=h.left,p=d-s;t=this.parent.iframeSettings.enable?o+c:c,i=window.pageYOffset+(this.parent.iframeSettings.enable?s+l+d:s+p)}else{var u=void 0;u=e.args.touches?e.args.changedTouches[0]:u=e.args,t=this.parent.iframeSettings.enable?window.pageXOffset+o+u.clientX:u.pageX,i=this.parent.iframeSettings.enable?window.pageYOffset+s+l+u.clientY:u.pageY}this.quickToolObj.showLinkQTBar(t,i,r.endContainer,"Link")}},e.prototype.hideLinkQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.hideLinkQTBar()},e.prototype.showDialog=function(e,t){if(e&&this.parent.getEditPanel().focus(),"HTML"===this.parent.editorMode){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),r={args:e?{item:{command:"Links",subCommand:"CreateLink"},originalEvent:void 0}:t.args,selectNode:s,selection:n,selectParent:o};this.linkDialog(r)}else{var a=this.parent.getEditPanel();this.parent.formatter.editorManager.markdownSelection.save(a.selectionStart,a.selectionEnd),this.linkDialog({args:{item:{command:"Links",subCommand:"Link"},originalEvent:e?void 0:t.args},member:"link",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()),module:"Markdown",name:"insertLink"})}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog");break;case"insert-link":this.showDialog(!1,e),t.preventDefault()}},e.prototype.onDocumentClick=function(e){var t=e.target,i="#"+this.rteId+"_rtelink",n=this.parent.getToolbarElement(),s="#"+this.rteId+"_toolbar_CreateLink",o=this.parent.element.querySelector(i),r=!sf.base.isNullOrUndefined(document.querySelector(".e-rte-link-dialog"))&&document.querySelector(".e-rte-link-dialog").classList.contains("e-rte-elements");sf.base.isNullOrUndefined(o)&&!r||!(!sf.base.closest(t,i)&&this.parent.toolbarSettings.enable&&n&&!n.contains(e.target)||(n&&n.contains(e.target)||this.parent.inlineMode.enable&&!sf.base.closest(t,i))&&!sf.base.closest(t,s)&&!t.querySelector(s))||(this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"))},e.prototype.onIframeMouseDown=function(){this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog")},e.prototype.destroy=function(){this.removeEventListener()},e}(),R=function(){function n(e){this.pageX=null,this.pageY=null,this.moveEle=null,this.rzProgress=!1,this.ensureInsideTableList=!0,this.currentColumnResize="",this.currentMarginLeft=0,this.parent=e,this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on(i,this.keyUp,this),this.parent.observer.on(s,this.keyDown,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("docClick",this.docClick,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("mouseUp",this.selectionTable,this),this.parent.observer.on("createTable",this.renderDlgContent,this),this.parent.observer.on("dropDownSelect",this.dropdownSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("table-toolbar-action",this.onToolbarAction,this)},n.prototype.removeEventListener=function(){this.parent.observer.off(i,this.keyUp),this.parent.observer.off(s,this.keyDown),this.parent.observer.off(t,this.destroy),this.parent.observer.off("docClick",this.docClick),this.parent.observer.off(a,this.cellSelect),this.parent.observer.off(e,this.afterRender),this.parent.observer.off("mouseUp",this.selectionTable),this.parent.observer.off("createTable",this.renderDlgContent),this.parent.observer.off("dropDownSelect",this.dropdownSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("tableColorPickerChanged",this.setBGColor),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("table-toolbar-action",this.onToolbarAction)},n.prototype.afterRender=function(){this.parent.observer.on(a,this.cellSelect,this),this.parent.observer.on("tableColorPickerChanged",this.setBGColor,this),this.parent.tableSettings.resize&&sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),!sf.base.Browser.isDevice&&this.parent.tableSettings.resize&&sf.base.EventHandler.add(this.parent.getEditPanel(),"mouseover",this.resizeHelper,this)},n.prototype.selectionTable=function(e){var t=e.args.target;"mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(sf.base.closest(t,"table"))||"TABLE"!==sf.base.closest(t,"table").tagName||this.parent.getEditPanel().setAttribute("contenteditable","true")},n.prototype.tabSelection=function(e,t,i){var n=this.insideList(t.range);if((37!==e.keyCode&&39!==e.keyCode||3!==t.range.startContainer.nodeType)&&!n)if(e.preventDefault(),i.classList.remove("e-cell-select"),e.shiftKey||37===e.keyCode){var s=sf.base.isNullOrUndefined(i.previousSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").previousSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"table").previousSibling)?i:"td"===sf.base.closest(i,"table").previousSibling.nodeName.toLowerCase()?sf.base.closest(i,"table").previousSibling:i:sf.base.closest(i,"tr").previousSibling.childNodes[sf.base.closest(i,"tr").previousSibling.childNodes.length-1]:i.previousSibling;if(i===s&&0===i.cellIndex&&sf.base.closest(i,"table").tHead){var o=sf.base.closest(i,"table");s=o.rows[0].cells[o.rows[0].cells.length-1]}37===e.keyCode&&i===s&&(s=sf.base.closest(i,"table").previousSibling),s&&(""!==s.textContent.trim()&&sf.base.closest(s,"td")?t.setSelectionNode(this.parent.getDocument(),s):t.setSelectionText(this.parent.getDocument(),s,s,0,0))}else{var r=sf.base.isNullOrUndefined(i.nextSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").nextSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"table").nextSibling)?i:"td"===sf.base.closest(i,"table").nextSibling.nodeName.toLowerCase()?sf.base.closest(i,"table").nextSibling:i:sf.base.closest(i,"tr").nextSibling.childNodes[0]:i.nextSibling;i===r&&"TH"===i.nodeName&&(r=sf.base.closest(i,"table").rows[1].cells[0]),39===e.keyCode&&i===r&&(r=sf.base.closest(i,"table").nextSibling),r&&(""!==r.textContent.trim()&&sf.base.closest(r,"td")?t.setSelectionNode(this.parent.getDocument(),r):t.setSelectionText(this.parent.getDocument(),r,r,0,0)),i===r&&39!==e.keyCode&&r&&(i.classList.add("e-cell-select"),this.addRow(t,e,!0),i.classList.remove("e-cell-select"),""!==(r=r.parentElement.nextSibling?r.parentElement.nextSibling.firstChild:r.parentElement.firstChild).textContent.trim()&&sf.base.closest(r,"td")?t.setSelectionNode(this.parent.getDocument(),r):t.setSelectionText(this.parent.getDocument(),r,r,0,0))}},n.prototype.insideList=function(e){for(var t=this.parent.formatter.editorManager.domNode.blockNodes(),i=[],n=0;n<t.length;n++)"LI"===t[n].parentNode.tagName?i.push(t[n].parentNode):"LI"===t[n].tagName&&"P"!==t[n].childNodes[0].tagName&&"OL"!==t[n].childNodes[0].tagName&&"UL"!==t[n].childNodes[0].tagName&&i.push(t[n]);return i.length>1||i.length&&0===e.startOffset&&0===e.endOffset?(this.ensureInsideTableList=!0,!0):(this.ensureInsideTableList=!1,!1)},n.prototype.tableArrowNavigation=function(e,t,i){var n=t.range.startContainer;40===e.keyCode&&3===n.nodeType&&(n.nextSibling&&"BR"===n.nextSibling.nodeName||n.parentNode&&"TD"!==n.parentNode.nodeName)||38===e.keyCode&&3===n.nodeType&&(n.previousSibling&&"BR"===n.previousSibling.nodeName||n.parentNode&&"TD"!==n.parentNode.nodeName)||(e.preventDefault(),i.classList.remove("e-cell-select"),(i=40===e.keyCode?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").nextSibling)?sf.base.closest(i,"table").tHead&&"TH"===i.nodeName?sf.base.closest(i,"table").rows[1].cells[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"table").nextSibling)?i:sf.base.closest(i,"table").nextSibling:sf.base.closest(i,"tr").nextSibling.children[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"tr").previousSibling)?sf.base.closest(i,"table").tHead&&"TH"!==i.nodeName?sf.base.closest(i,"table").tHead.rows[0].cells[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"table").previousSibling)?i:sf.base.closest(i,"table").previousSibling:sf.base.closest(i,"tr").previousSibling.children[i.cellIndex])&&t.setSelectionText(this.parent.getDocument(),i,i,0,0))},n.prototype.cellSelect=function(e){var t=e.args.target,i=sf.base.closest(t,"td,th");t="TD"!==t.nodeName&&i&&this.parent.getEditPanel().contains(i)?i:t,sf.base.removeClass(this.parent.getEditPanel().querySelectorAll("table td, table th"),"e-cell-select"),!t||"TD"!==t.tagName&&"TH"!==t.tagName||(t.removeAttribute("class"),sf.base.addClass([t],"e-cell-select"),this.activeCell=t,this.curTable=this.curTable?this.curTable:sf.base.closest(t,"table"),sf.base.EventHandler.add(this.curTable,"mousemove",this.tableMove,this),sf.base.EventHandler.add(this.curTable,"mouseup",this.tableMouseUp,this),this.removeResizeEle(),this.helper&&this.parent.getEditPanel().contains(this.helper)&&sf.base.detach(this.helper)),"mozilla"===sf.base.Browser.info.name&&!sf.base.isNullOrUndefined(sf.base.closest(t,"table"))&&"TABLE"===sf.base.closest(t,"table").tagName&&this.parent.getEditPanel().contains(sf.base.closest(t,"table"))&&this.parent.getEditPanel().setAttribute("contenteditable","false")},n.prototype.tableMove=function(e){this.parent.formatter.editorManager.observer.notify("TABLE_MOVE",{event:e,selectNode:[this.activeCell]})},n.prototype.renderDlgContent=function(e){if(this.tableNotifyArgs=e,this.parent.observer.notify(o,{}),sf.base.Browser.isDevice||this.parent.inlineMode.enable)this.insertTableDialog();else{this.hideTableQuickToolbar();var t=this.parent.getToolbarElement(),i=this.parent.element.querySelector("#"+this.parent.element.id+"_toolbar_CreateTable"),n=0,s=i.offsetLeft;n=this.parent.getToolbar().classList.contains("e-expand-open")?i.offsetTop+i.offsetHeight+t.offsetHeight:i.offsetTop+i.offsetHeight;var r=this.parent.getToolbar().querySelector(".e-hscroll-bar");sf.base.isNullOrUndefined(r)||(s=i.offsetLeft-r.scrollLeft),sf.base.isNullOrUndefined(sf.base.select(".e-rte-table-popup",this.parent.element))?this.parent.dotNetRef.invokeMethodAsync("ShowCreateTableDialog",s,n):this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog")}},n.prototype.createTablePopupOpened=function(){for(var e=sf.base.selectAll(".e-rte-table-popup .e-rte-table-row",this.parent.element),t=0;t<e.length;t++){sf.base.EventHandler.add(e[t],"mouseleave",this.tableCellLeave,this);for(var i=sf.base.selectAll(".e-rte-tablecell",e[t]),n=0;n<i.length;n++)sf.base.EventHandler.add(i[n],"mouseup",this.tableCellClick,this),sf.base.EventHandler.add(i[n],"mousemove",this.tableCellSelect,this)}var s=this.parent.element.querySelector(".e-rte-table-popup");s&&s.focus(),sf.base.isNullOrUndefined(this.parent.getToolbarElement().querySelector(".e-expended-nav"))||this.parent.getToolbarElement().querySelector(".e-expended-nav").setAttribute("tabindex","1")},n.prototype.insertTableDialog=function(){this.createDialog()},n.prototype.createDialog=function(e,t){e&&t?this.parent.dotNetRef.invokeMethodAsync("ShowEditTableDialog",e,t):this.parent.dotNetRef.invokeMethodAsync("ShowTableDialog"),this.quickToolObj&&this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.hideInlineQTBar()},n.prototype.tableCellSelect=function(e){var t=e.target,i=this.parent.element.querySelector(".e-rte-table-popup"),n=this.parent.element.querySelector(".e-rte-table-popup .e-rte-popup-header"),s=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),o=Array.prototype.slice.call(t.parentElement.children).indexOf(t),r=i.querySelectorAll(".e-rte-tablecell");Array.prototype.forEach.call(r,(function(e){var t=Array.prototype.slice.call(e.parentElement.parentElement.children).indexOf(e.parentElement),i=Array.prototype.slice.call(e.parentElement.children).indexOf(e);sf.base.removeClass([e],"e-active"),t<=s&&i<=o&&sf.base.addClass([e],"e-active")})),n.innerHTML=o+1+"x"+(s+1)},n.prototype.tableCellLeave=function(e){var t=this.parent.element.querySelector(".e-rte-table-popup"),i=this.parent.element.querySelector(".e-rte-table-popup .e-rte-popup-header");sf.base.removeClass(t.querySelectorAll(".e-rte-tablecell"),"e-active"),sf.base.addClass([t.querySelector(".e-rte-tablecell")],"e-active"),i.innerHTML="1x1"},n.prototype.tableCellClick=function(e){var t=e.target,i=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement)+1,n=Array.prototype.slice.call(t.parentElement.children).indexOf(t)+1;this.tableInsert(i,n,"Create",this)},n.prototype.tableInsert=function(e,t,i,n){var s=n.self?n.self:this,o=this.tableNotifyArgs.selection.range.startContainer;"P"!==o.nodeName||""!==o.textContent.trim()||o.childNodes.length>0||(o.innerHTML="<br />");var l=o.parentNode;if("HTML"===s.parent.editorMode&&(s.parent.iframeSettings.enable&&!I(l.ownerDocument.querySelector("body"),"e-lib")||!s.parent.iframeSettings.enable&&sf.base.isNullOrUndefined(sf.base.closest(l,"#"+s.parent.getPanel().id)))){s.parent.getEditPanel().focus();var h=s.parent.formatter.editorManager.nodeSelection.getRange(s.parent.getDocument());this.tableNotifyArgs.selection=s.parent.formatter.editorManager.nodeSelection.save(h,s.parent.getDocument())}var d={rows:e,columns:t,width:{minWidth:s.parent.tableSettings.minWidth,maxWidth:s.parent.tableSettings.maxWidth,width:s.parent.tableSettings.width},selection:this.tableNotifyArgs.selection};"Create"===i?this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog"):this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog"),this.parent.observer.notify(r,{}),s.parent.formatter.process(s.parent,this.tableNotifyArgs.args,this.tableNotifyArgs.args.originalEvent,d),s.parent.getEditPanel().focus(),s.parent.observer.on(a,s.cellSelect,s)},n.prototype.customTable=function(e,t){if(e&&t){var i=sf.base.Browser.isDevice||!sf.base.isNullOrUndefined(this.tableNotifyArgs.args)&&!sf.base.isNullOrUndefined(this.tableNotifyArgs.args.originalEvent)&&"insert-table"===this.tableNotifyArgs.args.originalEvent.action||this.parent.inlineMode.enable?this.tableNotifyArgs:this;this.tableInsert(e,t,"",i)}},n.prototype.applyTableProperties=function(e){var t=sf.base.closest(this.tableNotifyArgs.selectNode[0],"table");if(t.style.width=e.width+"px",""!==e.padding.toString()){var i=t.querySelectorAll("th");this.applyCellPadding(i,e.padding);var n=t.querySelectorAll("td");this.applyCellPadding(n,e.padding)}t.cellSpacing=e.spacing.toString(),t.cellSpacing&&"0"!==t.cellSpacing?sf.base.addClass([t],"e-rte-table-border"):sf.base.removeClass([t],"e-rte-table-border"),this.parent.formatter.saveData(),this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog")},n.prototype.applyCellPadding=function(e,t){for(var i=0;i<e.length;i++){var n="";if(""===e[i].style.padding){var s=e[i].getAttribute("style");n=(sf.base.isNullOrUndefined(s)?"":s)+" padding:"+t+"px;"}else e[i].style.padding=t+"px",n=e[i].getAttribute("style");e[i].setAttribute("style",n)}},n.prototype.resizeHelper=function(e){if(!this.parent.readonly){var t=e.target||e.targetTouches[0].target,i=sf.base.closest(t,"table.e-rte-table");sf.base.isNullOrUndefined(this.curTable)||sf.base.isNullOrUndefined(i)||i===this.curTable||!this.parent.getEditPanel().contains(i)||(this.removeResizeEle(),this.removeHelper(e),this.cancelResizeAction()),"TABLE"!==t.nodeName&&"TD"!==t.nodeName&&"TH"!==t.nodeName||this.rzProgress||(this.curTable=i&&this.parent.getEditPanel().contains(i)&&("TD"===t.nodeName||"TH"===t.nodeName)?i:t,this.removeResizeEle(),this.tableResizeEleCreation(this.curTable,e))}},n.prototype.tableResizeEleCreation=function(e,t){this.parent.defaultResize(t,!1);for(var i=e.rows[this.calMaxCol(e)].cells,n=[],s=0;s<e.rows.length;s++)n.push(Array.prototype.slice.call(e.rows[s].cells,0,1)[0]);var o=parseInt(getComputedStyle(e).height,10),r=parseInt(getComputedStyle(e).width,10),a=this.calcPos(e);for(s=0;i.length>=s;s++){var l=sf.base.createElement("span",{attrs:{"data-col":s.toString(),unselectable:"on",contenteditable:"false"}});l.classList.add("e-rte-table-resize","e-column-resize"),i.length===s?l.style.cssText="height: "+o+"px; width: 4px; top: "+a.top+"px; left:"+(a.left+this.calcPos(i[s-1]).left+i[s-1].offsetWidth)+"px;":l.style.cssText="height: "+o+"px; width: 4px; top: "+a.top+"px; left:"+(a.left+this.calcPos(i[s]).left)+"px;",this.parent.getEditPanel().appendChild(l)}for(s=0;n.length>s;s++){var h=sf.base.createElement("span",{attrs:{"data-row":s.toString(),unselectable:"on",contenteditable:"false"}});h.classList.add("e-rte-table-resize","e-row-resize");var d=sf.base.isNullOrUndefined(e.getAttribute("cellspacing"))&&""===e.getAttribute("cellspacing")?this.calcPos(n[s]).left:0;h.style.cssText="width: "+r+"px; height: 4px; top: "+(this.calcPos(n[s]).top+a.top+n[s].offsetHeight-2)+"px; left:"+(d+a.left)+"px;",this.parent.getEditPanel().appendChild(h)}var c=sf.base.createElement("span",{className:"e-table-box",attrs:{"data-col":i.length.toString(),unselectable:"on",contenteditable:"false"}});c.style.cssText="top: "+(a.top+o-4)+"px; left:"+(a.left+r-4)+"px;",sf.base.Browser.isDevice&&c.classList.add("e-rmob"),this.parent.getEditPanel().appendChild(c)},n.prototype.resizeStart=function(e){var t=this;if(!this.parent.readonly){sf.base.Browser.isDevice&&this.resizeHelper(e);var i=e.target;if(i.classList.contains("e-column-resize")||i.classList.contains("e-row-resize")||i.classList.contains("e-table-box")){if(e.preventDefault(),this.parent.defaultResize(e,!1),!i.classList.contains("e-table-box")){var n=this.parent.getEditPanel().querySelector(".e-table-box");sf.base.isNullOrUndefined(n)||parseInt(i.getAttribute("data-col"),10)===this.curTable.rows[this.calMaxCol(this.curTable)].cells.length||(n.classList.add("e-hide"),this.rzProgress=!0)}if(sf.base.removeClass(this.curTable.querySelectorAll("td,th"),"e-cell-select"),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),this.resizeBtnInit(),this.hideTableQuickToolbar(),i.classList.contains("e-column-resize")&&(this.resizeBtnStat.column=!0,parseInt(i.getAttribute("data-col"),10)===this.curTable.rows[this.calMaxCol(this.curTable)].cells.length?(this.currentColumnResize="last",this.columnEle=this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(i.getAttribute("data-col"),10)-1]):(0===parseInt(i.getAttribute("data-col"),10)?this.currentColumnResize="first":this.currentColumnResize="middle",this.columnEle=this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(i.getAttribute("data-col"),10)]),this.colIndex=this.columnEle.cellIndex,this.moveEle=e.target,this.appendHelper()),i.classList.contains("e-row-resize")&&(this.rowEle=this.curTable.rows[parseInt(i.getAttribute("data-row"),10)],this.resizeBtnStat.row=!0,this.appendHelper()),i.classList.contains("e-table-box")&&(this.resizeBtnStat.tableBox=!0),sf.base.Browser.isDevice&&this.helper&&!this.helper.classList.contains("e-reicon"))this.helper.classList.add("e-reicon"),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this);else{this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Table"}).then((function(e){e.cancel&&t.cancelResizeAction()}))}sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)}}},n.prototype.calMaxCol=function(e){for(var t,i=0,n=0;n<e.rows.length;n++)i<e.rows[n].cells.length&&(t=n,i=e.rows[n].cells.length);return t},n.prototype.resizing=function(e){var t,i=this.getPointX(e),n=this.getPointY(e),s=this.parent.enableRtl?-(i-this.pageX):i-this.pageX,o=this.parent.enableRtl?-(n-this.pageY):n-this.pageY;this.pageX=i,this.pageY=n;var r,a,l,h=this.curTable.closest("td"),d=this.parent.getEditPanel().querySelector(".e-table-box"),c=parseInt(getComputedStyle(this.curTable).width,10),p=parseInt(getComputedStyle(this.curTable).height,10),u=+getComputedStyle(this.parent.getEditPanel()).paddingRight.match(/\d/g).join(""),f=this.parent.getEditPanel().offsetWidth-2*u,g=!1;if(sf.base.isNullOrUndefined(this.curTable.parentElement.closest("table"))||sf.base.isNullOrUndefined(this.curTable.closest("td"))||!this.parent.getEditPanel().contains(this.curTable.closest("td")))r=f;else{var m=this.curTable.closest("td"),v=+getComputedStyle(m).paddingRight.match(/\d/g).join("");r=m.offsetWidth-(m.offsetWidth-m.clientWidth)-2*v}if(this.resizeBtnStat.column){var b=parseFloat(this.columnEle.offsetWidth.toString()),y="TH"===this.curTable.rows[0].cells[0].nodeName?1:0,C=parseFloat(this.curTable.style.width.split("%")[0]),w=parseFloat(this.curTable.rows[y].cells[this.colIndex].style.width.split("%")[0]);if("first"===this.currentColumnResize){if(s-=.75,this.removeResizeEle(),h&&(t=this.curTable.getBoundingClientRect().right-this.calcPos(h).left,this.curTable.style.maxWidth=t+"px"),(0!==s&&5<w||s<0)&&C<=100&&this.convertPixelToPercentage(c-s,r)<=100){var M=this.findFirstLastColCells(this.curTable,!0);this.curTable.style.width=this.convertPixelToPercentage(c-s,r)>100?"100%":this.convertPixelToPercentage(c-s,r)+"%";var S=C-this.convertPixelToPercentage(c-s,r);this.currentMarginLeft=this.currentMarginLeft+S,this.curTable.style.marginLeft="calc("+("100%"===this.curTable.style.width?0:this.currentMarginLeft)+"%)";for(var x=0;x<M.length;x++)this.curTable.rows[x].cells[this.colIndex].style.width=w-S+"%"}}else if("last"===this.currentColumnResize){if(s+=.75,this.removeResizeEle(),h&&(t=h.getBoundingClientRect().right-this.curTable.getBoundingClientRect().left,this.curTable.style.maxWidth=t+"px"),(0!==s&&5<w||s>0)&&C<=100&&this.convertPixelToPercentage(c+s,r)<=100){var N=this.findFirstLastColCells(this.curTable,!1);this.curTable.style.width=this.convertPixelToPercentage(c+s,r)>100?"100%":this.convertPixelToPercentage(c+s,r)+"%";for(S=C-this.convertPixelToPercentage(c+s,r),x=0;x<N.length;x++)this.curTable.rows[x].cells[this.curTable.rows[x].cells.length===this.colIndex?this.colIndex-1:this.colIndex].style.width=w-S+"%"}}else{var O=this.curTable.rows[this.calMaxCol(this.curTable)].cells,E=b-s,I=parseFloat(this.columnEle.offsetWidth.toString())+parseFloat(O[this.colIndex-1].offsetWidth.toString());for(x=0;x<this.curTable.rows.length;x++){var T=this.curTable.rows[x];if(I-E>20&&E>20){for(var D=I-E,j=E,A=void 0,z=!1,k=void 0,P=void 0,L=0;L<T.cells.length;L++)T.cells[L].hasAttribute("rowspan")&&L<=this.colIndex&&(g=!0,a=x,l=T.cells[L]);if(A=!sf.base.isNullOrUndefined(T.cells[x])&&T.cells[x].hasAttribute("colspan")?parseInt(T.cells[x].getAttribute("colspan"),10)-1:this.colIndex,g){var B=void 0;T.cells.length<O.length?(A=T.cells.length===this.colIndex?this.colIndex-1:this.colIndex-(this.colIndex-1),z=!(!(B=this.curTable.rows[sf.base.isNullOrUndefined(a)?this.colIndex-1:a])||B.cells[this.colIndex-1]!==l&&B.cells[B.cells.length-1]!==l)):A=this.colIndex,k=z?B&&B.cells[B.cells.length-1]!==l?B.cells[this.colIndex-1]:T.cells[T.cells.length-1]:T.cells[A-1],P=z?P&&P.hasAttribute("rowspan")?P:B&&B.cells[B.cells.length-1]!==l?T.cells[A-1]:B.cells[B.cells.length-1]:T.cells[A]}sf.base.isNullOrUndefined(T.cells[A-1])||g?k&&(k.style.width=this.convertPixelToPercentage(D,c)+"%"):T.cells[A-1].style.width=this.convertPixelToPercentage(D,c)+"%",sf.base.isNullOrUndefined(T.cells[A])||g?P&&(P.style.width=this.convertPixelToPercentage(j,c)+"%"):T.cells[A].style.width=this.convertPixelToPercentage(j,c)+"%"}}}this.updateHelper()}else if(this.resizeBtnStat.row){this.parent.defaultResize(e,!1);var R=parseFloat(this.rowEle.clientHeight.toString())+o;R>20&&(this.rowEle.style.height=R+"px"),this.curTable.style.height="",sf.base.isNullOrUndefined(d)||(d.style.cssText="top: "+(this.calcPos(this.curTable).top+p-4)+"px; left:"+(this.calcPos(this.curTable).left+c-4)+"px;"),this.updateHelper()}else if(this.resizeBtnStat.tableBox){if(sf.base.Browser.isDevice||sf.base.EventHandler.remove(this.parent.getEditPanel(),"mouseover",this.resizeHelper),h){var U=this.curTable.getBoundingClientRect().left-h.getBoundingClientRect().left;t=Math.abs(U-h.getBoundingClientRect().width)-5,this.curTable.style.maxWidth=t+"px"}var H=this.curTable.style.width.indexOf("%")>-1;this.curTable.style.width=H?this.convertPixelToPercentage(c+s,r)+"%":c+s+"px",this.curTable.style.height=p+o+"px",sf.base.isNullOrUndefined(d)||(d.classList.add("e-rbox-select"),d.style.cssText="top: "+(this.calcPos(this.curTable).top+p-4)+"px; left:"+(this.calcPos(this.curTable).left+c-4)+"px;")}},n.prototype.resizeEnd=function(e){this.resizeBtnInit();var t=this.parent.getEditPanel().querySelector(".e-table-box");sf.base.isNullOrUndefined(t)||(t.classList.remove("e-hide"),this.rzProgress=!1),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),t&&this.parent.getEditPanel().contains(t)&&(sf.base.Browser.isDevice||sf.base.EventHandler.add(this.parent.getEditPanel(),"mouseover",this.resizeHelper,this),this.removeResizeEle()),this.helper&&this.parent.getEditPanel().contains(this.helper)&&(sf.base.detach(this.helper),this.helper=null),this.pageX=null,this.pageY=null,this.moveEle=null;this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Table"}),this.parent.formatter.saveData()},n.prototype.resizeBtnInit=function(){return this.resizeBtnStat={column:!1,row:!1,tableBox:!1}},n.prototype.removeResizeEle=function(){var e=this.parent.getEditPanel().querySelectorAll(".e-column-resize, .e-row-resize, .e-table-box");if(e.length>0)for(var t=0;t<e.length;t++)sf.base.detach(e[t])},n.prototype.appendHelper=function(){this.helper=sf.base.createElement("div",{className:"e-table-rhelper"}),sf.base.Browser.isDevice&&this.helper.classList.add("e-reicon"),this.parent.getEditPanel().appendChild(this.helper),this.setHelperHeight()},n.prototype.setHelperHeight=function(){var e=this.calcPos(this.curTable);this.resizeBtnStat.column?(this.helper.classList.add("e-column-helper"),this.helper.style.cssText="height: "+getComputedStyle(this.curTable).height+"; top: "+e.top+"px; left:"+(e.left+this.calcPos(this.columnEle).left+("last"===this.currentColumnResize?this.columnEle.offsetWidth+2:0)-1)+"px;"):(this.helper.classList.add("e-row-helper"),this.helper.style.cssText="width: "+getComputedStyle(this.curTable).width+"; top: "+(this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight)+"px; left:"+(this.calcPos(this.rowEle).left+e.left)+"px;")},n.prototype.updateHelper=function(){var e=this.calcPos(this.curTable);if(this.resizeBtnStat.column){var t=e.left+this.calcPos(this.columnEle).left+("last"===this.currentColumnResize?this.columnEle.offsetWidth+2:0)-1;this.helper.style.left=t+"px"}else{var i=this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight;this.helper.style.top=i+"px"}},n.prototype.removeHelper=function(e){!e.target.classList.contains("e-reicon")&&this.helper&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),this.helper&&this.parent.getEditPanel().contains(this.helper)&&sf.base.detach(this.helper),this.pageX=null,this.helper=null)},n.prototype.findFirstLastColCells=function(e,t){for(var i=[],n=e.querySelectorAll("tr"),s=0;s<n.length;s++)if(n[s].closest("table")===e){var o=n[s].querySelectorAll("th, td");i.push(t?o[0]:o[o.length-1])}return i},n.prototype.convertPixelToPercentage=function(e,t){return e/t*100},n.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),this.removeResizeEle()},n.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),n=e.ownerDocument,s=e.offsetParent||n.documentElement,o=!1;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return"TD"===s.nodeName&&"TABLE"===e.nodeName&&(s=sf.base.closest(s,".e-rte-content"),o=!0),s&&s!==e&&1===s.nodeType&&(t=s.getBoundingClientRect()),o?(o=!1,{top:this.parent.inputElement&&this.parent.inputElement.scrollTop>0?this.parent.inputElement.scrollTop+i.top-t.top:i.top-t.top,left:this.parent.inputElement&&this.parent.inputElement.scrollLeft>0?this.parent.inputElement.scrollLeft+i.left-t.left:i.left-t.left}):{top:e.offsetTop,left:e.offsetLeft}},n.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},n.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},n.prototype.editAreaClickHandler=function(e){if(!this.parent.readonly&&sf.base.isNullOrUndefined(sf.base.closest(e.args.target,".e-img-caption"))){var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var n=this.parent.element.getBoundingClientRect(),s=t.target,o=this.parent.getToolbarElement(),r=o?o.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0,a=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),l=sf.base.closest(s,"table");if(s&&"A"!==s.nodeName&&"IMG"!==s.nodeName&&"VIDEO"!==s.nodeName&&!s.classList.contains("e-clickelem")&&"AUDIO"!==s.nodeName&&("TD"===s.nodeName||"TH"===s.nodeName||"TABLE"===s.nodeName||l&&this.parent.getEditPanel().contains(l))&&(3!==a.startContainer.nodeType||a.collapsed)){var h=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.parent.formatter.editorManager.nodeSelection.save(h,this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument());var d=void 0,c=void 0;sf.base.Browser.isDevice&&e.args.changedTouches[0]?(d=e.args.changedTouches[0].pageX,c=e.args.changedTouches[0].pageY):(d=this.parent.iframeSettings.enable?window.pageXOffset+n.left+t.clientX:t.pageX,c=this.parent.iframeSettings.enable?window.pageYOffset+n.top+r+t.clientY:t.pageY),this.quickToolObj.showTableQTBar(d,c,s,"Table"),this.parent.formatter.editorManager.nodeSelection.restore()}else this.hideTableQuickToolbar()}}},n.prototype.hideTableQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.hideTableQTBar()},n.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case"TableHeader":this.tableHeader(e.selection,e.args);break;case"TableRemove":this.removeTable(e.selection,e.args);break;case"TableEditProperties":this.editTable(e)}},n.prototype.tableHeader=function(e,t){this.parent.formatter.process(this.parent,t,t.originalEvent,{selection:e,subCommand:t.item.subCommand})},n.prototype.removeTable=function(e,t,i){var n;i&&(n={item:{command:"Table",subCommand:"TableRemove"}});var s={selection:e,subCommand:i?n.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?n:t,t.originalEvent,s),this.parent.getEditPanel().focus(),this.removeResizeEle(),this.hideTableQuickToolbar()},n.prototype.editTable=function(e){var t=e.selectParent[0];this.tableNotifyArgs.selectNode=e.selectParent;var i=sf.base.closest(t,"table").getClientRects()[0].width,n=sf.base.closest(t,"td").style.padding,s=sf.base.closest(t,"table").getAttribute("cellspacing");this.hideTableQuickToolbar(),this.createDialog({width:i,padding:parseFloat((""!==n?parseInt(n,null):0).toString()),spacing:parseFloat((""===s||sf.base.isNullOrUndefined(s)?0:parseInt(s,null)).toString())},"Edit")},n.prototype.dropdownSelect=function(e){this.parent.observer.notify(o,{});var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Table"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n={args:e,selection:this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)};switch(t.subCommand){case"InsertRowBefore":case"InsertRowAfter":this.addRow(n.selection,e);break;case"InsertColumnLeft":case"InsertColumnRight":this.addColumn(n.selection,e);break;case"DeleteColumn":case"DeleteRow":this.removeRowColumn(n.selection,e);break;case"AlignTop":case"AlignMiddle":case"AlignBottom":this.verticalAlign(n,e);break;case"Dashed":case"Alternate":case"Custom":this.tableStyles(n,t.subCommand);break;case"Merge":case"VerticalSplit":case"HorizontalSplit":this.UpdateCells(n.selection,e)}}},n.prototype.tableMouseUp=function(e){sf.base.EventHandler.remove(this.curTable,"mousemove",this.tableMove)},n.prototype.UpdateCells=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,subCommand:t.item.subCommand}),this.hideTableQuickToolbar()},n.prototype.addRow=function(e,t,i){var n;i&&(n={item:{command:"Table",subCommand:"InsertRowAfter"}});var s={selection:e,subCommand:i?n.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?n:t,t,s)},n.prototype.addColumn=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,width:this.parent.tableSettings.width,subCommand:t.item.subCommand})},n.prototype.removeRowColumn=function(e,t){this.parent.observer.notify(r,{}),this.parent.formatter.process(this.parent,t,t,{selection:e,subCommand:t.item.subCommand}),this.hideTableQuickToolbar(),this.parent.observer.notify(o,{})},n.prototype.verticalAlign=function(e,t){var i=sf.base.closest(e.selectParent[0],"td")||sf.base.closest(e.selectParent[0],"th");i&&this.parent.formatter.process(this.parent,t,t,{tableCell:i,subCommand:t.item.subCommand})},n.prototype.tableStyles=function(e,t){var i=sf.base.closest(e.selectParent[0],"table");if("Dashed"===t&&(this.parent.element.classList.contains("e-dashed-border")?this.parent.element.classList.remove("e-dashed-border"):this.parent.element.classList.add("e-dashed-border"),i.classList.contains("e-dashed-border")?i.classList.remove("e-dashed-border"):i.classList.add("e-dashed-border")),"Alternate"===t&&(this.parent.element.classList.contains("e-alternate-border")?this.parent.element.classList.remove("e-alternate-border"):this.parent.element.classList.add("e-alternate-border"),i.classList.contains("e-alternate-border")?i.classList.remove("e-alternate-border"):i.classList.add("e-alternate-border")),e.args&&e.args.item.cssClass)for(var n=e.args.item.cssClass.split(" "),s=0;s<n.length;s++)i.classList.contains(n[s])?i.classList.remove(n[s]):i.classList.add(n[s]);this.parent.formatter.saveData(),this.parent.formatter.editorManager.nodeSelection.restore(),this.hideTableQuickToolbar()},n.prototype.setBGColor=function(e){var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()).range.startContainer;if((i=3===i.nodeType?sf.base.closest(i.parentNode,"td,th"):sf.base.closest(i,"td, th"))&&("TD"===i.nodeName||"TH"===i.nodeName)){for(var n=sf.base.closest(i,"table").querySelectorAll(".e-cell-select"),s=0;s<n.length;s++)n[s].style.backgroundColor=e.item.value;this.parent.formatter.saveData()}this.hideTableQuickToolbar()},n.prototype.closeOpenedDialog=function(){var e=this.parent.element.querySelector(".e-rte-table-popup"),t=this.parent.element.querySelector(".e-rte-edit-table"),i=document.querySelector(".e-rte-edit-table.e-rte-elements.e-popup-open");e&&this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog"),t&&this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog"),i&&this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog")},n.prototype.showDialog=function(e,t){if(e&&this.parent.getEditPanel().focus(),"HTML"===this.parent.editorMode){var i=this.parent.getDocument(),n=this.parent.formatter.editorManager.nodeSelection.getRange(i),s=this.parent.formatter.editorManager.nodeSelection.save(n,i);this.parent.observer.notify(o,{});var r={originalEvent:e?void 0:t.args,item:{command:"Table",subCommand:"CreateTable"}};this.tableNotifyArgs={args:r,selection:s},this.insertTableDialog()}},n.prototype.keyDown=function(e){var t=e.args;switch(t.action){case"escape":break;case"insert-table":this.showDialog(!1,e),t.preventDefault()}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&this.parent.getEditPanel()&&"KeyK"!==t.code){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),o=s[0!==i.endOffset&&9===t.keyCode?s.length-1:0];if(o=o&&"TD"!==o.tagName&&"TH"!==o.tagName?o.parentElement:o,(8===t.keyCode||46===t.keyCode||t.ctrlKey&&88===t.keyCode)&&(o&&"TBODY"===o.tagName?(t.preventDefault(),this.removeTable(n,t,!0)):o&&o.querySelectorAll("table").length>0&&this.removeResizeEle()),o&&"TD"!==o.tagName&&"TH"!==o.tagName){var r=sf.base.closest(o,"td");o=!sf.base.isNullOrUndefined(r)&&this.parent.inputElement.contains(r)?r:o}if(o&&("TD"===o.tagName||"TH"===o.tagName))switch(t.keyCode){case 9:case 37:case 39:this.tabSelection(t,n,o);break;case 40:case 38:this.tableArrowNavigation(t,n,o)}}},n.prototype.docClick=function(e){var t=e.args.target,i=this.parent.element.querySelector(".e-rte-table-popup"),n=this.parent.element.querySelector(".e-rte-edit-table");t&&t.classList&&(i&&!sf.base.closest(t,"#"+i.id)||n&&!sf.base.closest(t,"#"+n.id))&&!t.classList.contains("e-create-table")&&t.offsetParent&&!t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")&&(this.closeOpenedDialog(),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"));var s=sf.base.closest(t,"td"),o=!(!s||!this.parent.getEditPanel().contains(s));!t||"TD"===t.tagName||"TH"===t.tagName||o||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||(sf.base.removeClass(this.parent.inputElement.querySelectorAll("table td"),"e-cell-select"),sf.base.Browser.isIE||this.hideTableQuickToolbar()),!t||!t.classList||t.classList.contains("e-column-resize")||t.classList.contains("e-row-resize")||t.classList.contains("e-table-box")||this.removeResizeEle()},n.prototype.onIframeMouseDown=function(){this.closeOpenedDialog()},n.prototype.keyUp=function(e){var t=e.args;(8===t.which&&"Backspace"===t.code||46===t.which&&"Delete"===t.code)&&this.hideTableQuickToolbar()},n.prototype.destroy=function(){this.removeEventListener()},n}(),U=function(){function n(e){this.pageX=null,this.pageY=null,this.deletedImg=[],this.parent=e,this.rteId=e.element.id,this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on(i,this.onKeyUp,this),this.parent.observer.on("docClick",this.docClick,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(l,this.imagePaste,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on("imageSize",this.imageSize,this),this.parent.observer.on("caption",this.caption,this),this.parent.observer.on("delete",this.deleteImg,this),this.parent.observer.on("imgAltText",this.insertAltText,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("insertImgLink",this.insertImgLink,this),this.parent.observer.on("insertImage",this.imageDialog,this),this.parent.observer.on("resize",this.onWindowResize,this),this.parent.observer.on("dropDownSelect",this.alignmentSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("image-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showImageQuickToolbar,this)},n.prototype.removeEventListener=function(){this.parent.observer.off(i,this.onKeyUp),this.parent.observer.off("docClick",this.docClick),this.parent.observer.off(t,this.destroy),this.parent.observer.off(l,this.imagePaste),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off("imageSize",this.imageSize),this.parent.observer.off("caption",this.caption),this.parent.observer.off("delete",this.deleteImg),this.parent.observer.off("imgAltText",this.insertAltText),this.parent.observer.off(e,this.afterRender),this.parent.observer.off("insertImgLink",this.insertImgLink),this.parent.observer.off("insertImage",this.imageDialog),this.parent.observer.off("resize",this.onWindowResize),this.parent.observer.off("dropDownSelect",this.alignmentSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("image-toolbar-action",this.onToolbarAction),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showImageQuickToolbar);var n=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;n.removeEventListener("drop",this.dragDrop.bind(this),!0),n.removeEventListener("dragstart",this.dragStart.bind(this),!0),n.removeEventListener("dragenter",this.dragEnter.bind(this),!0),n.removeEventListener("dragover",this.dragOver.bind(this),!0),sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off(h,this.undoStack),this.parent.insertImageSettings.resize&&(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),sf.base.EventHandler.remove(this.parent.getEditPanel(),"cut",this.onCutHandler)))},n.prototype.docClick=function(e){var t=e.args.target,i=sf.base.closest(t,"img"),n=!(!i||!this.parent.getEditPanel().contains(i));!t||"IMG"===t.tagName||n||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||this.hideImageQuickToolbar()},n.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.EventHandler.add(this.parent.getEditPanel(),"cut",this.onCutHandler,this));var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.addEventListener("drop",this.dragDrop.bind(this),!0),e.addEventListener("dragstart",this.dragStart.bind(this),!0),e.addEventListener("dragenter",this.dragEnter.bind(this),!0),e.addEventListener("dragover",this.dragOver.bind(this),!0)},n.prototype.imageDialog=function(e){if(this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.uploadUrl={url:""},this.selectionObj={selfImage:this,selection:e.selection,args:e.args,selectParent:e.selectParent},!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode){var t=this.parent.iframeSettings.enable;if("HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(e.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.imgUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.imgUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}else this.imgUploadSave=e.selection,this.imgUploadSelectedParent=e.selectParent}var n;if(e.selectNode&&"IMG"===e.selectNode[0].nodeName){var s=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);n={mode:"Edit",url:e.selectNode[0].src.match(s)?e.selectNode[0].src:""}}else n={mode:"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",n),this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-img-focus"),this.quickToolObj.hideInlineQTBar())},n.prototype.checkImageBack=function(e){"#text"!==e.startContainer.nodeName||0!==e.startOffset||sf.base.isNullOrUndefined(e.startContainer.previousSibling)||"IMG"!==e.startContainer.previousSibling.nodeName?"#text"===e.startContainer.nodeName||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset-1])||"IMG"!==e.startContainer.childNodes[e.startOffset-1].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset-1]):this.deletedImg.push(e.startContainer.previousSibling)},n.prototype.checkImageDel=function(e){"#text"!==e.startContainer.nodeName||e.startOffset!==e.startContainer.textContent.length||sf.base.isNullOrUndefined(e.startContainer.nextSibling)||"IMG"!==e.startContainer.nextSibling.nodeName?"#text"===e.startContainer.nodeName||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset])||"IMG"!==e.startContainer.childNodes[e.startOffset].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset]):this.deletedImg.push(e.startContainer.nextSibling)},n.prototype.getDropRange=function(e,t){var i=this.parent.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),i);var n=this.parent.getDocument().elementFromPoint(e,t),s=n.childNodes.length>0?n.childNodes[0]:n,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(s,o),i.setEnd(s,o);else{var r=void 0;do{o++,i.setStart(s,o),i.setEnd(s,o+1),r=i.getBoundingClientRect()}while(r.left<e&&o<s.length-1)}return i},n.prototype.selectRange=function(e){var t;this.parent.getDocument().caretRangeFromPoint?t=this.parent.getDocument().caretRangeFromPoint(e.clientX,e.clientY):e.rangeParent?(t=this.parent.getDocument().createRange()).setStart(e.rangeParent,e.rangeOffset):t=this.getDropRange(e.clientX,e.clientY),this.parent.observer.notify("selectRange",{range:t})},n.prototype.imageDropInitialized=function(e){var t=this.imageDragArgs;if(this.parent.element.querySelector(".e-img-resize")&&sf.base.detach(this.imgResizeDiv),this.selectRange(this.imageDragArgs),!(this.dropFiles.length>1)){this.parent.observer.notify("drop",{args:t});for(var i=this.dropFiles,n=i[0].name,s=n.substring(n.lastIndexOf(".")),o=this.parent.insertImageSettings.allowedTypes,r=0;r<o.length;r++)if(s.toLocaleLowerCase()===o[r].toLowerCase())if(this.parent.insertImageSettings.saveUrl||e)this.onSelect(this.dropFiles);else{var a={text:"",file:i[0]};this.imagePaste(a)}}},n.prototype.insertDragImage=function(e,t){var i=this;e.preventDefault();var n=this.parent.element.querySelector("e-popup-open");this.parent.observer.notify("drop",{args:e}),n&&n.classList.add("e-hide");var s=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(t.length<=0||!sf.base.isNullOrUndefined(s)){var o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(r&&"IMG"===r.tagName){r.nextElementSibling&&r.nextElementSibling.classList.contains("e-img-inner")?o.insertNode(r.parentElement.parentElement):o.insertNode(r),r.classList.remove("e-rte-drag-image"),r.addEventListener("load",(function(){i.parent.actionCompleteEnabled&&i.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",null)})),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument());var a=e;this.resizeStart(a,r),this.hideImageQuickToolbar()}}},n.prototype.onSelect=function(e){var t=this,i=this,n=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s={name:"",size:0,status:"",statusCode:"",type:"",rawFile:e[0],validationMessages:{}};this.droppedImage=sf.base.createElement("IMG"),this.droppedImage.style.opacity="0.5",this.droppedImage.classList.add("e-rte-image"),this.droppedImage.classList.add("e-imginline"),this.droppedImage.classList.add("e-resize");var o=s.rawFile,r=new FileReader;r.addEventListener("load",(function(){var e=URL.createObjectURL(D(r.result));t.droppedImage.src="Blob"===i.parent.insertImageSettings.saveFormat?e:r.result})),o&&r.readAsDataURL(o),n.insertNode(this.droppedImage),n.selectNodeContents(this.droppedImage),this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),n),this.droppedImage.addEventListener("load",(function(){t.parent.actionCompleteEnabled&&t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",null)}))},n.prototype.removeDroppedImage=function(){sf.base.detach(this.droppedImage)},n.prototype.dropUploadSuccess=function(e,t){this.droppedImage.style.opacity="1",this.droppedImage.classList.add("e-img-focus"),this.droppedImage.src=e,this.droppedImage.alt=t,this.showImageQuickToolbar({args:this.imageDragArgs,type:"Images",isNotify:void 0,elements:this.droppedImage}),this.resizeStart(this.imageDragArgs,this.droppedImage)},n.prototype.dropUploadChange=function(e,t){t&&(this.droppedImage.src=e,this.droppedImage.style.opacity="1")},n.prototype.imagePaste=function(e){var t=this;if(0===e.text.length&&!sf.base.isNullOrUndefined(e.file)){var i=this,n=new FileReader;e.args&&e.args.preventDefault(),n.addEventListener("load",(function(s){var o={cssClass:"inline"===i.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",url:"Base64"!==t.parent.insertImageSettings.saveFormat&&sf.base.isNullOrUndefined(e.callBack)?URL.createObjectURL(D(n.result)):n.result,width:{width:i.parent.insertImageSettings.width,minWidth:i.parent.insertImageSettings.minWidth,maxWidth:i.getMaxWidth()},height:{height:i.parent.insertImageSettings.height,minHeight:i.parent.insertImageSettings.minHeight,maxHeight:i.parent.insertImageSettings.maxHeight}};sf.base.isNullOrUndefined(e.callBack)?(i.parent.formatter.process(i.parent,{item:{command:"Images",subCommand:"Image"}},e.args,o),t.showPopupToolBar(e,o)):e.callBack(o)})),n.readAsDataURL(e.file)}},n.prototype.showPopupToolBar=function(e,t){var i=this,n='img[src="'+t.url+'"]',s=this.parent.inputElement.querySelector(n),o={args:e.args,type:"Images",isNotify:void 0,elements:s};s&&setTimeout((function(){i.showImageQuickToolbar(o),i.resizeStart(e.args,s)}),0)},n.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=sf.base.createElement("div"),n=T(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(n);var s=i.querySelectorAll("img");if(i.querySelector(".e-img-resize")&&s.length>0){for(var o=0;o<s.length;o++)s[o].style.outline="";sf.base.detach(i.querySelector(".e-img-resize")),this.parent.formatter.getUndoRedoStack()[t].text=i.innerHTML}}},n.prototype.imageResize=function(e){this.resizeBtnInit(),this.imgEle=e,sf.base.addClass([this.imgEle],"e-resize"),this.imgResizeDiv=sf.base.createElement("span",{className:"e-img-resize",id:this.rteId+"_imgResize"}),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),sf.base.Browser.isDevice&&sf.base.addClass([this.imgResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.imgResizePos(e,this.imgResizeDiv),this.resizeImgDupPos(e),this.parent.getEditPanel().appendChild(this.imgResizeDiv),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this)},n.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},n.prototype.imgResizePos=function(e,t){var i=this.calcPos(e),n=i.top,s=i.left,o=e.getBoundingClientRect().width,r=e.getBoundingClientRect().height,a=sf.base.Browser.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,l=sf.base.Browser.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=s-a+"px",t.querySelector(".e-rte-botLeft").style.top=r-a+n+"px",t.querySelector(".e-rte-botRight").style.left=o-(a-l)+s+"px",t.querySelector(".e-rte-botRight").style.top=r-a+n+"px",t.querySelector(".e-rte-topRight").style.left=o-(a-l)+s+"px",t.querySelector(".e-rte-topRight").style.top=n-a+"px",t.querySelector(".e-rte-topLeft").style.left=s-a+"px",t.querySelector(".e-rte-topLeft").style.top=n-a+"px"},n.prototype.resizeImgDupPos=function(e){this.imgDupPos={width:""!==e.style.height?this.imgEle.style.width:e.width+"px",height:""!==e.style.height?this.imgEle.style.height:e.height+"px"}},n.prototype.calcPos=function(e){for(var t,i={top:0,left:0},n=e.ownerDocument,s=(e.offsetParent&&(e.offsetParent.classList.contains("e-img-caption")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?sf.base.closest(e,"#"+this.rteId+"_rte-edit-view"):e.offsetParent)||n.documentElement;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return s&&s!==e&&1===s.nodeType&&(i=s.getBoundingClientRect()),e.offsetParent&&e.offsetParent.classList.contains("e-img-caption")?{top:(t=e.getBoundingClientRect()).top-i.top,left:t.left-i.left}:{top:e.offsetTop,left:e.offsetLeft}},n.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},n.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},n.prototype.pixToPercent=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},n.prototype.imgDupMouseMove=function(e,t,i){parseInt(this.parent.insertImageSettings.minWidth,10)>=parseInt(e,10)||parseInt(this.getMaxWidth(),10)<=parseInt(e,10)||!this.parent.insertImageSettings.resizeByPercent&&(parseInt(this.parent.insertImageSettings.minHeight,10)>=parseInt(t,10)||parseInt(this.parent.insertImageSettings.maxHeight,10)<=parseInt(t,10))||(this.imgEle.parentElement.style.cursor="pointer",this.setAspectRatio(this.imgEle,parseInt(e,10),parseInt(t,10),i),this.resizeImgDupPos(this.imgEle),this.imgResizePos(this.imgEle,this.imgResizeDiv))},n.prototype.setAspectRatio=function(e,t,i,n){if(!sf.base.isNullOrUndefined(e.width)){var s=""!==e.style.width?parseInt(e.style.width,10):e.width,o=""!==e.style.height?parseInt(e.style.height,10):e.height;if(s>o)if(this.parent.insertImageSettings.resizeByPercent)e.style.width=this.pixToPercent(s/o*i,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height");else if(""===e.style.width&&""!==e.style.height)e.style.height=i+"px";else if(""!==e.style.width&&""===e.style.height)e.style.width=(s/o*i+s/o).toString()+"px",e.style.height=i+"px";else if(""!==e.style.width)e.style.width=s/o*i+"px",e.style.height=i+"px";else{var r=s/o*i+s/o;e.setAttribute("width",(r>=15?r:15).toString())}else o>s?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=o/s*t+"px"):e.setAttribute("width",this.resizeBtnStat.botRight?(this.getPointX(n)-e.getBoundingClientRect().left).toString():t.toString()):this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):(e.style.width=(t>=15?t:15)+"px",e.style.height=(t>=15?t:15)+"px")}},n.prototype.getMaxWidth=function(){var e=this.parent.insertImageSettings.maxWidth,t=this.parent.getEditPanel(),i=window.getComputedStyle(t),n=t.offsetWidth-(14+parseFloat(i.paddingLeft.split("px")[0])+parseFloat(i.paddingRight.split("px")[0])+parseFloat(i.marginLeft.split("px")[0])+parseFloat(i.marginRight.split("px")[0]));return sf.base.isNullOrUndefined(e)?n:e},n.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&(sf.base.detach(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)},n.prototype.removeResizeEle=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),sf.base.detach(this.parent.getEditPanel().querySelector(".e-img-resize"))},n.prototype.onWindowResize=function(){sf.base.isNullOrUndefined(this.parent)||sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-img-resize"))||this.cancelResizeAction()},n.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideImageQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)i&&1===t.which&&!sf.base.isNullOrUndefined(t.target)&&"IMG"===t.target.tagName&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var n,s=t.target;if(n=document.body.querySelector("#"+this.rteId+"_Image_Quick_Popup").classList.contains("e-rte-pop"),"IMG"===s.nodeName&&this.parent.quickToolbarModule){if(n)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),s),u()&&this.parent.observer.notify(o,e),sf.base.addClass([s],"e-img-focus"),this.showImageQuickToolbar({args:t,type:"Images",elements:[t.target]})}else this.hideImageQuickToolbar()}}},n.prototype.showImageQuickToolbar=function(e){var t=this,i="ImageLink";if("Images"===e.type&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var n=e.args,s=e.elements,o=this.parent.element.getBoundingClientRect(),r=this.parent.getToolbarElement(),a=r?r.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(e.elements,(function(e,t){0===t&&(s=e)})),s&&!sf.base.closest(s,"a")&&(i="Image"),"IMG"===s.nodeName&&sf.base.addClass([s],["e-img-focus"]);var l=this.parent.iframeSettings.enable?window.pageXOffset+o.left+(sf.base.isNullOrUndefined(n)?this.imageDragArgs.clientX:n.clientX):sf.base.isNullOrUndefined(n)?this.imageDragArgs.pageX:n.pageX,h=this.parent.iframeSettings.enable?window.pageYOffset+o.top+a+(sf.base.isNullOrUndefined(n)?this.imageDragArgs.clientY:n.clientY):sf.base.isNullOrUndefined(n)?this.imageDragArgs.pageY:n.pageY;this.quickToolObj&&(e.isNotify?setTimeout((function(){t.parent.formatter.editorManager.nodeSelection.Clear(t.parent.getDocument()),t.parent.formatter.editorManager.nodeSelection.setSelectionContents(t.parent.getDocument(),s),t.quickToolObj.showImageQTBar(l,h,s,i)}),400):this.quickToolObj.showImageQTBar(l,h,s,i))}},n.prototype.hideImageQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-img-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-img-focus")],"e-img-focus"),this.quickToolObj&&this.quickToolObj.hideImageQTBar())},n.prototype.onToolbarAction=function(e){switch(this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([e.selectNode[0]],"e-img-focus")),this.selectionObj=e,u()&&this.parent.observer.notify(r,{}),e.args.item.subCommand){case"Replace":this.parent.observer.notify("insertImage",e);break;case"Caption":this.parent.observer.notify("caption",e);break;case"InsertLink":this.parent.observer.notify("insertImgLink",e);break;case"AltText":this.parent.observer.notify("imgAltText",e);break;case"Remove":this.parent.observer.notify("delete",e);break;case"Dimension":this.parent.observer.notify("imageSize",e);break;case"OpenImageLink":this.openImgLink(e);break;case"EditImageLink":this.editImgLink(e);break;case"RemoveImageLink":this.removeImgLink(e)}},n.prototype.openImgLink=function(e){var t=""===e.selectParent[0].parentNode.target?"_self":"_blank";this.parent.formatter.process(this.parent,e.args,e.args,{url:e.selectParent[0].parentNode.href,target:t,selectNode:e.selectNode,subCommand:e.args.item.subCommand})},n.prototype.editImgLink=function(e){var t=e.selectParent[0].parentNode,i={url:t.href,target:t.target};this.insertImgLink(e,i)},n.prototype.removeImgLink=function(e){sf.base.Browser.isIE&&this.parent.getEditPanel().focus(),e.selection.restore();var t=!(!this.parent.getEditPanel().contains(this.captionEle)||!sf.base.select("a",this.captionEle)),i=t?[this.captionEle]:[e.selectNode[0].parentElement];this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:e.selectNode[0],selectParent:i,selection:e.selection,subCommand:e.args.item.subCommand}),this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-img-focus")),t&&sf.base.select(".e-img-inner",this.captionEle).focus()},n.prototype.caption=function(e){var t=e.selectNode[0];if("IMG"===t.nodeName){e.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.cancelResizeAction(),sf.base.addClass([t],"e-rte-image");var i=e.args.item?e.args.item.subCommand:"Caption";if(sf.base.isNullOrUndefined(sf.base.closest(t,".e-img-caption"))){this.captionEle=sf.base.createElement("span",{className:"e-img-caption e-rte-img-caption",attrs:{contenteditable:"false",draggable:"false"}});var n=sf.base.createElement("span",{className:"e-img-wrap"}),s=sf.base.createElement("span",{className:"e-img-inner",attrs:{contenteditable:"true"}}),o=e.selectNode[0].parentElement;"A"===o.tagName&&o.setAttribute("contenteditable","true"),n.appendChild("A"===o.tagName?o:e.selectNode[0]),n.appendChild(s);var r=this.parent.localeData.imageCaption;s.innerHTML=r,this.captionEle.appendChild(n),t.classList.contains("e-imginline")&&sf.base.addClass([this.captionEle],"e-caption-inline"),t.classList.contains("e-imgbreak")&&sf.base.addClass([this.captionEle],"e-imgbreak"),t.classList.contains("e-imgleft")&&sf.base.addClass([this.captionEle],"e-imgleft"),t.classList.contains("e-imgright")&&sf.base.addClass([this.captionEle],"e-imgright"),t.classList.contains("e-imgcenter")&&sf.base.addClass([this.captionEle],"e-imgcenter"),this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:this.captionEle,selectNode:e.selectNode,subCommand:i}),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),s.childNodes[0],s.childNodes[0],0,s.childNodes[0].textContent.length)}else sf.base.detach(sf.base.closest(t,".e-img-caption")),sf.base.Browser.isIE&&(this.parent.getEditPanel().focus(),e.selection.restore()),"A"===t.parentElement.tagName?this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t.parentElement,selectNode:e.selectNode,subCommand:i}):this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t,selectNode:e.selectNode,subCommand:i});this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([t],"e-img-focus"))}},n.prototype.insertImgLink=function(e,t){var i;"IMG"===e.selectNode[0].nodeName&&(i=sf.base.isNullOrUndefined(t)?{mode:"InsertLink",newWindow:!0,url:""}:{mode:"EditLink",newWindow:!!t.target,url:t.url},this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i))},n.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},n.prototype.insertLink=function(e,t,i){if("IMG"===this.selectionObj.selectNode[0].nodeName){var n=document.querySelector(".e-rte-img-dialog .e-img-link");if(""===e)return sf.base.addClass([n],"e-error"),n.setSelectionRange(0,e.length),void n.focus();if(this.isUrl(e)?sf.base.removeClass([n],"e-error"):e="http://"+e,"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),"A"===this.selectionObj.selectNode[0].parentElement.nodeName)return this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{url:e,target:t,ariaLabel:i,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),void this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null);this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{url:e,target:t,ariaLabel:i,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand,selection:this.selectionObj.selection});var s=sf.base.closest(this.selectionObj.selectNode[0],".e-img-caption");s&&sf.base.select(".e-img-inner",s).focus(),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)}},n.prototype.insertAltText=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.selectNode[0].getAttribute("alt"),i={mode:"AltText",altText:null===t?"":t};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i)}},n.prototype.insertAlt=function(e){this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{altText:e,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)},n.prototype.deleteImg=function(e,t){if("IMG"===e.selectNode[0].nodeName){var i={src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&this.quickToolObj.hideImageQTBar(),this.cancelResizeAction(),sf.base.isNullOrUndefined(t)&&this.parent.imageDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("AfterImageDeleteEvent",i)}},n.prototype.imageSize=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.selectNode[0],i={mode:"Dimension",width:"auto"===t.style.width.toString()||t.style.width.toString()?t.style.width.toString():parseInt(t.getClientRects()[0].width.toString()).toString(),height:"auto"===t.style.height.toString()||t.style.height.toString()?t.style.height.toString():parseInt(t.getClientRects()[0].height.toString()).toString(),maxWidth:parseFloat(this.getMaxWidth())};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i)}},n.prototype.insertSize=function(e,t){this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{width:e,height:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),this.imgResizeDiv&&this.imgResizePos(this.selectionObj.selectNode[0],this.imgResizeDiv),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)},n.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Images"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),s={args:e,selectNode:n="IMG"===n[0].nodeName?n:[this.imgEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"JustifyLeft":this.alignImage(s,"JustifyLeft");break;case"JustifyCenter":this.alignImage(s,"JustifyCenter");break;case"JustifyRight":this.alignImage(s,"JustifyRight");break;case"Inline":this.inline(s);break;case"Break":this.break(s)}this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([n[0]],"e-img-focus")),this.cancelResizeAction()}},n.prototype.alignImage=function(e,t){var i=e.args.item?e.args.item.subCommand:t;this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:i})},n.prototype.inline=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},n.prototype.break=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},n.prototype.imageBrowseClick=function(){document.getElementById(this.rteId+"_image").querySelector(".e-rte-img-dialog .e-file-select-wrap button").click()},n.prototype.dialogOpened=function(){var e=sf.base.Browser.isDevice?document.getElementById(this.rteId+"_image").querySelector(".e-img-content"):sf.base.isNullOrUndefined(this.parent.element.querySelector(".e-rte-img-dialog .e-img-content"))?document.querySelector(".e-rte-elements .e-rte-img-dialog .e-img-content"):this.parent.element.querySelector(".e-rte-img-dialog .e-img-content");if(!sf.base.isNullOrUndefined(e)){var t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertImage");this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.imageBrowseClick,this),!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?e.querySelector("#"+this.rteId+"_insertImage").focus():e.querySelector(".e-img-url").focus()}},n.prototype.imageSelected=function(){this.inputUrl.setAttribute("disabled","true")},n.prototype.imageUploadSuccess=function(e,t){this.inputUrl=this.parent.element.querySelector(".e-rte-img-dialog .e-img-url"),sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)||(this.uploadUrl={url:e,selection:this.imgUploadSave,altText:t,selectParent:this.imgUploadSelectedParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}},this.inputUrl.setAttribute("disabled","true"))},n.prototype.imageUploadComplete=function(e,t){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)){var i="Base64"===this.parent.insertImageSettings.saveFormat?e:URL.createObjectURL(D(e));this.uploadUrl={url:i,selection:this.imgUploadSave,altText:t,selectParent:this.imgUploadSelectedParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}},this.inputUrl.setAttribute("disabled","true")}},n.prototype.imageUploadChange=function(e,t){this.modifiedUrl=e,this.isStreamUrl=t},n.prototype.removing=function(){this.inputUrl.removeAttribute("disabled"),this.uploadUrl&&(this.uploadUrl.url="")},n.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel()),this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.imageBrowseClick)},n.prototype.insertImageUrl=function(){sf.base.Browser.isDevice?this.inputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_image").querySelector(".e-rte-img-dialog .e-img-url"):this.inputUrl=sf.base.isNullOrUndefined(this.parent.element.querySelector(".e-rte-img-dialog .e-img-url"))?this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_image").querySelector(".e-rte-elements.e-rte-img-dialog .e-img-url"):this.parent.element.querySelector(".e-rte-img-dialog .e-img-url");var e=this.inputUrl.value;if(this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(""!==e){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus();var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t)}var i=/[\w-]+.(jpg|png|jpeg|gif)/g,n=sf.base.isNullOrUndefined(e.match(i))||"HTML"!==this.parent.editorMode?"":e.match(i)[0],s={cssClass:"inline"===this.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",url:e,selection:this.selectionObj.selection,altText:n,selectParent:this.selectionObj.selectParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,s),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)}}else this.uploadUrl.cssClass="inline"===this.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl),this.parent.getEditPanel().querySelector(".e-img-resize")&&(this.imgEle.style.outline="",this.removeResizeEle())},n.prototype.showDialog=function(e,t,i,n,s){var o,r,a,l;e&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),l=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)):(r=i,a=n,l=s),"HTML"===this.parent.editorMode?this.imageDialog({args:{item:{command:"Images",subCommand:"Image"},originalEvent:e?void 0:t,name:e?"showDialog":null},selectNode:a,selection:r,selectParent:l}):this.imageDialog({args:{item:{command:"Images",subCommand:"Image"},originalEvent:e?void 0:t},member:"image",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()),module:"Markdown",name:"insertImage"})},n.prototype.onCutHandler=function(){this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction()},n.prototype.onIframeMouseDown=function(e){this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.onDocumentClick(e)},n.prototype.onDocumentClick=function(e){var t=e.target;"IMG"===t.nodeName&&(this.imgEle=t);var i=document.body.querySelector("#"+this.rteId+"_image.e-rte-img-dialog");!sf.base.isNullOrUndefined(i)&&(!sf.base.closest(t,"#"+this.rteId+"_image")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!sf.base.closest(t,"#"+this.rteId+"_toolbar_Image")&&!t.querySelector("#"+this.rteId+"_toolbar_Image"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"))),"IMG"!==e.target.tagName&&this.imgResizeDiv&&!this.quickToolObj&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction(),this.parent.getEditPanel().querySelector(".e-img-resize")&&("IMG"!==t.tagName&&this.removeResizeEle(),"IMG"===t.tagName||sf.base.isNullOrUndefined(this.imgEle)?sf.base.isNullOrUndefined(this.prevSelectedImgEle)||this.prevSelectedImgEle===t||(this.prevSelectedImgEle.style.outline=""):this.imgEle.style.outline="")},n.prototype.imageClick=function(e){sf.base.Browser.isDevice&&("IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName||"IMG"===e.target.tagName?(this.parent.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true")),"IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName&&e.preventDefault()},n.prototype.onKeyDown=function(e){var t,i,n,s,o,r=e.args;this.deletedImg=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)"IMG"===a[l].nodeName&&this.deletedImg.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var h=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&h?this.checkImageBack(t):46===r.which&&"Delete"===r.code&&h&&this.checkImageDel(t)}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action||37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode)&&"IMG"===s[0].tagName&&s[0].parentElement)){var d=s[0].parentElement.childNodes[0];this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),d,d,d.textContent.length,d.textContent.length),sf.base.removeClass([s[0]],"e-img-focus"),this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(this.imgEle)||(this.imgEle.style.outline="")}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),8===r.keyCode||46===r.keyCode){if(n&&"IMG"===n[0].nodeName){r.preventDefault();var c={selectNode:n,selection:i,selectParent:s,args:{item:{command:"Images",subCommand:"Remove"},originalEvent:r}};this.deleteImg(c,r.keyCode)}this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle()}switch(r.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null);break;case"insert-image":this.showDialog(!1,r,i,n,s),r.preventDefault()}},n.prototype.onKeyUp=function(e){if(!sf.base.isNullOrUndefined(this.deletedImg)&&this.deletedImg.length>0)for(var t=0;t<this.deletedImg.length;t++){var i={src:this.deletedImg[t].getAttribute("src")};this.parent.imageDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("AfterImageDeleteEvent",i)}},n.prototype.resizeStart=function(e,t){var i=this;if(!this.parent.readonly){var n=t||e.target;if(this.prevSelectedImgEle=this.imgEle,"IMG"===n.tagName){this.parent.defaultResize(e,!1);var s=n;this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&sf.base.detach(this.imgResizeDiv),this.imageResize(s)}if(n.classList.contains("e-rte-imageboxmark")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.hideImageQTBar(),n.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),n.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),n.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),n.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),sf.base.Browser.isDevice&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span"))sf.base.addClass([this.imgResizeDiv],"e-mob-span");else{this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Images"}).then((function(e){e.cancel&&i.cancelResizeAction()}))}sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)}}},n.prototype.resizing=function(e){this.imgEle.offsetWidth>=this.getMaxWidth()&&(this.imgEle.style.maxHeight=this.imgEle.offsetHeight+"px");var t=this.getPointX(e),i=this.getPointY(e),n=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,s=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(i-this.pageY):i-this.pageY,o=parseInt(this.imgDupPos.width,10)+n,r=parseInt(this.imgDupPos.height,10)+s;this.pageX=t,this.pageY=i,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.imgDupMouseMove(o+"px",r+"px",e)},n.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.imgEle.parentElement.style.cursor="auto",sf.base.Browser.isDevice&&sf.base.removeClass([e.target.parentElement],"e-mob-span");this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Images"}),this.parent.formatter.editorManager.observer.on(h,this.undoStack,this),this.parent.formatter.saveData()},n.prototype.dragStart=function(e){if("IMG"!==e.target.nodeName)return!0;this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",e).then((function(t){t.cancel?e.preventDefault():(e.dataTransfer.effectAllowed="copyMove",e.target.classList.add("e-rte-drag-image"))}))},n.prototype.dragOver=function(e){if(!("edge"===sf.base.Browser.info.name&&e.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||sf.base.Browser.isIE&&"Files"===e.dataTransfer.types[0]))return!0;e.preventDefault()},n.prototype.dragEnter=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault()},n.prototype.dragDrop=function(e){var t=this;this.imageDragArgs=e,this.dropFiles=e.dataTransfer.files;var i=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(!i||"IMG"!==i.tagName)return!0;e.preventDefault(),e.stopPropagation(),(e.dataTransfer.files.length<=0||i)&&this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",e).then((function(i){if(!i.cancel){if(sf.base.closest(e.target,"#"+t.rteId+"_toolbar")||"false"===t.parent.inputElement.contentEditable)return;if(t.parent.element.querySelector(".e-img-resize")&&sf.base.detach(t.imgResizeDiv),t.selectRange(e),t.parent.element.querySelector(".e-droparea"))return;t.insertDragImage(e,t.dropFiles)}}))},n.prototype.destroy=function(){this.prevSelectedImgEle=void 0,this.removeEventListener()},n}(),H=function(){function n(e){this.deletedAud=[],this.parent=e,this.rteId=e.element.id,this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on(i,this.onKeyUp,this),this.parent.observer.on("docClick",this.docClick,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on("delete",this.deleteAud,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("insertAudio",this.audioDialog,this),this.parent.observer.on("dropDownSelect",this.alignmentSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("audio-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showAudioQuickToolbar,this)},n.prototype.removeEventListener=function(){this.parent.observer.off(i,this.onKeyUp),this.parent.observer.off("docClick",this.docClick),this.parent.observer.off(t,this.destroy),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off("dropDownSelect",this.alignmentSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("audio-toolbar-action",this.onToolbarAction),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showAudioQuickToolbar),sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.audioClick),this.parent.formatter.editorManager.observer.off(h,this.undoStack),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick))},n.prototype.docClick=function(e){var t=e.args.target,i=sf.base.closest(t,"audio"),n=!(!i||!this.parent.getEditPanel().contains(i));!t||"audio"===t.tagName||n||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||this.hideAudioQuickToolbar()},n.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.audioClick,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this)},n.prototype.isAudioElem=function(e){return!(!e||3===e.nodeType||"BR"===e.nodeName||!e.classList||!e.classList.contains("e-audio-wrap")&&!e.classList.contains("e-clickelem"))},n.prototype.audioDialog=function(e){if(this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null),this.uploadUrl={url:""},this.selectionObj={selfAudio:this,selection:e.selection,args:e.args,selectParent:e.selectParent},!sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)||"HTML"===this.parent.editorMode){var t=this.parent.iframeSettings.enable;if("HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(e.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.audUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.audUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}else this.audUploadSave=e.selection,this.audUploadSelectedParent=e.selectParent}var n;if(e.selectNode&&this.isAudioElem(e.selectNode[0])){var s=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);n=e.selectNode[0].querySelector("source").src.match(s)?{mode:"Edit",url:e.selectNode[0].querySelector("source").src}:{mode:"Edit",url:""}}else n={mode:"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowAudioDialog",n),this.quickToolObj&&(this.quickToolObj.hideAudioQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-audio-focus"),this.quickToolObj.hideInlineQTBar())},n.prototype.checkAudioBack=function(e){"#text"===e.startContainer.nodeName&&0===e.startOffset&&!sf.base.isNullOrUndefined(e.startContainer.previousSibling)&&this.isAudioElem(e.startContainer.previousSibling)?this.deletedAud.push(e.startContainer.previousSibling):"#text"!==e.startContainer.nodeName&&!sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset-1])&&this.isAudioElem(e.startContainer.childNodes[e.startOffset-1])&&this.deletedAud.push(e.startContainer.childNodes[e.startOffset-1])},n.prototype.checkAudioDel=function(e){"#text"===e.startContainer.nodeName&&e.startOffset===e.startContainer.textContent.length&&!sf.base.isNullOrUndefined(e.startContainer.nextSibling)&&this.isAudioElem(e.startContainer.nextSibling)?this.deletedAud.push(e.startContainer.nextSibling):"#text"!==e.startContainer.nodeName&&!sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset])&&this.isAudioElem(e.startContainer.childNodes[e.startOffset])&&this.deletedAud.push(e.startContainer.childNodes[e.startOffset])},n.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=sf.base.createElement("div"),n=T(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(n)}},n.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideAudioQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)i&&1===t.which&&!sf.base.isNullOrUndefined(t.target)&&this.isAudioElem(t.target)&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var n,s=t.target;if(n=document.body.querySelector("#"+this.rteId+"_Audio_Quick_Popup").classList.contains("e-rte-pop"),this.isAudioElem(s)&&this.parent.quickToolbarModule){if(n)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),s),u()&&this.parent.observer.notify(o,e),s.querySelector("audio").style.outline="2px solid #4a90e2",this.showAudioQuickToolbar({args:t,type:"Audios",elements:[t.target]})}else this.hideAudioQuickToolbar()}}},n.prototype.showAudioQuickToolbar=function(e){var t=this,i="AudioLink";if("Audios"===e.type&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var n=e.args,s=e.elements,o=this.parent.element.getBoundingClientRect(),r=this.parent.getToolbarElement(),a=r?r.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(e.elements,(function(e,t){0===t&&(s=e)})),this.isAudioElem(s)&&(sf.base.addClass([s.querySelector("audio")],["e-audio-focus"]),s.querySelector("audio").style.outline="2px solid #4a90e2"),s&&!sf.base.closest(s,"a")&&(i="Audio"),this.isAudioElem(s)&&sf.base.addClass([s],["e-audio-focus"]);var l=this.parent.iframeSettings.enable?window.pageXOffset+o.left+n.clientX:n.pageX,h=this.parent.iframeSettings.enable?window.pageYOffset+o.top+a+n.clientY:n.pageY;this.quickToolObj&&(e.isNotify?setTimeout((function(){t.quickToolObj.showAudioQTBar(l,h,s,i)}),400):this.quickToolObj.showAudioQTBar(l,h,s,i))}},n.prototype.hideAudioQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-audio-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-audio-focus")],"e-audio-focus"),sf.base.isNullOrUndefined(this.audEle)||(this.audEle.style.outline=""),this.quickToolObj&&this.quickToolObj.hideAudioQTBar())},n.prototype.onToolbarAction=function(e){switch(this.quickToolObj&&(this.quickToolObj.hideAudioQTBar(),sf.base.removeClass([e.selectNode[0]],"e-audio-focus")),this.selectionObj=e,u()&&this.parent.observer.notify(r,{}),e.args.item.subCommand){case"AudioReplace":this.parent.observer.notify("insertAudio",e);break;case"AudioRemove":this.parent.observer.notify("delete",e)}},n.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},n.prototype.deleteAud=function(e,t){if(this.isAudioElem(e.selectNode[0])){var i={src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&this.quickToolObj.hideAudioQTBar(),sf.base.isNullOrUndefined(t)&&this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},n.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Audios"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),s={args:e,selectNode:n=[this.audEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"Inline":this.inline(s);break;case"Break":this.break(s)}this.quickToolObj&&(this.quickToolObj.hideAudioQTBar(),sf.base.removeClass([n[0]],"e-audio-focus"))}},n.prototype.inline=function(e){if("AUDIO"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},n.prototype.break=function(e){if("AUDIO"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},n.prototype.audioBrowseClick=function(){document.getElementById(this.rteId+"_audio").querySelector(".e-rte-audio-dialog .e-file-select-wrap button").click()},n.prototype.dialogOpened=function(){var e=sf.base.Browser.isDevice?document.getElementById(this.rteId+"_audio").querySelector(".e-audio-content"):this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-content");if(!sf.base.isNullOrUndefined(e)){var t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertAudio");this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.audioBrowseClick,this),!sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?e.querySelector("#"+this.rteId+"_insertAudio").focus():e.querySelector(".e-audio-url").focus()}},n.prototype.fileSelected=function(){this.inputUrl&&this.inputUrl.setAttribute("disabled","true")},n.prototype.fileUploadSuccess=function(e,t){this.inputUrl=this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-url"),sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)||(this.uploadUrl={url:e,selection:this.audUploadSave,fileName:t,selectParent:this.audUploadSelectedParent},this.inputUrl&&this.inputUrl.setAttribute("disabled","true"))},n.prototype.fileUploadComplete=function(e,t){if(this.inputUrl=this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-url"),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)){var i="Base64"===this.parent.insertAudioSettings.saveFormat?e:URL.createObjectURL(D(e));this.uploadUrl={url:i,selection:this.audUploadSave,fileName:t,selectParent:this.audUploadSelectedParent},this.inputUrl&&this.inputUrl.setAttribute("disabled","true")}},n.prototype.fileUploadChange=function(e,t){this.modifiedUrl=e,this.isStreamUrl=t},n.prototype.fileRemoving=function(){this.inputUrl.removeAttribute("disabled"),this.uploadUrl&&(this.uploadUrl.url="")},n.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel()),this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.audioBrowseClick)},n.prototype.insertAudioUrl=function(){sf.base.Browser.isDevice?this.inputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_Audio").querySelector(".e-rte-audio-dialog .e-audio-url"):this.inputUrl=this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-url");var e=this.inputUrl.value;if(this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(""!==e){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus();var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t)}var i="HTML"===this.parent.editorMode?e.split("/")[e.split("/").length-1]:"",n={cssClass:"Inline"===this.parent.insertAudioSettings.layoutOption?"e-audio-inline":"e-audio-break",url:e,selection:this.selectionObj.selection,fileName:i,selectParent:this.selectionObj.selectParent};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,n),this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null)}}else this.uploadUrl.cssClass="Inline"===this.parent.insertAudioSettings.layoutOption?"e-audio-inline":"e-audio-break",this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl)},n.prototype.showDialog=function(e,t,i,n,s){var o,r,a,l;e&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),l=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)):(r=i,a=n,l=s),"HTML"===this.parent.editorMode&&this.audioDialog({args:{item:{command:"Audios",subCommand:"Audio"},originalEvent:e?void 0:t,name:e?"showDialog":null},selectNode:a,selection:r,selectParent:l})},n.prototype.onIframeMouseDown=function(e){this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null),this.onDocumentClick(e)},n.prototype.onDocumentClick=function(e){var t=e.target;this.isAudioElem(t)&&(this.audEle=t.querySelector("audio"));var i=document.body.querySelector("#"+this.rteId+"_audio.e-rte-audio-dialog");!sf.base.isNullOrUndefined(i)&&(!sf.base.closest(t,"#"+this.rteId+"_audio")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!sf.base.closest(t,"#"+this.rteId+"_toolbar_Audio")&&!t.querySelector("#"+this.rteId+"_toolbar_Audio"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"))),this.parent.getEditPanel().querySelector(".e-audio-focus")&&(this.isAudioElem(t)||sf.base.isNullOrUndefined(this.audEle)?sf.base.isNullOrUndefined(this.prevSelectedAudEle)||this.prevSelectedAudEle===t||(this.prevSelectedAudEle.style.outline=""):this.audEle.style.outline="")},n.prototype.audioClick=function(e){sf.base.Browser.isDevice&&(this.isAudioElem(e.target)&&"A"===e.target.parentElement.tagName||this.isAudioElem(e.target)?(this.parent.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true")),this.isAudioElem(e.target)&&"A"===e.target.parentElement.tagName&&e.preventDefault()},n.prototype.onKeyDown=function(e){var t,i,n,s,o,r=e.args;this.deletedAud=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)this.isAudioElem(a[l])&&this.deletedAud.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var h=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&h?this.checkAudioBack(t):46===r.which&&"Delete"===r.code&&h&&this.checkAudioDel(t)}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action||37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode)&&this.isAudioElem(s[0])&&s[0].parentElement)){var d=s[0].parentElement.childNodes[0];this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),d,d,d.textContent.length,d.textContent.length),sf.base.removeClass([s[0]],"e-audio-focus"),this.quickToolObj.hideAudioQTBar(),sf.base.isNullOrUndefined(this.audEle)||(this.audEle.style.outline="")}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),(8===r.keyCode||46===r.keyCode)&&n&&this.isAudioElem(n[0])){r.preventDefault();var c={selectNode:n,selection:i,selectParent:s,args:{item:{command:"Audios",subCommand:"Remove"},originalEvent:r}};this.deleteAud(c,r.keyCode)}switch(r.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null);break;case"insert-audio":this.showDialog(!1,r,i,n,s),r.preventDefault()}},n.prototype.onKeyUp=function(e){if(!sf.base.isNullOrUndefined(this.deletedAud)&&this.deletedAud.length>0)for(var t=0;t<this.deletedAud.length;t++){var i={src:this.deletedAud[t].getAttribute("src")};this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},n.prototype.destroy=function(){this.prevSelectedAudEle=void 0,this.removeEventListener()},n}(),F=function(){function n(e){this.pageX=null,this.pageY=null,this.deletedVid=[],this.parent=e,this.rteId=e.element.id,this.addEventListener()}return n.prototype.addEventListener=function(){this.parent.observer.on(i,this.onKeyUp,this),this.parent.observer.on("docClick",this.docClick,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on("videoSize",this.videoSize,this),this.parent.observer.on("delete",this.deleteVid,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("insertVideo",this.videoDialog,this),this.parent.observer.on("resize",this.onWindowResize,this),this.parent.observer.on("dropDownSelect",this.alignmentSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("video-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showVideoQuickToolbar,this)},n.prototype.removeEventListener=function(){this.parent.observer.off(i,this.onKeyUp),this.parent.observer.off("docClick",this.docClick),this.parent.observer.off(t,this.destroy),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off("videoSize",this.videoSize),this.parent.observer.off("delete",this.deleteVid),this.parent.observer.off(e,this.afterRender),this.parent.observer.off("insertVideo",this.videoDialog),this.parent.observer.off("resize",this.onWindowResize),this.parent.observer.off("dropDownSelect",this.alignmentSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("video-toolbar-action",this.onToolbarAction),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showVideoQuickToolbar),sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.videoClick),this.parent.formatter.editorManager.observer.off(h,this.undoStack),this.parent.insertVideoSettings.resize&&(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),sf.base.EventHandler.remove(this.parent.getEditPanel(),"cut",this.onCutHandler)))},n.prototype.docClick=function(e){var t=e.args.target,i=sf.base.closest(t,"video"),n=!(!i||!this.parent.getEditPanel().contains(i));!t||"video"===t.tagName||n||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||this.hideVideoQuickToolbar()},n.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.videoClick,this),this.parent.insertVideoSettings.resize&&(sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.EventHandler.add(this.parent.getEditPanel(),"cut",this.onCutHandler,this))},n.prototype.isEmbedVidElem=function(e){return!!(e&&3!==e.nodeType&&"BR"!==e.nodeName&&e.classList&&e.classList.contains("e-video-clickelem")||"IFRAME"===e.nodeName)},n.prototype.videoDialog=function(e){if(this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null),this.uploadUrl={url:""},this.selectionObj={selfVideo:this,selection:e.selection,args:e.args,selectParent:e.selectParent},!sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)||"HTML"===this.parent.editorMode){var t=this.parent.iframeSettings.enable;if("HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(e.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.vidUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.vidUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}else this.vidUploadSave=e.selection,this.vidUploadSelectedParent=e.selectParent}var n;if(e.selectNode&&(e.selectNode[0]&&3!==e.selectNode[0].nodeType&&"BR"!==e.selectNode[0].nodeName&&e.selectNode[0].classList&&e.selectNode[0].classList.contains("e-video-clickelem")||"IFRAME"===e.selectNode[0].nodeName||"VIDEO"===e.selectNode[0].nodeName)){var s=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);n=e.selectNode[0].querySelector("source").src.match(s)?{mode:"Edit",url:e.selectNode[0].querySelector("source").src}:{mode:"Edit",url:""}}else n={mode:"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowVideoDialog",n),this.quickToolObj&&(this.quickToolObj.hideVideoQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-video-focus"),this.quickToolObj.hideInlineQTBar())},n.prototype.checkVideoBack=function(e){"#text"!==e.startContainer.nodeName||0!==e.startOffset||sf.base.isNullOrUndefined(e.startContainer.previousSibling)||"VIDEO"!==e.startContainer.previousSibling.nodeName&&!this.isEmbedVidElem(e.startContainer.previousSibling)?"#text"!==e.startContainer.nodeName&&!sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset-1])&&this.isEmbedVidElem(e.startContainer.childNodes[e.startOffset-1])&&this.deletedVid.push(e.startContainer.childNodes[e.startOffset-1]):this.deletedVid.push(e.startContainer.previousSibling)},n.prototype.checkVideoDel=function(e){"#text"!==e.startContainer.nodeName||e.startOffset!==e.startContainer.textContent.length||sf.base.isNullOrUndefined(e.startContainer.nextSibling)||"VIDEO"!==e.startContainer.nextSibling.nodeName&&!this.isEmbedVidElem(e.startContainer.nextSibling)?"#text"===e.startContainer.nodeName||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset])||"VIDEO"!==e.startContainer.childNodes[e.startOffset].nodeName&&!this.isEmbedVidElem(e.startContainer.childNodes[e.startOffset])||this.deletedVid.push(e.startContainer.childNodes[e.startOffset]):this.deletedVid.push(e.startContainer.nextSibling)},n.prototype.getDropRange=function(e,t){var i=this.parent.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),i);var n=this.parent.getDocument().elementFromPoint(e,t),s=n.childNodes.length>0?n.childNodes[0]:n,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(s,o),i.setEnd(s,o);else{var r=void 0;do{o++,i.setStart(s,o),i.setEnd(s,o+1),r=i.getBoundingClientRect()}while(r.left<e&&o<s.length-1)}return i},n.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=sf.base.createElement("div"),n=T(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(n);var s=i.querySelectorAll("video");if(i.querySelector(".e-vid-resize")&&s&&s.length>0){for(var o=0;o<s.length;o++)s[o].style.outline="";sf.base.detach(i.querySelector(".e-vid-resize")),this.parent.formatter.getUndoRedoStack()[t].text=i.innerHTML}}},n.prototype.videoResize=function(e){this.resizeBtnInit(),this.vidEle=e,sf.base.addClass([this.vidEle],"e-resize"),this.vidResizeDiv=sf.base.createElement("span",{className:"e-vid-resize",id:this.rteId+"_vidResize"}),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),sf.base.Browser.isDevice&&sf.base.addClass([this.vidResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.vidResizePos(e,this.vidResizeDiv),this.resizeVidDupPos(e),this.parent.getEditPanel().appendChild(this.vidResizeDiv),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this)},n.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},n.prototype.vidResizePos=function(e,t){var i=this.calcPos(e),n=i.top,s=i.left,o=0===e.width||sf.base.isNullOrUndefined(e.width)||"auto"===e.width?e.getBoundingClientRect().width:e.width,r=0===e.height||sf.base.isNullOrUndefined(e.height)||"auto"===e.height?e.getBoundingClientRect().height:e.height,a=sf.base.Browser.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,l=sf.base.Browser.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=s-a+"px",t.querySelector(".e-rte-botLeft").style.top=parseInt(r.toString(),10)-a+n+"px",t.querySelector(".e-rte-botRight").style.left=parseInt(o.toString(),10)-(a-l)+s+"px",t.querySelector(".e-rte-botRight").style.top=parseInt(r.toString(),10)-a+n+"px",t.querySelector(".e-rte-topRight").style.left=parseInt(o.toString(),10)-(a-l)+s+"px",t.querySelector(".e-rte-topRight").style.top=n-a+"px",t.querySelector(".e-rte-topLeft").style.left=s-a+"px",t.querySelector(".e-rte-topLeft").style.top=n-a+"px"},n.prototype.resizeVidDupPos=function(e){this.vidDupPos={width:""!==e.style.width?this.vidEle.style.width:0===e.width||sf.base.isNullOrUndefined(e.width)||"auto"===e.width?parseInt(getComputedStyle(e).width,10)+"px":e.width+"px",height:""!==e.style.height?this.vidEle.style.height:0===e.height||sf.base.isNullOrUndefined(e.height)||"auto"===e.height?parseInt(getComputedStyle(e).height,10)+"px":e.height+"px"}},n.prototype.calcPos=function(e){for(var t,i={top:0,left:0},n=e.ownerDocument,s=(e.offsetParent&&(e.offsetParent.classList.contains("e-video-clickelem")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?sf.base.closest(e,"#"+this.rteId+"_rte-edit-view"):e.offsetParent)||n.documentElement;s&&(s===n.body||s===n.documentElement)&&"static"===s.style.position;)s=s.parentNode;return s&&s!==e&&1===s.nodeType&&(i=s.getBoundingClientRect()),e&&1===e.nodeType&&"IFRAME"===e.tagName?{top:(t=e.getBoundingClientRect()).top-i.top,left:t.left-i.left}:{top:e.offsetTop,left:e.offsetLeft}},n.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},n.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},n.prototype.pixToPercent=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},n.prototype.vidDupMouseMove=function(e,t,i){parseInt(this.parent.insertVideoSettings.minWidth,10)>=parseInt(e,10)||!sf.base.isNullOrUndefined(this.parent.insertVideoSettings.maxWidth)&&parseInt(this.parent.insertVideoSettings.maxWidth,10)<=parseInt(e,10)||!this.parent.insertVideoSettings.resizeByPercent&&(parseInt(this.parent.insertVideoSettings.minHeight,10)>=parseInt(t,10)||parseInt(this.parent.insertVideoSettings.maxHeight,10)<=parseInt(t,10))||(this.vidEle.parentElement.style.cursor="pointer",this.setAspectRatio(this.vidEle,parseInt(e,10),parseInt(t,10),i),this.resizeVidDupPos(this.vidEle),this.vidResizePos(this.vidEle,this.vidResizeDiv),this.parent.setContentHeight("",!1))},n.prototype.setAspectRatio=function(e,t,i,n){var s=getComputedStyle(e);if(!sf.base.isNullOrUndefined(s)){var o=""!==s.width?s.width.match(/^\d+(\.\d*)?%$/g)?parseFloat(s.width):parseInt(s.width,10):""!==e.style.width?parseInt(e.style.width,10):e.width,r=""!==s.height?parseInt(s.height,10):""!==e.style.height?parseInt(e.style.height,10):e.height;o>r?(e.style.minWidth=0===parseInt(this.parent.insertVideoSettings.minWidth.toString(),10)?"200px":sf.base.formatUnit(this.parent.insertVideoSettings.minWidth),e.style.minHeight=0===parseInt(this.parent.insertVideoSettings.minHeight.toString(),10)?"90px":sf.base.formatUnit(this.parent.insertVideoSettings.minHeight),this.parent.insertVideoSettings.resizeByPercent?(e.style.width=this.pixToPercent(parseInt(o.toString(),10)/parseInt(r.toString(),10)*i,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""===e.style.width&&""!==e.style.height||""===s.width&&""!==s.height?e.style.height=i+"px":""!==e.style.width&&""===e.style.height||""!==s.width&&""===s.height?e.style.width=(parseInt(o.toString(),10)/parseInt(r.toString(),10)*i+parseInt(o.toString(),10)/parseInt(r.toString(),10)).toString()+"px":""!==e.style.width||""!==s.width?(e.style.width=parseInt(o.toString(),10)/parseInt(r.toString(),10)*i+"px",e.style.height=i+"px"):e.setAttribute("width",(parseInt(o.toString(),10)/parseInt(r.toString(),10)*i+parseInt(o.toString(),10)/parseInt(r.toString(),10)).toString())):r>o?this.parent.insertVideoSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width||""!==s.width?(e.style.width=t+"px",e.style.height=parseInt(r.toString(),10)/parseInt(o.toString(),10)*t+"px"):e.setAttribute("width",this.resizeBtnStat.botRight?(this.getPointX(n)-e.getBoundingClientRect().left).toString():t.toString()):this.parent.insertVideoSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):(e.style.width=t+"px",e.style.height=t+"px")}},n.prototype.getMaxWidth=function(){var e=this.parent.insertVideoSettings.maxWidth,t=this.parent.getEditPanel(),i=window.getComputedStyle(t),n=t.offsetWidth-(14+parseFloat(i.paddingLeft.split("px")[0])+parseFloat(i.paddingRight.split("px")[0])+parseFloat(i.marginLeft.split("px")[0])+parseFloat(i.marginRight.split("px")[0]));return sf.base.isNullOrUndefined(e)?n:e},n.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),this.vidEle&&this.vidResizeDiv&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&(sf.base.detach(this.vidResizeDiv),this.vidEle.style.outline="",this.vidResizeDiv=null,this.pageX=null,this.pageY=null)},n.prototype.removeResizeEle=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),sf.base.detach(this.parent.getEditPanel().querySelector(".e-vid-resize"))},n.prototype.onWindowResize=function(){sf.base.isNullOrUndefined(this.parent)||sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-vid-resize"))||this.cancelResizeAction()},n.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideVideoQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)!i||1!==t.which||sf.base.isNullOrUndefined(t.target)||"VIDEO"!==t.target.tagName&&!this.isEmbedVidElem(t.target)||(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var n,s=t.target;if(n=document.body.querySelector("#"+this.rteId+"_Video_Quick_Popup").classList.contains("e-rte-pop"),("VIDEO"===s.nodeName||this.isEmbedVidElem(s))&&this.parent.quickToolbarModule){if(n)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),s),u()&&this.parent.observer.notify(o,e),sf.base.addClass([this.isEmbedVidElem(s)?s.querySelector("iframe"):s],"e-video-focus"),this.showVideoQuickToolbar({args:t,type:"Videos",elements:[t.target]})}else this.hideVideoQuickToolbar()}}},n.prototype.showVideoQuickToolbar=function(e){var t=this,i="VideoLink";if("Videos"===e.type&&2!==e.args.detail&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var n=e.args,s=e.elements,o=this.parent.element.getBoundingClientRect(),r=this.parent.getToolbarElement(),a=r?r.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(e.elements,(function(e,t){0===t&&(s=e)})),s&&!sf.base.closest(s,"a")&&(i="Video"),("VIDEO"===s.tagName||this.isEmbedVidElem(s))&&sf.base.addClass([this.isEmbedVidElem(s)&&"IFRAME"!==s.tagName?s.querySelector("iframe"):s],["e-video-focus"]);var l=this.parent.iframeSettings.enable?window.pageXOffset+o.left+n.clientX:n.pageX,h=this.parent.iframeSettings.enable?window.pageYOffset+o.top+a+n.clientY:n.pageY;this.quickToolObj&&(e.isNotify?setTimeout((function(){t.quickToolObj.showVideoQTBar(l,h,s,i)}),400):this.quickToolObj.showVideoQTBar(l,h,s,i))}},n.prototype.hideVideoQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-video-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-video-focus")],"e-video-focus"),this.quickToolObj&&this.quickToolObj.hideVideoQTBar())},n.prototype.onToolbarAction=function(e){switch(this.quickToolObj&&(this.quickToolObj.hideVideoQTBar(),sf.base.removeClass([e.selectNode[0]],"e-video-focus")),this.selectionObj=e,u()&&this.parent.observer.notify(r,{}),e.args.item.subCommand){case"VideoReplace":this.parent.observer.notify("insertVideo",e);break;case"VideoRemove":this.parent.observer.notify("delete",e);break;case"VideoDimension":this.parent.observer.notify("videoSize",e)}},n.prototype.deleteVid=function(e,t){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var i={src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.parent.getEditPanel().querySelector(".e-vid-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&this.quickToolObj.hideVideoQTBar(),this.cancelResizeAction(),sf.base.isNullOrUndefined(t)&&this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},n.prototype.videoSize=function(e){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var t=e.selectNode[0],i={mode:"Dimension",width:"auto"===t.style.width.toString()||t.style.width.toString()?t.style.width.toString():parseInt(t.getClientRects()[0].width.toString()).toString(),height:"auto"===t.style.height.toString()||t.style.height.toString()?t.style.height.toString():parseInt(t.getClientRects()[0].height.toString()).toString(),maxWidth:this.getMaxWidth()};this.parent.dotNetRef.invokeMethodAsync("ShowVideoDialog",i)}},n.prototype.insertVideoSize=function(e,t){this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{width:e,height:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),this.vidResizeDiv&&this.vidResizePos(this.selectionObj.selectNode[0],this.vidResizeDiv),this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null)},n.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Videos"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),s={args:e,selectNode:n=this.isEmbedVidElem(n[0])?n:[this.vidEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"JustifyLeft":this.alignVideo(s,"JustifyLeft");break;case"JustifyCenter":this.alignVideo(s,"JustifyCenter");break;case"JustifyRight":this.alignVideo(s,"JustifyRight");break;case"Inline":this.inline(s);break;case"Break":this.break(s)}this.quickToolObj&&(this.quickToolObj.hideVideoQTBar(),sf.base.removeClass([n[0]],"e-video-focus")),this.cancelResizeAction()}},n.prototype.alignVideo=function(e,t){var i=e.args.item?e.args.item.subCommand:t;this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:i})},n.prototype.inline=function(e){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},n.prototype.break=function(e){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},n.prototype.videoBrowseClick=function(){document.getElementById(this.rteId+"_video").querySelector(".e-rte-video-dialog .e-file-select-wrap button").click()},n.prototype.dialogOpened=function(){var e=sf.base.Browser.isDevice?document.getElementById(this.rteId+"_video").querySelector(".e-video-content"):this.parent.element.querySelector(".e-rte-video-dialog .e-video-content");if(!sf.base.isNullOrUndefined(e)){var t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertVideo");this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.videoBrowseClick,this),sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)&&"HTML"!==this.parent.editorMode?e.querySelector(".e-video-url").focus():e.querySelector("#"+this.rteId+"_insertVideo").focus()}},n.prototype.fileSelected=function(){this.inputUrl&&this.inputUrl.setAttribute("disabled","true"),this.embedInputUrl&&this.embedInputUrl.setAttribute("disabled","true")},n.prototype.fileUploadSuccess=function(e,t){this.inputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-video-url"),this.embedInputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-embed-video-url"),sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)||(this.uploadUrl={url:e,selection:this.vidUploadSave,fileName:t,selectParent:this.vidUploadSelectedParent,width:{width:this.parent.insertVideoSettings.width,minWidth:this.parent.insertVideoSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertVideoSettings.height,minHeight:this.parent.insertVideoSettings.minHeight,maxHeight:this.parent.insertVideoSettings.maxHeight}},this.inputUrl&&this.inputUrl.setAttribute("disabled","true"),this.embedInputUrl&&this.embedInputUrl.setAttribute("disabled","true"))},n.prototype.fileUploadComplete=function(e,t){if(this.inputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-video-url"),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)){var i="Base64"===this.parent.insertVideoSettings.saveFormat?e:URL.createObjectURL(D(e));this.uploadUrl={url:i,selection:this.vidUploadSave,fileName:t,selectParent:this.vidUploadSelectedParent,width:{width:this.parent.insertVideoSettings.width,minWidth:this.parent.insertVideoSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertVideoSettings.height,minHeight:this.parent.insertVideoSettings.minHeight,maxHeight:this.parent.insertVideoSettings.maxHeight}},this.inputUrl&&this.inputUrl.setAttribute("disabled","true"),this.embedInputUrl&&this.embedInputUrl.setAttribute("disabled","true")}},n.prototype.fileUploadChange=function(e,t){this.modifiedUrl=e,this.isStreamUrl=t},n.prototype.fileRemoving=function(){this.inputUrl.removeAttribute("disabled"),this.embedInputUrl.removeAttribute("disabled"),this.uploadUrl&&(this.uploadUrl.url="")},n.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.videoBrowseClick)},n.prototype.insertVideoUrl=function(){var e,t;if(sf.base.Browser.isDevice?(this.inputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_video").querySelector(".e-rte-video-dialog .e-video-url"),this.embedInputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_video").querySelector(".e-rte-video-dialog .e-embed-video-url")):(this.inputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-video-url"),this.embedInputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-embed-video-url")),sf.base.isNullOrUndefined(this.inputUrl)||(e=this.inputUrl.value),sf.base.isNullOrUndefined(this.embedInputUrl)||(t=this.embedInputUrl.value),this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(!("HTML"!==this.parent.editorMode||sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}var n=sf.base.isNullOrUndefined(e)?t:e.split("/")[e.split("/").length-1],s={cssClass:"Inline"===this.parent.insertVideoSettings.layoutOption?"e-video-inline":"e-video-break",url:e,selection:this.selectionObj.selection,fileName:n,isEmbedUrl:!sf.base.isNullOrUndefined(t),selectParent:this.selectionObj.selectParent,width:{width:this.parent.insertVideoSettings.width,minWidth:this.parent.insertVideoSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertVideoSettings.height,minHeight:this.parent.insertVideoSettings.minHeight,maxHeight:this.parent.insertVideoSettings.maxHeight}};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,s),this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null)}}else this.uploadUrl.cssClass="Inline"===this.parent.insertVideoSettings.layoutOption?"e-video-inline":"e-video-break",this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null),this.uploadUrl.isEmbedUrl=!1,this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl),this.parent.getEditPanel().querySelector(".e-video-resize")&&(this.vidEle.style.outline="",this.removeResizeEle())},n.prototype.showDialog=function(e,t,i,n,s){var o,r,a,l;e&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),l=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)):(r=i,a=n,l=s),"HTML"===this.parent.editorMode&&this.videoDialog({args:{item:{command:"Videos",subCommand:"Video"},originalEvent:e?void 0:t,name:e?"showDialog":null},selectNode:a,selection:r,selectParent:l})},n.prototype.onCutHandler=function(){this.vidResizeDiv&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&this.cancelResizeAction()},n.prototype.onIframeMouseDown=function(e){this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null),this.onDocumentClick(e)},n.prototype.onDocumentClick=function(e){var t=e.target;("VIDEO"===t.nodeName||this.isEmbedVidElem(t))&&(this.vidEle=this.isEmbedVidElem(t)?t.querySelector("iframe"):t);var i=document.body.querySelector("#"+this.rteId+"_video.e-rte-video-dialog");!sf.base.isNullOrUndefined(i)&&(!sf.base.closest(t,"#"+this.rteId+"_video")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!sf.base.closest(t,"#"+this.rteId+"_toolbar_Video")&&!t.querySelector("#"+this.rteId+"_toolbar_Video"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"))),!this.isEmbedVidElem(e.target)&&this.vidResizeDiv&&!this.quickToolObj&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&this.cancelResizeAction(),this.parent.getEditPanel().querySelector(".e-vid-resize")&&("VIDEO"===t.tagName||this.isEmbedVidElem(t)||this.removeResizeEle(),"VIDEO"===t.tagName||this.isEmbedVidElem(t)||sf.base.isNullOrUndefined(this.vidEle)?sf.base.isNullOrUndefined(this.prevSelectedVidEle)||this.prevSelectedVidEle===("IFRAME"===t.tagName||"VIDEO"===t.tagName?t:t.querySelector("iframe"))||(this.prevSelectedVidEle.style.outline=""):this.vidEle.style.outline="")},n.prototype.videoClick=function(e){sf.base.Browser.isDevice&&("VIDEO"===e.target.tagName||this.isEmbedVidElem(e.target)?(this.parent.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true")),("VIDEO"===e.target.tagName||this.isEmbedVidElem(e.target))&&e.preventDefault()},n.prototype.onKeyDown=function(e){var t,i,n,s,o,r=e.args;this.deletedVid=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)"VIDEO"!==a[l].nodeName&&"IFRAME"!==a[l].nodeName||this.deletedVid.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var h=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&h?this.checkVideoBack(t):46===r.which&&"Delete"===r.code&&h&&this.checkVideoDel(t)}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),s=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action||37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode)&&("VIDEO"===s[0].tagName||this.isEmbedVidElem(s[0]))&&s[0].parentElement)){var d=s[0].parentElement.childNodes[0];this.parent.getEditPanel().querySelector(".e-vid-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),d,d,d.textContent.length,d.textContent.length),sf.base.removeClass([s[0]],"e-video-focus"),this.quickToolObj.hideVideoQTBar(),sf.base.isNullOrUndefined(this.vidEle)||(this.vidEle.style.outline="")}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),8===r.keyCode||46===r.keyCode){if(n&&("VIDEO"===n[0].nodeName||this.isEmbedVidElem(n[0]))){r.preventDefault();var c={selectNode:n,selection:i,selectParent:s,args:{item:{command:"Videos",subCommand:"Remove"},originalEvent:r}};this.deleteVid(c,r.keyCode)}this.parent.getEditPanel().querySelector(".e-vid-resize")&&this.removeResizeEle()}switch(r.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null);break;case"insert-video":this.showDialog(!1,r,i,n,s),r.preventDefault()}},n.prototype.onKeyUp=function(e){if(!sf.base.isNullOrUndefined(this.deletedVid)&&this.deletedVid.length>0)for(var t=0;t<this.deletedVid.length;t++){var i={src:this.deletedVid[t].getAttribute("src")};this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},n.prototype.resizeStart=function(e,t){var i=this;if(!this.parent.readonly){var n=t||(this.isEmbedVidElem(e.target)?e.target.querySelector("iframe"):e.target);if(this.prevSelectedVidEle=this.vidEle,"VIDEO"===n.tagName||"IFRAME"===n.tagName){this.parent.defaultResize(e,!1);var s=n;this.vidResizeDiv&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&sf.base.detach(this.vidResizeDiv),this.videoResize(s)}if(n.classList.contains("e-rte-videoboxmark")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.hideVideoQTBar(),n.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),n.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),n.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),n.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),sf.base.Browser.isDevice&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&!this.vidResizeDiv.classList.contains("e-mob-span"))sf.base.addClass([this.vidResizeDiv],"e-mob-span");else{this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Videos"}).then((function(e){e.cancel&&i.cancelResizeAction()}))}sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)}}},n.prototype.resizing=function(e){this.vidEle.offsetWidth>=this.getMaxWidth()&&(this.vidEle.style.maxHeight=this.vidEle.offsetHeight+"px");var t=this.getPointX(e),i=this.getPointY(e),n=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,s=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(i-this.pageY):i-this.pageY,o=parseInt(this.vidDupPos.width,10)+n,r=parseInt(this.vidDupPos.height,10)+s;this.pageX=t,this.pageY=i,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.vidDupMouseMove(o+"px",r+"px",e)},n.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.vidEle.parentElement.style.cursor="auto",sf.base.Browser.isDevice&&sf.base.removeClass([e.target.parentElement],"e-mob-span");this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Videos"}),this.parent.formatter.editorManager.observer.on(h,this.undoStack,this),this.parent.formatter.saveData()},n.prototype.destroy=function(){this.prevSelectedVidEle=void 0,this.removeEventListener()},n}(),Y=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("xhtmlValidation",this.enableXhtmlValidation,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("xhtmlValidation",this.enableXhtmlValidation),this.parent.observer.off(t,this.removeEventListener)},e.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(sf.base.isNullOrUndefined(this.parent.inputElement)?this.currentElement=this.parent.element:this.currentElement=this.parent.inputElement,this.clean(this.currentElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.currentElement.innerHTML=this.selfEncloseValidation(this.currentElement.innerHTML))},e.prototype.selfEncloseValidation=function(e){var t;e=e.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>").replace(/ /g," ");for(var i=[],n=[],s=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi],o=0;o<s.length;o++){for(t=s[o].exec(e);null!==t;)i.push(t[0].toString()),t=s[o].exec(e);n=i.slice(0);for(var r=0;r<i.length;r++)-1!==i[r].indexOf("/")&&i[r].lastIndexOf("/")===i[r].length-2||(i[r]=i[r].substr(0,i[r].length-1)+" /"+i[r].substr(i[r].length-1,i[r].length));for(var a=0;a<=i.length-1;a++)e=e.replace(n[a],i[a])}return e},e.prototype.AddRootElement=function(){if(1===this.currentElement.childNodes.length&&"DIV"!==this.currentElement.firstChild.nodeName||this.currentElement.childNodes.length>1){for(var e=document.createElement("div");this.currentElement.childNodes.length>0;)e.appendChild(this.currentElement.childNodes[0]);this.currentElement.appendChild(e)}},e.prototype.clean=function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];8===i.nodeType||"V:IMAGE"===i.nodeName?(e.removeChild(i),t--):1===i.nodeType&&this.clean(i)}return this.currentElement.innerHTML},e.prototype.ImageTags=function(){for(var e=this.currentElement.querySelectorAll("IMG"),t=e.length-1;t>=0;t--){if(!e[t].hasAttribute("alt"))e[t].setAttribute("alt","")}},e.prototype.removeTags=function(){for(var e=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],t=0;t<e.length;t++)this.RemoveElementNode(e[t][0],e[t][1])},e.prototype.RemoveElementNode=function(e,t){for(var i=this.currentElement.querySelectorAll(t),n=0;n<i.length;n++)for(var s=i[n].querySelectorAll(e),o=s.length;o>0;o--)sf.base.detach(s[o-1])},e.prototype.RemoveUnsupported=function(){for(var e=this.currentElement.querySelectorAll("u"),t=e.length-1;t>=0;t--){var i=document.createElement("span");i.style.textDecoration="underline",i.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(i,e[t]),sf.base.detach(e[t])}var n=this.currentElement.querySelectorAll("strong");for(t=n.length-1;t>=0;t--){var s=document.createElement("b");s.innerHTML=n[t].innerHTML,n[t].parentNode.insertBefore(s,n[t]),sf.base.detach(n[t])}var o=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"];for(t=0;t<=o.length;t++)this.RemoveAttributeByName(o[t])},e.prototype.RemoveAttributeByName=function(e){if(null!==this.currentElement.firstChild&&3!==this.currentElement.firstChild.nodeType)for(var t=0;t<this.currentElement.childNodes.length;t++){var i=this.currentElement.childNodes[t];if(3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&(i.hasAttribute(e)&&i.removeAttribute(e),i.hasChildNodes()))for(var n=0;n<i.childNodes.length;n++){var s=i.childNodes[n];if(3!==s.nodeType&&"TABLE"!==s.nodeName&&"TBODY"!==s.nodeName&&"THEAD"!==s.nodeName&&"TH"!==s.nodeName&&"TR"!==s.nodeName&&"TD"!==s.nodeName&&s.hasAttribute(e)&&!s.classList.contains("e-mention-chip")&&s.removeAttribute(e),s.hasChildNodes())for(var o=0;o<s.childNodes.length;o++)3!==s.childNodes[o].nodeType&&"TABLE"!==s.childNodes[o].nodeName&&"TBODY"!==s.childNodes[o].nodeName&&"THEAD"!==s.childNodes[o].nodeName&&"TH"!==s.childNodes[o].nodeName&&"TR"!==s.childNodes[o].nodeName&&"TD"!==s.childNodes[o].nodeName&&s.childNodes[o].hasAttribute(e)&&s.childNodes[o].removeAttribute(e)}}},e}(),q=function(){function e(){}return e.prototype.getFormattedNode=function(e,t,i){var n=this.getFormatParent(e,t,i);return null!==n&&n!==i?n:null},e.prototype.getFormatParent=function(e,t,i){do{e=e.parentNode}while(e&&e!==i&&!this.isFormattedNode(e,t));return e},e.prototype.isFormattedNode=function(t,i){switch(i){case"bold":return e.isBold(t);case"italic":return e.isItalic(t);case"underline":return e.isUnderline(t);case"strikethrough":return e.isStrikethrough(t);case"superscript":return e.isSuperscript(t);case"subscript":return e.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},e.isBold=function(e){return-1!==["strong","b"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"bold"!==e.style.fontWeight)},e.isItalic=function(e){return-1!==["em","i"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"italic"!==e.style.fontStyle)},e.isUnderline=function(e){return-1!==["u"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"underline"!==e.style.textDecoration&&"underline"!==e.style.textDecorationLine)},e.isStrikethrough=function(e){return-1!==["del","strike"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"line-through"!==e.style.textDecoration&&"line-through"!==e.style.textDecorationLine)},e.isSuperscript=function(e){return-1!==["sup"].indexOf(e.nodeName.toLowerCase())},e.isSubscript=function(e){return-1!==["sub"].indexOf(e.nodeName.toLowerCase())},e.prototype.isFontColor=function(t){var i=t.style&&t.style.color;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isBackgroundColor=function(t){var i=t.style&&t.style.backgroundColor;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontSize=function(t){var i=t.style&&t.style.fontSize;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontName=function(t){var i=t.style&&t.style.fontFamily;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","font","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var","del"],e}(),_="INSERT-IMAGE",W=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video","body"],V=["td","th"],X=["table","tbody","td","tfoot","th","thead","tr"],Q=["area","base","br","embed","hr","img","input","param","source","track","wbr","iframe","td","table"],Z=function(){function e(){this.startNodeName=[],this.endNodeName=[]}return e.prototype.saveInstance=function(e,t){return this.range=e.cloneRange(),this.rootNode=this.documentFromRange(e),this.body=t,this.startContainer=this.getNodeArray(e.startContainer,!0),this.endContainer=this.getNodeArray(e.endContainer,!1),this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.html=this.body.innerHTML,this},e.prototype.documentFromRange=function(e){return 9===e.startContainer.nodeType?e.startContainer:e.startContainer.ownerDocument},e.prototype.getRange=function(e){var t=this.get(e),i=t&&t.rangeCount>0?t.getRangeAt(t.rangeCount-1):e.createRange();return i.startContainer!==e||i.endContainer!==e||i.startOffset||i.endOffset||(i.setStart(e.body,0),i.collapse(!0)),i},e.prototype.get=function(e){return e.defaultView.getSelection()},e.prototype.save=function(e,t){return e=e?e.cloneRange():this.getRange(t),this.saveInstance(e,t.body)},e.prototype.getIndex=function(e){var t=0;if(e=e.previousSibling||"BR"!==e.tagName?e.previousSibling:e)for(e.nodeType;e;null)t++,e.nodeType,e=e.previousSibling;return t},e.prototype.isChildNode=function(e,t){for(var i=0;i<t.childNodes.length;i++)if(e.indexOf(t.childNodes[i])>-1)return!0;return!1},e.prototype.getNode=function(e,t,i){return t!==e||3!==e.nodeType&&e.firstChild&&-1===i.indexOf(e.firstChild)&&!this.isChildNode(i,e)?-1===i.indexOf(e.firstChild)&&e.firstChild&&!this.isChildNode(i,e)?e.firstChild:e.nextSibling?e.nextSibling:e.parentNode?e.parentNode:null:null},e.prototype.getNodeCollection=function(e){var t=e.startContainer.childNodes[e.startOffset]||e.startContainer,i=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if((t===i||"BR"===t.nodeName&&t===e.endContainer.childNodes[e.endOffset])&&0===t.childNodes.length)return[t];if(e.startOffset===e.endOffset&&0!==e.startOffset&&"PRE"===e.startContainer.nodeName)return["BR"===t.nodeName||"#text"===t.nodeName?t:t.childNodes[0]];var n=[];do{-1===n.indexOf(t)&&n.push(t),t=this.getNode(t,i,n)}while(t);return n},e.prototype.getParentNodeCollection=function(e){return this.getParentNodes(this.getNodeCollection(e),e)},e.prototype.getParentNodes=function(e,t){e=e.reverse();for(var i=0;i<e.length;i++)-1!==e.indexOf(e[i].parentNode)||3===e[i].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(e.splice(i,1),i--):3===e[i].nodeType&&(e[i]=e[i].parentNode);return e},e.prototype.getSelectionNodeCollection=function(e){return this.getSelectionNodes(this.getNodeCollection(e))},e.prototype.getSelectionNodeCollectionBr=function(e){return this.getSelectionNodesBr(this.getNodeCollection(e))},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getSelectionNodesBr=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)"BR"!==e[i].nodeName&&(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getInsertNodeCollection=function(e){return this.getInsertNodes(this.getNodeCollection(e))},e.prototype.getInsertNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)(0!==e[t].childNodes.length&&3!==e[t].nodeType||3===e[t].nodeType&&""===e[t].textContent)&&(e.splice(t,1),t--);return e.reverse()},e.prototype.getNodeArray=function(e,t,i){var n=[];for(t?this.startNodeName=[]:this.endNodeName=[];e!==(i||this.rootNode)&&!sf.base.isNullOrUndefined(e);null)t?this.startNodeName.push(e.nodeName.toLowerCase()):this.endNodeName.push(e.nodeName.toLowerCase()),n.push(this.getIndex(e)),e=e.parentNode;return n},e.prototype.setRangePoint=function(e,t,i,n){for(var s=this.rootNode,o=i.length,r=n;o--;null)s=s&&s.childNodes[i[o]];return s&&r>=0&&"html"!==s.nodeName&&(3===s.nodeType&&"&nbsp;"===s.nodeValue.replace(/\u00a0/g,"&nbsp;")&&(r=s.textContent.length),e[t?"setStart":"setEnd"](s,r)),e},e.prototype.restore=function(){var e=this.range.cloneRange();return e=this.setRangePoint(e,!0,this.startContainer,this.startOffset),e=this.setRangePoint(e,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,e),e},e.prototype.selectRange=function(e,t){this.setRange(e,t),this.save(t,e)},e.prototype.setRange=function(e,t){var i=this.get(e);i.removeAllRanges(),i.addRange(t)},e.prototype.setSelectionText=function(e,t,i,n,s){var o=e.createRange();o.setStart(t,n),o.setEnd(i,s),this.setRange(e,o)},e.prototype.setSelectionContents=function(e,t){var i=e.createRange();i.selectNode(t),this.setRange(e,i)},e.prototype.setSelectionNode=function(e,t){var i=e.createRange();i.selectNodeContents(t),this.setRange(e,i)},e.prototype.getSelectedNodes=function(e){return this.getNodeCollection(this.getRange(e))},e.prototype.Clear=function(e){this.get(e).removeAllRanges()},e.prototype.insertParentNode=function(e,t,i){i.surroundContents(t),this.selectRange(e,i)},e.prototype.setCursorPoint=function(e,t,i){var n=e.createRange(),s=e.defaultView.getSelection();n.setStart(t,i),n.collapse(!0),s.removeAllRanges(),s.addRange(n)},e}(),G={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,numberFormatList:!1,bulletFormatList:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},K=function(){function e(){}return e.get=function(e,t,i,n,s,o){for(var r=JSON.parse(JSON.stringify(G)),a=JSON.parse(JSON.stringify(G)),l=new Z,h=l.getRange(e),d=o?[o]:h.collapsed?l.getNodeCollection(h):l.getSelectionNodeCollectionBr(h),c=d.length,p=!1,u=0;u<d.length;u++){for(;3===d[u].nodeType&&3===h.startContainer.nodeType&&d[u].parentNode&&d[u].parentNode.lastElementChild&&"BR"!==d[u].parentNode.lastElementChild.nodeName&&0===this.getImmediateBlockNode(d[u].parentNode).textContent.replace(/\u200B/g,"").length&&0===h.startContainer.textContent.replace(/\u200B/g,"").length&&0===l.get(e).toString().replace(/\u200B/g,"").length;)d[u]=d[u].parentNode.lastElementChild.firstChild,p=!0;p&&d[u]&&(l.setCursorPoint(e,d[u],d[u].textContent.length),p=!1),("BR"!==d[u].nodeName&&3!==d[u].nodeType||c>1&&3===d[u].nodeType&&""===d[u].textContent.trim())&&(d.splice(u,1),u--)}for(u=0;u<d.length;u++)r=this.getFormatParent(e,r,d[u],t,i,n,s),(0===u&&r.bold||!r.bold)&&(a.bold=r.bold),(0===u&&r.insertcode||!r.insertcode)&&(a.insertcode=r.insertcode),(0===u&&r.italic||!r.italic)&&(a.italic=r.italic),(0===u&&r.underline||!r.underline)&&(a.underline=r.underline),(0===u&&r.strikethrough||!r.strikethrough)&&(a.strikethrough=r.strikethrough),(0===u&&r.superscript||!r.superscript)&&(a.superscript=r.superscript),(0===u&&r.subscript||!r.subscript)&&(a.subscript=r.subscript),(0===u&&r.fontcolor||!r.fontcolor)&&(a.fontcolor=r.fontcolor),0===u&&r.fontname?a.fontname=r.fontname:a.fontname=r.fontname===a.fontname?r.fontname:"empty",0===u&&r.fontsize?a.fontsize=r.fontsize:a.fontsize=r.fontsize===a.fontsize?r.fontsize:"empty",(0===u&&r.backgroundcolor||!r.backgroundcolor)&&(a.backgroundcolor=r.backgroundcolor),(0===u&&r.orderedlist||!r.orderedlist)&&(a.orderedlist=r.orderedlist),(0===u&&r.unorderedlist||!r.unorderedlist)&&(a.unorderedlist=r.unorderedlist),(0===u&&r.alignments||!r.alignments)&&(a.alignments=r.alignments),0===u&&r.formats?a.formats=r.formats:a.formats=r.formats===a.formats?r.formats:"empty",(0===u&&r.createlink||!r.createlink)&&(a.createlink=r.createlink),(0===u&&r.numberFormatList||!r.numberFormatList)&&(a.numberFormatList=r.numberFormatList),(0===u&&r.bulletFormatList||!r.bulletFormatList)&&(a.bulletFormatList=r.bulletFormatList),r=JSON.parse(JSON.stringify(G));return a},e.getImmediateBlockNode=function(e){do{e=e.parentNode}while(e&&W.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.getFormatParent=function(e,t,i,n,s,o,r){if(n.contains(i)||3===i.nodeType&&3!==n.nodeType&&n.contains(i.parentNode))do{t=this.isFormattedNode(e,t,i,s,o,r),i=i.parentNode}while(i&&i!==n);return t},e.isFormattedNode=function(e,t,i,n,s,o){return t.bold||(t.bold=q.isBold(i)),t.italic||(t.italic=q.isItalic(i)),t.underline||(t.underline=q.isUnderline(i)),t.strikethrough||(t.strikethrough=q.isStrikethrough(i)),t.superscript||(t.superscript=q.isSuperscript(i)),t.subscript||(t.subscript=q.isSubscript(i)),t.fontcolor||(t.fontcolor=this.isFontColor(e,i)),t.fontname||(t.fontname=this.isFontName(e,i,o)),t.fontsize||(t.fontsize=this.isFontSize(e,i,s)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(i)),t.orderedlist||(t.orderedlist=this.isOrderedList(i)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(i)),t.alignments||(t.alignments=this.isAlignment(i)),t.formats||(t.formats=this.isFormats(i,n),"pre"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(i)),t.numberFormatList||(t.numberFormatList=this.isNumberFormatList(i)),t.bulletFormatList||(t.bulletFormatList=this.isBulletFormatList(i)),t},e.isFontColor=function(e,t){var i=t.style&&t.style.color;return null!=i&&""!==i||3===t.nodeType||(i=this.getComputedStyle(e,t,"color")),null!==i&&""!==i&&void 0!==i?i:null},e.isLink=function(e){return"a"===e.nodeName.toLocaleLowerCase()},e.isBackgroundColor=function(e){var t=e.style&&e.style.backgroundColor;return null!==t&&""!==t&&void 0!==t?t:null},e.isFontSize=function(e,t,i){var n=t.style&&t.style.fontSize;return null!=n&&""!==n||3===t.nodeType||!t.parentElement.classList.contains("e-content")||(n=this.getComputedStyle(e,t,"font-size")),null!==n&&""!==n&&void 0!==n&&(null==i||i.indexOf(n)>-1)?n:null},e.isFontName=function(e,t,i){var n=t.style&&t.style.fontFamily;null!=n&&""!==n||3===t.nodeType||(n=this.getComputedStyle(e,t,"font-family"));var s=null;return null!==n&&""!==n&&void 0!==n&&(null==i||i.filter((function(e,t){var i=new RegExp(n,"i");(e.replace(/"/g,"").replace(/ /g,"").toLowerCase()===n.replace(/"/g,"").replace(/ /g,"").toLowerCase()||e.split(",")[0]&&e.split(",")[0].search(i)>-1)&&(s=t)}))&&null!==s)?null!==s?i[s]:n.replace(/"/g,""):null},e.isOrderedList=function(e){return"ol"===e.nodeName.toLocaleLowerCase()},e.isUnorderedList=function(e){return"ul"===e.nodeName.toLocaleLowerCase()},e.isAlignment=function(e){var t=e.style&&e.style.textAlign;return"left"===t?"justifyleft":"center"===t?"justifycenter":"right"===t?"justifyright":"justify"===t?"justifyfull":null},e.isFormats=function(e,t){return null==t&&W.indexOf(e.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(e.nodeName.toLocaleLowerCase())>-1?e.nodeName.toLocaleLowerCase():null},e.getComputedStyle=function(e,t,i){return e.defaultView.getComputedStyle(t,null).getPropertyValue(i)},e.isNumberFormatList=function(e){var t=e.style&&e.style.listStyleType;return"lower-alpha"===t?"Lower Alpha":"number"===t?"Number":"upper-alpha"===t?"Upper Alpha":"lower-roman"===t?"Lower Roman":"upper-roman"===t?"Upper Roman":"lower-greek"===t?"Lower Greek":"none"===t?"None":!!this.isOrderedList(e)||null},e.isBulletFormatList=function(e){var t=e.style&&e.style.listStyleType;return"circle"===t?"Circle":"square"===t?"Square":"none"===t?"None":"disc"===t?"Disc":!!this.isUnorderedList(e)||null},e}(),J=function(){function e(e){this.parent=e,this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,numberFormatList:!1,bulletFormatList:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("toolbar-refresh",this.onRefreshHandler,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("toolbar-refresh",this.onRefreshHandler),this.parent.observer.off(t,this.removeEventListener)},e.prototype.onRefreshHandler=function(e){var t=this;if(!this.parent.readonly){var i=[],n=[],s=[];this.parent.fontSize.items.forEach((function(e){i.push(e.value)})),this.parent.fontFamily.items.forEach((function(e){n.push(e.value)})),this.parent.format.items.forEach((function(e){s.push(e.value.toLocaleLowerCase())})),this.toolbarStatus=K.get(this.parent.getDocument(),this.parent.getEditPanel(),s,i,n,e.documentNode);var o=JSON.stringify(this.toolbarStatus);this.parent.inlineMode.enable?setTimeout((function(){document.querySelector("#"+t.parent.id+"_Inline_Quick_Popup")&&document.querySelector("#"+t.parent.id+"_Inline_Quick_Popup").classList.contains("e-rte-pop")&&(t.parent.observer.notify("toolbar-updated",t.toolbarStatus),JSON.stringify(t.prevToolbarStatus)!==o&&(t.parent.observer.notify("updateTbItemsStatus",{html:JSON.parse(o),markdown:null}),t.prevToolbarStatus=JSON.parse(o)))}),100):(this.parent.observer.notify("toolbar-updated",this.toolbarStatus),JSON.stringify(this.prevToolbarStatus)!==o&&(this.parent.observer.notify("updateTbItemsStatus",{html:JSON.parse(o),markdown:null}),this.prevToolbarStatus=JSON.parse(o)))}},e}(),$=function(){return($=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},ee=function(){function e(){}return e.prototype.process=function(e,t,i,n){var s,o=this,r=e.getDocument().getSelection(),a=r.rangeCount>0?r.getRangeAt(r.rangeCount-1):null,l=!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.cssClass)&&"e-video-inline"!==n.cssClass;if("HTML"===e.editorMode&&(sf.base.isNullOrUndefined(t)||l||(sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.name)||!sf.base.isNullOrUndefined(t.name)&&"showDialog"!==t.name)&&(s=this.editorManager.nodeSelection.save(a,e.getDocument()))),sf.base.isNullOrUndefined(t)||!t.item.command||"Table"===t.item.command||"Actions"===t.item.command||"Links"===t.item.command||"Images"===t.item.command||"Audios"===t.item.command||"Videos"===t.item.command||!a||e.getEditPanel().contains(this.getAncestorNode(a.commonAncestorContainer))||e.getEditPanel()===a.commonAncestorContainer||e.getPanel()===a.commonAncestorContainer){if(sf.base.isNullOrUndefined(t)){var h=i.action;t={};var d={originalEvent:i,cancel:!1,requestType:h||i.key+"Key"};if(sf.base.extend(t,t,d,!0),delete t.item,t.originalEvent=$({},t.originalEvent,{target:null}),"tab"!==h&&"enter"!==h&&"space"!==h&&"escape"!==h&&("Markdown"===e.editorMode&&"insert-table"===h&&(n={headingText:e.localeData.headingText,colText:e.localeData.colText}),e.actionBeginEnabled&&e.dotNetRef.invokeMethodAsync("ActionBeginEvent",t).then((function(e){t.cancel&&("paste"!==h&&"cut"!==h&&"copy"!==h||i.preventDefault())}))),!t.cancel){var c=!!sf.base.isNullOrUndefined(e.tableModule)||!!e.tableModule&&e.tableModule.ensureInsideTableList;(9===i.which&&c||9!==i.which)&&(13===i.which&&"HTML"===e.editorMode&&(n={enterAction:e.enterKey}),this.editorManager.observer.notify("keydown"===i.type?"keydown":"keyup",{event:i,callBack:this.onSuccess.bind(this,e),value:n,enterAction:e.enterKey}))}}else!sf.base.isNullOrUndefined(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&"Font"!==t.item.command||("FontName"===t.item.subCommand||"FontSize"===t.item.subCommand)&&"dropDownSelect"===t.name||("BackgroundColor"===t.item.subCommand||"FontColor"===t.item.subCommand)&&"colorPickerChanged"===t.name)&&(t.originalEvent=$({},t.originalEvent,{target:null}),sf.base.extend(t,t,{requestType:t.item.subCommand,cancel:!1},!0),e.actionBeginEnabled?e.dotNetRef.invokeMethodAsync("ActionBeginEvent",t).then((function(r){r.cancel||o.actionBeginCallBack(e,t,s,i,n)})):this.actionBeginCallBack(e,t,s,i,n));(sf.base.isNullOrUndefined(i)||i&&"copy"!==i.action)&&this.enableUndo(e)}},e.prototype.getAncestorNode=function(e){return e=3===e.nodeType?e.parentNode:e},e.prototype.onKeyHandler=function(e,t){var i=this;this.editorManager.observer.notify("keyup",{event:t,callBack:function(){e.observer.notify("content-changed",{}),i.enableUndo(e)}})},e.prototype.onSuccess=function(e,t){var i=this;e.observer.notify("content-changed",{}),t&&(sf.base.isNullOrUndefined(t.event)||"copy"!==t.event.action)&&("Paste"===t.requestType?(e.observer.notify("execCommandCallBack",t),this.enableUndo(e)):(this.enableUndo(e),e.observer.notify("execCommandCallBack",t))),t.event=$({},t.event,{target:null}),this.successArgs=$({},t),delete t.elements,delete t.range,e.actionCompleteEnabled?e.dotNetRef.invokeMethodAsync("ActionCompleteEvent",t).then((function(t){i.actionCompleteCallBack(e,t)})):this.actionCompleteCallBack(e,t),"VideosPlayPause"===t.requestType&&e.observer.notify("editAreaClick",{args:event})},e.prototype.saveData=function(e){this.editorManager.undoRedoManager.saveData(e)},e.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},e.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},e.prototype.enableUndo=function(e){if(e.undoRedoStatus){var t=this.getUndoStatus();!e.inlineMode.enable||sf.base.Browser.isDevice&&!u()?e.toolbarModule&&e.getDocument().body.contains(e.element)&&e.dotNetRef.invokeMethodAsync("UpdateUndoRedoStatus",t):e.dotNetRef.invokeMethodAsync("UpdateUndoRedoStatus",t)}},e.prototype.actionBeginCallBack=function(e,t,i,n,s){0===this.getUndoRedoStack().length&&"Links"!==t.item.command&&"Images"!==t.item.command&&"Audios"!==t.item.command&&"Videos"!==t.item.command&&this.saveData(),e.isBlur=!1,e.getEditPanel().focus();var o=!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(s.cssClass)&&"e-video-inline"!==s.cssClass;"HTML"!==e.editorMode||o||!sf.base.isNullOrUndefined(t.selectType)&&(sf.base.isNullOrUndefined(t.selectType)||"showDialog"===t.selectType)||sf.base.isNullOrUndefined(i)||i.restore();var r=t.item.subCommand.toLocaleLowerCase();"paste"===r||"cut"===r||"copy"===r?e.clipboardAction(r,n):(this.editorManager.observer.notify(h,{subCommand:t.item.subCommand}),this.editorManager.execCommand(t.item.command,t.item.subCommand,n,this.onSuccess.bind(this,e),t.item.value,"Pre"===t.item.subCommand&&"dropDownSelect"===t.name?{name:t.name}:s,"# iframe",e.enterKey))},e.prototype.actionCompleteCallBack=function(e,t){if(e.setPlaceHolder(),"Images"===t.requestType||"Audios"===t.requestType||"Videos"===t.requestType||"Links"===t.requestType&&"HTML"===t.editorMode){var i=this.successArgs;if("Links"===t.requestType&&t.event&&"keydown"===t.event.type&&32===t.event.keyCode)return;e.observer.notify("insertCompleted",{args:i.event,type:t.requestType,isNotify:!0,elements:i.elements})}e.autoResize()},e}(),te={h6:"###### ",h5:"##### ",h4:"#### ",h3:"### ",h2:"## ",h1:"# ",blockquote:"> ",pre:"```\n",p:""},ie={Bold:"**",Italic:"*",StrikeThrough:"~~",InlineCode:"`",SubScript:"<sub>",SuperScript:"<sup>",UpperCase:"A-Z",LowerCase:"a-z"},ne={OL:"1. ",UL:"- "},se={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-audio":"ctrl+shift+a","insert-video":"ctrl+alt+v","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46","format-copy":"alt+shift+c","format-paste":"alt+shift+v"},oe={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=","full-screen":"ctrl+shift+f","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o"},re={b:["strong"],strong:["b"],i:["emp","cite"],emp:["i","cite"],cite:["i","emp"]},ae=["BR","IMG"],le="e-editor-select-start",he="e-editor-select-end",de=function(){function e(e,t){this.parent=e,this.nodeSelection=new Z,this.currentDocument=t}return e.prototype.contents=function(e){return e&&"IFRAME"!==e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&W.indexOf(e.tagName.toLowerCase())>=0},e.prototype.isLink=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()},e.prototype.blockParentNode=function(e){for(;e&&e.parentNode!==this.parent&&(!e.parentNode||!this.hasClass(e.parentNode,"e-node-inner"));null)if(e=e.parentNode,this.isBlockNode(e))return e;return e},e.prototype.rawAttributes=function(e){var t={},i=e.attributes;if(i.length>0)for(var n=0;n<i.length;n++){var s=i[n];t[s.nodeName]=s.value}return t},e.prototype.attributes=function(e){if(!e)return"";for(var t="",i=this.rawAttributes(e),n=Object.keys(i).sort(),s=0;s<n.length;s++){var o=n[s],r=i[""+o];r.indexOf("'")<0&&r.indexOf('"')>=0?t+=" "+o+"='"+r+"'":r.indexOf('"')>=0&&r.indexOf("'")>=0?t+=" "+o+'="'+(r=r.replace(/"/g,"&quot;"))+'"':t+=" "+o+'="'+r+'"'}return t},e.prototype.clearAttributes=function(e){for(var t=e.attributes,i=t.length-1;i>=0;i--){var n=t[i];e.removeAttribute(n.nodeName)}},e.prototype.openTagString=function(e){return"<"+e.tagName.toLowerCase()+this.attributes(e)+">"},e.prototype.closeTagString=function(e){return"</"+e.tagName.toLowerCase()+">"},e.prototype.createTagString=function(e,t,i){return"<"+e.toLowerCase()+this.attributes(t)+">"+i+"</"+e.toLowerCase()+">"},e.prototype.isList=function(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0},e.prototype.isElement=function(e){return e===this.parent},e.prototype.isEditable=function(e){return(!e.getAttribute||"true"===e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0},e.prototype.hasClass=function(e,t){return e&&e.classList&&e.classList.contains(t)},e.prototype.replaceWith=function(e,t){e.parentNode.insertBefore(this.parseHTMLFragment(t),e),sf.base.detach(e)},e.prototype.parseHTMLFragment=function(e){var t=sf.base.createElement("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)},e.prototype.wrap=function(e,t){return e.parentNode.insertBefore(t,e),(t=e.previousSibling).appendChild(e),t},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.wrapInner=function(e,t){for(e.appendChild(t),(t=e.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===t.classList.length&&t.removeAttribute("class");e.firstChild!==t;)t.appendChild(e.firstChild);return t},e.prototype.unWrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;)i.push(e.firstChild),t.insertBefore(e.firstChild,e);return i=i.length>0?i:[e.parentNode],t.removeChild(e),i},e.prototype.getSelectedNode=function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t-1]&&e.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(e.childNodes[t-1].classList.contains(le)||e.childNodes[t-1].classList.contains(he))?e=e.childNodes[t-1]:e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t]&&(e=e.childNodes[t]),e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e},e.prototype.nodeFinds=function(e,t){for(var i=[],n=0;n<t.length;n++)e.contains(t[n])&&e!==t[n]&&i.push(t[n]);return i},e.prototype.isEditorArea=function(){var e;for(e=this.getRangePoint(0).commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},e.prototype.getRangePoint=function(e){var t=this.getSelection(),i=[];if(t&&t.getRangeAt&&t.rangeCount){i=[];for(var n=0;n<t.rangeCount;n++)i.push(t.getRangeAt(n))}else i=[this.currentDocument.createRange()];return void 0!==e?i[e]:i},e.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},e.prototype.getPreviousNode=function(e){for(e=e.previousElementSibling;e&&"\n"===e.textContent;null)e=e.previousElementSibling;return e},e.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},e.prototype.saveMarker=function(e,t){var i,n,s=this.parent.querySelector("."+le),o=this.parent.querySelector("."+he);if(this.hasClass(s,le)&&s.classList.length>1){var r=this.createTagString("p",s,this.encode(s.textContent));this.replaceWith(s,r),(s=this.parent.querySelector("."+le)).classList.remove(le),i=s.childNodes[0]}else i=this.unWrap(s)[0];if(this.hasClass(o,he)&&o.classList.length>1){r=this.createTagString("p",o,this.encode(o.textContent));this.replaceWith(o,r),(o=this.parent.querySelector("."+he)).classList.remove(he),n=o.childNodes[0]}else n=o?this.unWrap(o)[0]:i;return e.startContainer=e.getNodeArray(i,!0),e.endContainer=e.getNodeArray(n,!1),e},e.prototype.marker=function(e,t){return'<span class="'+e+'">'+t+"</span>"},e.prototype.setMarker=function(e){var t=e.range,i=t.startContainer.childNodes,n=(i.length>1&&"TABLE"===i[0].nodeName?function(e){var t=e;do{t.childNodes.length>0&&(t=t.childNodes[0])}while(t.childNodes.length>0);return t}(i[t.startOffset+1]):i[t.startOffset>0?t.startOffset-1:t.startOffset])||t.startContainer,s=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if(n.nodeType===Node.ELEMENT_NODE&&s.nodeType===Node.ELEMENT_NODE&&(n.contains(s)||s.contains(n))){var o=n.contains(s)?n:s;if(o.nodeType!==Node.TEXT_NODE){for(var r=[],a=[],l=o;o.contains(l);null)r.indexOf(l)<0&&l.childNodes&&l.childNodes.length?(r.push(l),l=l.childNodes[0]):l.nextSibling?l=l.nextSibling:l.parentNode&&(l=l.parentNode,r.push(l)),a.indexOf(l)<0&&(l.nodeType===Node.TEXT_NODE||V.indexOf(l.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===l.tagName||"IMG"===l.tagName))&&a.push(l);a.length&&(n=n.contains(s)?a[0]:n,s=a[a.length-1])}}if(n!==s){if(n.nodeType!==Node.TEXT_NODE&&("BR"===n.tagName&&V.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===n.tagName))this.replaceWith(n,this.marker(le,this.encode(n.textContent))),t.startContainer.querySelector("."+le).appendChild(n);else if(3!==n.nodeType&&"#text"!==n.nodeName&&"BR"!==n.nodeName){var h=this.marker(le,"");sf.base.append([this.parseHTMLFragment(h)],n)}else this.replaceWith(n,this.marker(le,this.encode(n.textContent)));if(s.nodeType!==Node.TEXT_NODE&&"BR"===s.tagName&&V.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0)this.replaceWith(s,this.marker(he,this.encode(s.textContent))),t.endContainer.querySelector("."+he).appendChild(s);else this.ensureSelfClosingTag(s,he,t)}else this.ensureSelfClosingTag(n,le,t)},e.prototype.ensureSelfClosingTag=function(e,t,i){var n=!1;if(3===e.nodeType)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.tagName){this.replaceWith(e,this.marker(t,this.encode(e.textContent))),i.startContainer.querySelector("."+t).parentElement.appendChild(e)}else{if("IMG"===e.tagName){var s=document.createElement("p");e.parentElement.insertBefore(s,e),s.appendChild(e),e=s.children[0]}if("TABLE"===e.tagName)if(n=!0,""===e.textContent){var o=e.querySelectorAll("td");e=o[o.length-1],e=sf.base.isNullOrUndefined(e.childNodes[0])?e:e.childNodes[0]}else{for(var r=e.lastChild;3!==r.nodeType&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)r=r.lastChild;e=r}for(var a=0;a<ae.length;a++)e=e.tagName!==ae[a]||n?e:e.parentNode;if(3===e.nodeType&&"#text"===e.nodeName)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.nodeName){this.replaceWith(e,this.marker(he,this.encode(e.textContent))),i.endContainer.querySelector("."+he).appendChild(e)}else{var l=this.marker(t,"");sf.base.append([this.parseHTMLFragment(l)],e)}}},e.prototype.createTempNode=function(e){var t=e.textContent;if("BR"===e.tagName){var i="<p></p>",n=e.parentNode;V.indexOf(n.tagName.toLocaleLowerCase())>=0&&(e=this.wrap(e,this.parseHTMLFragment(i)))}else if(e.nodeType!==Node.TEXT_NODE&&(e.classList.contains(le)||e.classList.contains(he))||t.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||t.length&&t.indexOf("\n")<0){i="<p></p>";var s=e;e=this.wrap(e,this.parseHTMLFragment(i)),!(s.nodeType===Node.ELEMENT_NODE&&s.firstChild&&"BR"===s.firstChild.nodeName&&(s.classList.contains(le)||s.classList.contains(he)))&&e.nextElementSibling&&"BR"===e.nextElementSibling.tagName&&e.appendChild(e.nextElementSibling)}return e},e.prototype.getImageTagInSelection=function(){var e=this.getSelection();return this.isEditorArea()&&e.rangeCount?e.focusNode.querySelectorAll("img"):null},e.prototype.blockNodes=function(){var e=[],t=this.getSelection();if(this.isEditorArea()&&t.rangeCount)for(var i=this.getRangePoint(),n=0;n<i.length;n++){var s=void 0,o=i[n],r=this.getSelectedNode(o.startContainer,o.startOffset),a=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(r)&&e.indexOf(r)<0&&e.push(r),(s=this.blockParentNode(r))&&e.indexOf(s)<0)if(V.indexOf(s.tagName.toLocaleLowerCase())>=0&&("BR"===r.tagName||r.nodeType===Node.TEXT_NODE||r.classList.contains(le)||r.classList.contains(he))){var l=r.previousSibling&&r.previousSibling.nodeType===Node.TEXT_NODE?r.previousSibling:r;r.nextSibling||r.previousSibling||"BR"!==r.tagName?e.push(this.createTempNode(l)):e.push(l)}else e.push(s);for(var h=[],d=r;d!==a&&d!==this.parent;null)h.indexOf(d)<0&&d.childNodes&&d.childNodes.length?(h.push(d),d=d.childNodes[0]):d&&8!==d.nodeType&&("BR"===d.tagName||d.nodeType===Node.TEXT_NODE&&""!==d.textContent.trim()||d.nodeType!==Node.TEXT_NODE&&(d.classList.contains(le)||d.classList.contains(he)))&&V.indexOf(d.parentNode.tagName.toLocaleLowerCase())>=0?d=this.createTempNode(d):d.nextSibling&&8!==d.nextSibling.nodeType&&("BR"===d.nextSibling.tagName||d.nextSibling.nodeType===Node.TEXT_NODE||d.nextSibling.classList.contains(le)||d.nextSibling.classList.contains(he))&&V.indexOf(d.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?d=this.createTempNode(d.nextSibling):d.nextSibling?d=d.nextSibling:d.parentNode&&(d=d.parentNode,h.push(d)),e.indexOf(d)<0&&d.nodeType===Node.ELEMENT_NODE&&V.indexOf(d.parentNode.tagName.toLocaleLowerCase())>=0&&(d.classList.contains(le)||d.classList.contains(he))&&e.push(this.createTempNode(d)),this.isBlockNode(d)&&this.ignoreTableTag(d)&&h.indexOf(d)<0&&e.indexOf(d)<0&&(d!==a||o.endOffset>0)&&e.push(d),"IMG"===d.nodeName&&"true"===d.parentElement.contentEditable&&e.push(d);(s=this.blockParentNode(a))&&this.ignoreTableTag(s)&&e.indexOf(s)<0&&!sf.base.isNullOrUndefined(s.previousElementSibling)&&"IMG"!==s.previousElementSibling.tagName&&e.push(s)}for(var c=e.length-1;c>0;c--){if((h=this.nodeFinds(e[c],e)).length){var p=e[c].querySelectorAll("ul, ol");if("LI"===e[c].tagName&&p.length>0)continue;e.splice(c,1)}}return e},e.prototype.ignoreTableTag=function(e){return!(X.indexOf(e.tagName.toLocaleLowerCase())>=0)},e}(),ce=function(){function e(e){this.parent=e,this.domNode=this.parent.domNode,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("list-type",this.applyListsHandler,this),this.parent.observer.on("keyup-handler",this.onKeyUp,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this),this.parent.observer.on("actionBegin",this.spaceKeyAction,this)},e.prototype.testList=function(e){var t=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],i=sf.base.isNullOrUndefined(e)?null:e.innerText.trim().split(".")[0]+".";if(!sf.base.isNullOrUndefined(i))for(var n=0;n<t.length;n++)if(t[n].test(i))return!0;return!1},e.prototype.testCurrentList=function(e){var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!sf.base.isNullOrUndefined(e.startContainer.textContent.slice(0,e.startOffset)))for(var i=e.startContainer.textContent.replace(/\u200B/g,"").slice(0,e.startOffset).trim(),n=0;n<t.length;n++)if(t[n].test(i)&&2===i.length)return!0;return!1},e.prototype.spaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);var i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),n=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),i.previousElementSibling),s=i.nextElementSibling,o=sf.base.isNullOrUndefined(n)?null:n.innerText.trim().substring(0,1),r=sf.base.isNullOrUndefined(s)?null:s.innerText.trim().substring(0,1),a=this.testCurrentList(t),l=this.testList(n),h=this.testList(s);l||h||"*"===o||"*"===r||(a?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault()):"*"!==t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim()&&"-"!==t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim()||(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()))},e.prototype.enterList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i="LI"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement.closest("LI"),n="LI"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement.closest("LI"),s=!1;if(!sf.base.isNullOrUndefined(i)){var o=i.querySelectorAll(".e-video-clickelem"),r=o.length>0&&"IFRAME"===o[0].childNodes[0].nodeName;s=i.querySelectorAll("IMG").length>0||i.querySelectorAll("AUDIO").length>0||i.querySelectorAll("VIDEO").length>0||r}if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(n)&&i===n&&"LI"===i.tagName&&""===i.textContent.trim()&&!s){if(i.innerHTML.indexOf("&nbsp;")>=0)return;65279===i.textContent.charCodeAt(0)&&(i.textContent="");var a=i.parentElement;if(sf.base.isNullOrUndefined(a.parentElement.closest("UL"))&&sf.base.isNullOrUndefined(a.parentElement.closest("OL"))){if(!sf.base.isNullOrUndefined(i.nextElementSibling)){var l=this.parent.domNode.blockParentNode(i);this.parent.nodeCutter.GetSpliceNode(t,l)}var h=void 0;"DIV"===e.enterAction?(h=sf.base.createElement("div")).innerHTML="<br>":"P"===e.enterAction?(h=sf.base.createElement("p")).innerHTML="<br>":h=sf.base.createElement("br"),this.parent.domNode.insertAfter(h,a),e.event.preventDefault(),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,h,0),""===a.textContent&&0===a.querySelectorAll("audio,video").length?sf.base.detach(a):sf.base.detach(i)}}},e.prototype.backspaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),n=this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset);if((i="BR"===i.nodeName?i.parentElement:i)===(n="BR"===n.nodeName?n.parentElement:n)&&!sf.base.isNullOrUndefined(sf.base.closest(i,"li"))&&(""===i.textContent.trim()&&65279===i.textContent.charCodeAt(0)||1===i.textContent.length&&8203===i.textContent.charCodeAt(0))&&(i.textContent=""),i===n&&"LI"===i.tagName&&0===i.textContent.length&&sf.base.isNullOrUndefined(i.previousElementSibling)&&i.removeAttribute("style"),i===n&&""===i.textContent){if("LI"===i.parentElement.tagName&&"LI"===n.parentElement.tagName)sf.base.detach(i);else if(i.closest("ul")||i.closest("ol")){if((s=sf.base.isNullOrUndefined(i.closest("ul"))?i.closest("ol"):i.closest("ul")).firstElementChild===i&&!sf.base.isNullOrUndefined(s.children[1])&&("OL"===s.children[1].tagName||"UL"===s.children[1].tagName))if(s.tagName===s.children[1].tagName){for(;s.children[1].lastChild;)this.parent.domNode.insertAfter(s.children[1].lastChild,s.children[1]);sf.base.detach(s.children[1])}else s.parentElement.insertBefore(s.children[1],s)}}else if(!(sf.base.isNullOrUndefined(i.firstChild)||"BR"!==i.firstChild.nodeName||sf.base.isNullOrUndefined(i.childNodes[1])||"UL"!==i.childNodes[1].nodeName&&"OL"!==i.childNodes[1].nodeName)){var s;if((s=sf.base.isNullOrUndefined(i.closest("ul"))?i.closest("ol"):i.closest("ul")).tagName===i.childNodes[1].nodeName){for(;i.childNodes[1].lastChild;)this.parent.domNode.insertAfter(i.children[1].lastChild,i);sf.base.detach(i.childNodes[1])}else s.parentElement.insertBefore(i.children[1],s)}this.removeList(t,e),this.firstListBackSpace(t,e)},e.prototype.removeList=function(e,t){var i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset),n=this.parent.domNode.getSelectedNode(e.endContainer,e.endOffset);i="BR"===i.nodeName?i.parentElement:i,n="BR"===n.nodeName?n.parentElement:n,i="LI"===i.nodeName||sf.base.isNullOrUndefined(i.closest("LI"))?i:i.closest("LI"),n="LI"===n.nodeName||sf.base.isNullOrUndefined(n.closest("LI"))?n:n.closest("LI"),(("OL"===e.commonAncestorContainer.nodeName||"UL"===e.commonAncestorContainer.nodeName||"LI"===e.commonAncestorContainer.nodeName)&&sf.base.isNullOrUndefined(n.nextElementSibling)&&n.textContent.length===e.endOffset&&sf.base.isNullOrUndefined(i.previousElementSibling)&&0===e.startOffset||-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&e.startContainer===e.endContainer&&e.startContainer===this.parent.editableElement&&0===e.startOffset&&1===e.endOffset)&&(-1!==sf.base.Browser.userAgent.indexOf("Firefox")?sf.base.detach(e.commonAncestorContainer.childNodes[0]):"LI"===e.commonAncestorContainer.nodeName?sf.base.detach(e.commonAncestorContainer.parentElement):sf.base.detach(e.commonAncestorContainer),t.event.preventDefault())},e.prototype.onKeyUp=function(){if(!sf.base.isNullOrUndefined(this.commonLIParent)&&!sf.base.isNullOrUndefined(this.commonLIParent.querySelector(".removeList"))){for(var e=this.commonLIParent.querySelector(".removeList");!sf.base.isNullOrUndefined(e.firstChild);)this.parent.domNode.insertAfter(e.firstChild,e);sf.base.detach(e)}},e.prototype.firstListBackSpace=function(e,t){var i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset);if(sf.base.isNullOrUndefined(i.closest("OL"))?sf.base.isNullOrUndefined(i.closest("UL"))||(this.commonLIParent=i.closest("UL")):this.commonLIParent=i.closest("OL"),"LI"===i.nodeName&&0===e.startOffset&&0===e.endOffset&&sf.base.isNullOrUndefined(i.previousSibling)&&!sf.base.isNullOrUndefined(this.commonLIParent)&&sf.base.isNullOrUndefined(this.commonLIParent.previousSibling)&&sf.base.isNullOrUndefined(this.commonLIParent.parentElement.closest("OL"))&&sf.base.isNullOrUndefined(this.commonLIParent.parentElement.closest("UL"))&&sf.base.isNullOrUndefined(this.commonLIParent.parentElement.closest("LI"))){var n=sf.base.createElement("P");n.innerHTML="&#8203;",i.classList.add("removeList"),this.commonLIParent.parentElement.insertBefore(n,this.commonLIParent)}},e.prototype.keyDownHandler=function(e){if(13===e.event.which&&this.enterList(e),32===e.event.which&&this.spaceList(e),8===e.event.which&&this.backspaceList(e),46===e.event.which&&"delete"===e.event.action){var t=(r=this.parent.nodeSelection.getRange(this.parent.currentDocument)).commonAncestorContainer,i=r.startContainer,n=r.endContainer,s=3===i.nodeType?i.parentElement:i,o=3===n.nodeType?n.parentElement:n;"UL"!==t.nodeName&&"OL"!==t.nodeName||s===o||sf.base.isNullOrUndefined(sf.base.closest(s,"ul"))&&sf.base.isNullOrUndefined(sf.base.closest(s,"ol"))||sf.base.isNullOrUndefined(sf.base.closest(o,"ul"))&&sf.base.isNullOrUndefined(sf.base.closest(o,"ol"))||t.lastElementChild!==sf.base.closest(o,"li")||r.collapsed||sf.base.detach(t),this.removeList(r,e)}if(9===e.event.which){var r=this.parent.nodeSelection.getRange(this.parent.currentDocument);e.event.action&&"indent"===e.event.action||(this.saveSelection=this.parent.nodeSelection.save(r,this.parent.currentDocument));var a=void 0,l=r.startOffset,h=r.endOffset;if((s=this.parent.domNode.getSelectedNode(r.startContainer,r.startOffset))===(o=this.parent.domNode.getSelectedNode(r.endContainer,r.endOffset))&&("BR"===s.nodeName||"#text"===s.nodeName)&&V.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0)return;e.event.action&&"indent"===e.event.action||this.domNode.setMarker(this.saveSelection),a=this.domNode.blockNodes();for(var d=[],c=!0,p=0;p<a.length;p++)"LI"===a[p].parentNode.tagName?d.push(a[p].parentNode):"LI"===a[p].tagName&&"P"!==a[p].childNodes[0].tagName&&"OL"!==a[p].childNodes[0].tagName&&"UL"!==a[p].childNodes[0].tagName&&d.push(a[p]);d.length>1||d.length&&(0===l&&0===h||e.ignoreDefault)?(e.event.preventDefault(),e.event.stopPropagation(),this.currentAction=this.getAction(d[0]),e.event.shiftKey?(this.revertList(d,e),this.revertClean()):c=this.nestedList(d),c&&(this.cleanNode(),this.parent.editableElement.focus()),e.event.action&&"indent"===e.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),e.callBack&&e.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:e.event}))):e.event.action&&"indent"===e.event.action||(e.event&&e.event.shiftKey&&"Tab"===e.event.key&&(e.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,e.event.action),this.saveSelection.restore())}else switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.spaceKeyAction=function(e){32===e.event.which&&this.spaceList(e)},e.prototype.getAction=function(e){return"OL"===e.parentNode.nodeName?"OL":"UL"},e.prototype.revertClean=function(){for(var e=this.parent.editableElement.querySelectorAll("ul, ol"),t=0;t<e.length;t++){var i=e[t].querySelectorAll("ul, ol");if(i.length>0)for(var n=0;n<i.length;n++){var s=i[n].previousSibling;s&&"LI"===s.tagName&&s.appendChild(i[n])}}},e.prototype.noPreviousElement=function(e){var t,i,n=e.querySelectorAll("ol, ul"),s=e.querySelectorAll("li"),o=this.domNode.contents(s[0])[0];if(s.length>0&&("OL"===o.nodeName||"UL"===o.nodeName)?t=s[0]:i=n[0],t)for(var r=this.domNode.contents(e)[0];r&&!this.domNode.isList(r);null){var a=r.nextSibling;sf.base.prepend([r],t),sf.base.setStyleAttribute(e,{"list-style-type":"none"}),sf.base.setStyleAttribute(t,{"list-style-type":""}),r=a}else if(i){var l=sf.base.createElement("li");sf.base.prepend([l],i);for(r=this.domNode.contents(e)[0];r&&!this.domNode.isList(r);null){a=r.nextSibling;l.appendChild(r),r=a}sf.base.prepend([i],e.parentNode),sf.base.detach(e);var h=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.prepend([h],i.parentNode),sf.base.append([i],h)}else{h=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.prepend([h],e.parentNode);l=sf.base.createElement(e.parentNode.tagName);sf.base.prepend([l],h),sf.base.append([e],l)}},e.prototype.nestedList=function(e){for(var t=!1,i=0;i<e.length;i++){var n=this.domNode.getPreviousNode(e[i]);if(n){t=!0;var s=void 0,o=void 0,r=e[i].querySelectorAll("ol, ul"),a=e[i].querySelectorAll("li"),l=this.domNode.contents(a[0])[0];if(a.length>0&&("OL"===l.nodeName||"UL"===l.nodeName)?o=a[0]:s=r[0],s){var h=sf.base.createElement("li");sf.base.prepend([h],s);for(var d=this.domNode.contents(e[i])[0];d&&!this.domNode.isList(d);null){var c=d.nextSibling;h.appendChild(d),d=c}sf.base.append([s],n),sf.base.detach(e[i])}else if(o){if("LI"===n.tagName){for(d=this.domNode.contents(e[i])[0];d&&!this.domNode.isList(d);null){c=d.nextSibling;sf.base.prepend([d],o),sf.base.setStyleAttribute(e[i],{"list-style-type":"none"}),sf.base.setStyleAttribute(o,{"list-style-type":""}),d=c}sf.base.append([o.parentNode],n),sf.base.detach(e[i])}}else if("LI"===n.tagName){h=sf.base.createElement(e[i].parentNode.tagName);sf.base.append([h],n),sf.base.append([e[i]],h)}else"OL"!==n.tagName&&"UL"!==n.tagName||sf.base.append([e[i]],n)}else{var p=e[i];t=!0,this.noPreviousElement(p)}}return t},e.prototype.applyListsHandler=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);if(-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&t.startContainer===t.endContainer&&t.startContainer===this.parent.editableElement){for(var i=t.startContainer.childNodes[t.startOffset>0?t.startOffset-1:t.startOffset]||t.startContainer,n=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer,s="BR"===n.lastChild.nodeName?sf.base.isNullOrUndefined(n.lastChild.previousSibling)?n:n.lastChild.previousSibling:n.lastChild;!sf.base.isNullOrUndefined(s)&&"#text"!==s.nodeName&&"IMG"!==s.nodeName&&"BR"!==s.nodeName&&"HR"!==s.nodeName;)s=s.lastChild;this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,i,s,0,s.textContent.length),t=this.parent.nodeSelection.getRange(this.parent.currentDocument)}if(t.startContainer===t.endContainer&&t.startContainer===this.parent.editableElement&&t.startOffset===t.endOffset&&0===t.startOffset&&0===this.parent.editableElement.textContent.length&&"TABLE"!==this.parent.editableElement.childNodes[0].nodeName&&"IMG"!==this.parent.editableElement.childNodes[0].nodeName){var o=t.startContainer.childNodes[0];this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,o,o,0,0),t=this.parent.nodeSelection.getRange(this.parent.currentDocument)}this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument),this.currentAction=e.subCommand,this.currentAction=e.subCommand="NumberFormatList"===this.currentAction?"OL":"BulletFormatList"===this.currentAction?"UL":this.currentAction,this.domNode.setMarker(this.saveSelection);var r=this.domNode.blockNodes();if("BR"===e.enterAction){this.setSelectionBRConfig();var a=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),l=this.parent.nodeSelection.getSelectionNodes(a),h=[];0===l.length&&l.push(r[0]);for(var d=0;d<l.length;d++){for(var c=l[d],p=void 0;!this.parent.domNode.isBlockNode(c)&&c!==this.parent.editableElement;)p=c,c=c.parentElement;this.parent.domNode.isBlockNode(c)&&c===this.parent.editableElement&&h.push(p)}for(d=0;d<h.length;d++)if(!this.parent.domNode.isBlockNode(h[d])){for(var u=c=h[d];c===this.parent.editableElement;)u=c,c=c.parentElement;var f=void 0;this.parent.domNode.isBlockNode(u.parentElement)&&u.parentElement===this.parent.editableElement?(f=sf.base.createElement("p"),u.parentElement.insertBefore(f,u),f.appendChild(u)):f=u;for(var g=f.previousSibling;!sf.base.isNullOrUndefined(g)&&"BR"!==g.nodeName&&!this.parent.domNode.isBlockNode(g);)f.firstChild.parentElement.insertBefore(g,f.firstChild),g=f.previousSibling;sf.base.isNullOrUndefined(g)||"BR"!==g.nodeName||sf.base.detach(g);for(var m=f.nextSibling;!sf.base.isNullOrUndefined(m)&&"BR"!==m.nodeName&&!this.parent.domNode.isBlockNode(m);)f.appendChild(m),m=f.nextSibling;sf.base.isNullOrUndefined(m)||"BR"!==m.nodeName||sf.base.detach(m)}this.setSelectionBRConfig(),r=this.parent.domNode.blockNodes()}for(d=0;d<r.length;d++)"TABLE"!==r[d].tagName||t.collapsed||r.splice(d,1),r.length>0&&"LI"!==r[d].tagName&&"LI"===r[d].parentNode.tagName&&(r[d]=r[d].parentNode);this.applyLists(r,this.currentAction,e.selector,e.item,e),e.callBack&&e.callBack({requestType:this.currentAction,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.setSelectionBRConfig=function(){var e=this.parent.editableElement.querySelector("."+le),t=this.parent.editableElement.querySelector("."+he);sf.base.isNullOrUndefined(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,e,t,0,0)},e.prototype.applyLists=function(e,t,i,n,s){if(this.isRevert(e,t,n)&&sf.base.isNullOrUndefined(n))this.revertList(e,s),this.removeEmptyListElements();else{this.checkLists(e,t,n);for(var o=0;o<e.length;o++)if(sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.listStyle)||("listImage"===n.listStyle?sf.base.setStyleAttribute(e[o],{"list-style-image":n.listImage}):(sf.base.setStyleAttribute(e[o],{"list-style-image":"none"}),sf.base.setStyleAttribute(e[o],{"list-style-type":n.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),"true"===e[o].getAttribute("contenteditable")&&1===e[o].childNodes.length&&"TABLE"===e[o].childNodes[0].nodeName){var r=document.createElement(t);r.innerHTML="<li><br/></li>",e[o].appendChild(r)}else if("LI"!==e[o].tagName&&sf.base.isNullOrUndefined(n)){var a="<"+t+">",l="</"+t+">",h="li"+("IMG"===e[o].tagName?"":this.domNode.attributes(e[o])),d="p"===e[o].tagName.toLowerCase()?e[o].innerHTML:e[o].outerHTML,c=a+this.domNode.createTagString(h,null,d)+l;this.domNode.replaceWith(e[o],c)}else if(!sf.base.isNullOrUndefined(n)&&"LI"!==e[o].tagName){a="<"+t+("IMG"===e[o].tagName?"":this.domNode.attributes(e[o]))+">",l="</"+t+">",h="li",d="p"===e[o].tagName.toLowerCase()?e[o].innerHTML:e[o].outerHTML,c=a+this.domNode.createTagString(h,null,d)+l;this.domNode.replaceWith(e[o],c)}}this.cleanNode(),this.parent.editableElement.focus(),u()&&f(this.parent.editableElement,i),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},e.prototype.removeEmptyListElements=function(){for(var e=this.parent.editableElement.querySelectorAll("ol, ul"),t=0;t<e.length;t++)""===e[t].textContent.trim()&&sf.base.detach(e[t])},e.prototype.isRevert=function(e,t,i){for(var n=!0,s=0;s<e.length;s++){if("LI"!==e[s].tagName)return!1;(e[s].parentNode.tagName!==t||sf.base.isNullOrUndefined(i)&&""!==e[s].parentNode.style.listStyleType)&&(n=!1)}return n},e.prototype.checkLists=function(e,t,i){for(var n=[],s=0;s<e.length;s++){var o=e[s].parentNode;sf.base.isNullOrUndefined(i)||"LI"!==e[s].tagName||sf.base.isNullOrUndefined(i.listStyle)||("listImage"===i.listStyle?sf.base.setStyleAttribute(o,{"list-style-image":i.listImage}):(sf.base.setStyleAttribute(o,{"list-style-image":"none"}),sf.base.setStyleAttribute(o,{"list-style-type":i.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),("LI"===e[s].tagName&&o.tagName!==t&&n.indexOf(o)<0||"LI"===e[s].tagName&&o.tagName===t&&n.indexOf(o)<0&&null!==i)&&n.push(o),sf.base.isNullOrUndefined(i)&&(o.tagName===t||("UL"===o.tagName||"OL"===o.tagName)&&o.hasAttribute("style"))&&o.hasAttribute("style")&&o.removeAttribute("style")}for(var r=n.length-1;r>=0;r--){var a=n[r],l="<"+t.toLowerCase()+" "+this.domNode.attributes(a)+">"+a.innerHTML+"</"+t.toLowerCase()+">";this.domNode.replaceWith(n[r],l)}},e.prototype.cleanNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),t=0;t<e.length;t++){var i=e[t];if(this.domNode.isList(i.previousElementSibling)&&this.domNode.openTagString(i)===this.domNode.openTagString(i.previousElementSibling)){for(var n=this.domNode.contents(i),s=0;s<n.length;s++)i.previousElementSibling.appendChild(n[s]);i.parentNode.removeChild(i)}else sf.base.isNullOrUndefined(i.getAttribute("level"))||i.tagName===i.previousElementSibling.tagName&&i.previousElementSibling.lastChild.append(i)}},e.prototype.findUnSelected=function(e,t){if((e=e.slice().reverse()).length>0){var i=[],n=[],s=[],o=[];s=t[t.length-1].childNodes;for(var r=0;r<s.length;r++)if("OL"===s[r].tagName||"UL"===s[r].tagName){var a=s[r].querySelectorAll("li");if(a.length>0)for(var l=0;l<a.length;l++)o.push(a[l])}for(var h=0;h<o.length;h++){for(var d=0,c=0;c<e.length;c++)o[h].contains(e[c])||(d+=1);d===e.length&&n.push(o[h])}if(n.length>0)for(var p=0;p<n.length;p++)"OL"!==this.domNode.contents(n[p])[0].nodeName&&"UL"!==this.domNode.contents(n[p])[0].nodeName&&i.push(n[p]);i.length>0&&this.nestedList(i)}},e.prototype.revertList=function(e,t){for(var i=[],n=e.length-1;n>=0;n--)for(var s=n-1;s>=0;s--)if(e[s].contains(e[n])||e[s]===e[n]){i.push(e[n]),e.splice(n,1);break}this.findUnSelected(i,e);var o=[];for(n=0;n<e.length;n++){var r=e[n];3===this.domNode.contents(r)[0].nodeType&&0===this.domNode.contents(r)[0].textContent.trim().length&&sf.base.detach(this.domNode.contents(r)[0]);var a=e[n].parentNode,l=r.getAttribute("class");if(0===i.length){var h=e[n].querySelectorAll("ul, ol")[0];if(h)if(h.querySelectorAll("li")){var d=sf.base.createElement(h.tagName);sf.base.append([d],h.parentNode);var c=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.append([c],d),sf.base.append([h],c)}}if(r.parentNode.insertBefore(this.closeTag(a.tagName),r),"LI"===a.parentNode.tagName||"OL"===a.parentNode.tagName||"UL"===a.parentNode.tagName)r.parentNode.insertBefore(this.closeTag("LI"),r);else{if(0===r.querySelectorAll(W.join(", ")).length){var p="<p"+(sf.base.isNullOrUndefined(l)?' class="e-rte-wrap-inner"':' class="'+l+' e-rte-wrap-inner"')+this.domNode.attributes(a)+"></p>";"BR"!==t.enterAction&&this.domNode.wrapInner(r,this.domNode.parseHTMLFragment(p))}else if(3===this.domNode.contents(r)[0].nodeType){var u=this.domNode.createTagString("p",a,this.parent.domNode.encode(this.domNode.contents(r)[0].textContent));this.domNode.replaceWith(this.domNode.contents(r)[0],u)}else if(this.domNode.contents(r)[0].classList.contains(le)||this.domNode.contents(r)[0].classList.contains(he)){u=this.domNode.createTagString("p",a,this.domNode.contents(r)[0].outerHTML);this.domNode.replaceWith(this.domNode.contents(r)[0],u)}else{var f=r.firstChild;l=f.getAttribute("class"),sf.base.attributes(f,this.domNode.rawAttributes(a)),l&&f.getAttribute("class")&&sf.base.attributes(f,{class:l+" "+f.getAttribute("class")})}sf.base.append([this.openTag("LI")],r),sf.base.prepend([this.closeTag("LI")],r)}this.domNode.insertAfter(this.openTag(a.tagName),r),"LI"===a.parentNode.tagName&&(a=a.parentNode.parentNode),o.indexOf(a)<0&&o.push(a)}for(n=0;n<o.length;n++){var g=o[n],m=g.innerHTML;m=(m=m.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="e-rte-list-open-([a-z]*)"><\/span>/g,"<$1 "+this.domNode.attributes(g)+">"),this.domNode.replaceWith(g,this.domNode.openTagString(g)+m.trim()+this.domNode.closeTagString(g))}var v=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(n=0;n<v.length;n++)sf.base.detach(v[n]);var b=this.parent.editableElement.querySelectorAll("li:empty");for(n=0;n<b.length;n++)sf.base.detach(b[n])},e.prototype.openTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+e.toLowerCase()+'"></span>')},e.prototype.closeTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+e.toLowerCase()+'"></span>')},e}(),pe=function(){function e(){}return e.WrapBefore=function(e,t,i){return t.innerText=e.textContent,i?this.AppendBefore(t,e,!0):this.AppendBefore(t,e),e.parentNode&&e.parentNode.removeChild(e),t.childNodes[0]},e.Wrap=function(e,t){return this.AppendBefore(t,e),t.appendChild(e),e},e.unwrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;null)i.push(t.insertBefore(e.firstChild,e));return t.removeChild(e),i},e.AppendBefore=function(e,t,i){return t.parentNode?i?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.insertBefore(e,t):t},e}(),ue=function(){function e(){this.enterAction="P",this.position=-1,this.nodeSelection=new Z}return e.prototype.GetSpliceNode=function(e,t){return t=this.SplitNode(e,t,!0),t=this.SplitNode(e,t,!1)},e.prototype.SplitNode=function(e,t,i){if(t){var n=e.cloneRange(),s=t.parentNode,o=this.nodeSelection.getIndex(t);n.collapse(i),i?n.setStartBefore(t):n.setEndAfter(t);var r,a=n.extractContents();if(i){if(t=s.childNodes[o],(a=this.spliceEmptyNode(a,!1))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||a.querySelectorAll("img").length>0||!this.isRteElm(a)||""!==a.textContent))if(t)pe.AppendBefore(a,t);else s.appendChild(a),(r=document.createElement("div")).innerHTML="&#65279;&#65279;",t=r.firstChild,s.appendChild(t)}else if(t=s.childNodes.length>1?s.childNodes[o]:s.childNodes[0],(a=this.spliceEmptyNode(a,!0))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isRteElm(a)||""!==a.textContent))if(t)pe.AppendBefore(a,t,!0);else s.appendChild(a),(r=document.createElement("div")).innerHTML="&#65279;&#65279;",s.insertBefore(r.firstChild,s.firstChild),t=s.firstChild;return t}return null},e.prototype.isRteElm=function(e){var t=!0;if(1===e.childNodes.length&&"IMG"!==e.childNodes[0].nodeName)for(var i=e.childNodes[0],n=0;!sf.base.isNullOrUndefined(i.childNodes)&&n<i.childNodes.length;n++)("IMG"===i.childNodes[n].nodeName||"SPAN"===i.childNodes[n].nodeName&&(i.childNodes[n].classList.contains("e-video-wrap")||i.childNodes[n].classList.contains("e-embed-video-wrap")||i.childNodes[n].classList.contains("e-audio-wrap")))&&(t=!1);else t=!0;return t},e.prototype.spliceEmptyNode=function(e,t){var i;return(i=1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName&&""===e.childNodes[0].textContent||""===e.textContent?-1:e.childNodes.length-1)>-1&&!t?this.spliceEmptyNode(e.childNodes[i],t):i>-1?this.spliceEmptyNode(e.childNodes[0],t):3===e.nodeType||11===e.nodeType||"IMG"===e.nodeName||e.classList.contains("e-video-wrap")||e.classList.contains("e-audio-wrap")||e.parentNode.removeChild(e),e},e.prototype.GetCursorStart=function(e,t,i){for(var n=(e=i?e:e.reverse())[0],s=0;s<e.length&&(i?e[s]<t:e[s]>=t);s++)n=e[s];return n},e.prototype.GetCursorRange=function(e,t,i){var n=e.createRange(),s=[];s.push(0);for(var o=this.TrimLineBreak(i.data),r=o.indexOf(" ",0);-1!==r;)s.indexOf(r)<0&&s.push(r),new RegExp("\\s").test(o[r-1])&&s.indexOf(r-1)<0&&s.push(r-1),new RegExp("\\s").test(o[r+1])&&s.push(r+1),r=o.indexOf(" ",r+1);if(s.push(o.length),s.indexOf(t.startOffset)>=0||s.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp("\\s").test(o[0]))||s[s.length-1]-1===t.startOffset&&!new RegExp("\\s").test(o[0]))n=t,this.position=1;else{var a=this.GetCursorStart(s,t.startOffset,!0);this.position=t.startOffset-a,n.setStart(t.startContainer,a),n.setEnd(t.startContainer,this.GetCursorStart(s,t.startOffset,!1))}return n},e.prototype.GetCursorNode=function(e,t,i){return this.GetSpliceNode(this.GetCursorRange(e,t,i),i)},e.prototype.TrimLineBreak=function(e){return e.replace(/(\r\n\t|\n|\r\t)/gm," ")},e}(),fe=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this),this.parent.observer.on("keyup-handler",this.onKeyUp,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.getParentNode=function(e){for(;e.parentNode&&e.parentNode!==this.parent.editableElement;null)e=e.parentNode;return e},e.prototype.onKeyUp=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=t.endContainer,n=i.lastChild;if(13===e.event.which&&t.startContainer===i&&3!==i.nodeType){var s=sf.base.createElement("p");if(s.innerHTML="<br>",!sf.base.isNullOrUndefined(n)&&n&&"BR"===n.nodeName&&n.previousSibling&&"TABLE"===n.previousSibling.nodeName)i.replaceChild(s,n),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0);else{var o=this.parent.nodeSelection.getSelectionNodeCollectionBr(t)[0];!sf.base.isNullOrUndefined(o)&&"BR"===o.nodeName&&o.previousSibling&&"TABLE"===o.previousSibling.nodeName&&(i.replaceChild(s,o),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0))}}},e.prototype.onKeyDown=function(e){if(13===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=0===t.startContainer.textContent.length||"PRE"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,n=0===t.endContainer.textContent.length||"PRE"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,s=sf.base.closest(i,"pre"),o=sf.base.closest(n,"pre");if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(s.parentElement)&&"LI"===s.parentElement.tagName)return;if((sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(o)||!sf.base.isNullOrUndefined(s)&&sf.base.isNullOrUndefined(o))&&(e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0)),13===e.event.which&&!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(o)){e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t);var r=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[t.endOffset],a=t.startContainer.childNodes[t.endOffset-1],l=t.startContainer;if(sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(a)||!sf.base.isNullOrUndefined(r.nextSibling)||"BR"!==r.nodeName||"BR"!==a.nodeName)if(8203===l.textContent.charCodeAt(0)&&1===l.textContent.length||0===l.textContent.length){for(;"PRE"!==l.parentElement.nodeName&&(1===l.textContent.length||0===l.textContent.length);)l=l.parentElement;!sf.base.isNullOrUndefined(l.previousSibling)&&"BR"===l.previousSibling.nodeName&&sf.base.isNullOrUndefined(l.nextSibling)?this.paraFocus(l.parentElement):this.isNotEndCursor(s,t)}else this.isNotEndCursor(s,t);else this.paraFocus(t.startContainer,e.enterAction)}}},e.prototype.removeCodeContent=function(e){var t=new RegExp(String.fromCharCode(65279),"g");if(!sf.base.isNullOrUndefined(e.endContainer.textContent.match(t))){var i=65279===e.endContainer.textContent.charCodeAt(e.endOffset-1)?e.endOffset-2:e.endOffset;e.endContainer.textContent=e.endContainer.textContent.replace(t,""),""===e.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer,i)}},e.prototype.deleteContent=function(e){e.startContainer===e.endContainer&&e.startOffset===e.endOffset||e.deleteContents()},e.prototype.paraFocus=function(e,t){var i;"DIV"===t?(i=sf.base.createElement("div")).innerHTML="<br>":"BR"===t?i=sf.base.createElement("br"):(i=sf.base.createElement("p")).innerHTML="<br>",this.parent.domNode.insertAfter(i,e),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),sf.base.detach(e.lastChild)},e.prototype.isNotEndCursor=function(e,t){var i=new ue,n=t.startOffset===e.lastChild.textContent.length&&e.lastChild.textContent===t.startContainer.textContent;if(0===e.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||"PRE"===t.startContainer.nodeName)){this.insertMarker(e,t);var s=sf.base.createElement("br");e.childNodes[t.endOffset].parentElement.insertBefore(s,e.childNodes[t.endOffset])}else{var o=i.SplitNode(t,e,!0);this.insertMarker(e,t);var r=e.previousElementSibling;"PRE"===r.tagName&&(r.insertAdjacentHTML("beforeend","<br>"+o.innerHTML),sf.base.detach(e))}this.setCursorPosition(n,e)},e.prototype.setCursorPosition=function(e,t){var i=!1,n=this.parent.editableElement.querySelector(".tempSpan"),s=n.parentElement;if(""===n.parentNode.textContent?i=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),e)if(i)s===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),sf.base.detach(n)):this.focusSelectionParent(n,s);else{var o=sf.base.createElement("br");this.parent.domNode.insertAfter(o,n),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),sf.base.detach(n)}else i?this.focusSelectionParent(n,s):sf.base.detach(n)},e.prototype.focusSelectionParent=function(e,t){sf.base.detach(e),t.innerHTML="​",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},e.prototype.insertMarker=function(e,t){var i=sf.base.createElement("span",{className:"tempSpan"});"PRE"===t.startContainer.nodeName?e.childNodes[t.endOffset].parentElement.insertBefore(i,e.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(i,t.startContainer)},e.prototype.applyFormats=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=!1;this.parent.editableElement!==t.endContainer||sf.base.isNullOrUndefined(this.parent.editableElement.children[t.endOffset-1])||"TABLE"!==this.parent.editableElement.children[t.endOffset-1].tagName||t.collapsed||(i=!0);var n=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(n);var s=this.parent.domNode.blockNodes();if("BR"===e.enterAction){this.setSelectionBRConfig();var o=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),r=this.parent.nodeSelection.getSelectionNodes(o),a=[];0===r.length&&r.push(s[0]);for(var l=0;l<r.length;l++){for(var h=r[l],d=void 0;!this.parent.domNode.isBlockNode(h)&&h!==this.parent.editableElement;)d=h,h=h.parentElement;this.parent.domNode.isBlockNode(h)&&h===this.parent.editableElement&&a.push(d)}for(l=0;l<a.length;l++)if(!this.parent.domNode.isBlockNode(a[l])){for(var c=h=a[l];h===this.parent.editableElement;)c=h,h=h.parentElement;var p=void 0;this.parent.domNode.isBlockNode(c.parentElement)&&c.parentElement===this.parent.editableElement?(p=sf.base.createElement("div"),c.parentElement.insertBefore(p,c),p.appendChild(c)):p=c;for(var g=p.previousSibling;!sf.base.isNullOrUndefined(g)&&"BR"!==g.nodeName&&!this.parent.domNode.isBlockNode(g);)p.firstChild.parentElement.insertBefore(g,p.firstChild),g=p.previousSibling;sf.base.isNullOrUndefined(g)||"BR"!==g.nodeName||sf.base.detach(g);for(var m=p.nextSibling;!sf.base.isNullOrUndefined(m)&&"BR"!==m.nodeName&&!this.parent.domNode.isBlockNode(m);)p.appendChild(m),m=p.nextSibling;sf.base.isNullOrUndefined(m)||"BR"!==m.nodeName||sf.base.detach(m)}this.setSelectionBRConfig(),s=this.parent.domNode.blockNodes()}for(l=0;l<s.length;l++){var v=void 0,b=void 0;if("blockquote"===e.subCommand.toLowerCase()?(v=this.getParentNode(s[l]),b=this.parent.domNode.isList(v)||"TABLE"===v.tagName?v.outerHTML:v.innerHTML):b=(v=s[l]).innerHTML,!(e.subCommand.toLowerCase()===v.tagName.toLowerCase()&&("pre"!==e.subCommand.toLowerCase()||!sf.base.isNullOrUndefined(e.exeValue)&&"dropDownSelect"===e.exeValue.name)||sf.base.isNullOrUndefined(v.parentNode)||"TABLE"===v.tagName&&"pre"===e.subCommand.toLowerCase())){this.cleanFormats(v,e.subCommand);var y="pre"===e.subCommand.toLowerCase()&&"pre"===v.tagName.toLowerCase()?"p":e.subCommand,C=this.parent.domNode.createTagString(y,v,b.replace(/>\s+</g,"><"));"LI"===v.tagName?(v.innerHTML="",v.insertAdjacentHTML("beforeend",C)):this.parent.domNode.replaceWith(v,C)}}this.preFormatMerge();var w=this.parent.editableElement.querySelector("."+le),M=this.parent.editableElement.querySelector("."+he);sf.base.isNullOrUndefined(w)||sf.base.isNullOrUndefined(M)||(w=w.lastChild,M=M.lastChild),n=this.parent.domNode.saveMarker(n,null),u()&&f(this.parent.editableElement,e.selector),i?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,w,M,0,M.textContent.length):n.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.setSelectionBRConfig=function(){var e=this.parent.editableElement.querySelector("."+le),t=this.parent.editableElement.querySelector("."+he);sf.base.isNullOrUndefined(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,e,t,0,0)},e.prototype.preFormatMerge=function(){var e=this.parent.editableElement.querySelectorAll("PRE");if(!sf.base.isNullOrUndefined(e))for(var t=0;t<e.length;t++){var i=e[t].previousElementSibling;sf.base.isNullOrUndefined(i)||"PRE"!==i.tagName||(i.insertAdjacentHTML("beforeend","<br>"+e[t].innerHTML),sf.base.detach(e[t]))}},e.prototype.cleanFormats=function(e,t){var i=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];t=t.toLowerCase();for(var n=0;n<i.length&&"p"!==t&&"blockquote"!==t&&"pre"!==t;n++)e.style.removeProperty(i[n])},e}(),ge=function(){function e(){}return e.Insert=function(e,t,i,n,s){var o,r;"string"==typeof t?((r=document.createElement("div")).innerHTML=t,o=n?r:r.firstChild):n&&(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.classList)||!t.classList.contains("pasteContent"))?((r=document.createElement("div")).appendChild(t),o=r):o=t;var a=new Z,l=new ue,h=a.getRange(e);if(h.startContainer!==i||h.startContainer!==h.endContainer||0!==h.startOffset||h.startOffset!==h.endOffset||0!==i.textContent.length||"P"!==i.children[0].tagName&&"DIV"!==i.children[0].tagName&&"BR"!==i.children[0].tagName||(a.setSelectionText(e,h.startContainer.children[0],h.startContainer.children[0],0,0),h=a.getRange(e)),h.startContainer===i&&h.startContainer===h.endContainer&&0===h.startOffset&&h.startOffset===h.endOffset&&i.textContent.trim().length>0){var d=this.findFirstTextNode(h.startContainer);sf.base.isNullOrUndefined(d)||(a.setSelectionText(e,d,d,0,0),h=a.getRange(e))}if("BR"===h.startContainer.nodeName&&0===h.startOffset&&h.startOffset===h.endOffset&&h.startContainer===h.endContainer){var c=Array.prototype.slice.call(h.startContainer.parentElement.childNodes).indexOf(h.startContainer);a.setSelectionText(e,h.startContainer.parentElement,h.startContainer.parentElement,c,c),h=a.getRange(e)}var p=h.startOffset===h.endOffset&&0===h.startOffset&&h.startContainer===h.endContainer,u=h.collapsed,f=this.getNodeCollection(h,a,o),g="table"===o.nodeName.toLowerCase()?this.closestEle(f[0].parentNode,i):f[0];if(n||!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(o.classList)&&o.classList.contains("pasteContent"))this.pasteInsertHTML(f,o,h,a,l,e,u,g,i,s);else if(i!==h.startContainer&&(!u&&(g.nodeType!==Node.ELEMENT_NODE||-1===X.indexOf(g.tagName.toLocaleLowerCase()))||"table"===o.nodeName.toLowerCase()&&g&&-1===X.indexOf(g.tagName.toLocaleLowerCase()))){var m=l.GetSpliceNode(h,g),v=m.previousSibling,b=m.parentNode;if(1===f.length||"table"===o.nodeName.toLowerCase()&&0===m.childElementCount)a.setSelectionContents(e,m),h=a.getRange(e);else{var y=l.GetSpliceNode(h,f[f.length-1].parentElement);y=sf.base.isNullOrUndefined(y)?m:y,a.setSelectionText(e,m,y,0,3===y.nodeType?y.textContent.length:y.childNodes.length),h=a.getRange(e)}h.extractContents(),"TABLE"===t.tagName&&this.removeEmptyElements(i);for(var C=0;C<f.length;C++)if(3!==f[C].nodeType&&null!=f[C].parentNode){if("IMG"===f[C].nodeName)continue;f[C].parentNode.removeChild(f[C])}if(v)pe.AppendBefore(o,v,!0);else{for(var w=null;b!==i&&b.firstChild&&""===b.textContent.trim();){w=b,b=b.parentNode}null!==w&&(b=w),b.firstChild&&(b!==i||"TABLE"===o.nodeName&&p&&b===h.startContainer&&b===h.endContainer)?""===b.textContent.trim()&&b!==i?(pe.AppendBefore(o,b,!1),sf.base.detach(b)):pe.AppendBefore(o,b.firstChild,!1):sf.base.isNullOrUndefined(m.previousSibling)&&"TABLE"===t.tagName?b.prepend(o):b.appendChild(o)}"IMG"===o.nodeName?this.imageFocus(o,a,e):3!==o.nodeType?a.setSelectionText(e,o,o,0,o.childNodes.length):a.setSelectionText(e,o,o,0,o.textContent.length)}else{if(h.deleteContents(),p&&""===h.startContainer.textContent&&"BR"!==h.startContainer.nodeName&&(h.startContainer.innerHTML=""),sf.base.Browser.isIE){var M=e.createDocumentFragment();M.appendChild(o),h.insertNode(M)}else if(1===h.startContainer.nodeType&&"hr"===h.startContainer.nodeName.toLowerCase()&&"hr"===h.endContainer.nodeName.toLowerCase()){var S=h.startContainer.nextElementSibling;S&&(S.querySelector("br")&&sf.base.detach(S.querySelector("br")),S.appendChild(o))}else"BR"===h.startContainer.nodeName?h.startContainer.parentElement.insertBefore(o,h.startContainer):h.insertNode(o);3!==o.nodeType&&o.childNodes.length>0?a.setSelectionText(e,o,o,1,1):"IMG"===o.nodeName?this.imageFocus(o,a,e):3!==o.nodeType?a.setSelectionContents(e,o):a.setSelectionText(e,o,o,o.textContent.length,o.textContent.length)}},e.findFirstTextNode=function(e){if(e.nodeType===Node.TEXT_NODE)return e;for(var t=0;t<e.childNodes.length;t++){var i=this.findFirstTextNode(e.childNodes[t]);if(!sf.base.isNullOrUndefined(i))return i}return null},e.pasteInsertHTML=function(e,t,i,n,s,o,r,a,l,h){var d,c,p,u,f=i.startOffset===i.endOffset&&i.startContainer===i.endContainer;if(f&&i.startContainer===l&&""===l.textContent){var g=this.getImmediateBlockNode(e[e.length-1],l);n.setSelectionText(o,g,g,0,0),i=n.getRange(o)}l!==i.startContainer&&(!r&&(a.nodeType!==Node.ELEMENT_NODE||-1===X.indexOf(a.tagName.toLocaleLowerCase()))||"table"===t.nodeName.toLowerCase()&&a&&-1===X.indexOf(a.tagName.toLocaleLowerCase()))&&(u=s.GetSpliceNode(i,a),c=sf.base.isNullOrUndefined(u.previousSibling)?u.parentNode.previousSibling:u.previousSibling,1===e.length?(n.setSelectionContents(o,u),i=n.getRange(o),p=!0):(d=s.GetSpliceNode(i,e[e.length-1].parentElement),d=sf.base.isNullOrUndefined(d)?u:d,n.setSelectionText(o,u,d,0,3===d.nodeType?d.textContent.length:d.childNodes.length),i=n.getRange(o),p=!1));var m=!1;this.removingComments(t);for(var v,b=t.childNodes,y=0;y<b.length;y++)if(W.indexOf(b[y].nodeName.toLocaleLowerCase())>=0){m=!0;break}var C=document.createDocumentFragment();if(m){for(var w=i.startContainer;!sf.base.isNullOrUndefined(w)&&"PRE"!==w.nodeName&&w!==l;)w=w.parentElement;if(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(w)||"PRE"!==w.nodeName){this.insertTempNode(i,t,e,s,l);var M=!0,S=void 0,x=void 0,N=void 0;for(this.contentsDeleted||i.deleteContents();t.firstChild;)if("#text"!==t.firstChild.nodeName||""!==t.firstChild.textContent.trim())if("#text"===t.firstChild.nodeName&&M||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0&&M){if(v=t.firstChild,sf.base.isNullOrUndefined(t.previousElementSibling)){var O="DIV"===h?sf.base.createElement("div"):sf.base.createElement("p");t.parentElement.insertBefore(O,t)}"BR"===t.previousElementSibling.nodeName?t.parentElement.insertBefore(t.firstChild,t):t.previousElementSibling.appendChild(t.firstChild)}else v=t.firstChild,"#text"===t.firstChild.nodeName||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(S?(N.appendChild(t.firstChild),C.appendChild(N)):((x="DIV"===h?sf.base.createElement("div"):sf.base.createElement("p")).appendChild(t.firstChild),C.appendChild(x)),N=x,S=!0):(C.appendChild(t.firstChild),S=!1),M=!1;else sf.base.detach(t.firstChild);t.parentNode.replaceChild(C,t)}else i.insertNode(t),v=t.lastChild}else if(f){var E=sf.base.createElement("span",{className:"tempSpan"}),I=sf.base.closest(i.startContainer.parentElement,"a");if(3===i.startContainer.nodeType&&I&&sf.base.closest(I,"span")){var T=this.getImmediateBlockNode(i.startContainer,l);T.querySelectorAll("br").length>0&&sf.base.detach(T.querySelector("br")),sf.base.closest(I,"span").appendChild(E)}else i.insertNode(E);for(;t.firstChild;)v=t.firstChild,C.appendChild(t.firstChild);E.parentNode.replaceChild(C,E)}else{for(;t.firstChild;)v=t.firstChild,C.appendChild(t.firstChild);p?u.parentNode.replaceChild(C,u):(i.deleteContents(),sf.base.isNullOrUndefined(d)||sf.base.detach(d),sf.base.isNullOrUndefined(c)?l.appendChild(C):c.parentNode.appendChild(C))}"#text"===v.nodeName?this.placeCursorEnd(v,t,n,o,l):this.cursorPos(v,t,n,o,l,h)},e.placeCursorEnd=function(e,t,i,n,s){for(e="BR"===e.nodeName?sf.base.isNullOrUndefined(e.previousSibling)?e.parentNode:e.previousSibling:e;!sf.base.isNullOrUndefined(e)&&"#text"!==e.nodeName&&"IMG"!==e.nodeName&&"BR"!==e.nodeName&&"HR"!==e.nodeName;){if(!sf.base.isNullOrUndefined(e.lastChild)&&"P"===e.lastChild.nodeName&&""===e.lastChild.innerHTML){var o=sf.base.createElement("br");e.lastChild.appendChild(o)}e=e.lastChild}"IMG"===(e=sf.base.isNullOrUndefined(e)?t:e).nodeName?this.imageFocus(e,i,n):i.setSelectionText(n,e,e,e.textContent.length,e.textContent.length),this.removeEmptyElements(s)},e.getNodeCollection=function(e,t,i){var n=[];return e.startOffset===e.endOffset&&e.startContainer===e.endContainer&&"BR"!==e.startContainer.nodeName&&e.startContainer.childNodes.length>0&&("TD"===e.startContainer.nodeName||3!==e.startContainer.nodeType&&i.classList&&i.classList.contains("pasteContent"))?n.push(e.startContainer.childNodes[e.endOffset]):n=t.getInsertNodeCollection(e),n},e.insertTempNode=function(e,t,i,n,s){if(e.startContainer!==s||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.endOffset-1])||"TABLE"!==e.startContainer.childNodes[e.endOffset-1].nodeName)if(e.startContainer!==s||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.endOffset])||"TABLE"!==e.startContainer.childNodes[e.endOffset].nodeName)if(e.startContainer===e.endContainer&&3!==e.startContainer.nodeType&&"HR"===t.firstChild.nodeName)e.startContainer.classList.contains("e-content")||"BODY"===e.startContainer.nodeName?e.startContainer.appendChild(t):e.startContainer.parentNode.insertBefore(t,e.startContainer);else{var o=this.getImmediateBlockNode(i[i.length-1],s);if((sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.parentElement))&&3!==e.endContainer.nodeType&&(o=e.endContainer,e.setEnd(o,e.endContainer.textContent.length)),"BODY"===o.nodeName&&e.startContainer===e.endContainer&&1===e.startContainer.nodeType&&(o=e.startContainer),o.closest("LI")&&t&&t.firstElementChild&&("OL"===t.firstElementChild.tagName||"UL"===t.firstElementChild.tagName))for(var r=void 0;t.firstElementChild.lastElementChild&&"LI"===t.firstElementChild.lastElementChild.tagName;)(r=t.firstElementChild.lastElementChild).style.removeProperty("margin-left"),r.style.removeProperty("margin-top"),r.style.removeProperty("margin-bottom"),t.firstElementChild.insertAdjacentElement("afterend",r);if("TD"===o.nodeName||"TH"===o.nodeName||"TR"===o.nodeName){var a=sf.base.createElement("span",{className:"tempSpan"});e.insertNode(a),a.parentNode.replaceChild(t,a)}else{var l=new Z,h=this.getNodeCollection(e,l,t)[this.getNodeCollection(e,l,t).length-1],d=void 0;if("BR"!==h.nodeName&&"HR"!==h.nodeName&&("#text"!==h.nodeName||sf.base.isNullOrUndefined(h.parentElement)||"LI"!==h.parentElement.nodeName)||sf.base.isNullOrUndefined(h.parentElement)||0!==h.parentElement.textContent.trim().length){if(("#text"===h.nodeName||"BR"===h.nodeName)&&!sf.base.isNullOrUndefined(h.parentElement)&&("LI"===h.parentElement.nodeName||o===s&&h.parentElement===o)&&h.parentElement.textContent.trim().length>0)return d=h,"LI"!==h.parentElement.nodeName||sf.base.isNullOrUndefined(h.nextSibling)||"BR"!==h.nextSibling.nodeName||sf.base.detach(h.nextSibling),e.collapsed||e.deleteContents(),e.insertNode(t),void(this.contentsDeleted=!0);d=n.GetSpliceNode(e,o)}else d=h,"LI"!==h.parentElement.nodeName||sf.base.isNullOrUndefined(h.nextSibling)||"BR"!==h.nextSibling.nodeName||sf.base.detach(h.nextSibling);d.parentNode.replaceChild(t,d)}}else e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset]);else sf.base.isNullOrUndefined(e.startContainer.childNodes[e.endOffset-1].nextSibling)?e.startContainer.appendChild(t):e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset-1].nextSibling)},e.cursorPos=function(e,t,i,n,s,o){e.classList.add("lastNode"),s.innerHTML=function(e,t){var i=document.createElement("div");i.innerHTML=e,i.setAttribute("class","tempDiv");var n=document.createElement("div");if(i.childNodes.length>0){for(var s=void 0,o=void 0,r=void 0;i.firstChild;)"#text"===i.firstChild.nodeName&&(i.firstChild.textContent.indexOf("\n")<0||""!==i.firstChild.textContent.trim())||p.indexOf(i.firstChild.nodeName.toLocaleLowerCase())>=0?s?(o.appendChild(i.firstChild),o=r,s=!0):"BR"===t?(n.appendChild(i.firstChild),o=n):(r=sf.base.createElement("p"),n.appendChild(r),r.appendChild(i.firstChild),o=r,s=!0):"#text"===i.firstChild.nodeName&&("\n"===i.firstChild.textContent||i.firstChild.textContent.indexOf("\n")>=0&&""===i.firstChild.textContent.trim())?sf.base.detach(i.firstChild):(n.appendChild(i.firstChild),s=!1);for(var a=n.querySelectorAll("table"),l=0;l<a.length;l++){"0"===a[l].getAttribute("border")&&a[l].removeAttribute("border");for(var h=a[l].querySelectorAll("td"),d=0;d<h.length;d++)"none"===h[d].style.borderLeft&&h[d].style.removeProperty("border-left"),"none"===h[d].style.borderRight&&h[d].style.removeProperty("border-right"),"none"===h[d].style.borderBottom&&h[d].style.removeProperty("border-bottom"),"none"===h[d].style.borderTop&&h[d].style.removeProperty("border-top"),"none"===h[d].style.border&&h[d].style.removeProperty("border");a[l].classList.contains("e-rte-table")||a[l].classList.add("e-rte-table")}var c=n.querySelectorAll("img");for(l=0;l<c.length;l++)c[l].classList.contains("e-rte-image")||c[l].classList.add("e-rte-image"),c[l].classList.contains("e-imginline")||c[l].classList.contains("e-imgbreak")||c[l].classList.add("e-imginline")}return n.innerHTML}(s.innerHTML,o),e=s.querySelector(".lastNode"),sf.base.isNullOrUndefined(e)||(this.placeCursorEnd(e,t,i,n,s),e.classList.remove("lastNode"),0===e.classList.length&&e.removeAttribute("class"))},e.imageFocus=function(e,t,i){var n=document.createTextNode(" ");e.parentNode.insertBefore(n,e.nextSibling),t.setSelectionText(i,e.nextSibling,e.nextSibling,0,0)},e.getImmediateBlockNode=function(e,t){do{e=e.parentNode}while(e&&W.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.findDetachEmptyElem=function(e){var t;sf.base.isNullOrUndefined(e.parentElement)?t=null:t=!(e.parentElement.textContent.length>0&&e.parentElement.textContent.match(/\u00a0/g)&&e.parentElement.textContent.match(/\u00a0/g).length>0)&&""===e.parentElement.textContent.trim()&&"true"!==e.parentElement.contentEditable&&sf.base.isNullOrUndefined(e.parentElement.querySelector("img"))?this.findDetachEmptyElem(e.parentElement):e;return t},e.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=Array.from(t).filter((function(e){return!e.closest("svg")&&!e.closest("canvas")})),n=0;n<i.length;n++){var s=!0;if("DIV"===i[n].tagName&&(s="none"===i[n].style.borderBottom||""===i[n].style.borderBottom),Q.indexOf(i[n].tagName.toLowerCase())<0&&s){var o=this.findDetachEmptyElem(i[n]);sf.base.isNullOrUndefined(o)||sf.base.detach(o)}}},e.closestEle=function(e,t){for(var i=e;i&&1===i.nodeType;){if(i.parentNode===t||!sf.base.isNullOrUndefined(i.parentNode.tagName)&&-1!==V.indexOf(i.parentNode.tagName.toLocaleLowerCase()))return i;i=i.parentNode}return null},e.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],e.contentsDeleted=!1,e}(),me=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-LINK",this.linkCommand,this)},e.prototype.linkCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(e);break;case"openlink":this.openLink(e);break;case"removelink":this.removeLink(e)}},e.prototype.createLink=function(e){var t=!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent.length>0&&sf.base.closest(e.item.selectParent[0],"a");if(t=sf.base.isNullOrUndefined(t)?!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent.length>0?e.item.selectParent[0]:null:t,sf.base.isNullOrUndefined(t)||"A"!==t.tagName){var i=new Z,n=i.getRange(this.parent.currentDocument);"#text"!==n.endContainer.nodeName||n.startContainer.textContent.length!==n.endOffset+1||" "!==n.endContainer.textContent.charAt(n.endOffset)||sf.base.isNullOrUndefined(n.endContainer.nextSibling)||"A"!==n.endContainer.nextSibling.nodeName||(i.setSelectionText(this.parent.currentDocument,n.startContainer,n.endContainer,n.startOffset,n.endOffset+1),n=i.getRange(this.parent.currentDocument));var s=!!sf.base.isNullOrUndefined(e.item.text)||e.item.text.replace(/ /g,"").localeCompare(n.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(e.event&&"keydown"===e.event.type&&(32===e.event.keyCode||13===e.event.keyCode)||"Paste"===e.item.action||n.collapsed||s){var o=this.createAchorNode(e);o.innerText=""===e.item.text?e.item.url:e.item.text;var r=o.innerText.replace(/  +/g,(function(e){return" ".repeat(e.length)}));if(o.innerText=r,e.item.selection.restore(),ge.Insert(this.parent.currentDocument,o,this.parent.editableElement),!e.event||"keydown"!==e.event.type||32!==e.event.keyCode&&13!==e.event.keyCode){d="Paste"===e.item.action?o.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,o.childNodes[0],o.childNodes[0],d,o.childNodes[0].textContent.length)}else{var a=e.item.selection.range.startContainer;a.textContent=this.removeText(a.textContent,e.item.text)}}else this.createLinkNode(e)}else{var l=t,h="";if(sf.base.isNullOrUndefined(e.item.url)||l.setAttribute("href",e.item.url),sf.base.isNullOrUndefined(e.item.title)||l.setAttribute("title",e.item.title),sf.base.isNullOrUndefined(e.item.text)||""===e.item.text||(h=l.innerText,l.innerText=e.item.text),sf.base.isNullOrUndefined(e.item.target)?(l.removeAttribute("target"),l.removeAttribute("aria-label")):(l.setAttribute("target",e.item.target),l.setAttribute("aria-label",e.item.ariaLabel)),h===e.item.text)e.item.selection.setSelectionText(this.parent.currentDocument,l,l,1,1),e.item.selection.restore();else{var d="Paste"===e.item.action?l.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,l.childNodes[0],l.childNodes[0],d,l.childNodes[0].textContent.length)}}e.callBack&&e.callBack({requestType:"Links",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.createLinkNode=function(e){for(var t,i,n=new Z,s=new ue,o=n.getRange(this.parent.currentDocument),r=this.getSelectionNodes(n.getNodeCollection(o)),a=n.save(o,this.parent.currentDocument),l=[],h=[],d=[],c=[],p=[],u=0;u<r.length;u++)r[u]=s.GetSpliceNode(o,r[u]),l[u]=r[u];for(var f=0;f<l.length;f++){var g=!0;for(t=l[f];!0===g;){if("A"===t.parentNode.nodeName){var m=t.parentNode;t.parentNode.parentNode.insertBefore(m.firstChild,m),t.parentNode.removeChild(m)}this.isBlockNode(t.parentNode)||0===l.length||0===f||f===l.length-1||3===o.startContainer.nodeType?(h[f]=t,g=!1):t=t.parentNode}}f=0;for(var v=0;f<h.length;f++)if(0===f&&(p[v]=h[f]),h.length>1&&f<h.length-1){if(h[f].parentElement===h[f+1].parentElement&&h[f]===h[f+1])continue;p[v+1]=h[f+1],v++}var b=0;c[b]=this.createAchorNode(e);for(f=0;f<p.length;f++)if(0===f&&(i=p[f].cloneNode(!0),c[f].appendChild(i)),f<p.length-1)if(p[f].parentNode===p[f+1].parentNode){var y=p[f+1].cloneNode(!0);c[b].appendChild(y)}else c[b+=1]=this.createAchorNode(e),i=p[f+1].cloneNode(!0),c[b].appendChild(i);this.parent.nodeSelection.setRange(document,a.range);f=0;for(var C=0,w=0;f<=p.length;f++)0===f&&(p[f].parentNode.insertBefore(c[C],p[f].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,c[C]),d[w]=p[f],w++),f<p.length-1&&(p[f].parentNode===p[f+1].parentNode?(d[w]=p[f+1],w++):(C+=1,p[f+1].parentNode.insertBefore(c[C],p[f+1]),d[w]=p[f+1],w++));for(f=0;f<d.length;f++)d[f].parentNode&&d[f].parentNode.removeChild(d[f])},e.prototype.createAchorNode=function(e){var t=sf.base.createElement("a",{className:"e-rte-anchor",attrs:{href:e.item.url,title:sf.base.isNullOrUndefined(e.item.title)||""===e.item.title?e.item.url:e.item.title}});return sf.base.isNullOrUndefined(e.item.target)||t.setAttribute("target",e.item.target),t},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)3===e[t].nodeType&&""!==e[t].textContent.trim()||"IMG"!==e[t].nodeName&&(e.splice(t,1),t--);return e.reverse()},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&W.indexOf(e.tagName.toLowerCase())>=0},e.prototype.removeText=function(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]===t&&(i.splice(n,1),n--);return i.join(" ")+" "},e.prototype.openLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeLink=function(e){var t=this.parent.domNode.blockNodes();if(t.length<2){this.parent.domNode.setMarker(e.item.selection);for(var i=sf.base.closest(e.item.selectParent[0],"a"),n=i||e.item.selectParent[0],s=n.parentNode,o=[];n.firstChild;null)o.push(s.insertBefore(n.firstChild,n));s.removeChild(n),o&&1===o.length&&(e.item.selection.startContainer=e.item.selection.getNodeArray(o[o.length-1],!0),e.item.selection.endContainer=e.item.selection.startContainer),e.item.selection=this.parent.domNode.saveMarker(e.item.selection)}else for(var r=0;r<t.length;r++)for(var a=t[r].querySelectorAll("a"),l=0;l<a.length;l++)this.parent.currentDocument.getSelection().containsNode(a[l],!0)&&(a[l].outerHTML=a[l].innerHTML);e.item.selection.restore(),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),ve=function(){function e(e){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("alignment-type",this.applyAlignment,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:e.callBack}),e.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:e.callBack}),e.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:e.callBack}),e.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getTableNode=function(e){var t=e.startContainer.nodeType===Node.ELEMENT_NODE?e.startContainer:e.startContainer.parentNode;return[sf.base.closest(t,"td,th")]},e.prototype.applyAlignment=function(e){var t="Table"===e.value,i=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.nodeSelection.save(i,this.parent.currentDocument);if(t)sf.base.setStyleAttribute(this.getTableNode(i)[0],{"text-align":this.alignments[e.subCommand]});else{this.parent.domNode.setMarker(n);for(var s=this.parent.domNode.blockNodes(),o=0;o<s.length;o++){var r=s[o];sf.base.setStyleAttribute(r,{"text-align":this.alignments[e.subCommand]})}var a=this.parent.domNode.getImageTagInSelection();for(o=0;o<a.length;o++){var l=[];l.push(a[o]),this.parent.imgObj.imageCommand({item:{selectNode:l},subCommand:e.subCommand,value:e.subCommand,callBack:e.callBack,selector:e.selector})}this.parent.editableElement.focus(),n=this.parent.domNode.saveMarker(n),u()&&f(this.parent.editableElement,e.selector),n.restore()}e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:t?this.getTableNode(i):this.parent.domNode.blockNodes()})},e}(),be=function(){function e(e){this.indentValue=20,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("indent-type",this.applyIndents,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:e.callBack}),e.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyIndents=function(e){var t=this.parent.editableElement,i=t.classList.contains("e-rtl"),n=this.parent.nodeSelection.getRange(this.parent.currentDocument),s=this.parent.nodeSelection.save(n,this.parent.currentDocument);this.parent.domNode.setMarker(s);for(var o=this.parent.domNode.blockNodes(),r=o.slice(),a=[],l=0;l<r.length;l++)"LI"!==r[l].tagName&&"LI"===r[l].parentNode.tagName?(o.splice(o.indexOf(r[l]),1),a.push(r[l].parentNode)):"LI"===r[l].tagName&&(o.splice(o.indexOf(r[l]),1),a.push(r[l]));a.length>0&&this.parent.observer.notify("keydown-handler",{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:"Indent"!==e.subCommand,which:9,action:"indent"},ignoreDefault:!0});for(l=0;l<o.length;l++){var h=o[l],d=i?h.style.marginRight:h.style.marginLeft,c=void 0;"Indent"===e.subCommand?(c=""===d?this.indentValue+"px":parseInt(d,null)+this.indentValue+"px",i?h.style.marginRight=c:h.style.marginLeft=c):(c=""===d||"0px"===d?"":parseInt(d,null)-this.indentValue+"px",i?h.style.marginRight=c:h.style.marginLeft=c)}t.focus(),u()&&f(t,e.selector),(s=this.parent.domNode.saveMarker(s)).restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e}(),ye="e-img-caption",Ce=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(_,this.imageCommand,this)},e.prototype.imageCommand=function(e){switch(e.value.toString().toLowerCase()){case"image":case"replace":this.createImage(e);break;case"insertlink":this.insertImageLink(e);break;case"openimagelink":this.openImageLink(e);break;case"editimagelink":this.editImageLink(e);break;case"removeimagelink":this.removeImageLink(e);break;case"remove":this.removeImage(e);break;case"alttext":this.insertAltTextImage(e);break;case"dimension":this.imageDimension(e);break;case"caption":this.imageCaption(e);break;case"justifyleft":this.imageJustifyLeft(e);break;case"justifycenter":this.imageJustifyCenter(e);break;case"justifyright":this.imageJustifyRight(e);break;case"inline":this.imageInline(e);break;case"break":this.imageBreak(e)}},e.prototype.createImage=function(e){var t=this,i=!1;if(e.item.url=sf.base.isNullOrUndefined(e.item.url)||"undefined"===e.item.url?e.item.src:e.item.url,sf.base.isNullOrUndefined(e.item.selectParent)||"IMG"!==e.item.selectParent[0].tagName){var n=sf.base.createElement("img");this.setStyle(n,e),sf.base.isNullOrUndefined(e.item.selection)||e.item.selection.restore(),sf.base.isNullOrUndefined(e.selector)||"pasteCleanupModule"!==e.selector?ge.Insert(this.parent.currentDocument,n,this.parent.editableElement):e.callBack({requestType:"Images",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[n]})}else{var s=e.item.selectParent[0];i=!0,this.setStyle(s,e,i)}if(e.callBack&&(sf.base.isNullOrUndefined(e.selector)||!sf.base.isNullOrUndefined(e.selector)&&"pasteCleanupModule"!==e.selector)){var o=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],r="Replace"===e.value||i?e.item.selectParent[0]:sf.base.Browser.isIE?o.previousSibling:o.previousElementSibling;r.addEventListener("load",(function(){"Replace"===e.value&&i||e.callBack({requestType:"Images",editorMode:"HTML",event:e.event,range:t.parent.nodeSelection.getRange(t.parent.currentDocument),elements:[r]})}))}"Replace"===e.value&&(e.item.subCommand="Replace",this.callBack(e))},e.prototype.setStyle=function(e,t,i){var n;if(sf.base.isNullOrUndefined(t.item.url)||e.setAttribute("src",t.item.url),i)for(var s={"e-imgcenter":"e-imgcenter","e-imgright":"e-imgright","e-imgleft":"e-imgleft"},o=e.classList,r=0;r<o.length;r++)sf.base.isNullOrUndefined(s[o[r]])||(n=s[o[r]]);e.setAttribute("class","e-rte-image"+(sf.base.isNullOrUndefined(t.item.cssClass)?"":" "+t.item.cssClass)+(sf.base.isNullOrUndefined(n)?"":" "+n)),sf.base.isNullOrUndefined(t.item.altText)||e.setAttribute("alt",t.item.altText),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.width)||e.setAttribute("width",this.calculateStyleValue(t.item.width.width)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.height)||e.setAttribute("height",this.calculateStyleValue(t.item.height.height)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.minHeight)||(e.style.minHeight=this.calculateStyleValue(t.item.height.minHeight)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.maxHeight)||(e.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.insertImageLink=function(e){var t=sf.base.createElement("a",{attrs:{href:e.item.url}});e.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(e.item.selection.restore(),t.setAttribute("contenteditable","true")),t.appendChild(e.item.selectNode[0]),sf.base.isNullOrUndefined(e.item.target)||t.setAttribute("target",e.item.target),sf.base.isNullOrUndefined(e.item.ariaLabel)||t.setAttribute("aria-label",e.item.ariaLabel),ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.callBack(e)},e.prototype.openImageLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeImageLink=function(e){var t=e.item.selectParent[0];if(t.classList.contains("e-img-caption")){var i=sf.base.select(".e-img-wrap",t),n=sf.base.select(".e-img-inner",t),s=n.cloneNode(!0);sf.base.detach(sf.base.select("a",t)),sf.base.detach(n),i.appendChild(e.item.insertElement),i.appendChild(s)}else sf.base.detach(t),sf.base.Browser.isIE&&e.item.selection&&e.item.selection.restore(),ge.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement);this.callBack(e)},e.prototype.editImageLink=function(e){e.item.selectNode[0].parentElement.href=e.item.url,sf.base.isNullOrUndefined(e.item.target)?(e.item.selectNode[0].parentElement.removeAttribute("target"),e.item.selectNode[0].parentElement.removeAttribute("aria-label")):(e.item.selectNode[0].parentElement.target=e.item.target,e.item.selectNode[0].parentElement.ariaLabel=e.item.ariaLabel),this.callBack(e)},e.prototype.removeImage=function(e){sf.base.closest(e.item.selectNode[0],"a")&&("A"!==e.item.selectNode[0].parentElement.nodeName||sf.base.isNullOrUndefined(e.item.selectNode[0].parentElement.innerText))?sf.base.detach(sf.base.closest(e.item.selectNode[0],"a")):sf.base.isNullOrUndefined(sf.base.closest(e.item.selectNode[0],"."+ye))?sf.base.detach(e.item.selectNode[0]):sf.base.detach(sf.base.closest(e.item.selectNode[0],"."+ye)),this.callBack(e)},e.prototype.insertAltTextImage=function(e){e.item.selectNode[0].setAttribute("alt",e.item.altText),this.callBack(e)},e.prototype.imageDimension=function(e){var t=e.item.selectNode[0];t.style.height="",t.style.width="","auto"!==e.item.width?t.style.width=sf.base.formatUnit(e.item.width):t.removeAttribute("width"),"auto"!==e.item.height?t.style.height=sf.base.formatUnit(e.item.height):t.removeAttribute("height"),this.callBack(e)},e.prototype.imageCaption=function(e){ge.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement),this.callBack(e)},e.prototype.imageJustifyLeft=function(e){var t=e.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgleft")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgright"),sf.base.addClass([t.parentElement],"e-imgleft"),sf.base.addClass([t],"e-imgleft")):sf.base.addClass([t],"e-imgleft"),this.callBack(e))},e.prototype.imageJustifyCenter=function(e){var t=e.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgcenter")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgleft"),sf.base.removeClass([t.parentElement],"e-imgright"),sf.base.addClass([t.parentElement],"e-imgcenter"),sf.base.addClass([t],"e-imgcenter")):sf.base.addClass([t],"e-imgcenter"),this.callBack(e))},e.prototype.imageJustifyRight=function(e){var t=e.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgright")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgleft"),sf.base.addClass([t.parentElement],"e-imgright"),sf.base.addClass([t],"e-imgright")):sf.base.addClass([t],"e-imgright"),this.callBack(e))},e.prototype.imageInline=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.addClass([t],"e-imginline"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgbreak"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgcenter"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-caption-inline")),this.callBack(e)},e.prototype.imageBreak=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),sf.base.addClass([t],"e-imgbreak"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-caption-inline"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgcenter"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgbreak")),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),we=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-AUDIO",this.audioCommand,this)},e.prototype.audioCommand=function(e){var t,i=e.value.toString().toLowerCase();switch("inline"!==i&&"break"!==i&&"audioremove"!==i||(t=e.item.selectNode[0]),i){case"audio":case"audioreplace":this.createAudio(e);break;case"inline":t.removeAttribute("class"),t.closest(".e-audio-wrap").style.display="inline-block",sf.base.addClass([t],["e-rte-audio","e-audio-inline","e-audio-focus"]),this.callBack(e);break;case"break":t.removeAttribute("class"),t.closest(".e-audio-wrap").style.display="block",sf.base.addClass([t],["e-audio-break","e-rte-audio","e-audio-focus"]),this.callBack(e);break;case"audioremove":sf.base.detach(t),this.callBack(e)}},e.prototype.createAudio=function(e){var t,i=this,n=!1;if(!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent[0].classList&&(e.item.selectParent[0].classList.contains("e-clickelem")||e.item.selectParent[0].classList.contains("e-audio-wrap"))){var s=e.item.selectParent[0].querySelector("source");this.setStyle(s,e),n=!0}else{t=sf.base.createElement("span",{className:"e-audio-wrap",attrs:{contentEditable:"false",title:e.item.fileName}});var o=sf.base.createElement("audio",{className:"e-rte-audio e-audio-inline",attrs:{controls:""}}),r=sf.base.createElement("source"),a=sf.base.createElement("span",{className:"e-clickelem"});if(this.setStyle(r,e),o.appendChild(r),a.appendChild(o),t.appendChild(a),sf.base.isNullOrUndefined(e.item.selection)||e.item.selection.restore(),ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),null===t.nextElementSibling){var l=sf.base.createElement("br");t.parentNode.insertBefore(l,t.nextSibling)}}if(e.callBack&&(sf.base.isNullOrUndefined(e.selector)||!sf.base.isNullOrUndefined(e.selector)&&"pasteCleanupModule"!==e.selector)){var h=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],d="AudioReplace"===e.value||n?e.item.selectParent[0].querySelector("audio"):sf.base.Browser.isIE?h:h.querySelector("audio");d.addEventListener("loadeddata",(function(){"AudioReplace"===e.value&&n||e.callBack({requestType:"Audios",editorMode:"HTML",event:e.event,range:i.parent.nodeSelection.getRange(i.parent.currentDocument),elements:[d]})})),n&&d.load()}},e.prototype.setStyle=function(e,t){sf.base.isNullOrUndefined(t.item.url)||e.setAttribute("src",t.item.url);var i=t.item.fileName?t.item.fileName.split(".").pop().toLowerCase():t.item.url?t.item.url.split(".").pop().toLowerCase():"";e.type="opus"===i?"audio/ogg":"m4a"===i?"audio/mp4":t.item.fileName&&t.item.fileName.split(".").length>0?"audio/"+t.item.fileName.split(".")[t.item.fileName.split(".").length-1]:t.item.url&&t.item.url.split(".").length>0?"audio/"+t.item.url.split(".")[t.item.url.split(".").length-1]:""},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Me=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-VIDEO",this.videoCommand,this)},e.prototype.videoCommand=function(e){var t,i,n,s=e.value.toString().toLowerCase();switch("video"!==s&&"videoreplace"!==s&&(i=(t=e.item.selectNode[0]).closest(".e-embed-video-wrap"),n=t.closest(".e-video-clickelem")),s){case"video":case"videoreplace":this.createVideo(e);break;case"videodimension":this.videoDimension(e);break;case"inline":t.removeAttribute("class"),i&&(i.style.display="inline-block"),n&&(t.parentElement.style.cssFloat=""),sf.base.addClass([t],["e-rte-video","e-video-inline","e-video-focus"]),this.callBack(e);break;case"break":t.removeAttribute("class"),i&&(i.style.display="block"),n&&(t.parentElement.style.cssFloat=""),sf.base.addClass([t],["e-video-break","e-rte-video","e-video-focus"]),this.callBack(e);break;case"justifyleft":t.removeAttribute("class"),i&&(i.style.display="block"),n&&(t.parentElement.style.cssFloat="left"),sf.base.addClass([t],["e-rte-video","e-video-left"]),this.callBack(e);break;case"justifycenter":t.removeAttribute("class"),i&&(i.style.display="block"),n&&(t.parentElement.style.cssFloat=""),sf.base.addClass([t],["e-rte-video","e-video-center"]),this.callBack(e);break;case"justifyright":t.removeAttribute("class"),i&&(i.style.display="block"),n&&(t.parentElement.style.cssFloat="right"),sf.base.addClass([t],["e-rte-video","e-video-right"]),this.callBack(e);break;case"videoremove":sf.base.detach(t.parentElement),this.callBack(e)}},e.prototype.createVideo=function(e){var t,i,n,s=this,o=!1;if("VideoReplace"!==e.value||sf.base.isNullOrUndefined(e.item.selectParent)||"VIDEO"!==e.item.selectParent[0].tagName)if("VideoReplace"===e.value&&!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent[0].classList&&e.item.selectParent[0].classList.contains("e-video-clickelem"))e.item.selectParent[0].innerHTML=e.item.fileName,this.setStyle(e.item.selectParent[0].firstElementChild,e,e.item.selectParent[0].firstElementChild);else{if(e.item.isEmbedUrl){t=sf.base.createElement("span",{className:"e-embed-video-wrap",attrs:{contentEditable:"false"}});var r=sf.base.createElement("span",{className:"e-video-clickelem"}),a=sf.base.createElement("template");a.innerHTML=e.item.fileName,r.appendChild(a.content),i=n=r.firstElementChild,this.setStyle(n,e,i),t.appendChild(r)}else t=sf.base.createElement("span",{className:"e-video-wrap",attrs:{contentEditable:"false",title:e.item.fileName}}),i=sf.base.createElement("video",{className:"e-rte-video e-video-inline",attrs:{controls:""}}),n=sf.base.createElement("source"),this.setStyle(n,e,i),i.appendChild(n),t.appendChild(i);if(sf.base.isNullOrUndefined(e.item.selection)||e.item.selection.restore(),ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),null===t.nextElementSibling){var l=sf.base.createElement("br");t.parentNode.insertBefore(l,t.nextSibling)}}else{var h=e.item.selectParent[0].querySelector("source");this.setStyle(h,e,h),o=!0}if(e.callBack&&(sf.base.isNullOrUndefined(e.selector)||!sf.base.isNullOrUndefined(e.selector)&&"pasteCleanupModule"!==e.selector)){var d=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],c="VideoReplace"===e.value||o?e.item.isEmbedUrl?e.item.selectParent[0].querySelector("iframe"):e.item.selectParent[0]:sf.base.Browser.isIE?d:e.item.isEmbedUrl?d.querySelector("iframe"):d.lastElementChild;c.addEventListener("IFRAME"!==c.tagName?"loadeddata":"load",(function(){"VideoReplace"===e.value&&o||(e.item.isEmbedUrl&&c&&c.classList.add("e-rte-embed-url"),e.callBack({requestType:"Videos",editorMode:"HTML",event:e.event,range:s.parent.nodeSelection.getRange(s.parent.currentDocument),elements:[c]}))})),o&&c.load(),-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&(i.addEventListener("play",(function(){s.editAreaVideoClick(e)})),i.addEventListener("pause",(function(){s.editAreaVideoClick(e)})))}},e.prototype.editAreaVideoClick=function(e){e.callBack({requestType:"VideosPlayPause",editorMode:"HTML",event:e.event})},e.prototype.setStyle=function(e,t,i){""===t.item.url||sf.base.isNullOrUndefined(t.item.url)||e.setAttribute("src",t.item.url),t.item.isEmbedUrl||(e.type=t.item.fileName&&t.item.fileName.split(".").length>0?"video/"+t.item.fileName.split(".")[t.item.fileName.split(".").length-1]:t.item.url&&t.item.url.split(".").length>0?"video/"+t.item.url.split(".")[t.item.url.split(".").length-1]:""),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.width)||i.setAttribute("width",sf.base.formatUnit(t.item.width.width)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.height)||i.setAttribute("height",sf.base.formatUnit(t.item.height.height)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.minWidth)||(i.style.minWidth=sf.base.formatUnit(t.item.width.minWidth)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.maxWidth)||(i.style.maxWidth=sf.base.formatUnit(t.item.width.maxWidth)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.minHeight)||(i.style.minHeight=sf.base.formatUnit(t.item.height.minHeight)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.maxHeight)||(i.style.maxHeight=sf.base.formatUnit(t.item.height.maxHeight))},e.prototype.videoDimension=function(e){var t=e.item.selectNode[0].classList.contains("e-video-clickelem")?e.item.selectNode[0].querySelector("iframe"):e.item.selectNode[0];t.style.height="",t.style.width="","auto"!==e.item.width?t.style.width=sf.base.formatUnit(e.item.width):t.removeAttribute("width"),"auto"!==e.item.height?t.style.height=sf.base.formatUnit(e.item.height):t.removeAttribute("height"),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Se=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-TABLE",this.createTable,this),this.parent.observer.on("INSERT-ROW",this.insertRow,this),this.parent.observer.on("INSERT-COLUMN",this.insertColumn,this),this.parent.observer.on("DELETE-ROW",this.deleteRow,this),this.parent.observer.on("DELETE-COLUMN",this.deleteColumn,this),this.parent.observer.on("REMOVE-TABLE",this.removeTable,this),this.parent.observer.on("TABLE-HEADER",this.tableHeader,this),this.parent.observer.on("TABLE_VERTICAL_ALIGN",this.tableVerticalAlign,this),this.parent.observer.on("TABLE_MERGE",this.cellMerge,this),this.parent.observer.on("TABLE_HORIZONTAL_SPLIT",this.HorizontalSplit,this),this.parent.observer.on("TABLE_VERTICAL_SPLIT",this.VerticalSplit,this),this.parent.observer.on("TABLE_MOVE",this.tableMove,this)},e.prototype.createTable=function(e){var t=sf.base.createElement("table",{className:"e-rte-table"}),i=sf.base.createElement("tbody");sf.base.isNullOrUndefined(e.item.width.width)||(t.style.width=this.calculateStyleValue(e.item.width.width)),sf.base.isNullOrUndefined(e.item.width.minWidth)||(t.style.minWidth=this.calculateStyleValue(e.item.width.minWidth)),sf.base.isNullOrUndefined(e.item.width.maxWidth)||(t.style.maxWidth=this.calculateStyleValue(e.item.width.maxWidth));for(var n=parseInt(e.item.width.width,10)>100?100/e.item.columns:parseInt(e.item.width.width,10)/e.item.columns,s=0;s<e.item.rows;s++){for(var o=sf.base.createElement("tr"),r=0;r<e.item.columns;r++){var a=sf.base.createElement("td");a.appendChild(sf.base.createElement("br")),a.style.width=n+"%",o.appendChild(a)}i.appendChild(o)}if(t.appendChild(i),e.item.selection.restore(),ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.removeEmptyNode(),e.item.selection.setSelectionText(this.parent.currentDocument,t.querySelector("td"),t.querySelector("td"),0,0),null===t.nextElementSibling){var l=void 0;"DIV"===e.enterAction?(l=sf.base.createElement("div")).appendChild(sf.base.createElement("br")):"BR"===e.enterAction?l=sf.base.createElement("br"):(l=sf.base.createElement("p")).appendChild(sf.base.createElement("br")),this.insertAfter(l,t)}return t.querySelector("td").classList.add("e-cell-select"),e.callBack&&e.callBack({requestType:"Table",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]}),t},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")>=0||e.indexOf("%")>=0||e.indexOf("auto")>=0)?e:e+"px"},e.prototype.removeEmptyNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty"),t=0;t<e.length;t++)sf.base.detach(e[t]);var i=this.parent.editableElement.querySelectorAll("li *:empty:not(img)");for(t=0;t<i.length;t++)sf.base.detach(i[t]),i.length===t+1&&(i=this.parent.editableElement.querySelectorAll("li *:empty:not(img)"),t=-1);var n=this.parent.editableElement.querySelectorAll("li:empty");for(t=0;t<n.length;t++)sf.base.detach(n[t])},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.getSelectedCellMinMaxIndex=function(e){for(var t=this.curTable.querySelectorAll(".e-cell-select"),i=0,n=e.length,s=0,o=e[0].length,r=0;i<t.length;i++){var a=this.getCorrespondingIndex(t[i],e),l=this.FindIndex(a[0],a[1],e);n=Math.min(a[0],n),s=Math.max(l[0],s),o=Math.min(a[1],o),r=Math.max(l[1],r)}return{startRow:n,endRow:s,startColumn:o,endColumn:r}},e.prototype.insertRow=function(e){var t="InsertRowBefore"!==e.item.subCommand,i=e.item.selection.range.startContainer;if("TH"!==i.nodeName&&"TD"!==i.nodeName&&(i=sf.base.closest(i.parentElement,"td,th")),"th"!==i.nodeName.toLowerCase()||"InsertRowBefore"!==e.item.subCommand){if(this.curTable=sf.base.closest(this.parent.nodeSelection.range.startContainer.parentElement,"table"),0===this.curTable.querySelectorAll(".e-cell-select").length){var n=this.curTable.rows[this.curTable.rows.length-1],s=n.cloneNode(!0);s.removeAttribute("rowspan"),this.insertAfter(s,n)}else{for(var o=this.getCorrespondingColumns(),r=this.getSelectedCellMinMaxIndex(o),a=t?r.endRow:r.startRow,l=sf.base.createElement("tr"),h=this.curTable.querySelectorAll("th.e-cell-select").length>0,d=0;d<o[a].length;d++)if(t&&a<o.length-1&&o[a][d]===o[a+1][d]||!t&&0<a&&o[a][d]===o[a-1][d])(0===d||0<d&&o[a][d]!==o[a][d-1])&&o[a][d].setAttribute("rowspan",(parseInt(o[a][d].getAttribute("rowspan"),10)+1).toString());else{var c=sf.base.createElement("td");c.appendChild(sf.base.createElement("br")),l.appendChild(c),c.setAttribute("style",o[h&&t&&o[a+1]?a+1:a][d].getAttribute("style"))}var p=void 0;p=h&&t?this.curTable.querySelector("tbody").childNodes[0]:this.curTable.rows[a],"InsertRowBefore"===e.item.subCommand||h?p.parentElement.insertBefore(l,p):this.insertAfter(l,p)}e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.insertColumn=function(e){var t=e.item.selection.range.startContainer;"TH"!==t.nodeName&&"TD"!==t.nodeName&&(t=sf.base.closest(t.parentElement,"td,th"));for(var i,n=sf.base.closest(t,"tr"),s=sf.base.closest(n,"table").rows,o=Array.prototype.slice.call(n.querySelectorAll(":scope > td, :scope > th")).indexOf(t),r=parseInt(e.item.width,10)/n.querySelectorAll(":scope > td, :scope > th").length,a=parseInt(e.item.width,10)/(n.querySelectorAll(":scope > td, :scope > th").length+1),l=sf.base.closest(n,"table"),h=sf.base.closest(n,"table").querySelectorAll("th,td"),d=0;d<h.length;d++)h[d].dataset.oldWidth=h[d].offsetWidth/l.offsetWidth*100+"%";for(d=0;d<s.length;d++){var c=(i=s[d].querySelectorAll(":scope > td, :scope > th")[o]).cloneNode(!0);c.innerHTML="",c.appendChild(sf.base.createElement("br")),c.removeAttribute("class"),c.removeAttribute("colspan"),c.removeAttribute("rowspan"),"InsertColumnLeft"===e.item.subCommand?i.parentElement.insertBefore(c,i):this.insertAfter(c,i),c.style.width=a.toFixed(4)+"%",delete c.dataset.oldWidth}for(d=0;d<h.length;d++)h[d].style.width=(Number(h[d].dataset.oldWidth.split("%")[0])*a/r).toFixed(4)+"%",delete h[d].dataset.oldWidth;e.item.selection.setSelectionText(this.parent.currentDocument,t,t,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.deleteColumn=function(e){var t=e.item.selection.range.startContainer;3===t.nodeType&&(t=sf.base.closest(t.parentElement,"td,th"));var i=sf.base.closest(t,"TH"===t.tagName?"thead":"tbody"),n=i&&Array.prototype.indexOf.call(i.childNodes,t.parentNode);if(this.curTable=sf.base.closest(t,"table"),1===sf.base.closest(t,"tr").querySelectorAll("th,td").length)e.item.selection.restore(),sf.base.detach(sf.base.closest(t.parentElement,"table"));else{for(var s=void 0,o=this.getCorrespondingColumns(),r=this.getSelectedCellMinMaxIndex(o),a=r.startColumn,l=r.endColumn,h=0;h<o.length;h++)for(var d=o[h],c=0;c<d.length;c++){var p=d[c],u=this.getCorrespondingIndex(p,o),f=parseInt(p.getAttribute("colspan"),10)||1;u[1]+(f-1)>=a&&u[1]<=l&&(f>1?p.setAttribute("colspan",(f-1).toString()):(sf.base.detach(p),s=c,sf.base.Browser.isIE&&(e.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))))}if(s>-1){var g=i.children[n],m=g&&g.children[s<=g.children.length-1?s:s-1];m&&(e.item.selection.setSelectionText(this.parent.currentDocument,m,m,0,0),m.classList.add("e-cell-select"))}}if(e.callBack){var v=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;if("TD"!==v.nodeName){var b=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,y=v.children[b];y&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,y,0)}e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.deleteRow=function(e){var t=e.item.selection.range.startContainer;3===t.nodeType&&(t=sf.base.closest(t.parentElement,"td,th"));var i,n=Array.prototype.indexOf.call(t.parentNode.childNodes,t);this.curTable=sf.base.closest(t,"table");var s,o,r=this.getCorrespondingColumns(),a=this.getSelectedCellMinMaxIndex(r);if(1===this.curTable.rows.length)e.item.selection.restore(),sf.base.detach(sf.base.closest(t.parentElement,"table"));else for(s=a.endRow;s>=a.startRow;s--){for(i=this.curTable.rows[s],o=0;o<r[s].length;o++){if((0===o||r[s][o]!==r[s][o-1])&&1<parseInt(r[s][o].getAttribute("rowspan"),10)){var l=parseInt(r[s][o].getAttribute("rowspan"),10)-1;if(1===l){r[s][o].removeAttribute("rowspan");var h=this.getMergedRow(this.getCorrespondingColumns())[o];if(h){var d=h.cloneNode(!0);d.innerHTML="<br>",h.parentElement&&h.parentElement.insertBefore(d,h)}}else r[s][o].setAttribute("rowspan",l.toString())}if(s<r.length-1&&r[s][o]===r[s+1][o]&&(0===s||r[s][o]!==r[s-1][o])){var c=r[s][o],p=void 0;for(p=o;0<p&&r[s][p]===r[s][p-1];p--)0===p?this.curTable.rows[s+1].prepend(c):r[s+1][p-1].insertAdjacentElement("afterend",c)}}var u=i.rowIndex;this.curTable.deleteRow(u);var f=sf.base.isNullOrUndefined(this.curTable.rows[u])?this.curTable.querySelectorAll("tbody tr")[u-1]:this.curTable.querySelectorAll("tbody tr")[u],g=f&&f.querySelectorAll("td")[n];g?(e.item.selection.setSelectionText(this.parent.currentDocument,g,g,0,0),g.classList.add("e-cell-select")):(e.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))}e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.getMergedRow=function(e){for(var t,i=0;i<e.length;i++)e[i].length!==this.curTable.rows[0].childNodes.length&&(t=e[i]);return t},e.prototype.removeTable=function(e){var t=e.item.selection.range.startContainer;t=3===t.nodeType?t.parentNode:t;var i=sf.base.closest(t.parentElement,"table");i&&(e.item.selection.restore(),sf.base.detach(i)),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableHeader=function(e){var t=!1,i=e.item.selection.range.startContainer;i=3===i.nodeType?i.parentNode:i;var n=sf.base.closest(i.parentElement,"table");if([].slice.call(n.childNodes).forEach((function(e){"THEAD"===e.nodeName&&(t=!0)})),n&&!t){for(var s=n.querySelector("tr").childElementCount,o=0,r=0;r<s;r++)o+=parseInt(n.querySelector("tr").children[r].getAttribute("colspan"),10)||1;for(var a=n.createTHead().insertRow(0),l=0;l<o;l++){var h=sf.base.createElement("th");h.appendChild(sf.base.createElement("br")),a.appendChild(h)}}else n.deleteTHead();e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableVerticalAlign=function(e){"AlignTop"===e.item.subCommand?e.item.tableCell.style.verticalAlign="top":"AlignMiddle"===e.item.subCommand?e.item.tableCell.style.verticalAlign="middle":e.item.tableCell.style.verticalAlign="bottom",e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.cellMerge=function(e){sf.base.isNullOrUndefined(this.curTable)&&(this.curTable=sf.base.closest(this.parent.nodeSelection.range.startContainer.parentElement,"table"));var t=this.curTable.querySelectorAll(".e-cell-select");if(!(t.length<2)){this.mergeCellContent();var i=this.getSelectedMinMaxIndexes(this.getCorrespondingColumns()),n=t[0],s=n.parentElement.querySelectorAll(".e-cell-select");i.startColumn<i.endColumn&&n.setAttribute("colspan",(i.endColumn-i.startColumn+1).toString()),i.startRow<i.endRow&&n.setAttribute("rowspan",(i.endRow-i.startRow+1).toString());for(var o=0,r=s.length-1;r>=0;r--)o+=parseFloat(s[r].style.width);n.style.width=o+"%";for(var a=1;a<=t.length-1;a++)sf.base.detach(t[a]);for(a=0;a<this.curTable.rows.length;a++)""===this.curTable.rows[a].innerHTML&&sf.base.detach(this.curTable.rows[a]);this.updateRowSpanStyle(i.startRow,i.endRow,this.getCorrespondingColumns()),this.updateColSpanStyle(i.startColumn,i.endColumn,this.getCorrespondingColumns()),e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),this.parent.nodeSelection&&n&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.updateColSpanStyle=function(e,t,i){var n,s,o,r,a=0,l=0,h=i;if(e<(t=Math.min(t,h[0].length-1))){for(;s<=t;s++)if(!(e<s&&h[0][s]===h[0][s-1])&&1<(a=Math.min(parseInt(h[0][s].getAttribute("colspan"),10)||1,t-e+1))&&h[0][s]===h[0][s+1])for(l=a-1,n=1;n<h.length;n++){if(h[n][s]!==h[n-1][s])for(o=s;o<s+a;o++)if(1<(r=parseInt(h[n][o].getAttribute("colspan"),10)||1)&&h[n][o]===h[n][o+1])o+=l=Math.min(l,r-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&this.updateCellAttribute(h,l,"colspan",0,h.length-1,e,t)}},e.prototype.updateRowSpanStyle=function(e,t,i){var n,s,o,r,a=0,l=0,h=i;if(e<(t=Math.min(t,h.length-1))){for(n=e;n<=t;n++)if(!(e<n&&h[n][0]===h[n-1][0])&&h[n][0]&&1<(a=Math.min(parseInt(h[n][0].getAttribute("rowspan"),10)||1,t-e+1))&&h[n][0]===h[n+1][0])for(l=a-1,s=1;s<h[0].length;s++)if(h[n][s]!==h[n][s-1]){for(o=n;o<n+a;o++)if(1<(r=parseInt(h[o][s].getAttribute("rowspan"),10)||1)&&h[o][s]===h[o+1][s])o+=l=Math.min(l,r-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&this.updateCellAttribute(h,l,"rowspan",e,t,0,h[0].length-1)}},e.prototype.updateCellAttribute=function(e,t,i,n,s,o,r){var a,l,h;for(a=n;a<=s;a++)for(l=o;l<=r;l++)n<a&&e[a][l]===e[a-1][l]||o<l&&e[a][l]===e[a][l-1]||1<(h=parseInt(e[a][l].getAttribute(i),10)||1)&&(1<h-t?e[a][l].setAttribute(i,(h-t).toString()):e[a][l].removeAttribute(i))},e.prototype.mergeCellContent=function(){for(var e=this.curTable.querySelectorAll(".e-cell-select"),t="<br>"===e[0].innerHTML?"":e[0].innerHTML,i=1;i<e.length;i++)"<br>"!==e[i].innerHTML&&(t=t?t+"<br>"+e[i].innerHTML:t+e[i].innerHTML);e[0].innerHTML=t},e.prototype.getSelectedMinMaxIndexes=function(e){var t=this.curTable.querySelectorAll(".e-cell-select");if(0<t.length){for(var i=e.length,n=0,s=e[0].length,o=0,r=0;r<t.length;r++){var a=this.getCorrespondingIndex(t[r],e),l=this.FindIndex(a[0],a[1],e);i=Math.min(a[0],i),n=Math.max(l[0],n),s=Math.min(a[1],s),o=Math.max(l[1],o)}return{startRow:i,endRow:n,startColumn:s,endColumn:o}}return null},e.prototype.HorizontalSplit=function(e){var t=e.item.selection.range.startContainer;if(this.curTable=sf.base.closest(t.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.activeCell.cloneNode(!0);i.removeAttribute("class"),i.innerHTML="</br>";var n=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),s=this.getCorrespondingColumns(),o=this.activeCell.getAttribute("rowspan")?parseInt(this.activeCell.getAttribute("rowspan"),10):1;if(o>1){var r=Math.ceil(o/2);1<r?this.activeCell.setAttribute("rowspan",r.toString()):this.activeCell.removeAttribute("rowspan"),1<o-r?i.setAttribute("rowspan",(o-r).toString()):i.removeAttribute("rowspan");var a,l=void 0;for(a=n[0]+Math.ceil(o/2),l=0===n[1]?n[1]:n[1]-1;0<=l&&(s[a][l]===s[a][l-1]||0<a&&s[a][l]===s[a-1][l]);)l--;-1===l?this.curTable.rows[a].firstChild?this.curTable.rows[a].prepend(i):this.curTable.appendChild(i):s[a][l].insertAdjacentElement("afterend",i)}else{var h=sf.base.createElement("tr");h.appendChild(i);for(var d=s[n[0]],c=0;c<=d.length-1;c++)d[c]!==d[c-1]&&d[c]!==this.activeCell&&d[c].setAttribute("rowspan",((parseInt(d[c].getAttribute("rowspan"),10)?parseInt(d[c].getAttribute("rowspan"),10):1)+1).toString());this.activeCell.parentNode.insertAdjacentElement("afterend",h)}e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.VerticalSplit=function(e){var t=e.item.selection.range.startContainer;if(this.curTable=sf.base.closest(t.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.curTable.rows,n=this.activeCell.cloneNode(!0);n.removeAttribute("class"),n.innerHTML="</br>";var s=parseFloat(this.activeCell.style.width)/2;if("TH"===this.activeCell.tagName&&isNaN(s)){for(var o=this.curTable.querySelector("tr").childElementCount,r=0;r<o;r++)parseInt(this.curTable.querySelector("tr").children[r].getAttribute("colspan"),10)||1;s=parseFloat((this.activeCell.offsetWidth/2/this.curTable.offsetWidth*100).toFixed(1))}var a=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),l=this.getCorrespondingColumns(),h=parseInt(this.activeCell.getAttribute("colspan"),10);if(h>1)1<Math.ceil(h/2)?this.activeCell.setAttribute("colspan",(h/2).toString()):this.activeCell.removeAttribute("colspan"),1<h-h/2?n.setAttribute("colspan",(h-h/2).toString()):n.removeAttribute("colspan");else for(r=0;r<=i.length-1;r++)if(0===r||l[r][a[1]]!==l[r-1][a[1]]){var d=l[r][a[1]];d!==this.activeCell&&d.setAttribute("colspan",((parseInt(d.getAttribute("colspan"),10)?parseInt(d.getAttribute("colspan"),10):1)+1).toString())}this.activeCell.style.width=s+"%",n.style.width=s+"%",this.activeCell.parentNode.insertBefore(n,this.activeCell.nextSibling),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.getCorrespondingColumns=function(){for(var e=[],t=this.curTable.rows,i=0;i<=t.length-1;i++)for(var n=t[i],s=0,o=0;o<=n.children.length-1;o++){for(var r=n.children[o],a=r,l=parseInt(a.getAttribute("colspan"),10)||1,h=parseInt(a.getAttribute("rowspan"),10)||1,d=i;d<i+h;d++)for(var c=s;c<s+l;c++)e[d]||(e[d]=[]),e[d][c]?s++:e[d][c]=r;s+=0}return e},e.prototype.FindIndex=function(e,t,i){var n,s;for(n=e+1,s=t+1;n<i.length;){if(i[n][t]!==i[e][t]){n--;break}n++}for(n===i.length&&n--;s<i[e].length;){if(i[e][s]!==i[e][t]){s--;break}s++}return s===i[e].length&&s--,[n,s]},e.prototype.getCorrespondingIndex=function(e,t){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)if(t[i][n]===e)return[i,n];return[]},e.prototype.highlightCells=function(e,t,i,n,s){var o,r,a,l,h=e,d=t,c=i,p=n,u=new xe;for(o=h;o<=d;o++){for(((1<(parseInt(s[o][c].getAttribute("rowspan"),10)||1)||1<(parseInt(s[o][c].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(s[o][c],s))[0],a[1],s))||(1<(parseInt(s[o][p].getAttribute("rowspan"),10)||1)||1<(parseInt(s[o][p].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(s[o][p],s))[0],a[1],s)))&&(h=Math.min(a[0],h),d=Math.max(l[0],d),c=Math.min(a[1],c),p=Math.max(l[1],p)),r=c;r<=p;r++)((1<(parseInt(s[h][r].getAttribute("rowspan"),10)||1)||1<(parseInt(s[h][r].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(s[h][r],s))[0],a[1],s))||(1<(parseInt(s[d][r].getAttribute("rowspan"),10)||1)||1<(parseInt(s[d][r].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(s[d][r],s))[0],a[1],s)))&&(h=Math.min(a[0],h),d=Math.max(l[0],d),c=Math.min(a[1],c),p=Math.max(l[1],p));u=h===e&&d===t&&c===i&&p===n?{startRow:e,endRow:t,startColumn:i,endColumn:n}:this.highlightCells(h,d,c,p,s)}return u},e.prototype.tableMove=function(e){this.activeCell=e.selectNode[0];var t=e.event.target,i=this.activeCell.tagName,n=t.tagName;if(this.curTable=sf.base.closest(t,"table"),this.curTable.querySelectorAll(".e-cell-select").length>1&&this.parent.nodeSelection.Clear(this.parent.currentDocument),"TD"===t.tagName||"TH"===t.tagName||i===n){for(var s=Array.prototype.slice.call(this.activeCell.parentElement.parentElement.children).indexOf(this.activeCell.parentElement),o=Array.prototype.slice.call(this.activeCell.parentElement.children).indexOf(this.activeCell),r=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),a=Array.prototype.slice.call(t.parentElement.children).indexOf(t),l=this.curTable.querySelectorAll(".e-cell-select"),h=l.length-1;h>=0;h--)this.activeCell!==l[h]&&l[h].classList.remove("e-cell-select");if(s!==r||o!==a){for(var d=this.getCorrespondingColumns(),c=this.getCorrespondingIndex(this.activeCell,d),p=this.getCorrespondingIndex(t,d),u=this.highlightCells(Math.min(c[0],p[0]),Math.max(c[0],p[0]),Math.min(c[1],p[1]),Math.max(c[1],p[1]),d),f=u.startRow;f<=u.endRow;f++)for(var g=u.startColumn;g<=u.endColumn;g++)d[f][g].classList.add("e-cell-select");this.parent.nodeSelection.range&&(this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,this.parent.nodeSelection.range.endContainer,0,0),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0))}}},e}(),xe=function(){},Ne=function(){function e(){}return e.applyFormat=function(e,t,i,n,s,o,r){this.enterAction=n;if(["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1||"formatPainter"===s){"backgroundcolor"===t&&""===s&&(s="transparent");var a,l=new Z,h=new de(i,e),d=new ue,c=new q,p=l.getRange(e),g=l.save(p,e),m=p.collapsed?l.getSelectionNodeCollection(p):l.getSelectionNodeCollectionBr(p),v=!1,b=!1,y=!1,C=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1;if(p.collapsed){var w=c.getFormattedNode(p.startContainer,t,i),M=sf.base.isNullOrUndefined(w)?null:null===w.getAttribute("style")?w.nodeName:w.nodeName+"[style='"+w.getAttribute("style")+"']";if(m.length>0)v=!0,p=d.GetCursorRange(e,p,m[0]);else if(3===p.startContainer.nodeType&&(p.startContainer.parentElement.childElementCount>0&&p.startOffset>0&&"br"!==p.startContainer.parentElement.firstElementChild.tagName.toLowerCase()||!sf.base.isNullOrUndefined(w)&&w===p.startContainer.parentElement.closest(M)&&0!==p.startContainer.parentElement.closest(M).textContent.replace(new RegExp(String.fromCharCode(8203),"g"),"").trim().length))v=!0,p=d.GetCursorRange(e,p,p.startContainer),m.push(p.startContainer);else{var S=this.insertCursorNode(e,l,p,c,d,t,s,i);l.endContainer=l.startContainer=l.getNodeArray(S,!0);var x="BR"===S.nodeName&&S.parentNode.childNodes;sf.base.isNullOrUndefined(x)||1!==x.length||"BR"!==x[0].nodeName||0!==m.length?l.endOffset=l.startOffset=1:(l.setSelectionText(e,p.startContainer,p.endContainer,0,0),y=!0),"BR"===S.nodeName&&0===S.parentNode.textContent.length&&(y=!0)}}a=p.collapsed;for(var N=!1,O=0;O<m.length;O++){var E=c.getFormattedNode(m[O],t,i);null===E&&("subscript"===t?N=null!==(E=c.getFormattedNode(m[O],"superscript",i)):"superscript"===t&&(N=null!==(E=c.getFormattedNode(m[O],"subscript",i)))),0===O&&null===E&&(b=!0),m[O]=null===E||b&&!C?this.insertFormat(e,m,O,E,a,b,C,p,d,t,s,r,h,i):this.removeFormat(m,O,E,a,b,C,p,d,t,s,l,i,h),l=this.applySelection(m,l,d,O,v)}u()&&f(i,o),y||g.restore(),N&&this.applyFormat(e,t,i,n)}},e.insertCursorNode=function(e,t,i,n,s,o,r,a){var l=t.getNodeCollection(i),h=new de(a,e),d=l.length>0?l.length>1&&i.startContainer===i.endContainer?this.getCursorFormat(n,l,o,a):n.getFormattedNode(l[0],o,a):null,c=null;if(d){if(c=l[0],8203===d.firstChild.textContent.charCodeAt(0)&&3===d.firstChild.nodeType){var p=new RegExp(String.fromCharCode(8203),"g"),u=void 0;d.firstChild===c?(c.textContent=d.parentElement&&(h.isBlockNode(d.parentElement)&&d.parentElement.textContent.length<=1?d.parentElement.childElementCount>1:0===d.childElementCount)&&(d.parentElement.textContent.length>1||d.parentElement.firstChild&&1===d.parentElement.firstChild.nodeType)?c.textContent:c.textContent.replace(p,""),u=c):(d.firstChild.textContent=d.firstChild.textContent.replace(p,""),u=d.firstChild);var f=void 0;if(0===u.textContent.length)if(sf.base.isNullOrUndefined(u.previousSibling)){if(!sf.base.isNullOrUndefined(u.parentElement)&&0===u.parentElement.textContent.length){var g=document.createElement("BR");u.parentElement.appendChild(g),sf.base.detach(u),c=g,t.setCursorPoint(e,c.parentElement,0)}}else c=u.previousSibling,f=u.textContent.length-1,t.setCursorPoint(e,u,f)}["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(o)>-1?("fontcolor"===o?d.style.color=r:"fontname"===o?d.style.fontFamily=r:"fontsize"===o?d.style.fontSize=r:d.style.backgroundColor=r,c=d):pe.unwrap(d)}else l.length>1&&i.startOffset>0&&l[0].firstElementChild&&"br"===l[0].firstElementChild.tagName.toLowerCase()&&(l[0].innerHTML=""),1!==l.length||0!==i.startOffset||"BR"!==l[0].nodeName&&"BR"!==l[0].nextSibling.nodeName||sf.base.detach("#text"===l[0].nodeName?l[0].nextSibling:l[0]),c=this.getInsertNode(e,i,o,r).firstChild;return c},e.getCursorFormat=function(e,t,i,n){for(var s,o=0;o<t.length;o++)s=t[o].lastElementChild?t[o].lastElementChild:t[o];return e.getFormattedNode(s,i,n)},e.removeFormat=function(e,t,i,n,s,o,r,a,l,h,d,c,p){var u,f,g=null,m="#text"===r.startContainer.nodeName?r.startContainer.textContent.substring(r.startOffset,r.startContainer.textContent.length):r.startContainer.textContent,v=e[t].textContent;if(r.startContainer!==r.endContainer||0!==r.startOffset||r.endOffset!==r.startContainer.length){var b=[],y=e[t];do{b.push(d.getIndex(y)),y=y.parentNode}while(y&&y!==i);if("BR"!==e[t].nodeName&&(y=g=n&&i.textContent.length-1===r.startOffset?a.SplitNode(r,i,!0):a.GetSpliceNode(r,i)),n){for(var C=g;null!==C.firstChild&&3!==C.firstChild.nodeType;null)C=C.firstChild;C.innerHTML="&#8203;",e[t]=C.firstChild}else{for(;y&&y.childNodes.length>0&&b.length-1>=0&&y.childNodes.length>b[b.length-1];)y=y.childNodes[b[b.length-1]],b.pop();if("BR"!==e[t].nodeName)if(3!==y.nodeType||n&&""===y.nodeValue){var w=document.createElement("div");w.innerHTML="&#8203;",3!==y.nodeType?(y.insertBefore(w.firstChild,y.firstChild),e[t]=y.firstChild):(y.parentNode.insertBefore(w.firstChild,y),e[t]=y.previousSibling,y.parentNode.removeChild(y))}else e[t]=y}}else if(o&&!e[t].contains(i)&&3===e[t].nodeType&&e[t].textContent!==i.textContent){for(var M=e[t].textContent===e[t].wholeText,S=e[t],x=this.GetFormatNode(l,h);S&&S.textContent===S.parentElement.textContent;)S=S.parentElement;if(M&&i.textContent!==S.textContent){var N=[],O=this.getPriorityFormatNode(S,c);return O&&O.textContent===S.textContent&&(S=O),N.push(S),this.applyStyles(N,0,x),e[t]}}if("backgroundcolor"===l&&(u=i.style.fontSize),"fontsize"===l){var E=sf.base.closest(e[t].parentElement,"span[style*=background-color]");sf.base.isNullOrUndefined(E)||(f=E.style.backgroundColor)}var I,T=i.getAttribute("style"),D=i.tagName;if("A"===D&&"underline"===l)i.style.textDecoration="none",I=[i];else{I=pe.unwrap(i);var j=e[t].parentElement;sf.base.isNullOrUndefined(j)||"li"===j.tagName.toLowerCase()||(j=sf.base.closest(j,"li")),sf.base.isNullOrUndefined(j)||"li"!==j.tagName.toLowerCase()||j.textContent.trim()!==e[t].textContent.trim()||("bold"===l?j.style.fontWeight="normal":"italic"===l&&(j.style.fontStyle="normal"))}if(I[0]&&!o)for(var A=S=I[t]?I[t]:I[0];S&&S.parentElement&&S.parentElement!==c;S=S){var z=void 0;if(z="SPAN"===i.nodeName?S.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&S.parentElement.getAttribute("style")===T:S.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase(),S.parentElement&&z&&(S.parentElement.childElementCount>1||r.startOffset>1)){if(A.parentElement&&A.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&r.startOffset===r.endOffset&&1!==A.nodeType&&!sf.base.isNullOrUndefined(A.textContent)&&A.parentElement.childElementCount>1&&(r.setStart(A,0),r.setEnd(A,A.textContent.length),a.SplitNode(r,A.parentElement,!1)),"span"===S.parentElement.tagName.toLocaleLowerCase()&&"underline"===i.style.textDecoration&&"underline"!==S.parentElement.style.textDecoration){S=S.parentElement;continue}pe.unwrap(S.parentElement),S=sf.base.isNullOrUndefined(S.parentElement)||p.isBlockNode(S.parentElement)?S.parentElement:A}else S=S.parentElement}if(I.length>0&&o){for(var k=0;k<I.length;k++)if(3!==I[k].nodeType||I[k].textContent&&I[k].textContent.trim().length>0){I[k]=pe.Wrap(I[k],this.GetFormatNode(l,h,D,T));j=e[t].parentElement;sf.base.isNullOrUndefined(j)||"li"===j.tagName.toLowerCase()||(j=sf.base.closest(j,"li")),sf.base.isNullOrUndefined(j)||"li"!==j.tagName.toLowerCase()||j.textContent.trim()!==e[t].textContent.trim()||"fontname"===l&&(j.style.fontFamily=h),I[k].textContent===m&&(0===k?r.setStartBefore(I[k]):k===I.length-1&&r.setEndAfter(I[k]))}var P=e[t].parentElement;if(sf.base.isNullOrUndefined(u)||""===u||(P.style.fontSize=u),sf.base.isNullOrUndefined(f)||""===f||(P.style.backgroundColor=f),"backgroundcolor"===l&&!sf.base.isNullOrUndefined(u)&&""!==u&&P.parentElement.innerHTML===P.outerHTML){var L=P.parentElement;L.parentElement.insertBefore(P,L),sf.base.detach(L)}if("fontsize"===l||"fontcolor"===l){j=e[t].parentElement;for(var B=e[t].parentElement;!sf.base.isNullOrUndefined(B)&&"li"!==B.tagName.toLowerCase();)j=B=B.parentElement;k=t;for(var R="";k>=0&&!sf.base.isNullOrUndefined(j)&&"li"===j.tagName.toLowerCase()&&j.textContent.replace("/​/g","").trim().includes(e[k].textContent.trim());)R=" "+e[k].textContent.trim()+R,k--;var U=!1,H=0,F=!1;if(!sf.base.isNullOrUndefined(j)&&j.childNodes)for(var Y=0;Y<j.childNodes.length;Y++)"OL"===j.childNodes[Y].nodeName&&(H++,U=!0);if(sf.base.isNullOrUndefined(j)||"li"!==j.tagName.toLowerCase()||j.textContent.split("​").join("").trim()!==R.split("​").join("").trim()){if(!sf.base.isNullOrUndefined(j)&&"li"===j.tagName.toLowerCase()&&U){if(U&&H>0)for(var q=0;q<j.childNodes.length;q++)e[t].textContent===j.childNodes[q].textContent&&e[t].textContent===v&&j.textContent.replace("/​/g","").trim().includes(R.split("​").join("").trim())&&(F=!0);if(F){for(var _=0;_<j.childNodes.length;_++)"OL"===j.childNodes[_].nodeName&&(j.childNodes[_].style.fontSize="initial");"fontsize"===l?j.style.fontSize=h:(j.style.color=h,j.style.textDecoration="inherit")}}}else"fontsize"===l?j.style.fontSize=h:(j.style.color=h,j.style.textDecoration="inherit")}}return e[t]},e.insertFormat=function(e,t,i,n,s,o,r,a,l,h,d,c,p,u){if(s)if("uppercase"!==h&&"lowercase"!==h){f=this.getInsertNode(e,a,h,d);t[i]=f.firstChild,l.position=1}else l.position=a.startOffset;else if(null===n&&o||r){if("BR"!==t[i].nodeName&&(t[i]=l.GetSpliceNode(a,t[i]),t[i].textContent=l.TrimLineBreak(t[i].textContent)),"uppercase"===h||"lowercase"===h)t[i].textContent="uppercase"===h?t[i].textContent.toLocaleUpperCase():t[i].textContent.toLocaleLowerCase();else if(!0!==r||""!==d){var f=this.GetFormatNode(h,d);if("formatPainter"===d||r){for(var g=t[i].parentElement,m=t[i].parentElement;!sf.base.isNullOrUndefined(m)&&"li"!==m.tagName.toLowerCase();)g=m=m.parentElement;if(sf.base.isNullOrUndefined(g)||"li"!==g.tagName.toLowerCase()||g.textContent.trim()!==t[i].textContent.trim()||("fontsize"===h?g.style.fontSize=d:"fontcolor"===h?(g.style.color=d,g.style.textDecoration="inherit"):"fontname"===h&&(g.style.fontFamily=d)),"formatPainter"===d)return this.insertFormatPainterElem(t,i,a,l,c,p);var v=t[i],b=this.getPriorityFormatNode(v,u);if(!sf.base.isNullOrUndefined(b)||r){var y=sf.base.isNullOrUndefined(b)?v:b;if(y=sf.base.isNullOrUndefined(b)||""===b.style.fontSize?y:y.firstChild,sf.base.isNullOrUndefined(b)||"fontsize"===h)for(;y;){var C=y.parentElement.textContent.trim()===t[i].textContent.trim(),w=y.parentElement;if(p.isBlockNode(w)||!C||"SPAN"===w.nodeName&&w.classList.contains("e-img-inner"))break;y=w}var M=[];if("fontcolor"===h){var S=sf.base.closest(t[i].parentElement,"A");sf.base.isNullOrUndefined(S)||S.firstChild.textContent.trim()!==t[i].textContent.trim()||(y=t[i])}t[i].textContent.trim()!==y.textContent.trim()&&(y=t[i]),M[0]=y,this.applyStyles(M,0,f)}else t[i]=this.applyStyles(t,i,f)}else{t[i]=this.applyStyles(t,i,f);g=t[i].parentElement;sf.base.isNullOrUndefined(g)||"li"===g.tagName.toLowerCase()||(g=sf.base.closest(g,"li")),sf.base.isNullOrUndefined(g)||"li"!==g.tagName.toLowerCase()||g.textContent.trim()!==t[i].textContent.trim()||("bold"===h?g.style.fontWeight="bold":"italic"===h&&(g.style.fontStyle="italic"))}}}else t[i]=l.GetSpliceNode(a,t[i]);return t[i]},e.applyStyles=function(e,t,i){return"BR"===e[t].nodeName&&"BR"===this.enterAction||(e[t]=t===e.length-1||"BR"===e[t].nodeName?pe.Wrap(e[t],i):pe.WrapBefore(e[t],i,!0),e[t]=this.getChildNode(e[t],i)),e[t]},e.getPriorityFormatNode=function(e,t){var i,n,s,o=new q,r=o.getFormattedNode(e,"fontsize",t);return sf.base.isNullOrUndefined(r)?(n=o.getFormattedNode(e,"backgroundcolor",t),sf.base.isNullOrUndefined(n)?(s=o.getFormattedNode(e,"fontname",t),sf.base.isNullOrUndefined(s)?(i=o.getFormattedNode(e,"fontcolor",t),sf.base.isNullOrUndefined(i)?null:i):s):n):r},e.getInsertNode=function(e,t,i,n){var s=this.GetFormatNode(i,n);if(s.innerHTML="&#8203;",sf.base.Browser.isIE){var o=e.createDocumentFragment();o.appendChild(s),t.insertNode(o)}else t.insertNode(s);return s},e.getChildNode=function(e,t){return null==e&&(t.innerHTML="&#8203;",e=t.firstChild),e},e.applySelection=function(e,t,i,n,s){return 1!==e.length||s?1===e.length&&s?(t.startContainer=t.getNodeArray(e[n],!0),t.endContainer=t.startContainer,t.startOffset=i.position,t.endOffset=i.position):0===n?(t.startContainer=t.getNodeArray(e[n],!0),t.startOffset=0):n===e.length-1&&(t.endContainer=t.getNodeArray(e[n],!1),t.endOffset=e[n].textContent.length):(t.startContainer=t.getNodeArray(e[n],!0),t.endContainer=t.startContainer,t.startOffset=0,t.endOffset=e[n].textContent.length),t},e.GetFormatNode=function(e,t,i,n){var s;switch(e){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.textDecoration="underline",s;case"strikethrough":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.textDecoration="line-through",s;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.color=t,s.style.textDecoration="inherit",s;case"fontname":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.fontFamily=t,s;case"fontsize":return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.fontSize=t,s;default:return s=document.createElement("span"),this.updateStyles(s,i,n),s.style.backgroundColor=t,s}},e.updateStyles=function(e,t,i){null!==i&&"SPAN"===t&&e.setAttribute("style",i)},e.insertFormatPainterElem=function(e,t,i,n,s,o){var r=o.isBlockNode(e[t].parentElement)?e[t]:e[t].parentElement;if(!o.isBlockNode(r))for(;r.textContent.trim()===r.parentElement.textContent.trim()&&!o.isBlockNode(r.parentElement);)r=r.parentElement;sf.base.isNullOrUndefined(r)||1!==r.nodeType||r.classList.contains("e-rte-img-caption")||r.classList.contains("e-img-inner")||this.formatPainterCleanup(t,e,r,i,n,o);var a=s.element;if(!sf.base.isNullOrUndefined(a)){var l=a.cloneNode(!0),h=l.querySelectorAll(s.lastChild.nodeName),d=void 0;h.length>0?d=h[h.length-1]:sf.base.isNullOrUndefined(l)||l.nodeName!==s.lastChild.nodeName||(d=l),d.textContent=e[t].textContent;var c=d.childNodes[0];e[t]=pe.Wrap(e[t],l),e[t].textContent="",e[t]=c}return e[t]},e.formatPainterCleanup=function(e,t,i,n,s,o){var r=["A","AUDIO","IMG","VIDEO","IFRAME"];if(0===e&&i.textContent.trim()!==t[e].textContent.trim()){s.SplitNode(n,i,!0);for(var a=t[e].parentElement.childNodes,l=0;l<a.length;l++)if(a[l].textContent.trim()===t[l].textContent.trim()){i.parentNode.insertBefore(a[l],i);break}for(var h=i.parentElement.childNodes,d=0;d<h.length;d++)""!==h[d].textContent.trim()&&0!==h[d].textContent.length||sf.base.detach(h[d])}else if(i.textContent.trim()!==t[e].textContent.trim())i.parentElement.insertBefore(t[e],i);else for(;!sf.base.isNullOrUndefined(i)&&3!==i.nodeType&&!o.isBlockNode(i);){var c=void 0;for(l=0;l<i.childNodes.length;l++){var p=i.childNodes[l];0!==p.textContent.trim().length&&3!==p.nodeType&&(c=i.childNodes[l])}-1===r.indexOf(i.tagName)&&pe.unwrap(i),i=c}},e.enterAction="P",e}(),Oe=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("selection-type",this.applySelection,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){(e.event.ctrlKey||e.event.metaKey)&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(e.event.action)>-1&&(e.event.preventDefault(),Ne.applyFormat(this.parent.currentDocument,e.event.action,this.parent.editableElement,e.enterAction),this.callBack(e,e.event.action))},e.prototype.applySelection=function(e){Ne.applyFormat(this.parent.currentDocument,e.subCommand.toLocaleLowerCase(),this.parent.editableElement,e.enterAction,e.value,e.selector),this.callBack(e,e.subCommand)},e.prototype.callBack=function(e,t){e.callBack&&e.callBack({requestType:t,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ee=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("inserthtml-type",this.applyHtml,this)},e.prototype.applyHtml=function(e){if(ge.Insert(this.parent.currentDocument,e.value,this.parent.editableElement,!0,e.enterAction),"pasteCleanup"===e.subCommand){var t=this.parent.editableElement.querySelectorAll(".pasteContent_RTE"),i=[].slice.call(t),n=this.parent.editableElement.querySelectorAll(".pasteContent_Img"),s=[].slice.call(n);e.callBack({requestType:e.subCommand,editorMode:"HTML",elements:i,imgElem:s})}else e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ie=function(){function e(){}return e.clear=function(e,t,i,n,s){this.domNode=new de(t,e),this.defaultTag="P"===i?this.defaultTag:"div";var o=new Z,r=new ue,a=o.getRange(e),l=a.collapsed?o.getSelectionNodeCollection(a):o.getSelectionNodeCollectionBr(a),h=o.save(a,e),d=!1;if(a.collapsed&&"ClearFormat"!==s&&(d=!0,a=r.GetCursorRange(e,a,l[0])),!a.collapsed){var c=void 0;if(c=l.length>0&&"BR"===l[0].nodeName&&sf.base.closest(l[0],"table")?r.GetSpliceNode(a,sf.base.closest(l[0],"table")):r.GetSpliceNode(a,l[l.length>1&&"IMG"===l[0].nodeName?1:0]),1===l.length)o.setSelectionContents(e,c),a=o.getRange(e);else if(l.length>1){for(var p=1,g=l[l.length-p];l.length<=p&&"BR"===l[l.length-p].nodeName;)p++,g=l[l.length-p];var m=r.GetSpliceNode(a,g);o.setSelectionText(e,c,m,0,3===m.nodeType?m.textContent.length:m.childNodes.length),a=o.getRange(e)}var v=o.getNodeCollection(a),b=v.slice();this.clearInlines(o.getSelectionNodes(b),b,o.getRange(e),r,t),this.reSelection(e,h,v),a=o.getRange(e);var y=(v=o.getNodeCollection(a)).slice();this.clearBlocks(e,y,t,r,o),u()&&f(t,n),this.reSelection(e,h,v)}d&&o.setCursorPoint(e,a.endContainer,a.endOffset)},e.reSelection=function(e,t,i){var n=t.getInsertNodes(i);t.startContainer=t.getNodeArray(n[0],!0,e),t.startOffset=0,t.endContainer=t.getNodeArray(n[n.length-1],!1,e);var s=n[n.length-1];t.endOffset=3===s.nodeType?s.textContent.length:s.childNodes.length,t.restore()},e.clearBlocks=function(e,t,i,n,s){for(var o=[],r=0;r<t.length;r++)this.BLOCK_TAGS.indexOf(t[r].nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[r])?o.push(t[r]):this.BLOCK_TAGS.indexOf(t[r].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[r].parentNode)&&i!==t[r].parentNode&&o.push(t[r].parentNode);o=this.spliceParent(o,t)[0],o=this.removeParent(o),this.unWrap(e,o,n,s)},e.spliceParent=function(e,t){for(var i=0;i<e.length;i++)for(var n=e[i].childNodes.length,s=0;s<n;s++)if(t.indexOf(e[i].childNodes[s])>0&&e[i].childNodes[s].childNodes.length>0&&(t=this.spliceParent([e[i].childNodes[s]],t)[1]),t.indexOf(e[i].childNodes[s])<=-1&&""!==e[i].childNodes[s].textContent.trim()){for(var o=0;o<n;o++)t.indexOf(e[i].childNodes[o])>-1&&t.splice(t.indexOf(e[i].childNodes[o]),1);s=e[i].childNodes.length;var r=e.indexOf(e[i].parentNode),a=t.indexOf(e[i].parentNode);r>-1&&e.splice(r,1),a>-1&&t.splice(a,1);var l=t.indexOf(e[i]);l>-1&&t.splice(l,1),e.splice(i,1),i--}return[e,t]},e.removeChild=function(e,t){var i=t.childNodes.length;if(i>0)for(var n=0;n<i;n++)e.indexOf(t.childNodes[n])>-1&&(e=this.removeChild(e,t.childNodes[n])).splice(e.indexOf(t.childNodes[n]),1);return e},e.removeParent=function(e){for(var t=0;t<e.length;t++)e.indexOf(e[t].parentNode)>-1&&((e=this.removeChild(e,e[t])).splice(t,1),t--);return e},e.unWrap=function(e,t,i,n){for(var s=0;s<t.length;s++)if(this.NONVALID_TAGS.indexOf(t[s].nodeName.toLowerCase())>-1&&t[s].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(t[s].parentNode.nodeName.toLowerCase())>-1&&(n.setSelectionText(e,t[s],t[s],0,t[s].childNodes.length),pe.unwrap(i.GetSpliceNode(n.getRange(e),t[s].parentNode))),"p"!==t[s].nodeName.toLocaleLowerCase()){!(this.NONVALID_PARENT_TAGS.indexOf(t[s].nodeName.toLowerCase())<0&&"p"!==t[s].parentNode.nodeName.toLocaleLowerCase())||("blockquote"===t[s].nodeName.toLocaleLowerCase()||"li"===t[s].nodeName.toLocaleLowerCase())&&this.IGNORE_PARENT_TAGS.indexOf(t[s].childNodes[0].nodeName.toLocaleLowerCase())>-1||1===t[s].childNodes.length&&"p"===t[s].childNodes[0].nodeName.toLocaleLowerCase()||pe.Wrap(t[s],e.createElement(this.defaultTag));var o=pe.unwrap(t[s]);1===o.length&&"p"===o[0].parentNode.nodeName.toLocaleLowerCase()&&(pe.Wrap(t[s],e.createElement(this.defaultTag)),pe.unwrap(t[s]));for(var r=0;r<o.length;r++)if(this.NONVALID_TAGS.indexOf(o[r].nodeName.toLowerCase())>-1)this.unWrap(e,[o[r]],i,n);else if(this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&"p"!==o[r].nodeName.toLocaleLowerCase()){var a=this.removeParent([o[r]]);this.unWrap(e,a,i,n)}else this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&o[r].parentNode.nodeName.toLocaleLowerCase()===o[r].nodeName.toLocaleLowerCase()?pe.unwrap(o[r]):this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&"p"===o[r].nodeName.toLocaleLowerCase()&&(pe.Wrap(o[r],e.createElement(this.defaultTag)),pe.unwrap(o[r]))}else pe.Wrap(t[s],e.createElement(this.defaultTag)),pe.unwrap(t[s])},e.clearInlines=function(e,t,i,n,s){for(var o=0;o<e.length;o++){for(var r=e[o],a=void 0;!this.domNode.isBlockNode(r)&&r.parentElement&&!r.parentElement.classList.contains("e-img-inner");)a=r,r=r.parentElement;a&&q.inlineTags.indexOf(a.nodeName.toLocaleLowerCase())>-1&&(n.GetSpliceNode(i,a),this.removeInlineParent(a))}},e.removeInlineParent=function(e){for(var t=pe.unwrap(e),i=0;i<t.length;i++)1===t[i].parentNode.childNodes.length&&!t[i].parentNode.classList.contains("e-img-inner")&&q.inlineTags.indexOf(t[i].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(t[i].parentNode):q.inlineTags.indexOf(t[i].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(t[i])},e.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","ul"],e.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],e.IGNORE_PARENT_TAGS=["ul","ol","table"],e.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],e.defaultTag="p",e}(),Te=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-type",this.applyClear,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"clear-format":this.applyClear({subCommand:"ClearFormat",callBack:e.callBack,enterAction:e.enterAction}),e.event.preventDefault()}},e.prototype.applyClear=function(e){"ClearFormat"===e.subCommand&&(Ie.clear(this.parent.currentDocument,this.parent.editableElement,e.enterAction,e.selector,e.subCommand),e.callBack&&e.callBack({requestType:e.subCommand,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},e}(),De=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=sf.base.isNullOrUndefined(t)?30:t.undoRedoSteps,this.undoRedoTimer=sf.base.isNullOrUndefined(t)?300:t.undoRedoTimer,this.addEventListener()}return e.prototype.addEventListener=function(){var e=sf.base.debounce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){this.parent.observer.off("keyup-handler",this.keyUp),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction)},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.getTextContentFromFragment=function(e){for(var t="",i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];n.nodeType===Node.TEXT_NODE?t+=n.textContent:n.nodeType===Node.ELEMENT_NODE&&(t+=this.getTextContentFromFragment(n))}return t},e.prototype.saveData=function(e){for(var t=(new Z).getRange(this.parent.currentDocument),i=this.parent.editableElement===t.startContainer.parentElement?t.startContainer.parentElement:t.startContainer,n=i.childNodes.length-1;n>=0;n--)!sf.base.isNullOrUndefined(i.childNodes[n])&&"#text"===i.childNodes[n].nodeName&&0===i.childNodes[n].textContent.length&&"IMG"!==i.childNodes[n].nodeName&&"BR"!==i.childNodes[n].nodeName&&i.childNodes[n].nodeName&&sf.base.detach(i.childNodes[n]);t=(new Z).getRange(this.parent.currentDocument);for(var s=(new Z).save(t,this.parent.currentDocument),o=this.parent.editableElement.cloneNode(!0),r=document.createDocumentFragment();o.firstChild;)r.appendChild(o.firstChild);var a={text:r,range:s};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===t.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===s.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===s.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===s.range.startContainer&&this.getTextContentFromFragment(this.undoRedoStack[this.undoRedoStack.length-1].text).trim()===this.getTextContentFromFragment(a.text).trim()||(this.undoRedoStack.push(a),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){var t=this.undoRedoStack[this.steps-1].range,i=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML="",this.parent.editableElement.appendChild(i.cloneNode(!0)),this.parent.editableElement.focus(),u()&&f(this.parent.editableElement,e.selector),t.restore(),this.steps--,e.callBack&&e.callBack({requestType:"Undo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){var t=this.undoRedoStack[this.steps+1].range,i=this.undoRedoStack[this.steps+1].text;this.parent.editableElement.innerHTML="",this.parent.editableElement.appendChild(i.cloneNode(!0)),this.parent.editableElement.focus(),u()&&f(this.parent.editableElement,e.selector),t.restore(),this.steps++,e.callBack&&e.callBack({requestType:"Redo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),je=function(){function e(e){this.olData=["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"],this.ulData=["disc","square","circle","disc","square","circle"],this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"],this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.borderStyle=["border-top","border-right","border-bottom","border-left"],this.upperRomanNumber=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX"],this.lowerRomanNumber=["i","ii","iii","iv","v","vi","vii","viii","ix","x","xi","xii","xiii","xiv","xv","xvi","xvii","xviii","xix","xx"],this.lowerGreekNumber=["α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","τ","υ","φ","χ","ψ","ω"],this.removableElements=["o:p","style"],this.listContents=[],this.cropImageDimensions=[],this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("ms_word_cleanup_plugin",this.wordCleanup,this)},e.prototype.wordCleanup=function(e){var t=sf.base.isNullOrUndefined(e.allowedStylePropertiesArray)?[]:e.allowedStylePropertiesArray,i=[],n=e.args.clipboardData.getData("text/HTML"),s=e.args.clipboardData.getData("text/rtf"),o=sf.base.createElement("p");o.setAttribute("id","MSWord-Content"),o.innerHTML=n;var r=/style='mso-width-source:/i;if(/class='?Mso|style='[^ ]*\bmso-/i.test(n)||/class="?Mso|style="[^ ]*\bmso-/i.test(n)||/(class="?Mso|class='?Mso|class="?Xl|class='?Xl|class=Xl|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument)/gi.test(n)||r.test(n)){this.imageConversion(o,s),n=n.replace(/<img[^>]+>/i,""),this.addListClass(o),i=this.cleanUp(o,i),sf.base.isNullOrUndefined(i[0])||"UL"===i[0].parentElement.tagName||"OL"===i[0].parentElement.tagName||this.listConverter(i),this.cleanList(o,"UL"),this.cleanList(o,"OL"),this.styleCorrection(o,t),this.removingComments(o),this.removeUnwantedElements(o),this.removeEmptyElements(o),this.removeEmptyAnchorTag(o),this.breakLineAddition(o),this.removeClassName(o),r.test(n)&&this.addTableBorderClass(o);var a=o.querySelectorAll("li");if(a.length>0)for(var l=0;l<a.length;l++)sf.base.isNullOrUndefined(a[l].style.marginLeft)||(a[l].style.marginLeft="");e.callBack(o.innerHTML,this.cropImageDimensions)}else e.callBack(o.innerHTML)},e.prototype.cleanList=function(e,t){for(var i=e.querySelectorAll(t+" div"),n=i.length-1;n>=0;n--){for(var s=i[n].parentNode;i[n].firstChild;)s.insertBefore(i[n].firstChild,i[n]);var o=this.findClosestListElem(i[n]);o&&this.insertAfter(i[n],o)}},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.findClosestListElem=function(e){for(var t;!sf.base.isNullOrUndefined(e);)e=sf.base.isNullOrUndefined(e.closest("ul"))||"UL"===e.tagName?"OL"!==e.tagName?e.closest("ol"):null:e.closest("ul"),t=sf.base.isNullOrUndefined(e)?t:e;return t},e.prototype.addListClass=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)!sf.base.isNullOrUndefined(t[i].getAttribute("style"))&&t[i].getAttribute("style").replace(/ /g,"").replace("\n","").indexOf("mso-list:l")>=0&&-1===t[i].className.toLowerCase().indexOf("msolistparagraph")&&"H"!==t[i].tagName.charAt(0)&&"LI"!==t[i].tagName&&"OL"!==t[i].tagName&&"UL"!==t[i].tagName&&t[i].classList.add("msolistparagraph")},e.prototype.addTableBorderClass=function(e){for(var t=e.querySelectorAll("table"),i=!1,n=0;n<t.length;n++){for(var s=0;s<this.borderStyle.length;s++)if(t[n].innerHTML.indexOf(this.borderStyle[s])>=0){i=!0;break}i&&(t[n].classList.add("e-rte-table-border"),i=!1)}},e.prototype.imageConversion=function(e,t){this.checkVShape(e);for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++)!sf.base.isNullOrUndefined(i[n].getAttribute("v:shapes"))&&i[n].getAttribute("v:shapes").indexOf("Picture")<0&&i[n].getAttribute("v:shapes").indexOf("圖片")<0&&i[n].getAttribute("v:shapes").indexOf("Grafik")<0&&i[n].getAttribute("v:shapes").toLowerCase().indexOf("image")<0&&i[n].getAttribute("v:shapes").indexOf("Graphic")<0&&i[n].getAttribute("v:shapes").indexOf("_x0000_s")<0&&i[n].getAttribute("v:shapes").indexOf("_x0000_i")<0&&sf.base.detach(i[n]);i=e.querySelectorAll("img");var s=[],o=[],r=[],a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(i.length>0){for(n=0;n<i.length;n++)s.push(i[n].getAttribute("src")),r.push(i[n].getAttribute("src").split("/")[i[n].getAttribute("src").split("/").length-1].split(".")[0]);var l=this.hexConversion(t);for(n=0;n<l.length;n++)o.push({base64Data:sf.base.isNullOrUndefined(l[n].hex)?null:this.convertToBase64(l[n]),isCroppedImage:l[n].isCroppedImage}),l[n].isCroppedImage&&this.cropImageDimensions.push({goalWidth:l[n].goalWidth,goalHeight:l[n].goalHeight,cropLength:l[n].cropLength,cropTop:l[n].cropTop,cropR:l[n].cropR,cropB:l[n].cropB});for(n=0;n<i.length;n++)s[n].match(a)?i[n].setAttribute("src",s[n]):(sf.base.isNullOrUndefined(o[n])||sf.base.isNullOrUndefined(o[n].base64Data)?(i[n].removeAttribute("src"),i[n].setAttribute("alt","Unsupported file format")):i[n].setAttribute("src",o[n].base64Data),!sf.base.isNullOrUndefined(o[n])&&o[n].isCroppedImage&&i[n].classList.add("e-img-cropped")),i[n].setAttribute("id","msWordImg-"+r[n])}},e.prototype.checkVShape=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)switch(t[i].nodeName){case"V:SHAPETYPE":sf.base.detach(t[i]);break;case"V:SHAPE":if("V:IMAGEDATA"===t[i].firstElementChild.nodeName){var n=t[i].firstElementChild.getAttribute("src"),s=sf.base.createElement("img");s.setAttribute("src",n),t[i].parentElement.insertBefore(s,t[i]),sf.base.detach(t[i])}}},e.prototype.convertToBase64=function(e){var t=this.conHexStringToBytes(e.hex),i=this.conBytesToBase64(t);return e.type?"data:"+e.type+";base64,"+i:null},e.prototype.conBytesToBase64=function(e){for(var t="",i=e.length,n=0;n<i;n+=3){var s=e.slice(n,n+3),o=s.length,r=[];if(o<3)for(var a=o;a<3;a++)s[a]=0;r[0]=(252&s[0])>>2,r[1]=(3&s[0])<<4|s[1]>>4,r[2]=(15&s[1])<<2|(192&s[2])>>6,r[3]=63&s[2];for(a=0;a<4;a++)t+=a<=o?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r[a]):"="}return t},e.prototype.conHexStringToBytes=function(e){for(var t=[],i=e.length/2,n=0;n<i;n++)t.push(parseInt(e.substr(2*n,2),16));return t},e.prototype.hexConversion=function(e){var t,i=/\{\\pict[\s\S]+?\\bliptag\-?\d+(\\blipupi\-?\d+)?(\{\\\*\\blipuid\s?[\da-fA-F]+)?[\s\}]*?/,n=new RegExp("(?:("+i.source+"))([\\da-fA-F\\s]+)\\}","g"),s=e.match(n),o=[];if(!sf.base.isNullOrUndefined(s))for(var r=0;r<s.length;r++){var a=!1,l=0,h=0,d=0,c=0,p=0,u=0;if(i.test(s[r])){if(-1!==s[r].indexOf("\\pngblip"))t="image/png";else if(-1!==s[r].indexOf("\\jpegblip"))t="image/jpeg";else{if(-1===s[r].indexOf("\\picprop"))continue;t=null}(a=!!(this.extractCropValue("cropl",s[r])>0&&this.extractCropValue("cropt",s[r])>0||this.extractCropValue("cropr",s[r])>0||this.extractCropValue("cropb",s[r])))&&(l=this.extractCropValue("wgoal",s[r]),h=this.extractCropValue("hgoal",s[r]),d=this.extractCropValue("cropl",s[r]),c=this.extractCropValue("cropt",s[r]),p=this.extractCropValue("cropr",s[r]),u=this.extractCropValue("cropb",s[r])),o.push({hex:t?s[r].replace(i,"").replace(/[^\da-fA-F]/g,""):null,type:t,isCroppedImage:a,goalWidth:l,goalHeight:h,cropLength:d,cropTop:c,cropR:p,cropB:u})}}return o},e.prototype.extractCropValue=function(e,t){var i=new RegExp("\\\\pic"+e+"(\\-?\\d+)\\\\").exec(t.replace(/\r\n\\/g,"\\").replace(/\n/g,"\\"))[1];return parseInt(i,10)},e.prototype.removeClassName=function(e){for(var t=e.querySelectorAll("*[class]:not(.e-img-cropped)"),i=0;i<t.length;i++)t[i].removeAttribute("class")},e.prototype.breakLineAddition=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)if(0===t[i].children.length&&"&nbsp;"===t[i].innerHTML&&"&nbsp;"===t[i].innerHTML&&!t[i].closest("li")&&!t[i].closest("td")&&("SPAN"!==t[i].nodeName||"SPAN"===t[i].nodeName&&sf.base.isNullOrUndefined(t[i].previousElementSibling)&&sf.base.isNullOrUndefined(t[i].nextElementSibling))){var n=this.findDetachElem(t[i]),s=sf.base.createElement("br");n.textContent.length>0&&n.textContent.match(/\u00a0/g)&&n.textContent.match(/\u00a0/g).length>0||sf.base.isNullOrUndefined(n.parentElement)||(n.parentElement.insertBefore(s,n),sf.base.detach(n))}},e.prototype.findDetachElem=function(e){return!sf.base.isNullOrUndefined(e.parentElement)&&""===e.parentElement.textContent.trim()&&"TD"!==e.parentElement.tagName&&sf.base.isNullOrUndefined(e.parentElement.querySelector("img"))?this.findDetachElem(e.parentElement):e},e.prototype.removeUnwantedElements=function(e){var t=e.querySelector("style");sf.base.isNullOrUndefined(t)||sf.base.detach(t);for(var i=e.innerHTML,n=0;n<this.removableElements.length;n++){var s=new RegExp("<"+this.removableElements[n]+">","g"),o=new RegExp("</"+this.removableElements[n]+">","g");i=(i=i.replace(s,"")).replace(o,"")}e.innerHTML=i,e.querySelectorAll(":empty")},e.prototype.findDetachEmptyElem=function(e){var t;sf.base.isNullOrUndefined(e.parentElement)?t=null:t=e.parentElement.textContent.length>0&&e.parentElement.textContent.match(/\u00a0/g)&&e.parentElement.textContent.match(/\u00a0/g).length>0||""!==e.parentElement.textContent.trim()||"MSWord-Content"===e.parentElement.getAttribute("id")||this.hasParentWithClass(e,"MsoListParagraph")||!sf.base.isNullOrUndefined(e.parentElement.querySelector("img"))?e:this.findDetachEmptyElem(e.parentElement);return t},e.prototype.hasParentWithClass=function(e,t){for(var i=e.parentElement;!sf.base.isNullOrUndefined(i);){if(i.classList.contains(t))return!0;i=i.parentElement}return!1},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++){sf.base.isNullOrUndefined(t[i].closest("td"))||sf.base.isNullOrUndefined(t[i].closest("td").querySelector(".MsoNormal"))||(t[i].innerHTML="-");var n=!0;if("DIV"===t[i].tagName&&(n="none"===t[i].style.borderBottom||""===t[i].style.borderBottom),"IMG"!==t[i].tagName&&"BR"!==t[i].tagName&&"IFRAME"!==t[i].tagName&&"TD"!==t[i].tagName&&"HR"!==t[i].tagName&&n){var s=this.findDetachEmptyElem(t[i]);sf.base.isNullOrUndefined(s)||sf.base.detach(s)}}},e.prototype.styleCorrection=function(e,t){var i=e.querySelectorAll("style");if(i.length>0){var n=i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi),s=sf.base.isNullOrUndefined(n)?null:this.findStyleObject(n),o=Object.keys(s),r=o.map((function(e){return s[""+e]}));r=this.removeUnwantedStyle(r,t),this.filterStyles(e,t);for(var a=void 0,l=!1,h=0;h<o.length;h++){if(""===o[h].split(".")[0])a=e.getElementsByClassName(o[h].split(".")[1]),l=!0;else{if(1===o[h].split(".").length&&o[h].split(".")[0].indexOf("@")>=0)continue;a=1===o[h].split(".").length&&o[h].split(".")[0].indexOf("@")<0?e.getElementsByTagName(o[h]):e.querySelectorAll(o[h])}for(var d=0;d<a.length;d++)if(!a[d].closest("li")||"p"!==o[h]){var c=a[d].getAttribute("style");if(sf.base.isNullOrUndefined(c)||""===c.trim())r[h]=r[h].replace(/text-indent:-(.*?)(?=;|$)/gm,""),a[d].setAttribute("style",r[h]);else{var p=r[h].split(";");if(!l)for(var u=0;u<p.length;u++)c.indexOf(p[u].split(":")[0])>=0&&(p.splice(u,1),u--);var f=c+p.join(";")+";";a[d].setAttribute("style",f)}}l=!1}var g=["MsoListParagraphCxSpFirst","MsoListParagraphCxSpMiddle","MsoListParagraphCxSpLast"];for(h=0;h<g.length;h++)if(o.indexOf("li."+g[h])>-1){var m=e.querySelectorAll("ol."+g[h]+", ul."+g[h]);for(d=0;d<m.length;d++){c=m[d].getAttribute("style");if(!sf.base.isNullOrUndefined(c)&&""!==c.trim()&&""!==m[d].style.marginLeft)for(p=r[o.indexOf("li."+g[h])].split(";"),u=0;u<p.length;u++)if("margin-left".indexOf(p[u].split(":")[0])>=0&&!sf.base.isNullOrUndefined(p[u].split(":")[1])&&p[u].split(":")[1].indexOf("in")>=0&&m[d].style.marginLeft.indexOf("in")>=0){var v=parseFloat(p[u].split(":")[1].split("in")[0]),b=parseFloat(m[d].style.marginLeft.split("in")[0]);m[d].style.marginLeft=b-v+"in"}}}}},e.prototype.filterStyles=function(e,t){for(var i=e.querySelectorAll("*[style]"),n=0;n<i.length;n++){for(var s=i[n].getAttribute("style").split(";"),o="",r=0;r<s.length;r++)t.indexOf(s[r].split(":")[0].trim())>=0&&(o+=s[r]+";");i[n].setAttribute("style",o)}},e.prototype.removeUnwantedStyle=function(e,t){for(var i=0;i<e.length;i++){var n=e[i].split(";");e[i]="";for(var s=0;s<n.length;s++)t.indexOf(n[s].split(":")[0])>=0&&(e[i]+=n[s]+";")}return e},e.prototype.findStyleObject=function(e){for(var t={},i=0;i<e.length;i++){var n=e[i],s=n.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),o=n.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");s=s.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/^[\s]|[\s]$/gm,""),s=s.replace(/\n|\r|\n\r/g,""),o=o.replace(/\n|\r|\n\r/g,"");for(var r=s.split(", "),a=0;a<r.length;a++)t[r[a]]=o}return t},e.prototype.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.prototype.cleanUp=function(e,t){for(var i,n=[],s=e.querySelectorAll("*"),o=0;o<s.length;o++)-1===this.ignorableNodes.indexOf(s[o].nodeName)||3===s[o].nodeType&&""===s[o].textContent.trim()?n.push(s[o]):(s[o].className&&-1!==s[o].className.toLowerCase().indexOf("msolistparagraph")&&!sf.base.isNullOrUndefined(s[o].getAttribute("style"))&&s[o].getAttribute("style").indexOf("mso-list:")>=0&&(s[o].className.indexOf("MsoListParagraphCxSpFirst")>=0&&t.length>0&&null!==t[t.length-1]&&t.push(null),t.push(s[o])),!i||-1===this.blockNode.indexOf(s[o].nodeName.toLowerCase())||s[o].className&&-1!==s[o].className.toLowerCase().indexOf("msolistparagraph")&&!sf.base.isNullOrUndefined(s[o].getAttribute("style"))&&s[o].getAttribute("style").indexOf("mso-list:")>=0||t.push(null),-1!==this.blockNode.indexOf(s[o].nodeName.toLowerCase())&&(i=!!(s[o].className&&-1!==s[o].className.toLowerCase().indexOf("msolistparagraph")&&!sf.base.isNullOrUndefined(s[o].getAttribute("style"))&&s[o].getAttribute("style").indexOf("mso-list:")>=0)));return t.length&&null!==t[t.length-1]&&t.push(null),t},e.prototype.listConverter=function(e){for(var t,i,n=[],s=[],o="",r="",a=0;a<e.length;a++)if(null!==e[a]){e[a].getAttribute("style")&&-1!==e[a].getAttribute("style").indexOf("mso-outline-level")&&e[a].setAttribute("style",e[a].getAttribute("style").replace("mso-outline-level","mso-outline")),t=(o=e[a].getAttribute("style"))&&-1!==o.indexOf("level")?parseInt(o.charAt(o.indexOf("level")+5),null):1,this.listContents=[],this.getListContent(e[a]);var l=void 0,h=void 0,d=void 0,c=void 0;if(!sf.base.isNullOrUndefined(this.listContents[0])){if(l=this.listContents[0].trim().length>1?"ol":"ul",h=this.getlistStyleType(this.listContents[0],l),"ol"===l&&(0===a||null===e[a-1])){var p=this.listContents[0].split(".")[0];-1===["A","a","I","i","α","1","1-"].indexOf(p)&&("decimal"===h?isNaN(parseInt(p,10))||(d=parseInt(p,10)):"upper-alpha"===h?d=p.split(".")[0].charCodeAt(0)-64:"lower-alpha"===h?d=p.split(".")[0].charCodeAt(0)-96:"upper-roman"===h?d=this.upperRomanNumber.indexOf(this.listContents[0].split(".")[0])+1:"lower-roman"===h?d=this.lowerRomanNumber.indexOf(this.listContents[0].split(".")[0])+1:"lower-greek"===h&&(d=this.lowerGreekNumber.indexOf(this.listContents[0].split(".")[0])+1)),""!==e[a].style.marginLeft&&(c=e[a].style.marginLeft)}for(var u=[],f=1;f<this.listContents.length;f++)u.push(this.listContents[f]);var g=void 0;sf.base.isNullOrUndefined(e[a].className)||(g=e[a].className),sf.base.isNullOrUndefined(e[a].getAttribute("style"))||(e[a].setAttribute("style",e[a].getAttribute("style").replace("text-align:start;","")),e[a].style.textIndent="",r=e[a].getAttribute("style")),s.push({listType:l,content:u,nestedLevel:t,class:g,listStyle:r,listStyleTypeName:h,start:d,styleMarginLeft:c})}}else n.push({content:this.makeConversion(s),node:e[a-1]}),s=[];for(i=e.shift();i;){for(var m=[],v=0;v<n.length;v++)if(n[v].node===i){for(var b=0;b<n[v].content.childNodes.length;b++)m.push(n[v].content.childNodes[b]);for(b=0;b<m.length;b++)i.parentElement.insertBefore(m[b],i);break}i.remove(),(i=e.shift())||(i=e.shift())}},e.prototype.getlistStyleType=function(e,t){var i;if("ol"===t){var n=e.split(".")[0].charCodeAt(0);switch(!0){case this.upperRomanNumber.indexOf(e.split(".")[0])>-1:i="upper-roman";break;case this.lowerRomanNumber.indexOf(e.split(".")[0])>-1:i="lower-roman";break;case this.lowerGreekNumber.indexOf(e.split(".")[0])>-1:i="lower-greek";break;case n>64&&n<91:i="upper-alpha";break;case n>96&&n<123:i="lower-alpha";break;default:i="decimal"}}else switch(e.split(".")[0]){case"o":i="circle";break;case"§":i="square";break;default:i="disc"}return i},e.prototype.makeConversion=function(e){for(var t,i,n,s=sf.base.createElement("div"),o=1,r=0,a=0;a<e.length;a++){for(var l=["MsoListParagraphCxSpFirst","MsoListParagraphCxSpMiddle","MsoListParagraphCxSpLast"],h=!1,d=0;d<l.length;d++)if(l[d].indexOf(e[a].class)>=0){h=!0;break}sf.base.isNullOrUndefined(i)||0===a||e[a-1].listType===e[a].listType||h||(i=null);var c=sf.base.createElement("p",{className:"MsoNormal"});if(c.innerHTML=e[a].content.join(" "),1===e[a].nestedLevel&&0===r&&e[a].content)s.appendChild(t=sf.base.createElement(e[a].listType,{className:e[a].class})),(i=sf.base.createElement("li")).appendChild(c),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.marginLeft=e[a].styleMarginLeft,t.style.listStyleType=e[a].listStyleTypeName;else if(e[a].nestedLevel===o)sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.parentElement)||i.parentElement.tagName.toLowerCase()!==e[a].listType?sf.base.isNullOrUndefined(i)?((t=sf.base.createElement(e[a].listType)).style.listStyleType=e[a].listStyleTypeName,(i=sf.base.createElement("li")).appendChild(c),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),s.appendChild(t)):((t=sf.base.createElement(e[a].listType)).style.listStyleType=e[a].listStyleTypeName,i.parentElement.parentElement.appendChild(t),(i=sf.base.createElement("li")).appendChild(c),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString())):(i.parentElement.appendChild(i=sf.base.createElement("li")),i.appendChild(c));else if(e[a].nestedLevel>o)if(sf.base.isNullOrUndefined(i))if(e[a].nestedLevel>o&&h){var p=sf.base.createElement(e[a].listType);i=sf.base.createElement("li"),p.appendChild(i),p.style.listStyleType="none";for(u=0;u<e[a].nestedLevel-1;u++)i.appendChild(t=sf.base.createElement(e[a].listType)),i=sf.base.createElement("li"),t.appendChild(i),t.style.listStyleType="none";i.appendChild(c),s.appendChild(p),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName}else s.appendChild(t=sf.base.createElement(e[a].listType)),(i=sf.base.createElement("li")).appendChild(c),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName;else{for(var u=0;u<e[a].nestedLevel-o;u++)i.appendChild(t=sf.base.createElement(e[a].listType)),i=sf.base.createElement("li"),u!==e[a].nestedLevel-o-1&&e[a].nestedLevel-o>1&&(i.style.listStyleType="none"),t.appendChild(i);i.appendChild(c),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName}else if(1===e[a].nestedLevel)s.lastChild.tagName.toLowerCase()===e[a].listType?t=s.lastChild:(s.appendChild(t=sf.base.createElement(e[a].listType)),t.style.listStyleType=e[a].listStyleTypeName),(i=sf.base.createElement("li")).appendChild(c),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString());else for(n=i;n.parentElement;)if((n=n.parentElement).attributes.getNamedItem("level")){if(parseInt(n.attributes.getNamedItem("level").textContent,null)===e[a].nestedLevel){(i=sf.base.createElement("li")).appendChild(c),n.appendChild(i);break}if(e[a].nestedLevel>parseInt(n.attributes.getNamedItem("level").textContent,null)){n.appendChild(t=sf.base.createElement(e[a].listType)),(i=sf.base.createElement("li")).appendChild(c),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName;break}}i.setAttribute("class",e[a].class),i.setAttribute("style",sf.base.isNullOrUndefined(e[a].listStyle)?"":e[a].listStyle),o=e[a].nestedLevel,r++,sf.base.isNullOrUndefined(e[a].start)||t.setAttribute("start",e[a].start.toString())}return s},e.prototype.getListContent=function(e){var t="",i=e.firstElementChild;if(""!==i.textContent.trim()||sf.base.isNullOrUndefined(i.firstElementChild)||"IMG"!==i.firstElementChild.nodeName){if(i.childNodes.length>0){for(var n=i.querySelectorAll('[style*="mso-list"]'),s=0;s<n.length;s++)n[s].setAttribute("style",n[s].getAttribute("style").replace(/\n/g,""));var o=i.querySelector('span[style="mso-list:Ignore"]');sf.base.isNullOrUndefined(o)||(this.listContents.push(o.textContent.trim()),sf.base.detach(o),this.removingComments(e),this.removeUnwantedElements(e))}}else t=e.innerHTML.trim(),this.listContents.push(""),this.listContents.push(t);this.listContents.push(e.innerHTML)},e.prototype.removeEmptyAnchorTag=function(e){for(var t=e.querySelectorAll("a:not([href])"),i=t.length-1;i>=0;i--){for(var n=t[i].parentNode;t[i].firstChild;)n.insertBefore(t[i].firstChild,t[i]);n.removeChild(t[i])}},e}(),Ae=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-text-type",this.insertText,this)},e.prototype.insertText=function(e){var t=document.createTextNode(e.value);ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),ze=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("emoji_picker_actions",this.emojiInsert,this)},e.prototype.emojiInsert=function(e){for(var t=document.createTextNode(e.value),i=this.parent.currentDocument.getSelection(),n=i.getRangeAt(0).startOffset,s=n-1;s>=n-15;s--){var o=i.focusNode.textContent.substring(s-1,s);if(/:$/.test(o)){this.beforeApplyFormat(!0);break}}var r=/:$/.test(i.focusNode.textContent.charAt(n-1)),a=i.focusNode.textContent.charAt(n-2),l=/\s/.test(a);r&&(l||1===i.focusOffset)&&this.beforeApplyFormat(!0),ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.beforeApplyFormat=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection.getNodeCollection(t)[0],n=!(":"===i.parentElement.innerHTML.replace(/&nbsp;|<br>/g,"").trim()||0===i.textContent.trim().indexOf("/")),s=i;if(n&&e)for(;s!==this.parent.editableElement;)s=s.parentElement;for(var o=t.startOffset;-1===this.parent.nodeSelection.getRange(document).toString().indexOf(":");)this.parent.nodeSelection.setSelectionText(document,i,i,o,t.endOffset),o--;var r=this.parent.nodeSelection.getRange(this.parent.currentDocument),a=this.parent.nodeCutter.GetSpliceNode(r,i);a.parentNode.removeChild(a)},e}(),ke=function(){function e(e,t){this.INVALID_TAGS=["A","AUDIO","IMG","VIDEO","IFRAME"],this.parent=e,this.settings=t,this.addEventListener(),this.setDeniedFormats()}return e.prototype.addEventListener=function(){this.parent.observer.on("format_painter_actions",this.actionHandler,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){e&&"formatPainter"===e.module&&(sf.base.isNullOrUndefined(e.newProp.formatPainterSettings.allowedFormats)||(this.settings.allowedFormats=e.newProp.formatPainterSettings.allowedFormats),sf.base.isNullOrUndefined(e.newProp.formatPainterSettings.deniedFormats)||(this.settings.deniedFormats=e.newProp.formatPainterSettings.deniedFormats,this.setDeniedFormats()))},e.prototype.removeEventListener=function(){this.parent.observer.off("format_painter_actions",this.actionHandler),this.parent.observer.off("model_changed_plugin",this.onPropertyChanged)},e.prototype.destroy=function(){this.removeEventListener(),this.INVALID_TAGS=null,this.copyCollection=null,this.deniedFormatsCollection=null,this.newElem=null,this.newElemLastChild=null,this.settings=null,this.parent=null},e.prototype.actionHandler=function(e){if(this.settings.allowedContext=["Text","List","Table"],!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(e.item)&&!sf.base.isNullOrUndefined(e.item.formatPainterAction)){switch(e.item.formatPainterAction){case"format-copy":this.copyAction();break;case"format-paste":this.pasteAction();break;case"escape":this.escapeAction()}this.callBack(e)}},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:"FormatPainter",action:e.item.formatPainterAction,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.generateElement=function(){var e=this.copyCollection.slice();e.reverse();for(var t,i=e.length,n=sf.base.createElement("div",{className:"e-format-paste-wrapper"}),s=0;s<i;s++){var o=e[s],r=o.attrs,a=o.className,l=o.styles,h=o.tagName,d=sf.base.createElement(h);""!==a&&(d.className=a);for(var c=0;c<r.length;c++){var p=r[c].name,u=r[c].value;d.setAttribute(p,u)}for(var f=0;f<l.length;f++){p=l[f].property,u=l[f].value;var g=l[f].priority;d.style.setProperty(p,u,g)}0===n.childElementCount?(n.append(d),t=d):(t.append(d),t=d)}for(var m=this.removeDeniedFormats(n),v=m;v;)null===v.firstChild?(t=v,v=void 0):v=v.firstChild;this.newElem=m,this.newElemLastChild=t},e.prototype.pasteAction=function(){sf.base.isNullOrUndefined(this.copyCollection)||0===this.copyCollection.length?this.paintPlainTextFormat():this.insertFormatNode(this.newElem,this.newElemLastChild)},e.prototype.removeDeniedFormats=function(e){if(!sf.base.isNullOrUndefined(this.deniedFormatsCollection)&&this.deniedFormatsCollection.length>0)for(var t=this.deniedFormatsCollection,i=t.length,n=0;n<i;n++){var s=t[n].tag;if(t[n].tag)for(var o=e.querySelectorAll(s),r=0;r<o.length;r++){if(t[n].classes.length>0){for(var a=t[n].classes,l=a.length,h=0;h<l;h++)o[r].classList.contains(a[h])&&sf.base.removeClass([o[r]],a[h].trim());0===o[r].classList.length&&o[r].removeAttribute("class")}if(t[n].styles.length>0){var d=t[n].styles,c=d.length;for(h=0;h<c;h++)o[r].style.removeProperty(d[h].trim());0===o[r].style.length&&o[r].removeAttribute("style")}if(t[n].attributes.length>0){var p=t[n].attributes,u=p.length;for(h=0;h<u;h++)o[r].removeAttribute(p[h].trim())}}}return e.firstElementChild},e.prototype.copyAction=function(){var e=[],t=this.parent.nodeSelection.getRange(document),i=this.parent.nodeSelection,n=t.collapsed?i.getSelectionNodeCollection(t):i.getSelectionNodeCollectionBr(t);if(0!==n.length||0!==i.getSelectionNodeCollectionBr(t).length){for(var s=(n=0===n.length?i.getSelectionNodeCollectionBr(t):n)[0].parentElement,o=this.findCurrentContext(s),r=this.settings.allowedFormats.indexOf(";")>-1?this.settings.allowedFormats.split(";"):[this.settings.allowedFormats],a=0;a<r.length;a++)r[a]=r[a].trim();var l=this.getRangeParentElem(o,s),h=l[0],d=l[1];if(null===o&&(o=d),!sf.base.isNullOrUndefined(o)&&this.settings.allowedContext.indexOf(o)>-1){"#text"===t.startContainer.nodeName&&(s=t.startContainer.parentElement);var c=s;do{if(r.indexOf(s.nodeName.toLowerCase())>-1){var p=s.attributes,u=[];for(a=0;a<p.length;a++)"class"!==p[a].name&&"style"!==p[a].name&&u.push(p[a]);var f=s.className,g=s.style,m=[];for(a=0;a<g.length;a++){var v=g[a],b=g.getPropertyValue(v),y=g.getPropertyPriority(v);m.push({property:v,value:b,priority:y})}e.push({attrs:u,className:f,styles:m,tagName:s.nodeName})}if(h===s?s=void 0:sf.base.isNullOrUndefined(s.parentElement)||(s=s.parentElement),c===s)break}while(!sf.base.isNullOrUndefined(s)||s===this.parent.editableElement);this.copyCollection=e}this.generateElement()}},e.prototype.getRangeParentElem=function(e,t){var i,n=t;switch(3===n.nodeType&&(n=n.parentElement),e){case"Table":i=sf.base.closest(n,"td"),sf.base.isNullOrUndefined(i)&&(i=sf.base.closest(n,"th"));break;case"List":i=sf.base.closest(n,"li");break;case"Text":i=sf.base.closest(n,"p")}if(sf.base.isNullOrUndefined(i)){var s=this.getNearestBlockParentElement(t);sf.base.isNullOrUndefined(s)||"UL"===s||"OL"===s||"LI"===s||(i=sf.base.closest(n,s),e="Text")}return"List"===e&&(i=i.parentElement),[i,e]},e.prototype.getNearestBlockParentElement=function(e){var t=e;for(3===t.nodeType&&(t=t.parentNode);t&&t!==this.parent.editableElement;){if(!sf.base.isNullOrUndefined(t)&&this.isBlockElement(t))return t.nodeName;t=t.parentNode}return null},e.prototype.isBlockElement=function(e){return["P","DIV","UL","OL","LI","H1","H2","H3","H4","H5","H6","ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","FIGCAPTION","FIGURE","FOOTER","HEADER","HR","MAIN","NAV","SECTION","SUMMARY","PRE"].indexOf(e.nodeName)>-1},e.prototype.escapeAction=function(){this.copyCollection=[]},e.prototype.paintPlainTextFormat=function(){var e,t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection,n=t.collapsed?i.getSelectionNodeCollection(t):i.getSelectionNodeCollectionBr(t);if(n.length>1)for(var s=0;s<n.length;s++)e=this.validateELementTag(n[s]);else e=this.validateELementTag(t.startContainer)&&this.validateELementTag(t.endContainer);e||this.parent.execCommand("Clear","ClearFormat",null,null)},e.prototype.validateELementTag=function(e){return 3===e.nodeType&&(e=e.parentElement),this.INVALID_TAGS.indexOf(e.tagName)>-1},e.prototype.findCurrentContext=function(e){var t=sf.base.closest(e,"p"),i=sf.base.closest(e,"li");return t&&!i?"Text":sf.base.closest(e,"li")?sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i)||t.textContent.trim()===i.textContent.trim()?"List":"Text":sf.base.closest(e,"td")||sf.base.closest(e,"tr")||sf.base.closest(e,"th")?"Table":null},e.prototype.insertFormatNode=function(e,t){var i=e.cloneNode(!0);if(!this.isBlockElement(e)){var n=sf.base.createElement("P");n.appendChild(e),i=n.cloneNode(!0)}for(var s,o=this.parent.editableElement,r=this.parent.currentDocument,a=i.firstChild;a;){if(!this.isBlockElement(a)){s=a.parentNode.removeChild(a);break}a=a.firstChild}var l={element:s,lastChild:t};Ne.applyFormat(r,null,o,"P","formatPainter",null,l);var h=this.parent.nodeSelection.getRange(r),d=h.collapsed,c=this.parent.domNode.blockNodes(),p=!1;1===c.length&&(p=c[0].textContent.trim()===h.toString().trim()),(this.isBlockElement(i)&&d||c.length>1||p)&&this.insertBlockNode(i,h,r,c)},e.prototype.insertBlockNode=function(e,t,i,n){var s,o,r=this.parent.nodeSelection.save(t,i);this.parent.domNode.setMarker(r);var a=!1;"UL"!==e.nodeName&&"OL"!==e.nodeName||(s=(o=e.cloneNode(!0)).firstChild);for(var l=sf.base.isNullOrUndefined(o)?e:e.firstChild,h=0;h<n.length;h++)if(!(this.INVALID_TAGS.indexOf(n[h].nodeName)>-1||n[h].querySelectorAll("img,audio,video,iframe").length>0)){for(var d=l.cloneNode(!1);n[h].firstChild;)0!==n[h].textContent.trim().length?d.appendChild(n[h].firstChild):n[h].removeChild(n[h].firstChild);if("TD"!==n[h].nodeName&&"TH"!==n[h].nodeName){if(sf.base.isNullOrUndefined(o)||(a=this.isSameListType(e,n[h])),"LI"!==d.nodeName||a?a?this.insertSameList(n,h,o,d):n[h].parentNode.replaceChild(d,n[h]):this.insertNewList(t,n,h,o,d),"LI"!==d.nodeName&&("OL"===d.parentElement.nodeName||"UL"===d.parentElement.nodeName)){var c=d.parentElement;if(this.parent.nodeCutter.SplitNode(t,c,!0),sf.base.isNullOrUndefined(c.previousElementSibling))c.parentElement.prepend(d);else if(c.previousElementSibling.after(d),d.childNodes.length>1)for(var p=0;p<d.childNodes.length;p++){var u=d.childNodes[p];"OL"!==u.nodeName&&"UL"!==u.nodeName||d.after(u)}}}else{if(sf.base.isNullOrUndefined(o)){n[h].appendChild(d);continue}if(0!==h||sf.base.isNullOrUndefined(o)){n[h].appendChild(d);continue}n[h].appendChild(o),o.appendChild(d)}}!sf.base.isNullOrUndefined(s)&&sf.base.detach(s),this.cleanEmptyLists(),this.parent.domNode.saveMarker(r,null).restore()},e.prototype.insertNewList=function(e,t,i,n,s){if(0===i){var o=t[i].nodeName;t[i]=t[i].parentNode.replaceChild(n,t[i]);var r="LI"===o?n.parentElement:n;if(this.parent.nodeCutter.SplitNode(e,r,!0),"LI"!==t[i].nodeName||sf.base.isNullOrUndefined(r))if(sf.base.isNullOrUndefined(r))n.append(s);else if(sf.base.isNullOrUndefined(r.previousElementSibling)||r.previousElementSibling.nodeName!==n.nodeName)if(sf.base.isNullOrUndefined(r.nextElementSibling)||r.nextElementSibling.nodeName!==n.nodeName)n.append(s);else{var a;for((a=r.nextElementSibling).prepend(s);a.firstChild;)n.append(a.firstChild)}else for((a=r.previousElementSibling).append(s);a.firstChild;)n.append(a.firstChild);else n.append(s),sf.base.isNullOrUndefined(r.parentNode)||r.parentNode.insertBefore(n,r)}else n.append(s);this.detachEmptyBlockNodes(t[i])},e.prototype.insertSameList=function(e,t,i,n){if(0===t){if(!sf.base.isNullOrUndefined(e[t].parentNode)&&("UL"===e[t].parentNode.nodeName||"OL"===e[t].parentNode.nodeName)){if(1===e.length){for(;n.firstChild;)e[t].append(n.firstChild);for(var s=0;s<e[t].parentNode.childNodes.length;s++){var o=e[t].parentNode.childNodes[s];i.append(o.cloneNode(!0))}}else i.append(n);e[t].parentNode.parentNode.replaceChild(i,e[t].parentNode)}}else i.append(n);this.detachEmptyBlockNodes(e[t])},e.prototype.isSameListType=function(e,t){var i=!1,n=sf.base.closest(t,"ol, ul");return!sf.base.isNullOrUndefined(n)&&n.querySelectorAll("li").length>0&&(i=n.nodeName===e.nodeName),i},e.prototype.cleanEmptyLists=function(){for(var e=this.parent.editableElement.querySelectorAll("ol, ul"),t=0;t<e.length;t++)""===e[t].textContent.trim()&&sf.base.detach(e[t])},e.prototype.setDeniedFormats=function(){var e=[];if(!sf.base.isNullOrUndefined(this.settings)&&!sf.base.isNullOrUndefined(this.settings.deniedFormats)){for(var t=this.settings.deniedFormats.indexOf(";")>-1?this.settings.deniedFormats.split(";"):[this.settings.deniedFormats],i=t.length,n=0;n<i;n++){var s=t[n];if(""!==s){s.trim();var o=this.makeDeniedFormatsCollection(s);sf.base.isNullOrUndefined(o)||e.push(o)}}this.deniedFormatsCollection=e}},e.prototype.detachEmptyBlockNodes=function(e){sf.base.isNullOrUndefined(e)||""!==e.textContent.trim()||sf.base.detach(e)},e.prototype.makeDeniedFormatsCollection=function(e){var t=e.indexOf("("),i=e.indexOf(")"),n=e.indexOf("["),s=e.indexOf("]"),o=e.indexOf("{"),r=e.indexOf("}"),a=[],l=[],h=[];t>-1&&i>-1&&(a=e.substring(t+1,i).split(" ")[0].split(")")[0].split(",")),n>-1&&s>-1&&(l=e.substring(n+1,s).split(",")),o>-1&&r>-1&&(h=e.substring(o+1,r).split(","));var d,c=[t,n,o],p=(c=c.filter((function(e){return e>-1}))).length;return 1===p?d=c[0]:2===p?d=Math.min(c[0],c[1]):3===p&&(d=Math.min(c[0],c[1],c[2])),{tag:e.substring(0,d).trim(),styles:h,classes:a,attributes:l}},e}(),Pe=function(){function e(e){this.currentDocument=e.document,this.editableElement=e.editableElement,this.nodeSelection=new Z,this.nodeCutter=new ue,this.domNode=new de(this.editableElement,this.currentDocument),this.observer=new sf.base.Observer(this),this.listObj=new ce(this),this.formatObj=new fe(this),this.alignmentObj=new ve(this),this.indentsObj=new be(this),this.linkObj=new me(this),this.imgObj=new Ce(this),this.audioObj=new we(this),this.videoObj=new Me(this),this.selectionObj=new Oe(this),this.inserthtmlObj=new Ee(this),this.insertTextObj=new Ae(this),this.clearObj=new Te(this),this.tableObj=new Se(this),this.undoRedoManager=new De(this,e.options),this.msWordPaste=new je(this),this.formatPainterEditor=new ke(this,e.formatPainterSettings),this.emojiPickerObj=new ze(this),this.wireEvents()}return e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this),this.observer.on("ms_word_cleanup",this.onWordPaste,this),this.observer.on("onBegin",this.onBegin,this)},e.prototype.onWordPaste=function(e){this.observer.notify("ms_word_cleanup_plugin",e)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.onBegin=function(e){this.observer.notify("actionBegin",e)},e.prototype.execCommand=function(e,t,i,n,s,o,r,a){switch(e.toLowerCase()){case"lists":this.observer.notify("list-type",{subCommand:t,event:i,callBack:n,selector:r,item:o,enterAction:a});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:n,selector:r,exeValue:o,enterAction:a});break;case"alignments":this.observer.notify("alignment-type",{subCommand:t,event:i,callBack:n,selector:r,value:o});break;case"indents":this.observer.notify("indent-type",{subCommand:t,event:i,callBack:n,selector:r});break;case"links":this.observer.notify("INSERT-LINK",{command:e,value:t,item:o,event:i,callBack:n});break;case"files":this.observer.notify(_,{command:e,value:"Image",item:o,event:i,callBack:n,selector:r});break;case"images":this.observer.notify(_,{command:e,value:t,item:o,event:i,callBack:n,selector:r});break;case"audios":this.observer.notify("INSERT-AUDIO",{command:e,value:t,item:o,event:i,callBack:n,selector:r});break;case"videos":this.observer.notify("INSERT-VIDEO",{command:e,value:t,item:o,event:i,callBack:n,selector:r});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("INSERT-TABLE",{item:o,event:i,callBack:n,enterAction:a});break;case"insertrowbefore":case"insertrowafter":this.observer.notify("INSERT-ROW",{item:o,event:i,callBack:n});break;case"insertcolumnleft":case"insertcolumnright":this.observer.notify("INSERT-COLUMN",{item:o,event:i,callBack:n});break;case"deleterow":this.observer.notify("DELETE-ROW",{item:o,event:i,callBack:n});break;case"deletecolumn":this.observer.notify("DELETE-COLUMN",{item:o,event:i,callBack:n});break;case"tableremove":this.observer.notify("REMOVE-TABLE",{item:o,event:i,callBack:n});break;case"tableheader":this.observer.notify("TABLE-HEADER",{item:o,event:i,callBack:n});break;case"aligntop":case"alignmiddle":case"alignbottom":this.observer.notify("TABLE_VERTICAL_ALIGN",{item:o,event:i,callBack:n});break;case"merge":this.observer.notify("TABLE_MERGE",{item:o,event:i,callBack:n});break;case"horizontalsplit":this.observer.notify("TABLE_HORIZONTAL_SPLIT",{item:o,event:i,callBack:n});break;case"verticalsplit":this.observer.notify("TABLE_VERTICAL_SPLIT",{item:o,event:i,callBack:n})}break;case"font":case"style":case"effects":case"casing":this.observer.notify("selection-type",{subCommand:t,event:i,callBack:n,value:s,selector:r,enterAction:a});break;case"inserthtml":this.observer.notify("inserthtml-type",{subCommand:t,callBack:n,value:s,enterAction:a});break;case"inserttext":this.observer.notify("insert-text-type",{subCommand:t,callBack:n,value:s});break;case"clear":this.observer.notify("clear-type",{subCommand:t,event:i,callBack:n,selector:r,enterAction:a});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:n,selector:r});break;case"formatpainter":this.observer.notify("format_painter_actions",{item:o,subCommand:t,event:i,callBack:n});break;case"emojipicker":this.observer.notify("emoji_picker_actions",{item:o,subCommand:t,value:s,event:i,callBack:n})}},e}(),Le=(z=function(e,t){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}z(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Be=function(e){function t(t){var i=e.call(this)||this;return i.initialize(),sf.base.extend(i,i,t,!0),i.currentDocument&&i.element&&i.updateFormatter(i.element,i.currentDocument,t.options),i}return Le(t,e),t.prototype.initialize=function(){this.keyConfig=se},t.prototype.updateFormatter=function(e,t,i){e&&t&&(this.editorManager=new Pe({document:t,editableElement:e,options:i}))},t}(ee),Re=function(){function n(e){this.rangeCollection=[],this.isImageDelete=!1,this.parent=e,this.xhtmlValidation=new Y(e),this.addEventListener()}return n.prototype.addEventListener=function(){this.nodeSelectionObj=new Z,this.parent.observer.on("html-toolbar-click",this.onToolbarClick,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on(i,this.onKeyUp,this),this.parent.observer.on(e,this.render,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("selectAll",this.selectAll,this),this.parent.observer.on("selectRange",this.selectRange,this),this.parent.observer.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.observer.on(o,this.onSelectionSave,this),this.parent.observer.on(r,this.onSelectionRestore,this),this.parent.observer.on("readOnlyMode",this.updateReadOnly,this),this.parent.observer.on(l,this.onPaste,this),this.parent.observer.on("tableclass",this.isTableClassAdded,this)},n.prototype.isTableClassAdded=function(){for(var e=this.parent.inputElement.querySelectorAll("table"),t=0;t<e.length;t++)e[t].classList.contains("e-rte-table")||e[t].classList.add("e-rte-table")},n.prototype.sanitizeHelper=function(e){return e=C(e,this.parent)},n.prototype.updateReadOnly=function(){this.parent.readonly?(sf.base.attributes(this.parent.getEditPanel(),{contenteditable:"false"}),sf.base.addClass([this.parent.element],"e-rte-readonly")):(sf.base.attributes(this.parent.getEditPanel(),{contenteditable:"true"}),sf.base.removeClass([this.parent.element],"e-rte-readonly"))},n.prototype.onSelectionSave=function(){var e=this.parent.getDocument(),t=this.nodeSelectionObj.getRange(e);this.saveSelection=this.nodeSelectionObj.save(t,e)},n.prototype.onSelectionRestore=function(e){this.parent.isBlur=!1,this.parent.getEditPanel().focus(),(sf.base.isNullOrUndefined(e.items)||e.items)&&this.saveSelection.restore()},n.prototype.onKeyUp=function(e){var t,i=e.args,n=this.parent.getRange(),s=new RegExp(String.fromCharCode(8203),"g");if([8,9,13,16,17,18,20,27,37,38,39,40,44,45,46,91,112,113,114,115,116,117,118,119,120,121,122,123].indexOf(i.keyCode)<0&&!i.shiftKey&&!i.ctrlKey&&!i.altKey){if(t=n.startOffset,"#text"===n.startContainer.nodeName?n.startContainer.parentElement.classList.add("currentStartMark"):n.startContainer.classList.add("currentStartMark"),8203===n.startContainer.textContent.charCodeAt(0)&&(t=0===n.startOffset?n.startOffset:n.startOffset-1,n.startContainer.textContent=n.startContainer.textContent.replace(s,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),n.startContainer,t)),this.parent.inputElement.innerHTML.length>this.parent.inputElement.innerHTML.replace(s,"").length){for(var o=this.parent.inputElement.firstChild;!sf.base.isNullOrUndefined(o)&&o.textContent.replace(s,"").trim().length>0;)o.innerHTML=o.innerHTML.replace(s,""),o=o.nextElementSibling;if(this.parent.inputElement.querySelector(".currentStartMark").childNodes.length>1)for(var r=this.parent.inputElement.querySelector(".currentStartMark").childNodes,a=0;a<r.length;a++)"#text"===r[a].nodeName&&0===r[a].textContent.length&&(sf.base.detach(r[a]),a--);this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.parent.inputElement.querySelector(".currentStartMark").childNodes[0],t)}var l=this.parent.inputElement.querySelector(".currentStartMark");sf.base.isNullOrUndefined(l)||(l.classList.remove("currentStartMark"),""===l.getAttribute("class").trim()&&l.removeAttribute("class")),!sf.base.isNullOrUndefined(n.startContainer.previousSibling)&&!sf.base.isNullOrUndefined(n.startContainer.previousSibling.parentElement)&&n.startContainer.parentElement===n.startContainer.previousSibling.parentElement&&8203===n.startContainer.previousSibling.textContent.charCodeAt(0)&&n.startContainer.previousSibling.textContent.length<=1&&(n.startContainer.previousSibling.textContent=n.startContainer.previousSibling.textContent.replace(s,"")),8203===n.endContainer.textContent.charCodeAt(n.endOffset)&&(t=n.startOffset,n.endContainer.textContent=n.endContainer.textContent.replace(s,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),n.startContainer,t))}},n.prototype.onKeyDown=function(e){var t,i=this,n=e.args;if("chrome"===sf.base.Browser.info.name&&(t=this.parent.getRange(),this.backSpaceCleanup(e,t),this.deleteCleanup(e,t)),9===n.keyCode&&sf.base.isNullOrUndefined(sf.base.closest(n.target,".e-rte-toolbar"))&&this.parent.enableTabKey){var s=this.nodeSelectionObj.getRange(this.parent.getDocument()),o=this.nodeSelectionObj.getParentNodeCollection(s);if("LI"!==o[0].nodeName&&!sf.base.closest(o[0],"li")&&!sf.base.closest(o[0],"table")||0!==s.startOffset)if(n.preventDefault(),n.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){var r=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.parent.getDocument(),r,r,0,r.textContent.length),ge.Insert(this.parent.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}}else ge.Insert(this.parent.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.parent.getDocument()))}if("space"===e.args.action){var a=this.parent.getRange(),l=a.startContainer.textContent.slice(0,a.startOffset),h=this.isOrderedList(l),d=this.isUnOrderedList(l);if(h&&!d||d&&!h){var c={callBack:null,event:e.args,name:"keydown-handler"};this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:h?"OL":"UL",cancel:!1}).then((function(e){e.cancel||(i.parent.formatter.editorManager.observer.notify("onBegin",c),i.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{editorMode:i.parent.editorMode,name:"ActionCompleteEvent",requestType:h?"OL":"UL"}))}))}}if("space"===e.args.action||"enter"===e.args.action||13===e.args.keyCode){var p=this.parent.getRange(),u="#text"===p.endContainer.nodeName?p.endContainer.parentElement:p.endContainer,f=sf.base.closest(u,"a");if(sf.base.isNullOrUndefined(f)&&this.spaceLink(n),"HTML"===this.parent.editorMode){this.parent.observer.notify("enterHandler",{args:e.args});var g=this.parent.getRange();sf.base.isNullOrUndefined(g.startContainer)||g.startContainer!==this.parent.inputElement.lastChild||"#text"===g.startContainer.nodeName||g.startContainer.scrollIntoView({block:"end",inline:"nearest"})}}"chrome"!==sf.base.Browser.info.name||(sf.base.isNullOrUndefined(this.rangeElement)||sf.base.isNullOrUndefined(this.oldRangeElement))&&(sf.base.isNullOrUndefined(this.deleteRangeElement)||sf.base.isNullOrUndefined(this.deleteOldRangeElement))||"TD"===t.startContainer.parentElement.tagName||"TH"===t.startContainer.parentElement.tagName||(this.rangeElement=null,this.oldRangeElement=null,this.deleteRangeElement=null,this.deleteOldRangeElement=null,this.isImageDelete||n.preventDefault(),n.preventDefault())},n.prototype.isOrderedList=function(e){e=e.replace(/\u200B/g,"");var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!sf.base.isNullOrUndefined(e))for(var i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1},n.prototype.isUnOrderedList=function(e){e=e.replace(/\u200B/g,"");var t=[/^[*]$/,/^[-]$/];if(!sf.base.isNullOrUndefined(e))for(var i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1},n.prototype.backSpaceCleanup=function(e,t){var i=!1;if("Backspace"===e.args.code&&8===e.args.keyCode&&0===t.startOffset&&0===t.endOffset&&0===this.parent.getSelection().length&&t.startContainer.textContent.length>0&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.rangeElement=this.getRootBlockNode(t.startContainer),"OL"===this.rangeElement.tagName||"UL"===this.rangeElement.tagName){var n=this.getRangeLiNode(t.startContainer);n.previousElementSibling&&n.previousElementSibling.childElementCount>0&&(this.oldRangeElement=n.previousElementSibling.lastElementChild,sf.base.isNullOrUndefined(n.lastElementChild)?this.rangeElement=n:(this.rangeElement=n.lastElementChild,i=!0))}else{if(this.rangeElement===this.parent.inputElement||"TABLE"===this.rangeElement.tagName||!sf.base.isNullOrUndefined(this.rangeElement.previousElementSibling)&&"TABLE"===this.rangeElement.previousElementSibling.tagName)return;this.oldRangeElement=this.rangeElement.previousElementSibling}if(sf.base.isNullOrUndefined(this.oldRangeElement))return;"OL"!==this.oldRangeElement.tagName&&"UL"!==this.oldRangeElement.tagName||(this.oldRangeElement=this.oldRangeElement.lastElementChild.lastElementChild?this.oldRangeElement.lastElementChild.lastElementChild:this.oldRangeElement.lastElementChild);for(var s=this.oldRangeElement.lastChild;3!==s.nodeType&&"#text"!==s.nodeName&&"BR"!==s.nodeName;)s=s.lastChild;if(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),s,s.textContent.length),this.oldRangeElement.querySelector("BR")&&sf.base.detach(this.oldRangeElement.querySelector("BR")),!sf.base.isNullOrUndefined(this.rangeElement)&&this.oldRangeElement!=this.rangeElement){for(;this.rangeElement.firstChild;)this.oldRangeElement.appendChild(this.rangeElement.childNodes[0]);i?sf.base.detach(this.rangeElement.parentElement):sf.base.detach(this.rangeElement),this.oldRangeElement.normalize()}}},n.prototype.deleteCleanup=function(e,t){var i,n,s=!1;if("Delete"===e.args.code&&46===e.args.keyCode&&0!==this.parent.getText().trim().replace(/(\r\n|\n|\r)/gm,"").replace(/\u200B/g,"").length&&0===this.parent.getSelection().length&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.deleteRangeElement=n=this.getRootBlockNode(t.startContainer),"OL"===this.deleteRangeElement.tagName||"UL"===this.deleteRangeElement.tagName)(i=this.getRangeLiNode(t.startContainer)).nextElementSibling&&i.nextElementSibling.childElementCount>0&&!i.nextElementSibling.querySelector("BR")?sf.base.isNullOrUndefined(i.lastElementChild)?this.deleteRangeElement=i:(this.deleteRangeElement=i.lastElementChild,s=!0):this.deleteRangeElement=this.getRangeElement(i);else if(3===this.deleteRangeElement.nodeType||"TABLE"===this.deleteRangeElement.tagName||!sf.base.isNullOrUndefined(this.deleteRangeElement.nextElementSibling)&&"TABLE"===this.deleteRangeElement.nextElementSibling.tagName)return;if(this.getCaretIndex(t,this.deleteRangeElement)===this.deleteRangeElement.textContent.length){if(sf.base.isNullOrUndefined(i)?this.deleteOldRangeElement=this.deleteRangeElement.nextElementSibling:s||!sf.base.isNullOrUndefined(i.nextElementSibling)?this.deleteOldRangeElement=this.getRangeElement(i.nextElementSibling):this.deleteOldRangeElement=n.nextElementSibling,sf.base.isNullOrUndefined(this.deleteOldRangeElement))return;0===t.startOffset&&1===t.endOffset&&"IMG"===this.deleteRangeElement.childNodes[0].nodeName?(this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),this.deleteRangeElement,this.deleteRangeElement,0,1),this.isImageDelete=!0):(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.deleteRangeElement,this.deleteRangeElement.childNodes.length),this.isImageDelete=!1),this.deleteRangeElement.querySelector("BR")&&sf.base.detach(this.deleteRangeElement.querySelector("BR"));var o="SPAN"!==this.deleteOldRangeElement.tagName&&"e-img-resize"===this.deleteRangeElement.className;if(!sf.base.isNullOrUndefined(this.deleteRangeElement)&&"OL"!==this.deleteOldRangeElement.tagName&&"UL"!==this.deleteOldRangeElement.tagName&&this.deleteOldRangeElement!==this.deleteRangeElement&&o&&"LI"!==this.deleteOldRangeElement.tagName&&this.deleteOldRangeElement!==this.deleteRangeElement){for(;this.deleteOldRangeElement.firstChild;)this.deleteRangeElement.appendChild(this.deleteOldRangeElement.childNodes[0]);s?sf.base.detach(this.deleteOldRangeElement.parentElement):sf.base.detach(this.deleteOldRangeElement),this.deleteRangeElement.normalize()}else this.deleteRangeElement=null,this.deleteOldRangeElement=null}else this.deleteRangeElement=null}},n.prototype.getCaretIndex=function(e,t){var i=0;if(0!==this.parent.getDocument().getSelection().rangeCount){var n=e.cloneRange();n.selectNodeContents(t),n.setEnd(e.endContainer,e.endOffset),i=n.toString().length}return i},n.prototype.getRangeElement=function(e){return e.lastElementChild?"BR"===e.lastElementChild.tagName?e.lastElementChild.previousElementSibling?e.lastElementChild.previousElementSibling:e:e.lastElementChild:e},n.prototype.getRootBlockNode=function(e){for(;e&&this.parent&&this.parent.inputElement!=e&&e.parentElement!==this.parent.inputElement;e=e)e=e.parentElement;return e},n.prototype.getRangeLiNode=function(e){for(var t=e.parentElement;t!=this.parent.inputElement&&(1!==t.nodeType||"LI"!==t.tagName);)t=t.parentElement;return t},n.prototype.onPaste=function(e){var t=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(e.text.match(t)){e.args.preventDefault();for(var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n=(this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),s=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),o=e.text.split("\n"),r="",a=0;a<o.length;a++)if(""===o[a].trim())r+=x(this.parent);else{for(var l="",h=!0,d=o[a].split(" "),c=0;c<d.length;c++)""===d[c].trim()?l+=h?"&nbsp;":" ":(h=!1,l+=d[c]+" ");r+=0===a?"<span>"+l.trim()+"</span>":"<p>"+l.trim()+"</p>"}var p=document.createElement("div");p.setAttribute("class","pasteContent"),p.style.display="inline",p.innerHTML=r;var u=p.querySelectorAll("span, p");for(a=0;a<u.length;a++){var f=u[a].innerHTML.split(" "),g="";for(c=0;c<f.length;c++)f[c].match(n)||f[c].match(s)?g+='<a className="e-rte-anchor" href="'+f[c]+'" title="'+f[c]+'" target="_blank">'+f[c]+" </a>":g+=f[c]+" ";u[a].innerHTML=g.trim()}e.callBack(p.innerHTML)}},n.prototype.spaceLink=function(e){var t=this.nodeSelectionObj.getRange(this.parent.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(t),n=t.startContainer.textContent.substr(0,t.endOffset),s=n.split(" "),o=s[s.length-1],r=t.startOffset-(n.length-s[s.length-1].length);o=o.slice(0,r);var a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if("A"!==i[0].nodeName&&o.match(a)){var l=this.nodeSelectionObj.save(t,this.parent.getDocument()),h={url:o.indexOf("http")>-1?o:"http://"+o,selection:l,selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),text:o,title:"",target:"_blank"};this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},e,h)}},n.prototype.onToolbarClick=function(e){var t,i,n,s=e.item,o=e.originalEvent.target,r=o&&sf.base.closest(o,".e-rte-quick-popup");if(r&&!r.classList.contains("e-rte-inline-popup")){if("SourceCode"!==s.subCommand&&"Preview"!==s.subCommand&&"FontColor"!==s.subCommand&&"BackgroundColor"!==s.subCommand){!u()||"Images"!==s.command&&"Audios"!==s.command&&"Videos"!==s.command||this.nodeSelectionObj.restore();var a=this.nodeSelectionObj.getRange(this.parent.getDocument());t=this.nodeSelectionObj.save(a,this.parent.getDocument()),i=this.nodeSelectionObj.getNodeCollection(a),n=this.nodeSelectionObj.getParentNodeCollection(a)}"Images"===s.command&&this.parent.observer.notify("image-toolbar-action",{member:"image",args:e,selectNode:i,selection:t,selectParent:n}),"Audios"===s.command&&this.parent.observer.notify("audio-toolbar-action",{member:"audio",args:e,selectNode:i,selection:t,selectParent:n}),"Videos"===s.command&&this.parent.observer.notify("video-toolbar-action",{member:"video",args:e,selectNode:i,selection:t,selectParent:n}),"Links"===s.command&&this.parent.observer.notify("link-toolbar-action",{member:"link",args:e,selectNode:i,selection:t,selectParent:n}),"Table"===s.command&&this.parent.observer.notify("table-toolbar-action",{member:"table",args:e,selectNode:i,selection:t,selectParent:n})}else{if("SourceCode"!==s.subCommand&&"Preview"!==s.subCommand&&"FontColor"!==s.subCommand&&"BackgroundColor"!==s.subCommand){a=this.nodeSelectionObj.getRange(this.parent.getDocument());t=this.nodeSelectionObj.save(a,this.parent.getDocument()),i=this.nodeSelectionObj.getNodeCollection(a),n=this.nodeSelectionObj.getParentNodeCollection(a)}switch(s.subCommand){case"Maximize":this.parent.observer.notify("enableFullScreen",{args:e});break;case"Minimize":this.parent.observer.notify("disableFullScreen",{args:e});break;case"CreateLink":this.parent.observer.notify("insertLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:n});break;case"RemoveLink":this.parent.observer.notify("unLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:n});break;case"Print":this.parent.print();break;case"Image":this.parent.observer.notify("insertImage",{member:"image",args:e,selectNode:i,selection:t,selectParent:n});break;case"Audio":this.parent.observer.notify("insertAudio",{member:"audio",args:e,selectNode:i,selection:t,selectParent:n});break;case"Video":this.parent.observer.notify("insertVideo",{member:"video",args:e,selectNode:i,selection:t,selectParent:n});break;case"CreateTable":this.parent.observer.notify("createTable",{member:"table",args:e,selection:t});break;case"SourceCode":this.parent.observer.notify("sourceCode",{member:"viewSource",args:e});break;case"Preview":this.parent.observer.notify("updateSource",{member:"updateSource",args:e});break;case"FontColor":case"BackgroundColor":break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}}},n.prototype.render=function(){var e=this.parent.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter=new Be({currentDocument:this.parent.getDocument(),element:e,options:t}),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new J(this.parent)),this.parent.inlineMode.enable&&(sf.base.isNullOrUndefined(this.parent.fontFamily.default)||(e.style.fontFamily=this.parent.fontFamily.default),sf.base.isNullOrUndefined(this.parent.fontSize.default)||(e.style.fontSize=this.parent.fontSize.default)),this.parent.observer.notify("bind-on-end",{})},n.prototype.selectAll=function(){var e=function e(t,i){var n=[];for(i=i.firstChild;i;i=i.nextSibling)3===i.nodeType?n.push(i):n=n.concat(e(t,i));return n}(this.parent.getDocument(),this.parent.getEditPanel());e.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),e[0],e[e.length-1],0,e[e.length-1].textContent.length)},n.prototype.selectRange=function(e){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),e.range)},n.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()).toString())},n.prototype.removeEventListener=function(){this.parent.observer.off(e,this.render),this.parent.observer.off("html-toolbar-click",this.onToolbarClick),this.parent.observer.off(t,this.destroy),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off(i,this.onKeyUp),this.parent.observer.off("selectAll",this.selectAll),this.parent.observer.off("selectRange",this.selectRange),this.parent.observer.off("getSelectedHtml",this.getSelectedHtml),this.parent.observer.off(o,this.onSelectionSave),this.parent.observer.off(r,this.onSelectionRestore),this.parent.observer.off("readOnlyMode",this.updateReadOnly),this.parent.observer.off(l,this.onPaste),this.parent.observer.off("tableclass",this.isTableClassAdded)},n.prototype.destroy=function(){this.removeEventListener()},n}(),Ue=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.showFullScreen=function(e){var t=this;!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars(),this.scrollableParent=sf.popups.getScrollableParent(this.parent.element),this.parent.actionBeginEnabled?this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Maximize",cancel:!1}).then((function(e){e.cancel||t.showActionBeginCallback()})):this.showActionBeginCallback(),setTimeout((function(){t.parent.setContentHeight(),t.parent.inputElement.focus()}),100)},e.prototype.showActionBeginCallback=function(){this.toggleParentOverflow(!0),this.parent.setContentHeight(),this.invokeActionComplete("Maximize")},e.prototype.hideFullScreen=function(e){var t=this;!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars();for(var i=document.querySelectorAll(".e-rte-overflow"),n=0;n<i.length;n++)sf.base.removeClass([i[n]],["e-rte-overflow"]);this.parent.actionBeginEnabled?this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Minimize",cancel:!1}).then((function(e){e.cancel||t.hideActionBeginCallback()})):this.hideActionBeginCallback(),setTimeout((function(){t.parent.setContentHeight(),t.parent.inputElement.focus()}),100)},e.prototype.hideActionBeginCallback=function(){this.parent.setContentHeight(),this.invokeActionComplete("Minimize")},e.prototype.invokeActionComplete=function(e){this.parent.actionCompleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:e})},e.prototype.toggleParentOverflow=function(e){if(!sf.base.isNullOrUndefined(this.scrollableParent))for(var t=0;t<this.scrollableParent.length;t++)if("#document"===this.scrollableParent[t].nodeName){var i=document.querySelector("body");sf.base.addClass([i],["e-rte-overflow"])}else{i=this.scrollableParent[t];sf.base.addClass([i],["e-rte-overflow"])}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"full-screen":this.parent.dotNetRef.invokeMethodAsync("ShowFullScreenClient"),this.showFullScreen(e.args),t.preventDefault();break;case"escape":this.parent.dotNetRef.invokeMethodAsync("HideFullScreenClient"),this.hideFullScreen(e.args),t.preventDefault()}},e.prototype.addEventListener=function(){this.parent.observer.on("enableFullScreen",this.showFullScreen,this),this.parent.observer.on("disableFullScreen",this.hideFullScreen,this),this.parent.observer.on(s,this.onKeyDown,this),this.parent.observer.on(t,this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("enableFullScreen",this.showFullScreen),this.parent.observer.off("disableFullScreen",this.hideFullScreen),this.parent.observer.off(s,this.onKeyDown),this.parent.observer.off(t,this.destroy)},e.prototype.destroy=function(){this.parent.element.classList.contains("e-rte-full-screen")&&this.toggleParentOverflow(!1);for(var e=document.querySelectorAll(".e-rte-overflow"),t=0;t<e.length;t++)sf.base.removeClass([e[t]],["e-rte-overflow"]);this.removeEventListener()},e}(),He=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("enterHandler",this.enterHandler,this),this.parent.observer.on(t,this.destroy,this)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.observer.off("enterHandler",this.enterHandler),this.parent.observer.off(t,this.destroy)},e.prototype.getRangeNode=function(){this.range=this.parent.getRange(),this.startNode="#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement:this.range.startContainer,this.endNode="#text"===this.range.endContainer.nodeName?this.range.endContainer.parentElement:this.range.endContainer},e.prototype.enterHandler=function(e){var t=this;if(sf.base.isNullOrUndefined(document.querySelector(".e-mention.e-popup-open"))){this.getRangeNode();var i=!0;if(this.formatTags=["h1","h2","h3","h4","h5","h6","blockquote"],!sf.base.isNullOrUndefined(this.startNode.closest("TABLE"))&&!sf.base.isNullOrUndefined(this.endNode.closest("TABLE"))){i=!1;for(var n=this.startNode,s=n;!this.parent.formatter.editorManager.domNode.isBlockNode(n);)s=n=n.parentElement;i="TD"!==s.tagName&&"TBODY"!==s.tagName}if(13===e.args.which&&"Enter"===e.args.code&&!e.args.ctrlKey&&sf.base.isNullOrUndefined(this.startNode.closest("LI, UL, OL"))&&sf.base.isNullOrUndefined(this.endNode.closest("LI, UL, OL"))&&i&&sf.base.isNullOrUndefined(this.startNode.closest("PRE"))&&sf.base.isNullOrUndefined(this.endNode.closest("PRE"))){var o={name:"actionBegin",requestType:e.args.shiftKey?"ShiftEnterAction":"EnterAction",originalEvent:e.args,cancel:!1};e.args.preventDefault(),this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",o).then((function(n){if(!n.cancel){var s=e.args.shiftKey;if(t.range.startOffset!==t.range.endOffset||t.range.startContainer!==t.range.endContainer)if("SPAN"===t.range.startContainer.nodeName&&(t.range.startContainer.classList.contains("e-video-wrap")||t.range.startContainer.classList.contains("e-audio-wrap"))||t.range.deleteContents(),"#text"===t.range.startContainer.nodeName&&0===t.range.startContainer.textContent.length&&t.range.startContainer.parentElement!==t.parent.inputElement)"BR"===t.parent.enterKey?t.range.startContainer.parentElement.innerHTML="&#8203;":t.range.startContainer.parentElement.innerHTML="<br>";else if(t.range.startContainer===t.parent.inputElement&&""===t.range.startContainer.innerHTML){t.range.startContainer.innerHTML="<br>";var o=t.range.startContainer.childNodes[t.range.startOffset];t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,0)}else if(t.parent.inputElement===t.range.startContainer){if("#text"===(o=t.range.startContainer.childNodes[t.range.startOffset]).nodeName&&0===o.textContent.length)t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,0===o.textContent.length?0:o.previousSibling.textContent.length);else if(t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,o.textContent.length>=0?0:1),0===o.previousSibling.textContent.length){if(sf.base.detach(o.previousSibling),!s){for(var r=sf.base.isNullOrUndefined(o.lastChild)?o:o.lastChild;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)r=r.lastChild;"BR"!==r.nodeName&&0===r.parentElement.textContent.length&&0===r.parentElement.innerHTML.length&&"BR"!==r.parentElement.nodeName&&r.parentElement.appendChild(sf.base.createElement("BR")),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),"BR"===r.nodeName?r:r.parentElement,r.parentElement.textContent.length>=0||"BR"===r.nodeName?0:1)}}else if(0===o.textContent.length){for(r="#text"===o.previousSibling.nodeName?o.previousSibling:o.previousSibling.lastChild;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName;)r=r.lastChild;t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),r,r.textContent.length),sf.base.detach(o)}else if("BR"!==t.parent.enterKey&&0!==o.previousSibling.textContent.length&&0!==o.textContent.length)return void e.args.preventDefault();t.getRangeNode()}if(t.range.startContainer===t.range.endContainer&&t.range.startOffset===t.range.endOffset&&t.range.startContainer===t.parent.inputElement){if(sf.base.isNullOrUndefined(t.range.startContainer.childNodes[t.range.startOffset])||sf.base.isNullOrUndefined(t.range.startContainer.childNodes[t.range.startOffset].previousElementSibling)||"TABLE"!==t.range.startContainer.childNodes[t.range.startOffset].previousElementSibling.nodeName||t.parent.tableModule.removeResizeEle(),1!==t.parent.inputElement.childNodes.length||"TABLE"!==t.parent.inputElement.childNodes[0].nodeName)if(sf.base.isNullOrUndefined(t.range.startContainer.childNodes[t.range.startOffset])){for(var a=t.range.startContainer.childNodes[t.range.startOffset-1];null!==a.lastChild&&"#text"!==a.nodeName;)a=a.lastChild;t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),a,"BR"===a.nodeName?0:a.textContent.length)}else t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),t.range.startContainer.childNodes[t.range.startOffset],0);t.getRangeNode()}if("P"===t.parent.enterKey&&!s||"DIV"===t.parent.enterKey&&!s||"P"===t.parent.shiftEnterKey&&s||"DIV"===t.parent.shiftEnterKey&&s){if(1===t.range.startOffset&&1===t.parent.inputElement.childNodes.length&&"TABLE"===t.parent.inputElement.childNodes[0].nodeName){(u=t.createInsertElement(s)).appendChild(sf.base.createElement("BR")),t.parent.inputElement.appendChild(u),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),u,0)}else{var l=void 0;l=i&&t.parent.formatter.editorManager.domNode.isBlockNode(t.startNode)?t.startNode:t.parent.formatter.editorManager.domNode.blockParentNode(t.startNode);var h=!1,d=!1;if(0===t.range.startOffset||0===t.range.endOffset||t.range.startContainer!==t.range.endContainer||!sf.base.isNullOrUndefined(l.childNodes[0])&&"IMG"===l.childNodes[0].nodeName&&l.querySelectorAll("img, audio, video").length>0)0===t.range.startOffset&&0===t.range.endOffset&&(d=!0);else{var c=t.range.startContainer.textContent.substring(0,t.range.startOffset);160!==c.charCodeAt(t.range.startOffset-1)&&0===c.trim().length&&(d=!0)}if(t.removeBRElement(l),!(-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&0===t.range.startOffset&&t.range.startContainer===t.range.endContainer&&"#text"===t.range.startContainer.nodeName&&!t.parent.formatter.editorManager.domNode.isBlockNode(t.range.startContainer.previousSibling)&&t.range.startContainer.parentElement===t.range.startContainer.previousSibling.parentElement)&&(0===t.range.startOffset&&0===t.range.endOffset||d)&&(sf.base.isNullOrUndefined(t.range.startContainer.previousSibling)||"IMG"!==t.range.startContainer.previousSibling.nodeName&&"BR"!==t.range.startContainer.previousSibling.nodeName)){var p=void 0,u=void 0;!sf.base.isNullOrUndefined(t.range.startContainer.childNodes)&&0===t.range.startContainer.textContent.length&&(t.range.startContainer.querySelectorAll("img, audio, video").length>0||"IMG"===t.range.startContainer.nodeName||"TABLE"===t.range.startContainer.nodeName)?(u=t.createInsertElement(s),h=!0,p=!1):0!==l.textContent.trim().length||"IMG"===l.childNodes[0].nodeName||""===l.textContent.trim()&&l.querySelectorAll("img, audio, video").length>0?(t.range.startOffset===t.range.endOffset&&0!==t.range.startOffset?u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!1).cloneNode(!0):(u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0).cloneNode(!0),h=!0),p=!1):(u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0).cloneNode(!0),p=!0);var f=void 0;for(f=t.formatTags.indexOf(u.nodeName.toLocaleLowerCase())<0?t.createInsertElement(s):sf.base.createElement(u.nodeName);u.firstChild;)f.appendChild(u.firstChild);if(l.parentElement.insertBefore(f,l),!p){r=f;var g=void 0;if(t.range.startOffset===t.range.endOffset&&0!==t.range.startOffset)for(;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)g=r,r=r.lastChild;else g=r;g.innerHTML="<br>",h||sf.base.detach(l)}t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),f.nextElementSibling,0)}else if(0!==l.textContent.length||!sf.base.isNullOrUndefined(l.childNodes[0])&&"IMG"===l.childNodes[0].nodeName)if(t.range.startContainer===t.range.endContainer&&"SPAN"===t.range.startContainer.nodeName&&(t.range.startContainer.classList.contains("e-video-wrap")||t.range.startContainer.classList.contains("e-audio-wrap"))){if(l.textContent.trim().length>0){u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0);for(var m=sf.base.isNullOrUndefined(u.previousSibling.querySelector(".e-video-wrap"))?u.previousSibling.querySelector(".e-audio-wrap"):u.previousSibling.querySelector(".e-video-wrap"),v=!1,b=m.previousSibling;!sf.base.isNullOrUndefined(b)&&"#text"!==b.nodeName;)b=b.lastChild;if(sf.base.isNullOrUndefined(b)){var y=sf.base.createElement("br");m.parentElement.appendChild(y),v=!0}v?t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),m.parentElement,0):t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),b,b.textContent.length),sf.base.detach(m)}else{for(o=(u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0)).previousSibling;!sf.base.isNullOrUndefined(o.firstChild);)sf.base.detach(o.firstChild);y=sf.base.createElement("br");o.appendChild(y),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,0)}sf.base.isNullOrUndefined(t.parent.audioModule)||t.parent.audioModule.hideAudioQuickToolbar(),sf.base.isNullOrUndefined(t.parent.videoModule)||t.parent.videoModule.hideVideoQuickToolbar()}else{u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0);if(sf.base.isNullOrUndefined(u.childNodes[0])||"#text"!==u.childNodes[0].nodeName||0!==u.childNodes[0].textContent.length||sf.base.detach(u.childNodes[0]),0===u.textContent.trim().length){y=sf.base.createElement("br");if("A"===t.startNode.nodeName){var C=t.startNode.parentElement;t.startNode.parentElement.insertBefore(y,t.startNode),sf.base.detach(t.startNode),t.startNode=C}else"BR"!==t.startNode.nodeName&&t.startNode.appendChild(y);"\n"===u.childNodes[0].textContent&&sf.base.detach(u.childNodes[0]),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),t.startNode,0)}if(("P"===t.parent.enterKey||"DIV"===t.parent.enterKey)&&!s||("DIV"===t.parent.shiftEnterKey||"P"===t.parent.shiftEnterKey)&&s){var w=t.formatTags.indexOf(u.nodeName.toLocaleLowerCase());if(w<0||w>=0&&0===u.textContent.trim().length){for(var M=t.createInsertElement(s);u.firstChild;)M.appendChild(u.firstChild);t.parent.formatter.editorManager.domNode.insertAfter(M,u),sf.base.detach(u),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),t.parent.formatter.editorManager.domNode.isBlockNode(t.startNode)?M:t.startNode,0)}}}else if(sf.base.isNullOrUndefined(l.children[0])||"BR"===l.children[0].tagName){(f=t.createInsertElement(s)).innerHTML="<br>",t.parent.formatter.editorManager.domNode.insertAfter(f,l),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),f,0)}else{var u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!1).cloneNode(!0);t.parent.formatter.editorManager.domNode.insertAfter(u,l),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),u,u.textContent.length>=0?0:1)}}e.args.preventDefault()}if("BR"===t.parent.enterKey&&!s||"BR"===t.parent.shiftEnterKey&&s){var S=void 0;if(t.parent.formatter.editorManager.domNode.isBlockNode(t.startNode))S=t.startNode;else{for(var x=t.startNode,N=x;!t.parent.formatter.editorManager.domNode.isBlockNode(x);)N=x,x=x.parentElement;S=x===t.parent.inputElement?N:x}t.removeBRElement(S);for(var O=S.lastChild;!sf.base.isNullOrUndefined(O)&&"#text"!==O.nodeName&&"BR"!==O.nodeName&&"IMG"!==O.nodeName;)O=O.lastChild;var E=t.range.startContainer===O?t.range.startContainer.textContent.length:S.textContent.length,I="IMG"===t.range.startContainer.nodeName||t.range.startContainer.childNodes.length>0&&"IMG"===t.range.startContainer.childNodes[t.range.startOffset].nodeName;if(S!==t.parent.inputElement&&t.parent.formatter.editorManager.domNode.isBlockNode(S)&&t.range.startOffset===t.range.endOffset&&(t.range.startOffset===E||0===S.textContent.trim().length&&I)){var T=sf.base.createElement("br");if(0===t.range.startOffset&&"TABLE"===t.range.startContainer.nodeName)t.range.startContainer.parentElement.insertBefore(T,t.range.startContainer);else if("BR"===O.nodeName&&0===S.textContent.length)t.parent.formatter.editorManager.domNode.insertAfter(T,O);else if(0===t.range.startOffset&&0===t.range.endOffset&&I){var D="IMG"===t.range.startContainer.nodeName?t.range.startContainer:t.range.startContainer.childNodes[t.range.startOffset];S.insertBefore(T,D),T=D}else{var j=sf.base.createElement("br");t.parent.formatter.editorManager.domNode.insertAfter(T,t.range.startContainer),t.parent.formatter.editorManager.domNode.insertAfter(j,t.range.startContainer)}t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),T,0)}else if(sf.base.isNullOrUndefined(S)||S===t.parent.inputElement||"BR"===S.nodeName)t.insertBRElement();else if(0===S.textContent.trim().length||1===S.textContent.trim().length&&8203===S.textContent.charCodeAt(0)){u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,S,!0).cloneNode(!0);t.parent.formatter.editorManager.domNode.insertAfter(u,S);var A=sf.base.createElement("br");u.parentElement.insertBefore(A,u),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),u,0)}else{u=void 0,A=sf.base.createElement("br");if(0!==t.range.startOffset||0!==t.range.endOffset||sf.base.isNullOrUndefined(S.previousSibling)||"BR"!==S.previousSibling.nodeName)t.insertBRElement();else{u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,S,!1).cloneNode(!0),t.parent.formatter.editorManager.domNode.insertAfter(A,S),t.insertFocusContent();for(r=A.nextSibling;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName;)r=r.lastChild;t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),r,0)}}e.args.preventDefault()}var z={name:"actionComplete",requestType:s?"ShiftEnterAction":"EnterAction",event:e.args};t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",z)}}))}}},e.prototype.removeBRElement=function(e){-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&this.range.endOffset===e.textContent.length&&(0!==e.textContent.length||e.querySelectorAll("BR").length>1)&&!sf.base.isNullOrUndefined(e.lastChild)&&"BR"===e.lastChild.nodeName&&sf.base.detach(e.lastChild)},e.prototype.insertBRElement=function(){var e=!1,t=!0;0===this.range.endContainer.textContent.length&&"BR"===this.range.startContainer.nodeName&&(t=!1);var i=sf.base.createElement("br");if("BR"===this.startNode.nodeName&&"BR"===this.endNode.nodeName&&0===this.range.startOffset&&this.range.startOffset===this.range.endOffset?(this.parent.formatter.editorManager.domNode.insertAfter(i,this.startNode),e=!0):(this.startNode!==this.parent.inputElement||sf.base.isNullOrUndefined(this.range.startContainer.previousSibling)||"BR"!==this.range.startContainer.previousSibling.nodeName||0!==this.range.startContainer.textContent.length||(e=!0),this.range.insertNode(i)),e||!sf.base.isNullOrUndefined(i.nextElementSibling)&&"BR"===i.nextElementSibling.tagName||!sf.base.isNullOrUndefined(i.nextSibling)&&i.nextSibling.textContent.length>0)this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),!sf.base.isNullOrUndefined(i.nextSibling)&&t?i.nextSibling:i,0),e=!1;else{var n=sf.base.createElement("br");this.range.insertNode(n),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),i,0)}},e.prototype.insertFocusContent=function(){0===this.range.startContainer.textContent.length&&("#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement.innerHTML="&#8203;":this.range.startContainer.innerHTML="&#8203;")},e.prototype.createInsertElement=function(e){var t;return"DIV"===this.parent.enterKey&&!e||"DIV"===this.parent.shiftEnterKey&&e?t=sf.base.createElement("div"):("P"===this.parent.enterKey&&!e||"P"===this.parent.shiftEnterKey&&e)&&(t=sf.base.createElement("p")),t},e}(),Fe={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187},Ye=function(){function e(t,i){var n=this;this.keyPressHandler=function(t){for(var i=t.altKey,s=t.ctrlKey,o=t.shiftKey,r=t.metaKey,a=t.which,l=0,h=Object.keys(n.keyConfigs);l<h.length;l++)for(var d=h[l],c=0,p=n.keyConfigs[d].split(",");c<p.length;c++){var u=p[c],f=e.getKeyConfigData(u.trim());i!==f.altKey||s!==f.ctrlKey&&!r||o!==f.shiftKey||a!==f.keyCode||(t.action=d)}n.keyAction&&n.keyAction(t)},this.element=t,sf.base.extend(this,this,i),this.onKeyPressHandler=this.keyPressHandler.bind(this),this.bind()}return e.prototype.destroy=function(){this.unWireEvents()},e.prototype.bind=function(){this.wireEvents()},e.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.onKeyPressHandler)},e.prototype.unWireEvents=function(){this.element.removeEventListener(this.eventName,this.onKeyPressHandler)},e.getKeyConfigData=function(t){if(t in this.configCache)return this.configCache[t];var i=t.toLowerCase().split("+"),n={altKey:-1!==i.indexOf("alt"),ctrlKey:-1!==i.indexOf("ctrl"),shiftKey:-1!==i.indexOf("shift"),keyCode:null};return i[i.length-1].length>1&&Number(i[i.length-1])?n.keyCode=Number(i[i.length-1]):n.keyCode=e.getKeyCode(i[i.length-1]),e.configCache[t]=n,n},e.getKeyCode=function(e){return Fe[e]||e.toUpperCase().charCodeAt(0)},e.configCache={},e}(),qe=function(){function i(e){this.parent=e,this.addEventListener()}return i.prototype.addEventListener=function(){this.parent.observer.on("sourceCode",this.sourceCode,this),this.parent.observer.on(e,this.onInitialEnd,this),this.parent.observer.on("updateSource",this.updateSourceCode,this),this.parent.observer.on(t,this.destroy,this)},i.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on("keydown-handler",this.onKeyDown,this)},i.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.observer.off("sourceCode",this.sourceCode),this.parent.observer.off("updateSource",this.updateSourceCode),this.parent.observer.off(e,this.onInitialEnd),this.parent.observer.off(t,this.destroy),this.parent.formatter.editorManager.observer.off("keydown-handler",this.onKeyDown)},i.prototype.getSourceCode=function(){return sf.base.createElement("textarea",{className:"e-rte-srctextarea",attrs:{"aria-labelledby":this.parent.element.id+"_rte-edit-view"}})},i.prototype.wireEvent=function(e){this.keyboardModule=new Ye(e,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),sf.base.EventHandler.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},i.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&sf.base.EventHandler.remove(this.previewElement,"mousedown",this.mouseDownHandler)},i.prototype.wireBaseKeyDown=function(){this.parent.keyboardModule=new Ye(this.parent.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},i.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},i.prototype.mouseDownHandler=function(e){this.parent.observer.notify("sourceCodeMouseDown",{args:e})},i.prototype.previewKeyDown=function(e){switch(e.action){case"html-source":this.parent.dotNetRef.invokeMethodAsync("PreviewCodeClient"),this.updateSourceCode(e),e.preventDefault();break;case"toolbar-focus":if(this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()){var t=this.parent.getToolbarElement().querySelector(".e-toolbar-item:not(.e-overlay)[title]");t.firstElementChild.removeAttribute("tabindex"),t.firstElementChild.focus()}}},i.prototype.onKeyDown=function(e){switch(e.event.action){case"html-source":e.event.preventDefault(),this.parent.dotNetRef.invokeMethodAsync("ViewSourceClient"),this.sourceCode(e),e.callBack({requestType:"SourceCode",editorMode:"HTML",event:e.event})}},i.prototype.sourceCode=function(e){var t=this;this.parent.isBlur=!1,this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"SourceCode",cancel:!1}).then((function(e){if(!e.cancel){var i=sf.base.selectAll(".e-toolbar-item",t.parent.element);if(sf.base.isNullOrUndefined(t.previewElement)&&(t.previewElement=t.getSourceCode()),t.parent.updateValueData(),t.parent.iframeSettings.enable){var n=void 0;(n=sf.base.isNullOrUndefined(t.parent.element.querySelector("#"+t.parent.element.id+"_source-view"))?sf.base.createElement("div",{className:"e-source-content",id:t.parent.element.id+"_source-view"}):t.parent.element.querySelector("#"+t.parent.element.id+"_source-view")).appendChild(t.previewElement),t.parent.element.appendChild(n),n.style.height=t.parent.getPanel().style.height,n.style.marginTop=t.parent.getPanel().style.marginTop,t.getPanel().value=t.getTextAreaValue(t.parent.getEditPanel()),t.parent.getPanel().style.display="none",n.style.display="block",t.getPanel().style.display="block"}else t.parent.inputElement.parentElement.appendChild(t.previewElement),t.getPanel().value=t.getTextAreaValue(t.parent.getEditPanel()),t.previewElement.style.height=t.parent.inputElement.offsetHeight+"px",t.parent.inputElement.style.display="none",t.previewElement.style.display="block";if(t.parent.isBlur=!1,t.parent.getToolbar()&&sf.base.removeClass([t.parent.getToolbar()],["e-expand-open"]),sf.base.removeClass(i,["e-active"]),t.parent.setContentHeight("sourceCode",!0),t.wireEvent(t.previewElement),t.unWireBaseKeyDown(),t.previewElement.focus(),!sf.base.isNullOrUndefined(t.parent.placeholder)&&!t.parent.iframeSettings.enable)t.parent.element.querySelector(".rte-placeholder").style.display="none";t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"SourceCode"}).then((function(e){t.parent.invokeChangeEvent()}))}}))},i.prototype.updateSourceCode=function(e){var t=this;this.parent.isBlur=!1,this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Preview",cancel:!1}).then((function(e){if(!e.cancel){var i=t.getPanel(),n=t.parent.serializeValue(i.value),s=void 0;if(s=null===n||""===n?"DIV"===t.parent.enterKey?"<div><br/></div>":"BR"===t.parent.enterKey?"<br/>":"<p><br/></p>":n,t.parent.iframeSettings.enable?(i.parentElement.style.display="none",i.style.display="none",t.parent.contentPanel.style.display="block",t.parent.getEditPanel().innerHTML=t.parent.enableHtmlEncode?O(s):s):(i.style.display="none",t.parent.getEditPanel().style.display="block",t.parent.getEditPanel().innerHTML=t.parent.enableHtmlEncode?O(s):s),t.parent.isBlur=!1,t.parent.getToolbar()&&sf.base.removeClass([t.parent.getToolbar()],["e-expand-open"]),t.parent.setContentHeight("preview",!0),t.unWireEvent(),t.wireBaseKeyDown(),t.parent.getEditPanel().focus(),t.parent.updateValueData(),!sf.base.isNullOrUndefined(t.parent.placeholder)&&0===t.parent.getEditPanel().innerText.length)t.parent.element.querySelector(".rte-placeholder").style.display="block";t.parent.addAudioVideoWrapper(),t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"Preview"}).then((function(e){t.parent.invokeChangeEvent()})),t.parent.observer.notify("tableclass",{})}}))},i.prototype.getTextAreaValue=function(e){var t;return t=this.parent.enableXhtml?this.parent.getXhtmlString(this.parent.value):this.parent.value,"<p><br></p>"===e.innerHTML||"<div><br></div>"===e.innerHTML||"<br>"===e.innerHTML||1===e.childNodes.length&&("P"===e.childNodes[0].tagName&&7===e.innerHTML.length||"DIV"===e.childNodes[0].tagName&&11===e.innerHTML.length)?"":t},i.prototype.getPanel=function(){return this.parent.element.querySelector(".e-rte-srctextarea")},i.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},i.prototype.destroy=function(){this.removeEventListener()},i}(),_e=function(){function e(e){this.parent=e}return e.prototype.quickToolbarOpen=function(){this.parent.dotNetRef.invokeMethodAsync("QuickToolbarOpenEvent",this.popupObj.element.classList.toString(),this.targetType)},e.prototype.renderPopup=function(e,t){this.targetType=t,e.popupObj=new sf.popups.Popup(e.element,{targetType:"relative",relateTo:this.parent.element,open:this.quickToolbarOpen.bind(this)}),this.popupObj=e.popupObj,e.popupObj.hide()},e}(),We=function(){function e(e){this.parent=e,this.isDOMElement=!1,this.popupRenderer=new _e(e)}return e.prototype.render=function(e,t){this.element=e,this.popupRenderer.renderPopup(this,t),this.addEventListener()},e.prototype.setPosition=function(e,t){var i,n,s=sf.base.closest(e.target,".e-img-caption"),o=!e.target.classList.contains("e-imginline")&&!e.target.classList.contains("e-imgbreak"),r=sf.base.isNullOrUndefined(s)?e.target:s,a=r.offsetTop,l=window.pageYOffset+e.parentData.top;n=a-e.editTop>e.popHeight?l+e.tBarElementHeight+(a-e.editTop)-e.popHeight-5:e.editTop+e.editHeight-(a+r.offsetHeight)>e.popHeight?l+e.tBarElementHeight+(a-e.editTop)+r.offsetHeight+5:e.y,i=(r=o?e.target:r).offsetWidth>e.popWidth?r.offsetWidth/2-e.popWidth/2+e.parentData.left+r.offsetLeft:e.parentData.left+r.offsetLeft,this.popupObj.position.X=t.x?e.x:i+e.popWidth>e.parentData.right?e.parentData.right-e.popWidth:i,this.popupObj.position.Y=t.y?e.y:n>=0?n:e.y+5,this.popupObj.dataBind()},e.prototype.checkCollision=function(e,t,i,n){var s,o,r=e.parentData.top,a=e.windowY+r+e.tBarElementHeight,l=[];l="document"===t?sf.popups.isCollide(e.popup):sf.popups.isCollide(e.popup,e.parentElement);for(var h=0;h<l.length;h++)switch(l[h]){case"top":o="document"===t?e.windowY:window.pageYOffset+r+e.tBarElementHeight;break;case"bottom":o="document"===t?"inline"===i?e.y-e.popHeight-10:e.windowHeight-(r+e.tBarElementHeight)>e.popHeight?a-e.windowHeight>e.popHeight?a+(e.windowHeight-r)-e.popHeight:a:e.windowY+(r+e.tBarElementHeight):"IMG"!==e.target.tagName?e.parentData.bottom+window.pageYOffset-e.popHeight-10:e.parentData.bottom+window.pageYOffset-e.popHeight-5;break;case"right":s="inline"===i?window.pageXOffset+(e.windowWidth-(e.popWidth+e.bodyRightSpace+10)):e.x-e.popWidth;break;case"left":s="inline"===i?0:e.parentData.left}this.popupObj.position.X=n.x?e.x:s||this.popupObj.position.X,this.popupObj.position.Y=n.y?e.y:o||this.popupObj.position.Y,this.popupObj.dataBind()},e.prototype.showPopup=function(e,t,i,n){var s=this,o=e,r=t,a={positionX:e,positionY:t};this.parent.onQuickTbOpenEnabled?this.parent.dotNetRef.invokeMethodAsync("BeforeQuickToolbarOpenEvent",a).then((function(e){e.cancel||s.onQuickTbOpenCallback(e.positionX,e.positionY,i,n,o,r)})):this.onQuickTbOpenCallback(e,t,i,n)},e.prototype.onQuickTbOpenCallback=function(e,t,i,n,s,o){var r,a,l=window.getComputedStyle(document.body),h=parseFloat(l.marginRight.split("px")[0])+parseFloat(l.paddingRight.split("px")[0]),d=window.innerHeight,c=window.innerWidth,p=this.parent.element,f=!sf.base.isNullOrUndefined(this.parent.getToolbar()),g=f&&this.parent.toolbarModule.getToolbarHeight(),m=f&&this.parent.toolbarModule.getExpandTBarPopHeight(),v=f?g+m:0;sf.base.addClass([this.element],["e-hide"]);var b,y={x:!1,y:!1};if(!sf.base.isNullOrUndefined(s)){var C=s!==e;y.x=C}if(!sf.base.isNullOrUndefined(o)){var w=o!==t;y.y=w}(sf.base.Browser.isDevice&&!u()&&sf.base.addClass([this.parent.getToolbar()],["e-hide"]),this.parent.iframeSettings.enable)?(r=(b=this.parent.getPanel().contentWindow).pageYOffset,a=b.innerHeight):(r=(b=sf.base.closest(i,".e-rte-content"))?b.scrollTop:0,a=b?b.offsetHeight:0);!this.parent.inlineMode.enable&&sf.base.closest(i,"table"),sf.base.append([this.element],document.body),this.popupObj.position.X=e+20,this.popupObj.position.Y=t+20,this.popupObj.dataBind(),this.popupObj.element.classList.add("e-popup-open");var M={x:e,y:t,target:i,editTop:r,editHeight:a,popup:this.popupObj.element,popHeight:this.popupObj.element.offsetHeight,popWidth:this.popupObj.element.offsetWidth,parentElement:p,bodyRightSpace:h,windowY:window.pageYOffset,windowHeight:d,windowWidth:c,parentData:p.getBoundingClientRect(),tBarElementHeight:v};("IMG"===i.tagName||"AUDIO"===i.tagName||"VIDEO"===i.tagName||"IFRAME"===i.tagName||i.classList&&(i.classList.contains("e-audio-wrap")||i.classList.contains("e-clickelem")||i.classList.contains("e-video-clickelem")))&&this.setPosition(M,y),this.parent.inlineMode.enable||this.checkCollision(M,"parent","",y),this.checkCollision(M,"document",this.parent.inlineMode.enable?"inline":"",y),this.popupObj.element.classList.remove("e-popup-close"),sf.base.removeClass([this.element],["e-hide"]),this.popupObj.show({name:"ZoomIn",duration:250}),sf.base.setStyleAttribute(this.element,{maxWidth:window.outerWidth+"px"}),sf.base.addClass([this.element],["e-rte-pop"]),this.isDOMElement=!0,this.parent.dotNetRef.invokeMethodAsync("UpdateClass",this.popupObj.element.classList.toString(),n)},e.prototype.hidePopup=function(){var e=this.parent.viewSourceModule.getViewPanel();sf.base.Browser.isDevice&&!u()&&sf.base.removeClass([this.parent.getToolbar()],["e-hide"]),sf.base.isNullOrUndefined(this.parent.getToolbar())||this.parent.inlineMode.enable||sf.base.isNullOrUndefined(e)||e.style.display,this.removeEleFromDOM(),this.isDOMElement=!1},e.prototype.removeEleFromDOM=function(){this.popupObj.hide(),this.element.classList.add("e-hide"),this.element.classList.add("e-rte-quick-popup-hide"),this.isDOMElement&&(sf.base.removeClass([this.element],["e-rte-pop"]),this.popupObj.element.removeAttribute("style"),this.popupObj.destroy(),this.parent.quickTbClosedEnabled&&this.parent.dotNetRef.invokeMethodAsync("QuickToolbarCloseEvent"))},e.prototype.updateStatus=function(e){if(this.element.classList.contains("e-rte-inline-popup")){var t=sf.base.selectAll(".e-toolbar-item",this.element);if(!(t.length<=0))A({args:e,dropDownModule:null,parent:this.parent,tbElements:t,tbItems:this.parent.toolbarSettings.items},!0)}},e.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this),this.parent.inlineMode.enable&&this.parent.observer.on("toolbar-updated",this.updateStatus,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(t,this.destroy),this.parent.inlineMode.enable&&this.parent.observer.off("toolbar-updated",this.updateStatus)},e.prototype.destroy=function(){this.popupObj&&!this.popupObj.isDestroyed&&(this.popupObj.destroy(),this.removeEleFromDOM()),this.removeEventListener()},e}(),Ve=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.showImageQTBar=function(e,t,i,n){var s=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Image_Quick_Popup");this.imageQTBar=new We(this.parent),this.imageQTBar.render(o,n),this.parent.dotNetRef.invokeMethodAsync("ShowImagePopup",this.imageQTBar.popupObj.element.classList.toString(),n).then((function(){s.imageQTBar.showPopup(e,t,i,n)}))}},e.prototype.showAudioQTBar=function(e,t,i,n){var s=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Audio_Quick_Popup");this.audioQTBar=new We(this.parent),this.audioQTBar.render(o,n),this.parent.dotNetRef.invokeMethodAsync("ShowAudioQuickToolbar",this.audioQTBar.popupObj.element.classList.toString(),n).then((function(){s.audioQTBar.showPopup(e,t,i,n)}))}},e.prototype.showVideoQTBar=function(e,t,i,n){var s=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Video_Quick_Popup");this.videoQTBar=new We(this.parent),this.videoQTBar.render(o,n),this.parent.dotNetRef.invokeMethodAsync("ShowVideoQuickToolbar",this.videoQTBar.popupObj.element.classList.toString(),n).then((function(){s.videoQTBar.showPopup(e,t,i,n)}))}},e.prototype.hideImageQTBar=function(){this.imageQTBar&&(this.imageQTBar.hidePopup(),this.imageQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideImagePopup"))},e.prototype.hideAudioQTBar=function(){this.audioQTBar&&(this.audioQTBar.hidePopup(),this.audioQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideAudioQuickToolbar"))},e.prototype.hideVideoQTBar=function(){this.videoQTBar&&(this.videoQTBar.hidePopup(),this.videoQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideVideoQuickToolbar"))},e.prototype.showLinkQTBar=function(e,t,i,n){var s=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Link_Quick_Popup");this.linkQTBar=new We(this.parent),this.linkQTBar.render(o,n),this.parent.dotNetRef.invokeMethodAsync("ShowLinkPopup",this.linkQTBar.popupObj.element.classList.toString()).then((function(){s.linkQTBar.showPopup(e,t,i,n)}))}},e.prototype.hideLinkQTBar=function(){this.linkQTBar&&(this.linkQTBar.hidePopup(),this.linkQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideLinkPopup"))},e.prototype.showTableQTBar=function(e,t,i,n){var s=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Table_Quick_Popup");this.tableQTBar=new We(this.parent),this.tableQTBar.render(o,n),this.parent.dotNetRef.invokeMethodAsync("ShowTablePopup",this.tableQTBar.popupObj.element.classList.toString()).then((function(){s.tableQTBar.showPopup(e,t,i,n)}))}},e.prototype.hideTableQTBar=function(){this.tableQTBar&&(this.tableQTBar.hidePopup(),this.tableQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideTablePopup"))},e.prototype.showInlineQTBar=function(e,t,i){var n=this;if(!this.parent.readonly&&this.parent.inlineMode.enable&&this.parent.inlineMode.enable&&(!sf.base.Browser.isDevice||u())){var s=document.querySelector("#"+this.parent.element.id+"_Inline_Quick_Popup");this.inlineQTBar=new We(this.parent),this.inlineQTBar.render(s,"Inline"),sf.base.EventHandler.add(this.inlineQTBar.element,"mousedown",this.onMouseDown,this);var o=this.inlineQTBar.popupObj.element.classList.toString();this.parent.dotNetRef.invokeMethodAsync("ShowInlinePopup",o).then((function(){n.inlineQTBar.showPopup(e,t,i,"Inline")}))}},e.prototype.hideInlineQTBar=function(){this.inlineQTBar&&(this.inlineQTBar.hidePopup(),this.inlineQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideInlinePopup"))},e.prototype.hideQuickToolbars=function(){sf.base.isNullOrUndefined(this.linkQTBar)||this.hideLinkQTBar(),sf.base.isNullOrUndefined(this.imageQTBar)||this.hideImageQTBar(),sf.base.isNullOrUndefined(this.audioQTBar)||this.hideAudioQTBar(),sf.base.isNullOrUndefined(this.videoQTBar)||this.hideVideoQTBar(),sf.base.isNullOrUndefined(this.tableQTBar)||this.hideTableQTBar(),!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!u()||this.hideInlineQTBar()},e.prototype.scrollHandler=function(){"hide"===this.parent.quickToolbarSettings.actionOnScroll.toLocaleLowerCase()&&this.hideQuickToolbars()},e.prototype.selectionChangeHandler=function(e){var t=this;this.parent.inlineMode.onSelection&&(clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){t.onSelectionChange(e)}),1e3))},e.prototype.onSelectionChange=function(e){sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document.body))&&(this.parent.getDocument().getSelection().isCollapsed||this.mouseUpHandler({args:e}))},e.prototype.toolbarUpdated=function(e){sf.base.isNullOrUndefined(this.linkQTBar)||this.hideLinkQTBar(),sf.base.isNullOrUndefined(this.imageQTBar)||this.hideImageQTBar(),sf.base.isNullOrUndefined(this.audioQTBar)||this.hideAudioQTBar(),sf.base.isNullOrUndefined(this.videoQTBar)||this.hideVideoQTBar(),sf.base.isNullOrUndefined(this.tableQTBar)||this.hideTableQTBar()},e.prototype.deBounce=function(e,t,i){var n=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){n.showInlineQTBar(e,t,i)}),1e3)},e.prototype.onMouseDown=function(e){this.parent.isBlur=!1,this.parent.isRTE=!0},e.prototype.mouseUpHandler=function(e){if(this.parent.inlineMode.enable&&(!sf.base.Browser.isDevice||u())){var t=e.args.touches?e.args.changedTouches[0]:e.args,i=this.parent.getRange(),n=e.args.target,s=sf.base.select(".e-rte-inline-popup",document.body);if(sf.base.isNullOrUndefined(s)||s.classList.contains("e-hide")){if(u()&&e.touchData&&e.touchData.prevClientX!==e.touchData.clientX&&e.touchData.prevClientY!==e.touchData.clientY)return;this.hideInlineQTBar();var o=this.parent.element.getBoundingClientRect().left;if(this.offsetX=this.parent.iframeSettings.enable?window.pageXOffset+o+t.clientX:t.pageX,this.offsetY=function(e,t,i){return i?window.pageYOffset+t.getBoundingClientRect().top+e.clientY:e.pageY}(t,this.parent.element,this.parent.iframeSettings.enable),"TEXTAREA"===n.nodeName)this.showInlineQTBar(this.offsetX,this.offsetY,n);else{var r=sf.base.closest(n,"a");if(!("IMG"===(n=r||n).tagName||"A"===n.tagName||sf.base.closest(n,"td,th")&&i.collapsed)){if(this.parent.inlineMode.onSelection&&i.collapsed)return;this.target=n,this.showInlineQTBar(this.offsetX,this.offsetY,n)}}}}},e.prototype.keyDownHandler=function(){!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!u()||sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document))||this.hideInlineQTBar()},e.prototype.inlineQTBarMouseDownHandler=function(){!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!u()||sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document))||this.hideInlineQTBar()},e.prototype.keyUpHandler=function(e){if(this.parent.inlineMode.enable&&!sf.base.Browser.isDevice){var t=e.args;if(this.parent.inlineMode.onSelection)return void(this.parent.getSelection().length>0&&(t.ctrlKey&&65===t.keyCode||t.shiftKey&&(33===t.keyCode||34===t.keyCode||35===t.keyCode||36===t.keyCode||37===t.keyCode||38===t.keyCode||39===t.keyCode||40===t.keyCode))&&this.showInlineQTBar(this.offsetX,this.offsetY,t.target));this.deBounce(this.offsetX,this.offsetY,t.target)}},e.prototype.onKeyDown=function(e){var t=e.args;8!==t.which&&46!==t.which||(this.imageQTBar&&!I(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup(),this.audioQTBar&&!I(this.audioQTBar.element,"e-popup-close")&&this.audioQTBar.hidePopup(),this.videoQTBar&&!I(this.videoQTBar.element,"e-popup-close")&&this.videoQTBar.hidePopup())},e.prototype.onIframeMouseDown=function(){this.hideQuickToolbars(),this.hideInlineQTBar()},e.prototype.addEventListener=function(){this.parent.inlineMode.enable&&this.parent.inlineMode.onSelection&&u()&&sf.base.EventHandler.add(this.parent.getDocument(),"selectionchange",this.selectionChangeHandler,this),this.parent.observer.on("toolbar-updated",this.toolbarUpdated,this),this.wireInlineQTBarEvents(),this.parent.observer.on("scroll",this.scrollHandler,this),this.parent.observer.on("contentscroll",this.scrollHandler,this),this.parent.observer.on("focusChange",this.hideQuickToolbars,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(s,this.onKeyDown,this)},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.getDocument(),"selectionchange",this.selectionChangeHandler),this.parent.observer.off("toolbar-updated",this.toolbarUpdated),this.unWireInlineQTBarEvents(),this.parent.observer.off("scroll",this.scrollHandler),this.parent.observer.off("contentscroll",this.scrollHandler),this.parent.observer.off("focusChange",this.hideQuickToolbars),this.parent.observer.off(t,this.destroy),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off(s,this.onKeyDown)},e.prototype.wireInlineQTBarEvents=function(){this.parent.observer.on("mouseUp",this.mouseUpHandler,this),this.parent.observer.on(a,this.inlineQTBarMouseDownHandler,this),this.parent.observer.on(s,this.keyDownHandler,this),this.parent.observer.on(i,this.keyUpHandler,this),this.parent.observer.on("sourceCodeMouseDown",this.mouseUpHandler,this)},e.prototype.unWireInlineQTBarEvents=function(){this.parent.observer.off("mouseUp",this.mouseUpHandler),this.parent.observer.off(a,this.inlineQTBarMouseDownHandler),this.parent.observer.off(s,this.keyDownHandler),this.parent.observer.off(i,this.keyUpHandler),this.parent.observer.off("sourceCodeMouseDown",this.mouseUpHandler)},e.prototype.destroy=function(){this.linkQTBar&&(sf.base.EventHandler.remove(this.linkQTBar.element,"mousedown",this.onMouseDown),this.linkQTBar.destroy()),this.imageQTBar&&(sf.base.EventHandler.remove(this.imageQTBar.element,"mousedown",this.onMouseDown),this.imageQTBar.destroy()),this.audioQTBar&&(sf.base.EventHandler.remove(this.audioQTBar.element,"mousedown",this.onMouseDown),this.audioQTBar.destroy()),this.videoQTBar&&(sf.base.EventHandler.remove(this.videoQTBar.element,"mousedown",this.onMouseDown),this.videoQTBar.destroy()),this.tableQTBar&&(sf.base.EventHandler.remove(this.tableQTBar.element,"mousedown",this.onMouseDown),this.tableQTBar.destroy()),this.inlineQTBar&&(sf.base.EventHandler.remove(this.inlineQTBar.element,"mousedown",this.onMouseDown),u()&&sf.base.EventHandler.remove(document,"selectionchange",this.selectionChangeHandler),this.inlineQTBar.destroy()),this.removeEventListener()},e}(),Xe="e-file-status",Qe="e-upload-file-list",Ze="e-file-abort-btn",Ge="e-file-reload-btn",Ke="e-file-remove-btn",Je="e-file-delete-btn",$e="e-upload-progress-bar",et="e-upload-progress-wrap",tt=function(){function e(e,t,i){this.fileList=[],this.filesData=[],this.files=[],this.minFileSize=0,this.maxFileSize=3e7,this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.element=t,this.parent=i,this.cssClass=e.cssClass,this.asyncSettings=e.asyncSettings,this.allowedExtensions=e.allowedExtensions,this.addEventListener(),this.render()}return e.prototype.addEventListener=function(){this.parent.observer.on("beforePasteUploadCallBack",this.beforePasteUploadCallBack,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("beforePasteUploadCallBack",this.beforePasteUploadCallBack)},e.prototype.render=function(){this.browserName=sf.base.Browser.info.name,this.uploaderName=this.element.getAttribute("name"),this.initializeUpload(),this.wireEvents(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.setCSSClass()},e.prototype.initializeUpload=function(){this.element.setAttribute("aria-label","Uploader"),this.element.setAttribute("tabindex","-1");var e=sf.base.createElement("span",{className:"e-file-select",attrs:{style:"display: none;"}});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=sf.base.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=sf.base.createElement("div",{className:"e-upload e-lib e-control-wrapper",attrs:{style:"background: white"}}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper)},e.prototype.setExtensions=function(e){""===e||sf.base.isNullOrUndefined(e)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",e)},e.prototype.setRTL=function(){this.enableRtl?sf.base.addClass([this.uploadWrapper],"e-rtl"):sf.base.removeClass([this.uploadWrapper],"e-rtl")},e.prototype.setCSSClass=function(e){var t=this.cssClass;sf.base.isNullOrUndefined(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),sf.base.isNullOrUndefined(this.cssClass)||""===t||sf.base.addClass([this.uploadWrapper],t.split(t.indexOf(",")>-1?",":" "));var i=e;sf.base.isNullOrUndefined(e)||(i=e.replace(/\s+/g," ").trim()),sf.base.isNullOrUndefined(e)||""===i||sf.base.removeClass([this.uploadWrapper],i.split(" "))},e.prototype.createFileList=function(e,t){if(this.createParentUL(),this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(e,this.element.files);else for(var i=0,n=e;i<n.length;i++){var s=n[i],o=sf.base.createElement("li",{className:Qe,attrs:{"data-file-name":s.name,"data-files-count":"1"}}),r=sf.base.createElement("span",{className:"e-file-container"}),a=sf.base.createElement("span",{className:"e-file-name",attrs:{title:s.name}});a.innerHTML=this.getFileNameOnly(s.name);var l=sf.base.createElement("span",{className:"e-file-type"});if(l.innerHTML="."+this.getFileType(s.name),this.enableRtl){var h=sf.base.createElement("span",{className:"e-rtl-container"});h.appendChild(l),h.appendChild(a),r.appendChild(h)}else r.appendChild(a),r.appendChild(l);var d=sf.base.createElement("span",{className:"e-file-size"});d.innerHTML=this.bytesToSize(s.size),r.appendChild(d);var c=sf.base.createElement("span",{className:Xe});r.appendChild(c),c.innerHTML=s.status,o.appendChild(r);var p=sf.base.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&p.classList.add("e-msie"),p.setAttribute("title","Remove"),o.appendChild(p),sf.base.EventHandler.add(p,"click",this.removeFiles,this),"2"===s.statusCode?(c.classList.add("e-upload-success"),p.classList.add(Je),p.setAttribute("title","Delete file")):"1"!==s.statusCode&&(c.classList.remove("e-upload-success"),c.classList.add("e-validation-fails")),"1"===s.statusCode&&""!==this.asyncSettings.saveUrl&&(c.innerHTML=""),p.classList.contains(Je)||p.classList.add(Ke),this.listParent.appendChild(o),this.fileList.push(o),this.truncateName(a);var u=this.flag;this.isPreLoadFile(s)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=u)}},e.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=sf.base.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},e.prototype.isFormUpload=function(){var e=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(e=!0),e},e.prototype.getFileType=function(e){var t,i=e.lastIndexOf(".");return i>=0&&(t=e.substring(i+1)),t||""},e.prototype.getFileNameOnly=function(e){var t=this.getFileType(e);return e.split("."+t)[0]},e.prototype.truncateName=function(e){var t=e;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},e.prototype.getSlicedName=function(e){var t;t=e.textContent,e.dataset.tail=t.slice(t.length-10)},e.prototype.setListToFileInfo=function(e,t){for(var i=0,n=e;i<n.length;i++){n[i].list=t}},e.prototype.getFileSize=function(e){for(var t=0,i=0,n=e;i<n.length;i++){t+=n[i].size}return t},e.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},e.prototype.createFormInput=function(e){var t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(var i=0,n=e;i<n.length;i++){n[i].input=t}t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},e.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.filesData.length===this.actionCompleteCount&&this.flag&&(this.flag=!1)},e.prototype.isPreLoadFile=function(e){for(var t=!1,i=0;i<this.files.length;i++)this.files[i].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[i].type===e.type&&(t=!0);return t},e.prototype.validatedFileSize=function(e){var t="",i="";return e<this.minFileSize?t="File size is too small":e>this.maxFileSize?i="File size is too large":(t="",i=""),{minSize:t,maxSize:i}},e.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},e.prototype.addInvalidClass=function(e){e.classList.add("e-file-invalid")},e.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var i=[],n=0,s=this.allowedExtensions.split(",");n<s.length;n++){var o=s[n];i.push(o.trim().toLocaleLowerCase())}for(var r=0;r<e.length;r++)-1===i.indexOf(("."+e[r].type).toLocaleLowerCase())&&(e[r].status="File type is not allowed",e[r].statusCode="0")}return t},e.prototype.getFilesData=function(e){return sf.base.isNullOrUndefined(e)?this.filesData:this.getSelectedFiles(e)},e.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=e:t.push(e),t},e.prototype.formValidateFileInfo=function(e,t){var i=e.status,n=this.validatedFileSize(e.size);""===n.minSize&&""===n.maxSize||(this.addInvalidClass(t),i=""!==n.minSize?"File size is too small":""!==n.maxSize?"File size is too large":i);var s=this.checkExtension(this.getFilesInArray(e))[0].status;return"File type is not allowed"===s&&(this.addInvalidClass(t),i=s),i},e.prototype.clearAll=function(){if(sf.base.isNullOrUndefined(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);this.clearData(),this.actionCompleteCount=0},e.prototype.clearData=function(e){sf.base.isNullOrUndefined(this.listParent)||(sf.base.detach(this.listParent),this.listParent=null),"msie"===this.browserName||e||(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},e.prototype.removeActionButtons=function(){this.actionButtons&&(sf.base.detach(this.actionButtons),this.actionButtons=null)},e.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span.e-upload-success").length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},e.prototype.getSelectedFiles=function(e){for(var t=[],i=this.fileList[e],n=this.getFilesData(),s=+i.getAttribute("data-files-count"),o=0,r=0;r<e;r++)o+=+this.fileList[r].getAttribute("data-files-count");for(var a=o;a<o+s;a++)t.push(n[a]);return t},e.prototype.formFileList=function(e,t){var i=sf.base.createElement("li",{className:Qe});i.setAttribute("data-files-count",e.length+"");for(var n,s=sf.base.createElement("span",{className:"e-file-container"}),o=0,r=e;o<r.length;o++){var a=r[o],l=sf.base.createElement("span",{className:"e-file-name"});l.innerHTML=this.getFileNameOnly(a.name);var h=sf.base.createElement("span",{className:"e-file-type"});if(h.innerHTML="."+this.getFileType(a.name),this.enableRtl){var d=sf.base.createElement("span",{className:"e-rtl-container"});d.appendChild(h),d.appendChild(l),s.appendChild(d)}else s.appendChild(l),s.appendChild(h);this.truncateName(l),n=this.formValidateFileInfo(a,i)}i.appendChild(s),this.setListToFileInfo(e,i);var c=sf.base.createElement("span");if(i.classList.contains("e-file-invalid")?(c.classList.add(Xe),c.classList.add("e-file-invalid"),c.innerText=e.length>1?"invalidFileSelection":n):(c.classList.add(e.length>1?"e-file-information":"e-file-size"),c.innerText=e.length>1?"totalFiles: "+e.length+" , size: "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),s.appendChild(c),sf.base.isNullOrUndefined(i.querySelector(".e-icons"))){var p=sf.base.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&p.classList.add("e-msie"),p.setAttribute("title","Remove"),i.appendChild(s),i.appendChild(p),sf.base.EventHandler.add(p,"click",this.removeFiles,this),p.classList.add(Ke)}this.listParent.appendChild(i),this.fileList.push(i)},e.prototype.removeFiles=function(e){var t=e.target.parentElement,i=this.fileList.indexOf(t),n=this.fileList[i],s=this.isFormUpload(),o=s?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);if(!sf.base.isNullOrUndefined(o)){if(e.target.classList.contains(Ze)&&!s){if(o[0].statusCode="5",!sf.base.isNullOrUndefined(n)){var r=n.querySelector("."+Ze);sf.popups.createSpinner({target:r,width:"20px"}),sf.popups.showSpinner(r)}n.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else sf.base.closest(e.target,".e-spinner-pane")||this.remove(o,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}},e.prototype.spliceFiles=function(e){for(var t=this.fileList[e],i=this.getFilesData(),n=+t.getAttribute("data-files-count"),s=0,o=0;o<e;o++)s+=+this.fileList[o].getAttribute("data-files-count");for(var r=s+n-1;r>=s;r--)i.splice(r,1)},e.prototype.remove=function(e,t,i,n,s){sf.base.isNullOrUndefined(n)&&(n=!0);var o={event:s,cancel:!1,filesData:[],customFormData:[],postRawFile:n,currentRequest:null};if(this.isFormUpload()){o.filesData=e,this.parent.observer.notify("removing",o);for(var r=!1,a=void 0,l=0,h=this.getFilesInArray(e);l<h.length;l++){var d=h[l];if(r||(a=this.fileList.indexOf(d.list)),a>-1){var c=sf.base.isNullOrUndefined(d.input)?null:d.input;c&&sf.base.detach(c),this.spliceFiles(a),sf.base.detach(this.fileList[a]),this.fileList.splice(a,1),r=!0,a=-1}}}else if(this.isForm&&(sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl))o.filesData=this.getFilesData(),this.parent.observer.notify("removing",o),this.clearAll();else{var p=[];(e=sf.base.isNullOrUndefined(e)?this.filesData:e)instanceof Array?p=e:p.push(e),o.filesData=p;for(var u=this.asyncSettings.removeUrl,f=""!==u&&!sf.base.isNullOrUndefined(u),g=0,m=p;g<m.length;g++){var v=m[g],b=this.uploadedFilesData.indexOf(v);("2"===v.statusCode||"4"===v.statusCode||"0"===v.statusCode&&-1!==b)&&f?this.removeUploadedFile(v,o,i,t):(i||this.parent.observer.notify("removing",o),this.removeFilesData(v,t)),s&&!s.target.classList.contains(Ke)&&this.checkActionComplete(!1)}}},e.prototype.updateCustomHeader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.setRequestHeader(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.removeUploadedFile=function(e,t,i,n){var s=this,o=e,r=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);r.emitError=!1;var a=new FormData;r.beforeSend=function(n){t.currentRequest=r.httpRequest,s.currentRequestHeader&&s.updateCustomHeader(r.httpRequest,s.currentRequestHeader),s.customFormDatas&&s.updateFormData(a,s.customFormDatas),i||s.parent.observer.notify("removing",t),s.removingEventCallback(t,a,o,e)},r.onLoad=function(e){return s.removeCompleted(e,o,n),{}},r.onError=function(e){return s.removeFailed(e,o,n),{}},r.send(a)},e.prototype.getResponse=function(e){var t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},e.prototype.removeCompleted=function(e,t,i){var n=e&&e.currentTarget?this.getResponse(e):null,s=e.target;if(4===s.readyState&&s.status>=200&&s.status<=299){var o={e:e,response:n,operation:"Remove",file:this.updateStatus(t,"File removed successfully","2")};this.parent.observer.notify("success",o),this.removeFilesData(t,i);var r=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(r,1)}else this.removeFailed(e,t,i)},e.prototype.removeFailed=function(e,t,i){var n={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"Remove",file:this.updateStatus(t,"Unable to remove file","0")};if(!i){var s=this.filesData.indexOf(t),o=this.fileList[s];if(o){o.classList.remove("e-upload-success"),o.classList.add("e-upload-fails");var r=o.querySelector("."+Xe);r&&(r.classList.remove("e-upload-success"),r.classList.add("e-upload-fails"))}this.checkActionButtonStatus()}this.parent.observer.notify("failure",n);var a=this.getLiElement(t);if(!sf.base.isNullOrUndefined(a)&&!sf.base.isNullOrUndefined(a.querySelector("."+Je))){var l=a.querySelector("."+Je);sf.popups.hideSpinner(l),sf.base.detach(a.querySelector(".e-spinner-pane"))}},e.prototype.updateStatus=function(e,t,i,n){if(void 0===n&&(n=!0),""===t||sf.base.isNullOrUndefined(t)||""===i||sf.base.isNullOrUndefined(i)||(e.status=t,e.statusCode=i),n){var s=this.getLiElement(e);sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(s.querySelector("."+Xe))||""===t||sf.base.isNullOrUndefined(t)||(s.querySelector("."+Xe).textContent=t)}return e},e.prototype.removingEventCallback=function(e,t,i,n){var s=this.element.getAttribute("name"),o=this.getLiElement(n);if(!(sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.querySelector("."+Je))&&sf.base.isNullOrUndefined(o.querySelector("."+Ke)))){var r;r=o.querySelector("."+Je)?o.querySelector("."+Je):o.querySelector("."+Ke),sf.popups.createSpinner({target:r,width:"20px"}),sf.popups.showSpinner(r)}e.postRawFile&&!sf.base.isNullOrUndefined(i.rawFile)&&""!==i.rawFile?t.append(s,i.rawFile,i.name):t.append(s,i.name),this.updateFormData(t,e.customFormData)},e.prototype.updateFormData=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.append(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.getLiElement=function(e){for(var t,i=0;i<this.filesData.length;i++)(sf.base.isNullOrUndefined(this.filesData[i].id)||sf.base.isNullOrUndefined(e.id)?this.filesData[i].name===e.name:this.filesData[i].name===e.name&&this.filesData[i].id===e.id)&&(t=i);return this.fileList[t]},e.prototype.removeFilesData=function(e,t){var i;if(!t){var n=this.getLiElement(e);sf.base.isNullOrUndefined(n)||(sf.base.detach(n),i=this.fileList.indexOf(n),this.fileList.splice(i,1),this.filesData.splice(i,1),0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)||(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons()))}},e.prototype.upload=function(e,t){e=e||this.filesData,this.beforeUploadCustom=!sf.base.isNullOrUndefined(t)&&t,this.beforeUploadFiles=this.getFilesInArray(e);this.parent.observer.notify("beforePasteUpload",{customFormData:[],currentRequest:null,cancel:!1})},e.prototype.beforePasteUploadCallBack=function(e){e.cancel||(this.currentRequestHeader=e.currentRequest?e.currentRequest:this.currentRequestHeader,this.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:this.customFormDatas,this.uploadFiles(this.beforeUploadFiles,this.beforeUploadCustom))},e.prototype.filterfileList=function(e){for(var t=[],i=0;i<e.length;i++)this.getLiElement(e[i]).classList.contains("e-upload-success")||t.push(e[i]);return t},e.prototype.uploadFiles=function(e,t){var i=[];if(""!==this.asyncSettings.saveUrl&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)){i=!t||sf.base.isNullOrUndefined(t)?this.filterfileList(e):e;for(var n=0;n<i.length;n++)this.uploadFilesRequest(i,n,t)}},e.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.setRequestHeader(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.eventCancelByArgs=function(e,t,i){var n=this;if(e.cancel=!0,"5"!==t.fileData.statusCode){t.fileData.statusCode="5",t.fileData.status="File upload canceled";var s=this.getLiElement(t.fileData);if(s){sf.base.isNullOrUndefined(s.querySelector("."+Xe))||(s.querySelector("."+Xe).innerHTML="File upload canceled",s.querySelector("."+Xe).classList.add("e-upload-fails")),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=s.querySelector("."+Ke);o&&o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title","Retry"),this.pauseButton.addEventListener("click",(function(e){n.reloadcanceledFile(e,i,s)}),!1),this.checkActionButtonStatus()}}},e.prototype.reloadcanceledFile=function(e,t,i,n){t.statusCode="1",t.status="Ready to upload",n||(i.querySelector("."+Xe).classList.remove("e-upload-fails"),sf.base.isNullOrUndefined(i.querySelector("."+Ge))||sf.base.detach(i.querySelector("."+Ge)),this.pauseButton=null),i.classList.add("e-restrict-retry"),this.upload([t])},e.prototype.uploadFilesRequest=function(e,t,i){var n=this,s=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null);s.emitError=!1;var o={fileData:e[t],customFormData:[],cancel:!1},r=new FormData;if(s.beforeSend=function(i){o.currentRequest=s.httpRequest,o.fileData.rawFile=n.base64String[t],n.currentRequestHeader&&n.updateCustomheader(s.httpRequest,n.currentRequestHeader),n.customFormDatas&&n.updateFormData(r,n.customFormDatas),n.parent.observer.notify("uploading",o),o.cancel&&n.eventCancelByArgs(i,o,e[t]),n.updateFormData(r,o.customFormData)},"1"===e[t].statusCode){var a=this.element.getAttribute("name");r.append(a,e[t].rawFile,e[t].name),s.onLoad=function(s){return n.uploadComplete(s,e[t],i),{}},s.onUploadProgress=function(o){return n.uploadInProgress(o,e[t],i,s),{}},s.onError=function(i){return n.uploadFailed(i,e[t]),{}},s.send(r)}},e.prototype.cancelUploadingFile=function(e,t,i,n){var s=this;if("5"===e.statusCode){var o={event:t,fileData:e,cancel:!1,customFormData:[]};if(this.parent.observer.notify("canceling",o),o.cancel){if(e.statusCode="3",!sf.base.isNullOrUndefined(n)){var r=n.querySelector("."+Ze);sf.base.isNullOrUndefined(r)||(sf.popups.hideSpinner(r),sf.base.detach(n.querySelector(".e-spinner-pane")))}}else{i.emitError=!1,i.httpRequest.abort();var a=new FormData;if("5"===e.statusCode){var l=this.element.getAttribute("name");a.append(l,e.name),a.append("cancel-uploading",e.name),this.updateFormData(a,o.customFormData);var h=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1,h.onLoad=function(t){return s.removecanceledFile(t,e),{}},h.send(a)}}}},e.prototype.removecanceledFile=function(e,t){var i=this.getLiElement(t);if(!i.querySelector("."+Ge)&&!sf.base.isNullOrUndefined(i.querySelector("."+Ze))){this.updateStatus(t,"File upload canceled","5"),this.renderFailureState(e,t,i);var n=i.querySelector("."+Ke);sf.base.isNullOrUndefined(i)||(sf.popups.hideSpinner(n),sf.base.detach(i.querySelector(".e-spinner-pane")));var s={event:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"Cancel",file:t};this.parent.observer.notify("success",s)}},e.prototype.uploadInProgress=function(e,t,i,n){var s=this.getLiElement(t);if(!sf.base.isNullOrUndefined(s)||i)if(sf.base.isNullOrUndefined(s))this.cancelUploadingFile(t,e,n);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,n,s),s.querySelectorAll("."+et).length>0||!s.querySelector("."+Xe)||(s.querySelector("."+Xe).classList.add("e-upload-progress"),this.createProgressBar(s),this.updateProgressBarClasses(s,"e-upload-progress"),s.querySelector("."+Xe).classList.remove("e-upload-fails")),this.updateProgressbar(e,s);var o=s.querySelector("."+Ke);sf.base.isNullOrUndefined(o)||(o.classList.add(Ze,"e-upload-progress"),o.setAttribute("title","Abort"),o.classList.remove(Ke))}},e.prototype.changeProgressValue=function(e,t){e.querySelector("."+$e).setAttribute("style","width:"+t),e.querySelector(".e-progress-bar-text").textContent=t},e.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+$e)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{var i=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}},e.prototype.createProgressBar=function(e){var t=sf.base.createElement("span",{className:et}),i=sf.base.createElement("progressbar",{className:$e,attrs:{value:"0",max:"100"}}),n=sf.base.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var s=sf.base.createElement("span",{className:"e-progress-bar-text"});s.textContent="0%",n.appendChild(i),t.appendChild(n),t.appendChild(s),e.querySelector(".e-file-container").appendChild(t)},e.prototype.updateProgressBarClasses=function(e,t){var i=e.querySelector("."+$e);sf.base.isNullOrUndefined(i)||i.classList.add(t)},e.prototype.raiseSuccessEvent=function(e,t){var i={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"upload",file:this.updateStatus(t,"File uploaded successfully","2",!1),statusText:"File uploaded successfully"},n=this.getLiElement(t);if(!sf.base.isNullOrUndefined(n)){var s=n.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(s)||(sf.popups.hideSpinner(n),sf.base.detach(s))}this.parent.observer.notify("success",i),this.updateStatus(t,i.statusText,"2"),this.uploadedFilesData.push(t),this.checkActionButtonStatus(),this.fileList.length>0&&(this.getLiElement(t).classList.contains("e-restrict-retry")?this.getLiElement(t).classList.remove("e-restrict-retry"):this.checkActionComplete(!0))},e.prototype.uploadComplete=function(e,t,i){var n=e.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var s=this.getLiElement(t);if(sf.base.isNullOrUndefined(s)&&(!i||sf.base.isNullOrUndefined(i)))return;if(!sf.base.isNullOrUndefined(s)){this.updateProgressBarClasses(s,"e-upload-success"),this.removeProgressbar(s,"success");var o=s.querySelector("."+Ze);sf.base.isNullOrUndefined(o)||(o.classList.add(Je),o.setAttribute("title","Delete file"),o.classList.remove(Ze),o.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},e.prototype.uploadFailed=function(e,t){var i=this.getLiElement(t),n={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"upload",file:this.updateStatus(t,"File failed to upload","0",!1),statusText:"File failed to upload"};sf.base.isNullOrUndefined(i)||this.renderFailureState(e,t,i),this.parent.observer.notify("failure",n),this.updateStatus(t,n.statusText,"0"),this.checkActionButtonStatus(),this.checkActionComplete(!0)},e.prototype.renderFailureState=function(e,t,i){var n=this;this.updateProgressBarClasses(i,"e-upload-fails"),this.removeProgressbar(i,"failure"),sf.base.isNullOrUndefined(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add("e-upload-fails");var s=i.querySelector("."+Ze);sf.base.isNullOrUndefined(s)||(s.classList.remove(Ze,"e-upload-progress"),s.classList.add(Ke),s.setAttribute("title","Remove"),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title","Retry"),i.querySelector("."+Ge).addEventListener("click",(function(e){n.reloadcanceledFile(e,t,i,!1)}),!1))},e.prototype.removeProgressbar=function(e,t){var i=this;sf.base.isNullOrUndefined(e.querySelector("."+et))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(e.querySelector("."+et),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout((function(){i.animateProgressBar(e,t)}),750))},e.prototype.animateProgressBar=function(e,t){"success"===t?sf.base.isNullOrUndefined(e.querySelector("."+Xe))||(e.querySelector("."+Xe).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+Xe),{name:"FadeIn"}),e.querySelector("."+Xe).classList.add("e-upload-success")):sf.base.isNullOrUndefined(e.querySelector("."+Xe))||(e.querySelector("."+Xe).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+Xe),{name:"FadeIn"}),e.querySelector("."+Xe).classList.add("e-upload-fails")),e.querySelector("."+et)&&sf.base.detach(e.querySelector("."+et))},e.prototype.onSelectFiles=function(e){var t;if("drop"===e.type){var i=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.files=i),i.length>0&&(t=this.sortFileList(i),this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t)},e.prototype.sortFileList=function(e){for(var t=e=e||this.sortFilesList,i=[],n=0;n<t.length;n++)i.push(t[n].name);for(var s=[],o=0,r=i.sort();o<r.length;o++){var a=r[o];for(n=0;n<t.length;n++)a===t[n].name&&s.push(t[n])}return s},e.prototype.renderSelectedFiles=function(e,t,i,n){this.base64String=[];var s={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(t.length<1)return s.isCanceled=!0,void this.parent.observer.notify("selected",s);this.flag=!0;for(var o=[],r=0;r<t.length;r++){var a=i?t[r].file:t[r];this.updateInitialFileDetails(e,t,a,r,o,i,n)}s.filesData=o,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(o=this.checkExtension(o)),this.parent.observer.notify("selected",s),s.cancel=!0,this._internalRenderSelect(s,o)},e.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(this.currentRequestHeader=e.currentRequest,this.customFormDatas=e.customFormData,this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",e.isModified&&e.modifiedFilesData.length>0){for(var i=0;i<e.modifiedFilesData.length;i++)for(var n=0;n<t.length;n++)e.modifiedFilesData[i].id===t[n].id&&(e.modifiedFilesData[i].rawFile=t[n].rawFile);var s=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(s),this.filesData=s,this.isForm&&!this.allowUpload()||this.checkAutoUpload(s)}else this.createFileList(t,!0),this.filesData=this.filesData.concat(t),this.isForm&&!this.allowUpload()||this.checkAutoUpload(t);sf.base.isNullOrUndefined(e.progressInterval)||""===e.progressInterval||(this.progressInterval=e.progressInterval),this.filesData.length===this.actionCompleteCount&&this.flag&&(this.flag=!1)}},e.prototype.allowUpload=function(){var e=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},e.prototype.checkAutoUpload=function(e){this.upload(e),this.removeActionButtons(),this.checkActionButtonStatus()},e.prototype.updateSortedFileList=function(e){var t=sf.base.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var s=this.listParent.querySelectorAll("li")[n];t.appendChild(s.cloneNode(!0))}for(var o=0,r=this.listParent.querySelectorAll("li");o<r.length;o++){var a=r[o];sf.base.detach(a)}this.removeActionButtons();var l=[].slice.call(t.childNodes);sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var h=0;h<e.length;h++){for(var d=0;d<this.filesData.length;d++)this.filesData[d].name===e[h].name&&(this.listParent.appendChild(l[d]),sf.base.EventHandler.add(l[d].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(l[d]),i=h);i!==h&&this.createFileList([e[h]])}}else this.createFileList(e)},e.prototype.updateInitialFileDetails=function(e,t,i,n,s,o,r){var a={name:o?t[n].path.substring(1,t[n].path.length):r?sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):i.name,rawFile:i,size:i.size,status:"Ready to upload",type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};r&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?"File size is too small":""!==a.validationMessages.maxSize?"File size is too large":a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0"),s.push(a)},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles)},e.prototype.destroy=function(){this.unWireEvents(),this.removeEventListener()},e}(),it=function(){function e(e){this.containsHtml=!1,this.isNotFromHtml=!1,this.pastedValue="",this.isClipboardHTMLDataNull=!1,this.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],this.blockNode=["div","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","td","tr","th","tbody","tfoot","thead","table","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.nodeSelectionObj=new Z,this.parent.observer.on("success",this.success,this),this.parent.observer.on("failure",this.failure,this),this.parent.observer.on("selected",this.selected,this),this.parent.observer.on("uploading",this.uploading,this),this.parent.observer.on("pasteClean",this.pasteClean,this),this.parent.observer.on("removing",this.cancelingAndRemoving,this),this.parent.observer.on("canceling",this.cancelingAndRemoving,this),this.parent.observer.on("beforePasteUpload",this.beforeImageUpload,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("afterPasteCleanUp",this.pasteUpdatedValue,this)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.observer.off("success",this.success),this.parent.observer.off("failure",this.failure),this.parent.observer.off("selected",this.selected),this.parent.observer.off("uploading",this.uploading),this.parent.observer.off("pasteClean",this.pasteClean),this.parent.observer.off("removing",this.cancelingAndRemoving),this.parent.observer.off("canceling",this.cancelingAndRemoving),this.parent.observer.off("beforePasteUpload",this.beforeImageUpload),this.parent.observer.off(t,this.destroy),this.parent.observer.off("afterPasteCleanUp",this.pasteUpdatedValue)},e.prototype.pasteClean=function(e){var t=this;this.isClipboardHTMLDataNull=!1;var i,s={requestType:"Paste",editorMode:this.parent.editorMode,event:e},o=null;if(e.args&&!sf.base.isNullOrUndefined(e.args.clipboardData)&&(o=e.args.clipboardData.getData("text/html")),this.parent.beforePasteCleanupEnabled&&this.parent.dotNetRef.invokeMethodAsync("BeforePasteCleanUp",{value:o}),e.args&&null!==o&&"HTML"===this.parent.editorMode){var r=void 0;if(0===o.length){var a=new RegExp(/<\/[a-z][\s\S]*>/i);if(o=e.args.clipboardData.getData("text/plain"),this.isNotFromHtml=""!==o,o=(o=o.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),this.containsHtml=a.test(o),r=e&&e.args.clipboardData&&e.args.clipboardData.items.length>0?null===e.args.clipboardData.items[0].getAsFile()?sf.base.isNullOrUndefined(e.args.clipboardData.items[1])?null:e.args.clipboardData.items[1].getAsFile():e.args.clipboardData.items[0].getAsFile():null,this.parent.observer.notify(l,{file:r,args:e.args,text:o,callBack:function(r){"object"===n(i=r)?t.parent.formatter.editorManager.execCommand("Images","Image",e.args,t.imageFormatting.bind(t,s),"pasteCleanup",i,"pasteCleanupModule"):o=i}}),!a.test(o)){var h=sf.base.createElement("div");h.innerHTML=this.splitBreakLine(o),o=h.innerHTML,this.isClipboardHTMLDataNull=!0}}else o.length>0&&this.parent.formatter.editorManager.observer.notify("ms_word_cleanup",{args:e.args,text:e.text,allowedStylePropertiesArray:this.parent.pasteCleanupSettings.allowedStyleProps,callBack:function(e){o=e.trim()}});var d=document,c=this.nodeSelectionObj.getRange(d);this.saveSelection=this.nodeSelectionObj.save(c,d);var p=sf.base.createElement("div");p.innerHTML=o;var u=""!==p.textContent||!sf.base.isNullOrUndefined(p.querySelector("img"))||!sf.base.isNullOrUndefined(p.querySelector("table"));this.parent.pasteCleanupSettings.prompt?u?(e.args.preventDefault(),this.pasteDialog(o,s)):-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&sf.base.isNullOrUndefined(r)&&this.fireFoxImageUpload():u||this.parent.pasteCleanupSettings.plainText||-1===sf.base.Browser.userAgent.indexOf("Firefox")?this.parent.pasteCleanupSettings.plainText?(e.args.preventDefault(),this.plainFormatting(o,s)):this.parent.pasteCleanupSettings.keepFormat?(e.args.preventDefault(),this.formatting(o,!1,s)):(e.args.preventDefault(),this.formatting(o,!0,s)):this.fireFoxImageUpload()}},e.prototype.fireFoxImageUpload=function(){var e=this;setTimeout((function(){if(-1!==sf.base.Browser.userAgent.indexOf("Firefox")){var t=e.nodeSelectionObj.getRange(document).startContainer;"#text"!==t.nodeName&&(t=t.childNodes[e.nodeSelectionObj.getRange(document).startOffset]),"IMG"===t.previousSibling.nodeName&&(t.previousSibling.classList.add("pasteContent_Img"),t.previousSibling.classList.add("e-rte-image"),"inline"===e.parent.insertImageSettings.display?t.previousSibling.classList.add("e-imginline"):t.previousSibling.classList.add("e-imgbreak"),t.previousSibling.classList.add(),e.setImageProperties(t.previousSibling))}e.imgUploading(e.parent.inputElement)}),500)},e.prototype.splitBreakLine=function(e){for(var t=e.split("\n"),i="",n="P"===this.parent.enterKey?"<p>":"DIV"===this.parent.enterKey?"<div>":"",s="P"===this.parent.enterKey?"</p>":"DIV"===this.parent.enterKey?"</div>":"<br>",o=0;o<t.length;o++)if(""===t[o].trim())i+=x(this.parent);else{var r=this.makeSpace(t[o]);i+=(0===o&&"BR"!==this.parent.enterKey?"<span>":n)+(""===r.trim()?"<br>":r.trim())+(t.length-1===o&&"BR"===this.parent.enterKey?"":0===o&&"BR"!==this.parent.enterKey?"</span>":s)}return i},e.prototype.makeSpace=function(e){for(var t="",i=!0,n=(e=e.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")).split(" "),s=0;s<n.length;s++)""===n[s].trim()?t+=i?"&nbsp;":" ":(i=!1,t+=n[s]+" ");return t},e.prototype.imgUploading=function(e){var t=e.querySelectorAll(".pasteContent_Img");if(this.parent.insertImageSettings.saveUrl&&t.length>0){for(var i=[],n=[],s=[],o=0;o<t.length;o++)t[o].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(i.push(t[o].getAttribute("src")),n.push(sf.base.getUniqueID("rte_image")),s.push(t[o]));var r=[];for(o=0;o<i.length;o++)r.push(this.base64ToFile(i[o],n[o]));for(o=0;o<r.length;o++)this.uploadMethod(r[o],s[o]);(sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)||sf.base.isNullOrUndefined(this.parent.insertImageSettings.path))&&"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t)}else"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t);var a=e.querySelectorAll(".pasteContent_Img");for(o=0;o<a.length;o++)a[o].classList.remove("pasteContent_Img"),""===a[o].getAttribute("class").trim()&&t[o].removeAttribute("class")},e.prototype.getBlob=function(e){for(var t=0;t<e.length;t++)if(!sf.base.isNullOrUndefined(e[t].getAttribute("src"))&&e[t].getAttribute("src").split(",")[0].indexOf("base64")>=0){var i=URL.createObjectURL(D(e[t].getAttribute("src")));e[t].setAttribute("src",i)}},e.prototype.uploadMethod=function(e,t){var i=this;this.uploadImgElem=t;var n=document.createElement("div");document.body.appendChild(n),n.setAttribute("display","none"),this.uploadImgElem.style.opacity="0.5";var s=sf.base.createElement("div");this.parent.element.appendChild(s);var o=sf.base.createElement("input",{id:this.parent.element.id+"_upload",attrs:{type:"File",name:"UploadFiles"}}),r=this.parent.iframeSettings.enable?-50:-90;this.popupObj=new sf.popups.Popup(s,{relateTo:this.uploadImgElem,height:"85px",width:"300px",offsetY:r,content:o,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(e){i.parent.isBlur=!1,i.popupObj.destroy(),sf.base.detach(i.popupObj.element)}}),this.popupObj.element.style.display="none",sf.base.addClass([this.popupObj.element],["e-popup-open","e-rte-upload-popup"]);var a=e.size>1e6?300:100;setTimeout((function(){i.refreshPopup(t,i.popupObj)}),a),this.rawFile=void 0;var l={asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl},cssClass:"e-rte-dialog-upload",enableRtl:this.parent.enableRtl,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString()};this.uploadObj=new tt(l,this.popupObj.element.childNodes[0],this.parent);var h=[{name:e.name,rawFile:e,size:e.size,type:e.type,validationMessages:{minSize:"",maxSize:""},statusCode:"1"}];this.uploadObj.createFileList(h),this.uploadObj.filesData.push(h[0]),this.rawFile=h,this.uploadObj.upload(h),this.popupObj.element.getElementsByClassName("e-file-select-wrap")[0].style.display="none",sf.base.detach(this.popupObj.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap"))},e.prototype.uploading=function(e){this.parent.inputElement.contentEditable="false"},e.prototype.success=function(e){var t=this;setTimeout((function(){t.popupClose(t.popupObj,t.uploadImgElem,e)}),900)},e.prototype.failure=function(e){var t=this;setTimeout((function(){t.uploadFailure(t.uploadImgElem,t.popupObj,e)}),900)},e.prototype.selected=function(e){this.rawFile=e.filesData},e.prototype.cancelingAndRemoving=function(e){this.parent.inputElement.contentEditable="true"," "===this.uploadImgElem.nextSibling.textContent&&sf.base.detach(this.uploadImgElem.nextSibling),sf.base.detach(this.uploadImgElem),this.popupObj.close()},e.prototype.beforeImageUpload=function(e){var t,i=this;if(this.parent.beforeUploadImageEnabled)return(t=JSON.parse(JSON.stringify(e))).filesData=this.rawFile,new Promise((function(e){i.parent.dotNetRef.invokeMethodAsync("BeforeUpload",t).then((function(t){t.cancel||(i.uploadObj.currentRequestHeader=t.currentRequest?t.currentRequest:i.uploadObj.currentRequestHeader,i.uploadObj.customFormDatas=t.customFormData&&t.customFormData.length>0?t.customFormData:i.uploadObj.customFormDatas,sf.base.isNullOrUndefined(i.parent.insertImageSettings.saveUrl)?i.popupClose(i.popupObj,i.uploadImgElem,null):i.parent.observer.notify("beforePasteUploadCallBack",t),e())}))}));sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)?this.popupClose(this.popupObj,this.uploadImgElem,null):this.parent.observer.notify("beforePasteUploadCallBack",e)},e.prototype.uploadFailure=function(e,t,i){this.parent.inputElement.contentEditable="true",sf.base.detach(e),t&&t.close(),this.parent.onImageUploadFailedEnabled&&this.parent.dotNetRef.invokeMethodAsync("PasteImageUploadFailed",i),this.uploadObj.destroy(),this.uploadObj=void 0},e.prototype.popupClose=function(e,t,i){var n=this;this.parent.inputElement.contentEditable="true",!sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)&&this.parent.onImageUploadSuccessEnabled?this.parent.dotNetRef.invokeMethodAsync("PasteImageUploadSuccess",i).then((function(e){n.pasteUploadSuccessCallback(t,i,e)})):this.pasteUploadSuccessCallback(t,i),e.close(),t.style.opacity="1",this.uploadObj.destroy(),this.uploadObj=void 0},e.prototype.pasteUploadSuccessCallback=function(e,t,i){if(!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path))if(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.file)||sf.base.isNullOrUndefined(i.file.name)){n=this.parent.insertImageSettings.path+t.file.name;e.src=n,e.setAttribute("alt",t.file.name)}else{var n=this.parent.insertImageSettings.path+i.file.name;e.src=n,e.setAttribute("alt",i.file.name)}},e.prototype.refreshPopup=function(e,t){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+e.offsetTop:e.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(t.relateTo=this.parent.inputElement,t.offsetY=this.parent.iframeSettings.enable?-30:-65,t.element.style.display="block"):t&&(t.refreshPosition(e),t.element.style.display="block")},e.prototype.base64ToFile=function(e,t){for(var i=e.split(","),n=i[0].match(/:(.*?);/)[1].split("/")[1],s=atob(i[1]),o=s.length,r=new Uint8Array(o);o--;)r[o]=s.charCodeAt(o);if(sf.base.Browser.isIE||navigator.appVersion.indexOf("Edge")>-1){var a=new Blob([r],{type:n});return sf.base.extend(a,{name:t+"."+(sf.base.isNullOrUndefined(n)?"":n)}),a}return new File([r],t+"."+(sf.base.isNullOrUndefined(n)?"":n),{type:n})},e.prototype.imageFormatting=function(e,t){t.elements[0].classList.add("pasteContent_Img");var i=sf.base.createElement("span");i.appendChild(t.elements[0]);var n=i.innerHTML,s=document,o=this.nodeSelectionObj.getRange(s);this.saveSelection=this.nodeSelectionObj.save(o,s),this.isClipboardHTMLDataNull=!1,this.parent.pasteCleanupSettings.prompt?this.pasteDialog(n,e):this.parent.pasteCleanupSettings.plainText?this.plainFormatting(n,e):this.parent.pasteCleanupSettings.keepFormat?this.formatting(n,!1,e):this.formatting(n,!0,e)},e.prototype.selectFormatting=function(e){""!==this.newRTEHeight&&(this.parent.element.style.height=this.preRTEHeight),"KeepFormat"===e?this.formatting(this.currentValue,!1,this.currentArgs):"CleanFormat"===e?this.formatting(this.currentValue,!0,this.currentArgs):"PlainTextFormat"===e&&this.plainFormatting(this.currentValue,this.currentArgs)},e.prototype.pasteDialog=function(e,t){this.currentValue=e,this.currentArgs=t,this.preRTEHeight=this.parent.height.toString(),this.newRTEHeight="",this.parent.element.offsetHeight<265&&(this.newRTEHeight=305..toString()),""!==this.newRTEHeight&&(this.parent.element.style.height=this.newRTEHeight+"px"),this.parent.openPasteDialog()},e.prototype.formatting=function(e,t,i){var n=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"});this.isNotFromHtml&&this.containsHtml&&(e=this.splitBreakLine(e)),n.innerHTML=e,null!==this.parent.pasteCleanupSettings.deniedTags&&(n=this.deniedTags(n)),(t||null!==this.parent.pasteCleanupSettings.deniedAttrs)&&(n=this.deniedAttributes(n,t)),null!==this.parent.pasteCleanupSettings.allowedStyleProps&&(n=this.allowedStyle(n)),this.saveSelection.restore(),n.innerHTML=this.sanitizeHelper(n.innerHTML);for(var s=n.querySelectorAll("img"),o=0;o<s.length;o++)s[o].classList.add("pasteContent_Img"),this.setImageProperties(s[o]);if(this.addTempClass(n),""!==n.textContent||!sf.base.isNullOrUndefined(n.querySelector("img"))||!sf.base.isNullOrUndefined(n.querySelector("table")))if(this.parent.afterPasteCleanupEnabled){var r=sf.base.createElement("div");r.innerHTML=n.innerHTML;var a=[];if(!sf.base.isNullOrUndefined(r.querySelector("img"))){var l=r.querySelectorAll("img"),h=[],d=[],c=[];for(o=0;o<l.length;o++)l[o].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(h.push(l[o].getAttribute("src")),d.push(sf.base.getUniqueID("rte_image")),c.push(l[o]));var p=[],u=void 0;for(o=0;o<h.length;o++)p.push(this.base64ToFile(h[o],d[o])),u={name:p[o].name,rawFile:p[o],size:p[o].size,status:"",type:p[o].type,validationMessages:{minSize:"",maxSize:""},statusCode:"1"},a.push(u)}a.length>0?(this.pastedValue=e,e=""):(this.pastedValue="",e=n.innerHTML),this.parent.dotNetRef.invokeMethodAsync("AfterPasteCleanUp",{value:e,filesData:a})}else this.pasteUpdatedValue(n.innerHTML)},e.prototype.pasteUpdatedValue=function(e){var t=this,i=this.parent.afterPasteCleanupEnabled?""===this.pastedValue?e.text:this.pastedValue:e,n=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"});n.innerHTML=i,this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",e,(function(i){"string"==typeof e&&(e={text:e,name:"afterPasteCleanUp"}),sf.base.extend(e,{elements:i.elements,imageElements:i.imgElem},!0),t.parent.formatter.onSuccess(t.parent,e)}),n,null,null,this.parent.enterKey),this.removeTempClass(),this.parent.observer.notify("toolbar-refresh",{}),this.imgUploading(this.parent.inputElement)},e.prototype.setImageProperties=function(e){"auto"!=this.parent.insertImageSettings.width&&e.setAttribute("width",this.parent.insertImageSettings.width),"0"!=this.parent.insertImageSettings.minWidth&&(e.style.minWidth=this.parent.insertImageSettings.minWidth.toString()),null!=this.parent.insertImageSettings.maxWidth&&(e.style.maxWidth=this.parent.imageModule.getMaxWidth().toString()),"auto"!=this.parent.insertImageSettings.height&&e.setAttribute("height",this.parent.insertImageSettings.height),"0"!=this.parent.insertImageSettings.minHeight&&(e.style.minHeight=this.parent.insertImageSettings.minHeight.toString()),null!=this.parent.insertImageSettings.maxHeight&&(e.style.maxHeight=this.parent.insertImageSettings.maxHeight.toString())},e.prototype.addTempClass=function(e){for(var t=e.children,i=0;i<t.length;i++)t[i].classList.add("pasteContent_RTE")},e.prototype.removeTempClass=function(){for(var e=this.parent.inputElement.querySelectorAll(".pasteContent_RTE"),t=0;t<e.length;t++)e[t].classList.remove("pasteContent_RTE"),""===e[t].getAttribute("class")&&e[t].removeAttribute("class")},e.prototype.sanitizeHelper=function(e){return e=C(e,this.parent)},e.prototype.plainFormatting=function(e,t){var i=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"});if(i.innerHTML=e,this.detachInlineElements(i),this.getTextContent(i),""!==i.textContent.trim()){if(!sf.base.isNullOrUndefined(i.firstElementChild)&&"BR"!==i.firstElementChild.tagName){var n=i.firstElementChild;if(!sf.base.isNullOrUndefined(i.firstElementChild)){for(var s=sf.base.createElement("span"),o=0,r=0;o<n.childNodes.length;o++,r++)if("#text"===n.childNodes[o].nodeName)s.appendChild(n.childNodes[o]),i.insertBefore(s,i.firstElementChild),o--;else{if("#text"===n.childNodes[o].nodeName||0!==r)break;for(var a=0;a<n.childNodes[o].childNodes.length;a++)s.appendChild(n.childNodes[o].childNodes[a]),i.insertBefore(s,i.firstElementChild),a--;o--}n.hasChildNodes()||sf.base.detach(n)}}if(this.removeEmptyElements(i),this.saveSelection.restore(),i.innerHTML=this.sanitizeHelper(i.innerHTML),this.addTempClass(i),this.removingComments(i),"BR"!==this.parent.enterKey||this.isClipboardHTMLDataNull?"DIV"===this.parent.enterKey&&(i.innerHTML=i.innerHTML.replace(/<p class="pasteContent_RTE">/g,"<div>").replace(/<\/p>/g,"</div>")):i=this.reframeToBrContent(i),this.parent.afterPasteCleanupEnabled){e=i.innerHTML;this.parent.dotNetRef.invokeMethodAsync("AfterPasteCleanUp",{value:e,filesData:[]})}else this.pasteUpdatedValue(i.innerHTML)}else this.saveSelection.restore(),sf.base.extend(t,{elements:[]},!0),this.parent.formatter.onSuccess(this.parent,t)},e.prototype.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.prototype.reframeToBrContent=function(e){for(var t=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"});!sf.base.isNullOrUndefined(e.firstChild);){var i=sf.base.createElement("br"),n=e.firstChild;if("#text"===n.nodeName){var s=!sf.base.isNullOrUndefined(n.nextSibling);t.appendChild(n),s&&t.appendChild(i)}else{var o="BR"===n.nodeName;o?t.appendChild(n):t.appendChild(n.childNodes[0]),sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.nextSibling)||t.appendChild(i),o||sf.base.isNullOrUndefined(n)||sf.base.detach(n)}}return t},e.prototype.getTextContent=function(e){for(var t=0;t<this.blockNode.length;t++)for(var i=e.querySelectorAll(this.blockNode[t]),n=0;n<i.length;n++){for(var s=void 0,o=0,r=0,a=void 0;o<i[n].childNodes.length;o++,r++)if("DIV"===i[n].childNodes[o].nodeName||"P"===i[n].childNodes[o].nodeName||"#text"===i[n].childNodes[o].nodeName&&"&nbsp;"!==i[n].childNodes[o].nodeValue.replace(/\u00a0/g,"&nbsp;")&&""===i[n].childNodes[o].textContent.trim())s=i[n].childNodes[o].parentElement,i[n].childNodes[o].parentElement.parentElement.insertBefore(i[n].childNodes[o],i[n].childNodes[o].parentElement),o--;else{if(s=i[n].childNodes[o].parentElement,"text"===a){s.previousElementSibling.appendChild(i[n].childNodes[o])}else{var l=sf.base.createElement("div",{id:"newDiv"});l.appendChild(i[n].childNodes[o]),s.parentElement.insertBefore(l,s)}o--,a="text"}sf.base.isNullOrUndefined(s)||sf.base.detach(s)}var h=e.querySelectorAll("*");for(t=0;t<h.length;t++){var d=h[t].attributes;for(n=0;n<d.length;n++)h[t].removeAttribute(d[n].name),n--}},e.prototype.detachInlineElements=function(e){for(var t=0;t<this.inlineNode.length;t++)for(var i=e.querySelectorAll(this.inlineNode[t]),n=0;n<i.length;n++)if(i[n]!==e.firstChild||"SPAN"!==i[n].nodeName){for(var s=void 0,o=0;o<i[n].childNodes.length;o++)s=i[n].childNodes[o].parentElement,i[n].childNodes[o].parentElement.parentElement.insertBefore(i[n].childNodes[o],i[n].childNodes[o].parentElement),o--;sf.base.isNullOrUndefined(s)||sf.base.detach(s)}},e.prototype.findDetachEmptyElem=function(e){return sf.base.isNullOrUndefined(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"pasteContent"!==e.parentElement.getAttribute("class")?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if("BR"!==t[i].tagName){var n=this.findDetachEmptyElem(t[i]);sf.base.isNullOrUndefined(n)||sf.base.detach(n)}},e.prototype.tagGrouping=function(e){for(var t=e.slice(),i=Object.keys(re),n=i.map((function(e){return re[e]})),s=[],o=0;o<t.length;o++)if(t[o].split("[").length>1&&(t[o]=t[o].split("[")[0].trim()),i.indexOf(t[o])>-1)for(var r=0;r<n[i.indexOf(t[o])].length;r++)t.indexOf(n[i.indexOf(t[o])][r])<0&&s.indexOf(n[i.indexOf(t[o])][r])<0&&s.push(n[i.indexOf(t[o])][r]);return e.concat(s)},e.prototype.attributesfilter=function(e){for(var t=0;t<e.length;t++)if(e[t].split("[").length>1){for(var i=e[t].split("[")[1].split("]")[0].split(","),n=[],s=[],o=0;o<i.length;o++)i[o].indexOf("!")<0?n.push(i[o].trim()):s.push(i[o].split("!")[1].trim());var r=n.length>1?n.join("]["):n.join(),a=s.length>1?s.join("]["):s.join();if(a.length>0){var l=""!==r?e[t].split("[")[0]+"["+r+"]":e[t].split("[")[0];e[t]=l+":not(["+a+"])"}else e[t]=e[t].split("[")[0]+"["+r+"]"}return e},e.prototype.deniedTags=function(e){var t=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags)?[]:this.parent.pasteCleanupSettings.deniedTags.slice();t=this.attributesfilter(t),t=this.tagGrouping(t);for(var i=0;i<t.length;i++)for(var n=e.querySelectorAll(t[i]),s=n.length-1;s>=0;s--){for(var o=n[s].parentNode;n[s].firstChild;)o.insertBefore(n[s].firstChild,n[s]);o.removeChild(n[s])}return e},e.prototype.deniedAttributes=function(e,t){var i=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs)?[]:this.parent.pasteCleanupSettings.deniedAttrs.slice();t&&i.push("style");for(var n=0;n<i.length;n++)for(var s=e.querySelectorAll("["+i[n]+"]"),o=0;o<s.length;o++)s[o].removeAttribute(i[n]);return e},e.prototype.allowedStyle=function(e){var t=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps)?[]:this.parent.pasteCleanupSettings.allowedStyleProps.slice();t.push("list-style-type","list-style");for(var i=e.querySelectorAll("[style]"),n=0;n<i.length;n++){for(var s,o=[],r=i[n].getAttribute("style").split(";"),a=0;a<r.length;a++)t.indexOf(r[a].split(":")[0].trim())>=0&&o.push(r[a]);i[n].removeAttribute("style"),(s=""===o.join(";").trim()?o.join(";"):o.join(";")+";")&&i[n].setAttribute("style",s)}return e},e}(),nt=function(){function e(){}return e.prototype.getLineNumber=function(e,t){return e.value.substr(0,t).split("\n").length},e.prototype.getSelectedText=function(e){var t=e.selectionStart,i=e.selectionEnd;return e.value.substring(t,i)},e.prototype.getAllParents=function(e){return e.split("\n")},e.prototype.getSelectedLine=function(e){return this.getAllParents(e.value)[this.getLineNumber(e,e.selectionStart)-1]},e.prototype.getLine=function(e,t){return this.getAllParents(e.value)[t]},e.prototype.getSelectedParentPoints=function(e){var t=this.getAllParents(e.value),i=this.getLineNumber(e,e.selectionStart),n=this.getLineNumber(e,e.selectionEnd),s=this.getSelectedText(e).split("\n"),o=[],r=t[i-1],a=t.slice(0,i-1).join("").length,l={};if(l.line=i-1,l.start=a+l.line,l.end=""!==r?l.start+r.length+1:l.start+r.length,l.text=r,o.push(l),s.length>1){for(var h=1;h<s.length-1;h++){var d={};d.line=o[h-1].line+1,d.start=(s[h],o[h-1].end),d.end=d.start+s[h].length+1,d.text=s[h],o.push(d)}var c={};c.line=o[o.length-1].line+1,c.start=o[o.length-1].end,c.end=c.start+t[n-1].length+1,c.text=t[n-1],o.push(c)}return o},e.prototype.setSelection=function(e,t,i){e.setSelectionRange(t,i),e.focus()},e.prototype.save=function(e,t){this.selectionStart=e,this.selectionEnd=t},e.prototype.restore=function(e){this.setSelection(e,this.selectionStart,this.selectionEnd)},e.prototype.isStartWith=function(e,t){var i=!1;e&&(i=(e.trim()===t.trim()?new RegExp("^("+this.replaceSpecialChar(t.trim())+")","gim"):new RegExp("^("+this.replaceSpecialChar(t)+")","gim")).test(e.trim()));return i},e.prototype.replaceSpecialChar=function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/g,"\\$&")},e.prototype.isClear=function(e,t){for(var i=0;i<e.length;i++)if(new RegExp(t,"gim").test(e[i].text))return!0;return!1},e.prototype.getSelectedInlinePoints=function(e){return{start:e.selectionStart,end:e.selectionEnd,text:this.getSelectedText(e)}},e}(),st=function(){function e(e){this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,uppercase:!1,lowercase:!1,inlinecode:!1,unorderedlist:!1,formats:null},this.selection=new nt,this.parent=e,this.element=this.parent.getEditPanel(),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("toolbar-refresh",this.onRefreshHandler,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("toolbar-refresh",this.onRefreshHandler),this.parent.observer.off(t,this.removeEventListener)},e.prototype.onRefreshHandler=function(e){var t=this.selection.getSelectedParentPoints(this.element);this.toolbarStatus={orderedlist:!e.documentNode&&this.isListsApplied(t,"OL"),unorderedlist:!e.documentNode&&this.isListsApplied(t,"UL"),formats:this.currentFormat(t,e.documentNode),bold:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Bold"),italic:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Italic"),inlinecode:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode"),strikethrough:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("StrikeThrough"),subscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SubScript"),superscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SuperScript"),uppercase:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("UpperCase")},this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode")&&(this.toolbarStatus.formats="pre");var i=JSON.stringify(this.toolbarStatus);this.parent.observer.notify("toolbar-updated",this.toolbarStatus),JSON.stringify(this.prevToolbarStatus)!==i&&(this.parent.observer.notify("updateTbItemsStatus",{html:null,markdown:JSON.parse(i)}),this.prevToolbarStatus=JSON.parse(i))},e.prototype.isListsApplied=function(e,t){var i=!0;if("OL"===t)for(var n=0;n<e.length;n++){var s=e[n].text.trim().split(" ",2)[0]+" ";if(!/^[\d.]+[ ]+$/.test(s)){i=!1;break}}else for(n=0;n<e.length;n++)if(!this.selection.isStartWith(e[n].text,this.parent.formatter.listSyntax[t])){i=!1;break}return i},e.prototype.currentFormat=function(e,t){for(var i="p",n=Object.keys(this.parent.formatter.formatSyntax),s="backward"===this.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<n.length;o++){if("pre"!==n[o]&&this.selection.isStartWith(s,this.parent.formatter.formatSyntax[n[o]])){i=n[o];break}if("pre"===n[o]&&this.codeFormat()){i=n[o];break}}return i},e.prototype.codeFormat=function(){var e,t=!1,i=this.parent.inputElement,n=i.selectionStart,s=(e=n,function(t){return[t.slice(0,e),t.slice(e)]})(i.value),o=this.parent.formatter.formatSyntax.pre,r=this.getSelectedText(i);if(""!==r&&r===r.toLocaleUpperCase())return!0;if(""===r){var a=i.value.substr(s[0].length-1,1),l=s[1].substr(0,1);if(""!==a&&""!==l&&a.match(/[a-z]/i)&&a===a.toLocaleUpperCase()&&l===l.toLocaleUpperCase())return!0}return this.isCode(s[0],o)&&this.isCode(s[1],o)&&s[0].match(this.multiCharRegx(o)).length%2==1&&s[1].match(this.multiCharRegx(o)).length%2==1&&(t=!0),t},e.prototype.getSelectedText=function(e){return e.value.substring(e.selectionStart,e.selectionEnd)},e.prototype.isCode=function(e,t){return-1!==e.search("\\"+t)},e.prototype.multiCharRegx=function(e){return new RegExp("(\\"+e+")","g")},e}(),ot=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("lists-commands",this.applyListsHandler,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this),this.parent.observer.on("keyup-handler",this.keyUpHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.which){case 9:this.tabKey(e)}switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.keyUpHandler=function(e){switch(e.event.which){case 13:this.enterKey(e)}},e.prototype.tabKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,n=t.selectionEnd,s=this.selection.getSelectedParentPoints(t),o=0,r=this.isNotFirstLine(t,s[0]);if(r||e.event.shiftKey){var a=this.olListType(),l=this.getListRegex();this.currentAction=this.getAction(s[0].text);for(var h=0;h<s.length;h++){var d=(e.event.shiftKey,s[h].line-1),c=this.selection.getLine(t,d);if(c&&(!e.event.shiftKey&&r||e.event.shiftKey)){var p=c.split(". "),u=e.event.shiftKey?-"\t".length:"\t".length,f=s[h].text.split("\t");if(e.event.shiftKey&&1===f.length)break;if("OL"===this.currentAction&&/^\d+$/.test(p[0].trim())&&a){e.event.preventDefault(),s[h].text=e.event.shiftKey?f.splice(1,f.length).join("\t"):"\t"+s[h].text;var g=this.getTabSpace(s[h].text),m=this.getTabSpace(c),v=s[h].text.split(". ");if(g===m)this.changeTextAreaValue(v,this.nextOrderedListValue(p[0].trim()),e,t,s,h,n);else if(m<g)this.changeTextAreaValue(v,"1. ",e,t,s,h,n);else for(;m.length>g.length;null){d-=1;var b=(c=this.selection.getLine(t,d)).trim().split(". ");if(/^\d+$/.test(b[0])&&(m=this.getTabSpace(c)).length<=g.length){this.changeTextAreaValue(v,this.nextOrderedListValue(b[0]),e,t,s,h,n);break}}}else("UL"===this.currentAction&&l.test(c.trim())||!a)&&(e.event.preventDefault(),s[h].text=e.event.shiftKey?f.splice(1,f.length).join("\t"):"\t"+s[h].text,t.value=t.value.substr(0,s[h].start)+s[h].text+"\n"+t.value.substr(s[h].end,t.value.length));if(i=0===h?i+u:i,o+=u,1!==s.length)for(var y=h;y<s.length;y++)s[y].start=0!==y?s[y].start+u:s[y].start,s[y].end=s[y].end+u}}this.restore(t,i,n+o,e)}else this.restore(t,i,n+o,e)},e.prototype.changeTextAreaValue=function(e,t,i,n,s,o,r){var a=t;e.splice(0,1);var l,h=this.selection.getAllParents(n.value).length,d="",c=this.getTabSpace(s[o].text),p=parseInt(a.split(".")[0],null),u=this.getTabSpace(s[o].text),f=!0,g=!0,m=-1,v=!0,b=0,y="";d=""!==this.selection.getLine(n,s[0].line+1)?"":d+n.value.substr(s[0].end,n.value.length);for(var C=1;C<h&&!sf.base.isNullOrUndefined(this.selection.getLine(n,s[0].line+C))&&""!==this.selection.getLine(n,s[0].line+C);C++){var w=this.selection.getLine(n,s[0].line+C),M=this.getTabSpace(w),S=w.split(". ");if(1===S.length){d+=n.value.substr(s[0].end+b,n.value.length);break}b+=w.length;var x=!1;if(l=i.event.shiftKey?c.length+1:c.length-1,M.length>u.length&&(v=!1),c.length!==M.length&&M.length<u.length?(g=!0,f=!1,x=!(!i.event.shiftKey||c.length!==M.length)&&(g=!1,!0)):v&&i.event.shiftKey&&c.length===M.length&&M.length===u.length&&(g=!1,x=!0),y=""===d?"":"\n",l===M.length&&g){var N=i.event.shiftKey?(m++,this.nextOrderedListValue(m.toString())):this.previousOrderedListValue(S[0]);S.splice(0,1),d=d+y+M+N+S.join(". ")}else if(c.length===M.length&&f||x){N=this.nextOrderedListValue(p.toString());p++,S.splice(0,1),d=d+y+M+N+S.join(". ")}else d=d+y+w,g=!1;u=this.getTabSpace(w)}s[o].text=this.getTabSpace(s[o].text)+a+e.join(". ")+"\n",n.value=n.value.substr(0,s[o].start)+s[o].text+d},e.prototype.getTabSpace=function(e){for(var t=e.split("\t"),i="",n=0;n<t.length&&""===t[n];n++)i+="\t";return i},e.prototype.isNotFirstLine=function(e,t){var i,n=t.text,s=t.line-1,o=this.selection.getLine(e,s),r=this.getListRegex(),a=!1;if(o){this.currentAction=this.getAction(o);var l=o.split(". ");i="OL"===this.currentAction?/^\d+$/.test(l[0].trim()):r.test(o.trim())}if(o&&i){var h=this.getTabSpace(n),d=this.getTabSpace(o);for(a=h===d||a;d.length>h.length;null){s-=1;l=(o=this.selection.getLine(e,s)).trim().split(". ");if(("OL"===this.currentAction?/^\d+$/.test(l[0]):r.test(o.trim()))&&(d=this.getTabSpace(o)).length<=h.length){a=!0;break}}}return a},e.prototype.getAction=function(e){var t=e.split(". ")[0],i=/^\d+$/.test(t.trim()),n=e.trim().split(new RegExp("^("+this.selection.replaceSpecialChar(this.syntax.UL).trim()+")"))[1];return i?"OL":n?"UL":"NOTLIST"},e.prototype.nextOrderedListValue=function(e){return(parseInt(e,null)+1).toString()+". "},e.prototype.previousOrderedListValue=function(e){return(parseInt(e,null)-1).toString()+". "},e.prototype.enterKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,n=t.selectionEnd,s=this.selection.getSelectedParentPoints(t),o=this.selection.getLine(t,s[0].line-1),r=this.olListType(),a=this.getListRegex(),l=[];sf.base.isNullOrUndefined(o)||(l=o.split(". "),this.currentAction=this.getAction(o));var h=0;if("OL"===this.currentAction&&l.length>1&&/^\d+$/.test(l[0].trim())&&r&&""!==l[1]){var d=this.getTabSpace(o);this.currentAction=this.getAction(o);var c=this.nextOrderedListValue(l[0]);s[0].text=d+c+s[0].text;for(var p=this.selection.getAllParents(t.value).length,u="\n",f=this.getTabSpace(o),g=this.getTabSpace(s[0].text),m=!0,v=1;v<p&&""!==t.value.substr(s[0].end,t.value.length);v++){var b=this.selection.getLine(t,s[0].line+v);if(sf.base.isNullOrUndefined(b))u+="";else{var y=b.split(". "),C=this.getTabSpace(b);if(C.length<g.length&&(m=!1),y.length>1&&/^\d+$/.test(y[0].trim())&&f.length===C.length&&m){var w=this.nextOrderedListValue(y[0]);y.splice(0,1),u=u+C+w+y.join(". ")+"\n"}else u=u+b+"\n",g=this.getTabSpace(b)}}t.value=t.value.substr(0,s[0].start)+f+c+this.selection.getLine(t,s[0].line)+u,i=i+c.length+d.length,h+=c.length+d.length}else if("UL"===this.currentAction&&o&&a.test(o.trim())&&""!==o.trim().replace(a,"")||"OL"===this.currentAction&&!r){d=this.getTabSpace(o),c=this.syntax[this.currentAction];s[0].text=d+c+s[0].text+(s[0].text.trim().length>0?"\n":""),t.value=t.value.substr(0,s[0].start)+s[0].text+t.value.substr(s[0].end,t.value.length),i=i+c.length+d.length,h+=c.length+d.length}this.restore(t,i,n+h,e)},e.prototype.olListType=function(){var e=this.syntax.OL.split(".,");return(1===e.length?null:parseInt(e[2].trim(),null)-parseInt(e[0].trim(),null))?1:0},e.prototype.applyListsHandler=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd),this.currentAction=e.subCommand;for(var i,n=t.selectionStart,s=t.selectionEnd,o=0,r=0,a=0,l=this.selection.getSelectedParentPoints(t),h="",d=this.olListType(),c={},p=0;p<l.length;p++)if(i=d?"OL"===this.currentAction?p+d+". ":this.syntax[this.currentAction]:"OL"===this.currentAction?this.syntax.OL:this.syntax[this.currentAction],this.selection.isStartWith(l[p].text,i))l[p].text=l[p].text.replace(i,""),t.value=t.value.substr(0,l[p].start+a)+l[p].text+"\n"+t.value.substr(l[p].end+a,t.value.length),a-=i.length,r=i.length,this.restore(t,n-r,s+a,null);else{if(""===l[p].text&&0===p&&(this.selection.save(n,s),1!==l.length))for(var u=p;u<l.length;u++)l[u].start=0!==u?1+l[u].start:l[u].start,l[u].end=1+l[u].end;var f=sf.base.isNullOrUndefined(l[p-1])?0:this.getTabSpace(l[p-1].text).length,g=this.appliedLine(l[p].text,i,c,f);if(h=g.line?h:i,l[p].text=g.line?g.line:h+l[p].text,g.space=g.space?g.space:0,t.value=t.value.substr(0,l[p].start+a)+l[p].text+"\n"+t.value.substr(l[p].end,t.value.length),n=0===p?n+h.length+g.space>0?n+h.length+g.space:0:n,o+=h.length+g.space,1!==l.length)for(u=p;u<l.length;u++)l[u].start=0!==u?h.length+l[u].start+g.space:l[u].start,l[u].end=h.length+l[u].end+g.space;this.restore(t,n,s+o,null)}this.restore(t,null,null,e)},e.prototype.appliedLine=function(e,t,i,n){var s={},o=new RegExp("^["+this.syntax.UL.trim()+"]"),r=e.split(". "),a=r[0]+". ",l=o.test(e.trim())||e.trim()===this.syntax.OL.trim()||e.trim()===this.syntax.UL.trim()||/^\d+$/.test(r[0].trim()),h=this.olListType(),d=this.getTabSpace(e).length;if("OL"===this.currentAction&&h&&(i[d.toString()]=sf.base.isNullOrUndefined(i[d.toString()])?1:i[d.toString()].valueOf()+1,t=i[d.toString()].valueOf().toString()+". ",!sf.base.isNullOrUndefined(n)&&n>d&&(i[n.toString()]=0)),l){var c=void 0,p=void 0;o.test(e.trim())?(p=this.syntax.UL,c=t,s.space=t.trim().length-this.syntax.UL.trim().length):/^\d+$/.test(r[0].trim())&&h?(p=r[0].trim()+". ",c=t,s.space=this.syntax.UL.trim().length-a.trim().length):/^\d+$/.test(r[0].trim())&&(p=r[0].trim()+". ",c=this.syntax.UL,s.space=this.syntax.UL.trim().length-a.trim().length),s.line=e.replace(p,c)}return s},e.prototype.restore=function(e,t,i,n){sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t)||this.selection.save(t,i),sf.base.isNullOrUndefined(n)||this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e.prototype.getListRegex=function(){for(var e="",t=Object.keys(this.syntax),i=0;i<t.length;i++){var n=this.selection.replaceSpecialChar(this.syntax[t[i]]);e+=""===e?"^("+n+")|^("+n.trim()+")":"|^("+n+")|^("+n.trim()+")"}return new RegExp(e)},e}(),rt=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this)},e.prototype.applyFormats=function(e){e.subCommand=e.subCommand.toLowerCase();var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=this.selection.getSelectedParentPoints(t);if(this.isAppliedFormat(i)===e.subCommand){if("pre"===e.subCommand){if(!(i.length>1))return;this.applyCodeBlock(t,e,i)}return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e)}if("p"===e.subCommand)return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e);("pre"===e.subCommand&&1!==i.length||"pre"!==e.subCommand)&&this.cleanFormat(t,e.subCommand);var n=t.selectionStart,s=t.selectionEnd,o=0;if(i=this.selection.getSelectedParentPoints(t),"pre"!==e.subCommand){for(var r=0;r<i.length;r++)if(""===i[r].text||this.selection.isStartWith(i[r].text,"\\"+this.syntax[e.subCommand])){if(""===i[r].text&&0===r&&(this.selection.save(n,s),0===this.selection.getSelectedText(t).length&&(i[r].text=this.syntax[e.subCommand],t.value=t.value.substr(0,i[r].start)+this.syntax[e.subCommand]+t.value.substr(i[r].end,t.value.length),n=0===r?n+this.syntax[e.subCommand].length:n,o+=this.syntax[e.subCommand].length),1!==i.length))for(a=r;a<i.length;a++)i[a].start=0!==a?1+i[a].start:i[a].start,i[a].end=1+i[a].end}else if(i[r].text=this.syntax[e.subCommand]+i[r].text,t.value=t.value.substr(0,i[r].start)+i[r].text+"\n"+t.value.substr(i[r].end,t.value.length),n=0===r?n+this.syntax[e.subCommand].length:n,o+=this.syntax[e.subCommand].length,1!==i.length)for(var a=r;a<i.length;a++)i[a].start=0!==a?this.syntax[e.subCommand].length+i[a].start:i[a].start,i[a].end=this.syntax[e.subCommand].length+i[a].end;this.restore(t,n,s+o,e)}else i.length>1?this.applyCodeBlock(t,e,i):(sf.base.extend(e,e,{subCommand:"InlineCode"},!0),this.parent.observer.notify("command-type",e))},e.prototype.clearRegex=function(){for(var e="",t=Object.keys(this.syntax),i=0;i<t.length&&"pre"!==t[i]&&"p"!==t[i];i++)e+=""===e?"^("+this.selection.replaceSpecialChar(this.syntax[t[i]].trim())+")":"|^("+this.selection.replaceSpecialChar(this.syntax[t[i]].trim())+")";return e},e.prototype.cleanFormat=function(e,t){var i=this.selection.getSelectedParentPoints(e),n=e.selectionStart,s=e.selectionEnd,o=0;if(this.selection.isClear(i,this.clearRegex())){for(var r=0;r<i.length;r++){for(var a=Object.keys(this.syntax),l=0;""!==i[r].text&&l<a.length;l++){var h=this.syntax[a[l]];if(a[l]!==t){var d=new RegExp("^("+this.selection.replaceSpecialChar(h)+")","gim");if(d.test(i[r].text)){if(i[r].text=i[r].text.replace(d,""),e.value=e.value.substr(0,i[r].start)+i[r].text+"\n"+e.value.substr(i[r].end,e.value.length),n=0===r?n-h.length>0?n-h.length:0:n,o+=h.length,1!==i.length)for(var c=0;c<i.length;c++)i[c].start=0!==c?i[c].start-h.length:i[c].start,i[c].end=i[c].end-h.length;break}}}if(""===i[r].text&&0===r&&(this.selection.save(n,s),1!==i.length))for(l=r;l<i.length;l++)i[l].start=0!==l?1+i[l].start:i[l].start,i[l].end=1+i[l].end}this.restore(e,n,s-o)}},e.prototype.applyCodeBlock=function(e,t,i){var n=t.subCommand,s=i[0].start,o=i[i.length-1].end,r=this.selection.getAllParents(e.value),a=r[i[0].line-1],l=r[i.length+1+1];if(this.selection.isStartWith(a,this.syntax.pre.split("\n")[0])||this.selection.isStartWith(l,this.syntax.pre.split("\n")[0])){var h=this.syntax[""+n],d=this.parent.markdownSelection.getSelectedInlinePoints(e),c=e.value.substr(0,e.selectionStart).lastIndexOf(h),p=e.value.substr(e.selectionEnd,e.selectionEnd).indexOf(h);p+=d.end;var u=this.replaceAt(e.value.substr(0,d.start),h,"",c,d.start),f=this.replaceAt(e.value.substr(d.end,e.value.length),h,"",0,p);e.value=u+d.text+f,s=this.selection.selectionStart-h.length,o=this.selection.selectionEnd-h.length}else{var g=e.value.substring(s,o).split("\n"),m=""===g[g.length-1]?"":"\n";e.value=e.value.substr(0,s)+this.syntax[""+n]+e.value.substring(s,o)+m+this.syntax[""+n]+e.value.substr(o,e.value.length),s=this.selection.selectionStart+this.syntax[""+n].length,o=this.selection.selectionEnd+this.syntax[""+n].length-1}this.restore(e,s,o,t)},e.prototype.replaceAt=function(e,t,i,n,s){return e.slice(0,n)+e.slice(n,s).replace(t,i)+e.slice(s)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:n.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e.prototype.isAppliedFormat=function(e,t){for(var i="p",n=(Object.keys(this.syntax),Object.keys(this.syntax)),s="backward"===this.parent.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<n.length;o++){if("pre"!==n[o]&&this.selection.isStartWith(s,this.syntax[n[o]])){i=n[o];break}if("pre"===n[o]){var r=this.selection.getAllParents(this.parent.element.value),a=r[e[0].line-1],l=r[e.length+1];if(this.selection.isStartWith(a,this.syntax[n[o]].split("\n")[0])&&this.selection.isStartWith(l,this.syntax[n[o]].split("\n")[0])){i=n[o];break}}}return i},e}(),at=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("command-type",this.applyCommands,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.action){case"bold":this.applyCommands({subCommand:"Bold",callBack:e.callBack}),e.event.preventDefault();break;case"italic":this.applyCommands({subCommand:"Italic",callBack:e.callBack}),e.event.preventDefault();break;case"strikethrough":this.applyCommands({subCommand:"StrikeThrough",callBack:e.callBack}),e.event.preventDefault();break;case"uppercase":this.applyCommands({subCommand:"UpperCase",callBack:e.callBack}),e.event.preventDefault();break;case"lowercase":this.applyCommands({subCommand:"LowerCase",callBack:e.callBack}),e.event.preventDefault();break;case"superscript":this.applyCommands({subCommand:"SuperScript",callBack:e.callBack}),e.event.preventDefault();break;case"subscript":this.applyCommands({subCommand:"SubScript",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.isBold=function(e,t){return-1!==e.search("\\"+t+"\\"+t)},e.prototype.isItalic=function(e,t){return-1!==e.search("\\"+t)},e.prototype.isMatch=function(e,t){var i=[""];switch(t){case this.syntax.Italic:case this.syntax.InlineCode:case this.syntax.StrikeThrough:i=e.match(this.singleCharRegx(t))}return i},e.prototype.multiCharRegx=function(e){return new RegExp("(\\"+e+"\\"+e+")","g")},e.prototype.singleCharRegx=function(e){return new RegExp("(\\"+e+")","g")},e.prototype.isAppliedCommand=function(e){var t,i=!1,n=this.parent.element,s=n.selectionStart,o=(t=s,function(e){return[e.slice(0,t),e.slice(t)]})(n.value),r=this.syntax.Bold.substr(0,1),a=this.syntax.Italic,l=this.parent.markdownSelection.getSelectedText(n);if(""!==l&&l===l.toLocaleUpperCase()&&"UpperCase"===e)return!0;if(""===l){var h=n.value.substr(o[0].length-1,1),d=o[1].substr(0,1);if(""!==h&&""!==d&&h.match(/[a-z]/i)&&h===h.toLocaleUpperCase()&&d===d.toLocaleUpperCase()&&"UpperCase"===e)return!0}return this.isBold(o[0],r)||this.isItalic(o[0],a)||this.isBold(o[1],r)||this.isItalic(o[1],a)||(sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.StrikeThrough))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==e||(i=!0),sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.InlineCode))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sub>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sub>/g))||o[0].match(/\<sub>/g).length%2!=1||o[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sup>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sup>/g))||o[0].match(/\<sup>/g).length%2!=1||o[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==e||(i=!0)),this.isBold(o[0],r)&&this.isBold(o[1],r)&&o[0].match(this.multiCharRegx(r)).length%2==1&&o[1].match(this.multiCharRegx(r)).length%2==1&&"Bold"===e&&(i=!0),o[0]=this.isBold(o[0],r)?o[0].replace(this.multiCharRegx(r),"$%@"):o[0],o[1]=this.isBold(o[1],r)?o[1].replace(this.multiCharRegx(r),"$%@"):o[1],sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.Italic))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.Italic))||this.isMatch(o[0],this.syntax.Italic).length%2!=1||this.isMatch(o[1],this.syntax.Italic).length%2!=1||"Italic"!==e||(i=!0),sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.StrikeThrough))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==e||(i=!0),sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.InlineCode))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sub>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sub>/g))||o[0].match(/\<sub>/g).length%2!=1||o[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sup>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sup>/g))||o[0].match(/\<sup>/g).length%2!=1||o[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==e||(i=!0),i},e.prototype.applyCommands=function(e){this.currentAction=e.subCommand;var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,n=t.selectionEnd,s=0,o=this.parent.markdownSelection.getSelectedInlinePoints(t);if(this.isAppliedCommand(e.subCommand)&&""!==o.text){var r=this.syntax[e.subCommand],a="SubScript"===e.subCommand?"</sub>":"SuperScript"===e.subCommand?"</sup>":this.syntax[e.subCommand],l="UpperCase"===e.subCommand||"LowerCase"===e.subCommand?0:r.length,h=t.value.substr(0,o.start).lastIndexOf(r),d=t.value.substr(o.end,t.value.length).indexOf(a);d+=o.end;var c=this.replaceAt(t.value.substr(0,o.start),r,"",h,o.start),p=this.replaceAt(t.value.substr(o.end,t.value.length),a,"",0,d);return t.value=c+o.text+p,void this.restore(t,i-l,n-l,e)}if(""===o.text||this.isApplied(o,e.subCommand))"UpperCase"!==e.subCommand&&"LowerCase"!==e.subCommand?("SubScript"===e.subCommand||"SuperScript"===e.subCommand?(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+"</"+this.syntax[e.subCommand].substring(1,5)):(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand]),t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),s=this.syntax[e.subCommand].length,o.start===o.end?this.restore(t,i+s,n+s,e):this.restore(t,i+s,n-s,e)):this.restore(t,i,n,e);else{s="UpperCase"===e.subCommand||"LowerCase"===e.subCommand?0:this.syntax[e.subCommand].length;var u=t.value.substr(o.start-this.syntax[e.subCommand].length,this.syntax[e.subCommand].length),f=void 0;if(u===e.subCommand||o.start-this.syntax[e.subCommand].length===t.value.indexOf(this.syntax[e.subCommand])&&(o.end===t.value.lastIndexOf(this.syntax[e.subCommand])||o.end===t.value.lastIndexOf("</"+this.syntax[e.subCommand].substring(1,5)))){f="SubScript"===e.subCommand||"SuperScript"===e.subCommand?t.value.substr(o.end,this.syntax[e.subCommand].length+1):t.value.substr(o.end,this.syntax[e.subCommand].length);c=this.replaceAt(t.value.substr(0,o.start),u,"",o.start-this.syntax[e.subCommand].length,o.start),p=this.replaceAt(t.value.substr(o.end,t.value.length),f,"",0,f.length);t.value=c+o.text+p,this.restore(t,i-s,n-s,e)}else"SubScript"===e.subCommand||"SuperScript"===e.subCommand?o.text=this.syntax[e.subCommand]+o.text+"</"+this.syntax[e.subCommand].substring(1,5):"UpperCase"===e.subCommand||"LowerCase"===e.subCommand?o.text="UpperCase"===e.subCommand?o.text.toUpperCase():o.text.toLowerCase():o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand],t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),this.restore(t,i+s,n+s,e)}this.parent.undoRedoManager.saveData()},e.prototype.replaceAt=function(e,t,i,n,s){return e.slice(0,n)+e.slice(n,s).replace(t,i)+e.slice(s)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e.prototype.textReplace=function(e,t){var i=this.singleCharRegx(this.syntax[""+t]);switch(t){case"Bold":i=this.multiCharRegx(this.syntax[""+t].substr(0,1)),e=e.replace(i,"");break;case"Italic":if(this.isBold(e,this.syntax[""+t].substr(0,1))){var n=this.multiCharRegx(this.syntax[""+t].substr(0,1)),s=e;s=s.replace(n,"$%@").replace(i,"");var o=new RegExp("\\$%@","g");e=s.replace(o,this.syntax[""+t].substr(0,1)+this.syntax[""+t].substr(0,1))}else e=e.replace(i,"");break;case"StrikeThrough":case"InlineCode":e=e.replace(i,"");break;case"SubScript":e=e.replace(/<sub>/g,"").replace(/<\/sub>/g,"");break;case"SuperScript":e=e.replace(/<sup>/g,"").replace(/<\/sup>/g,"")}return e},e.prototype.isApplied=function(e,t){var i=this.singleCharRegx(this.syntax[""+t]);switch(t){case"SubScript":case"SuperScript":return(i=this.singleCharRegx(this.syntax[""+t])).test(e.text);case"Bold":case"StrikeThrough":return(i=this.multiCharRegx(this.syntax[""+t].substr(0,1))).test(e.text);case"UpperCase":case"LowerCase":return(i=new RegExp("^["+this.syntax[""+t]+"]*$","g")).test(e.text);case"Italic":var n=void 0,s=this.multiCharRegx(this.syntax[""+t].substr(0,1));if(s.test(e.text)){var o=e.text;o=o.replace(s,"$%#"),n=i.test(o)}else n=i.test(e.text);return n;case"InlineCode":return i.test(e.text)}},e}(),lt=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=sf.base.isNullOrUndefined(t)?30:t.undoRedoSteps,this.undoRedoTimer=sf.base.isNullOrUndefined(t)?300:t.undoRedoTimer,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){var e=sf.base.debounce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){var e=sf.base.debounce(this.keyUp,300);this.parent.observer.off("keyup-handler",e),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction),this.parent.observer.off("model_changed_plugin",this.onPropertyChanged)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,n=t.selectionEnd,s={text:this.parent.element.value,start:i,end:n};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].start===i&&this.undoRedoStack[this.undoRedoStack.length-1].end===n||(this.undoRedoStack.push(s),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){this.currentAction="Undo";var t=this.undoRedoStack[this.steps-1].start,i=this.undoRedoStack[this.steps-1].end,n=this.undoRedoStack[this.steps-1].text;this.parent.element.value=n,this.parent.element.focus(),this.steps--,this.restore(this.parent.element,t,i,e)}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){this.currentAction="Redo";var t=this.undoRedoStack[this.steps+1].start,i=this.undoRedoStack[this.steps+1].end;this.parent.element.value=this.undoRedoStack[this.steps+1].text,this.parent.element.focus(),this.steps++,this.restore(this.parent.element,t,i,e)}},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),ht=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("link-commands",this.createLink,this)},e.prototype.createLink=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,n=t.selectionEnd,s="Image"===e.subCommand?this.selection.getSelectedText(t):e.item.text,o="Image"===e.subCommand?i+2:i+1,r="Image"===e.subCommand?n+2:n+1;s="Image"===e.subCommand?"!["+s+"]("+e.item.url+")":"["+s+"]("+e.item.url+")",t.value=t.value.substr(0,i)+s+t.value.substr(n,t.value.length),this.parent.markdownSelection.setSelection(t,o,r),this.restore(t,o,r,e)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:n.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e}(),dt=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-table",this.createTable,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("insert-table",this.createTable),this.parent.observer.off("keydown-handler",this.onKeyDown)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onKeyDown=function(e){"insert-table"===e.event.action&&(e.item=e.value,this.createTable(e))},e.prototype.createTable=function(e){this.element=this.parent.element;var t=this.element.selectionStart,i=this.element.selectionEnd,n=this.element.value;this.locale=e,this.selection.save(t,i),this.restore(this.element.selectionStart,this.element.selectionEnd,null),this.insertTable(t,i,n,e)},e.prototype.getTable=function(){var e="";return e+=this.textNonEmpty(),e+=this.tableHeader(this.locale),e+=this.tableCell(this.locale)},e.prototype.tableHeader=function(e){for(var t="",i=1;i<=2;i++){t+="|";for(var n=1;n<=2;n++)t+=1===i?e.item.headingText+" "+n+"|":"---------|";t+=this.insertLine()}return t},e.prototype.tableCell=function(e){for(var t="",i=1;i<=2;i++){t+="|";for(var n=1;n<=2;n++)t+=e.item.colText+" "+this.convertToLetters(i)+n+"|";t+=this.insertLine()}return t+=this.insertLine()},e.prototype.insertLine=function(){var e=document.createElement("div");return e.innerHTML="\n",e.textContent},e.prototype.insertTable=function(e,t,i,n){var s=this.selection.getSelectedParentPoints(this.element),o=s[s.length-1].text.split(" ",2),r=this.getFormatTag();o.length<2?(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,e,t)):this.ensureFormatApply(s[s.length-1].text)?this.checkValid(e,t,this.getTable(),i,n,o,s,r):(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,e,t)),this.restore(this.element.selectionStart,this.element.selectionEnd,n)},e.prototype.makeSelection=function(e,t,i){i=t+(e.length>0?12:10),t+=e.length>0?3:1,this.selection.setSelection(this.element,t,i)},e.prototype.getFormatTag=function(){for(var e=Object.keys(this.syntaxTag.Formats),t=Object.keys(this.syntaxTag.List),i=[],n=0;n<e.length;n++)i.push(this.syntaxTag.Formats[e[n]]);for(var s=0;s<t.length;s++)i.push(this.syntaxTag.List[t[s]]);return i},e.prototype.ensureFormatApply=function(e){for(var t=this.getFormatTag(),i=e.trim().split(" ",2)[0]+" ",n=0;n<t.length;n++)if(i===t[n]||/^[\d.]+[ ]+$/.test(i))return!0;return!1},e.prototype.ensureStartValid=function(e,t){for(var i=t[0].text.split(" ",2),n=e+1;n<=e+i[0].length+1;n++)if(this.element.selectionStart===n||this.element.selectionEnd===n)return!1;return!0},e.prototype.ensureEndValid=function(e,t){for(var i=e+1;i<=e+t+1;i++)if(this.element.selectionEnd===i)return!1;return!0},e.prototype.updateValueWithFormat=function(e,t){var i=this.element.value.substring(this.element.selectionEnd,this.element.value.length);return t+=i.replace(i,e[0]+" "+i),this.element.value.substr(0,this.element.selectionStart)+t},e.prototype.updateValue=function(e){return this.element.value.substr(0,this.element.selectionStart)+e+this.element.value.substr(this.element.selectionEnd,this.element.value.length)},e.prototype.checkValid=function(e,t,i,n,s,o,r,a){this.ensureStartValid(r[0].start,r)&&this.ensureEndValid(r[r.length-1].start,o[0].length)&&(e===r[0].start?e!==t&&t!==r[r.length-1].end-1?this.element.value=this.updateValueWithFormat(o,i):this.element.value=this.updateValue(i):t===r[r.length-1].end-1?this.element.value=this.updateValue(i):this.element.value=this.updateValueWithFormat(o,i),this.makeSelection(n,e,t))},e.prototype.convertToLetters=function(e){var t="A".charCodeAt(0),i="";do{e-=1,i=String.fromCharCode(t+e%26)+i,e=e/26>>0}while(e>0);return i},e.prototype.textNonEmpty=function(){var e="";return(this.isCursorBased()||this.isSelectionBased())&&this.element.value.length>0&&(e+=this.insertLine(),e+=this.insertLine()),e},e.prototype.isCursorBased=function(){return this.element.selectionStart===this.element.selectionEnd},e.prototype.isSelectionBased=function(){return this.element.selectionStart!==this.element.selectionEnd},e.prototype.restore=function(e,t,i){this.selection.save(e,t),this.selection.restore(this.element),i&&i.callBack&&i.callBack({requestType:i.subCommand,selectedText:this.selection.getSelectedText(this.element),editorMode:"Markdown",event:i.event})},e}(),ct=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-commands",this.clear,this)},e.prototype.replaceRegex=function(e){return e.replace(/\*/gi,"\\*").replace(/\&/gi,"\\&").replace(/\-/gi,"\\-").replace(/\^/gi,"\\^").replace(/\$/gi,"\\$").replace(/\./gi,"\\.").replace(/\|/gi,"\\|").replace(/\?/gi,"\\?").replace(/\+/gi,"\\+").replace(/\-/gi,"\\-").replace(/\&/gi,"\\&")},e.prototype.clearSelectionTags=function(e){for(var t=this.parent.selectionTags,i=Object.keys(t),n=0;n<i.length;n++){var s=i[n];if(t.hasOwnProperty(s)&&""!==t[s]){var o=this.replaceRegex(t[""+s]),r=void 0,a=t[""+s].length,l="<sup>"===t[""+s]||"<sub>"===t[""+s]?t[""+s].length+1:t[""+s].length;r="<sup>"===t[""+s]?new RegExp("<sup>(.*?)</sup>","ig"):"<sub>"===t[""+s]?new RegExp("<sub>(.*?)</sub>","ig"):new RegExp(o+"(.*?)"+o,"ig");for(var h=e.match(r),d=0;h&&d<h.length&&""!==h[d];d++)e=e.replace(h[d],h[d].substr(a,h[d].length-l-a))}}return e},e.prototype.clearFormatTags=function(e){var t=e.split("\n");return this.clearFormatLines(t)},e.prototype.clearFormatLines=function(e){for(var t=[this.parent.formatTags,this.parent.listTags],i="",n=0;n<e.length;n++){for(var s=0;s<t.length;s++)for(var o=t[s],r=Object.keys(o),a=0;a<r.length;a++){var l=r[a];o.hasOwnProperty(l)&&""!==o[l]&&0===e[n].indexOf(o[""+l])&&(e[n]=e[n].replace(o[""+l],""),e[n]=this.clearFormatLines([e[n]]))}i=i+e[n]+(n!==e.length-1?"\n":"")}return i},e.prototype.clear=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,n=t.selectionEnd,s=this.selection.getSelectedText(t);s=this.clearSelectionTags(s),s=this.clearFormatTags(s),t.value=t.value.substr(0,i)+s+t.value.substr(n,t.value.length),this.parent.markdownSelection.setSelection(t,i,i+s.length),this.restore(t,i,i+s.length,e)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:n.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e}(),pt=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-text",this.InsertTextExec,this)},e.prototype.InsertTextExec=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,n=t.selectionEnd,s=e.value.text,o=i+s.length,r=n+s.length;t.value=t.value.substr(0,i)+s+t.value.substr(n,t.value.length),this.parent.markdownSelection.setSelection(t,o,r),this.restore(t,o,r,e)},e.prototype.restore=function(e,t,i,n){this.selection.save(t,i),this.selection.restore(e),n&&n.callBack&&n.callBack({requestType:n.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:n.event})},e}(),ut=function(){function e(e){this.initialize(),sf.base.extend(this,this,e,!0),this.observer=new sf.base.Observer(this),this.markdownSelection=new nt,this.listObj=new ot({parent:this,syntax:this.listTags}),this.formatObj=new rt({parent:this,syntax:this.formatTags}),this.undoRedoManager=new lt(this,e.options),this.mdSelectionFormats=new at({parent:this,syntax:this.selectionTags}),this.linkObj=new ht(this),this.tableObj=new dt({parent:this,syntaxTag:{Formats:this.formatTags,List:this.listTags}}),this.clearObj=new ct(this),this.insertTextObj=new pt(this),this.wireEvents()}return e.prototype.initialize=function(){this.formatTags=te,this.listTags=ne,this.selectionTags=ie},e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.execCommand=function(e,t,i,n,s,o){switch(e.toLocaleLowerCase()){case"lists":this.observer.notify("lists-commands",{subCommand:t,event:i,callBack:n});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:n});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:n});break;case"style":case"effects":case"casing":this.observer.notify("command-type",{subCommand:t,event:i,callBack:n});break;case"links":case"images":this.observer.notify("link-commands",{subCommand:t,event:i,callBack:n,item:o});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("insert-table",{subCommand:t,item:o,event:i,callBack:n})}break;case"clear":this.observer.notify("clear-commands",{subCommand:t,event:i,callBack:n});break;case"inserttext":this.observer.notify("insert-text",{subCommand:t,event:i,callBack:n,value:{text:o}})}},e}(),ft=(k=function(e,t){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}k(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),gt=function(e){function t(t){var i=e.call(this)||this;return i.initialize(),sf.base.extend(i,i,t,!0),t&&i.element&&i.updateFormatter(i.element,document,t.options),i}return ft(t,e),t.prototype.initialize=function(){this.keyConfig=oe,this.formatSyntax=te,this.listSyntax=ne,this.selectionSyntax=ie},t.prototype.updateFormatter=function(e,t,i){e&&(this.editorManager=new ut({element:e,formatTags:this.formatSyntax,listTags:this.listSyntax,selectionTags:this.selectionSyntax,options:i}))},t}(ee),mt=function(){function i(e){this.parent=e,this.addEventListener()}return i.prototype.addEventListener=function(){this.saveSelection=new nt,this.parent.observer.on(e,this.render,this),this.parent.observer.on("markdown-toolbar-click",this.onToolbarClick,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("selectAll",this.selectAll,this),this.parent.observer.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.observer.on(o,this.onSelectionSave,this),this.parent.observer.on(r,this.onSelectionRestore,this),this.parent.observer.on("readOnlyMode",this.updateReadOnly,this)},i.prototype.updateReadOnly=function(){this.parent.readonly?(this.parent.getEditPanel().setAttribute("readonly","readonly"),sf.base.addClass([this.parent.element],"e-rte-readonly")):(this.parent.getEditPanel().removeAttribute("readonly"),sf.base.removeClass([this.parent.element],"e-rte-readonly"))},i.prototype.onSelectionSave=function(){var e=this.parent.getEditPanel();this.saveSelection.save(e.selectionStart,e.selectionEnd)},i.prototype.onSelectionRestore=function(e){this.parent.getEditPanel().focus();var t=this.parent.getEditPanel();this.saveSelection.restore(t)},i.prototype.onToolbarClick=function(e){var t,i,n,s=e.item,o=this.parent.getEditPanel();switch(o.focus(),i=o.selectionStart,n=o.selectionEnd,t=o.value.substring(i,n),s.subCommand){case"Maximize":this.parent.observer.notify("enableFullScreen",{args:e});break;case"Minimize":this.parent.observer.notify("disableFullScreen",{args:e});break;case"CreateLink":this.parent.observer.notify("insertLink",{member:"link",args:e,text:t,module:"Markdown"});break;case"Image":this.parent.observer.notify("insertImage",{member:"image",args:e,text:t,module:"Markdown"});break;case"CreateTable":var r={headingText:this.parent.localeData.headingText,colText:this.parent.localeData.colText};this.parent.formatter.process(this.parent,e,e.originalEvent,r);break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}},i.prototype.removeEventListener=function(){this.parent.observer.off(e,this.render),this.parent.observer.off(t,this.destroy),this.parent.observer.off("markdown-toolbar-click",this.onToolbarClick),this.parent.observer.off("selectAll",this.selectAll),this.parent.observer.off("getSelectedHtml",this.getSelectedHtml),this.parent.observer.off(o,this.onSelectionSave),this.parent.observer.off(r,this.onSelectionRestore),this.parent.observer.off("readOnlyMode",this.updateReadOnly)},i.prototype.render=function(){var e=this.parent.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};sf.base.isNullOrUndefined(this.parent.adapter)?this.parent.formatter=new gt({element:e,options:t}):this.parent.formatter=new gt(sf.base.extend({},this.parent.adapter,{element:e,options:t})),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new st(this.parent)),this.parent.observer.notify("bind-on-end",{})},i.prototype.selectAll=function(){this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.getEditPanel(),0,this.parent.getEditPanel().value.length)},i.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()))},i.prototype.destroy=function(){this.removeEventListener()},i}(),vt=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("execCommandCallBack",this.commandCallBack,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.commandCallBack=function(e){"Undo"!==e.requestType&&"Redo"!==e.requestType&&this.parent.formatter.saveData(),this.parent.observer.notify("toolbar-refresh",{args:e}),this.parent.observer.notify("count",{})},e.prototype.removeEventListener=function(){this.parent.observer.off("execCommandCallBack",this.commandCallBack),this.parent.observer.off(t,this.removeEventListener)},e}(),bt=function(){return(bt=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},yt=function(){function t(e){this.undoRedoSteps=30,this.undoRedoTimer=300,this.floatingToolbarOffset=0,this.enableHtmlEncode=!1,this.defaultResetValue=null,this.isInitial=!0,this.blurEnabled=!1,this.focusEnabled=!1,this.undoRedoStatus=!1,this.createdEnabled=!1,this.isIframeRteElement=!0,this.actionBeginEnabled=!1,this.imageDeleteEnabled=!1,this.mediaDeleteEnabled=!1,this.onResizeStopEnabled=!1,this.quickTbClosedEnabled=!1,this.quickTbOpenedEnabled=!1,this.onQuickTbOpenEnabled=!1,this.onResizeStartEnabled=!1,this.actionCompleteEnabled=!1,this.beforeUploadImageEnabled=!1,this.onImageUploadFailedEnabled=!1,this.onImageUploadSuccessEnabled=!1,this.beforeUploadMediaEnabled=!1,this.onMediaUploadFailedEnabled=!1,this.onMediaUploadSuccessEnabled=!1,this.beforePasteCleanupEnabled=!1,this.afterPasteCleanupEnabled=!1,this.clickPoints={clientX:0,clientY:0},this.inlineCloseItems=["CreateLink","Image","CreateTable","Maximize","Minimize"],window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this),this.observer=new sf.base.Observer(this),this.dotNetRef.invokeMethodAsync("UpdateDeviceData",{isDevice:sf.base.Browser.isDevice,isIDevice:sf.base.Browser.isDevice&&sf.base.Browser.isIos}),this.initModules(),this.initialize()}return t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t.prototype.initModules=function(){this.id=this.element.id,this.updateContentElements(),"HTML"===this.editorMode?(this.htmlEditorModule=new Re(this),this.pasteCleanupModule=new it(this)):this.markdownEditorModule=new mt(this),this.toolbarSettings.enable&&(this.isUndoRedoStatus(),this.toolbarModule=new P(this)),this.fullScreenModule=new Ue(this),this.enterKeyModule=new He(this),this.viewSourceModule=new qe(this),this.showCharCount&&(this.countModule=new d(this)),this.enableResize&&(this.resizeModule=new c(this)),this.linkModule=new B(this),this.imageModule=new U(this),this.audioModule=new H(this),this.videoModule=new F(this),this.tableModule=new R(this),this.quickToolbarSettings.enable&&(this.quickToolbarModule=new Ve(this))},t.prototype.initialize=function(){this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this,!1);new vt(this);this.inputElement=this.getEditPanel(),this.valueContainer=this.element.querySelector("textarea"),this.readonly&&this.setReadOnly(!0),this.setContentHeight(),this.iframeSettings&&this.iframeSettings.enable&&this.setIframeSettings(),(sf.base.isNullOrUndefined(this.value)||""===this.value)&&(this.value=this.element.querySelector(".e-rte-value-wrapper").innerHTML.replace(/<!--!-->/gi,"").trim()),this.setPanelValue(this.value),this.observer.notify(e,{}),this.enableXhtml&&(this.value=this.getXhtml()),null!==this.value&&(this.defaultResetValue=this.value),this.enabled&&!this.readonly?this.wireEvents():this.unWireEvents(),this.observer.notify("tableclass",{}),this.addAudioVideoWrapper(),this.createdEnabled&&this.dotNetRef.invokeMethodAsync("CreatedEvent")},t.prototype.addAudioVideoWrapper=function(){for(var e,t=this,i=this.element.querySelectorAll("audio"),n=0;n<i.length;n++)if(i[n].classList.contains("e-rte-audio")||(i[n].classList.add("e-rte-audio"),i[n].classList.add("e-audio-inline")),!i[n].parentElement.classList.contains("e-clickelem")&&!i[n].parentElement.classList.contains("e-audio-wrap")){var s=sf.base.createElement("span",{className:"e-audio-wrap"});s.contentEditable="false";var o=sf.base.createElement("span",{className:"e-clickelem"});s.appendChild(o),i[n].parentNode.insertBefore(s,i[n].nextSibling),o.appendChild(i[n]),null===s.nextElementSibling&&(e=sf.base.createElement("br"),s.parentNode.insertBefore(e,s.nextSibling))}var r=this.element.querySelectorAll("video");for(n=0;n<r.length;n++){if(r[n].classList.contains("e-rte-video")||(r[n].classList.add("e-rte-video"),r[n].classList.add("e-video-inline")),!r[n].parentElement.classList.contains("e-clickelem")&&!r[n].parentElement.classList.contains("e-video-wrap")){var l=sf.base.createElement("span",{className:"e-video-wrap"});l.contentEditable="false",r[n].parentNode.insertBefore(l,r[n].nextSibling),l.appendChild(r[n]),null===l.nextElementSibling&&(e=sf.base.createElement("br"),l.parentNode.insertBefore(e,l.nextSibling))}-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&(r[n].addEventListener("play",(function(e){t.observer.notify(a,{args:e}),t.observer.notify("editAreaClick",{args:e})})),r[n].addEventListener("pause",(function(e){t.observer.notify(a,{args:e}),t.observer.notify("editAreaClick",{args:e})})))}},t.prototype.isUndoRedoStatus=function(){for(var e=0;e<this.toolbarSettings.items.length;e++)if(!sf.base.isNullOrUndefined(this.toolbarSettings.items[e])&&("Undo"===this.toolbarSettings.items[e].subCommand||"Redo"===this.toolbarSettings.items[e].subCommand)){this.undoRedoStatus=!0;break}},t.prototype.setPanelValue=function(e,t){e=this.serializeValue(e),"HTML"===this.editorMode&&this.enableXhtml&&(this.inputElement.innerHTML=e,this.observer.notify("xhtmlValidation",{}),e=this.inputElement.innerHTML),"HTML"!==this.editorMode||t||(e=S(sf.base.isNullOrUndefined(e)?"":e,this),this.value=this.enableXhtml?this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e):e),this.updatePanelValue(),this.value!==this.cloneValue&&(this.enableXhtml&&(this.valueContainer.value=this.getXhtmlString(this.valueContainer.value)),E(this.valueContainer,"change"),this.isInitial?this.isInitial=!1:this.dotNetRef.invokeMethodAsync("UpdateValue",this.value),this.cloneValue=this.value),this.setPlaceHolder()},t.prototype.updateContentElements=function(){"HTML"===this.editorMode&&this.iframeSettings&&this.iframeSettings.enable?(this.contentPanel=this.element.querySelector("iframe"),this.updateIframeHtmlContents()):this.contentPanel=this.element.querySelector(".e-rte-content")},t.prototype.updateIframeHtmlContents=function(){var e='\n<!DOCTYPE html> \n    <html>\n         <head>\n            <meta charset=\'utf-8\' /> \n            <style>\n                @charset "UTF-8";\n                body {\n                    font-family: "Roboto", sans-serif;\n                    font-size: 14px;\n                }\n                html, body{height: 100%;margin: 0;}\n                body.e-cursor{cursor:default}\n                span.e-selected-node\t{background-color: #939393;color: white;}\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\n                .e-rte-image, .e-rte-audio, .e-rte-video  {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\n                .e-imgleft, .e-video-left  {float: left;margin: 0 auto;margin-right: 5px;text-align: left;}\n                .e-imgright, .e-video-right {float: right;margin: 0 auto;margin-left: 5px;text-align: right;}\n                .e-imgcenter, .e-video-center {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\n                .e-imginline, .e-audio-inline, .e-video-inline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\n                .e-imgbreak, .e-audio-break, .e-video-break {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-img-focus:not(.e-resize), .e-rte-audio.e-audio-focus:not(.e-resize), .e-rte-video.e-video-focus:not(.e-resize) {border: solid 2px #4a90e2;}\n                img.e-img-focus::selection, .e-audio-focus::selection, .e-video-focus::selection { background: transparent;color: transparent;}\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\n                .e-img-caption .e-img-inner { outline: 0; }\n                .e-img-caption a:focus-visible { outline: none; }\n                .e-rte-img-caption.e-imgcenter { display: block; margin-left: auto; margin-right: auto; }\n                .e-rte-img-caption.e-imgright { display: block; margin-left: auto; margin-right: 0; }\n                .e-rte-img-caption.e-imgleft { display: block; margin-left: 0; margin-right: auto; }\n                .e-img-caption .e-rte-image.e-imgright {float: none; margin-left: auto; margin-right: 0;}\n                .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\n                .e-rte-img-caption.e-imgleft .e-img-inner {text-align: left;}\n                .e-rte-img-caption.e-imgright .e-img-inner {text-align: right;}\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\n                p{margin: 0 0 10px;margin-bottom: 10px;}\n                li{margin-bottom: 10px;}\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\n                .e-rtl blockquote {padding-left: 0;padding-right: 5px;border-left: 0;border-right: 2px solid #5c5c5c;}\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\n                strong, b{font-weight: 700;}\n                a{text-decoration: none;user-select: auto;}\n                a:hover{text-decoration: underline;};\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\n                ul:last-child{margin-bottom: 0;}\n                .e-rte-table { border-collapse: collapse; empty-cells: show;}\n                .e-rte-table td, .e-rte-table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;padding: 2px 5px; min-width: 20px;}\n                .e-rte-table.e-rte-table-border { border: 1px solid #BDBDBD; border-collapse: separate; }\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\n                table th {background-color: #E0E0E0;}\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \n                table .e-cell-select {border: 1px double #4a90e2;}\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\n                span.e-table-box.e-hide { display: none; }\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\n                .e-row-resize { cursor: row-resize; height: 1px;}\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\n                .e-table-rhelper.e-column-helper { width: 1px; }\n                .e-table-rhelper.e-row-helper {height: 1px;}\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: \'\'; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: \'\'; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\n                .e-table-rhelper { background-color: #4a90e2;}\n                .e-rtl { direction: rtl; }\n            </style>\n        </head><body spellcheck="false" autocorrect="off" contenteditable="true"></body></html>',t=this.contentPanel;t.srcdoc=e,t.contentDocument.body.id=this.id+"_rte-edit-view",t.contentDocument.body.setAttribute("aria-owns",this.id),t.contentDocument.open(),e=this.setThemeColor(e,{color:"#333"}),t.contentDocument.write(e),t.contentDocument.close(),this.enableRtl&&t.contentDocument.body.setAttribute("class","e-rtl")},t.prototype.setThemeColor=function(e,t){return e.replace(t.color,getComputedStyle(this.element,".e-richtexteditor").getPropertyValue("color"))},t.prototype.refresh=function(e){void 0===e&&(e={requestType:"refresh"}),this.observer.notify(e.requestType+"-begin",e)},t.prototype.openPasteDialog=function(){this.dotNetRef.invokeMethodAsync("PasteDialog")},t.prototype.setContentHeight=function(e,t){var i,n="",s=0,o="",r="string"==typeof this.height&&this.height.indexOf("%")>-1,a=this.element.querySelector(".e-rte-content.e-rte-srctextarea"),l=sf.base.isNullOrUndefined(a)||"block"!==a.parentElement.style.display?this.getPanel():a.parentElement,h=l.style.height;l.style.height="auto",i=this.element.offsetHeight,l.style.height=h,0!==i||"auto"===this.height||this.getToolbar()||(i=parseInt(this.height,10),r&&(o=this.height));var d=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,c=this.element.querySelector(".e-resize-handle"),p=this.enableResize?sf.base.isNullOrUndefined(c)?0:c.offsetHeight+8:0,u=this.getToolbar()&&this.getToolbar().classList.contains("e-expand-open")?this.toolbarModule.getExpandTBarPopHeight():0;if("Expand"===this.toolbarSettings.type&&t&&"preview"!==e?(n="auto"!==this.height||0!==p||this.element.classList.contains("e-rte-full-screen")?i-(d+u+p)+"px":"auto",s=this.toolbarSettings.enableFloating?0:u):n="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")||this.isResizeInitialized?r&&o?o:(this.element.classList.contains("e-rte-full-screen")?window.innerHeight:i)-(d+u+p)+"px":"auto","windowResize"!==e&&sf.base.setStyleAttribute(l,{height:n,marginTop:s+"px"}),this.iframeSettings.enable&&"sourceCode"===e){var f=sf.base.select(".e-rte-content",this.element);sf.base.setStyleAttribute(f,{height:n,marginTop:s+"px"})}if(this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable){var g=(!sf.base.isNullOrUndefined(this.element.querySelector(".e-rte-toolbar .e-hor-nav.e-nav-active"))?d+this.toolbarModule.getExpandTBarPopHeight():d)+"px";sf.base.setStyleAttribute(this.getToolbar().parentElement,{height:g})}0===p&&this.autoResize()},t.prototype.getXhtml=function(){var e=this.removeResizeElement(this.value);return this.enableXhtml&&(e=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)),e},t.prototype.removeResizeElement=function(e){var t=document.createElement("div");t.innerHTML=e;var i=t.querySelectorAll(".e-column-resize, .e-row-resize, .e-table-box, .e-table-rhelper, .e-img-resize");if(i.length>0)for(var n=0;n<i.length;n++)sf.base.detach(i[n]);return t.innerHTML},t.prototype.getXhtmlString=function(e){return this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)},t.prototype.getPanel=function(){return this.contentPanel},t.prototype.saveSelection=function(){this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument())},t.prototype.restoreSelection=function(){this.formatter.editorManager.nodeSelection.restore()},t.prototype.getEditPanel=function(){return this.iframeSettings&&this.iframeSettings.enable?sf.base.isNullOrUndefined(this.contentPanel.contentDocument)?this.inputElement:this.contentPanel.contentDocument.body:this.element.querySelector(".e-rte-content .e-content")},t.prototype.getText=function(){return this.getEditPanel().innerText},t.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.getDocument())},t.prototype.updateValueContainer=function(e){this.enableXhtml&&!sf.base.isNullOrUndefined(e)&&(e=this.getXhtmlString(e)),this.valueContainer.value=e,this.value!==this.cloneValue&&E(this.valueContainer,"change")},t.prototype.getInputInnerHtml=function(){return this.inputElement.innerHTML.replace(/<!--!-->/gi,"")},t.prototype.refreshUI=function(){this.refresh()},t.prototype.getUpdatedValue=function(){var e;sf.base.isNullOrUndefined(this.tableModule)||this.tableModule.removeResizeEle();var t=this.element.querySelector(".e-rte-srctextarea");if("HTML"===this.editorMode){var i=this.getInputInnerHtml();e=i===x(this)?null:this.enableHtmlEncode?this.encode(O(i)):i,t&&"block"===t.style.display&&(e=t.value)}else e=""===this.inputElement.value?null:this.inputElement.value;return e},t.prototype.updateEnable=function(){this.enabled?(sf.base.removeClass([this.element],"e-disabled"),this.element.setAttribute("aria-disabled","false"),sf.base.isNullOrUndefined(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(this.getToolbar()&&(sf.base.removeClass(this.getToolbar().querySelectorAll(".e-active"),"e-active"),sf.base.removeClass([this.getToolbar()],["e-rte-tb-float","e-rte-tb-abs-float"])),sf.base.addClass([this.element],"e-disabled"),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.wireEvents():this.unWireEvents()},t.prototype.executeCommand=function(e,t,i){if(t=this.htmlPurifier(e,t),"HTML"===this.editorMode){var n=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(!(!this.iframeSettings.enable||n.startContainer!==this.inputElement)||!this.inputElement.contains(n.startContainer))&&this.focusIn()}var s=y[e];i&&i.undo&&i.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),this.formatter.editorManager.execCommand(s.command,s.subCommand?s.subCommand:t||s.value,null,null,t||s.value,t||s.value),i&&i.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.observer.notify("content-changed",{}),this.value=this.inputElement.innerHTML,this.dotNetRef.invokeMethodAsync("UpdateValue",this.value)},t.prototype.htmlPurifier=function(e,t){if("HTML"===this.editorMode)switch(e){case"insertTable":sf.base.isNullOrUndefined(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width}),t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument());break;case"insertImage":var i=sf.base.createElement("img",{attrs:{src:t.url}}).outerHTML,n=""!==i&&sf.base.createElement("div",{innerHTML:i}).firstElementChild.getAttribute("src")||null;n=sf.base.isNullOrUndefined(n)?"":n,t.url=n,sf.base.isNullOrUndefined(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),sf.base.isNullOrUndefined(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height}),t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument());break;case"createLink":var s=sf.base.createElement("a",{attrs:{href:t.url}}).outerHTML,o=""!==s&&sf.base.createElement("div",{innerHTML:s}).firstElementChild.getAttribute("href")||null;o=sf.base.isNullOrUndefined(o)?"":o,t.url=o,t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument())}return t},t.prototype.serializeValue=function(e){return"HTML"!==this.editorMode||sf.base.isNullOrUndefined(e)||(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(O(e)),e=this.encode(e)):e=this.htmlEditorModule.sanitizeHelper(e)),e},t.prototype.selectAll=function(){this.observer.notify("selectAll",{})},t.prototype.selectRange=function(e){this.observer.notify("selectRange",{range:e})},t.prototype.showFullScreen=function(){this.fullScreenModule.showFullScreen()},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.clipboardAction=function(e,t){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:t});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:t});break;case"paste":this.onPaste(t)}},t.prototype.getContent=function(){return this.iframeSettings.enable?this.inputElement:this.getPanel()},t.prototype.getSelectedHtml=function(){var e=sf.base.createElement("div"),t=this.getDocument().getSelection();if(t.rangeCount>0){var i=t.getRangeAt(0).cloneContents();e.appendChild(i)}return e.innerHTML},t.prototype.getSelection=function(){var e="";return this.observer.notify("getSelectedHtml",{callBack:function(t){e=t}}),e},t.prototype.showInlineToolbar=function(){if(this.inlineMode.enable){var e=this.getRange();sf.base.isNullOrUndefined(sf.base.closest(e.startContainer.parentNode,".e-content"))&&(this.inputElement.focus(),e=this.getRange());var t="#text"===e.endContainer.nodeName?e.endContainer.parentElement:e.endContainer,i=e.getClientRects()[0].left,n=e.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(i,n,t)}},t.prototype.hideInlineToolbar=function(){this.quickToolbarModule.hideInlineQTBar()},t.prototype.updateValueData=function(){if(this.enableHtmlEncode)this.setPanelValue(this.encode(O(this.inputElement.innerHTML)));else{var e=/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:O(this.inputElement.innerHTML);this.setPanelValue(e)}},t.prototype.removeSheets=function(e){var t;for(t=0;t<e.length;t++)sf.base.detach(e[t])},t.prototype.updateReadOnly=function(){this.observer.notify("readOnlyMode",{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?this.unBindEvents():this.enabled&&this.bindEvents())},t.prototype.setIframeSettings=function(){if(this.iframeSettings.resources){var e=this.iframeSettings.resources.styles,t=this.iframeSettings.resources.scripts;this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,e),this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,t)}this.iframeSettings.attributes&&function(e,t,i,n){var s;if(s=i?t.getDocument().querySelector("body"):t.element,Object.keys(e).length)for(var o=0,r=Object.keys(e);o<r.length;o++){var a=r[o];if("class"===a)s.classList.add(e[a]);else if("disabled"===a&&"disabled"===e[a])t.enabled=!1,t.setEnable();else if("readonly"===a&&"readonly"===e[a])t.readonly=!0,t.setReadOnly(n);else if("style"===a)s.setAttribute("style",e[a]);else if("tabindex"===a)t.inputElement.setAttribute("tabindex",e[a]);else if("placeholder"===a)t.placeholder=e[a],t.setPlaceHolder();else{["name","required"].indexOf(a)>-1?t.valueContainer.setAttribute(a,e[a]):s.setAttribute(a,e[a])}}}(this.iframeSettings.attributes,this,!0,!1),this.iframeSettings.enable&&this.enableRtl?this.inputElement.setAttribute("class","e-rtl"):this.iframeSettings.enable&&!this.enableRtl&&this.inputElement.hasAttribute("class")&&this.inputElement.classList.contains("e-rtl")&&this.inputElement.classList.remove("e-rtl")},t.prototype.InjectSheet=function(e,t){try{if(t&&t.length>0)for(var i=this.getDocument().querySelector("head"),n=0;n<t.length;n++)if(e){var s=this.createScriptElement();s.src=t[n],i.appendChild(s)}else{var o=this.createStyleElement();o.href=t[n],i.appendChild(o)}}catch(e){return}},t.prototype.createScriptElement=function(){var e=sf.base.createElement("script",{className:"rte-iframe-script-sheet"});return e.type="text/javascript",e},t.prototype.createStyleElement=function(){var e=sf.base.createElement("link",{className:"rte-iframe-style-sheet"});return e.rel="stylesheet",e},t.prototype.updateResizeFlag=function(){this.isResizeInitialized=!0},t.prototype.getHtml=function(){return this.serializeValue(this.getEditPanel().innerHTML)},t.prototype.showSourceCode=function(){this.readonly||this.observer.notify("sourceCode",{})},t.prototype.getCharCount=function(){var e="Markdown"===this.editorMode?this.getEditPanel().value.trim():this.getEditPanel().textContent.trim();return"Markdown"!==this.editorMode&&-1!==e.indexOf("​")?e.replace(/\u200B/g,"").length:e.length},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.getToolbar=function(){return this.toolbarSettings.enable?this.element.querySelector("#"+this.id+"_toolbar"):null},t.prototype.getToolbarElement=function(){return this.toolbarSettings.enable?this.element.querySelector("#"+this.id+"_toolbar"):null},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.updateValueOnIdle=function(){(sf.base.isNullOrUndefined(this.tableModule)||sf.base.isNullOrUndefined(this.inputElement.querySelector(".e-table-box.e-rbox-select")))&&(this.value=this.getUpdatedValue(),this.updateValueContainer(this.value),this.invokeChangeEvent())},t.prototype.invokeChangeEvent=function(){this.enableXhtml&&!sf.base.isNullOrUndefined(this.value)&&(this.value=this.getXhtml()),this.value!==this.cloneValue&&(this.enablePersistence&&window.localStorage.setItem(this.id,this.value),this.dotNetRef.invokeMethodAsync("ChangeEvent"),this.cloneValue=this.value)},t.prototype.preventImgResize=function(e){"img"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()},t.prototype.defaultResize=function(e,t){if("msie"===sf.base.Browser.info.name)t?this.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):this.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize);else if("mozilla"===sf.base.Browser.info.name){var i=t?"true":"false";this.getDocument().execCommand("enableObjectResizing",t,i),this.getDocument().execCommand("enableInlineTableEditing",t,i)}},t.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e.trim(),t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},t.prototype.print=function(){var e,t=this;this.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"print",cancel:!1}).then((function(i){if(e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===sf.base.Browser.info.name&&e.resizeTo(screen.availWidth,screen.availHeight),e=sf.base.print(t.inputElement,e),!i.cancel){t.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"print"})}}))},t.prototype.autoResize=function(){var e=this;if("auto"===this.height){if("Markdown"===this.editorMode)setTimeout((function(){e.setAutoHeight(e.inputElement)}),0);else if(this.iframeSettings.enable){var t=this.element.querySelector("#"+this.element.id+"_rte-view");setTimeout((function(){e.setAutoHeight(t)}),100),this.inputElement.style.overflow="hidden"}}else this.inputElement.style.overflow=null},t.prototype.setAutoHeight=function(e){sf.base.isNullOrUndefined(e)||(e.style.height=this.inputElement.scrollHeight+"px",e.style.overflow="hidden")},t.prototype.restrict=function(e){if(this.maxLength>=0){for(var t="Markdown"===this.editorMode?this.getText():e.currentTarget.textContent,i=[8,16,17,37,38,39,40,46,65],n=void 0,s=0;s<=i.length-1;s++)if(e.which===i[s]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(n=i[s])}t.length>=this.maxLength&&-1!==this.maxLength&&e.which!==n&&e.preventDefault()}},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderContainer||(this.placeHolderContainer=this.element.querySelector(".e-rte-placeholder")),this.placeHolderContainer.innerHTML=this.placeholder,!(0===this.inputElement.textContent.length&&this.inputElement.childNodes.length<2)||sf.base.isNullOrUndefined(this.inputElement.firstChild)||"BR"!==this.inputElement.firstChild.nodeName&&("P"!==this.inputElement.firstChild.nodeName&&"DIV"!==this.inputElement.firstChild.nodeName||sf.base.isNullOrUndefined(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName)?this.placeHolderContainer.style.display="none":this.placeHolderContainer.style.display="block"):this.inputElement.setAttribute("placeholder",this.placeholder))},t.prototype.updatePanelValue=function(){var e=this.value;e=this.enableHtmlEncode&&this.value?O(e):e;var t=this.element.querySelector(".e-rte-srctextarea");e?(t&&"block"===t.style.display&&(t.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.replace("&amp;","&").trim()!==e.trim()?this.inputElement.innerHTML=e:"Markdown"===this.editorMode&&this.inputElement&&this.inputElement.value.trim()!==e.trim()&&(this.inputElement.value=e)):(t&&"block"===t.style.display&&(t.value=""),"HTML"===this.editorMode?this.inputElement.innerHTML=x(this):this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule&&this.countModule.refresh()},t.prototype.contentChanged=function(){this.autoSaveOnIdle&&(sf.base.isNullOrUndefined(this.saveInterval)||(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))},t.prototype.notifyMouseUp=function(e){var t=e.touches?e.changedTouches[0]:e;this.observer.notify("mouseUp",{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}}),this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)&&this.observer.notify("toolbar-refresh",{args:e}),this.triggerEditArea(e)},t.prototype.triggerEditArea=function(e){if(sf.base.Browser.isDevice&&sf.base.Browser.isIos){var t=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.observer.notify("editAreaClick",{member:"editAreaClick",args:e})}else this.observer.notify("editAreaClick",{member:"editAreaClick",args:e})},t.prototype.updateStatus=function(e){if(!sf.base.isNullOrUndefined(e.html)||!sf.base.isNullOrUndefined(e.markdown)){var t=this.formatter.editorManager.undoRedoManager.getUndoStatus();this.dotNetRef.invokeMethodAsync("UpdatedToolbarStatusEvent",{undo:t.undo,redo:t.redo,html:e.html,markdown:e.markdown})}},t.prototype.onListDropDownButtonClick=function(e){sf.base.isNullOrUndefined(e)||(e.item.subCommand="BulletFormatList"===e.item.subCommand?"UL":"OL",this.inlineCloseItems.indexOf(e.item.subCommand)>-1&&this.quickToolbarModule.hideInlineQTBar(),"HTML"===this.editorMode&&this.observer.notify("html-toolbar-click",e))},t.prototype.toolbarItemClick=function(e,t,i){var n;sf.base.isNullOrUndefined(e)||(n="Root"!==i||this.inlineMode.enable?sf.base.select("#"+t,document.body):sf.base.select("#"+t,this.element),e.originalEvent=bt({},e.originalEvent,{target:n}),this.inlineCloseItems.indexOf(e.item.subCommand)>-1&&this.quickToolbarModule.hideInlineQTBar(),"HTML"===this.editorMode?this.observer.notify("html-toolbar-click",e):this.observer.notify("markdown-toolbar-click",e))},t.prototype.toolbarClick=function(e){var t=sf.base.select("#"+e+" .e-hor-nav",this.element);t&&"Expand"===this.toolbarSettings.type&&!sf.base.isNullOrUndefined(t)?t.classList.contains("e-nav-active")?(sf.base.addClass([this.getToolbar()],["e-expand-open"]),this.setContentHeight("toolbar",!0)):(sf.base.removeClass([this.getToolbar()],["e-expand-open"]),this.setContentHeight("toolbar",!1)):sf.base.Browser.isDevice||this.inlineMode.enable,sf.base.isNullOrUndefined(t)&&"Expand"===this.toolbarSettings.type&&sf.base.removeClass([this.getToolbar()],["e-expand-open"])},t.prototype.hideTableQuickToolbar=function(){this.quickToolbarModule.hideTableQTBar()},t.prototype.dropDownBeforeOpen=function(e){this.observer.notify(o,e),this.observer.notify("beforeDropDownOpen",e)},t.prototype.dropDownAfterOpen=function(e){if("Merge cells"===e.element.querySelector("li").innerHTML){var t=e.element.querySelectorAll("li");1===this.inputElement.querySelectorAll(".e-cell-select").length?(sf.base.addClass([t[0]],"e-disabled"),sf.base.removeClass([t[1],t[2]],"e-disabled")):this.inputElement.querySelectorAll(".e-cell-select").length>1&&(sf.base.removeClass([t[0]],"e-disabled"),sf.base.addClass([t[1],t[2]],"e-disabled"))}},t.prototype.dropDownClose=function(e){this.observer.notify(r,e)},t.prototype.dropDownSelect=function(e){if(e.name="dropDownSelect",!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||!e.item||"Images"!==e.item.command&&"Audios"!==e.item.command&&"Videos"!==e.item.command&&"Display"!==e.item.command&&"Table"!==e.item.command){this.observer.notify(r,{});if("Lists"===e.item.command){var t={listStyle:e.item.value,listImage:e.item.listImage,type:e.item.subCommand};this.formatter.process(this,e,e.originalEvent,t)}else this.formatter.process(this,e,e.originalEvent,null);this.observer.notify(o,{})}this.observer.notify("dropDownSelect",e)},t.prototype.colorDropDownBeforeOpen=function(){this.observer.notify(o,{})},t.prototype.colorIconSelected=function(e,t,i){this.observer.notify(o,{}),this.observer.notify(r,{}),e.value=sf.base.isNullOrUndefined(t)?e.value:t;var n=this.formatter.editorManager.nodeSelection.getRange(this.getDocument()),s=n.startContainer.parentNode;("TD"===n.startContainer.nodeName||"TH"===n.startContainer.nodeName||sf.base.closest(n.startContainer.parentNode,"td,th")||this.iframeSettings.enable&&!I(s.ownerDocument.querySelector("body"),"e-lib"))&&n.collapsed&&"BackgroundColor"===e.subCommand&&"quick"===i?this.observer.notify("tableColorPickerChanged",{item:e,name:"colorPickerChanged"}):(this.observer.notify(r,{}),this.formatter.process(this,{item:e,name:"colorPickerChanged"},void 0,null),this.observer.notify(o,{}))},t.prototype.colorChanged=function(e,t,i){this.observer.notify(r,{}),e.value=sf.base.isNullOrUndefined(t)?e.value:t;var n=this.formatter.editorManager.nodeSelection.getRange(this.getDocument());("TD"===n.startContainer.nodeName||"TH"===n.startContainer.nodeName||sf.base.closest(n.startContainer.parentNode,"td,th"))&&n.collapsed&&"BackgroundColor"===e.subCommand&&"quick"===i?this.observer.notify("tableColorPickerChanged",{item:e,name:"colorPickerChanged"}):(this.observer.notify(r,{}),this.formatter.process(this,{item:e,name:"colorPickerChanged"},void 0,null),this.observer.notify(o,{}))},t.prototype.changeTooltipText=function(e){switch(document.querySelector("#"+e).getAttribute("sf-tooltip")){case"Minimize":document.querySelector("#"+e).setAttribute("sf-tooltip","Minimize (Esc)");break;case"Maximize":document.querySelector("#"+e).setAttribute("sf-tooltip","Maximize (Ctrl+Shift+F)");break;case"Insert Hyperlink (Ctrl+K)":document.querySelector("#"+e).setAttribute("sf-tooltip","Insert link (Ctrl+K)")}},t.prototype.cancelLinkDialog=function(){this.isBlur=!1,this.linkModule.cancelDialog()},t.prototype.cancelImageDialog=function(){this.isBlur=!1},t.prototype.cancelAudioDialog=function(){this.isBlur=!1},t.prototype.cancelVideoDialog=function(){this.isBlur=!1},t.prototype.linkDialogClosed=function(){this.isBlur=!1,this.linkModule.linkDialogClosed()},t.prototype.dialogClosed=function(e){this.isBlur=!1,"restore"===e&&this.observer.notify(r,{})},t.prototype.insertLink=function(e){this.linkModule.insertLink(e)},t.prototype.imageRemoving=function(){this.imageModule.removing()},t.prototype.uploadSuccess=function(e,t){this.imageModule.imageUploadSuccess(e,t)},t.prototype.imageSelected=function(){this.imageModule.imageSelected()},t.prototype.imageUploadComplete=function(e,t){this.imageModule.imageUploadComplete(e,t)},t.prototype.imageUploadChange=function(e,t){this.imageModule.imageUploadChange(e,t)},t.prototype.audioRemoving=function(){this.audioModule.fileRemoving()},t.prototype.audioUploadSuccess=function(e,t){this.audioModule.fileUploadSuccess(e,t)},t.prototype.audioSelected=function(){this.audioModule.fileSelected()},t.prototype.audioUploadComplete=function(e,t){this.audioModule.fileUploadComplete(e,t)},t.prototype.audioUploadChange=function(e,t){this.audioModule.fileUploadChange(e,t)},t.prototype.videoRemoving=function(){this.videoModule.fileRemoving()},t.prototype.videoUploadSuccess=function(e,t){this.videoModule.fileUploadSuccess(e,t)},t.prototype.videoSelected=function(){this.videoModule.fileSelected()},t.prototype.videoUploadComplete=function(e,t){this.videoModule.fileUploadComplete(e,t)},t.prototype.videoUploadChange=function(e,t){this.videoModule.fileUploadChange(e,t)},t.prototype.dropUploadChange=function(e,t){this.imageModule.dropUploadChange(e,t)},t.prototype.insertImage=function(){this.imageModule.insertImageUrl()},t.prototype.imageDialogOpened=function(){this.imageModule.dialogOpened()},t.prototype.imageDialogClosed=function(){this.isBlur=!1,this.imageModule.dialogClosed()},t.prototype.insertAudio=function(){this.audioModule.insertAudioUrl()},t.prototype.audioDialogOpened=function(){this.audioModule.dialogOpened()},t.prototype.audioDialogClosed=function(){this.isBlur=!1,this.audioModule.dialogClosed()},t.prototype.insertVideo=function(){this.videoModule.insertVideoUrl()},t.prototype.videoDialogOpened=function(){this.videoModule.dialogOpened()},t.prototype.videoDialogClosed=function(){this.isBlur=!1,this.videoModule.dialogClosed()},t.prototype.insertTable=function(e,t){this.tableModule.customTable(e,t)},t.prototype.applyTableProperties=function(e){this.tableModule.applyTableProperties(e)},t.prototype.createTablePopupOpened=function(){this.tableModule.createTablePopupOpened()},t.prototype.pasteContent=function(e){this.pasteCleanupModule.selectFormatting(e)},t.prototype.updatePasteContent=function(e){this.observer.notify("afterPasteCleanUp",{text:e})},t.prototype.imageDropInitialized=function(e){this.imageModule.imageDropInitialized(e)},t.prototype.preventEditable=function(){this.inputElement.contentEditable="false"},t.prototype.enableEditable=function(){this.inputElement.contentEditable="true"},t.prototype.removeDroppedImage=function(){this.imageModule.removeDroppedImage()},t.prototype.dropUploadSuccess=function(e,t){this.imageModule.dropUploadSuccess(e,t)},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.insertAlt=function(e){this.imageModule.insertAlt(e)},t.prototype.insertSize=function(e,t){this.imageModule.insertSize(e,t)},t.prototype.insertVideoSize=function(e,t){this.videoModule.insertVideoSize(e,t)},t.prototype.insertImageLink=function(e,t,i){this.imageModule.insertLink(e,t,i)},t.prototype.showLinkDialog=function(){this.linkModule.showDialog(!0)},t.prototype.showImageDialog=function(){this.imageModule.showDialog(!0)},t.prototype.showAudioDialog=function(){this.audioModule.showDialog(!0)},t.prototype.showVideoDialog=function(){this.videoModule.showDialog(!0)},t.prototype.showTableDialog=function(){this.tableModule.showDialog(!0)},t.prototype.destroy=function(){this.unWireEvents()},t.prototype.wireEvents=function(){this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.observer.on("content-changed",this.contentChanged,this),this.observer.on("model-changed",this.refresh,this),this.wireResizeEvents(),this.observer.on("updateTbItemsStatus",this.updateStatus,this),this.readonly&&this.enabled||this.bindEvents()},t.prototype.wireResizeEvents=function(){this.enableResize&&this.observer.on("resizeInitialized",this.updateResizeFlag,this)},t.prototype.bindEvents=function(){this.keyboardModule=new Ye(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:bt({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var e=sf.base.closest(this.valueContainer,"form");e&&sf.base.EventHandler.add(e,"reset",this.resetHandler,this),sf.base.EventHandler.add(this.inputElement,"keyup",this.keyUp,this),sf.base.EventHandler.add(this.inputElement,"paste",this.onPaste,this),sf.base.EventHandler.add(this.inputElement,"UpdateEditorValue",this.updateEditorValue,this),sf.base.EventHandler.add(this.inputElement,sf.base.Browser.touchEndEvent,sf.base.debounce(this.mouseUp,30),this),sf.base.EventHandler.add(this.inputElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on("keydown-handler",this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(sf.base.EventHandler.add(this.inputElement,"focusin",this.focusHandler,this),sf.base.EventHandler.add(this.inputElement,"focusout",this.blurHandler,this),sf.base.EventHandler.add(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler,this),sf.base.EventHandler.add(this.inputElement.ownerDocument,sf.base.Browser.touchStartEvent,this.onIframeMouseDown,this)),this.wireScrollElementsEvents()},t.prototype.wireContextEvent=function(){this.quickToolbarSettings.showOnRightClick&&(sf.base.EventHandler.add(this.inputElement,"contextmenu",this.contextHandler,this),sf.base.Browser.isDevice&&(this.touchModule=new sf.base.Touch(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=sf.popups.getScrollableParent(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];sf.base.EventHandler.add(i,"scroll",this.scrollHandler,this)}this.iframeSettings.enable||sf.base.EventHandler.add(this.getPanel(),"scroll",this.contentScrollHandler,this)},t.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.observer.off("content-changed",this.contentChanged),this.unWireResizeEvents(),this.observer.off("updateTbItemsStatus",this.updateStatus),this.unBindEvents()},t.prototype.unWireResizeEvents=function(){this.observer.off("resizeInitialized",this.updateResizeFlag)},t.prototype.unBindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var e=sf.base.closest(this.valueContainer,"form");e&&sf.base.EventHandler.remove(e,"reset",this.resetHandler),sf.base.EventHandler.remove(this.inputElement,"keyup",this.keyUp),sf.base.EventHandler.remove(this.inputElement,"paste",this.onPaste),sf.base.EventHandler.remove(this.inputElement,"UpdateEditorValue",this.updateEditorValue),sf.base.EventHandler.remove(this.inputElement,sf.base.Browser.touchEndEvent,sf.base.debounce(this.mouseUp,30)),sf.base.EventHandler.remove(this.inputElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off("keydown-handler",this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(sf.base.EventHandler.remove(this.inputElement,"focusin",this.focusHandler),sf.base.EventHandler.remove(this.inputElement,"focusout",this.blurHandler),sf.base.EventHandler.remove(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler),sf.base.EventHandler.remove(this.inputElement.ownerDocument,sf.base.Browser.touchStartEvent,this.onIframeMouseDown)),this.unWireScrollElementsEvents()},t.prototype.unWireContextEvent=function(){sf.base.EventHandler.remove(this.inputElement,"contextmenu",this.contextHandler),sf.base.Browser.isDevice&&this.touchModule&&this.touchModule.destroy()},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=sf.popups.getScrollableParent(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",this.scrollHandler)}this.iframeSettings.enable||sf.base.EventHandler.remove(this.getPanel(),"scroll",this.contentScrollHandler)},t.prototype.focusHandler=function(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,sf.base.addClass([this.element],["e-focused"]),"HTML"===this.editorMode?this.cloneValue=this.inputElement.innerHTML===x(this)?null:this.enableHtmlEncode?this.encode(O(this.inputElement.innerHTML)):this.inputElement.innerHTML:this.cloneValue=""===this.inputElement.value?null:this.inputElement.value;var t=document.activeElement;if((t===this.element||t===this.getToolbarElement()||t===this.getEditPanel()||this.iframeSettings.enable&&t===this.getPanel()&&e.target&&!e.target.classList.contains("e-img-inner")&&e.target&&e.target.parentElement&&!e.target.parentElement.classList.contains("e-img-wrap")||sf.base.closest(t,".e-rte-toolbar")===this.getToolbarElement())&&(this.getEditPanel().focus(),!sf.base.isNullOrUndefined(this.getToolbarElement()))){this.getToolbarElement().setAttribute("tabindex","-1");for(var i=this.getToolbarElement().querySelectorAll('[tabindex="0"]'),n=0;n<i.length;n++)i[n].setAttribute("tabindex","-1")}this.defaultResize(e,!1);var s={isInteracted:0!==Object.keys(e).length};this.focusEnabled&&this.dotNetRef.invokeMethodAsync("FocusEvent",s),!sf.base.isNullOrUndefined(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval)),sf.base.EventHandler.add(document,"mousedown",this.onDocumentClick,this)}if(!this.readonly){var o=this.getCurrentFocus(e);"editArea"!==o&&"textArea"!==o&&"sourceCode"!==o||this.resetToolbarTabIndex()}},t.prototype.blurHandler=function(e){var t=e.relatedTarget;if(t){var i=sf.base.closest(t,".e-richtexteditor");i&&i===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute("tabindex","-1")):sf.base.closest(t,'[aria-owns="'+this.element.id+'"]')||!sf.base.isNullOrUndefined(sf.base.closest(t,".e-rte-elements"))?this.isBlur=!1:(this.isBlur=!0,t=null)}else this.isIframeRteElement||(this.isBlur=!0,this.isIframeRteElement=!0);if(this.isBlur&&sf.base.isNullOrUndefined(t)){sf.base.removeClass([this.element],["e-focused"]),this.observer.notify("focusChange",{}),this.value=this.getUpdatedValue(),this.updateValueContainer(this.value),this.observer.notify("toolbar-refresh",{args:e,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,this.enableXhtml&&(this.valueContainer.value=this.getXhtmlString(this.valueContainer.value)),E(this.valueContainer,"focusout"),this.defaultResize(e,!0);var n={isInteracted:0!==Object.keys(e).length};this.blurEnabled&&this.dotNetRef.invokeMethodAsync("BlurEvent",n),sf.base.isNullOrUndefined(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0;this.readonly||"outside"!==this.getCurrentFocus(e)||this.resetToolbarTabIndex()},t.prototype.resizeHandler=function(e){var t=!1;if(document.body.contains(this.element)){if(this.toolbarSettings.enable&&!this.inlineMode.enable){e||this.dotNetRef.invokeMethodAsync("RefreshToolbarOverflow");var i=this.element.querySelector(".e-rte-toolbar");t=i&&i.classList.contains("e-expand-open")}this.setContentHeight("windowResize",t),this.observer.notify("resize",null)}},t.prototype.touchHandler=function(e){this.notifyMouseUp(e.originalEvent),this.triggerEditArea(e.originalEvent)},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim().replace(/<!--!-->/gi,"");this.value=""===e?null:this.defaultResetValue,this.setPanelValue(this.value,!0)},t.prototype.contextHandler=function(e){var t=sf.base.closest(e.target,"a, table, img");!1!==this.inlineMode.onSelection&&(sf.base.isNullOrUndefined(t)||!this.inputElement.contains(t)||"IMG"!==t.tagName&&"TABLE"!==t.tagName&&"A"!==t.tagName)||e.preventDefault()},t.prototype.scrollHandler=function(e){this.observer.notify("scroll",{args:e})},t.prototype.contentScrollHandler=function(e){this.observer.notify("contentscroll",{args:e})},t.prototype.mouseUp=function(e){if(this.quickToolbarSettings.showOnRightClick&&sf.base.Browser.isDevice){var t=e.target,i=sf.base.closest(t,"table");if(t&&"A"===t.nodeName||"IMG"===t.nodeName||"TD"===t.nodeName||"TH"===t.nodeName||"TABLE"===t.nodeName||i&&this.getEditPanel().contains(i))return}if(3===e.detail){var n=this.getRange();if(this.formatter.editorManager.domNode.getSelection().rangeCount>0&&!sf.base.isNullOrUndefined(n.startContainer.parentElement)&&(!sf.base.isNullOrUndefined(n.startContainer.parentElement.nextSibling)&&(3!==n.startContainer.parentElement.nextSibling.nodeType||/\s+$/.test(n.startContainer.parentElement.nextSibling.textContent))||n.startOffset===n.endOffset)||"li"===n.startContainer.parentElement.tagName.toLocaleLowerCase()){var s=new Range,o=n.startContainer,r=n.endContainer,a=!1,l="OL"===n.commonAncestorContainer.nodeName||"UL"===n.commonAncestorContainer.nodeName||"LI"===n.commonAncestorContainer.nodeName;for(l||1!==r.nodeType||"LI"!==r.nodeName?l&&1===r.nodeType&&0===n.endOffset?r.previousElementSibling&&r.previousElementSibling.lastElementChild?r=r.previousElementSibling.lastElementChild:(r=sf.base.closest(r.parentElement,"li"))&&"LI"===r.nodeName&&(r=r.previousElementSibling):!sf.base.closest(r,"li")&&r.previousElementSibling&&r.previousElementSibling.lastChild&&r.previousElementSibling.textContent.trim().length>0?r=r.previousElementSibling.lastChild:sf.base.closest(r,"li")&&r.previousElementSibling&&r.previousElementSibling.lastChild&&(r=sf.base.closest(r,"li").parentElement.previousElementSibling.lastChild):r=sf.base.closest(r,"ol, ul").previousElementSibling.lastElementChild,r&&r!==this.inputElement||(r=o,a=!0);"#text"!==r.nodeName&&!a;)r=r.lastElementChild?r.lastElementChild:r.lastChild;s.setStart(o,0),s.setEnd(r,r.textContent.length),this.formatter.editorManager.nodeSelection.setRange(this.getDocument(),s)}}this.notifyMouseUp(e)},t.prototype.mouseDownHandler=function(e){var t=e.touches?e.changedTouches[0]:e;sf.base.addClass([this.element],["e-focused"]),this.defaultResize(e,!1),this.observer.notify(a,{args:e}),this.clickPoints={clientX:t.clientX,clientY:t.clientY}},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.observer.notify("iframe-click",e)},t.prototype.cleanList=function(e){var t=this.getRange(),i=t.startContainer,n=t.endContainer,s=t.startOffset,o=i===n,r="#text"===t.endContainer.nodeName?t.endContainer.parentElement:t.endContainer,a=sf.base.closest(r,"LI"),l=!0;if(sf.base.isNullOrUndefined(a)||(l=sf.base.isNullOrUndefined(a.querySelector("#"+this.id))),!sf.base.isNullOrUndefined(a)&&r.textContent.length===t.endOffset&&!t.collapsed&&sf.base.isNullOrUndefined(r.nextElementSibling)&&l){a.textContent=a.textContent.trim(),a.textContent.length-1;for(var h=a;"#text"!==h.nodeName;)h=h.lastChild;this.formatter.editorManager.nodeSelection.setSelectionText(this.getDocument(),o?h:i,h,s,h.textContent.length)}},t.prototype.keyDown=function(e){if(this.observer.notify(s,{member:"keydown",args:e}),this.restrict(e),"HTML"===this.editorMode&&this.cleanList(e),this.iframeSettings.enable&&!this.enableTabKey&&9===e.which&&"Tab"===e.code&&"BODY"===e.target.nodeName&&(this.isIframeRteElement=!1),"HTML"===this.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){var t=this.getRange(),i="#text"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer;if(sf.base.closest(i,"pre")&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset)){var n=new RegExp(String.fromCharCode(8203),"g"),o=8===e.which?t.startOffset-1:t.startOffset;t.startContainer.textContent=t.startContainer.textContent.replace(n,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),t.startContainer,o)}else if("Backspace"===e.code&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(0)&&t.collapsed){var r=t.startContainer.parentElement,a=void 0,l=void 0;for(l=0;l<r.childNodes.length;l++)r.childNodes[l]===t.startContainer&&(a=l);var h=!0,d=[];for(l=a;l>=0;l--)3===r.childNodes[l].nodeType&&8203===r.childNodes[l].textContent.charCodeAt(0)&&h?d.push(l):h=!1;if(d.length>0)for(l=d.length-1;l>0;l--)r.childNodes[d[l]].textContent="";this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),t.startContainer,t.startOffset)}}if(0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),"insert-link"!==e.action&&(!e.target||!e.target.classList.contains("e-mention"))&&(e.action&&"paste"!==e.action&&"space"!==e.action||9===e.which||"Backspace"===e.code&&8===e.which)||"undo"==e.action||"redo"==e.action)switch(this.formatter.process(this,null,e),e.action){case"toolbar-focus":if(this.toolbarSettings.enable&&this.getToolbarElement()){var c=this.getToolbarElement().querySelector(".e-toolbar-item:not(.e-overlay)[title]");c.firstElementChild.removeAttribute("tabindex"),c.firstElementChild.focus()}break;case"escape":this.getEditPanel().focus()}sf.base.isNullOrUndefined(this.placeholder)||(sf.base.isNullOrUndefined(this.placeHolderContainer)||1===this.inputElement.textContent.length?this.setPlaceHolder():this.placeHolderContainer.style.display="none"),this.autoResize()},t.prototype.editorKeyDown=function(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut()}!e.callBack||"copy"!==e.event.action&&"cut"!==e.event.action&&"delete"!==e.event.action||e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})},t.prototype.keyUp=function(e){if("HTML"===this.editorMode){switch(e.which){case 46:case 8:var t=this.getEditPanel().childNodes;if(0===t.length||1===t.length&&("BR"===t[0].tagName||("P"===t[0].tagName||"DIV"===t[0].tagName)&&(0===t[0].childNodes.length||""===t[0].textContent))){var n=this.getEditPanel();n.innerHTML=x(this),this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),n.childNodes[0],0)}}var s=this.getRange();if(-1!=sf.base.Browser.userAgent.indexOf("Firefox")&&"#text"===s.startContainer.nodeName&&s.startContainer.parentElement===this.inputElement&&"BR"!==this.enterKey){var o=this.getRange(),r=sf.base.createElement(this.enterKey);o.startContainer.parentElement.insertBefore(r,o.startContainer),r.appendChild(o.startContainer),this.formatter.editorManager.nodeSelection.setSelectionText(this.getDocument(),r.childNodes[0],r.childNodes[0],r.childNodes[0].textContent.length,r.childNodes[0].textContent.length)}}this.observer.notify(i,{member:"keyup",args:e}),"KeyX"!==e.code||88!==e.which||88!==e.keyCode||!e.ctrlKey||""!==this.inputElement.innerHTML&&"<br>"!==this.inputElement.innerHTML||(this.inputElement.innerHTML=S(x(this),this));var a=32===e.which||13===e.which||8===e.which||46===e.which;("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||a||"Markdown"===this.editorMode&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||a)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),(this.inputElement&&0!==this.inputElement.textContent.length||this.element.querySelectorAll(".e-toolbar-item.e-active").length>0||this.formatter.getUndoRedoStack().length>0)&&this.observer.notify("toolbar-refresh",{args:e}),sf.base.isNullOrUndefined(this.placeholder)||"Enter"===e.key&&13===e.keyCode||"<p><br></p>"!==this.inputElement.innerHTML&&"<div><br></div>"!==this.inputElement.innerHTML&&"<br>"!==this.inputElement.innerHTML||this.setPlaceHolder()},t.prototype.onCut=function(){this.getDocument().execCommand("cut",!1,null)},t.prototype.onCopy=function(){this.getDocument().execCommand("copy",!1,null)},t.prototype.updateEditorValue=function(e){e.detail.click&&this.dotNetRef.invokeMethodAsync("UpdateValue",this.getUpdatedValue())},t.prototype.onPaste=function(e){if(sf.base.isNullOrUndefined(sf.base.select(".e-rte-img-dialog",this.element))){var t=this.getText().length-this.getSelection().length+(sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.clipboardData)?0:e.clipboardData.getData("text/plain").replace(/(\r\n|\n|\r)/gm,"").replace(/\u200B/g,"").length);if("Markdown"===this.editorMode){var i={requestType:"Paste",editorMode:this.editorMode,event:e};return this.formatter.onSuccess(this,i),void(-1===this.maxLength||t<this.maxLength||e.preventDefault())}"true"===this.inputElement.contentEditable&&(-1===this.maxLength||t<this.maxLength)?this.observer.notify("pasteClean",{args:e}):e.preventDefault()}},t.prototype.onDocumentClick=function(e){var t=e.target,i=sf.base.closest(t,".e-richtexteditor");this.element.contains(e.target)||document===e.target||i===this.element||sf.base.closest(t,'[aria-owns="'+this.element.id+'"]')||(this.isBlur=!0,this.isRTE=!1),this.observer.notify("docClick",{args:e})},t.prototype.propertyChangeHandler=function(e){for(var t={},i=0,n=Object.keys(e);i<n.length;i++){t[a=n[i]]=this[a]}var s=this.value;this.updateContext(e);for(var o=0,r=Object.keys(e);o<r.length;o++){var a;switch(a=r[o]){case"enableXhtml":case"enableHtmlSanitizer":case"value":case"enterKey":if("value"===a&&s===this.value)break;"enterKey"!==a||"<p><br/></p>"!==this.value&&"<div><br/></div>"!==this.value&&"<br/>"!==this.value&&"<p><br></p>"!==this.value&&"<div><br></div>"!==this.value&&"<br>"!==this.value||(this.value=x(this)),this.setPanelValue(this.value),this.inputElement&&this.observer.notify("tableclass",{}),this.enableXhtml&&(this.value=this.getXhtml()),this.addAudioVideoWrapper();break;case"height":this.setContentHeight(),this.autoResize();break;case"width":this.resizeHandler(!0);break;case"readonly":this.setReadOnly(!1);break;case"enabled":this.enabled&&!this.readonly?this.wireEvents():this.unWireEvents(),this.setEnable();break;case"placeholder":this.placeholder=this.placeholder,this.setPlaceHolder();break;case"enableResize":e[a]&&sf.base.isNullOrUndefined(this.resizeModule)?(this.resizeModule=new c(this),this.wireResizeEvents()):this.resizeModule&&(this.resizeModule.destroy(),this.unWireResizeEvents(),this.setContentHeight(),this.resizeModule=null);break;case"showCharCount":this.showCharCount?sf.base.isNullOrUndefined(this.countModule)&&(this.countModule=new d(this)):!1===this.showCharCount&&this.countModule&&(this.countModule.destroy(),this.countModule=null);break;case"maxLength":this.showCharCount&&this.countModule&&this.countModule.refresh();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify("model_changed",{newProp:e});break;case"adapter":var l=this.getEditPanel(),h={undoRedoSteps:this.undoRedoSteps,undoRedoTimer:this.undoRedoTimer};"Markdown"===this.editorMode&&(this.formatter=new gt(sf.base.extend({},this.adapter,{element:l,options:h})));break;case"iframeSettings":var p=t[a];if(p.resources){var u=this.getDocument().querySelector("head"),f=void 0;p.resources.scripts&&(f=u.querySelectorAll(".rte-iframe-script-sheet"),this.removeSheets(f)),p.resources.styles&&(f=u.querySelectorAll(".rte-iframe-style-sheet"),this.removeSheets(f))}this.setIframeSettings();break;case"quickToolbarSettings":this.quickToolbarSettings.enable?(sf.base.isNullOrUndefined(this.quickToolbarModule)&&(this.quickToolbarModule=new Ve(this)),this.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent()):(this.quickToolbarModule.destroy(),this.quickToolbarModule=null);break;case"toggleToolbar":this.toolbarSettings.enable=e[a],e[a]?sf.base.isNullOrUndefined(this.toolbarModule)&&(this.isUndoRedoStatus(),this.toolbarModule=new P(this)):(this.toolbarModule.destroy(),this.toolbarModule=null)}}},t.prototype.getCurrentFocus=function(e){return e.target===this.inputElement&&document.activeElement===this.inputElement?"editArea":e.target===this.getToolbarElement()||!sf.base.isNullOrUndefined(e.relatedTarget)&&sf.base.closest(e.relatedTarget,".e-rte-toolbar")===this.getToolbarElement()?"toolbar":e.target===this.valueContainer&&document.activeElement===this.valueContainer?"textArea":!sf.base.isNullOrUndefined(e.target)&&e.target.classList.contains("e-rte-srctextarea")&&document.activeElement===e.target?"sourceCode":"outside"},t.prototype.resetToolbarTabIndex=function(){if(this.getToolbarElement())for(var e=this.getToolbarElement().querySelectorAll("input,select,button,a,[tabindex]"),t=0;t<e.length;t++)e[t].classList.contains("e-rte-dropdown-btn")||e[t].classList.contains("e-insert-table-btn")||e[t].hasAttribute("tabindex")&&"-1"===e[t].getAttribute("tabindex")||e[t].setAttribute("tabindex","-1")},t}();return{initialize:function(e){e.dataId&&new yt(e)},updateProperties:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].updateContext(e)},setPanelValue:function(e,t){e&&window.sfBlazor.instances[e].setPanelValue(t)},toolbarItemClick:function(e,t,i,n){e&&window.sfBlazor.instances[e].toolbarItemClick(t,i,n)},toolbarClick:function(e,t){e&&window.sfBlazor.instances[e].toolbarClick(t)},listDropDownButtonClick:function(e,t){e&&window.sfBlazor.instances[e].onListDropDownButtonClick(t)},dropDownBeforeOpen:function(e,t){e&&window.sfBlazor.instances[e].dropDownBeforeOpen(t)},dropDownAfterOpen:function(e,t){e&&window.sfBlazor.instances[e].dropDownAfterOpen(t)},dropDownClose:function(e,t){e&&window.sfBlazor.instances[e].dropDownClose(t)},dropDownButtonItemSelect:function(e,t){e&&window.sfBlazor.instances[e].dropDownSelect(t)},colorDropDownBeforeOpen:function(e){e&&window.sfBlazor.instances[e].colorDropDownBeforeOpen()},colorIconSelected:function(e,t,i,n){e&&window.sfBlazor.instances[e].colorIconSelected(t,i,n)},colorPickerChanged:function(e,t,i,n){e&&window.sfBlazor.instances[e].colorChanged(t,i,n)},cancelLinkDialog:function(e){e&&window.sfBlazor.instances[e].cancelLinkDialog()},cancelImageDialog:function(e){e&&window.sfBlazor.instances[e].cancelImageDialog()},linkDialogClosed:function(e){e&&window.sfBlazor.instances[e].linkDialogClosed()},dialogClosed:function(e,t){e&&window.sfBlazor.instances[e].dialogClosed(t)},insertLink:function(e,t){e&&window.sfBlazor.instances[e].insertLink(t)},imageRemoving:function(e){e&&window.sfBlazor.instances[e].imageRemoving()},audioRemoving:function(e){e&&window.sfBlazor.instances[e].audioRemoving()},videoRemoving:function(e){e&&window.sfBlazor.instances[e].videoRemoving()},uploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].uploadSuccess(t,i)},audioUploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].audioUploadSuccess(t,i)},videoUploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].videoUploadSuccess(t,i)},imageSelected:function(e){e&&window.sfBlazor.instances[e].imageSelected()},audioSelected:function(e){e&&window.sfBlazor.instances[e].audioSelected()},videoSelected:function(e){e&&window.sfBlazor.instances[e].videoSelected()},imageUploadComplete:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].imageUploadComplete(e.base64Str,e.altText)},audioUploadComplete:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].audioUploadComplete(e.base64Str,e.fileName)},videoUploadComplete:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].videoUploadComplete(e.base64Str,e.fileName)},imageUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].imageUploadChange(t,i)},audioUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].audioUploadChange(t,i)},videoUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].videoUploadChange(t,i)},dropUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].dropUploadChange(t,i)},insertImage:function(e){e&&window.sfBlazor.instances[e].insertImage()},insertAudio:function(e){e&&window.sfBlazor.instances[e].insertAudio()},insertVideo:function(e){e&&window.sfBlazor.instances[e].insertVideo()},imageDialogOpened:function(e){e&&window.sfBlazor.instances[e].imageDialogOpened()},imageDialogClosed:function(e){e&&window.sfBlazor.instances[e].imageDialogClosed()},audioDialogOpened:function(e){e&&window.sfBlazor.instances[e].audioDialogOpened()},audioDialogClosed:function(e){e&&window.sfBlazor.instances[e].audioDialogClosed()},videoDialogOpened:function(e){e&&window.sfBlazor.instances[e].videoDialogOpened()},videoDialogClosed:function(e){e&&window.sfBlazor.instances[e].videoDialogClosed()},propertyChangeHandler:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].propertyChangeHandler(e)},insertTable:function(e,t,i){e&&window.sfBlazor.instances[e].insertTable(t,i)},applyTableProperties:function(e,t){e&&window.sfBlazor.instances[e].applyTableProperties(t)},createTablePopupOpened:function(e){e&&window.sfBlazor.instances[e].createTablePopupOpened()},pasteContent:function(e,t){e&&window.sfBlazor.instances[e].pasteContent(t)},updatePasteContent:function(e,t){e&&window.sfBlazor.instances[e].updatePasteContent(t)},imageDropInitialized:function(e,t){e&&window.sfBlazor.instances[e].imageDropInitialized(t)},preventEditable:function(e){e&&window.sfBlazor.instances[e].preventEditable()},enableEditable:function(e){e&&window.sfBlazor.instances[e].enableEditable()},removeDroppedImage:function(e){e&&window.sfBlazor.instances[e].removeDroppedImage()},dropUploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].dropUploadSuccess(t,i)},executeCommand:function(e,t,i,n){e&&window.sfBlazor.instances[e].executeCommand(t,i,n)},getCharCount:function(e){return e&&window.sfBlazor.instances[e].getCharCount()},focusIn:function(e){return e&&window.sfBlazor.instances[e].focusIn()},focusOut:function(e){return e&&window.sfBlazor.instances[e].focusOut()},getContent:function(e){return e&&window.sfBlazor.instances[e].getContent()},getHtml:function(e){return e&&window.sfBlazor.instances[e].getHtml()},getSelectedHtml:function(e){return e&&window.sfBlazor.instances[e].getSelectedHtml()},getSelection:function(e){return e&&window.sfBlazor.instances[e].getSelection()},getText:function(e){return e&&window.sfBlazor.instances[e].getText()},print:function(e){return e&&window.sfBlazor.instances[e].print()},refreshUI:function(e){return e&&window.sfBlazor.instances[e].refreshUI()},sanitizeHtml:function(e,t){return e&&window.sfBlazor.instances[e].sanitizeHtml(t)},selectAll:function(e){return e&&window.sfBlazor.instances[e].selectAll()},selectRange:function(e,t){return e&&window.sfBlazor.instances[e].selectRange(t)},showFullScreen:function(e){return e&&window.sfBlazor.instances[e].showFullScreen()},showSourceCode:function(e){return e&&window.sfBlazor.instances[e].showSourceCode()},insertAlt:function(e,t){return e&&window.sfBlazor.instances[e].insertAlt(t)},insertSize:function(e,t,i){return e&&window.sfBlazor.instances[e].insertSize(t,i)},insertVideoSize:function(e,t,i){return e&&window.sfBlazor.instances[e].insertVideoSize(t,i)},insertImageLink:function(e,t,i,n){return e&&window.sfBlazor.instances[e].insertImageLink(t,i,n)},updateContentHeight:function(e){return e&&window.sfBlazor.instances[e].setContentHeight()},saveSelection:function(e){e&&window.sfBlazor.instances[e].saveSelection()},restoreSelection:function(e){e&&window.sfBlazor.instances[e].restoreSelection()},getXhtml:function(e){return e&&window.sfBlazor.instances[e].getXhtml()},changeTooltipText:function(e,t){e&&window.sfBlazor.instances[e].changeTooltipText(t)},showLinkDialog:function(e){e&&window.sfBlazor.instances[e].showLinkDialog()},showImageDialog:function(e){e&&window.sfBlazor.instances[e].showImageDialog()},showAudioDialog:function(e){e&&window.sfBlazor.instances[e].showAudioDialog()},showVideoDialog:function(e){e&&window.sfBlazor.instances[e].showVideoDialog()},showTableDialog:function(e){e&&window.sfBlazor.instances[e].showTableDialog()},showInlineToolbar:function(e){e&&window.sfBlazor.instances[e].showInlineToolbar()},hideInlineToolbar:function(e){e&&window.sfBlazor.instances[e].hideInlineToolbar()},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()},resizeElement:function(e,t){return e&&window.sfBlazor.instances[e].removeResizeElement(t)}}}()},"./modules/sf-schedule.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Schedule=function(){"use strict";var e="e-rtl",t="e-popup-open",n="e-appointment-border";function s(e,t){var i,n=sf.base.createElement("div",{className:t}).cloneNode();return n.style.visibility="hidden",n.style.position="absolute",e.appendChild(n),i=n.offsetHeight,sf.base.remove(n),i}function o(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m42:0}function r(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m41:0}function a(e,t){var i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function l(e){return new Date(e.getFullYear(),e.getMonth())}function h(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function d(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function c(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),i=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*i*1e3}function p(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function u(e,t){var i,n=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(n,(i=e,new Date(i.getFullYear(),i.getMonth()+1,0).getDate()))),e}function f(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var s=new Date(e.getTime());return 0===i.getHours()?s=p(s,1):(s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),s.setSeconds(i.getSeconds())),{startHour:n,endHour:s}}var g=null,m=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth;function v(){if(null!==g)return g;var e,t=sf.base.createElement("div");t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t);var i=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return e=t.offsetWidth-t.clientWidth-i|0,document.body.removeChild(t),g=e}function b(e){var t=e.getFullYear(),i=e.getMonth(),n=e.getDate(),s=e.getHours(),o=e.getMinutes(),r=e.getSeconds(),a=e.getMilliseconds();return Date.UTC(t,i,n,s,o,r,a)}function y(e){var t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function C(e){return new Date(+e-6e4*e.getTimezoneOffset())}function w(e){var t=new Date(+e+6e4*e.getTimezoneOffset());return new Date(t.getTime()+6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))}function M(e,t){var i=e.getTimezoneOffset();try{var n=new Date(e.toLocaleString("en-US",{timeZone:t}));return isNaN(n.getTime())?0:(e.getTime()-n.getTime())/6e4+i}catch(e){return 0}}var S,x,N,O,E,I,T,D,j,A,z,k=function(){function e(e){this.parent=e}return e.prototype.onDataReady=function(e){},e.prototype.getScrollXIndent=function(e){return e.offsetHeight-e.clientHeight>0?v():0},e.prototype.scrollTopPanel=function(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft},e.prototype.scrollHeaderLabels=function(e){for(var t=this.element.querySelector(".e-date-header-wrap table"),i=t.offsetWidth/t.querySelectorAll("colgroup col").length,n=function(t,n){for(var s,o=0,r=0,a=n?-e.scrollLeft:e.scrollLeft,l=0,h=t;l<h.length;l++){var d=h[l];if((r+=parseInt(d.getAttribute("colSpan"),10))>Math.floor(a/i)){s=d;break}o+=d.offsetWidth}sf.base.isNullOrUndefined(s)||(s.children[0].style[n?"right":"left"]=a-o+"px")},s=0,o=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];s<o.length;s++){var r=o[s],a=[].slice.call(this.element.querySelectorAll(r));if(a.length>0){for(var l=0,h=a;l<h.length;l++){h[l].children[0].style[this.parent.options.enableRtl?"right":"left"]=""}n(a,this.parent.options.enableRtl)}}},e.prototype.getHeaderBarHeight=function(e){void 0===e&&(e=!1);var t=2,i=this.parent.element.querySelector(".e-schedule-toolbar");if(i&&(t+=y(i)),this.parent.uiStateValues.isGroupAdaptive||e){var n=this.parent.element.querySelector(".e-schedule-resource-toolbar");n&&(t+=n.offsetHeight)}return t},e.prototype.getDatesHeaderElement=function(){return this.element.querySelector(".e-date-header-container")},e.prototype.highlightCurrentTime=function(){},e.prototype.getStartHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.getEndHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.isCurrentDate=function(e){return e.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)},e.prototype.isCurrentMonth=function(e){return e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()},e.prototype.isWorkDay=function(e,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(e.getDay())>=0},e.prototype.isWorkHour=function(e,t,i,n){return!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&(t.setMilliseconds(0),i.setMilliseconds(0),!(c(e)<c(t)||c(e)>=c(i)||!this.isWorkDay(e,n)))},e.prototype.getRenderDates=function(e){var t=[];if("Week"===this.parent.options.currentView||"TimelineWeek"===this.parent.options.currentView)for(var i=a(d(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0,s=7*this.parent.activeViewOptions.interval;n<s;n++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=p(i,1);else if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView){i=a(d(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),n=0;for(var o=7*this.parent.activeViewOptions.interval;n<o;n++)this.isWorkDay(i,e)&&t.push(i),i=p(i,1)}else{i=d(this.parent.options.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=p(i,1)}while(this.parent.activeViewOptions.interval!==t.length)}return e||(this.renderDates=t),t},e.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))},e.prototype.setColWidth=function(e){if(this.parent.isTimelineView()){var t=this.getColElements(),i=this.element.querySelector(".e-content-table tbody").getBoundingClientRect().width/(t.length/2);if(e.offsetHeight!==e.clientHeight){var n=this.parent.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");sf.base.isNullOrUndefined(n)||sf.base.setStyleAttribute(n,{height:sf.base.formatUnit(e.clientHeight)})}[].slice.call(this.element.querySelectorAll(".e-header-cells")).forEach((function(e){var t=parseInt(e.getAttribute("colspan"),10);sf.base.setStyleAttribute(e,{width:sf.base.formatUnit(i*t)})}))}},e.prototype.resetColWidth=function(){for(var e=0,t=this.getColElements();e<t.length;e++){t[e].style.width=""}},e.prototype.getContentAreaElement=function(){return this.element.querySelector(".e-content-wrap")},e.prototype.scrollToDate=function(e){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.options.currentView)&&!sf.base.isNullOrUndefined(e)){var t=this.getContentAreaElement(),i=this.parent.getMsFromDate(new Date(d(new Date(+e)).getTime())),n=t.querySelector('.e-work-cells[data-date="'+i+'"]');"Month"===this.parent.options.currentView&&n&&(t.scrollTop=n.offsetTop),"TimelineMonth"===this.parent.options.currentView&&n&&(this.parent.options.enableRtl?t.scrollLeft=-(this.parent.getContentTable().offsetWidth-n.offsetLeft-n.offsetWidth):t.scrollLeft=n.offsetLeft)}},e.prototype.getPanel=function(){return this.element},e.prototype.retainScrollPosition=function(){if(this.parent.options.enablePersistence){var e=this.element.querySelector(".e-content-wrap");if(!sf.base.isNullOrUndefined(e)){var t=JSON.parse(window.localStorage.getItem(this.parent.element.id));if(!sf.base.isNullOrUndefined(t)){var i=t.top,n=t.left;sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(n)||(e.scrollTop=i,e.scrollLeft=n)}}}},e.prototype.removeVirtualMask=function(){var e=this.parent.element.querySelector(".e-table-wrap");this.parent.activeViewOptions.enableVirtualMask&&e&&e.classList.contains("e-virtual-mask")&&sf.base.removeClass([e],"e-virtual-mask")},e}(),P=function(){function e(e){this.allDayLevel=0,this.moreIndicatorTop=0,this.parent=e,this.slotCount=e.activeViewOptions.timeScale.slotCount,this.interval=e.activeViewOptions.timeScale.interval,this.element=this.parent.activeView.getPanel()}return e.prototype.renderAppointments=function(){var e=this.element.querySelector(".e-all-day-appointment-section");e&&(sf.base.EventHandler.remove(e,"click",this.rowExpandCollapse),sf.base.EventHandler.add(e,"click",this.rowExpandCollapse,this));var t=this.parent.element.querySelector(".e-work-cells");if(t){for(var i=this.parent.element.querySelector(".e-content-wrap"),n=[].slice.call(i.querySelectorAll(".e-appointment")),s=[].slice.call(i.querySelectorAll(".e-block-appointment")),o=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),r=n.concat(s),a=0;a<o.length;a++)o[parseInt(a.toString(),10)].style.removeProperty("display"),o[parseInt(a.toString(),10)].style.removeProperty("visibility");var l=0,h=0,d=t.offsetParent;d&&(l=d.offsetHeight/d.querySelector("tbody").childElementCount,h=d.offsetWidth/d.querySelector("tbody tr").childElementCount);for(a=0;a<r.length;a++){var c="none"!==(M=r[parseInt(a.toString(),10)]).style.display;M.style.removeProperty("display"),M.style.removeProperty("visibility"),sf.base.removeClass([M],"e-event-action"),M.blur();var p=this.getColumn(M),u=this.getAppWidth(this.getColumnCounts(M)),f=this.getTopStartDuration(M),g=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4,m=f/g*l;M.style.top=m+"px",M.style.left=this.getEventLeft(u,p),M.style.width=M.classList.contains("e-block-appointment")?"100%":u,M.style.height=(f+this.getDuration(M))/g*l-m+"px",c||this.parent.eventBase.wireAppointmentEvents(M)}var v=this.parent.element.querySelector(".e-all-day-row").offsetTop,b=o.length>0?o[0].offsetHeight:0,y=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment-wrapper"));this.setAllDayRowHeight(0);for(var C=0;C<y.length;C++){var w=y[parseInt(C.toString(),10)].children;for(a=0;a<w.length;a++){var M,S=0;if((M=w[parseInt(a.toString(),10)]).blur(),M.classList.contains("e-row-count-wrapper"))this.moreIndicatorTop=v+4*b,this.parent.uiStateValues.expand||(M.style.top=this.moreIndicatorTop+"px",S=4*b+4,this.setAllDayRowHeight(S));else{this.parent.uiStateValues.expand&&sf.base.removeClass([M],"e-appointment-hide");var x=this.getRowCount(M),N=this.getTotalLength(M);this.allDayLevel=this.allDayLevel<x?x:this.allDayLevel,M.style.top=v+x*b+"px",M.style.width=h*N-15+"px",S=4+(!this.parent.uiStateValues.expand&&this.allDayLevel>3?4*b:(this.allDayLevel+1)*b),this.parent.eventBase.wireAppointmentEvents(M),this.setAllDayRowHeight(S)}}}var O=[].slice.call(this.element.querySelectorAll(".e-more-indicator"));e&&(O.length>0?sf.base.removeClass([e],"e-disable"):sf.base.addClass([e],"e-disable"));for(a=0;a<O.length;a++)sf.base.EventHandler.clearEvents(O[parseInt(a.toString(),10)]),sf.base.EventHandler.add(O[parseInt(a.toString(),10)],"click",this.rowExpandCollapse,this);this.parent.setDimensions()}},e.prototype.getAppWidth=function(e){var t=(("Day"===this.parent.options.currentView?97:94)-e)/e;return(t<0?0:t)+"%"},e.prototype.getEventLeft=function(e,t){var i=(parseFloat(e)+1)*t;return(i>99?99:i)+"%"},e.prototype.setAllDayRowHeight=function(e){for(var t=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].style.height=e/12+"em";var n=this.parent.element.querySelector(".e-date-header-wrap");"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll||sf.base.addClass([n],"e-all-day-auto");var s=this.parent.element.querySelector(".e-all-day-row");s.style.height="",this.parent.uiStateValues.expand&&"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll?(s.style.height=e/12+"em",this.parent.eventBase.allDayExpandScroll(n)):(n.scrollTop=0,sf.base.removeClass([n],"e-all-day-scroll"))},e.prototype.getRowCount=function(e){return parseInt(e.getAttribute("data-row-index"),10)},e.prototype.getTotalLength=function(e){return parseInt(e.getAttribute("data-total-length"),10)},e.prototype.getDuration=function(e){return parseInt(e.getAttribute("data-duration"),10)},e.prototype.getTopStartDuration=function(e){return parseInt(e.getAttribute("data-top-start-duration"),10)},e.prototype.getColumnCounts=function(e){return parseInt(e.getAttribute("data-columns-count"),10)},e.prototype.getColumn=function(e){return parseInt(e.getAttribute("data-columns"),10)},e.prototype.rowExpandCollapse=function(){var e=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand=e.classList.contains("e-appointment-expand");var t,i=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),n=i.length>0?i[0].offsetHeight:0;this.parent.uiStateValues.expand?(e.setAttribute("title","Collapse-all-day-section"),e.setAttribute("aria-label","Collapse section"),t=(this.allDayLevel+1)*n+4):(e.setAttribute("title","Expand-all-day-section"),e.setAttribute("aria-label","Expand section"),t=4*n+4),this.setAllDayRowHeight(t),this.addOrRemoveClass(),this.parent.setDimensions()},e.prototype.addOrRemoveClass=function(){var e=this;[].slice.call(this.parent.element.querySelectorAll(".e-more-event")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.addClass([t],"e-appointment-hide"),t.setAttribute("tabindex","-1")):(sf.base.removeClass([t],"e-appointment-hide"),t.setAttribute("tabindex","0"))}));var t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand?(sf.base.removeClass([t],"e-appointment-expand"),sf.base.addClass([t],"e-appointment-collapse")):(sf.base.removeClass([t],"e-appointment-collapse"),sf.base.addClass([t],"e-appointment-expand")),this.allDayLevel>2?sf.base.removeClass([t],"e-disable"):sf.base.addClass([t],"e-disable"),[].slice.call(this.element.querySelectorAll(".e-row-count-wrapper")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.removeClass([t],"e-disable"),t.style.top=e.moreIndicatorTop+"px"):sf.base.addClass([t],"e-disable")}))},e.prototype.initializeValues=function(){this.cellHeight=parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2))},e.prototype.getHeight=function(e,t){var i=(t.getTime()-e.getTime())/6e4*(this.cellHeight*this.slotCount)/this.interval;return i=i<=0?this.cellHeight:i},e.prototype.renderNormalEvents=function(e,t){var i=e,n=i.startTime,s=i.endTime,o=0,r=this.getHeight(n,s);o=this.getTopValue(n,o);var a=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(a,{width:this.getEventWidth(),height:r+"px",top:o+"px"}),[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[parseInt(t.toString(),10)].appendChild(a)},e.prototype.getEventWidth=function(){var e="Day"===this.parent.options.currentView?97:94;return(e<0?0:e)+"%"},e.prototype.getTopValue=function(e,t){var i=d(this.parent.activeView.renderDates[parseInt(t.toString(),10)]);(new Date).setHours(0,0,0,0);var n=this.parent.eventBase.getStEdHours(i,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()).startHour;return(60*(e.getHours()-n.getHours())+(e.getMinutes()-n.getMinutes()))*this.cellHeight*this.slotCount/this.interval},e.prototype.renderAllDayEvents=function(e,t){var i,n=e,s=this.parent.element.querySelector(".e-all-day-cells:first-child").offsetTop,o=1;n.Index=0,this.allDayLevel=this.allDayLevel<0?0:this.allDayLevel,i=100-("Day"===this.parent.options.currentView?4:7);var r=this.parent.element.querySelector(".e-all-day-appointment-wrapper:nth-child("+(t+1)+")"),a=this.parent.inlineModule.createInlineAppointmentElement();r.appendChild(a),o+=s+1,sf.base.setStyleAttribute(a,{width:i+"%",top:sf.base.formatUnit(o)}),sf.base.addClass([a],"e-all-day-appointment")},e}(),L=function(){function e(e){this.slots=[],this.isDoubleTapped=!1,this.parent=e}return e.prototype.getSelectedEventElements=function(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else if(this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")===e.getAttribute("data-guid")})).length<=0)for(var t='div[data-guid="'+e.getAttribute("data-guid")+'"]',i=0,n=[].slice.call(this.parent.element.querySelectorAll(t));i<n.length;i++){var s=n[i];this.parent.selectedElements.push(s)}else{var o=this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")!==e.getAttribute("data-guid")}));this.parent.selectedElements=o}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements},e.prototype.getSelectedEvents=function(){var e=[],t=[];return[].slice.call(this.parent.element.querySelectorAll("."+n)).filter((function(i){0===e.filter((function(e){return e===i.getAttribute("data-guid")})).length&&e.push(i.getAttribute("data-guid")),t.push(i)})),{element:t.length>1?t:t[0],guid:e}},e.prototype.removeSelectedAppointmentClass=function(){var e=this.getSelectedAppointments();sf.base.removeClass(e,n),"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||sf.base.removeClass(e,"e-active-appointment-agenda")},e.prototype.addSelectedAppointments=function(e){"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass(),sf.base.addClass(e,n)},e.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll("."+n+",.e-appointment:focus"))},e.prototype.focusElement=function(){var e=document.querySelector("#"+this.parent.element.id+"_dialog_wrapper");if(!e||!e.classList.contains("e-popup-open")){var t=this.parent.getSelectedCells();if(t.length>0){if(this.parent.keyboardInteractionModule){var i=!sf.base.isNullOrUndefined(this.parent.activeCellsData)&&this.parent.activeCellsData.element||t[t.length-1];this.parent.keyboardInteractionModule.selectCells(i instanceof Array,i)}}else{var n=this.getSelectedAppointments();n.length>0&&n[n.length-1].focus()}}},e.prototype.splitEvent=function(e,t){var i=d(new Date(e.startTime+"")).getTime(),n=d(new Date(e.endTime+"")).getTime();if(c(e.endTime)<=0){var s=p(d(new Date(e.endTime+"")),-1).getTime();n=i>s?i:s}var o=i,r=n,a=[];if(i!==n){i<t[0].getTime()&&(i=t[0].getTime()),n>t[t.length-1].getTime()&&(n=t[t.length-1].getTime());for(var l=i,h=0;h<this.slots.length;h++){var u=this.slots[parseInt(h.toString(),10)];if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){for(var f=[],g=0,m=u;g<m.length;g++){var v=m[g];f.push(new Date(v))}var b=this.getRenderedDates(f);if(!sf.base.isNullOrUndefined(b)&&b.length>0){u=[];for(var y=0,C=b;y<C.length;y++){var w=C[y];u.push(w.getTime())}}}var M=u[0];if((l=l<=M&&n>=M?M:l)>n||M>n)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.options.currentView&&"TimelineWorkWeek"!==this.parent.options.currentView){var S=u.indexOf(l);if(-1!==S){var x=u.indexOf(n),N=-1!==x,O=(x=N?x:u.length-1)-S+1,E=u[parseInt(S.toString(),10)]!==o,I=u[parseInt(x.toString(),10)]!==r;if(a.push(this.cloneEventObject(e,u[parseInt(S.toString(),10)],u[parseInt(x.toString(),10)],O,E,I)),N)break}}else if(this.dateInRange(l,u[0],u[u.length-1])){for(var T=[],D=0;D<u.length;D++)this.dateInRange(u[parseInt(D.toString(),10)],o,r)&&T.push(u[parseInt(D.toString(),10)]);if(T.length>0)if(this.parent.activeViewOptions.group.byDate)for(var j=0,A=T;j<A.length;j++){var z=A[j];a.push(this.cloneEventObject(e,z,z,1,z!==o,z!==r))}else{E=T[0]!==o,I=T[T.length-1]!==r;a.push(this.cloneEventObject(e,T[0],T[T.length-1],T.length,E,I))}}}}else a.push(this.cloneEventObject(e,i,n,1,!1,!1));return a},e.prototype.dateInRange=function(e,t,i){return t<=e&&e<=i},e.prototype.cloneEventObject=function(e,t,i,n,s,o){var r=sf.base.extend({},e,null,!0),a={count:n,isLeft:s,isRight:o};return a.startTime=e.startTime,a.endTime=e.endTime,r.data=a,r.startTime=new Date(t),r.endTime=new Date(i),r},e.prototype.getRenderedDates=function(e){var t,i=0,n=e.length;if(e[0]<this.parent.options.minDate&&e[e.length-1]>this.parent.options.maxDate){for(var s=0;s<e.length;s++)e[parseInt(s.toString(),10)].getTime()===this.parent.options.minDate.getTime()&&(i=s),e[parseInt(s.toString(),10)].getTime()===this.parent.options.maxDate.getTime()&&(n=s);t=e.filter((function(t){return t>=e[parseInt(i.toString(),10)]&&t<=e[parseInt(n.toString(),10)]}))}return t},e.prototype.isValidEvent=function(e,t,i,n){var s=i.getTime()>n.startHour.getTime()&&t.getTime()<n.endHour.getTime(),o=n.startHour.getTime()<=t.getTime()&&e.startTime.getTime()>=n.startHour.getTime()&&e.endTime.getTime()<n.endHour.getTime()&&t.getTime()===i.getTime();return s||o},e.prototype.getStEdHours=function(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var s=new Date(e.getTime());return 0===i.getHours()?s.setDate(s.getDate()+1):(s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),s.setSeconds(i.getSeconds())),{startHour:n,endHour:s}},e.prototype.appointmentBorderRemove=function(e){var i=e.target;sf.base.closest(i,".e-appointment")?"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass():sf.base.closest(i,"."+t)||this.removeSelectedAppointmentClass()},e.prototype.wireAppointmentEvents=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),!this.parent.isPrintSchedule&&!e.classList.contains("e-block-appointment")){var n="true"===e.getAttribute("aria-disabled");sf.base.EventHandler.remove(e,"click",this.eventClick),sf.base.EventHandler.remove(e,"dblclick",this.eventDoubleClick),sf.base.EventHandler.remove(e,"touchstart",this.eventTouchClick),("TimelineYear"!==this.parent.options.currentView||i)&&(sf.base.EventHandler.add(e,"click",this.eventClick,this),this.parent.isAdaptive||sf.base.EventHandler.add(e,"touchstart",this.eventTouchClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||n||sf.base.EventHandler.add(e,"dblclick",this.eventDoubleClick,this)),this.parent.activeViewOptions.readonly||n||t||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(e))}},e.prototype.eventTouchClick=function(e){var t=this;setTimeout((function(){return t.isDoubleTapped=!1}),250),e.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(e):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(e))},e.prototype.eventClick=function(e){var t=e.target;if(!(t.classList.contains("e-drag-clone")||t.classList.contains("e-resize-clone")||e.detail>1||t.classList.contains("e-block-appointment")||t.classList.contains("e-inline-subject")))if(t=sf.base.closest(e.target,".e-appointment"),(e.ctrlKey||e.metaKey)&&1===e.which&&this.parent.keyboardInteractionModule){this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+n)),this.getSelectedEventElements(t);var i=this.activeEventData(e,!1);this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",i,this.getMouseEvent(e),this.getGroupIndexFromElement(t),!0,!1)}else{this.removeSelectedAppointmentClass();i=this.activeEventData(e,!0);if(this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",i,this.getMouseEvent(e),this.getGroupIndexFromElement(t),!1,!1),this.parent.isAdaptive&&this.parent.isTapHold){var s=sf.base.closest(e.target,".e-appointment"),o=this.getSelectedEventElements(s);if(o.length>0){var r=1===o.length?o[0].querySelector(".e-subject").innerHTML:"("+o.length+")&nbsp;selected item(s)";this.parent.quickPopup.element.querySelector(".e-subject").innerHTML=r,o.length>1?sf.base.addClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden"):sf.base.removeClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden")}else this.parent.selectedElements=[],this.parent.onQuickPopupClose()}}},e.prototype.eventDoubleClick=function(e){if("touchstart"===e.type&&this.activeEventData(e,!0),!this.parent.activeEventData.element.classList.contains("e-inline-appointment")&&!this.parent.activeEventData.element.querySelector(".e-inline-subject")){var t=this.activeEventData(e,!1),i=sf.base.closest(e.target,".e-appointment");this.parent.dotNetRef.invokeMethodAsync("TriggerEventDoubleClick",t,this.getMouseEvent(e),this.getGroupIndexFromElement(i))}},e.prototype.getMouseEvent=function(e){if(-1!==e.type.indexOf("touch")){var t=e.event,i=t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e;return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:i.clientX,clientY:i.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:i.screenX,screenY:i.screenY,shiftKey:e.shiftKey,type:e.type}}return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type}},e.prototype.getGroupIndexFromElement=function(e){var t=parseInt(e.getAttribute("data-group-index"),10);return isNaN(t)?0:t},e.prototype.activeEventData=function(e,t){var i=sf.base.closest(e.target,".e-appointment"),n=i.getAttribute("data-guid");return t&&(i.parentElement.classList.contains(".e-more-appointment-wrapper")&&this.parent.morePopup&&this.parent.morePopup.element?this.addSelectedAppointments([].slice.call(this.parent.morePopup.element.querySelectorAll('div[data-guid="'+n+'"]'))):this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('.e-table-container div[data-guid="'+n+'"]'))),i.focus()),this.parent.activeEventData={element:i,guid:[n]},n},e.prototype.allDayExpandScroll=function(e){var t=0;[].slice.call(this.parent.element.querySelectorAll(".e-header-row")).forEach((function(e){[].slice.call(e.children).forEach((function(e){e.style.top=t+"px"})),t+=e.offsetHeight})),t=e.offsetHeight-t,this.parent.element.querySelector(".e-all-day-cells").style.height=t/12+"em",this.parent.uiStateValues.expand?sf.base.addClass([e],"e-all-day-scroll"):sf.base.removeClass([e],"e-all-day-scroll")},e.prototype.removeHeightProperty=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll("."+e+" tbody tr"));t<i.length;t++){i[t].firstElementChild.style.height=""}},e}(),B=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),R=function(e){function t(t){var i=e.call(this,t)||this;i.renderedEvents=[],i.allDayLevel=0,i.moreIndicatorHeight=19,i.monthHeaderHeight=0,i.maxHeight=i.parent.options.enableMaxHeight&&!i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight;var n=i.parent.options.enableMaxHeight&&i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight;return i.maxOrIndicator=i.maxHeight||n,i.moreIndicatorHeight=i.parent.options.rowAutoHeight&&i.parent.options.ignoreWhitespace?0:i.moreIndicatorHeight,i.eventTop="Month"===i.parent.options.currentView?7:0,i}return B(t,e),t.prototype.renderAppointments=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),i=this.parent.element.querySelector(".e-work-cells");if(i){var n=this.parent.element.querySelector(".e-content-wrap");if(this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=n.scrollTop,this.parent.uiStateValues.left=n.scrollLeft),this.removeHeightProperty("e-content-table"),t.forEach((function(t){e.removedPositionedStyles(t)})),this.monthHeaderHeight=0,"Month"===this.parent.options.currentView){if(this.parent.options.rowAutoHeight){var o=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child")),r=this.parent.element.querySelector(".e-content-table").clientHeight/o.length;o.forEach((function(e){sf.base.setStyleAttribute(e,{height:r+"px"})}))}this.monthHeaderHeight=i.firstElementChild.offsetHeight}var a=i.offsetParent;a&&(this.cellHeight=a.offsetHeight/a.querySelector("tbody").childElementCount,this.cellWidth=a.offsetWidth/a.querySelector("tbody tr").childElementCount);var l=s(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates;for(var h=[],d=[],c=[],p=0;p<t.length;p++){var u=t[parseInt(p.toString(),10)];sf.base.removeClass([u],"e-event-action");var f="none"!==u.style.display;u.style.removeProperty("display"),u.blur();var g=this.getStartTime(u),m=this.getOverLapCount(u),v=this.getDataCount(u)*this.cellWidth;v=u.classList.contains("e-block-appointment")?v:v-5;var b=0,y=0,C=this.getGroupIndex(u),w=this.getCellTd(C,g);if(w){var M=sf.base.closest(w,"tr"),S=this.monthHeaderHeight+(m+1)*l+this.moreIndicatorHeight+this.eventTop,x=M.firstElementChild,N=M.sectionRowIndex;sf.base.isNullOrUndefined(d[parseInt(N.toString(),10)])&&(d[parseInt(N.toString(),10)]=w.getBoundingClientRect().height,h[parseInt(N.toString(),10)]=w.offsetTop),this.parent.options.rowAutoHeight&&this.updateCellHeight(x,S,N,d);var O=h[parseInt(N.toString(),10)],E=this.monthHeaderHeight+(u.classList.contains("e-block-appointment")?O:O+m*l)+this.eventTop,I=d[parseInt(N.toString(),10)],T=w.cellIndex;sf.base.isNullOrUndefined(c[parseInt(T.toString(),10)])&&(c[parseInt(T.toString(),10)]=w.offsetLeft),this.parent.options.enableRtl?y=w.parentElement.offsetWidth-c[parseInt(T.toString(),10)]-this.cellWidth:b=c[parseInt(T.toString(),10)],u.classList.contains("e-more-indicator")?this.updateMoreIndicator(u,y,b,O):u.classList.contains("e-block-indicator")?this.updateBlockIndicator(u,y,b,w,O):(sf.base.setStyleAttribute(u,{width:v+"px",left:b+"px",right:y+"px",top:E+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(u,w,I),u.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(u,{height:I-(E-O)+"px"}),u.classList.contains("e-appointment")&&!f&&this.parent.eventBase.wireAppointmentEvents(u))}}this.updateRowHeight(l)}},t.prototype.removedPositionedStyles=function(e){e.style.removeProperty("width"),e.style.removeProperty("height"),e.style.removeProperty("left"),e.style.removeProperty("right"),e.style.removeProperty("top"),e.style.removeProperty("visibility")},t.prototype.updateMoreIndicator=function(e,t,i,n){var s=this.cellHeight-this.moreIndicatorHeight;sf.base.setStyleAttribute(e,{top:n+s+"px",width:this.cellWidth-2+"px",left:i+"px",right:t+"px"})},t.prototype.updateBlockIndicator=function(e,t,i,n,s){this.parent.options.enableRtl?e.style.right=t+this.cellWidth-24+"px":e.style.left=i+this.cellWidth-24+"px";var o=n.firstElementChild;o&&(e.style.marginTop=o.offsetTop+2+"px"),e.style.top=s+"px",e.style.position="absolute"},t.prototype.setMaxEventHeight=function(e,t,i){var n=i-("Month"===this.parent.options.currentView?y(t.querySelector(".e-date-header")):0)-(this.maxHeight?2:this.moreIndicatorHeight);sf.base.setStyleAttribute(e,{height:n+"px","align-items":"center"})},t.prototype.getCellTd=function(e,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"][data-date="'+t.getTime()+'"]'):this.parent.element.querySelector('.e-content-wrap tbody td[data-date="'+t.getTime()+'"]')},t.prototype.getGroupIndex=function(e){var t=parseInt(e.getAttribute("data-group-index"),10);return t||0},t.prototype.getOverLapCount=function(e){return parseInt(e.getAttribute("data-index"),10)},t.prototype.getStartTime=function(e){return new Date(parseInt(e.getAttribute("data-start"),10))},t.prototype.getEndTime=function(e){return new Date(parseInt(e.getAttribute("data-end"),10))},t.prototype.getDataCount=function(e){return parseInt(e.getAttribute("data-total-length"),10)},t.prototype.updateRowHeight=function(e){if(this.parent.options.rowAutoHeight){this.updateBlockElements(),this.updateNormalEventElements(e),this.updateBlockIndicatorEle();var t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};if(this.parent.onScrollUiUpdate(t),"Month"===this.parent.options.currentView&&this.parent.element.querySelector(".e-week-number-wrapper")){var i=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child"));[].slice.call(this.parent.element.querySelectorAll(".e-week-number")).forEach((function(e,t){sf.base.setStyleAttribute(e,{height:i[parseInt(t.toString(),10)].style.height})})),this.parent.element.querySelector(".e-week-number-wrapper").scrollTop=this.parent.element.querySelector(".e-content-wrap").scrollTop}}},t.prototype.updateBlockIndicatorEle=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));e<t.length;e++){var i=t[e],n=this.getStartTime(i),s=this.getGroupIndex(i),o=this.getCellTd(s,n),r=0,a=0;this.parent.options.enableRtl?a=o.parentElement.offsetWidth-o.offsetLeft-this.cellWidth:r=o.offsetLeft,this.updateBlockIndicator(i,a,r,o,o.offsetTop)}},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],n=this.getStartTime(i),s=this.getGroupIndex(i),o=this.getCellTd(s,n),r=o.offsetHeight-this.monthHeaderHeight-this.eventTop,a=o.offsetWidth,l=Math.round(i.offsetWidth/a);l*=a;var h=0,d=0;this.parent.options.enableRtl?d=o.parentElement.offsetWidth-o.offsetLeft-this.cellWidth:h=o.offsetLeft;var c=o.offsetTop+this.monthHeaderHeight+this.eventTop;sf.base.setStyleAttribute(i,{width:l+"px",left:h+"px",right:d+"px",height:r+"px",top:c+"px"})}},t.prototype.updateNormalEventElements=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));t<i.length;t++){var n=i[t],s=this.getStartTime(n),o=this.getGroupIndex(n),r=this.getCellTd(o,s),a=this.getOverLapCount(n),l=0,h=0;this.parent.options.enableRtl?h=r.parentElement.offsetWidth-r.offsetLeft-this.cellWidth:l=r.offsetLeft;var d=this.monthHeaderHeight+r.offsetTop+a*e+this.eventTop;sf.base.setStyleAttribute(n,{left:l+"px",right:h+"px",top:d+"px"})}},t.prototype.updateCellHeight=function(e,t,i,n){t>n[parseInt(i.toString(),10)]&&(n[parseInt(i.toString(),10)]=t,sf.base.setStyleAttribute(e,{height:t+"px"}))},t.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map((function(e){return+e})),i=this.parent.activeViewOptions.showWeekend?7:e.length;t.length>0;)this.slots.push(t.splice(0,i))},t.prototype.renderEvents=function(e,t,i){var n=e.startTime,s=this.parent.getIndexOfDate(this.dateRender,d(n)),o=e.data.count*this.cellWidth-5,r=this.workCells[parseInt(s.toString(),10)],a=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(a,{width:o+"px"}),this.renderEventElement(a,r)},t.prototype.renderEventElement=function(e,t){var i=sf.base.createElement("div",{className:"e-appointment-wrapper"});i.appendChild(e),t.appendChild(i)},t}(L),U=(x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),H=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i.baseCssClass="e-vertical-view",i}return U(t,e),t.prototype.onDataReady=function(){(this.removeVirtualMask(),this.parent.activeViewOptions.timeScale.enable)?new P(this.parent).renderAppointments():new R(this.parent).renderAppointments()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.onVirtualScroll(),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.uiStateValues.top=t.scrollTop,this.parent.uiStateValues.left=t.scrollLeft,this.parent.onClosePopup(),this.parent.setPersistence()},t.prototype.onAdaptiveMove=function(e){this.parent.uiStateValues.action&&e.cancelable&&e.preventDefault()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();sf.base.isNullOrUndefined(t)||(t.scrollTop=e.scrollTop)},t.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.querySelector(".e-date-header-wrap"),i=this.getHeaderBarHeight(),n=this.getLeftPanelElement(),s=this.getContentAreaElement(),o=this.getDatesHeaderElement(),r=this.parent.element.offsetHeight-i-o.offsetHeight;this.setContentHeight(s,n,r),this.setColWidth(s);var a=v();o.firstElementChild.style[e.cssProperties.rtlBorder]="",o.style[e.cssProperties.rtlPadding]="";var l=!this.parent.options.enableAllDayScroll||!(s.offsetWidth-s.clientWidth<=t.offsetWidth-t.clientWidth&&t.classList.contains("e-all-day-scroll"));s.offsetWidth-s.clientWidth>0&&l?(o.firstElementChild.style[e.cssProperties.border]=a>0?"1px":"0px",o.style[e.cssProperties.padding]=a>0?a-1+"px":"0px"):(o.firstElementChild.style[e.cssProperties.border]="",o.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.isTimelineView()&&(s.scrollTop=this.parent.uiStateValues.top),this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(n&&(n.scrollTop=this.parent.uiStateValues.top),s.scrollTop=this.parent.uiStateValues.top,s.scrollLeft=this.parent.uiStateValues.left)),this.highlightCurrentTime();var h=this.parent.element.querySelector(".e-table-wrap table");h&&!h.classList.contains("e-outer-table")&&sf.base.addClass([h],"e-outer-table"),this.retainScrollPosition()},t.prototype.setContentHeight=function(e,t,i){sf.base.isNullOrUndefined(t)||(t.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i)},t.prototype.scrollToWorkHour=function(){if(this.parent.options.workHours.highlight){var e=this.element.querySelector(".e-work-hours");e&&(this.getContentAreaElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},t.prototype.scrollToHour=function(e,t){var i=this.parent.getStartEndTime(e);if(!sf.base.isNullOrUndefined(t)){var n=this.parent.getMsFromDate(new Date(d(new Date(+t)).getTime())),s=this.element.querySelector('.e-header-cells[data-date="'+n+'"]');if(s)if(this.parent.options.enableRtl){var o=this.element.querySelector(".e-content-table");this.getContentAreaElement().scrollLeft=-(o.offsetWidth-s.offsetLeft-s.offsetWidth)}else this.getContentAreaElement().scrollLeft=s.offsetLeft}sf.base.isNullOrUndefined(i)||(this.getContentAreaElement().scrollTop=this.getTopFromDateTime(i))},t.prototype.scrollToDate=function(e){this.scrollToHour(null,e)},t.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},t.prototype.highlightCurrentTime=function(){var e=this,t=[].slice.call(this.element.querySelectorAll(".e-current-day"));t.length>0&&sf.base.removeClass(t,"e-current-day");for(var i='.e-date-header[data-date="'+C(d(new Date(this.parent.getCurrentTime()))).getTime().toString()+'"]',n=0,s=t=[].slice.call(this.element.querySelectorAll(i));n<s.length;n++){var o=s[n];sf.base.addClass([o],"e-current-day")}if(this.parent.activeViewOptions.timeScale.enable&&!(this.parent.isTimelineView()&&this.parent.activeViewOptions.headerRows&&this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option))if(this.parent.options.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime())){var r=this.getCurrentTimeIndicatorIndex(),a=this.getLeftPanelElement();if(sf.base.isNullOrUndefined(a)||sf.base.removeClass(a.querySelectorAll(".e-hide-childs"),"e-hide-childs"),r.length>0)[].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval((function(){e.changeCurrentTimePosition()}),6e4));else this.clearCurrentTimeIndicatorTimer()}else this.clearCurrentTimeIndicatorTimer()},t.prototype.getCurrentTimeIndicatorIndex=function(){for(var e=[],t=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),i=C(d(new Date(this.parent.getCurrentTime()))).getTime().toString(),n=0,s=t.length;n<s;n++)t[parseInt(n.toString(),10)].getAttribute("data-date")===i&&e.push(n);return e},t.prototype.clearCurrentTimeIndicatorTimer=function(){if(!sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)){window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements();var e=this.parent.element.querySelector(".e-table-wrap table");e&&this.parent.options.enableRtl&&this.parent.isTimelineView()&&sf.base.removeClass([e],"e-outer-table")}},t.prototype.removeCurrentTimeIndicatorElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));e<t.length;e++){var i=t[e];sf.base.remove(i)}},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],i=this.getTopFromDateTime(this.parent.getCurrentTime()),n=sf.base.formatUnit(i),s=Math.floor(i/t.cells[0].offsetHeight);if(!sf.base.isNullOrUndefined(s)&&!isNaN(s)){for(var o=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),r=0,a=e[0];r<a;r++)o[parseInt(r.toString(),10)].appendChild(sf.base.createElement("div",{className:"e-previous-timeline",styles:"top:"+n}));for(var l=0,h=e;l<h.length;l++){var d=h[l];o[parseInt(d.toString(),10)].appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:"top:"+n}))}var c=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+n}),p=this.getLeftPanelElement();if(!sf.base.isNullOrUndefined(p)){var u=[].slice.call(p.querySelectorAll("tr"));s<=u.length&&(sf.base.removeClass(p.querySelectorAll(".e-hide-childs"),"e-hide-childs"),sf.base.addClass([u[parseInt(s.toString(),10)].lastElementChild],"e-hide-childs"),sf.base.prepend([c],p),c.style.top=sf.base.formatUnit(c.offsetTop-c.offsetHeight/2))}}}},t.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellHeight=function(){return this.element.querySelector(".e-work-cells").offsetHeight},t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap");for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireMouseEvents(i)}for(var n=0,s=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells"));n<s.length;n++){i=s[n];sf.base.EventHandler.clearEvents(i),this.wireCellEvents(i)}this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var o=this.element.querySelector(".e-content-wrap"),r=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(r),this.wireCellEvents(r),sf.base.EventHandler.clearEvents(o),sf.base.EventHandler.add(o,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(o,sf.base.Browser.touchMoveEvent,this.onAdaptiveMove,this),this.parent.setDimensions()},t.prototype.wireCellEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e))},t.prototype.wireMouseEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-time-cells-wrap")},t.prototype.getEndDateFromStartDate=function(e){var t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i},t.prototype.destroy=function(){if(this.clearCurrentTimeIndicatorTimer(),this.parent.removeNewEventElement(),this.element){var e=this.getContentAreaElement();e&&sf.base.EventHandler.remove(e,"scroll",this.onContentScroll),this.element=null}},t}(k),F=(N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Y=function(e){function t(t,i){var n=e.call(this,t)||this;n.startHour=n.parent.activeView.getStartHour(),n.endHour=n.parent.activeView.getEndHour(),n.slotCount=n.parent.activeViewOptions.timeScale.slotCount,n.interval=n.parent.activeViewOptions.timeScale.interval,n.day=0,n.rowIndex=0,n.renderType=i;var s=[].slice.call(n.parent.element.querySelectorAll(".e-content-table tbody tr"));return n.dayLength=0===s.length?0:s[0].children.length,n.content=n.parent.element.querySelector(".e-content-table"),n}return F(t,e),t.prototype.getSlotDates=function(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows[this.parent.activeViewOptions.headerRows.length-1].option?(this.renderType="day",this.cellWidth=Math.ceil(this.content.getBoundingClientRect().width)/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length},t.prototype.renderAppointments=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),i=this.parent.element.querySelector(".e-work-cells");if(i){var n=this.parent.element.querySelector(".e-content-wrap");if(this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=n.scrollTop,this.parent.uiStateValues.left=n.scrollLeft),this.removeHeightProperty("e-content-table"),t.forEach((function(t){e.removedPositionedStyles(t)})),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){this.removeHeightProperty("e-resource-column-table");var o=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),r=i.getBoundingClientRect().height;o.forEach((function(e){e.style.height=r+"px"}))}var a=i.offsetParent;a&&(this.cellHeight=a.offsetHeight/a.querySelector("tbody").childElementCount,this.cellWidth=a.offsetWidth/a.querySelector("tbody tr").childElementCount);var l=s(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates,this.getSlotDates();for(var h=[],c=0;c<t.length;c++){var p=t[parseInt(c.toString(),10)];sf.base.removeClass([p],"e-event-action"),p.blur();var u="none"!==p.style.display;p.style.removeProperty("display");var f=w(this.getStartTime(p)),g=w(this.getEndTime(p));if(this.day=this.parent.getIndexOfDate(this.dateRender,d(new Date(f.getTime()))),this.day>=0){var m=this.getOverLapCount(p),v=this.getDataCount(p),b="true"===this.isAllDayData(p),y=this.getEventWidth(f,g,b,v);y="day"===this.renderType?y-2:y;var C=0,M=0,S=this.getPosition(f,g,!p.classList.contains("e-more-indicator")&&b,this.day);y=y<=0?this.cellWidth:y;var x=this.getGroupIndex(p),N=p.classList.contains("e-block-appointment")?0:(this.maxHeight?0:2)+m*(l+2);this.parent.options.enableRtl?M=S:C=S;var O=(m+1)*(l+2)+this.moreIndicatorHeight;if(p.classList.contains("e-more-indicator")){var E=this.cellHeight-this.moreIndicatorHeight;p.style.top=0+E+"px",p.style.width=this.cellWidth+"px",p.style.left=Math.floor(C/this.cellWidth)*this.cellWidth+"px",p.style.right=Math.floor(M/this.cellWidth)*this.cellWidth+"px"}else if(p.classList.contains("e-block-indicator"))S=Math.floor(S/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.parent.options.enableRtl?p.style.right=S+"px":p.style.left=S+"px",p.style.top=0+this.cellHeight-18+"px";else if(sf.base.setStyleAttribute(p,{width:y+"px",left:C+"px",right:M+"px",top:N+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(p),p.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(p,{height:this.cellHeight-1+"px"}),p.classList.contains("e-appointment")&&!u&&this.parent.eventBase.wireAppointmentEvents(p),this.parent.options.rowAutoHeight){var I=this.getFirstChild(x);sf.base.isNullOrUndefined(h[parseInt(x.toString(),10)])&&(h[parseInt(x.toString(),10)]=Math.ceil(I.getBoundingClientRect().height),p.parentElement.style.height=h[parseInt(x.toString(),10)]+"px"),this.updateCellHeight(I,O,x,h)}}}this.updateRowHeight()}},t.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){this.updateBlockElements();var e=sf.base.isNullOrUndefined(this.parent.activeViewOptions.group.resources)||0===this.parent.activeViewOptions.group.resources.length,t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:e,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight(),this.parent.onScrollUiUpdate(t)}},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],n=parseInt(i.getAttribute("data-group-index"),10),s=this.getFirstChild(n),o=s.offsetWidth;i.style.height=s.offsetHeight+"px";var r=Math.round(i.offsetWidth/o);i.style.width=o*r+"px"}for(var a=0,l=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));a<l.length;a++){i=l[a],n=parseInt(i.getAttribute("data-group-index"),10);i.style.top=this.getFirstChild(n).offsetHeight-18+"px"}},t.prototype.setMaxEventHeight=function(e){sf.base.setStyleAttribute(e,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},t.prototype.getFirstChild=function(e){var t="";return this.parent.activeViewOptions.group.resources.length>0&&(t='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+t)},t.prototype.updateCellHeight=function(e,t,i,n){if(t>n[parseInt(i.toString(),10)]){if(n[parseInt(i.toString(),10)]=t,sf.base.setStyleAttribute(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var s=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+i+'"]'),o=this.parent.element.querySelector('.e-appointment-container[data-group-index="'+i+'"]');s&&sf.base.setStyleAttribute(s,{height:t+"px"}),o&&sf.base.setStyleAttribute(o,{height:t+"px"})}var r=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");r&&sf.base.setStyleAttribute(r,{height:t+"px"})}},t.prototype.isAllDayData=function(e){return e.getAttribute("data-all-day")},t.prototype.getEventWidth=function(e,t,i,n){return"day"===this.renderType||i?n*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,n)},t.prototype.getSameDayEventsWidth=function(e,t){return(b(t)-b(e))/6e4*(this.cellWidth*this.slotCount)/this.interval},t.prototype.getSpannedEventsWidth=function(e,t,i){var n,s=i*this.slotsPerDay*this.cellWidth,o=f(d(new Date(e.getTime())),this.startHour,this.endHour),r=this.getSameDayEventsWidth(o.startHour,e);if(-1===this.parent.getIndexOfDate(this.dateRender,d(new Date(t.getTime()))))n=0;else{var a=f(d(new Date(t.getTime())),this.startHour,this.endHour);n=this.getSameDayEventsWidth(t,a.endHour),n=this.slotsPerDay*this.cellWidth===n?0:n}var l=r+n;return s>l?s-l:s-r},t.prototype.isSameDay=function(e,t){return this.parent.getIndexOfDate(this.dateRender,d(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,d(new Date(t.getTime())))},t.prototype.getAppointmentLeft=function(e,t,i){var n=this.isSameDay(t,e.startHour)?(b(t)-b(e.startHour))/(6e4*this.interval)*this.slotCount:0;return 0===i?n:Math.round((b(e.endHour)-b(e.startHour))/6e4/this.interval*this.slotCount)*i+n},t.prototype.getPosition=function(e,t,i,n){if("day"===this.renderType||i)return n*this.slotsPerDay*this.cellWidth;var s=f(d(new Date(this.dateRender[parseInt(n.toString(),10)].getTime())),this.startHour,this.endHour);return(s.endHour.getTime()<=t.getTime()&&s.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(s,s.startHour,n):s.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(s,e,n):s.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(s,s.startHour,n):this.getAppointmentLeft(s,e,n))*this.cellWidth},t.prototype.getRowTop=function(e,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?t?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"]').offsetTop:this.cellHeight*e:0},t.prototype.renderEvents=function(e,t,i){var n=e.data,s=e.startTime,o=e.endTime;this.dateRender=this.parent.activeView.renderDates,this.day=this.parent.getIndexOfDate(this.dateRender,d(new Date(s.getTime()))),this.rowIndex=t;var r=this.getCellTd(),a=this.eventHeight,l=n.count,h=this.getEventWidth(s,o,e.isAllDay,l);h="day"===this.renderType?h-2:h;var c=this.getPosition(s,o,e.isAllDay,this.day);h=h<=0?this.cellWidth:h;var p=2+(a+2),u=this.parent.options.enableRtl?0:c,f=this.parent.options.enableRtl?c:0,g=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(g,{width:h+"px",left:u+"px",right:f+"px",top:p+"px"}),this.renderEventElement(g,r)},t.prototype.getCellTd=function(){var e=this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex;return this.eventContainers[parseInt(e.toString(),10)]},t}(R),q=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),_=function(e){function t(t){var i=e.call(this,t)||this;return i.baseCssClass="e-timeline-view",i}return q(t,e),t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.options.workHours.start),t=this.isWorkDay(this.parent.options.selectedDate)&&this.parent.options.workHours.highlight&&!sf.base.isNullOrUndefined(e)?new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.options.selectedDate).setHours(0,0,0,0),i=this.getScrollableElement(t);sf.base.isNullOrUndefined(i)&&(e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour),t=new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0),i=this.getScrollableElement(t)),i&&(this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-i.offsetLeft-i.offsetWidth):i.offsetLeft)},t.prototype.getScrollableElement=function(e){var t='[data-date="'+this.parent.getMsFromDate(new Date(e))+'"]';return this.element.querySelector(t)},t.prototype.scrollToHour=function(e,t){var i,n,s;if(t&&(n=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(t)))>=0&&(i=t,!sf.base.isNullOrUndefined(e))){var o=e.split(":");2===o.length&&(i=new Date(t.setHours(parseInt(o[0],10),parseInt(o[1],10),0)))}(i=sf.base.isNullOrUndefined(t)?this.parent.getStartEndTime(e):i,sf.base.isNullOrUndefined(i))||(s=sf.base.isNullOrUndefined(e)||!this.parent.activeViewOptions.timeScale.enable?n*this.getWorkCellWidth():sf.base.isNullOrUndefined(t)?this.getLeftFromDateTime(null,i):this.getLeftFromDateTime([n],i),this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-s:s)},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),i=this.element.querySelector(".e-content-table").offsetHeight,n=this.element.querySelector(".e-date-header-wrap");if(this.element.querySelector(".e-content-wrap").appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:(this.parent.options.enableRtl?"right":"left")+":"+sf.base.formatUnit(t)+"; height:"+sf.base.formatUnit(i)})),this.parent.virtualScrollModule){var s=this.parent.element.querySelector(".e-current-timeline"),o=this.parent.element.querySelector(".e-content-wrap table");sf.base.setStyleAttribute(s,{transform:o.style.transform})}var r=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time"});n.appendChild(r),r.style[this.parent.options.enableRtl?"right":"left"]=sf.base.formatUnit(t-r.offsetWidth/2)}},t.prototype.getLeftFromDateTime=function(e,t){var i=this.getStartHour(),n=this.getEndHour(),s=0,o=60*(t.getHours()-i.getHours())+(t.getMinutes()-i.getMinutes());if(!sf.base.isNullOrUndefined(e)){var r=0===n.getHours()?24:n.getHours();0!==e[0]&&(s=e[0]*(60*(r-i.getHours()))+(n.getMinutes()-i.getMinutes())),o=s+o}return o*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},t.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},t.prototype.renderEvents=function(){},t.prototype.onDataReady=function(){(this.removeVirtualMask(),this.parent.activeViewOptions.timeScale.enable)?new Y(this.parent,"hour").renderAppointments():new Y(this.parent,"day").renderAppointments()},t}(H),W=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),V=function(e){function t(t){var i=e.call(this,t)||this;return i.dayNameFormat="wide",i.isInverseTableSelect=!1,i.allDayLevel=0,i}return W(t,e),t.prototype.onDataReady=function(e){if("MonthAgenda"!==this.parent.options.currentView){var t=new R(this.parent);this.removeVirtualMask(),t.renderAppointments()}else this.parent.eventBase.removeSelectedAppointmentClass()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.onVirtualScroll(),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target),this.parent.uiStateValues.top=e.target.scrollTop,this.parent.uiStateValues.left=e.target.scrollLeft,this.parent.setPersistence()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-week-number-wrapper")},t.prototype.onScrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),n=this.getContentAreaElement(),s=this.parent.element.offsetHeight-t-i.offsetHeight,o=this.getLeftPanelElement();"auto"!==this.parent.options.height?this.setContentHeight(n,o,s):(n.style.height="auto",o&&(o.style.height="auto"));var r=v();if(i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=r>0?"1px":"0px",i.style[e.cssProperties.padding]=r>0?r-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition||!e.isPreventScrollUpdate&&"TimelineMonth"===this.parent.options.currentView){var a="TimelineMonth"===this.parent.options.currentView?this.parent.uiStateValues.top:e.scrollPosition.top;o&&(o.scrollTop=a),n.scrollTop=a,this.parent.uiStateValues.isInitial?(this.scrollToSelectedDate(),this.parent.uiStateValues.isInitial=!1):n.scrollLeft="TimelineMonth"===this.parent.options.currentView?this.parent.uiStateValues.left:e.scrollPosition.left}else this.scrollToSelectedDate();this.retainScrollPosition()},t.prototype.scrollToSelectedDate=function(){var e=this.element.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.options.selectedDate)+'"]'),t=this.getContentAreaElement();sf.base.isNullOrUndefined(e)?t.scrollLeft=0:t.scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-e.offsetLeft-e.offsetWidth):e.offsetLeft,0===t.scrollLeft&&this.parent.uiStateValues.isInitial&&(this.parent.uiStateValues.left=0)},t.prototype.setContentHeight=function(e,t,i){e.style.height="auto","Month"===this.parent.options.currentView&&(e.style.height=sf.base.formatUnit(i)),t&&("MonthAgenda"===this.parent.options.currentView&&(i=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e)))},t.prototype.renderLayout=function(){"Month"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||(this.parent.eventBase&&this.parent.eventBase.removeHeightProperty("e-content-table"),"Month"===this.parent.options.currentView&&this.parent.element.querySelector(".e-week-number-wrapper")&&[].slice.call(this.parent.element.querySelectorAll(".e-week-number")).forEach((function(e){e.style.height=""})));this.element=this.parent.element.querySelector(".e-table-wrap");for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireCellEvents(i)}var n=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(n),this.wireCellEvents(n),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var s=this.element.querySelector(".e-content-wrap");sf.base.EventHandler.clearEvents(s),sf.base.EventHandler.add(s,"scroll",this.onContentScroll,this),this.renderAppointmentContainer(),this.parent.setDimensions(),this.parent.uiStateValues.isCustomMonth&&(this.parent.uiStateValues.isCustomMonth=!1)},t.prototype.wireCellEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},t.prototype.renderAppointmentContainer=function(){},t.prototype.getMonthStart=function(e){var t=a(this.parent.uiStateValues.isCustomMonth&&"Month"===this.parent.options.currentView&&!sf.base.isNullOrUndefined(this.parent.activeViewOptions.displayDate)?new Date(this.parent.activeViewOptions.displayDate):!this.parent.uiStateValues.isCustomMonth&&this.isCustomMonth()?e:l(e),this.parent.activeViewOptions.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){return this.isCustomMonth()?p(this.getMonthStart(e),7*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6)-1):p(a(h(u(e,this.parent.activeViewOptions.interval-1)),this.parent.activeViewOptions.firstDayOfWeek),6)},t.prototype.getRenderDates=function(e){var t=[],i=d(this.parent.options.selectedDate),n=this.getMonthStart(i),s=this.getMonthEnd(i);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&t.push(n),n=p(n,1)}while(n.getTime()<=s.getTime());return e||(this.renderDates=t),t},t.prototype.isCustomMonth=function(){return"Month"===this.parent.options.currentView&&(!sf.base.isNullOrUndefined(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0)},t.prototype.getEndDateFromStartDate=function(e){return p(new Date(e.getTime()),1)},t.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.removeNewEventElement(),this.element=null)},t}(k),X=(I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Q=function(e){function t(t){return e.call(this,t)||this}return X(t,e),t.prototype.renderAppointmentContainer=function(){"auto"!==this.getContentAreaElement().style.height&&this.setEventWrapperHeight()},t.prototype.setEventWrapperHeight=function(){var e=this.getHeaderBarHeight(!0),t=this.getContentAreaElement().firstElementChild,i=this.element.querySelector(".e-date-header-wrap"),n=this.parent.element.offsetHeight-e-i.offsetHeight-t.offsetHeight,s=this.element.querySelector(".e-wrapper-container"),o=this.element.querySelector(".e-appointment-wrap");"auto"!==this.parent.options.height&&(s.style.height=o.style.height=sf.base.formatUnit(n))},t}(V),Z=(T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),G=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i}return Z(t,e),t.prototype.onDataReady=function(e){var t=new Y(this.parent,"day");this.removeVirtualMask(),t.renderAppointments()},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.setContentHeight=function(e,t,i){t&&(t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height=sf.base.formatUnit(i)},t.prototype.getMonthStart=function(e){var t=l(d(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){var t=l(d(e));return h(u(new Date(+t),this.parent.activeViewOptions.interval-1))},t}(V),K=(D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),J=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!1,i}return K(t,e),t.prototype.renderLayout=function(){if(this.element=this.parent.element.querySelector(".e-table-wrap"),"TimelineYear"===this.parent.options.currentView){var e="Horizontal"===this.parent.activeViewOptions.orientation,t=this.parent.activeViewOptions.group.resources.length>0;this.isInverseTableSelect=!(e&&!t);for(var i=0,n=[].slice.call(this.element.querySelectorAll(".e-work-cells:not(.e-other-month)"));i<n.length;i++){var s=n[i];sf.base.EventHandler.clearEvents(s),this.wireEvents(s,"cell")}this.parent.virtualScrollModule&&!e&&this.parent.virtualScrollModule.setTranslateValue()}this.wireEvents(this.element.querySelector(".e-content-wrap"),"scroll"),this.parent.setDimensions()},t.prototype.onContentScroll=function(e){var t=e.target;this.parent.onVirtualScroll(),sf.base.isNullOrUndefined(this.element)&&(this.element=t);var i=this.getDatesHeaderElement();i&&(i.firstElementChild.scrollLeft=t.scrollLeft);var n=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");n&&(n.scrollTop=t.scrollTop),this.parent.isAdaptive||(this.parent.uiStateValues.top=e.target.scrollTop),this.parent.uiStateValues.left=e.target.scrollLeft,this.parent.setPersistence()},t.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.offsetHeight-this.getHeaderBarHeight(),i=this.element.querySelector(".e-date-header-container");i&&(t-=i.offsetHeight);var n=this.element.querySelector(".e-content-wrap"),s=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap"),o="auto"===this.parent.options.height;if(n&&(n.style.height=o?"auto":sf.base.formatUnit(t)),s&&(s.style.height=o?"auto":sf.base.formatUnit(t-this.getScrollXIndent(n))),!this.parent.isAdaptive&&i){var r=v();n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=r>0?"1px":"0px",i.style[e.cssProperties.padding]=r>0?r-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]="")}this.resetColWidth(),this.setColWidth(this.getContentAreaElement()),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.uiStateValues.isInitial=!1,this.parent.uiStateValues.top=this.parent.uiStateValues.left=0):(s&&(s.scrollTop=this.parent.uiStateValues.top),n.scrollTop=this.parent.uiStateValues.top,n.scrollLeft=this.parent.uiStateValues.left)),this.retainScrollPosition()},t.prototype.onDataReady=function(){if(this.removeVirtualMask(),"TimelineYear"===this.parent.options.currentView){var e=this.parent.options.rowAutoHeight&&this.parent.options.ignoreWhitespace?0:19;this.element=this.parent.element.querySelector(".e-table-wrap"),this.removeCellHeight();var t=this.element.querySelector(".e-work-cells:not(.e-other-month)"),i=0,n=0,o=t.offsetParent;o&&(i=o.offsetHeight/o.querySelector("tbody").childElementCount,n=o.offsetWidth/o.querySelector("tbody tr").childElementCount);var r=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),a=[].slice.call(o.querySelectorAll("tbody tr"));r.forEach((function(e,t){e.classList.contains("e-hidden")?e.removeAttribute("style"):e.style.height=a[parseInt(t.toString(),10)].getBoundingClientRect().height+"px"}));for(var l=t.querySelector(".e-date-header"),h=sf.base.isNullOrUndefined(l)?0:y(l),d=s(this.element.querySelector(".e-event-table"),"e-appointment"),c=void 0,p=void 0,u=[],f=void 0,g=this.element.querySelectorAll(".e-appointment, .e-more-indicator"),m=0;m<g.length;m++){var v=g[parseInt(m.toString(),10)];sf.base.removeClass([v],"e-event-action");var b="none"!==v.style.display;v.style.removeProperty("display"),v.blur();var C=void 0,w=void 0,M=void 0,S=void 0;if(C=null!=this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.element.querySelector('.e-work-cells[data-date="'+v.getAttribute("data-date")+'"][data-group-index="'+v.getAttribute("data-group-index")+'"]'):this.element.querySelector('.e-work-cells[data-date="'+v.getAttribute("data-date")+'"]'),this.parent.options.enableRtl?p=C.cellIndex*n:c=C.cellIndex*n,!sf.base.isNullOrUndefined(C)){if(v.classList.contains("e-appointment")){var x=parseInt(v.getAttribute("data-index"),10);w=h+d*x+2,this.parent.options.rowAutoHeight||(M=this.parent.options.enableMaxHeight&&!this.parent.options.enableIndicator?i-h-2:this.parent.options.enableMaxHeight&&this.parent.options.enableIndicator?i-h-e:d),S=n*parseInt(v.getAttribute("data-total-length"),10)-2,b||this.parent.eventBase.wireAppointmentEvents(v);var N=(x+1)*d+(0!==e?e:2)+h;if(this.parent.options.rowAutoHeight&&i<N){var O=C.parentNode,E=O.sectionRowIndex;sf.base.isNullOrUndefined(u[parseInt(E.toString(),10)])&&(u[parseInt(E.toString(),10)]=Math.ceil(O.getBoundingClientRect().height),v.parentElement.style.height=u[parseInt(E.toString(),10)]+"px"),this.updateCellHeight(C,N,E,u)}}else sf.base.isNullOrUndefined(f)&&(f=v.getBoundingClientRect().height),w=i-f,S=n-2;v.style.width=S+"px",v.style.height=M+"px",v.style.right=p+"px",v.style.left=c+"px",v.style.top=w+"px"}}this.updateRowHeight()}},t.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){var e={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight(),this.parent.onScrollUiUpdate(e)}},t.prototype.updateCellHeight=function(e,t,i,n){if(t>n[parseInt(i.toString(),10)]){n[parseInt(i.toString(),10)]=t,sf.base.setStyleAttribute(e.parentElement.querySelector("td"),{height:t+"px"});var s=[].slice.call(this.parent.element.querySelectorAll(".e-event-table .e-event-container"));if(sf.base.setStyleAttribute(s[parseInt(i.toString(),10)],{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var o=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');o&&sf.base.setStyleAttribute(o,{height:t+"px"})}var r=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");r&&sf.base.setStyleAttribute(r,{height:t+"px"})}},t.prototype.removeCellHeight=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-month-header-wrapper tbody tr,.e-resource-column-table tbody tr,.e-content-table tbody tr"));e<t.length;e++){t[e].firstElementChild.style.height=""}},t.prototype.getStartDate=function(){return new Date(this.parent.options.selectedDate.getFullYear(),this.parent.activeViewOptions.firstMonthOfYear-1,1)},t.prototype.getEndDate=function(){return p(u(this.getStartDate(),this.parent.activeViewOptions.monthsCount),-1)},t.prototype.getEndDateFromStartDate=function(e){var t=new Date(e.getTime());return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=h(t)),p(new Date(t.getTime()),1)},t.prototype.wireEvents=function(e,t){this.parent.isPrintSchedule||("cell"===t?"TimelineYear"===this.parent.options.currentView&&(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)):sf.base.EventHandler.add(e,"scroll",this.onContentScroll,this))},t.prototype.scrollToDate=function(e){var t=this.parent.getMsFromDate(new Date(d(new Date(+e)).getTime()));if("TimelineYear"===this.parent.options.currentView){if(null!==this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var i=l(new Date(+e));t=+this.parent.getMsFromDate(new Date(d(new Date(+i)).getTime()))}if(o=this.element.querySelector('[data-date="'+t+'"]')){var n=this.getContentAreaElement();if(this.parent.options.enableRtl){var s=this.element.querySelector(".e-content-table");n.scrollLeft=-(s.offsetWidth-o.offsetLeft-o.offsetWidth)}else n.scrollLeft=o.offsetLeft;n.scrollTop=o.offsetTop}}else{var o;(o=this.element.querySelector('.e-work-cells:not(.e-other-month)[data-date="'+t+'"]'))&&(o=sf.base.closest(o,".e-month-calendar"),this.getContentAreaElement().scrollTop=o.offsetTop)}},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.element=null)},t}(k),$=(j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ee=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-agenda-view",i.isInverseTableSelect=!1,i.translateY=0,i.itemCount=0,i.elementHeight=70,i.bufferCount=3,i.renderedCount=10,i}return $(t,e),t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap"),this.parent.isPrintSchedule||this.wireEvents(),this.parent.setDimensions()},t.prototype.onDataReady=function(e,t,i){if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.options.enablePersistence)this.retainScrollPosition();else if(this.parent.activeViewOptions.allowVirtualScrolling){var n=this.element.querySelector(".e-virtual-track");n||(n=sf.base.createElement("div",{className:"e-virtual-track"}));var s=this.element.querySelector(".e-content-wrap");n.style.height=t*this.elementHeight-s.offsetHeight+"px",s.appendChild(n),i&&(s.scrollTop=this.translateY=0,this.setTranslate(s)),this.itemCount=t}},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling)},t.prototype.agendaScrolling=function(){if(this.parent.onClosePopup(),this.parent.activeViewOptions.allowVirtualScrolling){var e=this.element.querySelector(".e-content-wrap"),t=this.element.querySelector(".e-agenda-item");this.elementHeight=t?t.offsetHeight:this.elementHeight;var i=void 0;e.scrollTop-this.translateY<0?(i=~~(e.scrollTop/this.elementHeight),this.translateY=e.scrollTop,this.setTranslate(e),this.beforeInvoke(i)):e.scrollTop-this.translateY>this.elementHeight*this.bufferCount&&(i=(i=~~(e.scrollTop/this.elementHeight))>this.itemCount?this.itemCount-this.renderedCount:i,this.translateY=e.scrollTop,this.translateY>this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight&&(this.translateY=this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight),this.setTranslate(e),this.beforeInvoke(i))}this.parent.setPersistence()},t.prototype.beforeInvoke=function(e){var t=this;window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){t.triggerScrolling(e)}),100)},t.prototype.triggerScrolling=function(e){this.parent.dotNetRef.invokeMethodAsync("AgendaScroll",e)},t.prototype.setTranslate=function(e){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"})},t.prototype.getEndDateFromStartDate=function(e){return d(p(e,1))},t.prototype.onScrollUiUpdate=function(){var e=this.getHeaderBarHeight(),t=this.element.querySelector(".e-content-wrap");"auto"!==this.parent.options.height?t.style.height=sf.base.formatUnit(this.parent.element.offsetHeight-e):t.style.height="auto"},t.prototype.scrollToDate=function(e){var t=this.parent.getMsFromDate(new Date(d(new Date(+e)).getTime())),i=this.element.querySelector('.e-agenda-cells[data-date="'+t+'"]');i&&(this.getContentAreaElement().scrollTop=i.offsetTop)},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.element=null)},t}(k),te=function(){function e(e){this.parent=e}return e.prototype.cellMouseDown=function(e){this.isPreventAction(e)||this.parent.onCellMouseDown(e)},e.prototype.cellClick=function(e){if(this.parent.isTapHold&&this.parent.onQuickPopupClose(),sf.base.isNullOrUndefined(this.parent.morePopup)||this.parent.morePopup.hide(),!(this.isPreventAction(e)||sf.base.closest(e.target,".e-disable-dates")||e.detail>1)){var t=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!(sf.base.isNullOrUndefined(t)||t.classList.contains("e-header-cells")&&"Month"===this.parent.options.currentView)){if(!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-new-event")))return(o=sf.base.extend({},this.parent.activeCellsData,null,!0)).startTime=C(o.startTime),o.endTime=C(o.endTime),void this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",o,"Add");var i=sf.base.closest(e.target,".e-navigate"),n=this.parent.getNavigateView(),s=this.parent.options.currentView===n;if(sf.base.isNullOrUndefined(i)||s){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView)return void this.parent.onClosePopup();if(this.parent.isAdaptive&&(e.target.classList.contains("e-more-indicator")||sf.base.closest(e.target,".e-more-indicator")))return;var o;if((t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells"))&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.currentCell=t,(o=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"cellClick"},!0)).startTime=C(o.startTime),o.endTime=C(o.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",o)}else{var r=this.parent.getDateFromElement(t);if(!sf.base.isNullOrUndefined(r)&&!this.parent.isAdaptive){var a=new Date(this.parent.getMsFromDate(r));sf.base.isNullOrUndefined(this.parent.morePopup)||this.parent.morePopup.hide(),this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",a,this.parent.getNavigateView())}}}}},e.prototype.cellDblClick=function(e){if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(e)||sf.base.closest(e.target,".e-disable-dates"))){var t=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"OnCellDoubleClick"},!0);t.startTime=C(t.startTime),t.endTime=C(t.endTime),this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",t,"Add")}},e.prototype.isPreventAction=function(e){if(sf.base.closest(e.target,".e-navigate"))return!1;if(sf.base.closest(e.target,".e-appointment-wrapper")&&!sf.base.closest(e.target,".e-more-indicator"))return!0;var t=sf.base.closest(e.target,".e-appointment");return!sf.base.isNullOrUndefined(t)||(t=sf.base.closest(e.target,".e-header-cells"),!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t)))},e}(),ie=function(){function e(e){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",altT:"alt+t",enter:"enter",escape:"escape",delete:"delete",backspace:"backspace",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab",fTwelve:"f12"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"altT":this.parent.options.selectedDate.getTime()!==(new Date).setHours(0,0,0,0)&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Today");break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Previous");break;case"ctrlRightArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Next");break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":case"backspace":this.processDelete();break;case"escape":this.processEscape();break;case"fTwelve":this.parent.options.allowInline&&this.parent.inlineModule&&(e.preventDefault(),this.processFTwelve(e))}},e.prototype.processFTwelve=function(e){var t=e.target;(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells"))&&(this.parent.activeCellsData=this.getSelectedElements(t),this.parent.inlineModule.cellEdit()),t.classList.contains("e-appointment")&&t.click()},e.prototype.onCellMouseDown=function(e){if(!e.shiftKey&&(this.initialTarget=this.getClosestCell(e),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView&&this.initialTarget&&(e.target.classList.contains("e-work-cells")&&3!==e.which&&(this.parent.removeSelectedClass(),sf.base.EventHandler.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),e.target.classList.contains("e-all-day-cells")&&3!==e.which))){this.parent.removeSelectedClass();var t=this.parent.getAllDayRow();sf.base.EventHandler.add(t,"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(t,"mouseup",this.onMoveup,this)}},e.prototype.onMouseSelection=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));sf.base.addClass(t,"e-allow-select");var i=this.parent.boundaryValidation(e.pageY,e.pageX);if(i.bottom||i.top||i.left||i.right){var n=this.parent.element.querySelector(".e-content-wrap"),s=n.offsetHeight<=n.scrollHeight&&n.scrollTop>=0&&n.scrollTop+n.offsetHeight<=n.scrollHeight,o=n.offsetWidth<=n.scrollWidth&&n.scrollLeft>=0&&n.scrollLeft+n.offsetWidth<=n.scrollWidth;s&&(i.top||i.bottom)&&(n.scrollTop+=i.top?-e.target.offsetHeight:e.target.offsetHeight),o&&(i.left||i.right)&&(n.scrollLeft+=i.left?-e.target.offsetWidth:e.target.offsetWidth)}var r=this.getClosestCell(e);r&&this.selectCells(!0,r)},e.prototype.getClosestCell=function(e){return sf.base.closest(e.target,".e-work-cells,.e-all-day-cells")},e.prototype.onMoveup=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));if(sf.base.removeClass(t,"e-allow-select"),e.target.classList.contains("e-work-cells")&&(sf.base.EventHandler.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),e.target.classList.contains("e-all-day-cells")){var i=this.parent.getAllDayRow();sf.base.EventHandler.remove(i,"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(i,"mouseup",this.onMoveup)}if(!this.isPreventAction(e)){var n=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(("TimelineYear"!==this.parent.options.currentView||!n.classList.contains("e-other-month"))&&(this.parent.activeCellsData=this.getSelectedElements(n),this.parent.options.quickInfoOnSelectionEnd&&this.parent.element.querySelectorAll(".e-selected-cell").length>1)){this.parent.currentCell=n;var s=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e,name:"cellClick"},!0);s.startTime=C(s.startTime),s.endTime=C(s.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",s)}}},e.prototype.processEnter=function(e){if(!(this.parent.activeViewOptions.readonly&&!e.target.classList.contains("e-appointment")||this.isPreventAction(e)||"TimelineYear"===this.parent.options.currentView&&e.target.classList.contains("e-other-month"))){var t=e.target;if(sf.base.closest(t,".e-quick-popup-wrapper"))t.classList.contains("e-event-details")||t.classList.contains("e-event-create")||t.classList.contains("e-event-edit")||t.classList.contains("e-event-delete")||t.classList.contains("e-close")?(t.click(),e.preventDefault()):t.classList.contains("e-subject")&&(this.parent.element.querySelector(".e-event-create").click(),e.preventDefault());else if(t.classList.contains("e-resource-cells")&&t.classList.contains("e-parent-node")){var i=t.querySelector(".e-resource-tree-icon");i&&i.click()}else if(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){this.parent.activeCellsData=this.getSelectedElements(t),this.parent.currentCell=t;var n=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e});this.parent.options.allowInline?this.parent.inlineModule.cellEdit():(n.startTime=C(n.startTime),n.endTime=C(n.endTime),"Year"===this.parent.options.currentView?t.click():this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",n))}else if(t.classList.contains("e-inline-subject"))this.parent.inlineCrudActions(t);else if(t.classList.contains("e-appointment")||t.classList.contains("e-more-event-close")||t.classList.contains("e-all-day-appointment-section")||t.classList.contains("e-more-indicator"))t.click();else if(t.classList.contains("e-header-date")){var s=this.parent.getDateFromElement(t);return this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",new Date(this.parent.getMsFromDate(s)),this.parent.getNavigateView()),void this.processEscape()}}},e.prototype.getSelectedElements=function(e){var t;if(this.selectedCells.length>1&&e.classList.contains("e-selected-cell")){var i=this.parent.getCellDetails(this.selectedCells[0]),n=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);i.endTime=n.endTime,i.element=e,t=i}else t=this.parent.getCellDetails(e);return t},e.prototype.getCells=function(e,t,i){var n=this.parent.getContentTable(),s="TimelineYear"===this.parent.options.currentView,o=s&&!e?".e-work-cells:not(.e-other-month)":"td",r=[].slice.call(n.querySelectorAll(o)),a=n.rows.length,l=n.rows[0].cells.length;if(t.classList.contains("e-all-day-cells")){var h=this.parent.getAllDayRow();r=[].slice.call(h.cells),a=1,l=h.cells.length}var d=r.indexOf(t),c=r.indexOf(i),p=[];if(e){for(var u=0;u<l;u++)for(var f=0;f<a;f++){var g=r[l*f+u];s&&g.classList.contains("e-other-month")||p.push(g)}d=p.indexOf(t),c=p.indexOf(i)}if(d>c){var m=d;d=c,c=m}return(e?p:r).slice(d,c+1)},e.prototype.focusFirstCell=function(){if("Agenda"===this.parent.options.currentView){var e=this.parent.getContentTable().querySelector(".e-agenda-cells");return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView){var t=this.parent.element.querySelector(".e-content-table tr:not(.e-hidden) .e-work-cells:not(.e-resource-group-cells)");this.selectCells(!1,t)}else if(this.parent.options.currentView.indexOf("Year")>-1){var i=".e-work-cells:not(.e-other-month):not(.e-resource-group-cells)";i+="TimelineYear"===this.parent.options.currentView&&"Vertical"===this.parent.activeViewOptions.orientation?'[data-date="'+C(this.parent.activeView.getStartDate()).getTime()+'"]':"",this.selectCells(!1,this.parent.element.querySelector(i))}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},e.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},e.prototype.selectCells=function(e,t){this.parent.removeSelectedClass();var i=t instanceof Array?t.slice(-1)[0]:t;if(e){var n=void 0;if(!this.parent.options.allowMultiRowSelection)if("TimelineYear"===this.parent.options.currentView&&"Horizontal"===this.parent.activeViewOptions.orientation||"Month"===this.parent.options.currentView)i="TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0?this.initialTarget:this.initialTarget.parentElement.children[i.cellIndex];else["Day","Week","WorkWeek","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth","TimelineYear"].indexOf(this.parent.options.currentView)>-1&&(i=i.parentElement.children[this.initialTarget.cellIndex]);var s=this.getCells(this.isInverseTableSelect(),this.initialTarget,i);if(this.parent.activeViewOptions.group.resources.length>0){n=this.initialTarget.getAttribute("data-group-index");for(var o=[],r=0,a=s;r<a.length;r++){(p=a[r]).getAttribute("data-group-index")===n&&o.push(p)}s=o}if(this.parent.options.allowMultiCellSelection||(s=[this.initialTarget]),this.selectedCells=s,s.length>2&&!i.classList.contains("e-all-day-cells")){var l=this.getAllDayCells(s);if(this.parent.activeViewOptions.group.resources.length>0){for(var h=[],d=0,c=l;d<c.length;d++){var p;(p=c[d]).getAttribute("data-group-index")===n&&h.push(p)}l=h}s=s.concat(l)}i.getAttribute("data-group-index")!==n&&this.parent.activeViewOptions.group.resources.length>0&&(i=this.selectedCells[this.selectedCells.length-1]),this.parent.addSelectedClass(s,i)}else this.initialTarget=i,this.selectedCells=[i],this.parent.addSelectedClass([i],i)},e.prototype.selectAppointment=function(e,t){var i=this.getAppointmentElements();if(!(i.length<0)){var n;if(this.parent.eventBase.removeSelectedAppointmentClass(),t.classList.contains("e-appointment")){var s=i.indexOf(t);n=i[e?s-1:s+1]}else n=e?i[i.length-1]:i[0];n&&(this.parent.eventBase.addSelectedAppointments([n]),n.focus(),sf.base.addClass([n],"e-active-appointment-agenda"))}},e.prototype.selectAppointmentElementFromWorkCell=function(e,t){this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass()},e.prototype.getAllDayCells=function(e){var t=this.parent.getAllDayRow();if(!t)return[];var i=e[0],n=e[e.length-1],s=this.parent.getCellDetails(i);return this.parent.getCellDetails(n).endTime.getTime()-s.startTime.getTime()>=864e5?[].slice.call(t.cells).slice(i.cellIndex,n.cellIndex+1):[]},e.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment"))},e.prototype.getAppointmentElementsByGuid=function(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))},e.prototype.getUniqueAppointmentElements=function(){var e=this.getAppointmentElements(),t=[];return e.map((function(e){return e.getAttribute("data-guid")})).filter((function(i,n,s){s.indexOf(i)===n&&t.push(e[parseInt(n.toString(),10)])})),t},e.prototype.getWorkCellFromAppointmentElement=function(e){return null},e.prototype.processViewNavigation=function(e){var t=parseInt(e.key,10)-1,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-toolbar .e-toolbar-item.e-views"));t<i.length&&(this.parent.quickPopup&&this.parent.quickPopup.hide(),this.parent.morePopup&&this.parent.morePopup.hide(),this.parent.headerPopup&&this.parent.headerPopup.hide(),i[parseInt(t.toString(),10)].click())},e.prototype.cancelUpDownAction=function(e){var t=e&&"Vertical"===this.parent.activeViewOptions.orientation,i=this.parent.activeViewOptions.group.resources.length>0;return!!(t&&i||e&&this.initialTarget&&this.initialTarget.classList.contains("e-other-month"))||!((!this.parent.isTimelineView()||e)&&"MonthAgenda"!==this.parent.options.currentView)},e.prototype.processUp=function(e,i){var n="TimelineYear"===this.parent.options.currentView;if(!(i&&this.cancelUpDownAction(n)||this.preventYearNavigation())){var s=e.target,o=this.parent.getSelectedCells(),r=this.parent.eventBase.getSelectedAppointments(),a=this.parent.element.querySelector(".e-more-popup-wrapper"),l=this.getQuickPopupElement();if(o.length>0&&!e.target.classList.contains("e-work-cells")&&(s=o[o.length-1]),r.length>0&&!a.classList.contains(t)&&!l.classList.contains(t)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(s=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),s)if(s.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+t)){var h=this.parent.getTableRows(),d=h.indexOf(s.parentElement),c=void 0;if(n&&i&&0===this.parent.activeViewOptions.group.resources.length&&(c=this.isInverseTableSelect()?this.getVerticalUpDownCell(h,s,d,!0):this.getHorizontalUpDownCell(h,s,d,!0)),(d>0||c)&&d<h.length){if(c=c||h[d-1].cells[s.cellIndex],"Year"===this.parent.options.currentView&&c.classList.contains("e-other-month")){if(!(C(this.parent.activeView.getStartDate()).getTime()<+c.getAttribute("data-date")))return;c=this.getYearUpDownCell(h,d-1,s.cellIndex,!0)}this.selectCells(i,c)}}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!0,s)}},e.prototype.processDown=function(e,i){var n="TimelineYear"===this.parent.options.currentView;if(!(i&&this.cancelUpDownAction(n)||this.preventYearNavigation())){var s=e.target,o=this.parent.getSelectedCells(),r=this.parent.eventBase.getSelectedAppointments(),a=this.parent.element.querySelector(".e-more-popup-wrapper"),l=this.getQuickPopupElement();o.length>0&&!e.target.classList.contains("e-work-cells")&&(s=o[o.length-1]),r.length>0&&!a.classList.contains(t)&&!l.classList.contains(t)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(s=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var h=this.parent.getTableRows();if(s)if(s.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+t)){var d=h.indexOf(s.parentElement),c=void 0;if(n&&i&&0===this.parent.activeViewOptions.group.resources.length&&(c=this.isInverseTableSelect()?this.getVerticalUpDownCell(h,s,d,!1):this.getHorizontalUpDownCell(h,s,d,!1)),d>=0&&(d<h.length-1||c)){if(c=c||h[d+1].cells[s.cellIndex],"Year"===this.parent.options.currentView&&c.classList.contains("e-other-month")){if(!(C(this.parent.activeView.getEndDate()).getTime()>+c.getAttribute("data-date")))return;c=this.getYearUpDownCell(h,d+1,s.cellIndex,!1)}this.selectCells(i,c)}}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!1,s)}},e.prototype.getYearUpDownCell=function(e,t,i,n){for(;e[parseInt(t.toString(),10)]&&e[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)].classList.contains("e-other-month");)t+=n?-1:1;return e[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)]},e.prototype.getHorizontalUpDownCell=function(e,t,i,n){var s=e[i+(n?-1:1)],o=s?s.cells[t.cellIndex]:t;if(o.classList.contains("e-other-month")){var r=s.querySelector(".e-work-cells:not(.e-other-month)"),a='[data-date="'+C(h(new Date(+r.getAttribute("data-date")))).getTime()+'"]';o=o.cellIndex<r.cellIndex?r:s.querySelector(a)}return o},e.prototype.getVerticalUpDownCell=function(e,t,i,n){var s=n&&i>0||!n&&i<e.length-1?e[i+(n?-1:1)].cells[t.cellIndex]:void 0;if(!s||s.classList.contains("e-other-month")){if(e[parseInt(i.toString(),10)].cells[t.cellIndex-(n?1:-1)]){var o=+t.getAttribute("data-date")-(n?864e5:-864e5);return this.parent.getContentTable().querySelector('.e-work-cells[data-date="'+o+'"]')}s=t}return s},e.prototype.processLeftRight=function(e){var t="Year"===this.parent.options.currentView?e.closest("tbody"):this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[parseInt(i.toString(),10)].cells.length}},e.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector(".e-quick-popup-wrapper")},e.prototype.isCancelLeftRightAction=function(e,i,n){var s="MonthAgenda"===this.parent.options.currentView||n&&this.initialTarget&&this.initialTarget.classList.contains("e-other-month");if("Agenda"===this.parent.options.currentView||i&&s||this.preventYearNavigation())return!0;if(this.isPreventAction(e)&&i)return!0;var o=this.parent.element.querySelector(".e-more-popup-wrapper"),r=this.getQuickPopupElement();return!(!o.classList.contains(t)&&!r.classList.contains(t))},e.prototype.processRight=function(e,t){var i="TimelineYear"===this.parent.options.currentView;if(!this.isCancelLeftRightAction(e,t,i)){var n,s=this.parent.getSelectedCells(),o=this.parent.eventBase.getSelectedAppointments(),r=e.target;if(s.length>0&&!r.classList.contains("e-work-cells")&&!r.classList.contains("e-all-day-cells")&&(r=s[s.length-1]),!(o.length>0)||(r=this.getWorkCellFromAppointmentElement(o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),r))if(r.classList.contains("e-work-cells")&&e.target.classList.contains("e-work-cells")){var a=this.processLeftRight(r),l=new Date(+r.getAttribute("data-date")),d="Year"===this.parent.options.currentView&&l.getTime()===C(h(l)).getTime();if(a.columnIndex>=0&&a.columnIndex<a.maxIndex-1&&!d)n=this.calculateNextPrevDate(r,a.element.rows[a.rowIndex].cells[r.cellIndex+1],"right"),i&&t&&n.classList.contains("e-other-month")&&(n=this.getTimelineYearTargetCell(a,r,!0)),sf.base.isNullOrUndefined(n)||this.selectCells(t,n);else if(a.columnIndex===a.maxIndex-1||d)if(!this.isInverseTableSelect()&&a.rowIndex<a.element.rows.length-1&&!d){n=this.calculateNextPrevDate(r,a.element.rows[a.rowIndex+1].cells[0],"right");var c=i&&t&&n.classList.contains("e-other-month");n=c?this.getHorizontalLeftRightCell(a,r,!0):n,sf.base.isNullOrUndefined(n)||this.selectCells(t,n)}else if(!t&&d&&l.getTime()!==C(this.parent.activeView.getEndDate()).getTime())return void this.selectCells(t,this.parent.element.querySelector(':not(.e-other-month)[data-date="'+(l.getTime()+864e5)+'"]'))}else if(r.classList.contains("e-all-day-cells")){var p=r.cellIndex,u=this.parent.getAllDayRow(),f=u.cells.length;p>=0&&p<f-1&&this.selectCells(t,u.cells[p+1])}}},e.prototype.processLeft=function(e,t){var i="TimelineYear"===this.parent.options.currentView;if(!this.isCancelLeftRightAction(e,t,i)){var n,s=e.target,o=this.parent.getSelectedCells();o.length>0&&!s.classList.contains("e-work-cells")&&!s.classList.contains("e-all-day-cells")&&(s=o[o.length-1]);var r=this.parent.eventBase.getSelectedAppointments();if(!(r.length>0)||(s=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),s))if(e.target.classList.contains("e-work-cells")&&s.classList.contains("e-work-cells")){var a=this.processLeftRight(s),h=new Date(+s.getAttribute("data-date")),d="Year"===this.parent.options.currentView&&h.getTime()===C(l(h)).getTime();if(a.columnIndex>0&&a.columnIndex<a.maxIndex&&!d)n=this.calculateNextPrevDate(s,a.element.rows[a.rowIndex].cells[s.cellIndex-1],"left"),i&&t&&n.classList.contains("e-other-month")&&(n=this.getTimelineYearTargetCell(a,s,!1)),sf.base.isNullOrUndefined(n)||this.selectCells(t,n);else if(0===a.columnIndex||d)if(!this.isInverseTableSelect()&&a.rowIndex>0){n=this.calculateNextPrevDate(s,a.element.rows[a.rowIndex-1].cells[a.maxIndex-1],"left");var c=i&&t&&n.classList.contains("e-other-month");n=c?this.getHorizontalLeftRightCell(a,s,!1):n,sf.base.isNullOrUndefined(n)||this.selectCells(t,n)}else if(!t&&d&&h.getTime()!==C(this.parent.activeView.getStartDate()).getTime())return void this.selectCells(t,this.parent.element.querySelector('[data-date="'+(h.getTime()-864e5)+'"]'))}else if(s.classList.contains("e-all-day-cells")){var p=s.cellIndex,u=this.parent.getAllDayRow(),f=u.cells.length;p>0&&p<f&&this.selectCells(t,u.cells[p-1])}}},e.prototype.preventYearNavigation=function(){return"Year"===this.parent.options.currentView&&this.initialTarget&&this.initialTarget.classList.contains("e-other-month")},e.prototype.getTimelineYearTargetCell=function(e,t,i){return this.isInverseTableSelect()?this.getVerticalLeftRightCell(t,i):this.getHorizontalLeftRightCell(e,t,i)},e.prototype.getHorizontalLeftRightCell=function(e,t,i){var n=e.element.rows[t.parentNode.sectionRowIndex+(i?1:-1)];if(n){var s=i?".e-work-cells:not(.e-other-month)":'[data-date="'+(+t.getAttribute("data-date")-864e5)+'"]';return n.querySelector(s)}return t},e.prototype.getVerticalLeftRightCell=function(e,t){var i=new Date(+e.getAttribute("data-date")),n=C(new Date(i.getFullYear(),i.getMonth()+(t?1:-1),1)),s=this.parent.getContentTable(),o=s.querySelector('[data-date="'+n.getTime()+'"]');return o.parentNode.sectionRowIndex>e.parentNode.sectionRowIndex?o:s.querySelector('[data-date="'+C(h(n)).getTime()+'"]')},e.prototype.calculateNextPrevDate=function(e,t,i){var n=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.options.currentView&&e&&t&&t.getAttribute("data-group-index")!==n){var s=this.parent.getDateFromElement(e),o="right"===i?new Date(s.setDate(s.getDate()+1)):new Date(s.setDate(s.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+this.parent.getMsFromDate(o).toString()+'"][data-group-index="'+n+'"]'))[0]}return t},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},e.prototype.processTabOnPopup=function(e,t){var i=this,n=this.getFocusableElements(t),s=(n=n.filter((function(e){var t=i.parent.element.querySelector(".e-popup-footer");return t&&t.offsetParent?!(e.classList.contains("e-edit")||e.classList.contains("e-delete")):!(e.classList.contains("e-event-edit")||e.classList.contains("e-event-delete"))})))[0],o=n[n.length-1];sf.base.isNullOrUndefined(o)||document.activeElement!==o||e.shiftKey||(e.preventDefault(),s.focus()),!sf.base.isNullOrUndefined(s)&&document.activeElement===s&&e.shiftKey&&(e.preventDefault(),o.focus())},e.prototype.processTab=function(e,i){var n=e.target;if(n.classList.contains("e-inline-subject")&&this.parent.inlineEdit&&(n=n.closest(".e-appointment"),this.parent.inlineCrudActions(e.target)),"TimelineYear"===this.parent.options.currentView&&n.classList.contains("e-other-month"))n.classList.contains("e-selected-cell")&&this.parent.removeSelectedClass();else{var s=sf.base.closest(n,".e-quick-popup-wrapper,.e-more-popup-wrapper");if(s&&s.classList.contains(t))return s.classList.contains("e-more-popup-wrapper")&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(e,s);if(n.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0){var o=parseInt(n.getAttribute("data-group-index"),10),r='.e-appointment[data-group-index="'+(i?o-1:o)+'"]',a=[].slice.call(this.parent.element.querySelectorAll(r));if(a.length>0){this.parent.eventBase.removeSelectedAppointmentClass();var l=i?a.slice(-1)[0]:a[0];this.parent.eventBase.addSelectedAppointments([l]),l.focus(),e.preventDefault()}else if(o===parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-rendered-index"),10))this.parent.element.focus(),e.preventDefault();else if(this.parent.virtualScrollModule){var h=this.parent.element.querySelector(".e-virtual-track"),d=Math.round(h.offsetHeight/parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-expanded-index"),10));this.parent.element.querySelector(".e-content-wrap").scrollTop=(i?o-1:o+1)*d,this.parent.virtualScrollModule.virtualScrolling()}else this.setScrollPosition(o)}else if(n.classList.contains("e-schedule"))this.parent.eventBase.removeSelectedAppointmentClass();else if(n.classList.contains("e-appointment")){var c=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),p=this.parent.eventBase.getSelectedAppointments(),u="TimelineYear"===this.parent.options.currentView;if((this.parent.isTimelineView()&&!u||u&&"Vertical"===this.parent.activeViewOptions.orientation)&&this.parent.activeViewOptions.group.resources.length>0){o=parseInt(n.getAttribute("data-group-index"),10);c=[].slice.call(this.parent.element.querySelectorAll('.e-appointment[data-group-index="'+o+'"]'));var f='.e-resource-cells[data-group-index="'+(i?o:o+1)+'"]',g=this.parent.element.querySelector(f);if(g&&(i&&n.getAttribute("data-guid")===c[0].getAttribute("data-guid")||!i&&n.getAttribute("data-guid")===c.slice(-1)[0].getAttribute("data-guid")))return this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.virtualScrollModule?g.focus({preventScroll:!0}):g.focus(),this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&sf.base.isNullOrUndefined(this.parent.virtualScrollModule)&&this.setScrollPosition(o),void e.preventDefault()}if(p.length>0&&(n=p[p.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!i&&n.getAttribute("data-guid")===c[c.length-1].getAttribute("data-guid")||i&&n.getAttribute("data-guid")===c[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||(this.selectAppointment(i,n),e.preventDefault())}else{var m=this.parent.getSelectedCells();if(m.length>0&&!n.classList.contains("e-appointment"))return n=m[m.length-1],this.selectAppointmentElementFromWorkCell(i,n),void e.preventDefault();n&&!n.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&this.processTabOnResourceCells(n,i)}}},e.prototype.processDelete=function(){var e=document.activeElement;if("MonthAgenda"===this.parent.options.currentView){var t=this.parent.eventBase.getSelectedEvents().element;t&&(e=t&&sf.base.isNullOrUndefined(t.length)?t:t[0])}if(e&&e.classList.contains("e-appointment")){if(sf.base.addClass([e],n),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||e.classList.contains("e-read-only"))return;this.parent.dotNetRef.invokeMethodAsync("ProcessDelete",this.parent.activeEventData.guid)}},e.prototype.processEscape=function(){this.parent.onClosePopup(),this.parent.onMoreEventPopupClose(),this.parent.headerPopup&&this.parent.headerPopup.hide(),this.parent.inlineModule&&(this.parent.eventBase.focusElement(),this.parent.inlineModule.removeInlineAppointmentElement())},e.prototype.isPreventAction=function(e){var t=sf.base.closest(e.target,".e-resource-group-cells");return!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t))},e.prototype.processTabOnResourceCells=function(e,t){var i=[].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]')),n=i.indexOf(e),s=t?i[n-1]:i[n+1];if(s&&s.classList.contains("e-resource-cells")){var o=parseInt(s.getAttribute("data-group-index"),10);if(this.parent.virtualScrollModule){var r=this.parent.element.querySelector(".e-resource-column-wrap");[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells")).forEach((function(e){e.getBoundingClientRect().top<r.getBoundingClientRect().top&&e.setAttribute("tabindex","-1")}))}else this.setScrollPosition(o)}},e.prototype.setScrollPosition=function(e){var t=this.parent.element.querySelector('.e-work-cells[data-group-index="'+e+'"]');t&&(this.parent.element.querySelector(".e-content-wrap").scrollTop=t.offsetTop)},e.prototype.destroy=function(){this.selectedCells=[],this.keyboardModule.destroy()},e}(),ne=function(){function e(e){this.daysVariation=0,this.parent=e,this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null,index:0,navigationInterval:null,scrollInterval:null},this.scrollArgs={element:null,width:0,height:0},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return e.prototype.calculateIntervalTime=function(e){var t=new Date(+e);return t.setMinutes(Math.floor(t.getMinutes()/this.actionObj.interval)*this.actionObj.interval),t},e.prototype.getContentAreaDimension=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=[].slice.call(e.querySelector("tr").children);!this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=this.getResourceElements(t));var i=t[0].getBoundingClientRect(),n=t.slice(-1)[0].getBoundingClientRect();return{bottom:e.scrollHeight-5,left:this.parent.options.enableRtl?n.left:i.left,right:this.parent.options.enableRtl?i.right:n.right,top:0,leftOffset:this.parent.options.enableRtl?n.right:i.right,rightOffset:this.parent.options.enableRtl?i.left:n.left}},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getIndex=function(e){var t=[].slice.call(this.parent.getContentTable().querySelector("tr").children),i={minIndex:0,maxIndex:t.length-1};if("resize"===this.actionObj.action&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.isTimelineView()){var n=this.getResourceElements(t);i.minIndex=n[0].cellIndex,i.maxIndex=n.slice(-1)[0].cellIndex}return e<i.minIndex&&(e=i.minIndex),e>i.maxIndex&&(e=i.maxIndex),e},e.prototype.updateTimePosition=function(e,t){for(var i=0,n=0,s=this.actionObj.cloneElement;n<s.length;n++){var o=s[n].querySelector(".e-time");if(o){var r=this.actionObj.start,a=this.actionObj.end;t&&t.length>0&&i<t.length&&(r=t[parseInt(i.toString(),10)].startTime,a=t[parseInt(i.toString(),10)].endTime),o.innerHTML=this.parent.getTimeString(r)+" - "+this.parent.getTimeString(a)}i++}if(this.parent.activeViewOptions.timeScale.enable&&this.parent.isAdaptive&&"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView){var l=this.parent.element.querySelector(".e-clone-time-indicator");if(!l){l=sf.base.createElement("div",{className:"e-clone-time-indicator"});var h=this.parent.isTimelineView()?"e-date-header-wrap":"e-time-cells-wrap";this.parent.element.querySelector("."+h).appendChild(l)}l.innerHTML=this.parent.getTimeString(e);var d=0;if(this.parent.isTimelineView())if(this.parent.options.enableRtl){var c=parseInt(this.actionObj.clone.style.right,10);d="drag"===this.actionObj.action||this.resizeEdges.left?c+this.actionObj.clone.offsetWidth:c,l.style.right=sf.base.formatUnit(d)}else{var p=parseInt(this.actionObj.clone.style.left,10);d="drag"===this.actionObj.action||this.resizeEdges.left?p:p+this.actionObj.clone.offsetWidth,l.style.left=sf.base.formatUnit(d)}else d="drag"===this.actionObj.action||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,l.style.top=sf.base.formatUnit(d)}},e.prototype.getResourceElements=function(e){var t=this;return e.filter((function(e){return parseInt(e.getAttribute("data-group-index"),10)===t.actionObj.groupIndex}))},e.prototype.getOriginalElement=function(e){var t,i=e.getAttribute("data-guid");if(e.offsetParent&&e.offsetParent.classList.contains("e-more-event-popup")||this.parent.isTimelineView())t=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+i+'"]'));else{var n=sf.base.closest(e,"tr");t=[].slice.call(n.querySelectorAll('[data-guid="'+i+'"]'))}return t},e.prototype.createCloneElement=function(e){var t=sf.base.createElement("div",{innerHTML:e.outerHTML}).children[0],i=["e-schedule-event-clone"];return i.push("drag"===this.actionObj.action?"e-drag-clone":"e-resize-clone"),"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||i.push("e-month-event"),sf.base.addClass([t],i),sf.base.addClass([e],"e-event-action"),sf.base.isNullOrUndefined(e.parentElement)||e.parentElement.appendChild(t),t.style.width=sf.base.formatUnit(t.offsetWidth-2),this.parent.options.eventDragArea&&"drag"===this.actionObj.action&&document.querySelector(this.parent.options.eventDragArea).appendChild(t),sf.base.setStyleAttribute(t,{border:"0px"}),""!==e.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:e.style.backgroundColor}),t},e.prototype.removeCloneElementClasses=function(){var e=this.actionObj.originalElement;"Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||(e=[].slice.call(this.parent.element.querySelectorAll(".e-event-action,."+n))),sf.base.removeClass(e,["e-event-action",n])},e.prototype.removeCloneElement=function(){this.actionObj.originalElement=[];for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));e<t.length;e++){var i=t[e];sf.base.remove(i)}for(var n=0,s=this.actionObj.cloneElement;n<s.length;n++){var o=s[n];sf.base.isNullOrUndefined(o.parentNode)||sf.base.remove(o)}this.actionObj.cloneElement=[];var r=this.parent.element.querySelector(".e-clone-time-indicator");r&&sf.base.remove(r)},e.prototype.getCursorElement=function(e){var t=this.getPageCoordinates(e);return document.elementFromPoint(t.clientX,t.clientY)},e.prototype.autoScroll=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=e.offsetHeight<=e.scrollHeight,i=e.offsetWidth<=e.scrollWidth,n=t&&e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,s=i&&e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;n&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(e.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollHeight!==e.offsetHeight+e.scrollTop&&e.scrollTop>0&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy)),s&&(this.scrollEdges.left||this.scrollEdges.right)&&(e.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollWidth!==e.offsetWidth+e.scrollLeft&&e.scrollLeft>0&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},e.prototype.autoScrollValidation=function(){if(!this.actionObj.scroll.enable)return!1;var e=this.parent.boundaryValidation(this.actionObj.pageY,this.actionObj.pageX);return this.scrollEdges=e,e.bottom||e.top||e.left||e.right},e.prototype.actionClass=function(e){"addClass"===e?sf.base.addClass([this.parent.element],"e-event-action"):sf.base.removeClass([this.parent.element],"e-event-action")},e.prototype.updateScrollPosition=function(){var e=this;this.actionObj.scroll.enable&&sf.base.isNullOrUndefined(this.actionObj.scrollInterval)&&(this.actionObj.scrollInterval=window.setInterval((function(){if(e.autoScrollValidation()&&!e.actionObj.clone.classList.contains("e-all-day-appointment")){if(e.parent.isTimelineView()&&e.parent.activeViewOptions.group.resources.length>0&&e.actionObj.groupIndex<0)return;e.autoScroll(),e.actionObj.action}}),this.actionObj.scroll.timeDelay))},e.prototype.updateOriginalElement=function(e){var t='[data-id="'+e.getAttribute("data-id")+'"]';this.parent.activeViewOptions.group.resources.length>0&&(t=t.concat('[data-group-index = "'+e.getAttribute("data-group-index")+'"]'));var i=[].slice.call(this.parent.element.querySelectorAll(t));sf.base.addClass(i,"e-event-action");var n=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));sf.base.removeClass(n,"e-event-action")},e.prototype.updateCloneEventDetailElement=function(e){this.cloneEventDetail=e.querySelector(".e-appointment")||[].slice.call(e.children).filter((function(e){return!e.classList.contains("e-event-resize")}))[0]},e.prototype.getUpdatedEvent=function(e,t,i){var n=JSON.parse(JSON.stringify(i));return n.startTime=e,n.endTime=t,n},e.prototype.getMonthDiff=function(e,t){var i;return i=12*(t.getFullYear()-e.getFullYear()),i-=e.getMonth(),(i+=t.getMonth())<=0?0:i},e.prototype.getEventCount=function(e,t){var i=new Date(this.parent.options.selectedDate.getFullYear(),t,1),n=p(new Date(this.parent.options.selectedDate.getFullYear(),t+1,0),1),s=sf.base.extend({},e,null,!0),o=s.startTime,r=s.endTime,a=1;return o.getTime()<i.getTime()&&(s.startTime=i),r.getTime()>n.getTime()&&(s.endTime=n),0===this.parent.activeViewOptions.group.resources.length&&(a=Math.ceil((s.endTime.getTime()-s.startTime.getTime())/864e5)),s.count=a,s},e.prototype.dynamicYearlyEventsRendering=function(e,t,i,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),sf.base.isNullOrUndefined(this.parent.options.eventDragArea)){var s=C(d(e.startTime)).getTime(),o='.e-work-cells[data-date="'+s+'"]';if(this.parent.activeViewOptions.group.resources.length>0){if(!t&&"Vertical"===this.parent.activeViewOptions.orientation){var r=d(new Date(+this.parent.element.querySelector(".e-work-cells").getAttribute("data-date"))),a=u(new Date(+this.parent.element.querySelector(".e-work-cells:last-child").getAttribute("data-date")),1);e.startTime<r&&e.endTime>r?(s=C(r).getTime(),e.count=this.getMonthDiff(r,p(e.endTime,-1))+1):e.endTime>a&&e.startTime<a&&(e.count=this.getMonthDiff(e.startTime,p(a,-1))+1)}var l=isNaN(e.groupIndex)?this.actionObj.groupIndex:e.groupIndex;o='.e-work-cells[data-date="'+(s=1!==new Date(s).getDate()?new Date(new Date(s).setDate(1)).getTime():s)+'"][data-group-index="'+l+'"]'}var h=this.parent.element.querySelector(o);if(!sf.base.isNullOrUndefined(h)){var c=this.actionObj.cellWidth-7;(t&&(this.resizeEdges.left||this.resizeEdges.right)||n)&&(c=this.actionObj.cellWidth*e.count);var f=this.createAppointmentElement(this.actionObj.groupIndex,i),g=h.querySelector(".e-date-header"),m=g?y(g):0;if(sf.base.setStyleAttribute(f,{overflow:"hidden",padding:"3px",position:"absolute",width:c+"px",top:m+"px"}),t){var v=this.actionObj.cellHeight*e.count-m-7;(this.resizeEdges.right||this.resizeEdges.left)&&(v=parseInt(this.actionObj.clone.style.height,10)),sf.base.setStyleAttribute(f,{height:v+"px"})}var b=h.parentElement.sectionRowIndex,w=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container"))[parseInt(b.toString(),10)];this.renderCloneElement(w,f,h,i)}}},e.prototype.dynamicEventsRendering=function(e,t){if(sf.base.isNullOrUndefined(this.parent.options.eventDragArea)){var i=this.parent.activeView.renderDates.slice(0),n=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),s=this.parent.activeViewOptions.workDays;if(this.parent.activeViewOptions.group.resources.length>0){var o='.e-work-cells[data-group-index="'+(N=isNaN(e.groupIndex)?this.actionObj.groupIndex:e.groupIndex)+'"]',r=(n=[].slice.call(this.parent.element.querySelectorAll(o)))[0].querySelectorAll('[data-group-index="'+N+'"]').length,a=0;n.length>0&&(i=[]);for(var l=0,h=n;l<h.length;l++){var c=h[l];i.push(this.parent.getDateFromElement(c)),a<r&&(s.push(i[parseInt(a.toString(),10)].getDay()),a++)}}if(this.monthEvent.dateRender=i,this.monthEvent.getSlotDates(s),this.resizeEdges.left||this.resizeEdges.right)for(var p=0,u=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));p<u.length;p++){var f=u[p];sf.base.remove(f)}for(var g=0,m=this.monthEvent.splitEvent(e,i);g<m.length;g++){var v=m[g],b=this.parent.getIndexOfDate(i,d(v.startTime)),C=n[parseInt(b.toString(),10)];if(!sf.base.isNullOrUndefined(C)){var w=v.data.count*this.actionObj.cellWidth-7,M=this.createAppointmentElement(this.actionObj.groupIndex,t),S=C.querySelector(".e-date-header"),x=S?C.offsetTop+y(S):C.offsetTop,N=isNaN(v.groupIndex)?parseInt(C.getAttribute("data-group-index"),10):v.groupIndex,O=isNaN(N)?".e-appointment-container":'.e-appointment-container[data-group-index="'+N+'"]';sf.base.setStyleAttribute(M,{width:w+"px",top:x+"px"});var E=this.parent.element.querySelector(O);this.renderCloneElement(E,M,C,t)}}}},e.prototype.renderCloneElement=function(e,t,i,n){if(e){t.setAttribute("drag","true"),sf.base.addClass([t],"e-schedule-event-clone");var s=n||this.actionObj.clone;""!==s.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:s.style.backgroundColor}),sf.base.addClass([t],[].slice.call(s.classList)),t.classList.remove("e-event-action");var o=0,r=0;this.parent.options.enableRtl?r=i.parentElement.offsetWidth-i.offsetLeft-i.offsetWidth:o=i.offsetLeft,sf.base.setStyleAttribute(t,{left:o+"px",right:r+"px",border:"0px","pointer-events":"none"});var a=e.querySelector(".e-appointment-wrapper");a||(a=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(a)),a.appendChild(t),this.actionObj.cloneElement.push(a)}},e.prototype.getReadonlyAttribute=function(e){return e.getAttribute("aria-disabled")},e.prototype.createAppointmentElement=function(e,t){var i=sf.base.isNullOrUndefined(this.cloneEventDetail)?"":this.cloneEventDetail.outerHTML;t&&(i=(t.querySelector(".e-appointment-details")||t.querySelector(".e-subject")).outerHTML);var n=sf.base.createElement("div",{className:"e-appointment",innerHTML:i});return this.parent.activeViewOptions.group.resources.length>0&&n.setAttribute("data-group-index",e.toString()),n},e.prototype.destroy=function(){this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},e}(),se=(A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return se(t,e),t.prototype.wireResizeEvent=function(e){for(var t=0,i=[].slice.call(e.querySelectorAll(".e-event-resize"));t<i.length;t++){var n=i[t];sf.base.EventHandler.clearEvents(n),sf.base.EventHandler.add(n,sf.base.Browser.touchStartEvent,this.resizeStart,this)}},t.prototype.resizeHelper=function(){if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)for(var e=0,t=this.actionObj.originalElement.length;e<t;e++){var i=this.createCloneElement(this.actionObj.originalElement[parseInt(e.toString(),10)]);this.actionObj.cloneElement[parseInt(e.toString(),10)]=i,this.actionObj.element===this.actionObj.originalElement[parseInt(e.toString(),10)]&&(this.actionObj.clone=i)}else this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element]},t.prototype.resizeStart=function(e){var t=this;this.actionObj.action="resize",this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var i=sf.base.closest(e.target,".e-event-resize");this.actionObj.element=sf.base.closest(i,".e-appointment");var n=this.actionObj.element.getAttribute("data-guid"),s=parseInt(this.actionObj.element.getAttribute("data-group-index")||"0",10),o={cancel:!1,event:this.parent.eventBase.getMouseEvent(e),interval:Math.round(this.actionObj.interval),scroll:{enable:!0,scrollBy:30,timeDelay:100},groupIndex:s};this.parent.dotNetRef.invokeMethodAsync("OnResizeStart",o,n).then((function(n){var o=n.resizeEventArgs;Math.round(t.actionObj.interval)===o.interval&&(o.interval=t.actionObj.interval),t.actionObj.event=sf.base.extend({},n,null,!0),delete t.actionObj.event.resizeEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var r=sf.base.extend({},t.actionObj.event,null,!0);if(!o.cancel){t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.resizeEdges={left:i.classList.contains("e-left-handler"),right:i.classList.contains("e-right-handler"),top:i.classList.contains("e-top-handler"),bottom:i.classList.contains("e-bottom-handler")},t.actionObj.groupIndex=t.parent.uiStateValues.isGroupAdaptive?t.parent.uiStateValues.groupIndex:0;var a=t.parent.element.querySelector(".e-work-cells").getBoundingClientRect();t.actionObj.cellWidth=a.width,t.actionObj.cellHeight=a.height;var l=t.parent.activeViewOptions.headerRows.map((function(e){return e.option}));if(t.parent.isTimelineView()&&l.length>0&&["Date","Hour"].indexOf(l.slice(-1)[0])<0){for(var h=t.parent.getContentTable().querySelector("tr"),d=0,c=0,p=[].slice.call(h.children);c<p.length;c++){var u=p[c];d+=parseInt(u.getAttribute("colspan"),10)}var f=h.getBoundingClientRect();t.actionObj.cellWidth=f.width/d,t.actionObj.cellHeight=f.height}var g=t.getPageCoordinates(e);t.actionObj.X=g.pageX,t.actionObj.Y=g.pageY,t.actionObj.groupIndex=s,t.actionObj.interval=o.interval,t.actionObj.scroll=o.scroll,t.actionObj.start=r.startTime,t.actionObj.end=r.endTime,t.actionObj.originalElement=t.getOriginalElement(t.actionObj.element),"Month"!==t.parent.options.currentView&&"TimelineYear"!==t.parent.options.currentView&&(t.parent.isTimelineView()||t.parent.activeViewOptions.timeScale.enable)||(t.daysVariation=-1,t.updateCloneEventDetailElement(t.actionObj.element),"TimelineYear"!==t.parent.options.currentView&&(t.monthEvent=new R(t.parent)));var m=t.parent.element.querySelector(".e-content-wrap");t.scrollArgs={element:m,width:m.scrollWidth,height:m.scrollHeight},sf.base.EventHandler.add(document,sf.base.Browser.touchMoveEvent,t.resizing,t),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,t.resizeStop,t)}}))},t.prototype.resizing=function(e){if(this.parent.onQuickPopupClose(),0===this.parent.element.querySelectorAll(".e-resize-clone").length&&this.resizeHelper(),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=this.getPageCoordinates(e);if("Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView){var i=document.documentElement,n=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),s=(window.pageYOffset||i.scrollTop)-(i.clientTop||0);this.actionObj.pageX=t.pageX-n,this.actionObj.pageY=t.pageY-s}else this.actionObj.pageX=t.pageX,this.actionObj.pageY=t.pageY;this.updateScrollPosition(),this.updateResizingDirection(e)}},t.prototype.updateResizingDirection=function(e){if("Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)){var t=this.resizeValidation(e);if(this.resizeEdges.left){if(t){var i=this.getLeftRightStyles(e,!0);if(parseInt(i.width,10)<1)return;for(var n=0,s=this.actionObj.cloneElement;n<s.length;n++){var o=s[n];sf.base.setStyleAttribute(o,i),sf.base.addClass([o],"e-left-handler")}}this.horizontalResizing(!this.parent.options.enableRtl)}if(this.resizeEdges.right){if(t){var r=this.getLeftRightStyles(e,!1);if(parseInt(r.width,10)<1)return;for(var a=0,l=this.actionObj.cloneElement;a<l.length;a++){o=l[a];sf.base.setStyleAttribute(o,r),sf.base.addClass([o],"e-right-handler")}}this.horizontalResizing(this.parent.options.enableRtl)}if(this.resizeEdges.top){if(t){var h=this.getTopBottomStyles(e,!0);if(parseInt(h.height,10)<1)return;for(var d=0,c=this.actionObj.cloneElement;d<c.length;d++){o=c[d];sf.base.setStyleAttribute(o,h),sf.base.addClass([o],"e-top-handler")}}this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(t){var p=this.getTopBottomStyles(e,!1);if(parseInt(p.height,10)<1)return;for(var u=0,f=this.actionObj.cloneElement;u<f.length;u++){o=f[u];sf.base.setStyleAttribute(o,p),sf.base.addClass([o],"e-bottom-handler")}}this.verticalResizing(!1)}}else this.monthResizing()},t.prototype.monthResizing=function(){this.removeCloneElement();var e=document.elementFromPoint(this.actionObj.pageX,this.actionObj.pageY);if(!sf.base.isNullOrUndefined(e)){var t=this.parent.getDateFromElement(e),i=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(e.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,n=this.actionObj.event.startTime,s=this.actionObj.event.endTime;if(!this.parent.options.enableRtl&&this.resizeEdges.left||this.parent.options.enableRtl&&this.resizeEdges.right||this.resizeEdges.top?n=t:(!this.parent.options.enableRtl&&this.resizeEdges.right||this.parent.options.enableRtl&&this.resizeEdges.left||this.resizeEdges.bottom)&&(s=p(t,1)),i&&n<s){this.actionObj.start=n,this.actionObj.end=s;var o=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);"TimelineYear"===this.parent.options.currentView?this.yearEventsRendering(o):this.dynamicEventsRendering(o),this.updateOriginalElement(this.actionObj.clone)}else if("TimelineYear"===this.parent.options.currentView)for(var r=0,a=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));r<a.length;r++){var l=a[r];this.actionObj.cloneElement.push(l)}}},t.prototype.yearEventsRendering=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));t<i.length;t++){var n=i[t];sf.base.remove(n)}var s=new Date(e.endTime),o=0;0===this.parent.activeViewOptions.group.resources.length&&(o=this.getMonthDiff(e.startTime,p(s,-1)));for(var r=0;r<=o;r++){var a=void 0;0===this.parent.activeViewOptions.group.resources.length?a=this.getEventCount(e,this.actionObj.start.getMonth()+r):(a=sf.base.extend({},e,null,!0),s=this.resizeEdges.left||this.resizeEdges.right?p(s,-1):s,a.count=this.getMonthDiff(e.startTime,s)+(this.resizeEdges.top?0:1)),this.dynamicYearlyEventsRendering(a,!0)}},t.prototype.resizeStop=function(){sf.base.EventHandler.remove(document,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeStop),clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.removeCloneElementClasses(),this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=!1;var e=this.actionObj.element.getAttribute("data-guid"),t=C(this.actionObj.start),i=C(this.actionObj.end);this.parent.dotNetRef.invokeMethodAsync("OnResizeStop",t,i,e,this.actionObj.groupIndex)},t.prototype.verticalResizing=function(e){var t=this.actionObj.clone.offsetTop;e||(t+=this.actionObj.clone.offsetHeight);var i=t/this.actionObj.cellHeight*this.actionObj.slotInterval,n=this.actionObj.clone.offsetParent;if(!sf.base.isNullOrUndefined(n)){var s=d(this.parent.getDateFromElement(n));s.setHours(this.parent.activeView.getStartHour().getHours()),s.setMinutes(i+this.parent.activeView.getStartHour().getMinutes()),e?this.actionObj.start=this.calculateIntervalTime(s):this.actionObj.end=this.calculateIntervalTime(s),this.updateTimePosition(s)}},t.prototype.horizontalResizing=function(e){var t,i=this.actionObj.event.startTime,n=this.actionObj.event.endTime;if(this.parent.isTimelineView()){var s=this.parent.getContentTable().querySelector("tr"),o=this.parent.options.currentView;if(this.parent.activeViewOptions.headerRows.length>0){var r=this.parent.activeViewOptions.headerRows.map((function(e){return e.option}));o=r.slice(-1)[0],"TimelineMonth"===this.parent.options.currentView&&"Hour"===o&&(o=r.slice(-2)[0]||"Month")}t=e?i:n;var a=0,l=[].slice.call(s.children),h=!1,d=this.actionObj.cellWidth/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount),c=parseFloat(this.parent.options.enableRtl?this.actionObj.clone.style.right:this.actionObj.clone.style.left);if(c=Math.round(c/d)*d,-1!==["Year","Month","Week","Date"].indexOf(o)){for(var u=0,f=0,g=l;f<g.length;f++){var m=g[f];u+=parseInt(m.getAttribute("colspan"),10)}var v=this.parent.options.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);e||(v+=this.actionObj.clone.getBoundingClientRect().width-this.actionObj.cellWidth),a=Math.floor(v/Math.floor(s.getBoundingClientRect().width/u)),h=(a=e?a:"TimelineMonth"===this.parent.options.currentView?a+1:a)===l.length,a=a<0?0:a>=u?u-1:a}else{var b=this.actionObj.cellWidth;if(a=e?Math.floor(c/this.actionObj.cellWidth):Math.ceil((c+(this.actionObj.clone.getBoundingClientRect().width-b))/this.actionObj.cellWidth),this.parent.options.enableRtl){var y=0;("TimelineMonth"===o||!this.parent.activeViewOptions.timeScale.enable&&"TimelineMonth"!==this.parent.options.currentView)&&(y=this.actionObj.cellWidth);var C=Math.floor(c/this.actionObj.cellWidth)*this.actionObj.cellWidth+(e?0:this.actionObj.clone.getBoundingClientRect().width-y);a=Math.floor(C/this.actionObj.cellWidth)}h=a===l.length,a=this.getIndex(a)}var w=void 0;if(w=-1!==["Year","Month","Week","Date"].indexOf(o)?new Date(this.parent.activeView.renderDates[parseInt(a.toString(),10)].getTime()):this.parent.getDateFromElement(s.children[parseInt(a.toString(),10)]),-1===["TimelineMonth","Year","Month","Week","Date"].indexOf(o)&&this.parent.activeViewOptions.timeScale.enable){e||(c+=this.actionObj.clone.getBoundingClientRect().width);var M=Math.ceil(this.actionObj.slotInterval/this.actionObj.cellWidth*(c-Math.floor(c/this.actionObj.cellWidth)*this.actionObj.cellWidth));M=h||!e&&0===M?this.actionObj.slotInterval:M,(t=new Date(w.getTime())).setMinutes(t.getMinutes()+M),this.updateTimePosition(t)}else t=new Date(w.setHours(t.getHours(),t.getMinutes(),t.getSeconds()))}else{var S=sf.base.closest(this.actionObj.clone,"td").cellIndex,x=Math.ceil((e?this.actionObj.element.getBoundingClientRect().width:0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,N=(u=Math.ceil((this.actionObj.clone.getBoundingClientRect().width-x)/this.actionObj.cellWidth),s=sf.base.closest(this.actionObj.clone,"tr"),e?S-u:S+u-1);N=this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll&&this.parent.activeViewOptions.timeScale.enable?N:this.getIndex(N),t=this.parent.getDateFromElement(s.children[parseInt(N.toString(),10)]),e?t.setHours(i.getHours(),i.getMinutes(),i.getSeconds()):t.setHours(n.getHours(),n.getMinutes(),n.getSeconds())}if(e)this.actionObj.event.endTime.getTime()-t.getTime()<=0&&(t=new Date(this.actionObj.event.startTime.getTime())),this.actionObj.start=this.parent.activeViewOptions.timeScale.enable?this.calculateIntervalTime(t):t;else{var O=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable||0!==t.getHours()||0!==t.getMinutes()?t:p(t,1);this.actionObj.end=this.parent.activeViewOptions.timeScale.enable&&"Month"!==this.parent.options.currentView?this.calculateIntervalTime(O):O}},t.prototype.getTopBottomStyles=function(e,t){var i=this.parent.element.querySelector(".e-content-wrap"),n=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,s=t?this.actionObj.element.offsetHeight+(this.actionObj.Y-this.actionObj.pageY):this.actionObj.element.offsetHeight+(this.actionObj.pageY-this.actionObj.Y),o=t?this.actionObj.element.offsetTop-(this.actionObj.Y-this.actionObj.pageY):this.actionObj.clone.offsetTop;return s=o<0||this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:s,o=o<0?0:o,s=(o=Math.floor(o/n)*n)+s>=i.scrollHeight?i.scrollHeight-o:Math.ceil(s/n)*n,{height:sf.base.formatUnit(s<this.actionObj.cellHeight?Math.floor(s/n)*n:s),top:sf.base.formatUnit(s<this.actionObj.cellHeight&&t?Math.ceil(o/n)*n:o),left:"0px",right:"0px",width:"100%"}},t.prototype.getLeftRightStyles=function(e,t){var i={},n=this.parent.isTimelineView(),s=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable,o=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,r=t?this.actionObj.X-this.actionObj.pageX:this.actionObj.pageX-this.actionObj.X,a=n?this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth*this.actionObj.cellWidth:"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.actionObj.element.getBoundingClientRect().width:Math.ceil(this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth,l=a+Math.ceil(r/this.actionObj.cellWidth)*this.actionObj.cellWidth,h=this.parent.options.enableRtl?parseInt(this.actionObj.element.style.right,10):this.actionObj.clone.offsetLeft;s&&(l=a+Math.ceil(r/o)*o,l=Math.round((h+l)/o)*o-h,this.actionObj.event.isAllDay=!1);var d=!t&&l+this.actionObj.clone.offsetLeft>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:l;if(this.parent.options.enableRtl){var c=n?parseInt(this.actionObj.element.style.right,10):-(l-this.actionObj.cellWidth);c=n?c:t||c>0?0:c,n&&!t&&(c=(c=Math.ceil((this.actionObj.element.offsetLeft+(this.actionObj.element.getBoundingClientRect().width+(this.actionObj.pageX-this.actionObj.X)))/o)*o)<0?Math.abs(c):-c),c=c>=this.scrollArgs.width?this.scrollArgs.width-this.actionObj.cellWidth:c,i.right=sf.base.formatUnit(c),d=d+c>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:d}else{var p=t?this.actionObj.element.offsetLeft-(this.actionObj.X-this.actionObj.pageX):this.parent.options.enableRtl?this.actionObj.element.offsetLeft:0;n&&(p=t?p:parseInt(this.actionObj.clone.style.left,10),p=this.parent.options.enableRtl?t?p:this.actionObj.pageX<this.actionObj.X-this.actionObj.clone.getBoundingClientRect().width?parseInt(this.actionObj.clone.style.right,10):p:t&&this.actionObj.pageX>this.actionObj.X+this.actionObj.clone.getBoundingClientRect().width&&this.actionObj.clone.getBoundingClientRect().width===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):p);var u=p;(p=n?s?t?Math.floor(p/o)*o:p:Math.floor(p/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(p)/this.actionObj.cellWidth)*this.actionObj.cellWidth)<0&&(p=0,d=this.actionObj.clone.getBoundingClientRect().width);var f=Math.ceil(this.actionObj.clone.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth;t&&(i.left=sf.base.formatUnit(n?p:t?u<0?-p:Math.ceil((a-f)/this.actionObj.cellWidth)*this.actionObj.cellWidth:p))}return i.width=sf.base.formatUnit(d),i},t.prototype.resizeValidation=function(e){var t=this.getPageCoordinates(e),i=this.getContentAreaDimension(),n=this.parent.isTimelineView()&&this.parent.activeViewOptions.timeScale.enable,s=this.actionObj.cellWidth,o=!1;return this.resizeEdges.left&&(t.pageX<i.leftOffset&&t.pageX>=i.left&&n&&(s=0),o=t.pageX-s>=i.left),this.resizeEdges.right&&(t.pageX>i.rightOffset&&t.pageX<=i.right&&n&&(s=0),o=t.pageX+s<=i.right),this.resizeEdges.top&&(o=this.actionObj.clone.offsetTop>=i.top),this.resizeEdges.bottom&&(o=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),o},t}(ne),re=(z=function(e,t){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}z(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ae=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=0,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.widthPerMinute=0,t.heightPerMinute=0,t.minDiff=0,t.isStepDragging=!1,t.isMorePopupOpened=!1,t.isAllDayDrag=!1,t.isMultiSelect=!1,t.multiData=[],t.updatedData=[],t.swagData=[],t.startTime=0,t.isAllDayTarget=!1,t.targetTd=null,t.cloneElements=[],t.isCursorAhead=!1,t}return re(t,e),t.prototype.wireDragEvent=function(e){e.ej2_instances&&[].slice.call(e.ej2_instances).forEach((function(e){return e.destroy()}));new sf.base.Draggable(e,{abort:".e-event-resize",clone:!0,isDragScroll:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!!this.parent.options.eventDragArea,cursorAt:this.parent.options.eventDragArea?{left:-20,top:-20}:{left:0,top:0},dragArea:this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea):this.parent.element.querySelector(".e-content-table"),distance:5,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)})},t.prototype.dragHelper=function(e){var t=this;this.setDragActionDefaultValues(),this.actionObj.element=e.element,this.actionObj.action="drag";var i=[];return!this.parent.options.allowMultiDrag||sf.base.isNullOrUndefined(this.parent.selectedElements)||0===this.parent.selectedElements.length||this.parent.selectedElements.length>0&&-1===this.parent.selectedElements.indexOf(this.actionObj.element)?i=[e.element]:(i=this.parent.selectedElements,this.isMultiSelect=!0),i.forEach((function(e){var i=t.createCloneElement(e);e.getAttribute("data-guid")===t.actionObj.element.getAttribute("data-guid")&&(t.actionObj.clone=i,t.parent.options.eventDragArea||"Month"===t.parent.options.currentView||!t.parent.activeViewOptions.timeScale.enable||t.parent.isTimelineView()||t.actionObj.element.classList.contains("e-all-day-appointment")||sf.base.setStyleAttribute(t.actionObj.clone,{cursor:"move",left:"0%",right:"0%",width:"100%"}),t.actionObj.clone.style.top=sf.base.formatUnit(t.actionObj.element.offsetTop)),t.actionObj.cloneElement.push(i),t.cloneElements.push(i),t.actionObj.originalElement.push(e)})),this.actionObj.clone},t.prototype.dragPosition=function(e){if(this.parent.options.eventDragArea)return{left:e.left,top:e.top};var t,i=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,n=sf.base.formatUnit(0);(this.parent.isTimelineView()||"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable)&&(n=sf.base.formatUnit(this.actionObj.clone.offsetLeft)),t=this.isStepDragging?Math.ceil(this.actionObj.clone.getBoundingClientRect().right)+this.actionObj.interval:this.actionObj.clone.getBoundingClientRect().right;var s,o=this.parent.element.querySelector(".e-content-wrap").getBoundingClientRect().right;if(!(this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView&&!this.parent.options.enableRtl&&this.actionObj.pageX>t)||this.isMorePopupOpened||this.actionObj.pageX>o||(this.isCursorAhead=!0),"Month"===this.parent.options.currentView||this.parent.isTimelineView()||!this.parent.activeViewOptions.timeScale.enable||!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup"))s=sf.base.formatUnit(this.actionObj.clone.offsetTop);else if(this.actionObj.clone.classList.contains("e-all-day-appointment"))s=sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop),sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth),right:this.parent.options.enableRtl&&sf.base.formatUnit(0)});else{this.actionObj.element.classList.contains("e-all-day-appointment")&&!this.actionObj.clone.classList.contains("e-all-day-appointment")&&sf.base.setStyleAttribute(this.actionObj.clone,{height:sf.base.formatUnit(this.actionObj.cellHeight),width:sf.base.formatUnit(this.actionObj.cellWidth-1),pointerEvents:"none"});var r=parseInt(e.top,10);r=r<0?0:r,s=sf.base.formatUnit(Math.ceil(r/i)*i);var a=this.parent.element.querySelector(".e-content-wrap").scrollHeight,l=parseInt(s,10)+this.actionObj.clone.offsetHeight;l>a&&(s=parseInt(s,10)-(l-a)+"px")}return{left:n,top:s}},t.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag",this.actionObj.isAllDay=null,this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var e=this.parent.element.querySelector(".e-work-cells");this.actionObj.cellWidth=e.offsetWidth,this.actionObj.cellHeight=e.offsetHeight},t.prototype.dragStart=function(e){var t=this,i=[],n=this.actionObj.element.getAttribute("data-guid");this.isMultiSelect&&this.parent.selectedElements.forEach((function(e){var t=e.getAttribute("data-guid");-1===i.indexOf(t)&&i.push(t)}));var s=this.parent.eventBase.getMouseEvent(e.event),o=parseInt(this.actionObj.element.getAttribute("data-group-index")||"0",10),r={cancel:!1,event:s,excludeSelectors:null,interval:Math.round(this.actionObj.interval),navigation:{enable:!1,timeDelay:2e3},scroll:{enable:!0,scrollBy:30,timeDelay:100},left:s.clientX,top:s.clientY,groupIndex:o};this.parent.uiStateValues.action=!0,this.parent.dotNetRef.invokeMethodAsync("OnDragStart",r,n,i).then((function(i){var n=i.dragEventArgs;Math.round(t.actionObj.interval)===n.interval&&(n.interval=t.actionObj.interval),t.actionObj.isAllDay=i.isAllDay,t.actionObj.event=sf.base.extend({},i,null,!0),delete t.actionObj.event.dragEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var s=sf.base.extend({},t.actionObj.event,null,!0);if(n.cancel||!sf.base.isNullOrUndefined(t.actionObj.element)&&sf.base.isNullOrUndefined(t.actionObj.element.parentElement)){var r=t.actionObj.element.ej2_instances[0];return sf.base.isNullOrUndefined(r)||r.intDestroy(e.event),t.actionObj.action="",t.removeCloneElementClasses(),t.removeCloneElement(),void(t.parent.uiStateValues.action=!1)}e.bindEvents(e.dragElement),t.actionClass("addClass"),t.isMultiSelect&&!sf.base.isNullOrUndefined(i.selectedData)&&(delete t.actionObj.event.selectedData,delete s.selectedData,t.startTime=s.startTime.getTime(),t.getSelectedData(i.selectedData)),t.parent.uiStateValues.action=!0,t.actionObj.start=s.startTime,t.actionObj.end=s.endTime,t.actionObj.groupIndex=o,t.actionObj.interval=n.interval,t.actionObj.navigation=n.navigation,t.actionObj.scroll=n.scroll,t.actionObj.excludeSelectors=n.excludeSelectors;var a=t.parent.element.querySelector(".e-content-wrap");if(t.scrollArgs={element:a,width:a.scrollWidth,height:a.scrollHeight},t.widthPerMinute=t.actionObj.cellWidth/t.actionObj.slotInterval*t.actionObj.interval,t.heightPerMinute=t.actionObj.cellHeight/t.actionObj.slotInterval*t.actionObj.interval,t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=-1,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.minDiff=0,t.isMorePopupOpened=!1,t.daysVariation=-1,t.isAllDayTarget=t.actionObj.clone.classList.contains("e-all-day-appointment"),t.parent.isTimelineView()||!t.parent.activeViewOptions.timeScale.enable){!sf.base.isNullOrUndefined(t.actionObj.clone.offsetParent)&&t.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")&&(t.isMorePopupOpened=!0);var l=t.parent.activeViewOptions.headerRows;t.isHeaderRows=l.length>0&&"Hour"!==l[l.length-1].option&&"Date"!==l[l.length-1].option,t.isTimelineDayProcess=!t.parent.activeViewOptions.timeScale.enable||t.isHeaderRows||"TimelineMonth"===t.parent.options.currentView||l.length>0&&"Date"===l[l.length-1].option,t.isStepDragging=!t.isTimelineDayProcess&&t.actionObj.slotInterval!==t.actionObj.interval,t.isTimelineDayProcess?t.timelineEventModule=new Y(t.parent,"day"):t.timelineEventModule=new Y(t.parent,"hour")}("Month"!==t.parent.options.currentView&&"TimelineYear"!==t.parent.options.currentView&&(t.parent.isTimelineView()||t.parent.activeViewOptions.timeScale.enable)||(t.startTime=d(new Date(t.startTime)).getTime(),t.updateOriginalElement(t.actionObj.clone),t.updateCloneEventDetailElement(t.actionObj.clone),t.monthEvent=new R(t.parent)),"Day"===t.parent.options.currentView||"Week"===t.parent.options.currentView||"WorkWeek"===t.parent.options.currentView)&&(t.verticalEvent=new P(t.parent),t.splitEvent(t.actionObj.event).forEach((function(e){var i='.e-day-wrapper[data-date="'+C(d(e.startTime)).getTime()+'"]';t.parent.activeViewOptions.group.resources.length>0&&(i=i.concat('[data-group-index = "'+t.actionObj.groupIndex+'"]'));var n=t.parent.element.querySelector(i);if(n){var s=n.querySelector('[data-guid="'+t.actionObj.clone.getAttribute("data-guid")+'"]');s&&sf.base.addClass([s],"e-event-action")}})))}))},t.prototype.getSelectedData=function(e){var t=this;e.forEach((function(e){e.startTime=new Date(e.startTime),e.endTime=new Date(e.endTime),t.multiData.push(e)}))},t.prototype.drag=function(e){if(this.parent.onQuickPopupClose(this.isMultiSelect),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=sf.base.extend({},this.actionObj.event,null,!0),i=this.getPageCoordinates(e);if(this.actionObj.Y=this.actionObj.pageY=i.pageY,this.actionObj.X=this.actionObj.pageX=i.pageX,this.actionObj.target=e.target,this.widthUptoCursorPoint=0===this.widthUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left-this.actionObj.X)/this.widthPerMinute)*this.widthPerMinute:this.widthUptoCursorPoint,this.widthUptoCursorPoint=this.isMorePopupOpened?this.actionObj.cellWidth:this.widthUptoCursorPoint,this.heightUptoCursorPoint=0===this.heightUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top-this.actionObj.Y)/this.heightPerMinute)*this.heightPerMinute:this.heightUptoCursorPoint,this.isAllDayDrag=this.parent.activeViewOptions.timeScale.enable?this.actionObj.clone.classList.contains("e-all-day-appointment"):this.actionObj.event.isAllDay,this.isStepDragging&&0===this.minDiff&&this.calculateMinutesDiff(t),("Month"===this.parent.options.currentView||this.isAllDayDrag)&&this.daysVariation<0){var n=this.parent.getDateFromElement(this.actionObj.target);if(sf.base.isNullOrUndefined(n))this.daysVariation=0;else{var s=d(n),o=d(t.startTime);this.daysVariation=(s.getTime()-o.getTime())/864e5}}else this.daysVariation=0;if(this.parent.options.eventDragArea){var r=i.target;this.actionObj.clone.style.top=sf.base.formatUnit(r.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(r.offsetLeft),sf.base.closest(r,".e-schedule")?"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.element.offsetWidth)):(this.actionObj.clone.style.height="",this.actionObj.clone.style.width="")}this.updateScrollPosition(),this.updateNavigatingPosition(e),this.updateDraggingDateTime(e);var a={data:t,event:e,element:this.actionObj.element,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.activeViewOptions.group.resources.length>0&&(a.groupIndex=this.actionObj.groupIndex)}},t.prototype.calculateMinutesDiff=function(e){this.parent.options.enableRtl?this.minDiff=(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint)/this.widthPerMinute*this.actionObj.interval:this.minDiff=this.widthUptoCursorPoint/this.widthPerMinute*this.actionObj.interval;var t=e.startTime,i=f(this.parent.activeView.renderDates[0],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());i.startHour.getTime()>t.getTime()&&(this.minDiff=this.minDiff+(i.startHour.getTime()-t.getTime())/6e4)},t.prototype.dragStop=function(e){if(this.isCursorAhead=!1,this.removeCloneElementClasses(),this.removeCloneElement(),clearInterval(this.actionObj.navigationInterval),this.actionObj.navigationInterval=null,clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionClass("removeClass"),this.parent.uiStateValues.action=!1,this.actionObj.action=null,!this.isAllowDrop(e)){var t=this.actionObj.element.getAttribute("data-guid"),i=C(this.actionObj.start),n=C(this.actionObj.end),s=[];this.updatedData.length>0&&this.updatedData.forEach((function(e){s.push({startTime:C(e.startTime),endTime:C(e.endTime),isAllDay:e.isAllDay,guid:e.guid,groupIndex:e.groupIndex})}));var o=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,r=this.parent.activeViewOptions.group.resources.length>0?this.actionObj.groupIndex:-1,a=[];if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)if(-1===(a=this.getOriginalElement(this.actionObj.element).map((function(e){return parseInt(e.getAttribute("data-group-index"),10)}))).indexOf(this.actionObj.groupIndex)){var l=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10);(a=a.filter((function(e){return e!==l}))).push(this.actionObj.groupIndex)}else a=[];var h=this.parent.eventBase.getMouseEvent(e.event),d={cancel:!1,event:h,left:h.clientX,top:h.clientY,startTime:i,endTime:n,groupIndex:r};this.parent.dotNetRef.invokeMethodAsync("OnDragStop",d,t,o,this.actionObj.isAllDay,a,s),this.updatedData=[],this.multiData=[],this.isMultiSelect=!1,this.parent.selectedElements=[],this.cloneElements=[]}},t.prototype.updateNavigatingPosition=function(e){var t=this;if(this.actionObj.navigation.enable){var i=this.parent.getCurrentTime();sf.base.isNullOrUndefined(this.actionObj.navigationInterval)&&(this.actionObj.navigationInterval=window.setInterval((function(){if(i){var n=t.parent.getCurrentTime().getSeconds(),s=i.getSeconds()+t.actionObj.navigation.timeDelay/1e3;(s=s>=60?s-60:s)===n&&(i=t.parent.getCurrentTime(),t.viewNavigation(),t.updateDraggingDateTime(e))}}),this.actionObj.navigation.timeDelay))}},t.prototype.updateDraggingDateTime=function(e){!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")?this.morePopupEventDragging(e):this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView?(this.timelineEventModule.dateRender=this.parent.activeView.renderDates,this.timelineEventModule.cellWidth=this.actionObj.cellWidth,this.timelineEventModule.getSlotDates(),this.actionObj.cellWidth=this.isHeaderRows?this.timelineEventModule.cellWidth:this.actionObj.cellWidth,this.calculateTimelineTime(e)):"Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.calculateVerticalDate(e):this.calculateVerticalTime(e)},t.prototype.navigationWrapper=function(){if(this.parent.isTimelineView()){var e=void 0,t=(e=this.parent.activeViewOptions.group.resources.length>0?this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index):this.parent.element.querySelector(".e-appointment-container")).querySelector(".e-appointment-wrapper");t||(t=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(t)),t.appendChild(this.actionObj.clone)}else if("Month"!==this.parent.options.currentView&&this.parent.activeViewOptions.timeScale.enable){var i=this.actionObj.clone.classList.contains("e-all-day-appointment")?".e-all-day-appointment-wrapper":".e-appointment-wrapper";if(this.parent.element.querySelectorAll(i).item(this.actionObj.index).appendChild(this.actionObj.clone),".e-all-day-appointment-wrapper"===i){var n=this.getAllDayEventHeight(),s=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(s[0].offsetHeight<n)for(var o=0,r=s;o<r.length;o++){r[o].style.height=(n+2)/12+"em"}this.actionObj.clone.style.height=sf.base.formatUnit(n)}this.actionObj.height=parseInt(this.actionObj.clone.style.height,10)}else{var a=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));this.actionObj.index=this.parent.activeView.renderDates.length<this.actionObj.index?this.parent.activeView.renderDates.length-1:this.actionObj.index;var l=a[this.actionObj.index].querySelector(".e-appointment-wrapper");l||(l=sf.base.createElement("div",{className:"e-appointment-wrapper"}),a[this.actionObj.index].appendChild(l)),l.appendChild(this.actionObj.clone)}},t.prototype.viewNavigation=function(){var e,t=this.parent.element.querySelector(".e-content-wrap");t&&(!this.scrollEdges.top&&!this.scrollEdges.bottom||sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper"))&&(0===t.scrollLeft&&Math.round(this.actionObj.X)<=Math.round(t.getBoundingClientRect().left+this.actionObj.cellWidth+window.pageXOffset)?e=this.parent.options.enableRtl?"Next":"Previous":Math.round(t.scrollLeft)+t.clientWidth===t.scrollWidth&&Math.round(this.actionObj.X)>=Math.round(t.getBoundingClientRect().right-this.actionObj.cellWidth+window.pageXOffset)&&(e=this.parent.options.enableRtl?"Previous":"Next"),e&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate",e))},t.prototype.morePopupEventDragging=function(e){if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"td")))){var t=sf.base.extend({},this.actionObj.event,null,!0),i=t.endTime.getTime()-t.startTime.getTime(),n=sf.base.closest(e.target,"td"),s=this.parent.getDateFromElement(n),o=new Date(s.getTime());o.setMilliseconds(i),this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(n.getAttribute("data-group-index"),10)),this.actionObj.start=new Date(s.getTime()),this.actionObj.end=new Date(o.getTime()),this.actionObj.clone.style.top=sf.base.formatUnit(n.offsetParent.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(n.offsetLeft),this.actionObj.clone.style.width=sf.base.formatUnit(n.offsetWidth);var r,a=n;if("TimelineYear"!==this.parent.options.currentView&&this.parent.isTimelineView()){var l=sf.base.closest(n,"tr").rowIndex;a=this.parent.element.querySelectorAll(".e-appointment-container").item(l)}(r=a.querySelector(".e-appointment-wrapper"))||(r=sf.base.createElement("div",{className:"e-appointment-wrapper"}),a.appendChild(r)),this.appendCloneElement(r)}},t.prototype.calculateVerticalTime=function(e){var t=this;if(!(sf.base.isNullOrUndefined(this.actionObj.target)||this.actionObj.target&&sf.base.isNullOrUndefined(sf.base.closest(this.actionObj.target,"tr"))||!sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")&&!sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(e);var i=this.parent.element.querySelector(".e-content-wrap"),n=sf.base.extend({},this.actionObj.event,null,!0),s=n.startTime,o=n.endTime.getTime()-s.getTime(),r=Math.floor(parseInt(this.actionObj.clone.style.top,10)/this.actionObj.cellHeight)*this.actionObj.cellHeight;r=r<0?0:r,(this.scrollEdges.top||this.scrollEdges.bottom)&&(r=this.scrollEdges.top?i.scrollTop-this.heightUptoCursorPoint+this.actionObj.cellHeight:i.scrollTop+i.offsetHeight-this.actionObj.clone.offsetHeight+(this.actionObj.clone.offsetHeight-this.heightUptoCursorPoint),r=Math.round(r/this.actionObj.cellHeight)*this.actionObj.cellHeight,i.scrollTop>0&&(this.actionObj.clone.style.top=sf.base.formatUnit(r)));var a,l,h=r/this.actionObj.cellHeight,c=this.actionObj.cellHeight/this.actionObj.slotInterval,u=parseFloat(this.actionObj.clone.style.top)-r,f=sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells");if(this.isAllDayDrag||this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll&&f)a=this.parent.element.querySelector(".e-all-day-row");else a=[].slice.call(this.parent.getContentTable().querySelectorAll("tr"))[parseInt(h.toString(),10)];(sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")||f)&&(l=sf.base.closest(this.actionObj.target,"td").cellIndex);var g=sf.base.isNullOrUndefined(l)?sf.base.closest(this.actionObj.clone,"td").cellIndex:l;if(this.actionObj.index=g,!sf.base.isNullOrUndefined(a)){var m,v,b=a.children[parseInt(g.toString(),10)];this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(b.getAttribute("data-group-index"),10)),this.parent.activeViewOptions.timeScale.enable&&!this.isAllDayDrag?(this.appendCloneElement(this.getEventWrapper(g)),(m=this.parent.getDateFromElement(b)).setMinutes(m.getMinutes()+Math.round(u/c)),v=new Date(m.getTime()),this.actionObj.element.classList.contains("e-all-day-appointment")?v.setMinutes(v.getMinutes()+this.actionObj.slotInterval):v.setMilliseconds(o)):((m=this.parent.getDateFromElement(b)).setDate(m.getDate()-this.daysVariation),m.setHours(s.getHours(),s.getMinutes(),s.getSeconds()),(v=new Date(m.getTime())).setMilliseconds(o),!this.actionObj.element.classList.contains("e-all-day-appointment")&&this.actionObj.clone.classList.contains("e-all-day-appointment")&&(v=p(d(v),1)),this.updateAllDayEvents(m,v,this.parent.activeViewOptions.group.byDate?g:void 0)),this.actionObj.start=new Date(+m),this.actionObj.end=new Date(+v);for(var y=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),C=0,w=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));C<w.length;C++){var M=w[C];sf.base.remove(M)}if(this.multiData.length>0){if(this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&!this.actionObj.isAllDay){var S=new Date(parseInt(sf.base.closest(this.actionObj.target,"td").getAttribute("data-date"),10)),x=new Date(+S+6e4*S.getTimezoneOffset()).getTime();this.multiData.forEach((function(e){if(t.swagData.push(sf.base.extend({},e,null,!0)),e.isAllDay){e.startTime=new Date(e.startTime.getTime()+(x-t.startTime));var i=new Date(e.startTime),n=new Date(i.setMinutes(i.getMinutes()+t.actionObj.slotInterval));e.endTime=n,e.isAllDay=!1}})),this.startTime=x}if(this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.actionObj.isAllDay&&this.swagData.length>0){this.multiData=this.swagData,this.swagData=[];var N=sf.base.extend({},this.actionObj.event,null,!0);this.startTime=N.startTime.getTime()}var O=void 0,E=void 0;if(this.parent.activeViewOptions.group.resources.length>0){var I=parseInt(this.actionObj.element.getAttribute("data-group-index"),10);if(O=this.actionObj.groupIndex-I,this.parent.activeViewOptions.group.byDate){var T=[].slice.call(this.parent.element.querySelectorAll(".e-content-table tbody tr"));E=Math.max.apply(Math,T.map((function(e){return parseInt(e.getAttribute("data-group-index"),10)})))}else{T=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));E=parseInt(T[T.length-1].getAttribute("data-group-index"),10)}}for(var D=y.startTime.getTime()-this.startTime,j=0;j<this.multiData.length;j++){if(this.updatedData[parseInt(j.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(j.toString(),10)],D),this.parent.activeViewOptions.group.resources.length>0){var A=parseInt(this.actionObj.cloneElement[parseInt(j.toString(),10)].getAttribute("data-group-index"),10)+O;this.updatedData[parseInt(j.toString(),10)].groupIndex=this.getResourceGroupIndex(A,E)}var z=this.getDayIndex(this.updatedData[parseInt(j.toString(),10)]);if(z>=0){M=this.getEventWrapper(z,this.updatedData[parseInt(j.toString(),10)].isAllDay);this.appendCloneElement(M,this.actionObj.cloneElement[parseInt(j.toString(),10)]),this.updateEventHeight(this.updatedData[parseInt(j.toString(),10)],j,z)}else sf.base.isNullOrUndefined(this.actionObj.cloneElement[parseInt(j.toString(),10)].parentNode)||sf.base.remove(this.actionObj.cloneElement[parseInt(j.toString(),10)])}}else this.updateEventHeight(y);this.updateTimePosition(this.actionObj.start,this.updatedData)}}},t.prototype.getResourceGroupIndex=function(e,t){return e<0?0:e>t?t:e},t.prototype.updateMultipleData=function(e,t){var i=sf.base.extend({},e,null,!0);!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.parent.activeViewOptions.timeScale.enable&&(this.isAllDayTarget&&i.isAllDay||!this.isAllDayTarget&&!i.isAllDay)&&(i.isAllDay=this.actionObj.isAllDay);var n=i.endTime.getTime()-i.startTime.getTime();if(i.isAllDay){var s=Math.ceil(t/864e5),o=Math.ceil(n/864e5),r=new Date(i.startTime);i.startTime=d(new Date(r.setDate(r.getDate()+s))),i.endTime=p(i.startTime,o)}else i.startTime=new Date(i.startTime.getTime()+t),i.endTime=new Date(i.startTime.getTime()+n);return i},t.prototype.getDayIndex=function(e){var t=sf.base.extend({},e,null,!0),i=this.parent.getMsFromDate(t.startTime),n="";(n="."+(this.parent.activeViewOptions.timeScale.enable&&t.isAllDay?"e-all-day-appointment-wrapper":"e-work-cells")+'[data-date="'+i+'"]',this.parent.activeViewOptions.group.resources.length>0)&&(n=n+'[data-group-index="'+(isNaN(e.groupIndex)?this.actionObj.groupIndex:e.groupIndex)+'"]');return this.targetTd=this.parent.element.querySelector(n),sf.base.isNullOrUndefined(this.targetTd)?-1:this.targetTd.cellIndex},t.prototype.splitEvent=function(e){var t=[],i=e.startTime,n=e.endTime;if(d(new Date(i.getTime()))<d(new Date(n.getTime()))){var s=this.parent.activeView.getStartHour(),o=this.parent.activeView.getEndHour(),r=f(d(i),s,o),a=f(d(n),s,o),l=sf.base.extend({},e,null,!0);l.endTime=r.endHour,t.push(l);var h=sf.base.extend({},e,null,!0);h.startTime=a.startHour,t.push(h)}else t.push(e);return t},t.prototype.updateEventHeight=function(e,t,i){this.verticalEvent.initializeValues();for(var n=d(sf.base.extend({},e,null,!0).startTime),s=-1,o=this.parent.getIndexOfDate(this.parent.activeView.renderDates,n),r=this.splitEvent(e),a=(e.endTime.getTime()-e.startTime.getTime())/864e5>=1,l=e.isAllDay||a||r.length>2?[e]:r,h=0;h<l.length;h++){if(h>0){var c='.e-day-wrapper[data-date="'+C(d(l[parseInt(h.toString(),10)].startTime)).getTime()+'"]';this.parent.activeViewOptions.group.resources.length>0&&(c=c.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var p=this.parent.element.querySelector(c);p?(o+=1,s=p.cellIndex):o=-1}if(o>=0){var u=l[parseInt(h.toString(),10)],f=u.startTime,g=u.endTime,m=0,v=this.verticalEvent.getHeight(f,g);if(m=this.verticalEvent.getTopValue(f,o),sf.base.isNullOrUndefined(t))0===h?(this.actionObj.clone.style.top=sf.base.formatUnit(m),this.actionObj.clone.style.height=sf.base.formatUnit(v)):this.renderSpannedEvents(u,s,m,v);else{var b=this.actionObj.cellWidth;if(e.isAllDay){m=this.parent.element.querySelector(".e-all-day-row").offsetTop,v=this.getAllDayEventHeight();var y=e.endTime.getTime()-e.startTime.getTime(),w=Math.ceil(y/864e5);w>=0&&(b=w*this.actionObj.cellWidth)}this.actionObj.cloneElement[parseInt(t.toString(),10)]&&(0===h?(this.actionObj.cloneElement[parseInt(t.toString(),10)].style.top=sf.base.formatUnit(m),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.height=sf.base.formatUnit(v),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.width=sf.base.formatUnit(b),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.left=sf.base.formatUnit(0)):this.renderSpannedEvents(u,s,m,v))}}}},t.prototype.renderSpannedEvents=function(e,t,i,n){if(e.startTime.getTime()!==e.endTime.getTime()){var s=this.createAppointmentElement(this.actionObj.groupIndex);sf.base.addClass([s],["e-schedule-event-clone","e-dynamic-clone"]),sf.base.setStyleAttribute(s,{width:"100%",height:n+"px",top:i+"px",border:"0px"});var o=this.actionObj.clone;""!==o.style.backgroundColor&&sf.base.setStyleAttribute(s,{backgroundColor:o.style.backgroundColor}),[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[parseInt(t.toString(),10)].appendChild(s)}},t.prototype.isSpannedEvent=function(e,t){var i=f(t,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()),n=sf.base.extend({},e,null,!0);return n.isSpanned={isBottom:!1,isTop:!1},e.startTime.getTime()<i.startHour.getTime()&&(n.startTime=i.startHour,n.isSpanned.isTop=!0),e.endTime.getTime()>i.endHour.getTime()&&(n.endTime=i.endHour,n.isSpanned.isBottom=!0),n},t.prototype.updateAllDayEvents=function(e,t,i){this.parent.eventBase.slots=[];var n=this.getUpdatedEvent(e,t,this.actionObj.event),s=this.parent.activeView.renderDates;this.parent.eventBase.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.group.resources.length>0&&(this.parent.eventBase.slots=[],this.parent.eventBase.slots.push(s.map((function(e){return+e}))));var o=this.parent.eventBase.splitEvent(n,s),r='.e-all-day-cells[data-date="'+this.parent.getMsFromDate(o[0].startTime)+'"]';this.parent.activeViewOptions.group.resources.length>0&&(r=r.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var a=[].slice.call(this.parent.element.querySelectorAll(r));if(a.length>0||!sf.base.isNullOrUndefined(i)){var l=sf.base.isNullOrUndefined(i)?a[0].cellIndex:i;this.appendCloneElement(this.getEventWrapper(l)),this.actionObj.clone.style.width=sf.base.formatUnit(o[0].data.count*this.actionObj.cellWidth)}},t.prototype.swapDragging=function(e){var t=sf.base.closest(this.actionObj.target,"td").cellIndex;if(sf.base.closest(this.actionObj.target,".e-date-header-wrap")&&!sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper")){sf.base.addClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!0;var i=this.getAllDayEventHeight(),n=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(n[0].offsetHeight<i)for(var s=0,o=n;s<o.length;s++){o[s].style.height=(i+2)/12+"em"}sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(this.actionObj.cellWidth),height:sf.base.formatUnit(i),top:sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop)})}if(sf.base.closest(this.actionObj.target,".e-work-cells")&&!sf.base.closest(this.actionObj.clone,".e-day-wrapper")){sf.base.removeClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!1;var r=0===this.actionObj.element.offsetHeight?this.actionObj.height:this.actionObj.element.offsetHeight;sf.base.setStyleAttribute(this.actionObj.clone,{left:sf.base.formatUnit(0),height:sf.base.formatUnit(r),width:sf.base.formatUnit(this.actionObj.cellWidth)})}},t.prototype.calculateVerticalDate=function(e){var t=this;if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"tr"))||e.target&&"DIV"===e.target.tagName)){sf.base.isNullOrUndefined(this.parent.options.eventDragArea)&&this.removeCloneElement();var i=sf.base.extend({},this.actionObj.event,null,!0),n=i.endTime.getTime()-i.startTime.getTime(),s=sf.base.closest(this.actionObj.target,"td");if(!sf.base.isNullOrUndefined(s)){var o=s.parentElement;if(this.actionObj.index=o.rowIndex*o.children.length+s.cellIndex,s=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"))[this.actionObj.index],sf.base.isNullOrUndefined(s))return;var r=this.parent.getDateFromElement(s);if(!sf.base.isNullOrUndefined(r)){this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(s.getAttribute("data-group-index"),10));var a=new Date(r.setDate(r.getDate()-this.daysVariation)),l=new Date(a.getTime()),h=new Date(l.getTime()),c=i.startTime.getTime()-d(i.startTime).getTime();l=new Date(l.getTime()+c),h=new Date(l.getTime()+n),this.actionObj.start=new Date(l.getTime()),this.actionObj.end=new Date(h.getTime())}}var p=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);if(sf.base.isNullOrUndefined(this.parent.options.eventDragArea))for(var u=0,f=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));u<f.length;u++){var g=f[u];sf.base.remove(g)}var m="Vertical"===this.parent.activeViewOptions.orientation&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive||"Horizontal"===this.parent.activeViewOptions.orientation&&(0===this.parent.activeViewOptions.group.resources.length||this.parent.uiStateValues.isGroupAdaptive);if(this.multiData&&this.multiData.length>0){var v=d(new Date(p.startTime));c=v.getTime()-this.startTime;"TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0&&(c=12*(v.getFullYear()-new Date(this.startTime).getFullYear()),c-=new Date(this.startTime).getMonth(),c+=v.getMonth());var b=void 0,y=void 0;if(this.parent.activeViewOptions.group.resources.length>0){var C=parseInt(this.actionObj.element.getAttribute("data-group-index"),10);if(b=this.actionObj.groupIndex-C,this.parent.activeViewOptions.group.byDate&&"TimelineYear"!==this.parent.options.currentView){var w=[].slice.call(this.parent.element.querySelectorAll(".e-content-table tbody tr"));y=Math.max.apply(Math,w.map((function(e){return parseInt(e.getAttribute("data-group-index"),10)})))}else{w=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));y=parseInt(w[w.length-1].getAttribute("data-group-index"),10)}}for(var M=function(e){S.updatedData[parseInt(e.toString(),10)]=S.updateMultipleVerticalDate(S.multiData[parseInt(e.toString(),10)],c);var i=S.cloneElements.find((function(i){return i.getAttribute("data-guid")===t.updatedData[parseInt(e.toString(),10)].guid}));if(S.parent.activeViewOptions.group.resources.length>0&&i){var n=parseInt(i.getAttribute("data-group-index"),10)+b;S.updatedData[parseInt(e.toString(),10)].groupIndex=S.getResourceGroupIndex(n,y)}"TimelineYear"===S.parent.options.currentView?S.yearEventsRendering(S.updatedData[parseInt(e.toString(),10)],m,i):S.dynamicEventsRendering(S.updatedData[parseInt(e.toString(),10)],i)},S=this,x=0;x<this.multiData.length;x++)M(x)}else"TimelineYear"===this.parent.options.currentView?this.yearEventsRendering(p,m,null):this.dynamicEventsRendering(p)}},t.prototype.yearEventsRendering=function(e,t,i){if(t){var n=p(e.endTime,-1);if(0===this.parent.activeViewOptions.group.resources.length){for(var s=this.getMonthDiff(e.startTime,n),o=0;o<=s;o++){var r=this.getEventCount(e,this.actionObj.start.getMonth()+o);this.dynamicYearlyEventsRendering(r,!1,i,t)}return}e.count=this.getMonthDiff(e.startTime,n)+1}this.dynamicYearlyEventsRendering(e,!1,i,t)},t.prototype.updateMultipleVerticalDate=function(e,t){var i=sf.base.extend({},e,null,!0),n=i.endTime.getTime()-i.startTime.getTime(),s=new Date(i.startTime);if("TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0)i.startTime=new Date(s.setMonth(s.getMonth()+t));else{var o=Math.ceil(t/864e5);i.startTime=new Date(s.setDate(s.getDate()+o))}return i.endTime=new Date(i.startTime.getTime()+n),i},t.prototype.calculateTimelineTime=function(e){var t,n=this,s=sf.base.extend({},this.actionObj.event,null,!0),o=s.endTime.getTime()-s.startTime.getTime(),r=this.parent.options.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10);r=Math.floor(r/this.actionObj.cellWidth)*this.actionObj.cellWidth,this.parent.options.enableRtl&&(t=Math.abs(parseInt(this.actionObj.clone.style.right,10)),this.actionObj.clone.style.right=sf.base.formatUnit(t)),r=this.getOffsetValue(r,t);var a=this.getColumnIndex(r),l=this.parent.element.querySelector(".e-content-wrap").getBoundingClientRect().right,h=this.parent.isTimelineView()&&!this.parent.options.enableRtl&&this.actionObj.pageX>this.actionObj.clone.getBoundingClientRect().right&&!this.isMorePopupOpened&&!(this.actionObj.pageX>l);!this.isCursorAhead&&!h||this.isStepDragging||(this.isCursorAhead=!0);var c=Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().left)/this.actionObj.cellWidth);this.parent.options.enableRtl&&(c=Math.abs(Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().right)/this.actionObj.cellWidth))-1),this.cursorPointIndex<0&&this.cursorIndex(e,s,r,c);var p=this.parent.getContentTable().querySelector("tr"),u=this.getCursorCurrentIndex(a,c,p);u=u<0?0:u;var f=this.isHeaderRows?new Date(this.timelineEventModule.dateRender[parseInt(u.toString(),10)].getTime()):this.parent.getDateFromElement(p.children[parseInt(u.toString(),10)]);if(this.isStepDragging){var g=this.getWidthDiff(p,u);if(0!==g){var m=Math.round(g/this.widthPerMinute);f.setMinutes(f.getMinutes()+m*this.actionObj.interval),f.setMinutes(f.getMinutes()-this.minDiff)}else f=this.actionObj.start}else if(this.isCursorAhead||h){var v=this.isTimelineDayProcess?1440:this.actionObj.slotInterval;f.setMinutes(f.getMinutes()+v),f.setMilliseconds(-o),f.getTime()===d(f).getTime()&&0===f.getMinutes()&&0===o&&f.setMinutes(-v)}else f.setMinutes(f.getMinutes()-this.cursorPointIndex*(this.isTimelineDayProcess?1440:this.actionObj.slotInterval));if(f=this.calculateIntervalTime(f),this.isTimelineDayProcess){var b=s.startTime;f.setHours(b.getHours(),b.getMinutes(),b.getSeconds())}if(this.parent.options.eventDragArea){var y=this.parent.getDateFromElement(e.target);sf.base.isNullOrUndefined(y)||(f=y)}var C=new Date(f.getTime());C.setMilliseconds(o);var w,M,S=[this.getUpdatedEvent(f,C,this.actionObj.event)];if(this.multiData.length>0){for(var x=S[0].startTime.getTime()-this.startTime,N=0;N<this.multiData.length;N++)this.updatedData[parseInt(N.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(N.toString(),10)],x);S=this.updatedData}if(this.parent.activeViewOptions.group.resources.length>0){var O=this.parent.element.querySelector(".e-resource-column-wrap");M=this.parent.virtualScrollModule?parseInt(O.getAttribute("data-expanded-index"),10):parseInt(O.getAttribute("data-rendered-index"),10);var E=parseInt(this.actionObj.element.getAttribute("data-group-index"),10);this.calculateResourceGroupingPosition(e),w=this.actionObj.groupIndex-E}for(var I=function(t){var i=T.timelineEventModule.splitEvent(S[parseInt(t.toString(),10)],T.timelineEventModule.dateRender);if(0===i.length)return{value:void 0};var o=i[0].data,r=T.getStartTime(i[0],o),a=T.getEndTime(i[0],o),l=T.timelineEventModule.getEventWidth(r,a,s.isAllDay,o.count),h=T.parent.getIndexOfDate(T.timelineEventModule.dateRender,d(new Date(r.getTime())));h=h<0?0:h;var c=T.timelineEventModule.getPosition(r,a,s.isAllDay,h),p=T.multiData.length>0?T.actionObj.cloneElement[parseInt(t.toString(),10)]:T.actionObj.clone;if("TimelineMonth"===T.parent.options.currentView||!T.parent.activeViewOptions.timeScale.enable){r=d(r);var u='.e-work-cells[data-date="'+T.parent.getMsFromDate(r)+'"]',g=T.parent.element.querySelector(u);sf.base.isNullOrUndefined(g)&&(l=0)}if(T.parent.options.enableRtl?p.style.right=sf.base.formatUnit(c):p.style.left=sf.base.formatUnit(c),T.isMorePopupOpened||(p.style.width=sf.base.formatUnit(l)),T.parent.activeViewOptions.group.resources.length>0){var m=parseInt(p.getAttribute("data-group-index"),10),v=T.getResourceGroupIndex(m+w,M);if(S[parseInt(t.toString(),10)].groupIndex=v,T.parent.virtualScrollModule){var b=[].slice.call(T.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)")),y=w;T.parent.element.querySelector('.e-appointment-container:not(.e-hidden)[data-group-index="'+m+'"]')?v=b.findIndex((function(e){return parseInt(e.getAttribute("data-group-index"),10)===m})):(y=m+w-T.actionObj.groupIndex,v=b.findIndex((function(e){return parseInt(e.getAttribute("data-group-index"),10)===n.actionObj.groupIndex}))),v=T.getResourceGroupIndex(v+y,b.length-1)}T.setResourceTopPosition(e,p,v)}T.actionObj.start=new Date(f.getTime()),T.actionObj.end=new Date(C.getTime()),T.updateTimePosition(T.actionObj.start,T.updatedData)},T=this,D=0;D<S.length;D++){var j=I(D);if("object"===i(j))return j.value}},t.prototype.getStartTime=function(e,t){var i=e.startTime,n=f(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return i=n.startHour.getTime()>=t.startTime?n.startHour:n.endHour.getTime()<=t.startTime?this.getNextDay(n.startHour,t):t.startTime,t.trimStartTime=e.isAllDay?n.startHour:t.startTime,i},t.prototype.getNextDay=function(e,t){for(var i,n=1;n<=this.timelineEventModule.dateRender.length;n++)if(i=p(e,n),-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,d(new Date(e.getTime()))))return t.count=t.count-1,i;return i},t.prototype.getEndTime=function(e,t){var i=e.endTime,n=f(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return"TimelineMonth"===this.parent.options.currentView||!this.parent.activeViewOptions.timeScale.enable||this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option?i=t.endTime:(i=t.endTime,n.endHour.getTime()<=t.endTime&&(i=n.endHour),n.startHour.getTime()>=t.endTime.getTime()&&!e.isAllDay&&(i=this.getPreviousDay(n.startHour,n.endHour,t))),t.trimEndTime=e.isAllDay?n.endHour:t.endTime,i},t.prototype.getPreviousDay=function(e,t,i){for(var n=1;n<=this.timelineEventModule.dateRender.length;n++){var s=p(t,-n);if(-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,d(new Date(e.getTime())))){(s=d(new Date(s.getTime()))).setHours(t.getHours(),t.getMinutes(),t.getSeconds());var o=i.count,r=i.endTime;return i.count=0!==r.getHours()||0!==r.getMinutes()?o-1:o,s}}return i.endTime},t.prototype.getOffsetValue=function(e,t){if(this.scrollEdges.left||this.scrollEdges.right){var i=this.parent.element.querySelector(".e-content-wrap");this.parent.options.enableRtl?(t=i.offsetWidth-i.scrollLeft,this.scrollEdges.right?t=t-i.offsetWidth+this.actionObj.clone.offsetWidth-(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint):(t+=this.widthUptoCursorPoint)-this.widthUptoCursorPoint>=i.scrollWidth&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint+this.actionObj.cellWidth),t=i.scrollLeft-i.scrollWidth),this.actionObj.clone.style.left=sf.base.formatUnit(t)):(this.scrollEdges.left?(e=i.scrollLeft-this.widthUptoCursorPoint+this.actionObj.cellWidth,i.scrollLeft+i.offsetWidth>=i.offsetWidth?i.scrollLeft=i.scrollLeft-1:0===this.actionObj.clone.offsetLeft&&(e=i.scrollLeft)):e=i.scrollLeft+i.offsetWidth-this.actionObj.clone.offsetWidth+(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint),e=e<0?0:e,this.actionObj.clone.style.left=sf.base.formatUnit(e))}return e},t.prototype.getWidthDiff=function(e,t){var i=this.scrollArgs.element.getBoundingClientRect();if(i.left<=this.actionObj.pageX&&i.right>=this.actionObj.pageX){var n=e.children[parseInt(t.toString(),10)].offsetLeft,s=this.actionObj.pageX-i.left;return this.parent.options.enableRtl?n+this.actionObj.cellWidth-(this.scrollArgs.element.scrollLeft+s):this.scrollArgs.element.scrollLeft+s-n}return 0},t.prototype.getColumnIndex=function(e){var t=Math.floor(e/this.actionObj.cellWidth);return this.isHeaderRows?t:this.getIndex(t)},t.prototype.getCursorCurrentIndex=function(e,t,i){var n=e+t;if(this.isHeaderRows){var s=Math.floor(i.offsetWidth/this.actionObj.cellWidth);return n>s-1?s-1:n}return n>i.children.length-1?i.children.length-1:n},t.prototype.cursorIndex=function(e,t,i,n){var s=sf.base.closest(e.target,".e-work-cells");if(sf.base.isNullOrUndefined(s)||this.isMorePopupOpened)this.cursorPointIndex=0;else{var o=this.parent.getDateFromElement(s);if(this.isHeaderRows){var r=Math.floor(i/this.actionObj.cellWidth);o=new Date(this.timelineEventModule.dateRender[r+n].getTime())}var a=o.getTime()-new Date(t.startTime).getTime();if(this.isTimelineDayProcess)this.cursorPointIndex=Math.abs(Math.ceil(a/864e5));else{var l=Math.floor(a/6e4/(this.actionObj.slotInterval/this.actionObj.cellWidth));this.cursorPointIndex=Math.floor(l/this.actionObj.cellWidth),this.cursorPointIndex=this.cursorPointIndex<0?0:this.cursorPointIndex}}},t.prototype.setResourceTopPosition=function(e,t,i){var n=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(i),s=n.querySelector(".e-appointment-wrapper");s||(s=sf.base.createElement("div",{className:"e-appointment-wrapper"}),n.appendChild(s)),this.appendCloneElement(s,t);var o=0;if(this.parent.options.rowAutoHeight){var r=this.getCursorElement(e);r&&(o=r.offsetParent.classList.contains("e-appointment")?r.offsetParent.offsetTop:o)}t.style.top=sf.base.formatUnit(o)},t.prototype.calculateResourceGroupingPosition=function(e){var t=this.parent.element.querySelector(".e-content-wrap"),i=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)")),n=o(t.querySelector("table"));n=sf.base.isNullOrUndefined(n)?0:n;var s=this.parent.options.rowAutoHeight?~~(t.querySelector("table").offsetHeight/i.length):this.actionObj.cellHeight,r=Math.floor(Math.floor(this.actionObj.Y+(t.scrollTop-n-window.scrollY)-t.getBoundingClientRect().top)/s);r=r<0?0:r>i.length-1?i.length-1:r,this.actionObj.index=r;var a=sf.base.closest(e.target,"td");this.actionObj.groupIndex=a&&!isNaN(parseInt(a.getAttribute("data-group-index"),10))?parseInt(a.getAttribute("data-group-index"),10):this.actionObj.groupIndex},t.prototype.appendCloneElement=function(e,t){void 0===t&&(t=null),t=sf.base.isNullOrUndefined(t)?this.actionObj.clone:t,this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea).appendChild(t):e.appendChild(t)},t.prototype.getEventWrapper=function(e,t){var i;if(sf.base.isNullOrUndefined(t)&&(t=this.actionObj.clone.classList.contains("e-all-day-appointment")),this.parent.activeViewOptions.timeScale.enable){var n=t?".e-all-day-appointment-wrapper":".e-appointment-wrapper";i=this.parent.element.querySelectorAll(n).item(e)}else{var s=this.parent.element.querySelectorAll(".e-work-cells").item(e);(i=s.querySelector(".e-appointment-wrapper"))||(i=sf.base.createElement("div",{className:"e-appointment-wrapper"}),s.appendChild(i))}return i},t.prototype.getAllDayEventHeight=function(){var e=sf.base.createElement("div",{className:"e-appointment"});this.parent.element.querySelector(".e-all-day-appointment-wrapper").appendChild(e);var t=e.offsetHeight;return sf.base.remove(e),t},t.prototype.isAllowDrop=function(e){if(!this.actionObj.excludeSelectors)return!1;for(var t=!1,i=0,n=this.actionObj.excludeSelectors.split(",");i<n.length;i++){var s=n[i];if(e.target.classList.contains(s)){t=!0;break}}return t},t}(ne),le=function(){function e(e){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.isResourceCell=!1,this.previousTop=0,this.isInitialized=!0,this.parent=e}return e.prototype.getRenderedCount=function(){var e=this.parent.element.querySelector(".e-content-table");return this.renderedLength=e.querySelector("tbody").children.length,this.renderedLength},e.prototype.triggerScrolling=function(){this.parent.dotNetRef.invokeMethodAsync("OnContentUpdate",this.startIndex)},e.prototype.setTranslateValue=function(){this.setItemSize();var e=this.parent.element.querySelector(".e-content-table");if(this.isHorizontalScroll){var t=this.parent.element.querySelector(".e-virtual-track");if(t){var i=this.parent.element.querySelector(".e-date-header-wrap tbody tr");t.style.width=i.offsetWidth+"px"}e.classList.contains("e-virtual-relative")&&sf.base.removeClass([e],"e-virtual-relative"),sf.base.setStyleAttribute(e,{transform:"translateX("+this.translateY+"px)"});var n=this.parent.element.querySelector(".e-event-table");n&&sf.base.setStyleAttribute(n,{transform:"translateX("+this.translateY+"px)"})}else{var s=this.parent.element.querySelector(".e-resource-column-wrap"),o=this.parent.element.querySelector(".e-content-wrap"),r=this.parent.element.querySelector(".e-event-table"),a=this.parent.element.querySelector(".e-current-timeline");this.setVirtualTrackHeight(s),e.classList.contains("e-virtual-relative")&&sf.base.removeClass([e],"e-virtual-relative"),this.setTranslate(s,o,r,a),o.scrollTop=s.scrollTop}},e.prototype.setVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-virtual-track");if(t){var i=parseInt(e.getAttribute("data-expanded-count"),10);t.style.height=i*this.itemSize+"px"}},e.prototype.updateVirtualScrollHeight=function(){var e=this.parent.element.querySelector(".e-virtual-track"),t=this.parent.element.querySelector(".e-resource-column-wrap"),i=parseInt(t.getAttribute("data-rendered-index"),10),n=parseInt(t.getAttribute("data-expanded-index"),10),s=parseInt(t.getAttribute("data-expanded-count"),10);if(i!==n){var o=this.parent.element.querySelector(".e-content-table");this.renderedLength=o.querySelector("tbody").children.length,e.style.height=o.offsetHeight+(s-this.renderedLength)*o.offsetHeight/this.renderedLength+"px"}else e.style.height="";this.averageRowHeight=e.offsetHeight/s},e.prototype.updateVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap"),i=parseInt(t.getAttribute("data-rendered-index"),10),n=parseInt(t.getAttribute("data-expanded-index"),10),s=this.getRenderedCount()+(n-i),o=parseInt(t.getAttribute("data-expanded-count"),10);s=s>o?o:s,e.style.height=s*this.itemSize+"px"},e.prototype.setItemSize=function(){if(this.isHorizontalScroll){var e=this.parent.element.querySelector(".e-work-cells");this.itemSize=e.getBoundingClientRect().width||this.itemSize}else this.itemSize=s(this.parent.activeView.element,"e-work-cells")||this.itemSize},e.prototype.beforeInvoke=function(e,t,i,n){var s=this;if(window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){s.triggerScrolling()}),250),this.isHorizontalScroll)return this.setTranslateX(),this.updateContent(),void(this.previousTop=t.scrollLeft);this.updateContent(),document.activeElement&&document.activeElement.classList.contains("e-resource-cells")&&(this.isResourceCell=!0,this.focusedEle=document.activeElement,this.parent.element.focus()),this.setTranslate(e,t,i,n),this.previousTop=t.scrollTop},e.prototype.setTranslateX=function(){var e,t=this.parent.element.querySelector(".e-content-table"),i=t.querySelector("tbody tr").children.length;if(this.parent.activeViewOptions.group.byDate)e=this.parent.element.querySelector(".e-date-header-wrap tbody tr");else{var n=[].slice.call(this.parent.element.querySelectorAll(".e-date-header-wrap .e-resource-cells"));e=n[n.length-1].parentElement}for(var s=e.childElementCount,o=0,a={startIndex:void 0,endIndex:void 0},l=0;l<s;l++){if(o+=parseInt(e.children[parseInt(l.toString(),10)].getAttribute("colspan"),10),this.startIndex<o&&sf.base.isNullOrUndefined(a.startIndex)&&(a.startIndex=o-parseInt(e.children[parseInt(l.toString(),10)].getAttribute("colspan"),10),l===s-1)){a.endIndex=o;break}if(this.startIndex+this.renderedLength<o&&sf.base.isNullOrUndefined(a.endIndex)){a.endIndex=o;break}}var h=Math.abs(r(t));if(i+a.startIndex!==a.endIndex||a.startIndex!==h/this.itemSize){var d=a.startIndex*this.itemSize;if(this.isContentUpdate=!0,h!==d){this.translateY=this.parent.options.enableRtl?-d:d;var c=this.parent.element.querySelector(".e-event-table");c&&sf.base.setStyleAttribute(c,{transform:"translateX("+this.translateY+"px)"}),sf.base.setStyleAttribute(t,{transform:"translateX("+this.translateY+"px)"})}}},e.prototype.virtualScrolling=function(){this.parent.onClosePopup(),this.parent.morePopup&&this.parent.morePopup.hide();var e=this.parent.element.querySelector(".e-content-wrap");if(this.isHorizontalScroll){this.isContentUpdate=!1;var t=this.itemSize*this.bufferCount;Math.abs(e.scrollLeft)-Math.abs(this.translateY)<=0?(this.leftScroll(e),this.previousTop!==e.scrollLeft&&this.beforeInvoke(null,e,null,null)):Math.abs(e.scrollLeft)-Math.abs(this.translateY)>t&&(this.rightScroll(e),this.previousTop!==e.scrollLeft&&this.beforeInvoke(null,e,null,null))}else{var i=this.parent.element.querySelector(".e-resource-column-wrap"),n=this.parent.element.querySelector(".e-event-table"),s=this.parent.element.querySelector(".e-current-timeline"),o=this.parent.element.querySelector(".e-content-table");this.renderedLength=i.querySelector("tbody").children.length;var r=parseInt(i.querySelector("tbody td").getAttribute("data-group-index"),10),a=this.parent.options.rowAutoHeight?o.offsetHeight-e.offsetHeight:this.bufferCount*this.itemSize;sf.base.addClass([e],"e-transition"),this.setItemSize(),e.scrollTop-this.translateY<=0&&!this.isInitialized?(this.upScroll(e,r),this.previousTop!==e.scrollTop&&(this.isDownScroll=!1,this.beforeInvoke(i,e,n,s))):e.scrollTop-this.translateY>a&&(this.downScroll(e),this.previousTop!==e.scrollTop&&(this.isDownScroll=!0,this.beforeInvoke(i,e,n,s))),this.isInitialized=!1}},e.prototype.upScroll=function(e,t){var i=~~(e.scrollTop/this.itemSize);if(this.parent.options.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0,0===t)this.translateY=e.scrollTop;else{var n=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize;this.translateY=e.scrollTop-this.bufferCount*n>0?e.scrollTop-this.bufferCount*n:0}this.startIndex=i},e.prototype.downScroll=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap");if(t.getAttribute("data-rendered-index")===t.getAttribute("data-expanded-index"))return null;var i=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize,n=~~(e.scrollTop/i),s=n+this.renderedLength,o=parseInt(t.getAttribute("data-expanded-count"),10);s=s>o?n+(o-n):s,this.translateY=e.scrollTop,this.translateY>o*i-this.renderedLength*i&&(this.translateY=o*i-this.renderedLength*i),this.startIndex=s-this.renderedLength},e.prototype.leftScroll=function(e){var t=~~(Math.abs(e.scrollLeft)/this.itemSize);t=t>0?t:0,this.translateY=t*this.itemSize,this.parent.options.enableRtl&&(this.translateY=-this.translateY),this.startIndex=t},e.prototype.rightScroll=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-date-header-wrap tbody tr"));t=[].slice.call(t[t.length-1].children);var i=~~(Math.abs(e.scrollLeft)/this.itemSize)+this.renderedLength;i=i>t.length-1?t.length:i,this.startIndex=i-this.renderedLength,this.translateY=this.startIndex*this.itemSize,this.parent.options.enableRtl&&(this.translateY=-this.translateY)},e.prototype.setTranslate=function(e,t,i,n){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(t.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(i,{transform:"translateY("+this.translateY+"px)"}),sf.base.isNullOrUndefined(n)||sf.base.setStyleAttribute(n,{transform:"translateY("+this.translateY+"px)"})},e.prototype.setTabIndex=function(){var e,t=this.parent.element.querySelector(".e-resource-column-wrap"),i=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));if(i&&t){var n=t.getBoundingClientRect().top;i.forEach((function(e){e.getBoundingClientRect().top>=n?e.setAttribute("tabindex","0"):e.setAttribute("tabindex","-1")}))}this.focusedEle&&(e=this.parent.element.querySelector('.e-resource-cells[tabindex="0"][data-group-index="'+this.focusedEle.getAttribute("data-group-index")+'"]')),e||(e=this.parent.element.querySelector('.e-resource-cells[tabindex="0"]')),this.isResourceCell&&e&&(e.focus(),this.isResourceCell=!1)},e.prototype.hideAppointments=function(){[].slice.call(this.parent.element.querySelectorAll(".e-appointment:not(.e-schedule-event-clone),.e-more-indicator")).forEach((function(e){e.style.visibility="hidden"}))},e.prototype.updateContent=function(){if(this.parent.activeViewOptions.enableVirtualMask){if(!this.isContentUpdate&&this.isHorizontalScroll)return;this.hideAppointments();var e=this.parent.element.querySelector(".e-table-wrap");e&&!e.classList.contains("e-virtual-mask")&&sf.base.addClass([e],"e-virtual-mask")}else if(this.isHorizontalScroll||"TimelineYear"===this.parent.options.currentView)this.isHorizontalScroll&&this.isContentUpdate&&this.hideAppointments();else{var t=[].slice.call(this.parent.element.querySelector(".e-event-table").children);if(t.length<=0)return;var i=parseInt(t[0].getAttribute("data-group-index"),10),n=parseInt(t[t.length-1].getAttribute("data-group-index"),10);if(this.isDownScroll&&!(i<=this.startIndex&&this.startIndex<=n)||!this.isDownScroll&&this.startIndex+this.renderedLength<=i&&this.startIndex+this.renderedLength<=n)for(var s=0;s<t.length;s++){[].slice.call(t[parseInt(s.toString(),10)].children).forEach((function(e){e.style.visibility="hidden"}))}}},e.prototype.getResourceCount=function(){var e=this.isHorizontalScroll?this.parent.element.clientWidth:this.parent.element.clientHeight;return this.renderedLength=Math.ceil(e/this.itemSize)+this.bufferCount,this.renderedLength},e.prototype.destroy=function(){var e=this.parent.element.querySelector(".e-resource-column-wrap table"),t=this.parent.element.querySelector(".e-event-table"),i=this.parent.element.querySelector(".e-current-timeline"),n=this.parent.element.querySelector(".e-content-table");e&&(e.style.transform="none"),n&&(n.style.transform="none"),t&&(t.style.transform="none"),i&&(i.style.transform="none")},e}(),he=function(){function e(e){this.parent=e}return e.prototype.inlineEdit=function(e,i,s,o,r){if(void 0===s&&(s=null),"Cell"===e){var a=this.parent.element.querySelector(".e-more-popup-wrapper");a&&a.classList.contains(t)&&this.parent.morePopup.hide(),!(this.parent.currentCell.classList.contains("e-work-cells")||this.parent.currentCell.classList.contains("e-all-day-cells"))||0!==this.parent.getSelectedCells().length&&"TimelineYear"!==this.parent.options.currentView||this.parent.selectCell(this.parent.currentCell),this.removeInlineAppointmentElement(),this.eventWrapColor=r,this.cellEdit()}else{if(i)return;var l=this.parent.element.querySelector('.e-appointment[data-guid="'+s+'"]');this.parent.element.querySelector(".e-more-popup-wrapper")&&this.parent.element.querySelector(".e-more-popup-wrapper").classList.contains("e-popup-open")&&(l=this.parent.element.querySelector('.e-more-popup-wrapper .e-appointment[data-guid="'+s+'"]')),this.parent.element.querySelector(".e-inline-subject")!==l.querySelector(".e-inline-subject")&&this.removeInlineAppointmentElement(),this.eventEdit(l),o&&(this.parent.eventBase.removeSelectedAppointmentClass(),sf.base.addClass([l],n))}},e.prototype.cellEdit=function(){var e=this.generateEventData(),t=this.parent.activeCellsData.element.cellIndex,i=this.getEventDaysCount(e);i>1&&(i=Math.round(i),t-=--i);var n=new Date(""+e.startTime).getTime(),s=new Date(""+e.endTime).getTime(),o=e.groupIndex||0;"Day"===this.parent.options.currentView||"Week"===this.parent.options.currentView||"WorkWeek"===this.parent.options.currentView?this.createVerticalViewInline(e,t):"Month"===this.parent.options.currentView?this.createMonthViewInline(e,o,n,s):this.createTimelineViewInline(e,n,s,o);var r=this.parent.element.querySelector(".e-inline-subject");r&&r.focus()},e.prototype.createInlineAppointmentElement=function(){var e=sf.base.createElement("div",{className:"e-appointment e-inline-appointment"}),t=sf.base.createElement("div",{className:"e-appointment-details"});e.appendChild(t);var i=sf.base.createElement("input",{className:"e-inline-subject"});return t.appendChild(i),""!==this.eventWrapColor&&sf.base.setStyleAttribute(e,{backgroundColor:this.eventWrapColor}),e},e.prototype.removeInlineAppointmentElement=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-inline-appointment"));e.length>0&&e.forEach((function(e){return sf.base.remove(e)}));var t=this.parent.element.querySelector(".e-inline-subject");if(t){var i=sf.base.closest(t,".e-appointment");sf.base.removeClass([i.querySelector(".e-subject")],"e-disable"),sf.base.remove(t)}},e.prototype.createVerticalViewInline=function(e,t){var i=this.getEventDaysCount(e),n=new P(this.parent);if(n.initializeValues(),i>=1){n.allDayElement=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells"));var s=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),o=0;s.length>0&&(o=Math.floor(this.parent.element.querySelector(".e-all-day-row").getBoundingClientRect().height/s[0].offsetHeight)-1),n.allDayLevel=o,n.renderAllDayEvents(e,t)}else n.renderNormalEvents(e,t)},e.prototype.createMonthViewInline=function(e,t,i,n){var o=this.getEventDaysCount(e),r=this.parent.eventBase.cloneEventObject(e,i,n,o,!1,!1),a=new R(this.parent),l=this.parent.activeView.renderDates.slice(0),h=this.parent.activeView.renderDates,d=this.parent.activeViewOptions.workDays;if(this.parent.activeCellsData.groupIndex>=0?a.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+t+'"]')):a.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),this.parent.activeViewOptions.group.resources.length>0){var c=0;a.workCells.length>0&&(l=[]);for(var p=0,u=a.workCells;p<u.length;p++){var f=u[p];l.push(this.parent.getDateFromElement(f)),d.push(l[parseInt(c.toString(),10)].getDay()),c++}}a.dateRender=l,a.cellWidth=a.workCells[0].offsetWidth,a.cellHeight=a.workCells[0].offsetHeight,a.eventHeight=s(this.parent.element,"e-appointment"),a.getSlotDates(d);for(var g=a.getRenderedDates(h),m=0,v=a.splitEvent(r,g||h);m<v.length;m++){var b=v[m];a.renderEvents(b,t)}this.parent.element.querySelector(".e-inline-subject").focus()},e.prototype.createTimelineViewInline=function(e,t,i,n){var o=this.getEventDaysCount(e),r=this.parent.eventBase.cloneEventObject(e,t,i,o,!1,!1),a=new Y(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");a.dateRender=this.parent.activeView.renderDates,a.eventContainers=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),this.parent.activeCellsData.groupIndex>=0?a.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+n+'"]')):a.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));var l=this.parent.element.querySelector(".e-work-cells");a.inlineValue=this.parent.options.allowInline,a.cellWidth=l.offsetWidth,a.cellHeight=l.offsetHeight;var h=0===this.parent.element.querySelectorAll(".e-content-table tbody tr").length?0:this.parent.element.querySelectorAll(".e-content-table tbody tr")[0].children.length;a.slotsPerDay=h/a.dateRender.length,a.eventHeight=s(a.parent.element,"e-appointment"),a.renderEvents(r,n)},e.prototype.getEventDaysCount=function(e){var t=e.startTime,i=e.endTime;return Math.abs(i.getTime()-t.getTime())/864e5},e.prototype.generateEventData=function(e){var t=this.parent.element.querySelector(".e-inline-subject"),i=t?t.value:e?e.innerHTML:"",n={};return n.subject=i,n.startTime=this.parent.activeCellsData.startTime,n.endTime=this.parent.activeCellsData.endTime,n.isAllDay=this.parent.activeCellsData.isAllDay,this.parent.activeCellsData.groupIndex>=0&&(n.groupIndex=this.parent.activeCellsData.groupIndex),n},e.prototype.eventEdit=function(e){var t,i=this.parent.element.querySelector(".e-inline-subject");if(i)t=i.value;else{var n=e.querySelector(".e-subject"),s=e.querySelector(".e-time");if(t=n.innerText,i=sf.base.createElement("input",{className:"e-inline-subject",attrs:{value:t}}),sf.base.addClass([n],"e-disable"),sf.base.closest(e,".e-more-popup-wrapper"))e.insertBefore(i,n);else if(["Agenda","MonthAgenda"].indexOf(this.parent.options.currentView)>-1){var o=e.querySelector(".e-subject-wrap");o.insertBefore(i,o.firstChild)}else{var r=["TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.options.currentView)>-1?".e-inner-wrap":".e-appointment-details";e.querySelector(r).insertBefore(i,s)}i.focus()}i.setSelectionRange(t.length,t.length)},e}(),de=function(){function e(e,t,i,n,s,o){window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=s,this.options=i,this.activeViewOptions=n,this.dataId=e,window.sfBlazor.setCompInstance(this),this.isAdaptive=sf.base.Browser.isDevice,this.isPrintSchedule=!sf.base.isNullOrUndefined(o),this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:i.isGroupAdaptive,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1,isCustomMonth:!0},this.isAdaptive&&!this.element.classList.contains("e-device")&&sf.base.addClass([this.element],"e-device"),this.render()}return e.prototype.render=function(e){if(void 0===e&&(e=!1),this.setHeight(),this.workCellAction=new te(this),this.initializeLayout(this.options.currentView),this.eventBase=new L(this),this.isPrintSchedule||(this.options.allowKeyboardInteraction&&!this.keyboardInteractionModule?this.keyboardInteractionModule=new ie(this):!this.options.allowKeyboardInteraction&&this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),this.options.allowDragAndDrop?this.dragAndDropModule=new ae(this):!this.options.allowDragAndDrop&&this.dragAndDropModule&&(this.dragAndDropModule.destroy(),this.dragAndDropModule=null),this.options.allowResizing?this.resizeModule=new oe(this):!this.options.allowResizing&&this.resizeModule&&(this.resizeModule.destroy(),this.resizeModule=null)),this.options.allowInline&&(this.inlineModule=new he(this)),this.isPrintSchedule||e||this.wireEvents(),this.virtualScrollModule){var t=this.virtualScrollModule.getResourceCount();this.dotNetRef.invokeMethodAsync("SetRenderedCount",t)}},e.prototype.initializeLayout=function(e){switch(this.activeView&&this.activeView.destroy(),e){case"Day":case"Week":case"WorkWeek":this.activeView=new H(this);break;case"TimelineDay":case"TimelineWorkWeek":case"TimelineWeek":this.activeView=new _(this);break;case"Month":this.activeView=new V(this);break;case"MonthAgenda":this.activeView=new Q(this);break;case"TimelineMonth":this.activeView=new G(this);break;case"Year":case"TimelineYear":this.activeView=new J(this);break;case"Agenda":this.activeView=new ee(this)}this.activeView&&(this.virtualScrollModule&&(this.virtualScrollModule.destroy(),this.virtualScrollModule=null),(-1===["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(this.options.currentView)||"TimelineYear"===this.options.currentView&&"Vertical"===this.activeViewOptions.orientation)&&this.activeViewOptions.allowVirtualScrolling&&this.activeViewOptions.group.resources.length>0&&!this.uiStateValues.isGroupAdaptive&&(this.virtualScrollModule=new le(this),this.isTimelineView()?this.uiStateValues.top=0:(this.virtualScrollModule.isHorizontalScroll=!0,this.uiStateValues.left=0)),this.globalize=new sf.base.Internationalization(this.options.locale),this.activeView.getRenderDates(),this.activeView.renderLayout())},e.prototype.scrollContentReady=function(e){if(this.virtualScrollModule){if(e){this.virtualScrollModule.updateVirtualTrackHeight(this.element.querySelector(".e-virtual-track"));var t=this.element.querySelector(".e-current-timeline");sf.base.isNullOrUndefined(t)||(t.style.height=this.element.querySelector(".e-content-table").offsetHeight+"px");var i={cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0};return void this.onScrollUiUpdate(i)}this.virtualScrollModule.setTranslateValue(),this.virtualScrollModule.setTabIndex()}else{[].slice.call(this.element.querySelectorAll(".e-appointment-container")).forEach((function(e){e.style.height=""}));i={cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0};this.onScrollUiUpdate(i)}},e.prototype.scrollToResource=function(e,t){var i=this.element.querySelector(".e-content-wrap");if(this.options.currentView.indexOf("Timeline")<0||"TimelineYear"===this.options.currentView&&"Horizontal"===this.activeViewOptions.orientation){t=this.activeViewOptions.group.byDate?t+1:t;var n=this.element.querySelectorAll(".e-date-header-wrap tbody tr")[parseInt(t.toString(),10)];i.scrollLeft=n.children[parseInt(e.toString(),10)].offsetLeft}else if(this.virtualScrollModule&&"TimelineYear"!==this.options.currentView){var s=this.element.querySelector(".e-virtual-track"),o=this.element.querySelector(".e-resource-column-wrap"),r=Math.round(s.offsetHeight/parseInt(o.getAttribute("data-expanded-count"),10));if(i.scrollTop=e*r-(this.virtualScrollModule.bufferCount-1)*r,this.virtualScrollModule.virtualScrolling(),this.options.rowAutoHeight)(a=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!a.parentElement.classList.contains("e-hidden")&&(i.scrollTop=i.scrollTop<a.offsetTop?a.offsetTop:i.scrollTop+a.offsetTop);else i.scrollTop=e*r}else{var a;(a=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!a.parentElement.classList.contains("e-hidden")&&(i.scrollTop=a.offsetTop)}},e.prototype.dataReady=function(e,t){this.activeView&&([].slice.call(this.element.querySelectorAll(".e-schedule-event-clone")).forEach((function(e){sf.base.remove(e)})),this.activeView.onDataReady({},e,t))},e.prototype.isTimelineView=function(){return-1!==this.options.currentView.indexOf("Timeline")},e.prototype.isAllDayCell=function(e){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.options.currentView)>-1||e.classList.contains("e-all-day-cells")||e.classList.contains("e-header-cells"))&&this.activeViewOptions.timeScale.enable)||!!(this.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)},e.prototype.getDateFromElement=function(e){var t=e.getAttribute("data-date");if(!sf.base.isNullOrUndefined(t)){var i=parseInt(t,10),n=new Date(i),s=new Date(+n+6e4*n.getTimezoneOffset());return new Date(s.getTime()+6e4*(s.getTimezoneOffset()-n.getTimezoneOffset()))}},e.prototype.getMsFromDate=function(e){return new Date(+e-6e4*e.getTimezoneOffset()).getTime()},e.prototype.getTimeString=function(e){return this.globalize.formatDate(e,{format:this.options.timeFormat,type:"time"})},e.prototype.getDateTime=function(e){return e instanceof Date?new Date(e.getTime()):new Date(e)},e.prototype.getStartEndTime=function(e){if(!sf.base.isNullOrUndefined(e)&&""!==e){var t=this.resetTime(this.getCurrentTime()),i=e.split(":");return 2===i.length&&t.setHours(parseInt(i[0],10),parseInt(i[1],10),0),t}return null},e.prototype.resetTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},e.prototype.getCurrentTime=function(){if(this.options.timezone){var e=(new Date).getTimezoneOffset();return function(e,t,i){"string"==typeof t&&(t=M(e,t)),"string"==typeof i&&(i=M(e,i));var n=e.getTimezoneOffset(),s=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(s-n))}(new Date,e,this.options.timezone)}return new Date},e.prototype.boundaryValidation=function(e,t){var i={left:!1,right:!1,top:!1,bottom:!1},n=this.element.querySelector(".e-content-wrap").getBoundingClientRect();return e<n.top+30+window.pageYOffset&&e>n.top+window.pageYOffset&&(i.top=!0),e>n.bottom-30+window.pageYOffset&&e<n.bottom+window.pageYOffset&&(i.bottom=!0),t<n.left+30+window.pageXOffset&&t>n.left+window.pageXOffset&&(i.left=!0),t>n.right-30+window.pageXOffset&&t<n.right+window.pageXOffset&&(i.right=!0),i},e.prototype.onCellMouseDown=function(e){this.keyboardInteractionModule&&this.keyboardInteractionModule.onCellMouseDown(e)},e.prototype.getNavigateView=function(){return this.isTimelineView()?"TimelineMonth"===this.options.currentView||"TimelineYear"===this.options.currentView?"TimelineDay":"Agenda":"Day"},e.prototype.addSelectedClass=function(e,t){for(var i=0,n=e;i<n.length;i++){n[i].setAttribute("aria-selected","true")}sf.base.addClass(e,"e-selected-cell"),t&&(t.setAttribute("tabindex","0"),t.focus())},e.prototype.removeSelectedClass=function(){for(var e=this.getSelectedCells(),t=0,i=e;t<i.length;t++){var n=i[t];n.setAttribute("aria-selected","false"),n.removeAttribute("tabindex")}sf.base.removeClass(e,"e-selected-cell"),this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0&&(this.keyboardInteractionModule.selectedCells=[])},e.prototype.setWorkHours=function(e,t,i,n){var s;s=this.getWorkHourCells(e,t,i,n),sf.base.addClass(s,"e-work-hours")},e.prototype.resetWorkHours=function(e,t,i,n){if(void 0===e&&(e=this.activeView.renderDates),e&&t&&i){var s=this.getWorkHourCells(e,t,i,n);sf.base.removeClass(s,"e-work-hours")}else{var o=[].slice.call(this.element.querySelectorAll(".e-work-hours"));sf.base.removeClass(o,"e-work-hours")}},e.prototype.getWorkHourCells=function(e,t,i,n){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.options.currentView)>-1)return[];var s=this.getStartEndTime(t),o=this.getStartEndTime(i),r=this.getContentTable();if(sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(o)||!r)return[];s.setMilliseconds(0),o.setMilliseconds(0);var a=this.activeView.getStartHour();s<a&&(s=a);var l=this.activeView.getEndHour();o>l&&(o=l);for(var h=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,d=Math.round((s.getTime()-a.getTime())/h),c=Math.ceil((o.getTime()-a.getTime())/h),p=d,u=c,f=[],g=0,m=e;g<m.length;g++){var v=m[g];v=this.getDateTime(v),this.resetTime(v);var b=this.activeView.renderDates,y=this.getIndexOfDate(b,v);if(y>=0){if(this.isTimelineView()){var C=Math.round((l.getTime()-a.getTime())/h);d=p+y*C,c=u+y*C}for(var w=d;w<c;w++)if(this.isTimelineView()){var M=sf.base.isNullOrUndefined(n)?0:n;f.push(r.rows[parseInt(M.toString(),10)].cells[parseInt(w.toString(),10)])}else if(sf.base.isNullOrUndefined(n))f.push(r.rows[parseInt(w.toString(),10)].cells[parseInt(y.toString(),10)]);else{var S=[].slice.call(r.rows[parseInt(w.toString(),10)].querySelectorAll('.e-work-cells[data-group-index="'+n+'"]'));f.push(S[parseInt(y.toString(),10)])}}}return f},e.prototype.getCellDetails=function(e){var t=e instanceof Array?e:[e],i=sf.base.getElement(t[0]),n=sf.base.getElement(t.slice(-1)[0]),s=this.getDateFromElement(i),o=this.getDateFromElement(n);if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(o)){var r=this.isTimelineView()&&!sf.base.isNullOrUndefined(n.getAttribute("colSpan"))&&this.activeViewOptions.headerRows.length>0,a=r?parseInt(n.getAttribute("colSpan"),10):1,l={startTime:s,endTime:o=!this.activeViewOptions.timeScale.enable||r||n.classList.contains("e-all-day-cells")||n.classList.contains("e-header-cells")?p(new Date(o.getTime()),a):this.activeView.getEndDateFromStartDate(o),isAllDay:this.isAllDayCell(i),element:i},h=i.getAttribute("data-group-index");return sf.base.isNullOrUndefined(h)||(l.groupIndex=parseInt(h,10)),l}},e.prototype.getSelectedElements=function(){return this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0?this.keyboardInteractionModule.selectedCells:this.getSelectedCells()},e.prototype.getSelectedCells=function(){return[].slice.call(this.element.querySelectorAll(".e-selected-cell"))},e.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},e.prototype.getAllDayRow=function(){return this.element.querySelector(".e-all-day-row")},e.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr:not(.e-hidden)"))},e.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll(".e-work-cells"))},e.prototype.getContentTable=function(){return this.element.querySelector(".e-content-table tbody")},e.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},e.prototype.setHeight=function(){this.element.style.height=sf.base.formatUnit(this.options.height)},e.prototype.setDimensions=function(){this.setHeight();var e={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(e)},e.prototype.getCssProperties=function(){return{border:this.options.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.options.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.options.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.options.enableRtl?"paddingRight":"paddingLeft"}},e.prototype.onScrollUiUpdate=function(e){this.activeView&&this.activeView.onScrollUiUpdate(e)},e.prototype.onVirtualScroll=function(){this.virtualScrollModule&&this.virtualScrollModule.virtualScrolling()},e.prototype.removeNewEventElement=function(){var e=this.element.querySelector(".e-new-event");sf.base.isNullOrUndefined(e)||sf.base.remove(e)},e.prototype.closeSidebar=function(e){var t=this.element.querySelector(".e-sidebar");!sf.base.closest(e.target,".e-icon-menu,.e-sidebar")&&t&&t.classList.contains("e-open")&&this.element.querySelector(".e-icon-menu").click()},e.prototype.closeHeaderPopup=function(e){var t=sf.base.closest(e.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),i=this.element.querySelector(".e-header-popup");sf.base.isNullOrUndefined(t)&&i&&this.headerPopup&&this.headerPopup.hide()},e.prototype.closeQuickPopup=function(e){var t,i=".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment,.e-popup",n=sf.base.closest(e.target,i),s=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(n)&&(s&&s.childElementCount>0&&this.quickPopup&&(t=!0),sf.base.closest(e.target,".e-appointment,.e-header-cells")&&this.removeNewEventElement(),!sf.base.closest(e.target,i)&&this.quickPopup&&(t=!0,this.removeNewEventElement()),t&&this.onClosePopup())},e.prototype.beforeOpenEditor=function(){this.removeNewEventElement()},e.prototype.createCalendarPopup=function(){var e=this.element.querySelector(".e-header-popup");e&&!this.headerPopup&&(this.headerPopup=new sf.popups.Popup(e,{actionOnScroll:"hide",targetType:"relative",relateTo:this.isAdaptive?this.element.querySelector(".e-schedule-toolbar"):this.element.querySelector(".e-date-range"),position:{X:"left",Y:"bottom"},enableRtl:this.options.enableRtl}),this.headerPopup.isStringTemplate=!0),this.headerPopup&&(this.headerPopup.element.classList.contains(t)?this.headerPopup.hide():this.headerPopup.show())},e.prototype.ctrlKeySelect=function(e){if(!this.isAdaptive){this.selectedElements=[],this.selectedElements=[].slice.call(this.element.querySelectorAll("."+n));var t=this.element.querySelector('.e-appointment[data-guid="'+e+'"]');this.eventBase.getSelectedEventElements(t)}},e.prototype.createQuickPopup=function(e,i,n){if(this.isAdaptive&&sf.base.isNullOrUndefined(e)&&!n){var s=this.element.querySelector(".e-new-event");return sf.base.isNullOrUndefined(s)&&(s=sf.base.createElement("div",{className:"e-new-event",innerHTML:'<div class="e-title">New Event</div>'})),void this.currentCell.appendChild(s)}var o=this.element.querySelector(".e-quick-popup-wrapper");if(sf.base.isNullOrUndefined(e)||(this.currentCell=this.element.querySelector('.e-appointment[data-guid="'+e+'"]'),!this.currentCell&&this.morePopup&&this.morePopup.element.classList.contains(t)&&(this.currentCell=this.morePopup.element.querySelector('.e-appointment[data-guid="'+e+'"]')),this.element.querySelectorAll('.e-appointment[data-guid="'+e+'"]').length>1&&this.activeEventData&&!sf.base.isNullOrUndefined(this.activeEventData.element)&&this.activeEventData.element.getAttribute("data-guid")===e&&(this.currentCell=this.activeEventData.element),this.activeEventData={element:this.currentCell,guid:[e]}),sf.base.isNullOrUndefined(this.currentCell)&&(this.currentCell=this.element.querySelector(".e-table-container")),!(this.currentCell.classList.contains("e-work-cells")||this.currentCell.classList.contains("e-all-day-cells"))||0!==this.getSelectedCells().length&&"TimelineYear"!==this.options.currentView||this.selectCell(this.currentCell),!n){if(o&&!this.quickPopup&&(this.isAdaptive&&document.body.appendChild(o),this.quickPopup=new sf.popups.Popup(o,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,relateTo:this.currentCell,open:this.quickPopupOpen.bind(this),hideAnimation:this.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.isAdaptive||this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1004:3}),this.quickPopup.isStringTemplate=!0),this.quickPopup)this.isAdaptive&&sf.base.addClass([this.quickPopup.element],"e-device"),this.quickPopup.relateTo=this.currentCell,this.quickPopup.element.querySelector(".e-event-popup")&&this.applyEventColor(),this.adjustPopupPosition();i&&(this.eventBase.removeSelectedAppointmentClass(),this.eventBase.addSelectedAppointments([].slice.call(this.element.querySelectorAll('div[data-guid="'+e+'"]'))),this.activeEventData.element.focus())}},e.prototype.applyEventColor=function(){var e="";e="Agenda"===this.options.currentView||"MonthAgenda"===this.options.currentView?this.options.enableRtl?"border-right-color":"border-left-color":"background-color";var t=this.activeEventData.element.style[e];if(""!==t){var i=this.quickPopup.element.querySelector(".e-popup-header"),n=this.quickPopup.element.querySelector(".e-popup-footer");n&&"block"===getComputedStyle(n).display&&(i=this.quickPopup.element.querySelector(".e-subject"))&&(i.style.borderLeftColor=t,t="rgba("+t.match(/\d+/g).slice(0,3).join()+",0.3)"),i&&(i.style.backgroundColor=t)}},e.prototype.inlineEdit=function(e,t,i,n,s){void 0===i&&(i=null),this.inlineModule.inlineEdit(e,t,i,n,s)},e.prototype.inlineCrudActions=function(e){if(sf.base.closest(e,".e-inline-appointment")){var t=this.inlineModule.generateEventData(e);t.startTime=C(t.startTime),t.endTime=C(t.endTime),this.dotNetRef.invokeMethodAsync("AddInlineAppointment",t,t.groupIndex)}else{var i=e.value;this.dotNetRef.invokeMethodAsync("SaveInlineAppointment",i)}this.inlineModule.removeInlineAppointmentElement()},e.prototype.quickPopupOpen=function(){if(this.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector(".e-cell-popup")){var e=this.quickPopup.element.querySelector(".e-subject");e&&e.focus()}else{var t=this.quickPopup.element.querySelector(".e-event-edit"),i=this.quickPopup.element.querySelector(".e-edit");if(t&&t.hasAttribute("disabled")||i&&i.hasAttribute("disabled")){var n=this.quickPopup.element.querySelector(".e-event-delete"),s=this.quickPopup.element.querySelector(".e-delete");if(n&&n.hasAttribute("disabled")||s&&s.hasAttribute("disabled")){var o=this.quickPopup.element.querySelector(".e-close");o&&o.focus()}else n&&n.focus(),s&&s.focus()}else t&&t.focus(),i&&i.focus()}},e.prototype.adjustPopupPosition=function(){var e=this.quickPopup.element.style.display;if(this.quickPopup.element.style.display="block",this.isAdaptive)this.quickPopup.element.removeAttribute("style"),this.quickPopup.element.style.display="block",this.quickPopup.element.style.height=sf.base.formatUnit(this.isTapHold?65:window.innerHeight);else{var t=this.virtualScrollModule&&this.virtualScrollModule.isHorizontalScroll&&!sf.base.isNullOrUndefined(sf.base.closest(this.currentCell,".e-content-wrap")),i=this.element.querySelector(".e-content-wrap table");this.quickPopup.offsetX=t&&!this.options.enableRtl?r(i)+10:10,this.quickPopup.collision={X:this.options.enableRtl?"flip":"none",Y:"fit"},this.quickPopup.position={X:this.options.enableRtl?"left":"right",Y:"top"},this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0);var n=sf.popups.isCollide(this.quickPopup.element,this.element);if(n.indexOf(this.options.enableRtl?"left":"right")>-1)this.quickPopup.offsetX=-this.currentCell.offsetWidth-10-this.quickPopup.element.offsetWidth,t&&!this.options.enableRtl&&(this.quickPopup.offsetX=r(i)+this.quickPopup.offsetX),this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0),sf.popups.isCollide(this.quickPopup.element,this.element).indexOf("left")>-1&&(this.quickPopup.position={X:"center",Y:"center"},this.quickPopup.collision={X:"fit",Y:"fit"},this.quickPopup.offsetX=-this.quickPopup.element.offsetWidth/2,this.quickPopup.dataBind());if(this.virtualScrollModule&&!this.virtualScrollModule.isHorizontalScroll&&(n.indexOf("top")>-1||n.indexOf("bottom")>-1)){var s=o(i);this.quickPopup.offsetY=s,this.quickPopup.dataBind()}}this.quickPopup.element.style.display=e,this.quickPopup.dataBind(),this.quickPopup.show()},e.prototype.onQuickPopupClose=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isTapHold=!1,t?this.quickPopup&&this.quickPopup.hide():this.onClosePopup(),e||this.eventBase.focusElement()},e.prototype.onClosePopup=function(){this.quickPopup&&this.quickPopup.element.classList.contains("e-popup-open")&&this.dotNetRef.invokeMethodAsync("CloseQuickInfoPopupAsync")},e.prototype.createMoreEventPopup=function(e,t){var i=this.element.querySelector(".e-more-popup-wrapper");if(i&&!this.morePopup&&(this.isAdaptive&&document.body.appendChild(i),this.morePopup=new sf.popups.Popup(i,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1002:2}),this.morePopup.isStringTemplate=!0),this.morePopup){if("Year"===this.options.currentView){var n=this.element.querySelector(':not(.e-other-month)[data-date="'+t+'"]');n&&(this.activeCellsData=this.getCellDetails(n))}for(var s=this.morePopup.element.querySelectorAll(".e-appointment"),o=0;o<s.length;o++){var r=s[parseInt(o.toString(),10)];this.eventBase.wireAppointmentEvents(r,"Year"===this.options.currentView,!0)}var a=this.element.querySelector("."+e+'[data-date="'+t+'"]');"Year"===this.options.currentView?a=-1!==e.indexOf("e-other-month")?sf.base.closest(a,".e-other-month"):this.element.querySelector(':not(.e-other-month)[data-date="'+t+'"]'):this.activeCellsData=this.getCellDetails(a),this.morePopup&&this.isAdaptive&&(sf.base.addClass([this.morePopup.element],"e-device"),this.morePopup.element.removeAttribute("style")),this.morePopup.relateTo=a,this.quickPopup&&this.onClosePopup(),this.morePopup.show()}},e.prototype.morePopupOpen=function(){if(!this.isAdaptive){var e=this.morePopup.element.querySelector(".e-header-date");e&&e.focus()}},e.prototype.onMoreEventPopupClose=function(){if(this.morePopup&&this.morePopup.element.classList.contains(t)){if(this.activeCellsData&&this.activeCellsData.element)if("Year"===this.options.currentView)this.selectCell(this.activeCellsData.element);else{var e=void 0,i=parseInt(this.activeCellsData.element.getAttribute("data-date"),10),n=parseInt(this.activeCellsData.element.getAttribute("data-group-index"),10);(e=isNaN(n)?this.element.querySelector('.e-more-indicator[data-start="'+i+'"]'):this.element.querySelector('.e-more-indicator[data-start="'+i+'"][data-group-index="'+n+'"]'))&&e.focus()}this.onQuickPopupClose(),this.morePopup.hide()}},e.prototype.getTooltipPosition=function(e,t){var i;i=t?this.element.querySelector(".e-quick-popup-wrapper"):document.querySelector("#"+this.element.id+"_dialog_wrapper .e-dlg-content");var n=(t?i.querySelector("#QuickInfo"+e):i.querySelector("#"+e)).getBoundingClientRect(),s=i.getBoundingClientRect(),o={};o[""+e]="top:"+(n.bottom-s.top+i.scrollTop+9)+"px;left:"+(n.left-s.left+i.scrollLeft+n.width/2)+"px;",this.dotNetRef.invokeMethodAsync("ErrorPositioning",o,t)},e.prototype.scrollTo=function(e,t){t=sf.base.isNullOrUndefined(t)?t:this.getDateTime(t),this.activeView.scrollToDate&&sf.base.isNullOrUndefined(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t)},e.prototype.print=function(){var e=this.element.cloneNode(!0);e.id=this.element.id+"_print",document.body.appendChild(e);var t=this.getScrollableElement(this.element),i=t.scrollTop,n=t.scrollLeft;this.printScheduler(e,n,i,!0)},e.prototype.printScheduler=function(e,t,i,n){for(var s=this,o="",r=0,a=[].slice.call(document.querySelectorAll("base, link, style"));r<a.length;r++){o+=a[r].outerHTML}var l=sf.base.createElement("div");e.style.width=e.offsetWidth+"px";var h=n?550:window.outerHeight,d=n?100*Math.round(parseInt(e.style.width,10)/100):window.outerWidth;l.appendChild(e);var c=window.open("","print","height="+h+",width="+d+",tabbar=no");c.document.write("<!DOCTYPE html> <html><head>"+o+"</head><body>"+l.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),c.document.close(),c.focus(),setTimeout((function(){var e=s.getScrollableElement(c.document.body);e.scrollLeft=t,e.scrollTop=i;var n=c.document.querySelector(".e-date-header-wrap");n&&(n.scrollLeft=e.scrollLeft);var o=c.document.querySelector(".e-time-cells-wrap");o&&(o.scrollTop=i),c.print(),c.close()}),2e3)},e.prototype.getScrollableElement=function(e){var t="MonthAgenda"===this.options.currentView?".e-appointment-wrap":".e-content-wrap";return e.querySelector(t)},e.prototype.allDayRowScrollUpdate=function(){var e=this.element.querySelector(".e-date-header-wrap"),t=this.element.querySelector(".e-all-day-row");if(!sf.base.isNullOrUndefined(t)){if("auto"!==this.options.height&&this.options.enableAllDayScroll)e.classList.contains("e-all-day-auto")&&sf.base.removeClass([e],"e-all-day-auto"),this.eventBase.allDayExpandScroll(e);else if(sf.base.addClass([e],"e-all-day-auto"),e.classList.contains("e-all-day-scroll")&&sf.base.removeClass([e],"e-all-day-scroll"),this.uiStateValues.expand){var i=[].slice.call(this.element.querySelectorAll(".e-all-day-cells"));i[0].style.height=t.style.height?t.style.height:i[1].style.height}if(this.uiStateValues.expand){var n={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(n)}else t.style.height=""}},e.prototype.wireEvents=function(){this.wireTouchEvents(),sf.base.EventHandler.add(window,"resize",this.onScheduleResize,this),sf.base.EventHandler.add(window,"orientationchange",this.onScheduleResize,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.onDocumentClick,this)},e.prototype.unwireEvents=function(){this.unwireTouchEvents(),sf.base.EventHandler.remove(window,"resize",this.onScheduleResize),sf.base.EventHandler.remove(window,"orientationchange",this.onScheduleResize),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.onDocumentClick)},e.prototype.wireTouchEvents=function(){var e=this.element.querySelector(".e-table-container");e&&sf.base.isNullOrUndefined(this.touchObj)&&(this.touchObj=new sf.base.Touch(e,{tapHold:this.tapHoldHandler.bind(this)}))},e.prototype.unwireTouchEvents=function(){this.touchObj&&this.touchObj.destroy()},e.prototype.tapHoldHandler=function(e){var t=sf.base.closest(e.originalEvent.target,".e-appointment");if(!sf.base.isNullOrUndefined(t)&&this.isAdaptive){var i=t.getAttribute("data-guid");return this.isTapHold=!0,this.selectedElements=[],this.eventBase.getSelectedEventElements(t),void this.dotNetRef.invokeMethodAsync("OnTapHold",i,this.isTapHold)}},e.prototype.onScheduleResize=function(){var e;this.onClosePopup(),this.morePopup&&this.morePopup.hide(),e=window.devicePixelRatio||window.screen.availWidth/document.documentElement.clientWidth,m!=e&&(g=null,m=e),this.activeView.resetColWidth(),this.onScrollUiUpdate({cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.dataReady()},e.prototype.onDocumentClick=function(e){var i=e.target;if(this.options.allowInline){var n=this.element.querySelector(".e-inline-subject");!i.classList.contains("e-inline-subject")&&n&&""!==n.value?this.inlineCrudActions(n):i.classList.contains("e-inline-subject")||this.inlineModule.removeInlineAppointmentElement()}this.closeHeaderPopup(e),this.closeSidebar(e),this.closeQuickPopup(e),this.eventBase&&this.eventBase.appointmentBorderRemove(e),!this.morePopup||sf.base.closest(i,".e-more-popup-wrapper")||i.classList.contains("e-more-indicator")||sf.base.closest(i,"."+t)||sf.base.closest(i,".e-work-cells")||this.morePopup.hide()},e.prototype.changeInitial=function(e,t,i,n){return this.options.viewIndex!==i||e!==t?(this.uiStateValues.top=e.indexOf("Timeline")>-1&&t.indexOf("Timeline")<0?0:this.uiStateValues.top,["Day","Week","WorkWeek"].indexOf(e)>-1&&["Day","Week","WorkWeek"].indexOf(t)<0||e.indexOf("Timeline")>-1||e.indexOf("Year")>-1):n&&e.indexOf("Timeline")>-1&&e.indexOf("Year")<0},e.prototype.setPersistence=function(){if(this.options.enablePersistence){var e={selectedDate:this.options.selectedDate,currentView:this.options.currentView,viewIndex:this.options.viewIndex},t=this.element.querySelector(".e-content-wrap");sf.base.isNullOrUndefined(t)||(e.top=t.scrollTop,e.left=t.scrollLeft),window.localStorage.setItem(this.element.id,JSON.stringify(e))}},e.prototype.destroy=function(){this.isDestroyed=!0,this.setPersistence(),this.unwireEvents(),this.headerPopup&&this.headerPopup.destroy(),this.quickPopup&&(this.quickPopup.destroy(),sf.base.remove(this.quickPopup.element),this.quickPopup=null),this.morePopup&&(this.morePopup.destroy(),sf.base.remove(this.morePopup.element),this.morePopup=null),this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.activeView&&(this.activeView.destroy(),this.activeView=null)},e}();return{initialize:function(e,t,i,n,s){t&&e&&(i.selectedDate=new Date(i.selectedDate),i.minDate=new Date(i.minDate),i.maxDate=new Date(i.maxDate),sf.base.isNullOrUndefined(n.group.resources)&&(n.group.resources=[]),new de(e,t,i,n,s).dataReady(),t.querySelector(".e-content-placeholder")&&(t.querySelector(".e-content-placeholder").style.display="none"),s.invokeMethodAsync("TriggerCreatedEvent"))},updateLayout:function(t,i,n,s){i.selectedDate=new Date(i.selectedDate),i.minDate=new Date(i.minDate),i.maxDate=new Date(i.maxDate),sf.base.isNullOrUndefined(n.group.resources)&&(n.group.resources=[]);var o=window.sfBlazor.getCompInstance(t);if(o&&o.element){var r=o.options.enableRtl==i.enableRtl;o.uiStateValues.isInitial=o.changeInitial(i.currentView,o.options.currentView,i.viewIndex,s),o.options=i,o.activeViewOptions=n,o.uiStateValues.isGroupAdaptive=i.isGroupAdaptive,o.options.enableRtl&&!o.element.classList.contains(e)?sf.base.addClass([o.element],e):!o.options.enableRtl&&o.element.classList.contains(e)&&sf.base.removeClass([o.element],e),o.render(!0),o.setPersistence(),o.allDayRowScrollUpdate(),r||o.dataReady()}},printWithOptions:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=Object.assign({},n.options),o=Object.assign({},n.activeViewOptions);s.selectedDate=new Date(s.selectedDate),s.minDate=new Date(s.minDate),s.maxDate=new Date(s.maxDate);var r=n.element.cloneNode(!0);r.id=r.id+"_print";var a=n.getScrollableElement(n.element),l=a.scrollTop,h=a.scrollLeft;document.body.appendChild(r),s.height=i.height,s.width=i.width;var d=new de(null,r,s,o,t,!0);"MonthAgenda"!==s.currentView&&d.dataReady(void 0,void 0),d.printScheduler(r,h,l),d.destroy()}},loadCldr:function(e){sf.base.loadCldr(JSON.parse(e))},createCalendarPopup:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.createCalendarPopup()},exportSave:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[parseInt(s.toString(),10)]=i.charCodeAt(s);var o=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},exportToICS:function(e,t){var i=new Blob([e],{type:"data:text/calendar;charset=utf8"});if(t=(t||"Calendar")+".ics",navigator.msSaveBlob)navigator.msSaveBlob(i,t);else{var n=document.createElementNS("http://www.w3.org/1999/xhtml","a");n.download=t,n.href=URL.createObjectURL(i);var s=document.createEvent("MouseEvent");s.initEvent("click",!0,!0),n.dispatchEvent(s),setTimeout((function(){URL.revokeObjectURL(n.href),n.href=void 0}))}},scrollTo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.scrollTo(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()},validation:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.getTooltipPosition(t,i)},addSelectedEventClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.eventBase&&i.eventBase.addSelectedAppointments([].slice.call(i.element.querySelectorAll('div[data-guid="'+t+'"]')))},addSelectedClass:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.currentCell&&t.selectCell(t.currentCell)},createQuickPopup:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.createQuickPopup(t,i,n)},adjustPopupPosition:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.adjustPopupPosition()},closeQuickInfoPopup:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.onQuickPopupClose(!1,!0)},createMoreEventPopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.createMoreEventPopup(t,i)},moreEventPopupClose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.onMoreEventPopupClose()},dataReady:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&(s.uiStateValues.isGroupAdaptive=t,s.dataReady(i,n))},beforeOpenEditor:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.beforeOpenEditor()},scrollContentReady:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.scrollContentReady(t)},scrollToResource:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.scrollToResource(t,i)},printSchedule:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.print()},inlineEdit:function(e,t,i,n,s,o){void 0===n&&(n=null);var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.inlineEdit(t,i,n,s,o)},setWorkHours:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.setWorkHours(t,i,n,s)},resetWorkHours:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.resetWorkHours(t,i,n,s)},getSelectedDetails:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(i&&i.element){if(t){var s=[];return(o=[].slice.call(i.element.querySelectorAll("."+n))).forEach((function(e){s.push(e.getAttribute("data-guid"))})),JSON.stringify(s)}var o=i.getSelectedElements(),r=i.getCellDetails(o);return r.startTime=C(r.startTime),r.endTime=C(r.endTime),JSON.stringify(r)}return null},ctrlKeySelect:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.ctrlKeySelect(t)},getTargetDetails:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element){var o=document.elementFromPoint(t,i),r=void 0;if(o&&"event"===n){if(r=sf.base.closest(o,".e-appointment"))return JSON.stringify(r.getAttribute("data-guid"))}else if(o&&"cell"===n){if(r=sf.base.closest(o,".e-header-cells,.e-all-day-cells,.e-work-cells")){var a=s.getCellDetails(r);return a.startTime=C(a.startTime),a.endTime=C(a.endTime),JSON.stringify(a)}}else if(o&&"resource"===n)return r=sf.base.closest(o,".e-resource-cells"),JSON.stringify(r.getAttribute("data-group-index"));return null}return null},getRowIndex:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=document.elementFromPoint(t,i),o=void 0;return s?(o=sf.base.closest(s,".e-resource-cells"),JSON.stringify(o.parentNode.sectionRowIndex.toString())):null}return null},getElementInfo:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var s=document.elementFromPoint(t,i);if(!s)return null;var o={elementType:""},r=sf.base.closest(s,".e-appointment");if(r)return o.elementType="event",o.guid=r.getAttribute("data-guid"),JSON.stringify(o);var a=sf.base.closest(s,".e-header-cells,.e-all-day-cells,.e-work-cells");if(a){a.classList.contains("e-work-cells")?o.elementType="workCell":a.classList.contains("e-all-day-cells")?o.elementType="allDayCell":a.classList.contains("e-header-cells")&&(o.elementType="headerCell");var l=n.getCellDetails(a);return o.startTime=C(l.startTime),o.endTime=C(l.endTime),o.isAllDay=l.isAllDay,"workCell"===o.elementType&&(o.groupIndex=parseInt(a.getAttribute("data-group-index"),10)),JSON.stringify(o)}var h=sf.base.closest(s,".e-resource-cells,.e-resource-column");if(h){o.elementType="resource";var d=!0;return d=("TimelineYear"!==n.options.currentView||!h.closest(".e-horizontal"))&&d,n.isTimelineView()&&d?(o.groupIndex=parseInt(h.getAttribute("data-group-index"),10),JSON.stringify(o)):(o.rowIndex=h.parentNode.sectionRowIndex,o.colIndex=h.cellIndex,JSON.stringify(o))}var c=sf.base.closest(s,".e-time-slots");if(c){var p=-1,u=void 0;n.isTimelineView()?(p=c.cellIndex,u=n.element.querySelectorAll(".e-content-wrap tbody td:nth-child("+(p+1)+") .e-work-cells")[0]):(p=c.parentElement.rowIndex,u=n.element.querySelectorAll(".e-content-wrap tbody tr:nth-child("+(p+1)+") .e-work-cells")[0]);l=n.getCellDetails(u);return o.startTime=C(l.startTime),o.endTime=C(l.endTime),o.elementType="majorSlot",c.classList.contains("e-time-cells")&&(o.elementType="minorSlot"),JSON.stringify(o)}}return null},updateEventProps:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableIndicator=t.enableIndicator,i.options.enableMaxHeight=t.enableMaxHeight,i.options.ignoreWhitespace=t.ignoreWhitespace)}}}()},"./modules/sf-sidebar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Sidebar=function(){"use strict";var e="Left",t=function(){function t(e,t,i,n){this.enableGestures=!0,this.isOpen=!1,this.closeOnDocumentClick=!1,this.isPositionChange=!1,this.dockSize="auto",this.width="auto",this.isSwipChange=!1,this.element=t,this.dataId=e,window.sfBlazor.setCompInstance(this),this.dotnetRef=i,this.resetProperty(n)}return t.prototype.initialize=function(){this.setTarget(),this.addClass(),this.setType(),this.setCloseOnDocumentClick(),this.setMediaQuery(),sf.base.Browser.isDevice&&(this.windowWidth=window.innerWidth),this.wireEvents()},t.prototype.addClass=function(){var e=document.querySelector(".e-main-content");sf.base.isNullOrUndefined(e||this.targetElement)||sf.base.addClass([e||this.targetElement],["e-content-animation"])},t.prototype.setTarget=function(){this.targetElement=this.element.nextElementSibling,"string"==typeof this.target&&(this.target=document.querySelector(this.target)),this.target&&(this.target.insertBefore(this.element,this.target.children[0]),sf.base.addClass([this.element],"e-sidebar-absolute"),sf.base.addClass([this.target],"e-sidebar-context"),this.targetElement=this.getTargetElement())},t.prototype.getTargetElement=function(){for(var e=this.element.nextElementSibling;!sf.base.isNullOrUndefined(e)&&e.classList.contains("e-sidebar");)e=e.nextElementSibling;return e},t.prototype.hide=function(){var t=this,i=document.querySelector(".e-main-content")||this.targetElement;!this.enableDock&&i&&(i.style.transform=i.classList.contains("e-sidebar")?"":"translateX(0px)",i.style[this.position===e?"marginLeft":"marginRight"]="0px"),this.destroyBackDrop(),this.isOpen=!1,this.sidebarOpened=!1,this.enableDock&&setTimeout((function(){return t.sidebarTimeout()}),50),sf.base.EventHandler.add(this.element,"transitionend",this.transitionEnd,this)},t.prototype.show=function(e){var t=this;e&&setTimeout((function(){return t.setType()}),50),this.isOpen=!0,this.sidebarOpened=!0,sf.base.EventHandler.add(this.element,"transitionend",this.transitionEnd,this)},t.prototype.transitionEnd=function(t){if(this.enableDock&&!this.isOpen){var i=this.position===e?"-100":"100",n=this.position===e?this.setDimension(this.dockSize):"-"+this.setDimension(this.dockSize),s="z-index: "+this.element.style.zIndex+"; width: "+this.element.style.width+";"+" transform: translateX("+i+"%) translateX("+n+")";this.element.setAttribute("style",s)}this.dotnetRef.invokeMethodAsync("SetDock"),sf.base.isNullOrUndefined(t)||this.dotnetRef.invokeMethodAsync("TriggerChange",this.isOpen,t),sf.base.EventHandler.remove(this.element,"transitionend",this.transitionEnd)},t.prototype.createBackDrop=function(e){var t=this.target;(this.backDropApplied=this.showBackdrop,this.resetProperty(e),this.showBackdrop&&this.sidebarOpened)?(this.backDropApplied&&this.destroyBackDrop(),this.modal=sf.base.createElement("div"),this.modal.className="e-sidebar-overlay",this.modal.style.display="block",this.target||t||!this.backDropApplied?(document.querySelector(".e-main-content")||this.targetElement).appendChild(this.modal):document.body.appendChild(this.modal)):this.destroyBackDrop()},t.prototype.destroyBackDrop=function(){(this.showBackdrop||this.backDropApplied)&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.enableGestureHandler=function(t){!this.isOpen&&(this.position===e&&"Right"===t.swipeDirection&&t.startX<=20&&t.distanceX>=50&&t.velocity>=.5||"Right"===this.position&&t.swipeDirection===e&&window.innerWidth-t.startX<=20&&t.distanceX>=50&&t.velocity>=.5)?(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerShow",this.eventArgs),this.show(),this.isSwipChange=!0):(this.isOpen&&this.position===e&&t.swipeDirection===e||"Right"===this.position&&"Right"===t.swipeDirection)&&(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerHide",this.eventArgs),this.hide(),this.isSwipChange=!1)},t.prototype.resize=function(){this.setMediaQuery(),sf.base.Browser.isDevice&&(this.windowWidth=window.innerWidth)},t.prototype.setEnableGestures=function(e){this.resetProperty(e),this.enableGestures?(this.mainContentElement=new sf.base.Touch(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarElement=new sf.base.Touch(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentElement&&this.sidebarElement&&(this.mainContentElement.destroy(),this.sidebarElement.destroy())},t.prototype.wireEvents=function(){this.setEnableGestures(),window.addEventListener("resize",this.resize.bind(this))},t.prototype.unWireEvents=function(){window.removeEventListener("resize",this.resize.bind(this)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentclickHandler),this.mainContentElement&&this.mainContentElement.destroy(),this.sidebarElement&&this.sidebarElement.destroy()},t.prototype.documentclickHandler=function(e){sf.base.closest(e.target,".e-control.e-sidebar")||(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.closeOnDocumentClick&&this.dotnetRef.invokeMethodAsync("TriggerHide",this.eventArgs))},t.prototype.setCloseOnDocumentClick=function(e){this.resetProperty(e),this.closeOnDocumentClick?sf.base.EventHandler.add(document,"mousedown touchstart",this.documentclickHandler,this):sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentclickHandler)},t.prototype.setMediaQuery=function(){this.mediaQuery&&this.windowWidth!==window.innerWidth&&(window.matchMedia(this.mediaQuery).matches?this.dotnetRef.invokeMethodAsync("TriggerShow",null):this.isOpen&&this.dotnetRef.invokeMethodAsync("TriggerHide",null))},t.prototype.setDimension=function(e){return e="number"==typeof e?sf.base.formatUnit(e):"string"==typeof e?e.match(/px|%|em/)?e:sf.base.formatUnit(e):"100%"},t.prototype.sidebarTimeout=function(){var e=document.querySelector(".e-main-content")||this.targetElement,t=this.isOpen?this.setDimension(this.width):this.setDimension(this.dockSize),i=this.setDimension(this.element.getBoundingClientRect().width);e&&(this.isOpen?this.positionStyles(this.width,e,i,t):this.element.classList.contains("e-close")&&this.positionStyles(this.dockSize,e,i,t))},t.prototype.positionStyles=function(t,i,n,s){this.position===e?i.style.marginLeft="auto"===t?n:s:i.style.marginRight="auto"===t?n:s},t.prototype.siblingStyle=function(t,i){t.style[this.position===e?"marginLeft":"marginRight"]=i},t.prototype.resetProperty=function(e){sf.base.isNullOrUndefined(e)||(this.type=e.Type,this.isOpen=e.IsOpen,this.isPositionChange=this.position!==e.Position,this.position=e.Position,this.enableDock=e.EnableDock,this.showBackdrop=e.ShowBackdrop,this.target=e.Target,this.enableGestures=e.EnableGestures,this.closeOnDocumentClick=e.CloseOnDocumentClick,this.mediaQuery=e.MediaQuery,this.dockSize=e.DockSize,this.width=e.Width)},t.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="X"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var s=e.target.getBoundingClientRect();i=s?"X"===t?s.left:s.top:null}return Math.ceil(i)},t.prototype.setType=function(t){this.resetProperty(t);var i="auto"!==this.width&&this.enableDock?this.setDimension(this.width):this.element.getBoundingClientRect().width;i=this.enableDock&&!this.isOpen?this.dockSize:this.enableDock||this.isOpen?i:0;var n=document.querySelector(".e-main-content")||this.targetElement;if(n){this.isPositionChange&&(n.style[this.position===e?"marginRight":"marginLeft"]="0px"),n.style.transform=n.classList.contains("e-sidebar")?"":"translateX(0px)",sf.base.Browser.isDevice||"Auto"===this.type||"Over"===this.type||(n.style[this.position===e?"marginLeft":"marginRight"]="0px"),this.isPositionChange=!1;var s="string"==typeof i?i:i+"px",o=this.position===e?i:-i,r=n&&(this.enableDock||this.isOpen||this.isSwipChange);switch(this.type){case"Push":r&&this.siblingStyle(n,s);break;case"Slide":r&&(n.style.transform="translateX("+o+"px)",this.siblingStyle(n,s));break;case"Over":this.element.classList.contains("e-close")&&(this.enableDock?this.siblingStyle(n,this.dockSize):this.siblingStyle(n,"0px"));break;case"Auto":sf.base.Browser.isDevice?this.enableDock&&!this.isOpen&&this.siblingStyle(n,s):this.enableDock||this.isOpen||this.isSwipChange?this.siblingStyle(n,s):this.enableDock||this.isOpen||this.siblingStyle(n,s),this.isSwipChange=!1}}},t.prototype.destroy=function(){this.destroyBackDrop(),this.element.style.width=this.element.style.zIndex=this.element.style.transform="",this.windowWidth=null,this.mediaQuery=null;var e=document.querySelector(".e-main-content")||this.targetElement;sf.base.isNullOrUndefined(e)||(e.style.margin=e.style.transform=""),this.unWireEvents()},t}();return{initialize:function(e,i,n,s){new t(e,i,n,s);var o=window.sfBlazor.getCompInstance(e);return i&&!sf.base.isNullOrUndefined(o)&&(o.initialize(),sf.base.removeClass([i],"e-hidden")),!(sf.base.Browser.isDevice||!sf.base.isNullOrUndefined(s.MediaQuery)&&!window.matchMedia(s.MediaQuery).matches)||!(!sf.base.Browser.isDevice||!s.IsOpen)},setType:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setType(t)},hide:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.setType(t),i.hide())},show:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.setType(t),n.show(i),n.createBackDrop(t))},onPropertyChange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(void 0!==t.CloseOnDocumentClick&&i.setCloseOnDocumentClick(t),void 0!==t.ShowBackdrop&&i.createBackDrop(t))},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-signature.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Signature=function(){"use strict";var e,t,i=(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minDistance=5,t.previous=0,t.interval=30,t.timeout=null,t.isSignatureEmpty=!0,t.backgroundLoaded=null,t.isBlazor=!1,t.isResponsive=!1,t.signPointsColl=[],t.signRatioPointsColl=[],t}return i(t,e),t.prototype.initialize=function(e,t){this.clearArray=[],this.element=e,this.canvasContext=this.element.getContext("2d"),this.canvasContext.canvas.tabIndex=-1,t&&(this.dotnetRef=t,this.isBlazor=!0,this.signatureValue&&this.loadPersistedSignature()),this.setHTMLProperties(),sf.base.isNullOrUndefined(this.signatureValue)&&this.updateSnapCollection(!0),this.wireEvents(),this.isBlazor||this.trigger("created",null)},t.prototype.wireEvents=function(){!sf.base.isNullOrUndefined(this.pointColl)||this.isReadOnly||this.disabled?this.pointColl&&(sf.base.EventHandler.add(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler,this),sf.base.EventHandler.add(document,"mouseup",this.mouseUpHandler,this)):(sf.base.EventHandler.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this),sf.base.EventHandler.add(this.canvasContext.canvas,"keydown",this.keyboardHandler,this),window.addEventListener("resize",this.resizeHandler.bind(this)))},t.prototype.unwireEvents=function(e){"mouseup"===e||"touchend"===e?(sf.base.EventHandler.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),sf.base.EventHandler.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler),sf.base.EventHandler.remove(document,"mouseup",this.mouseUpHandler)):(sf.base.EventHandler.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler),sf.base.EventHandler.remove(this.canvasContext.canvas,"keydown",this.keyboardHandler),window.removeEventListener("resize",this.resizeHandler))},t.prototype.setHTMLProperties=function(){150===this.element.height&&300===this.element.width&&0!==this.element.offsetHeight&&0!==this.element.offsetWidth?(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth,this.isResponsive=!0):this.element.height===this.element.offsetHeight-1&&this.element.width===this.element.offsetWidth-1||0===this.element.offsetHeight||0===this.element.offsetWidth||(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth),this.canvasContext.scale(1,1),this.canvasContext.fillStyle=this.strokeColor,this.tempCanvas=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-temp"}),this.tempContext=this.tempCanvas.getContext("2d"),this.tempCanvas.width=this.element.width,this.tempCanvas.height=this.element.height,this.backgroundImage?(this.canvasContext.canvas.style.backgroundImage="url("+this.backgroundImage+")",this.canvasContext.canvas.style.backgroundRepeat="no-repeat",this.saveWithBackground&&this.setBackgroundImage(this.backgroundImage,"temp")):this.backgroundColor&&(this.canvasContext.canvas.style.backgroundColor=this.backgroundColor)},t.prototype.mouseDownHandler=function(e){1!==e.buttons&&2!==e.buttons&&"touchstart"!==e.type||("touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),this.beginStroke(e),this.wireEvents())},t.prototype.mouseMoveHandler=function(e){1!==e.buttons&&2!==e.buttons&&"touchmove"!==e.type||("touchmove"===e.type&&(e.preventDefault(),e.stopPropagation()),this.interval?this.updateStrokeWithThrottle(e):this.updateStroke(e))},t.prototype.mouseUpHandler=function(e){"touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),this.endDraw(),this.updateSnapCollection(),this.unwireEvents(e.type),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","mouseUp"):this.trigger("change",{actionName:"strokeUpdate"}),this.signatureValue=this.snapColl[this.incStep];for(var t=0;t<this.signPointsColl.length;t++)this.signRatioPointsColl.push({x:this.signPointsColl[t].x/this.canvasContext.canvas.width,y:this.signPointsColl[t].y/this.canvasContext.canvas.height});this.signPointsColl=[]},t.prototype.keyboardHandler=function(e){var t=this,i={fileName:"Signature",type:"Png",cancel:!1};switch(e.key){case"Delete":this.clear();break;case e.ctrlKey&&"s":this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","beforeSave"):this.trigger("beforeSave",i,(function(e){i.cancel||t.save(e.type,e.fileName)})),e.preventDefault(),e.stopImmediatePropagation();break;case e.ctrlKey&&"z":this.undo();break;case e.ctrlKey&&"y":this.redo()}},t.prototype.resizeHandler=function(){var e=this;if(this.isResponsive){this.canvasContext.canvas.width=this.element.offsetWidth,this.canvasContext.canvas.height=this.element.offsetHeight,this.canvasContext.scale(1,1);for(var t=(this.minStrokeWidth+this.maxStrokeWidth)/2,i=0;i<this.signRatioPointsColl.length;i++)this.arcDraw(this.signRatioPointsColl[i].x*this.canvasContext.canvas.width,this.signRatioPointsColl[i].y*this.canvasContext.canvas.height,t);this.signPointsColl=[],this.canvasContext.closePath(),this.canvasContext.fill()}else{var n=new Image;n.src=this.snapColl[this.incStep],n.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(n,0,0,e.element.width,e.element.height)}}},t.prototype.beginStroke=function(e){this.internalRefresh(),this.updateStroke(e)},t.prototype.updateStroke=function(e){var t=this.createPoint(e);this.addPoint(t)},t.prototype.updateStrokeWithThrottle=function(e){var t=Date.now(),i=this.interval-(t-this.previous);this.storedArgs=e,i<=0||i>this.interval?(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.previous=t,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)):this.timeout||(this.timeout=window.setTimeout(this.delay.bind(this),i))},t.prototype.delay=function(){this.previous=Date.now(),this.timeout=null,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)},t.prototype.createPoint=function(e){var t=this.canvasContext.canvas.getBoundingClientRect();return"mousedown"===e.type||"mousemove"===e.type?this.point(e.clientX-t.left,e.clientY-t.top,(new Date).getTime()):this.point(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top,(new Date).getTime())},t.prototype.point=function(e,t,i){return this.pointX=e,this.pointY=t,this.time=i||(new Date).getTime(),{x:this.pointX,y:this.pointY,time:this.time}},t.prototype.addPoint=function(e){var t,i,n=this.pointColl,s=n.length>0&&n[n.length-1],o=!!s&&this.distanceTo(s)<=this.minDistance;s&&s&&o||(n.push(e),n.length>2&&(3===n.length&&n.unshift(n[0]),t=this.calculateCurveControlPoints(n[0],n[1],n[2]).controlPoint2,i=this.calculateCurveControlPoints(n[1],n[2],n[3]).controlPoint1,this.startPoint=n[1],this.controlPoint1=t,this.controlPoint2=i,this.endPoint=n[2],this.startDraw(),n.shift()))},t.prototype.startDraw=function(){var e;e=this.pointVelocityCalc(this.startPoint),e=this.velocity*e+(1-this.velocity)*this.lastVelocity;var t=Math.max(this.maxStrokeWidth/(e+1),this.minStrokeWidth);this.curveDraw(this.lastWidth,t),this.lastVelocity=e,this.lastWidth=t},t.prototype.endDraw=function(){var e=this.pointColl.length>2,t=this.pointColl[0];!e&&t&&this.strokeDraw(t)},t.prototype.curveDraw=function(e,t){var i,n,s,o,r,a,l,h,d,c,p=this.canvasContext,u=t-e,f=this.bezierLengthCalc(),g=2*Math.ceil(f);for(p.beginPath(),n=0;n<g;n++)r=(o=(s=n/g)*s)*s,d=(h=(l=(a=1-s)*a)*a)*this.startPoint.x,d+=3*l*s*this.controlPoint1.x,d+=3*a*o*this.controlPoint2.x,d+=r*this.endPoint.x,c=h*this.startPoint.y,c+=3*l*s*this.controlPoint1.y,c+=3*a*o*this.controlPoint2.y,c+=r*this.endPoint.y,i=Math.min(e+r*u,this.maxStrokeWidth),this.arcDraw(d,c,i);p.closePath(),p.fill(),this.isSignatureEmpty=!1},t.prototype.strokeDraw=function(e){var t=this.canvasContext,i=(this.minStrokeWidth+this.maxStrokeWidth)/2;t.beginPath(),this.arcDraw(e.x,e.y,i),t.closePath(),t.fill(),this.isSignatureEmpty=!1},t.prototype.arcDraw=function(e,t,i){this.signPointsColl.push({x:e,y:t});var n=this.canvasContext;n.moveTo(e,t),n.arc(e,t,i,0,2*Math.PI,!1)},t.prototype.calculateCurveControlPoints=function(e,t,i){var n=e.x-t.x,s=e.y-t.y,o=t.x-i.x,r=t.y-i.y,a=(e.x+t.x)/2,l=(e.y+t.y)/2,h=(t.x+i.x)/2,d=(t.y+i.y)/2,c=Math.sqrt(n*n+s*s),p=Math.sqrt(o*o+r*r),u=p/(c+p),f=h+(a-h)*u,g=d+(l-d)*u,m=t.x-f,v=t.y-g;return{controlPoint1:this.point(a+m,l+v,0),controlPoint2:this.point(h+m,d+v,0)}},t.prototype.bezierLengthCalc=function(){var e,t,i,n,s,o,r,a,l=0;for(e=0;e<=10;e++)t=e/10,i=this.bezierPointCalc(t,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),n=this.bezierPointCalc(t,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),e>0&&(r=i-s,a=n-o,l+=Math.sqrt(r*r+a*a)),s=i,o=n;return l},t.prototype.bezierPointCalc=function(e,t,i,n,s){return t*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+s*e*e*e},t.prototype.pointVelocityCalc=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0},t.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.pointX-e.x,2)+Math.pow(this.pointY-e.y,2))},t.prototype.isRead=function(e){e?sf.base.EventHandler.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler):this.disabled||sf.base.EventHandler.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this)},t.prototype.enableOrDisable=function(e){this.disabled=e,e?(this.canvasContext.canvas.style.filter="opacity(0.5)",this.isRead(!0)):(this.canvasContext.canvas.style.filter="",this.isRead(!1))},t.prototype.updateSnapCollection=function(e){if(sf.base.isNullOrUndefined(this.incStep)?(this.incStep=-1,this.incStep++,this.snapColl=[],this.clearArray=[]):this.incStep++,this.incStep<this.snapColl.length&&(this.snapColl.length=this.incStep),this.incStep>0){var t=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-wrapper"}),i=t.getContext("2d");t.width=this.canvasContext.canvas.width,t.height=this.canvasContext.canvas.height,i.drawImage(this.canvasContext.canvas,0,0,t.width,t.height),this.snapColl.push(t.toDataURL())}else this.snapColl.push(this.canvasContext.canvas.toDataURL());e&&this.clearArray.push(this.incStep)},t.prototype.setBackgroundImage=function(e,t){var i=this,n=new Image;n.crossOrigin="anonymous",n.src=e,"temp"==t?n.onload=function(){i.tempContext.globalCompositeOperation="source-over",i.tempContext.drawImage(n,0,0,i.element.width,i.element.height)}:(n.onload=function(){i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(n,0,0,i.element.width,i.element.height),i.updateSnapCollection(),i.saveBackground(!0)},this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height))},t.prototype.setBackgroundColor=function(e){var t,i,n=this.canvasContext;for(n.strokeStyle=e,t=1;t<=n.canvas.width;t++)for(i=1;i<=n.canvas.height;i++)n.strokeRect(0,0,t,i);this.updateSnapCollection()},t.prototype.loadPersistedSignature=function(){if(!sf.base.isNullOrUndefined(this.signatureValue)){var e=this,t=new Image;t.src=this.signatureValue,t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0),e.updateSnapCollection()},this.isSignatureEmpty=!1}},t.prototype.getBlob=function(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],n=atob(t[1]),s=n.length,o=new Uint8Array(s);s--;)o[s]=n.charCodeAt(s);return new Blob([o],{type:i})},t.prototype.download=function(e,t){var i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.target="_parent",n.download=t,(document.body||document.documentElement).appendChild(n),n.click(),n.parentNode.removeChild(n)},t.prototype.internalRefresh=function(){this.pointColl=[],this.lastVelocity=0,this.lastWidth=(this.minStrokeWidth+this.maxStrokeWidth)/2},t.prototype.refresh=function(){this.isResponsive=!1,this.setHTMLProperties(),this.resizeHandler(),this.internalRefresh()},t.prototype.clear=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.internalRefresh(),this.signRatioPointsColl=[],this.updateSnapCollection(!0),this.isSignatureEmpty=!0,this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Clear"):this.trigger("change",{actionName:"clear"})},t.prototype.undo=function(){var e=this;if(this.incStep>0){this.incStep--;var t=new Image;t.src=this.snapColl[this.incStep],t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Undo"):this.trigger("change",{actionName:"undo"})},t.prototype.redo=function(){var e=this;if(this.incStep<this.snapColl.length-1){this.incStep++;var t=new Image;t.src=this.snapColl[this.incStep],t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Redo"):this.trigger("change",{actionName:"redo"})},t.prototype.isClear=function(){if(this.clearArray){for(var e=!1,t=0;t<this.clearArray.length;t++)this.clearArray[t]===this.incStep&&(this.isSignatureEmpty=!0,e=!0);e||(this.isSignatureEmpty=!1)}},t.prototype.isEmpty=function(){return this.isSignatureEmpty},t.prototype.canUndo=function(){return this.incStep>0},t.prototype.canRedo=function(){return this.incStep<this.snapColl.length-1},t.prototype.draw=function(e,t,i,n,s){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),t=t||"Arial",i=i||30,this.canvasContext.font=i+"px "+t;var o=this.element.width/2,r=this.element.height/2;sf.base.isNullOrUndefined(n)&&sf.base.isNullOrUndefined(s)?(this.canvasContext.textAlign="center",this.canvasContext.textBaseline="middle"):(o=sf.base.isNullOrUndefined(n)?o:n,r=sf.base.isNullOrUndefined(s)?r+i/2:s+i/2),this.canvasContext.fillText(e,o,r),this.updateSnapCollection(),this.isSignatureEmpty=!1,this.trigger("change",{actionName:"draw-text"})},t.prototype.load=function(e,t,i){i=i||this.element.height,t=t||this.element.width,this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var n=this,s=new Image;s.src=e,"data"!==e.slice(0,4)&&(s.crossOrigin="anonymous"),s.onload=function(){Promise.all([createImageBitmap(s,0,0,t,i)]).then((function(s){var o=document.createElement("canvas");o.width=t,o.height=i,o.getContext("2d").drawImage(s[0],0,0),"data"!==e.slice(0,4)&&(n.canvasContext.globalCompositeOperation="source-over"),n.canvasContext.drawImage(o,0,0,t,i,0,0,n.element.width,n.element.height),n.updateSnapCollection()}))},this.isSignatureEmpty=!1},t.prototype.saveBackground=function(e){var t;if(t=e&&this.backgroundImage?this.snapColl[this.incStep-1]:this.snapColl[this.incStep],e||(this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.backgroundImage?this.setBackgroundImage(this.backgroundImage):this.backgroundColor&&(this.setBackgroundColor(this.backgroundColor),e=!0)),e){var i=this,n=new Image;n.crossOrigin="anonymous",n.src=t,n.onload=function(){i.backgroundLoaded=!0,i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(n,0,0,i.element.width,i.element.height),i.save(i.fileType,i.fileName)}}},t.prototype.save=function(e,t){if(this.saveWithBackground&&null==this.backgroundLoaded&&(this.backgroundImage||this.backgroundColor))this.backgroundLoaded=!1,this.fileType=e,this.fileName=t,this.saveBackground(!1);else if("Svg"===e)t=t||"Signature",this.toSVG(t);else if("Jpeg"===e)if(t=t||"Signature",!this.saveWithBackground||this.saveWithBackground&&!this.backgroundImage&&!this.backgroundColor)this.toJPEG(t);else{var i=this.canvasContext.canvas.toDataURL("image/jpeg");this.download(this.getBlob(i),t+".jpeg")}else{t=t||"Signature";i=this.canvasContext.canvas.toDataURL("image/png");this.download(this.getBlob(i),t+".png")}this.saveWithBackground&&this.backgroundLoaded&&this.resetSnap()},t.prototype.resetSnap=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var e=this,t=new Image;t.src=this.snapColl[this.incStep-1],t.onload=function(){e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height),e.updateSnapCollection()},this.backgroundLoaded=null,this.snapColl.pop(),this.incStep--,this.snapColl.pop(),this.incStep--},t.prototype.toJPEG=function(e){var t=this,i=this.snapColl[this.incStep];this.setBackgroundColor("#ffffff");var n=this,s=new Image;s.crossOrigin="anonymous",s.src=i,s.onload=function(){n.canvasContext.globalCompositeOperation="source-over",n.canvasContext.drawImage(s,0,0,n.element.width,n.element.height);var i=n.canvasContext.canvas.toDataURL("image/jpeg");n.download(n.getBlob(i),e+".jpeg"),n.canvasContext.clearRect(0,0,n.canvasContext.canvas.width,n.canvasContext.canvas.height),t.resizeHandler()},this.snapColl.pop(),this.incStep--},t.prototype.toSVG=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.canvasContext.canvas.width.toString()),i.setAttribute("height",this.canvasContext.canvas.height.toString());var n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS(null,"height",this.canvasContext.canvas.height.toString()),n.setAttributeNS(null,"width",this.canvasContext.canvas.width.toString()),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),i.appendChild(n);var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.canvasContext.canvas.width+'" height="'+this.canvasContext.canvas.height+'">',o=i.innerHTML,r="data:image/svg+xml;base64,"+btoa(s+o+"</svg>");return null==e?r:(this.download(this.getBlob(r),e+".svg"),null)},t.prototype.saveAsBlob=function(){return this.getBlob(this.canvasContext.canvas.toDataURL("image/png"))},t.prototype.getSignature=function(e){return this.saveWithBackground&&this.backgroundColor&&!this.backgroundImage?(this.tempContext.fillStyle=this.backgroundColor,this.tempContext.fillRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)):this.backgroundColor||this.backgroundImage||"Jpeg"!==e||(this.tempContext.fillStyle="#fff",this.tempContext.fillRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)),this.tempContext.drawImage(this.element,0,0),"Jpeg"===e?this.tempCanvas.toDataURL("image/jpeg"):"Svg"===e?this.toSVG(null,this.tempCanvas.toDataURL("image/png")):this.tempCanvas.toDataURL("image/png")},t.prototype.getModuleName=function(){return"signature"},t.prototype.getPersistData=function(){return this.signatureValue=this.snapColl[this.incStep],this.addOnPersist(["signatureValue"])},t.prototype.destroy=function(){"image-editor"!==this.getModuleName()&&(this.unwireEvents(null),sf.base.removeClass([this.element],"e-"+this.getModuleName()),this.element.removeAttribute("tabindex"),this.pointColl=null),e.prototype.destroy.call(this)},t.prototype.propertyChanged=function(e,t){var i=this.canvasContext;switch(e){case"backgroundColor":i.canvas.style.backgroundColor=t,this.backgroundColor=t;break;case"backgroundImage":i.canvas.style.backgroundImage="url("+t+")",this.backgroundImage=t,this.saveWithBackground&&this.setBackgroundImage(this.backgroundImage,"temp");break;case"strokeColor":i.fillStyle=t,this.strokeColor=t;break;case"saveWithBackground":this.saveWithBackground=t;break;case"maxStrokeWidth":this.maxStrokeWidth=t;break;case"minStrokeWidth":this.minStrokeWidth=t;break;case"velocity":this.velocity=t;break;case"isReadOnly":this.isRead(t);break;case"disabled":this.enableOrDisable(t)}},t}(sf.base.Component),s=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),o=function(){function e(e,t,i,n){this.dataId=e,this.element=t,window.sfBlazor.setCompInstance(this),this.dotnetRef=n,this.signatureBase=new r,this.signatureBase.backgroundColor=i.backgroundColor,this.signatureBase.backgroundImage=i.backgroundImage,this.signatureBase.strokeColor=i.strokeColor||"#000000",this.signatureBase.isReadOnly=i.isReadOnly,this.signatureBase.disabled=i.disabled,this.signatureBase.saveWithBackground=i.saveWithBackground,this.signatureBase.signatureValue=i.signatureValue,this.signatureBase.minStrokeWidth=i.minStrokeWidth||.5,this.signatureBase.maxStrokeWidth=i.maxStrokeWidth||2,this.signatureBase.velocity=i.velocity||.7}return e.prototype.saveAsBlob=function(e){var t=e.getContext("2d").canvas.toDataURL().split(",");return atob(t[1]).length},e}(),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.onPropertyChanged=function(){},t.prototype.preRender=function(){},t.prototype.render=function(){},t}(n);return{initialize:function(e,t,i,n){sf.base.isNullOrUndefined(t)||(new o(e,t,i,n),window.sfBlazor.getCompInstance(e).signatureBase.initialize(t,n))},clear:function(e){window.sfBlazor.getCompInstance(e).signatureBase.clear()},undo:function(e){window.sfBlazor.getCompInstance(e).signatureBase.undo()},redo:function(e){window.sfBlazor.getCompInstance(e).signatureBase.redo()},save:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);switch(t){case 0:n.signatureBase.save("Png",i);break;case 1:n.signatureBase.save("Jpeg",i);break;case 2:n.signatureBase.save("Svg",i)}},draw:function(e,t,i,n,s,o){window.sfBlazor.getCompInstance(e).signatureBase.draw(t,i,n,s,o)},load:function(e,t,i,n){window.sfBlazor.getCompInstance(e).signatureBase.load(t,i,n)},getSignature:function(e,t){var i=window.sfBlazor.getCompInstance(e);switch(t){case 0:return i.signatureBase.getSignature("Png");case 1:return i.signatureBase.getSignature("Jpeg");case 2:return i.signatureBase.getSignature("Svg")}return null},saveAsBlob:function(e,t){return window.sfBlazor.getCompInstance(e).saveAsBlob(t)},onPropertyChanged:function(e,t,i){window.sfBlazor.getCompInstance(e).signatureBase.propertyChanged(t,i)},isEmpty:function(e){return window.sfBlazor.getCompInstance(e).signatureBase.isEmpty()},canUndo:function(e){return window.sfBlazor.getCompInstance(e).signatureBase.canUndo()},canRedo:function(e){return window.sfBlazor.getCompInstance(e).signatureBase.canRedo()},destroy:function(e){window.sfBlazor.getCompInstance(e).signatureBase.destroy()},refresh:function(e){window.sfBlazor.getCompInstance(e).signatureBase.refresh()}}}()},"./modules/sf-slider.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Slider=function(){"use strict";var e="e-handle-focused",t="e-handle-active",i="Horizontal",n=function(){function n(e,t,i,n){this.activeHandle=1,this.initialRendering=!0,this.isClicked=!1,this.isSliderMove=!1,this.isDragRange=!1,this.isTabPressed=!1,this.isKeyPressed=!1,this.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)",scaleTransform:"transform .4s cubic-bezier(.25, .8, .25, 1)"},this.isDestroyed=!1,this.element=t,this.dataId=e,window.sfBlazor.setCompInstance(this),this.dotNetRef=i,this.options=n,this.initialRendering=!0,null===this.options.Value&&(this.options.Value="Range"!==this.options.Type?this.options.Min:[this.options.Min,this.options.Max]),this.options.CustomValues&&(this.options.Min=0,this.options.Max=n.CustomValues.length-1)}return n.prototype.initialize=function(){if(this.sliderContainer=this.element.parentElement,this.sliderTrack=this.element.querySelector(".e-slider-track"),this.hiddenInput=this.element.parentElement.querySelector(".e-slider-input"),this.setElementWidth(this.options.Width),0===this.element.getBoundingClientRect().height&&"Vertical"===this.options.Orientation&&(this.element.style.height=this.element.parentElement.getBoundingClientRect().height+"px"),this.setHandler(),this.setZindex(),sf.base.isNullOrUndefined(this.options.Limits)||this.setLimitBarPosition(),this.isMaterial="material"===this.getTheme(this.sliderContainer),this.isMaterial3="Material3"===this.getTheme(this.sliderContainer),sf.base.isNullOrUndefined(this.materialHandle)&&(this.isMaterial||this.isMaterial3)&&null!==this.options.Tooltip&&"Range"!==this.options.Type){this.materialHandle=document.createElement("div"),this.materialHandle.className="e-handle e-material-handle";var e=this.element.querySelector(".e-material-handle");sf.base.isNullOrUndefined(e)||this.element.removeChild(e),this.element.appendChild(this.materialHandle)}return this.setValue(!1),this.updateColorRangeBarPos(),this.initialRendering&&this.options.Enabled&&!this.options.ReadOnly&&this.wireEvents(),this.getTheme(this.sliderContainer)},n.prototype.rangeBarMousedown=function(e){var t,i;if("mousedown"===e.type&&e.preventDefault(),this.changedEventValue=this.options.Value,"Range"===this.options.Type&&e.target===this.rangeBar){var n=void 0,s=void 0;"mousedown"===e.type?(n=(t=[e.clientX,e.clientY])[0],s=t[1]):"touchstart"===e.type&&(n=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],s=i[1]),"Horizontal"===this.options.Orientation?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=s-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-s),this.minDiff=this.handleVal2-this.handleVal1;var o=this.element.querySelector(".e-tab-handle");o&&o.classList.remove("e-tab-handle"),sf.base.EventHandler.add(document,"mousemove touchmove",this.dragRangeBarMove,this),sf.base.EventHandler.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},n.prototype.dragRangeBarUp=function(e){this.triggerChangeEvent(this.changedEventValue,e,!0),sf.base.EventHandler.remove(document,"mousemove touchmove",this.dragRangeBarMove),sf.base.EventHandler.remove(document,"mouseup touchend",this.dragRangeBarUp),this.isDragRange=!0},n.prototype.triggerChangeEvent=function(e,t,i){if(null!==this.options.Events){var n="touchend"===t.type||t.currentTarget===document;this.options.Events.onChange.hasDelegate&&n&&!this.options.IsImmediateValue&&this.isValueChange(e)&&this.invokeEvent(e,!1),(n||i)&&this.options.Events.valueChange.hasDelegate&&this.isValueChange(e)&&(this.invokeEvent(e,!0),this.changedEventValue=this.options.Value)}},n.prototype.invokeEvent=function(e,t){this.dotNetRef.invokeMethodAsync("TriggerEvent",{PreviousValue:e,Value:this.options.Value,isValueChanged:t})},n.prototype.handleValueAdjust=function(e,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},n.prototype.getLimitValueAndPosition=function(e,t,i,n){return sf.base.isNullOrUndefined(t)&&(t=this.options.Min,sf.base.isNullOrUndefined(e)&&n&&(e=t)),sf.base.isNullOrUndefined(i)&&(i=this.options.Max,sf.base.isNullOrUndefined(e)&&n&&(e=i)),e<t&&(e=t),e>i&&(e=i),[e,this.checkHandlePosition(e)]},n.prototype.dragRangeBarMove=function(e){var t,i,n,s,o;"touchmove"!==e.type&&e.preventDefault(),this.isDragRange=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===e.type?(s=(t=[e.clientX,e.clientY])[0],o=t[1]):(s=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],o=i[1]),"mousemove"===e.type?n={x:e.clientX,y:e.clientY}:"touchmove"!==e.type&&"touchstart"!==e.type||(n={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var r=this.options.Limits;if(sf.base.isNullOrUndefined(r)||(!r.enabled||!r.startHandleFixed)&&(!r.enabled||!r.endHandleFixed)){if(n=this.options.EnableRtl?{x:s+this.secondPartRemain,y:o+this.secondPartRemain}:{x:s-this.firstPartRemain,y:o+this.secondPartRemain},this.options.Min>this.options.Max?(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)):(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)),n=this.options.EnableRtl?{x:s-this.firstPartRemain,y:o-this.firstPartRemain}:{x:s+this.secondPartRemain,y:o-this.firstPartRemain},this.options.Min>this.options.Max?(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)):(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)),!sf.base.isNullOrUndefined(this.options.Limits)&&this.options.Limits.enabled){var a=this.getLimitValueAndPosition(this.handleVal1,r.minStart,r.minEnd);this.handleVal1=a[0],this.handlePos1=a[1],this.handleVal1===r.minEnd&&this.handleValueAdjust(this.handleVal1,r.minEnd,1),this.handleVal1===r.minStart&&this.handleValueAdjust(this.handleVal1,r.minStart,1),a=this.getLimitValueAndPosition(this.handleVal2,r.maxStart,r.maxEnd),this.handleVal2=a[0],this.handlePos2=a[1],this.handleVal2===r.maxStart&&this.handleValueAdjust(this.handleVal2,r.maxStart,2),this.handleVal2===r.maxEnd&&this.handleValueAdjust(this.handleVal2,r.maxEnd,2)}this.handleVal2===(this.options.Min>this.options.Max?this.options.Min:this.options.Max)&&this.handleValueAdjust(this.handleVal2,this.options.Min>this.options.Max?this.options.Min:this.options.Max,2),this.handleVal1===(this.options.Min>this.options.Max?this.options.Max:this.options.Min)&&this.handleValueAdjust(this.handleVal1,this.options.Min>this.options.Max?this.options.Max:this.options.Min,1)}var l=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.setHandlePosition(e),this.updateValue(),"Default"!==this.options.Type&&(this.rangeBar.style.transition=this.transition.rangeBar,this.setRangeBarPosition()),null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.isValueChange(l)&&this.options.IsImmediateValue&&this.invokeEvent(l,!1)},n.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDown,this),sf.base.EventHandler.add(this.element,"keyup",this.keyUp,this),sf.base.EventHandler.add(this.element,"focusout",this.focusOut,this),"Range"===this.options.Type&&sf.base.EventHandler.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),this.onResize=this.reposition.bind(this),window.addEventListener("resize",this.onResize),this.wireFirstHandleEventArgs(),"Range"===this.options.Type&&this.wireSecondHandleEventArgs()},n.prototype.wireFirstHandleEventArgs=function(){sf.base.EventHandler.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),sf.base.EventHandler.add(this.firstHandle,"mouseup touchend",this.sliderBarUp,this)},n.prototype.wireSecondHandleEventArgs=function(){sf.base.EventHandler.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),sf.base.EventHandler.add(this.secondHandle,"mouseup touchend",this.sliderBarUp,this)},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDown),sf.base.EventHandler.remove(this.element,"keyup",this.keyUp),sf.base.EventHandler.remove(this.element,"focusout",this.focusOut),"Range"===this.options.Type&&sf.base.EventHandler.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),window.removeEventListener("resize",this.onResize),this.unWireFirstHandleEventArgs(),"Range"===this.options.Type&&this.unWireSecondHandleEventArgs()},n.prototype.unWireFirstHandleEventArgs=function(){sf.base.EventHandler.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),sf.base.EventHandler.remove(this.firstHandle,"mouseup touchend",this.sliderBarUp)},n.prototype.unWireSecondHandleEventArgs=function(){sf.base.EventHandler.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),sf.base.EventHandler.remove(this.secondHandle,"mouseup touchend",this.sliderBarUp)},n.prototype.isValueChange=function(e){return"Range"===this.options.Type?e[0]!==this.options.Value[0]||e[1]!==this.options.Value[1]:e!==this.options.Value},n.prototype.focusOut=function(){var e=this;setTimeout((function(){e.isDestroyed||(null!==e.options.Tooltip&&e.options.Tooltip.isVisible&&("Range"===e.options.Type||sf.base.isNullOrUndefined(e.materialHandle)||(e.materialHandle.style.transform="scale(1)"),e.dotNetRef.invokeMethodAsync("CloseTooltip")),e.isTabPressed&&e.handleFocusOut())}),10)},n.prototype.reposition=function(){this.initialRendering=!1,this.initialize()},n.prototype.handleValueUpdate=function(){return"Range"===this.options.Type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},n.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),e.stopImmediatePropagation(),this.buttonClick(e)}},n.prototype.buttonClick=function(e){var t,n=this.options.Value,s=this.options.EnableRtl&&this.options.Orientation===i,o=this.handleValueUpdate();this.options.Limits&&(1===this.activeHandle&&this.options.Limits.startHandleFixed||2===this.activeHandle&&this.options.Limits.endHandleFixed)||(40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=s?this.add(o,parseFloat(this.options.Step.toString()),!0):this.add(o,parseFloat(this.options.Step.toString()),!1):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=s?this.add(o,parseFloat(this.options.Step.toString()),!1):this.add(o,parseFloat(this.options.Step.toString()),!0):33===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=s?this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!1):this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!0):34===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=s?this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!0):this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!1):36===e.keyCode?t=parseFloat(this.options.Min.toString()):35===e.keyCode&&(t=parseFloat(this.options.Max.toString())),this.options.Value="Range"!==this.options.Type?t:1===this.activeHandle?[t,this.options.Value[1]]:[this.options.Value[0],t],"Range"===this.options.Type&&(this.options.Value[0]>this.options.Value[1]&&1===this.activeHandle?this.options.Value[0]=this.options.Value[1]:this.options.Value[1]<this.options.Value[0]&&(this.options.Value[1]=this.options.Value[0])),"keydown"===e.type&&"Default"!==this.options.Type&&(this.isKeyPressed=!0),this.setValue(),this.invokeEvent(n,!1),this.isKeyPressed=!1)},n.prototype.handleFocusOut=function(){if(this.firstHandle.classList.contains(e)&&this.firstHandle.classList.remove(e),this.firstHandle.classList.contains(t)&&this.firstHandle.classList.remove(t),this.firstHandle.classList.contains("e-tab-handle")&&this.firstHandle.classList.remove("e-tab-handle"),"Range"===this.options.Type&&(this.secondHandle.classList.contains(e)&&this.secondHandle.classList.remove(e),this.secondHandle.classList.contains(t)&&this.secondHandle.classList.remove(t),this.secondHandle.classList.contains("e-tab-handle")&&this.secondHandle.classList.remove("e-tab-handle")),this.isTabPressed){this.isTabPressed=!1;var i=sf.base.select(".e-tab-handle",this.element);i&&sf.base.removeClass([i],"e-tab-handle")}},n.prototype.keyUp=function(i){var n=i.target;if(9===i.keyCode&&n.classList.contains("e-handle")){if(this.isTabPressed=!0,!n.classList.contains("e-tab-handle")){var s=sf.base.select(".e-tab-handle",this.element);if(s&&sf.base.removeClass([s],"e-tab-handle"),sf.base.addClass([n],"e-tab-handle"),"Range"===this.options.Type){var o=n.previousElementSibling;o&&o.classList?this.activeHandle=o.classList.contains("e-handle")?2:1:this.activeHandle=1}}this.changedEventValue=this.previousHandleVal,n===this.firstHandle?sf.base.addClass([this.firstHandle],[e,t,"e-tab-handle"]):sf.base.addClass([this.secondHandle],[e,t,"e-tab-handle"])}},n.prototype.handleFocus=function(i){this.element.focus(),this.getHandlePosition(i),this.changedEventValue=this.previousHandleVal,this.sliderBarClick(),i.currentTarget===this.firstHandle?(this.firstHandle.classList.add(e),this.firstHandle.classList.add(t),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add(e),this.secondHandle.classList.add(t),this.secondHandle.classList.add("e-tab-handle")),sf.base.EventHandler.add(document,"mousemove touchmove",this.sliderBarMove,this),sf.base.EventHandler.add(document,"mouseup touchend",this.sliderBarUp,this)},n.prototype.sliderBarMove=function(e){if("touchmove"===e.type&&e.target.parentElement===this.element||"mousemove"===e.type){"touchmove"!==e.type&&e.preventDefault(),this.isSliderMove=!0;var t=void 0;"mousemove"===e.type?t={x:e.clientX,y:e.clientY}:"touchmove"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),this.handlePos=this.xyToPosition(t),this.handleVal=this.positionToValue(this.handlePos),this.handlePos=this.checkHandlePosition(this.handleVal),this.firstHandle.style.transition=this.transition.scaleTransform,"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.scaleTransform),this.rangeBar&&(this.rangeBar.style.transition="none"),"Range"===this.options.Type?-1===this.previousHandleVal.indexOf(this.handleVal)&&(1===this.activeHandle&&this.handleVal<=this.handleVal2||2===this.activeHandle&&this.handleVal>=this.handleVal1)&&(null!=this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick()):this.previousHandleVal!==this.handleVal&&(null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick())}},n.prototype.callChangeEvent=function(e){var t=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.sliderBarClick(),this.isValueChange(t)&&this.invokeEvent(t,e)},n.prototype.updateHandleAttributes=function(e,t){"aria-valuenow"===e?"Range"===this.options.Type?(this.firstHandle.setAttribute(e,"["+t[0]+","+t[1]+"]"),this.secondHandle.setAttribute(e,"["+t[0]+","+t[1]+"]")):this.firstHandle.setAttribute(e,t[0]):(this.firstHandle.setAttribute(e,t[0]),"Range"===this.options.Type&&this.secondHandle.setAttribute(e,t[0]))},n.prototype.getTheme=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},n.prototype.setZindex=function(){sf.base.isNullOrUndefined(this.options.Ticks)||"None"===this.options.Ticks.placement||(this.element.getElementsByTagName("ul")[0].style.zIndex="-1",this.element.style.zIndex="8"),"material"!==this.getTheme(this.sliderContainer)&&"Material3"!==this.getTheme(this.sliderContainer)||sf.base.isNullOrUndefined(this.options.Ticks)||"Both"!==this.options.Ticks.placement||(this.element.style.zIndex="8"),this.firstHandle.style.zIndex="9","Range"===this.options.Type&&(this.secondHandle.style.zIndex="10")},n.prototype.sliderBarUp=function(e){this.handleFocusOut(),sf.base.EventHandler.remove(document,"mousemove touchmove",this.sliderBarMove),sf.base.EventHandler.remove(document,"mouseup touchend",this.sliderBarUp),this.isSliderMove=!1,this.transitionNode(),this.triggerChangeEvent(this.changedEventValue,e,!1)},n.prototype.transitionNode=function(){this.firstHandle.style.transition="none","Range"===this.options.Type&&(this.secondHandle.style.transition="none"),this.rangeBar&&(this.rangeBar.style.transition="none")},n.prototype.clickHandler=function(e){if(this.isDragRange)this.isDragRange=!1;else{e.preventDefault();var t=this.changedEventValue;if(this.getHandlePosition(e),null!=this.options.Events&&this.options.Events.onChange.hasDelegate||null!=this.options.Events&&this.options.Events.valueChange.hasDelegate?(this.isClicked=!0,this.sliderBarClick(),this.options.Events.onChange.hasDelegate&&this.callChangeEvent(!1),t=this.isSliderMove?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal,this.triggerChangeEvent(t,e,!0)):this.sliderBarClick(),this.hiddenInput&&this.hiddenInput.name&&this.hiddenInput.name.includes("imageEditor")&&this.changedEventValue!==this.previousHandleVal){var i=new Event("custom-changed",{bubbles:!0,cancelable:!0});this.hiddenInput.dispatchEvent(i)}this.isClicked&&(this.previousHandleVal=this.options.Value),this.changedEventValue=this.previousHandleVal,this.isClicked=!1}},n.prototype.updateNewHandleValue=function(e,t,i){return(i[0]||i[1])&&(e<i[0]?(e=i[0],t=this.checkHandlePosition(e)):e>i[1]&&(e=i[1],t=this.checkHandlePosition(e))),[e,t]},n.prototype.sliderBarClick=function(){if("Range"!==this.options.Type||1===this.activeHandle&&this.handleVal1<=this.handleVal2||2===this.activeHandle&&this.handleVal1<=this.handleVal2){if(this.firstHandle.style.transition=this.transition.handle,"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.handle),this.rangeBar&&(this.rangeBar.style.transition=this.transition.rangeBar),this.options.Limits){var e=void 0;if(1!==this.activeHandle||this.options.Limits.startHandleFixed){if(2===this.activeHandle&&!this.options.Limits.endHandleFixed){e=[this.options.Limits.maxStart,this.options.Limits.maxEnd];t=this.updateNewHandleValue(this.handleVal,this.handlePos,e);this.updateHandleValue(this.secondHandle,t[0],t[1])}}else{e=[this.options.Limits.minStart,this.options.Limits.minEnd];var t=this.updateNewHandleValue(this.handleVal,this.handlePos,e);this.updateHandleValue(this.firstHandle,t[0],t[1],!0),!this.isMaterial&&!this.isMaterial3||sf.base.isNullOrUndefined(this.materialHandle)||"Range"===this.options.Type||this.updateHandleValue(this.materialHandle,t[0],t[1],1===this.activeHandle)}}else{var i=1===this.activeHandle?this.firstHandle:this.secondHandle;this.updateHandleValue(i,this.handleVal,this.handlePos,1===this.activeHandle),!this.isMaterial&&!this.isMaterial3||sf.base.isNullOrUndefined(this.materialHandle)||"Range"===this.options.Type||this.updateHandleValue(this.materialHandle,this.handleVal,this.handlePos,1===this.activeHandle)}"Default"!==this.options.Type&&this.setRangeBarPosition(),this.updateValue()}},n.prototype.updateHandleValue=function(e,t,i,n){void 0===n&&(n=!1),this.applyHandlePosition(e,i),n?(this.handleVal1=t,this.handlePos1=i):(this.handleVal2=t,this.handlePos2=i),this.updateAriaValue()},n.prototype.updateAriaValue=function(){"Range"!==this.options.Type?this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString()]):this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString(),this.options.CustomValues[this.handleVal2].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString(),this.handleVal2.toString()])},n.prototype.positionToValue=function(e){var t,n=parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min));return t=this.options.Orientation===i?e/this.element.getBoundingClientRect().width*n:e/this.element.getBoundingClientRect().height*n,this.add(t,parseFloat(this.options.Min.toString()),!0)},n.prototype.add=function(e,t,i){var n=Math.pow(10,3);return i?(Math.round(e*n)+Math.round(t*n))/n:(Math.round(e*n)-Math.round(t*n))/n},n.prototype.setElementWidth=function(e){sf.base.isNullOrUndefined(e)||("number"==typeof e?this.sliderContainer.style.width=sf.base.formatUnit(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:sf.base.formatUnit(e)))},n.prototype.xyToPosition=function(e){var t=this.element.getBoundingClientRect();if(this.options.Min===this.options.Max)return 100;if(this.options.Orientation===i){var n=e.x-t.left,s=this.element.offsetWidth/100;this.posvalue=n/s}else{var o=e.y-t.top;s=this.element.offsetHeight/100;this.posvalue=100-o/s}var r=this.stepValueCalculation(this.posvalue);return r<0?r=0:r>100&&(r=100),this.options.EnableRtl&&this.options.Orientation===i&&(r=100-r),this.options.Orientation===i?t.width*(r/100):t.height*(r/100)},n.prototype.stepValueCalculation=function(e){0===this.options.Step&&(this.options.Step=1);var t=parseFloat(sf.base.formatUnit(this.options.Step))/((parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/100),i=e%Math.abs(t);return 0!==i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e},n.prototype.setLimitBarPosition=function(){var e,t,n;if(this.limitBar1=this.element.querySelector(".e-limits"),this.limitBar2=this.element.querySelector(".e-limit-second"),null!==this.options.Limits.minStart||null!==this.options.Limits.minEnd){this.options.Orientation===i?(this.options.EnableRtl?this.limitBar1.style.left=this.checkHandlePosition(this.options.Max-this.options.Limits.minEnd)+"px":this.limitBar1.style.left=this.checkHandlePosition(this.options.Limits.minStart)+"px",n="width"):(this.limitBar1.style.bottom=this.checkHandlePosition(this.options.Min>this.options.Max?this.options.Limits.minEnd:this.options.Limits.minStart)+"px",n="height");var s=this.options.Limits.minEnd=null!=this.options.Limits.minEnd?this.options.Limits.minEnd:this.options.Max;sf.base.setStyleAttribute(this.limitBar1,((e={})[n]=this.options.Min>this.options.Max?this.checkHandlePosition(this.options.Limits.minStart)-this.checkHandlePosition(s)+"px":this.checkHandlePosition(s)-this.checkHandlePosition(this.options.Limits.minStart)+"px",e))}if("Range"===this.options.Type&&(null!==this.options.Limits.maxStart||null!==this.options.Limits.maxEnd)){this.options.Orientation===i?this.limitBar2.style.left=this.checkHandlePosition(this.options.Limits.maxStart)+"px":this.limitBar2.style.bottom=this.checkHandlePosition(this.options.Min>this.options.Max?this.options.Limits.maxEnd:this.options.Limits.maxStart)+"px";var o=this.options.Limits.maxEnd=null!=this.options.Limits.maxEnd?this.options.Limits.maxEnd:this.options.Max;sf.base.setStyleAttribute(this.limitBar2,((t={})[n]=this.options.Min>this.options.Max?this.checkHandlePosition(this.options.Limits.maxStart)-this.checkHandlePosition(o)+"px":this.checkHandlePosition(o)-this.checkHandlePosition(this.options.Limits.maxStart)+"px",t))}},n.prototype.setHandler=function(){this.createFirstHandle(),this.createSecondHandle()},n.prototype.createSecondHandle=function(){this.secondHandle=this.element.querySelector(".e-handle-second")},n.prototype.createFirstHandle=function(){this.firstHandle=this.element.querySelector(".e-handle-first")},n.prototype.setValue=function(e){void 0===e&&(e=!0);var t="Range"!==this.options.Type?this.options.Value:this.options.Value[0];if(this.handleVal1=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Min.toString())):this.checkHandleValue(parseFloat(t.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),null!=this.options.Limits){var i=this.updateNewHandleValue(this.handleVal1,this.handlePos1,[this.options.Limits.minStart,this.options.Limits.minEnd]);this.handleVal1=i[0],this.handlePos1=i[1]}if("Range"===this.options.Type&&(this.handleVal2=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Max.toString())):this.checkHandleValue(parseFloat(this.options.Value[1].toString())),this.handlePos2=this.checkHandlePosition(this.handleVal2),null!=this.options.Limits)){i=this.updateNewHandleValue(this.handleVal2,this.handlePos2,[this.options.Limits.maxStart,this.options.Limits.maxEnd]);this.handleVal2=i[0],this.handlePos2=i[1]}this.setHandlePosition(null),"Default"!==this.options.Type&&this.setRangeBarPosition(),null!==this.options.Ticks&&"None"!==this.options.Ticks.placement&&this.setTickValuePosition(),this.updateValue(e)},n.prototype.updateColorRangeBarPos=function(){if(null!=this.options.ColorRange)for(var e=this.sliderTrack.children,t=0;t<this.options.ColorRange.length;t++)this.options.Orientation===i?(this.options.EnableRtl||(e[t].style.left=this.options.EnableRtl?this.checkHandlePosition(this.options.Max-this.options.ColorRange[t].end)+"px":this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),e[t].style.width=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"):(e[t].style.bottom=this.checkHandlePosition(this.options.ColorRange[t].start)+"px",e[t].style.height=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),e[t].style.removeProperty("display")},n.prototype.setTickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var e,t,n=this.firstChild.getBoundingClientRect(),s=this.options.Ticks.smallStep,o=Math.abs(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/s;this.firstChild.children.length>0&&(e=this.firstChild.children[0].getBoundingClientRect());var r,a=[this.element.querySelectorAll(".e-tick.e-large .e-tick-value")];r="Both"===this.options.Ticks.placement?[].slice.call(a[0],2):[].slice.call(a[0],1);for(var l=this.options.Orientation!==i?2*n.height:2*n.width,h=0;h<this.firstChild.children.length;h++)this.options.Orientation===i?this.options.EnableRtl?this.firstChild.children[h].style.left=(l-this.firstChild.children[h].getBoundingClientRect().width)/2+"px":this.firstChild.children[h].style.left=-e.width/2+"px":this.firstChild.children[h].style.top=-e.width/2+"px";for(h=0;h<r.length;h++)t=r[h].getBoundingClientRect(),this.options.Orientation===i?(sf.base.setStyleAttribute(r[h],{left:(l-t.width)/2+"px"}),this.options.EnableRtl&&r[h].parentElement.classList.contains("e-last-tick")&&sf.base.setStyleAttribute(r[h],{left:-t.width/2+"px"})):sf.base.setStyleAttribute(r[h],{top:(l-t.height)/2+"px"});0===o&&this.firstChild.classList.remove("e-last-tick"),null!=this.firstChild&&(this.options.Orientation===i?this.firstChild.children[0].style.left:e.height),null!=r[0]&&(this.options.Orientation===i?r[0].style.left:t.height),null!=this.firstChild&&null!=r[0]&&(this.options.Orientation===i?(this.firstChild.children[0].style.left,r[0].style.left):(e.height,t.height)),this.element.querySelector("ul").style.removeProperty("visibility")},n.prototype.setRangeBarPosition=function(){if(this.rangeBar=this.element.querySelector(".e-range"),this.options.Orientation===i)"MinRange"===this.options.Type?(this.options.EnableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",sf.base.setStyleAttribute(this.rangeBar,{width:sf.base.isNullOrUndefined(this.handlePos1)?0:this.handlePos1+"px"})):(this.options.EnableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}));else if("MinRange"===this.options.Type){var e=this.element.getBoundingClientRect();this.rangeBar.style.bottom=this.options.Min>this.options.Max?this.handlePos1+"px":"0px",sf.base.setStyleAttribute(this.rangeBar,{height:sf.base.isNullOrUndefined(this.handlePos1)?0:this.options.Min>this.options.Max?e.height-this.handlePos1+"px":this.handlePos1+"px"})}else this.rangeBar.style.bottom=this.options.Min>this.options.Max?this.handlePos2+"px":this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{height:this.options.Min>this.options.Max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"})},n.prototype.setHandlePosition=function(e){this.updateHandleAttributes("aria-valuemin",[this.options.Min.toString()]),this.updateHandleAttributes("aria-valuemax",[this.options.Max.toString()]);var t=[this.handlePos1,this.handlePos2];this.updateHandlePosition(this.firstHandle,t[0]),!this.isMaterial&&!this.isMaterial3||"Range"===this.options.Type||sf.base.isNullOrUndefined(this.materialHandle)||this.updateHandlePosition(this.materialHandle,t[0]),"Range"===this.options.Type&&this.updateHandlePosition(this.secondHandle,t[1]),this.updateAriaValue()},n.prototype.getHandlePosition=function(e){var t;if("mousedown"!==e.type&&"mouseup"!==e.type||e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?t={x:e.clientX,y:e.clientY}:"touchend"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),this.handlePos=this.xyToPosition(t),this.handleVal=this.positionToValue(this.handlePos),this.handleVal2<this.handleVal)this.activeHandle=2;else if(this.handleVal1>this.handleVal)this.activeHandle=1;else{var i=this.handleVal>this.handleVal1?this.handleVal-this.handleVal1:this.handleVal1-this.handleVal,n=this.handleVal>this.handleVal2?this.handleVal-this.handleVal2:this.handleVal2-this.handleVal;this.activeHandle=i>n?2:1}},n.prototype.updateHandlePosition=function(e,t){this.applyHandlePosition(e,t),e.style.removeProperty("visibility")},n.prototype.applyHandlePosition=function(e,t){this.options.Orientation===i?this.options.EnableRtl?e.style.right=t+"px":e.style.left=t+"px":e.style.bottom=t+"px",this.isKeyPressed?this.isClicked&&(e.style.transition="none"):e.style.transition=this.transition.handle},n.prototype.checkHandleValue=function(e){if(this.options.Min===this.options.Max)return parseFloat(sf.base.formatUnit(this.options.Max));var t=this.handleStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e},n.prototype.checkHandlePosition=function(e){var t,n=this.element.getBoundingClientRect();return e=100*(e-parseFloat(sf.base.formatUnit(this.options.Min)))/(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min))),t=this.options.Orientation===i?n.width*(e/100):n.height*(e/100),parseFloat(sf.base.formatUnit(this.options.Max))===parseFloat(sf.base.formatUnit(this.options.Min))&&(t=this.options.Orientation===i?n.width:n.height),t},n.prototype.handleStartEnd=function(){return this.options.Min>this.options.Max?{start:this.options.Max,end:this.options.Min}:{start:this.options.Min,end:this.options.Max}},n.prototype.updateValue=function(e){var t=this;if(void 0===e&&(e=!0),"Range"===this.options.Type?this.options.Value=[this.handleVal1,this.handleVal2]:this.options.Value=this.handleVal1,this.isClicked||(this.previousHandleVal=this.options.Value),e&&(null!==this.options.Tooltip?setTimeout((function(){t.dotNetRef.invokeMethodAsync("UpdateValue",t.options.Value,t.activeHandle)}),300):(!this.isMaterial&&!this.isMaterial3||null===this.options.Tooltip||sf.base.isNullOrUndefined(this.materialHandle)||"Range"===this.options.Type||(this.materialHandle.style.transform="scale(0)"),this.dotNetRef.invokeMethodAsync("UpdateValue",this.options.Value,this.activeHandle)),this.hiddenInput&&this.hiddenInput.name&&this.hiddenInput.name.includes("imageEditor"))){this.hiddenInput.value=this.options.Value;var i=new Event("custom-change",{bubbles:!0,cancelable:!0});this.hiddenInput.dispatchEvent(i)}},n.prototype.updateLimitData=function(e){this.options.Value=this.tempValue,this.options.Limits=e,this.setLimitBarPosition(),this.setValue()},n.prototype.updateTicksData=function(e){this.options.Ticks=e,this.setTickValuePosition()},n.prototype.updateSliderValue=function(e){var t=this.options.Value;this.options.Value=e,this.setValue(),this.invokeEvent(t,!1)},n.prototype.updateStepValue=function(e){this.options.Step=e},n.prototype.destroy=function(){this.element.style.display="none",this.unWireEvents(),this.element=null,this.isDestroyed=!0},n.prototype.updateTooltipPosition=function(e){var t=document.getElementById(e);!sf.base.isNullOrUndefined(t)&&"Range"!==this.options.Type&&sf.base.isNullOrUndefined(this.options.Tooltip.format)&&(t.style.transform=this.options.Orientation==i?"Before"===this.options.Tooltip.placement?"rotate(45deg)":"rotate(225deg)":"Before"===this.options.Tooltip.placement?"rotate(-45deg)":"rotate(-225deg)")},n.prototype.propertyChanges=function(e){void 0!==e.Enabled&&(this.options.Enabled=e.Enabled),void 0!==e.ShowButtons&&(this.setValue(!1),this.updateColorRangeBarPos()),void 0!==e.ReadOnly&&(this.options.ReadOnly=e.ReadOnly),void 0!==e.Value&&(this.options.Value=e.Value,this.tempValue=this.options.Value,this.setValue(!1)),void 0!==e.Max&&(this.options.Max=e.Max),void 0!==e.Step&&(this.options.Step=e.Step),void 0!==e.Min&&(this.options.Min=e.Min),void 0!==e.IsImmediateValue&&(this.options.IsImmediateValue=e.IsImmediateValue),this.options.Enabled&&!this.options.ReadOnly?(this.unWireEvents(),sf.base.isNullOrUndefined(e.Max)&&this.wireEvents()):this.unWireEvents()},n}();return{initialize:function(e,t,i,s){t&&new n(e,t,i,s);var o=window.sfBlazor.getCompInstance(e);return t&&!sf.base.isNullOrUndefined(o)?o.initialize():null},updateLimitData:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateLimitData(t)},updateTicksData:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateTicksData(t)},updateSliderValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateSliderValue(t)},updateSTepValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateStepValue(t)},updatedProperties:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.propertyChanges(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},reposition:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.reposition()},updateTooltipPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateTooltipPosition(t)}}}()},"./modules/sf-smith-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.SmithChart=function(){"use strict";var e=function(){function e(e,t,i,n){window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.resizeTo=0,this.id=t,this.element=i,this.dotNetRef=n,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.unWireEvents=function(){var e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.mouseMove),sf.base.EventHandler.remove(this.element,"click",this.chartOnMouseClick),sf.base.EventHandler.remove(this.element,e,this.mouseLeave),sf.base.EventHandler.remove(this.element,"mousemove",this.mouseMove),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize.bind(this)),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown);var t=sf.base.getInstance(this.element,this.keyActionHandler);t&&t.destroy(),this.element=null,this.dotNetRef=null},e.prototype.wireEvents=function(){var e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"click",this.chartOnMouseClick.bind(this),this),sf.base.EventHandler.add(this.element,e,this.mouseLeave.bind(this),this),sf.base.EventHandler.add(this.element,"mousemove",this.mouseMove.bind(this),this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize.bind(this)),new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"}),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this)},e.prototype.mouseDown=function(e){e.preventDefault()},e.prototype.keyActionHandler=function(e){"enter"===e.action&&this.chartOnMouseClickProcess(e)},e.prototype.mouseMove=function(e){document.getElementById(this.id+"_svg")&&this.setMouseXY(e),this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseMove",this.getEventArgs(e)),(sf.base.Browser.isDevice||e.type.indexOf("touch")>-1)&&setTimeout((function(e){e.invokeMethodAsync("OnSmithChartMouseLeave")}),1e3,this.dotNetRef)},e.prototype.chartOnMouseClick=function(e){this.chartOnMouseClickProcess(e)},e.prototype.chartOnMouseClickProcess=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseClick",this.getEventArgs(e))},e.prototype.mouseLeave=function(e){this.setMouseXY(e),this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseLeave",this.getEventArgs(e))},e.prototype.rangeResize=function(e){var t=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){t.dotNetRef.invokeMethodAsync("OnSmithChartResize",e)}),500))},e.prototype.setMouseXY=function(e){var t,i,n;"touchmove"===e.type||"touchstart"===e.type?(t=(n=e).changedTouches[0].clientX,i=n.changedTouches[0].clientY):(t=e.clientX,i=e.clientY);var s=document.getElementById(this.id+"_svg").getBoundingClientRect(),o=document.getElementById(this.id).getBoundingClientRect();this.mouseY=i-o.top-Math.max(s.top-o.top,0),this.mouseX=t-o.left-Math.max(s.left-o.left,0)},e.prototype.getEventArgs=function(e){return{type:e.type,clientX:e.clientX?e.clientX:0,clientY:e.clientY?e.clientY:0,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType?e.pointerType:e.action?e.action:"",target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0}}},e}();return{id:"",mouseY:0,mouseX:0,initialize:function(t,i,n,s,o,r){return r?(new e(t,i,r,n).wireEvents(),this.getElementBoundsById(r,s,o)):{width:0,height:0}},getElementBoundsById:function(e,t,i){return e?(e.style.height=t,e.style.width=i,{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight}):{width:0,height:0}},charCollection:["0","1","2","3","4","5","6","7","8","9","!",'"',"#","$","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"," "],measureText:function(e,t,i,n,s){var o=document.getElementById("chartmeasuretext");return null===o&&(o=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(o))," "===e&&(e="&nbsp;"),o.innerHTML=e,o.style.position="fixed",o.style.fontSize="100px",o.style.fontWeight=i,o.style.fontStyle=n,o.style.fontFamily=s,o.style.visibility="hidden",o.style.top="-100",o.style.left="0",o.style.whiteSpace="nowrap",o.style.lineHeight="normal",{Width:o.clientWidth,Height:o.clientHeight}},getCharCollectionSize:function(e){for(var t=[],i=this.charCollection,n=i.length,s=e.length,o=0;o<s;o++)for(var r=e[o].split("_"),a=r[0],l=r[1],h=r[2],d=0;d<n;d++)t.push(this.measureText(i[d],a,l,h).Width+"");return JSON.stringify(t)},getCharSizeByCharKey:function(e){var t=e.split("_"),i=t[0],n=t[1],s=t[2],o=t[3],r=t[4];return this.measureText(i,n,s,o,r)},resizeTo:{},linear:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},reverselinear:function(e,t,i,n){return-t*Math.sin(e/n*(Math.PI/2))+i+t},doLinearAnimation:function(e){var t=this;e.forEach((function(e){var i=document.getElementById(e[0]);if(i){var n=new sf.base.Animation({}),s=+i.getAttribute("x"),o=+i.getAttribute("width");n.animate(i,{duration:e[1],delay:0,progress:function(n){n.timeStamp>=n.delay&&(i.setAttribute("visibility","visible"),e[2]?i.setAttribute("width",t.linear(n.timeStamp-n.delay,0,o,n.duration).toString()):i.setAttribute("x",t.reverselinear(n.timeStamp-n.delay,o,0,n.duration).toString()))},end:function(){e[2]?i.setAttribute("width",o.toString()):i.setAttribute("x",s.toString())}})}}))},getTemplateSize:function(e){var t=document.getElementById(e);return t?{width:t.offsetWidth,height:t.offsetHeight}:null},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip)||t.tooltip.fadeOut()},tooltip:{},renderTooltip:function(e,t,i){var n=document.getElementById(t+"_svg"),s=!(n&&parseInt(n.getAttribute("opacity"),10)>0),o=JSON.parse(e),r=window.sfBlazor.getCompInstance(i);s?(r.tooltip=new sf.svgbase.Tooltip(o),r.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(r.tooltip)||(r.tooltip.location=new sf.svgbase.TooltipLocation(o.location.x,o.location.y),r.tooltip.content=o.content,r.tooltip.header=o.header,r.tooltip.palette=o.palette,r.tooltip.shapes=o.shapes,r.tooltip.data=o.data,r.tooltip.template=o.template,r.tooltip.textStyle.color=o.textStyle.color||r.tooltip.textStyle.color,r.tooltip.textStyle.fontFamily=o.textStyle.fontFamily||r.tooltip.textStyle.fontFamily,r.tooltip.textStyle.fontStyle=o.textStyle.fontStyle||r.tooltip.textStyle.fontStyle,r.tooltip.textStyle.fontWeight=o.textStyle.fontWeight||r.tooltip.textStyle.fontWeight,r.tooltip.textStyle.opacity=o.textStyle.opacity||r.tooltip.textStyle.opacity,r.tooltip.textStyle.size=o.textStyle.size||r.tooltip.textStyle.size,r.tooltip.dataBind())},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-sparkline.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Sparkline=function(){"use strict";var e=function(){function e(e,t,i){this.resizeTo=0,window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=i,e=e,window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"mousemove",this.mousemove.bind(this),this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mousemove.bind(this),this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.mousemove.bind(this),this),sf.base.EventHandler.add(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave.bind(this),this),sf.base.EventHandler.add(this.element,"click",this.click,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this))},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousemove",this.mousemove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mousemove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.mousemove),sf.base.EventHandler.remove(this.element,"click",this.click),sf.base.EventHandler.remove(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),this.element=null,this.dotNetRef=null},e.prototype.resize=function(){var e=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){e.dotNetRef.invokeMethodAsync("OnResize")}),500))},e.prototype.mouseleave=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnMouseLeave")},e.prototype.click=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnClick")},e.prototype.mousemove=function(e){var t,i,n,s=this.element.getBoundingClientRect(),o=document.getElementById(this.element.id+"_svg");o&&(t=o.getBoundingClientRect());var r=document.getElementById(this.element.id+"_Secondary_Element");if(r&&(r.style.left=Math.max((t?t.left:0)-(s?s.left:0),0)+"px",r.style.top=Math.max((t?t.top:0)-(s?s.top:0),0)+"px"),e.type.indexOf("touch")>-1){var a=e;a.changedTouches?(n=a.changedTouches[0].clientX,i=a.changedTouches[0].clientY):(i=e.clientY,n=e.clientX)}else i=e.clientY,n=e.clientX;this.dotNetRef&&((sf.base.Browser.isDevice||e.type.indexOf("touch")>-1)&&setTimeout((function(e){e.invokeMethodAsync("OnMouseLeave")}),1e3,this.dotNetRef),this.dotNetRef.invokeMethodAsync("OnMouseMove",n,i,s?s.top:0,s?s.left:0,t?t.top:0,t?t.left:0,e.target?e.target.id:"",sf.base.Browser.isIE))},e}();return{initialize:function(t,i,n,s,o){if(i)return new e(t,i,n).wireEvents(),this.getElementSize(i,s,o)},getElementSize:function(e,t,i){if(e){e.style.height=t,e.style.width=i;var n=e.parentElement?e.parentElement.clientWidth||0:100,s=e.parentElement?e.parentElement.clientHeight||0:50;return{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight,parentWidth:n,parentHeight:s,isDevice:sf.base.Browser.isDevice,windowWidth:window.innerWidth,windowHeight:window.innerHeight}}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-speeddial.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.SpeedDial=function(){"use strict";var e="e-speeddial-fixed",t="e-speeddial-hidden",i="e-speeddial-li",n=function(){function n(e){this.sfBlazor=window.sfBlazor,this.updateContext(e),this.sfBlazor.setCompInstance(this),this.initialize()}return n.prototype.updateContext=function(e){sf.base.extend(this,this,e)},n.prototype.initialize=function(){this.isControl=!1,this.checkTarget(),this.setClientProps(!0),this.bindEvent()},n.prototype.checkTarget=function(){this.targetEle=null,sf.base.isNullOrUndefined(this.target)||"string"!=typeof this.target||(this.targetEle=document.querySelector(this.target)),this.isFixed=sf.base.isNullOrUndefined(this.targetEle),this.isFixed?(this.popupEle.classList.add(e),this.overlayEle&&this.overlayEle.classList.add(e)):(this.popupEle.classList.remove(e),this.targetEle.appendChild(this.popupEle),this.overlayEle&&(this.overlayEle.classList.remove(e),this.targetEle.appendChild(this.overlayEle)))},n.prototype.bindEvent=function(){sf.base.EventHandler.add(window,"resize",this.resizeHandler,this),sf.base.EventHandler.add(document.body,"click",this.documentClickhandler,this),sf.base.EventHandler.add(this.popupEle,"click",this.speeddialClickHandler,this),sf.base.EventHandler.add(this.element,"click",this.speeddialClickHandler,this),sf.base.EventHandler.add(this.popupEle,"mouseleave",this.popupMouseLeaveHandle,this),this.isHover&&this.bindHoverEvents()},n.prototype.unBindEvent=function(){sf.base.EventHandler.remove(window,"resize",this.resizeHandler),sf.base.EventHandler.remove(document.body,"click",this.documentClickhandler),sf.base.EventHandler.remove(this.popupEle,"click",this.speeddialClickHandler),sf.base.EventHandler.remove(this.element,"click",this.speeddialClickHandler),sf.base.EventHandler.remove(this.popupEle,"mouseleave",this.popupMouseLeaveHandle),this.isHover&&this.unBindHoverEvents()},n.prototype.bindHoverEvents=function(){sf.base.EventHandler.add(this.element,"mouseover",this.mouseOverHandle,this),sf.base.EventHandler.add(this.element,"mouseleave",this.mouseLeaveHandle,this)},n.prototype.unBindHoverEvents=function(){sf.base.EventHandler.remove(this.element,"mouseover",this.mouseOverHandle),sf.base.EventHandler.remove(this.element,"mouseleave",this.mouseLeaveHandle)},n.prototype.speeddialClickHandler=function(){this.isControl=!0},n.prototype.documentClickhandler=function(){this.isControl?this.isControl=!1:this.popupEle.classList.contains(t)||this.callShowHidePopup(!1)},n.prototype.popupMouseLeaveHandle=function(e){var t=e.relatedTarget;!this.isHover||t.classList.contains("e-speeddial")||sf.base.closest(t,".e-speeddial")||this.callShowHidePopup(!1)},n.prototype.mouseOverHandle=function(){this.callShowHidePopup(!0)},n.prototype.mouseLeaveHandle=function(e){var t=e.relatedTarget;t.classList.contains("e-speeddial-popup")||sf.base.closest(t,".e-speeddial-popup")||this.callShowHidePopup(!1)},n.prototype.callShowHidePopup=function(e){this.dotNetRef.invokeMethodAsync(e?"ShowAsync":"HideAsync")},n.prototype.resizeHandler=function(){this.getOffset(),(this.isMiddle||this.isCenter)&&this.dotNetRef.invokeMethodAsync("UpdatePosition",this.yOffset,this.xOffset)},n.prototype.setClientProps=function(e){this.getOffset();var t={yOffset:this.yOffset,xOffset:this.xOffset};e&&(t.isFixed=this.isFixed?"Fixed":"Absolute"),"Radial"!==this.mode||this.isTemplate||(t.liHeight=this.liHeight,t.liWidth=this.liWidth),this.clientProps=JSON.stringify(t)},n.prototype.getOffset=function(){if("Radial"===this.mode||this.isTemplate){if(this.yOffset=this.xOffset="",!this.isTemplate){var e=this.popupEle.querySelector(".e-speeddial-li");this.liHeight=e.offsetHeight+"px",this.liWidth=e.offsetWidth+"px",this.popupEle.style.setProperty("--speeddialRadialMinHeight",this.liHeight),this.popupEle.style.setProperty("--speeddialRadialMinWidth",this.liWidth)}this.isMiddle&&(this.yOffset=((this.targetEle?this.targetEle.clientHeight:window.innerHeight)-this.popupEle.offsetHeight)/2+"px",this.popupEle.style.setProperty("--speeddialVertDist",this.yOffset)),this.isCenter&&(this.xOffset=((this.targetEle?this.targetEle.clientWidth:window.innerWidth)-this.popupEle.offsetWidth)/2+"px",this.popupEle.style.setProperty("--speeddialHorzDist",this.xOffset))}else this.isTop?this.yOffset=this.element.offsetTop+(this.isVertical?this.element.offsetHeight:0)+"px":(this.yOffset=this.isFixed?window.innerHeight:this.targetEle.clientHeight,this.yOffset=this.yOffset-this.element.offsetTop-(this.isVertical?0:this.element.offsetHeight)+"px"),this.popupEle.style.setProperty("--speeddialVertDist",this.yOffset),this.isLeft?this.xOffset=this.element.offsetLeft+(this.isVertical?0:this.element.offsetWidth)+"px":(this.xOffset=this.isFixed?window.innerWidth:this.targetEle.clientWidth,this.xOffset=this.xOffset-this.element.offsetLeft-(this.isVertical?this.element.offsetWidth:0)+"px"),this.popupEle.style.setProperty("--speeddialHorzDist",this.xOffset)},n.prototype.animateClose=function(e){var n=this;this.updateContext(e);var s={name:this.animation.effect+"Out",timingFunction:"easeOut"},o=this.isTemplate?[this.popupEle.firstElementChild]:sf.base.selectAll("."+i,this.popupEle);o&&0!==o.length||this.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!1);var r=this.animation.duration/(o.length+1);s.duration=2*r;!function e(i){if(s.delay=i===o.length-1?n.animation.delay:0,s.begin=function(){},s.end=function(){o[i].classList.add(t),0===i&&(n.popupEle.classList.add(t),n.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!1))},new sf.base.Animation(s).animate(o[i]),0!==i){var a=i-1;setTimeout((function(){e(a)}),r)}}(o.length-1)},n.prototype.animateOpen=function(e){var n=this;this.updateContext(e);var s={name:this.animation.effect+"In",timingFunction:"easeIn"},o=this.isTemplate?[this.popupEle.firstElementChild]:sf.base.selectAll("."+i,this.popupEle);o&&0!==o.length||this.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!0);var r=this.animation.duration/(o.length+1);s.duration=2*r;!function e(i){if(s.delay=0===i?n.animation.delay:0,s.begin=function(){0===i&&n.popupEle.classList.remove(t),o[i].classList.remove(t)},s.end=function(){i===o.length-1&&(n.isTemplate&&n.popupEle.focus(),n.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!0))},new sf.base.Animation(s).animate(o[i]),i!==o.length-1){var a=i+1;setTimeout((function(){e(a)}),r)}}(0)},n.prototype.validateTarget=function(e){this.updateContext(e),this.checkTarget(),this.setClientProps(!0)},n.prototype.setPosition=function(e){this.updateContext(e),this.setClientProps(!1)},n.prototype.updateOnHover=function(e){this.updateContext(e),this.isHover?this.bindHoverEvents():this.unBindHoverEvents()},n.prototype.destroy=function(){this.unBindEvent()},n}();return{initialize:function(e){return e.dataId?new n(e).clientProps:{}},validateTarget:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.validateTarget(e),t.clientProps}return{}},setPosition:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.setPosition(e),t.clientProps}return{}},updateOnHover:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).updateOnHover(e)},animateClose:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).animateClose(e)},animateOpen:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).animateOpen(e)},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()},focusElement:function(e){e.focus()}}}()},"./modules/sf-spinner.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Spinner=function(){"use strict";var e=function(){function e(e){this.element=e,this.element.blazor__instance=this}return e.prototype.initialize=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},e}();return{initialize:function(t){return sf.base.isNullOrUndefined(t)?null:(new e(t),sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.blazor__instance)?null:t.blazor__instance.initialize(t))}}}()},"./modules/sf-splitter.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Splitter=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},t="e-split-bar",n="e-static-pane",s="e-resize-handler",o="e-arrow-left",r="e-arrow-up",a="e-arrow-down",l="e-icon-hidden",h="msie",d="Horizontal",c="px",p=function(){function p(e){this.allPanes=[],this.allBars=[],this.previousCoordinates={},this.currentCoordinates={},this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1,this.panesDimensions=[],this.border=0,this.isToggleInvoke=!1,this.createdEnabled=!1,this.resizingEnabled=!1,this.expandedEnabled=!1,this.onExpandEnabled=!1,this.collapsedEnabled=!1,this.onCollapseEnabled=!1,this.onResizeStopEnabled=!1,this.onResizeStartEnabled=!1,this.iconsDelay=300,this.collapseFlag=!1,this.expandFlag=!0,this.expandingFlag=!0,this.enablePersistence=!1,this.isPreventResizeAction=!0,window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return p.prototype.updateContext=function(e){sf.base.extend(this,this,e)},p.prototype.initialize=function(){this.id=this.element.id,this.addSeparator(!0),this.collapseFlag=!0,this.isCollapsed(),this.collapseFlag=!1,this.updateClass(),sf.base.EventHandler.add(document,"touchstart click",this.onDocumentClick,this),document.body.contains(this.element)&&this.createdEnabled&&this.dotNetRef.invokeMethodAsync("CreatedEvent",null),sf.base.EventHandler.add(this.element,"keydown",this.onMove,this),window.addEventListener("resize",this.reportWindowSize.bind(this),!0),sf.base.Browser.isDevice&&sf.base.addClass([this.element],"e-splitter-touch"),this.enableReversePanes&&this.setReversePane()},p.prototype.setReversePane=function(){this.allPanes=this.allPanes.reverse(),this.allBars=this.allBars.reverse(),sf.base.addClass([this.allBars[this.allBars.length-1]],"e-last-bar"),sf.base.removeClass([this.allBars[0]],"e-last-bar")},p.prototype.onDocumentClick=function(e){e.target.classList.contains(t)||sf.base.isNullOrUndefined(this.currentSeparator)||sf.base.removeClass([this.currentSeparator],["e-split-bar-hover","e-split-bar-active"])},p.prototype.updateClass=function(){if(sf.base.Browser.info.name===h){sf.base.addClass([this.element],"e-ie");for(var e=this.element.querySelectorAll(".e-splitter ."+s),t=0;t<e.length;t++){var i=sf.base.isNullOrUndefined(this.separatorSize)?1:this.separatorSize;sf.base.setStyleAttribute(e[t],{"padding-left":i/2+c,"padding-right":i/2+c})}}},p.prototype.reportWindowSize=function(){for(var e=this,t=this.allPanes.length,i=0;i<t;i++){if(!sf.base.isNullOrUndefined(this.paneSettings[i])&&sf.base.isNullOrUndefined(this.paneSettings[i].size)&&this.allPanes[i].classList.remove(n),t-1===i)this.element.querySelectorAll("."+n).length===t&&sf.base.removeClass([this.allPanes[i]],n)}setTimeout((function(){e.updateSplitterSize(!0)}),200)},p.prototype.onMove=function(e){if(this.allPanes.length>1&&this.element.children.length>1){this.getPaneDetails(),this.getPaneDimensions(!1);var i=this.getSeparatorIndex(this.currentSeparator),n=this.previousPane.classList.contains("e-collapsed"),s=this.previousPane.classList.contains("e-expanded"),o=this.nextPane.classList.contains("e-collapsed");(this.orientation!==d&&38===e.keyCode||this.orientation===d&&39===e.keyCode||this.orientation===d&&37===e.keyCode||this.orientation!==d&&40===e.keyCode)&&(!s&&!o&&!n||s&&!o)&&document.activeElement.classList.contains(t)&&this.paneSettings[i].resizable&&this.paneSettings[i+1].resizable?(e.preventDefault(),this.checkPaneSize(e),this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",{event:this.getKeyBoardEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension]})):13===e.keyCode&&this.paneSettings[i].collapsible&&document.activeElement.classList.contains(t)&&this.currentSeparator.classList.contains("e-split-bar-active")&&(this.previousPane.classList.contains("e-collapsed")?(this.expand(i),sf.base.addClass([this.currentSeparator],"e-split-bar-active")):(this.collapse(i),sf.base.addClass([this.currentSeparator],"e-split-bar-active")))}},p.prototype.addSeparator=function(e){var i;void 0===e&&(e=!1),this.allBars=[],this.allPanes=[];for(var n=0;n<this.element.children.length;n++)this.element.children[n].classList.contains("e-pane")&&this.allPanes.push(this.element.children[n]),this.element.children[n].classList.contains(t)&&this.allBars.push(this.element.children[n]);for(var o=this.allPanes.length,r=0;r<o;r++)if(r<o-1){if(i=this.allBars[r],this.updateIconClass(),sf.base.isNullOrUndefined(i)||(this.enableReversePanes?i.setAttribute("dir","ltr"):i.removeAttribute("dir"),e&&(this.currentSeparator=i),this.addMouseActions(i),sf.base.EventHandler.add(i,"touchstart click",this.clickHandler,this),i.addEventListener("focus",(function(){document.activeElement.classList.contains(t)&&(i=document.activeElement,sf.base.addClass([i],"e-split-bar-active"))})),i.addEventListener("blur",(function(){sf.base.removeClass([i],"e-split-bar-active")}))),!sf.base.isNullOrUndefined(i))if(this.isResizable()){sf.base.EventHandler.add(i,"mousedown",this.onMouseDown,this);var a=sf.base.Browser.info.name===h?"pointerdown":"touchstart";sf.base.EventHandler.add(i,a,this.onMouseDown,this),this.updateResizablePanes(r)}else sf.base.addClass([sf.base.select("."+s,i)],"e-hide-handler")}else i&&sf.base.addClass([i],"e-last-bar"),o>1&&this.updateResizablePanes(r)},p.prototype.updateSeparator=function(){for(var e=0,t=0;t<this.allBars.length;t++){var i=this.allBars[t];sf.base.EventHandler.remove(i,"touchstart click",this.clickHandler),sf.base.EventHandler.remove(i,"mousedown",this.onMouseDown);var n=sf.base.Browser.info.name===h?"pointerdown":"touchstart";sf.base.EventHandler.remove(i,n,this.onMouseDown),e+=parseInt(this.allPanes[t].style.flexBasis),i.setAttribute("aria-valuenow",e.toString())}this.addSeparator()},p.prototype.updateResizablePanes=function(e){this.getPaneDetails(),this.isResizable(),sf.base.addClass([this.allPanes[e]],"e-resizable")},p.prototype.getPaneDetails=function(){var e=null,t=null;this.order=parseInt(this.currentSeparator.style.order,10),this.allPanes.length>1&&(e=this.getPrevPane(this.order),t=this.getNextPane(this.order)),e&&t&&(this.previousPane=e,this.nextPane=t,this.prevPaneIndex=this.getPreviousPaneIndex(),this.nextPaneIndex=this.getNextPaneIndex())},p.prototype.getOrderIndex=function(e,t){for(var i,n="pane"===t?this.allPanes:this.allBars,s=0;s<n.length;s++)parseInt(n[s].style.order)===e&&(i=s);return i},p.prototype.getPrevPane=function(e){return this.enableReversePanes?this.getOrderPane(e+1):this.getOrderPane(e-1)},p.prototype.getNextPane=function(e){return this.enableReversePanes?this.getOrderPane(e-1):this.getOrderPane(e+1)},p.prototype.getOrderPane=function(e){for(var t,i=0;i<this.element.children.length;i++)parseInt(this.element.children[i].style.order)===e&&(t=this.element.children[i]);return t},p.prototype.getPreviousPaneIndex=function(){var e=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)+1:parseInt(this.currentSeparator.style.order,10)-1;return this.getOrderIndex(e,"pane")},p.prototype.getNextPaneIndex=function(){var e=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)-1:parseInt(this.currentSeparator.style.order,10)+1;return this.getOrderIndex(e,"pane")},p.prototype.onMouseDown=function(e){var i=this;e.preventDefault();var n=e.target.classList.contains(t)?e.target:e.target.parentElement;if(this.splitterDetails(e),!n.classList.contains("e-navigate-arrow")){this.updateCurrentSeparator(n),sf.base.addClass([this.currentSeparator],"e-split-bar-active"),this.updateCursorPosition(e,"previous"),this.getPaneDetails();for(var s=this.element.querySelectorAll("iframe"),o=0;o<s.length;o++)s[o].style.pointerEvents="none";this.onResizeStartEnabled?(this.dotNetRef.invokeMethodAsync("ResizeStartEvent",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),cancel:!1}).then((function(e){i.isPreventResizeAction=e,e&&i.unwireResizeEvents()})),this.resizeEvent(e)):(this.isPreventResizeAction=!1,this.resizeEvent(e))}},p.prototype.getMouseEvtArgs=function(e){return{button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,detail:e.detail,screenX:e.screenX,screenY:e.screenY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,type:e.type}},p.prototype.getKeyBoardEvtArgs=function(e){return{key:e.key,code:e.code,location:e.location,repeat:e.repeat,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,type:e.type}},p.prototype.getDomObject=function(e,t){return null!=t?window.sfBlazor.getDomObject(e,t):null},p.prototype.resizeEvent=function(e){this.wireResizeEvents(),this.checkPaneSize(e)},p.prototype.checkPaneSize=function(e){var t,i,n=sf.base.isNullOrUndefined(this.separatorSize)?1:this.separatorSize;if(t=this.orientation===d?this.previousPane.offsetWidth:this.previousPane.offsetHeight,i=this.orientation===d?this.nextPane.offsetWidth:this.nextPane.offsetHeight,this.previousPane.style.flexBasis.indexOf("%")>0||this.nextPane.style.flexBasis.indexOf("%")>0){var s=this.updatePaneFlexBasis(this.previousPane),o=this.updatePaneFlexBasis(this.nextPane);this.totalPercent=s+o,this.totalWidth=this.convertPercentageToPixel(this.totalPercent+"%"),"keydown"!==e.type||sf.base.isNullOrUndefined(e.keyCode)||((39===e.keyCode||40===e.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<this.convertPercentageToPixel(o-1+"%")?(this.previousPane.style.flexBasis=s+1+"%",this.nextPane.style.flexBasis=o-1+"%"):(37===e.keyCode||38===e.keyCode)&&t>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<this.convertPercentageToPixel(s-1+"%")&&(this.previousPane.style.flexBasis=s-1+"%",this.nextPane.style.flexBasis=o+1+"%"))}else this.totalWidth=this.orientation===d?this.previousPane.offsetWidth+this.nextPane.offsetWidth:this.previousPane.offsetHeight+this.nextPane.offsetHeight,"keydown"!==e.type||sf.base.isNullOrUndefined(e.keyCode)||((39===e.keyCode||40===e.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<i+n?(this.addStaticPaneClass(),this.previousPane.style.flexBasis=t+n+c,this.nextPane.style.flexBasis=i<n?"0px":i-n+c):(37===e.keyCode||38===e.keyCode)&&t>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<t-n&&(this.addStaticPaneClass(),this.previousPane.style.flexBasis=t<n?"0px":t-n+c,this.nextPane.style.flexBasis=i+n+c))},p.prototype.getMinInPixel=function(e){if(sf.base.isNullOrUndefined(e))return 0;var t=this.convertPixelToNumber(e.toString());return e.indexOf("%")>0&&(t=this.convertPercentageToPixel(e)),this.convertPixelToNumber(t.toString())},p.prototype.addStaticPaneClass=function(){this.previousPane.classList.contains(n)||""===this.previousPane.style.flexBasis||sf.base.addClass([this.previousPane],n),this.nextPane.classList.contains(n)||""===this.nextPane.style.flexBasis||sf.base.addClass([this.nextPane],n)},p.prototype.convertPercentageToPixel=function(e,t){var i,n=e.toString();if(n.indexOf("%")>-1){i=parseFloat(n.slice(0,n.indexOf("%")));var s=void 0;s=sf.base.isNullOrUndefined(t)?this.orientation===d?this.element.offsetWidth:this.element.offsetHeight:this.panesDimensions[this.allPanes.indexOf(t)],i=Math.ceil(s*(i/100))}else i=parseInt(n,10);return i},p.prototype.updatePaneFlexBasis=function(e){var t;if(e.style.flexBasis.indexOf("%")>0)t=parseFloat(e.style.flexBasis.slice(0,e.style.flexBasis.indexOf("%")));else if(""!==e.style.flexBasis)t=this.convertPixelToPercentage(this.convertPixelToNumber(e.style.flexBasis));else{var i=this.orientation===d?e.offsetWidth:e.offsetHeight;t=this.convertPixelToPercentage(i)}return t},p.prototype.convertPixelToPercentage=function(e){return e/(this.orientation===d?this.element.offsetWidth:this.element.offsetHeight)*100},p.prototype.convertPixelToNumber=function(e){return(e=e.toString()).indexOf("p")>-1?parseFloat(e.slice(0,e.indexOf("p"))):parseFloat(e)},p.prototype.updateCurrentSeparator=function(e){this.currentSeparator=e.classList.contains(t)?e:e.parentElement},p.prototype.wireResizeEvents=function(){sf.base.EventHandler.add(document,"mousemove",this.onMouseMove,this),sf.base.EventHandler.add(document,"mouseup",this.onMouseUp,this);var e=sf.base.Browser.info.name===h?"pointermove":"touchmove",t=sf.base.Browser.info.name===h?"pointerup":"touchend";sf.base.EventHandler.add(document,e,this.onMouseMove,this),sf.base.EventHandler.add(document,t,this.onMouseUp,this)},p.prototype.unwireResizeEvents=function(){var e=sf.base.Browser.info.name===h?"pointermove":"touchmove",t=sf.base.Browser.info.name===h?"pointerup":"touchend";sf.base.EventHandler.remove(document,"mousemove",this.onMouseMove),sf.base.EventHandler.remove(document,"mouseup",this.onMouseUp),sf.base.EventHandler.remove(document,e,this.onMouseMove),sf.base.EventHandler.remove(document,t,this.onMouseUp),window.removeEventListener("resize",this.reportWindowSize.bind(this))},p.prototype.onMouseMove=function(e){if(this.isCursorMoved(e)&&!this.isPreventResizeAction){this.getPaneDetails(),this.getPaneDimensions(!1),this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension]});var t,s=this.validateDraggedPosition(this.getSeparatorPosition(e),this.prePaneDimenson,this.nextPaneDimension);if(this.getBorder(),t=this.orientation===d?this.element.getBoundingClientRect().left+s-this.currentSeparator.getBoundingClientRect().left+this.border:this.element.getBoundingClientRect().top+s-this.currentSeparator.getBoundingClientRect().top+this.border,this.nextPaneHeightWidth="string"===i(this.nextPaneHeightWidth)&&this.nextPaneHeightWidth.indexOf("p")>-1?this.convertPixelToNumber(this.nextPaneHeightWidth):parseInt(this.nextPaneHeightWidth,10),this.previousPaneHeightWidth="string"===i(this.previousPaneHeightWidth)&&this.previousPaneHeightWidth.indexOf("p")>-1?this.convertPixelToNumber(this.previousPaneHeightWidth):parseInt(this.previousPaneHeightWidth,10),this.prevPaneCurrentWidth=t+this.previousPaneHeightWidth,this.nextPaneCurrentWidth=this.nextPaneHeightWidth-t,this.validateMinMaxValues(),this.nextPaneCurrentWidth<0&&(this.nextPaneCurrentWidth=0),this.prevPaneCurrentWidth<0&&(this.prevPaneCurrentWidth=0),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth>this.totalWidth&&(this.nextPaneCurrentWidth<this.prevPaneCurrentWidth?this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth):this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth)),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth<this.totalWidth){var o=this.totalWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth);this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+o}this.calculateCurrentDimensions(),this.addStaticPaneClass();for(var r=0,a=0;a<this.paneSettings.length;a++)""===this.paneSettings[a].size&&(r+=1);var l=r===this.allPanes.length;if(""==this.previousPane.style.flexBasis&&""==this.nextPane.style.flexBasis){var h=this.allPanes.length%this.allBars.length;this.prevPaneIndex==h?(this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,sf.base.addClass([this.nextPane],n)):this.nextPaneIndex==h?(this.previousPane.style.flexBasis=this.prevPaneCurrentWidth,sf.base.addClass([this.previousPane],n)):(this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,sf.base.addClass([this.nextPane],n))}else l?(this.previousPane.style.flexBasis=this.prevPaneCurrentWidth,sf.base.addClass([this.previousPane],n),this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,sf.base.addClass([this.nextPane],n)):(""!==this.previousPane.style.flexBasis&&(this.previousPane.style.flexBasis=this.prevPaneCurrentWidth),""!==this.nextPane.style.flexBasis&&(this.nextPane.style.flexBasis=this.nextPaneCurrentWidth));var c=""!==this.previousPane.style.flexBasis&&""!==this.nextPane.style.flexBasis;this.allPanes.length>2||!c||this.updateSplitterSize();for(var p=0,u=0;u<this.allBars.length;u++){var f=this.allBars[u];p+=parseInt(this.allPanes[u].style.flexBasis),f.setAttribute("aria-valuenow",p.toString())}}},p.prototype.updateSplitterSize=function(e){for(var t=0,i=[],n=0,s=this.element.children,o=0;o<s.length;o++)t+=this.orientation===d?s[o].offsetWidth:s[o].offsetHeight;for(var r=0;r<this.allBars.length;r++){var a=getComputedStyle(this.allBars[r]);t+=this.orientation===d?parseInt(a.marginLeft,10)+parseInt(a.marginLeft,10):parseInt(a.marginTop,10)+parseInt(a.marginBottom,10)}var l=this.orientation===d?this.element.offsetWidth-(2*this.border+t):this.element.offsetHeight-(2*this.border+t);for(o=0;o<this.allPanes.length&&!sf.base.isNullOrUndefined(this.paneSettings[o]);o++)(""===this.allPanes[o].innerText?this.paneSettings[o].size&&""===this.allPanes[o].innerText:this.paneSettings[o].size||""===this.allPanes[o].innerText)||(i[n]=o,n++);var h=l/i.length;for(r=0;r<i.length;r++)""!==this.allPanes[i[r]].style.flexBasis&&(this.allPanes[i[r]].style.flexBasis=this.orientation===d?this.allPanes[i[r]].offsetWidth+h+c:this.allPanes[i[r]].offsetHeight+h+c);if(2===this.allPanes.length&&e){var p=this.allPanes.length,u=void 0,f=void 0,g=void 0,m=void 0;for(o=0;o<p&&!sf.base.isNullOrUndefined(this.paneSettings[o]);o++)if(!sf.base.isNullOrUndefined(this.paneSettings[o].min)&&(f=this.convertPixelToNumber(this.paneSettings[o].min.toString()),this.paneSettings[o].min.indexOf("%")>0&&(f=this.convertPercentageToPixel(this.paneSettings[o].min)),u=this.convertPixelToNumber(f.toString()),(this.orientation===d?this.allPanes[o].offsetWidth:this.allPanes[o].offsetHeight)<u)){0===o?(g=this.allPanes[o],m=this.allPanes[o+1]):(g=this.allPanes[o],m=this.allPanes[o-1]);var v=u-(this.orientation===d?this.allPanes[o].offsetWidth:this.allPanes[o].offsetHeight),b=g.style.flexBasis.indexOf("%")>-1,y=this.orientation===d?g.offsetWidth:g.offsetHeight;g.style.flexBasis=b?this.convertPixelToPercentage(y+v)+"%":y+v+"px";var C=this.orientation===d?m.offsetWidth:m.offsetHeight;m.style.flexBasis=m.style.flexBasis.indexOf("%")>-1?this.convertPixelToPercentage(C-v)+"%":C-v+"px"}}},p.prototype.calcDragPosition=function(e,t){var i;return(i=(i=(this.orientation===d?this.currentCoordinates.x-e:this.currentCoordinates.y-e)/t)>1?1:i<0?0:i)*t},p.prototype.getSeparatorPosition=function(e){this.updateCursorPosition(e,"current");var t=this.orientation===d?this.element.getBoundingClientRect().left+window.scrollX:this.element.getBoundingClientRect().top+window.scrollY,i=this.orientation===d?this.element.offsetWidth:this.element.offsetHeight;return this.calcDragPosition(t,i)},p.prototype.getBorder=function(){var e=this.orientation===d?(this.element.offsetWidth-this.element.clientWidth)/2:(this.element.offsetHeight-this.element.clientHeight)/2;this.border="chrome"!==sf.base.Browser.info.name?0:e},p.prototype.validateMinMaxValues=function(){this.prevPaneCurrentWidth=this.validateMinRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMinRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane),this.prevPaneCurrentWidth=this.validateMaxRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMaxRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane)},p.prototype.validateMinRange=function(e,t,i){var n,s,o=null,r=0;return sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].min)||(o=this.paneSettings[e].min.toString()),sf.base.isNullOrUndefined(o)||(o.indexOf("%")>0&&(o=this.convertPercentageToPixel(o).toString()),t<(n=this.convertPixelToNumber(o))&&(r=t-n<=0?0:t-n,this.totalWidth=this.totalWidth-r,this.totalPercent=this.convertPixelToPercentage(this.totalWidth),s=n)),sf.base.isNullOrUndefined(s)?t:s},p.prototype.validateMaxRange=function(e,t,i){var n,s,o=null;return sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].max)||(o=this.paneSettings[e].max.toString()),sf.base.isNullOrUndefined(o)||(o.indexOf("%")>0&&(o=this.convertPercentageToPixel(o).toString()),t>(n=this.convertPixelToNumber(o))&&(this.totalWidth=this.totalWidth-(t-n),this.totalPercent=this.convertPixelToPercentage(this.totalWidth),s=n)),sf.base.isNullOrUndefined(s)?t:s},p.prototype.calculateCurrentDimensions=function(){this.updatePrePaneInPercentage||this.updateNextPaneInPercentage?(this.prevPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.prevPaneCurrentWidth))/10)),this.nextPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.nextPaneCurrentWidth))/10)),0===this.prevPaneCurrentWidth&&(this.nextPaneCurrentWidth=this.totalPercent),0===this.nextPaneCurrentWidth&&(this.prevPaneCurrentWidth=this.totalPercent),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth!==this.totalPercent?this.equatePaneWidths():(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"%"),this.prevPaneCurrentWidth=this.updatePrePaneInPercentage?this.prevPaneCurrentWidth:this.convertPercentageToPixel(this.prevPaneCurrentWidth)+"px",this.nextPaneCurrentWidth=this.updateNextPaneInPercentage?this.nextPaneCurrentWidth:this.convertPercentageToPixel(this.nextPaneCurrentWidth)+"px",this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1):(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"px",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"px")},p.prototype.equatePaneWidths=function(){var e;this.prevPaneCurrentWidth+this.nextPaneCurrentWidth>this.totalPercent&&(e=this.prevPaneCurrentWidth+this.nextPaneCurrentWidth-this.totalPercent,this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-e/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-e/2+"%"),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth<this.totalPercent&&(e=this.totalPercent-(this.prevPaneCurrentWidth+this.nextPaneCurrentWidth),this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+e/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+e/2+"%")},p.prototype.validateDraggedPosition=function(e,t,i){var n=this.orientation===d?this.currentSeparator.offsetLeft:this.currentSeparator.offsetTop,s=n-t,o=i+n,r=this.getMinMax(this.prevPaneIndex,"min"),a=this.getMinMax(this.nextPaneIndex,"min"),l=this.getMinMax(this.prevPaneIndex,"max"),h=this.getMinMax(this.nextPaneIndex,"max"),c=e;return e>o-a?c=o-a:e<s+r&&(c=s+r),sf.base.isNullOrUndefined(l)?sf.base.isNullOrUndefined(h)||e<o-h&&(c=o-h):e>s+l&&(c=s+l),c},p.prototype.getMinMax=function(e,t){var i="min"===t?0:null,n=null;return"min"===t?sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].min)||(n=this.paneSettings[e].min):sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].max)||(n=this.paneSettings[e].max),this.paneSettings.length>0&&!sf.base.isNullOrUndefined(this.paneSettings[e])&&!sf.base.isNullOrUndefined(n)?(n.indexOf("%")>0&&(n=this.convertPercentageToPixel(n).toString()),this.convertPixelToNumber(n)):i},p.prototype.isValidSize=function(e){var t;return!sf.base.isNullOrUndefined(this.paneSettings[e])&&!sf.base.isNullOrUndefined(this.paneSettings[e].size)&&this.paneSettings[e].size.indexOf("%")>-1&&(t=!0),t},p.prototype.getPaneDimensions=function(e){this.previousPaneHeightWidth=""===this.previousPane.style.flexBasis||e?this.getPaneHeight(this.previousPane):this.previousPane.style.flexBasis,this.nextPaneHeightWidth=""===this.nextPane.style.flexBasis||e?this.getPaneHeight(this.nextPane):this.nextPane.style.flexBasis,this.isValidSize(this.prevPaneIndex)&&(this.previousPaneHeightWidth=this.convertPercentageToPixel(this.previousPaneHeightWidth).toString(),this.updatePrePaneInPercentage=!0),this.isValidSize(this.nextPaneIndex)&&(this.nextPaneHeightWidth=this.convertPercentageToPixel(this.nextPaneHeightWidth).toString(),this.updateNextPaneInPercentage=!0),this.prePaneDimenson=this.convertPixelToNumber(this.previousPaneHeightWidth.toString()),this.nextPaneDimension=this.convertPixelToNumber(this.nextPaneHeightWidth.toString())},p.prototype.getPaneHeight=function(e){return this.orientation===d?e.offsetWidth.toString():e.offsetHeight.toString()},p.prototype.isCursorMoved=function(e){return"mouse"===this.getEventType(e.type)||!sf.base.isNullOrUndefined(e.pointerType)&&"mouse"===this.getEventType(e.pointerType)?this.checkCoordinates(e.pageX,e.pageY):sf.base.Browser.info.name!==h?this.checkCoordinates(e.touches[0].pageX,e.touches[0].pageY):this.checkCoordinates(e.pageX,e.pageY)},p.prototype.checkCoordinates=function(e,t){var i=!0;return e!==this.previousCoordinates.x&&t!==this.previousCoordinates.y||(i=!1),i},p.prototype.onMouseUp=function(e){if(this.isPreventResizeAction)this.unwireResizeEvents();else{sf.base.removeClass([this.currentSeparator],"e-split-bar-active"),this.unwireResizeEvents();for(var t=0;t<this.element.querySelectorAll("iframe").length;t++)this.element.querySelectorAll("iframe")[t].style.pointerEvents="auto";this.getPaneDimensions(!1),this.updatePersistData(),this.onResizeStopEnabled&&this.dotNetRef.invokeMethodAsync("SplitterResizeInfo",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension],resizingPaneSizes:[this.previousPane.style.flexBasis,this.nextPane.style.flexBasis]})}},p.prototype.isMouseEvent=function(e){var t;return("mouse"===this.getEventType(e.type)||!sf.base.isNullOrUndefined(e.pointerType)&&"mouse"===this.getEventType(e.pointerType))&&(t=!0),t},p.prototype.getEventType=function(e){return e.indexOf("mouse")>-1?"mouse":"touch"},p.prototype.updateCursorPosition=function(e,t){if(this.isMouseEvent(e))this.changeCoordinates({x:e.pageX,y:e.pageY},t);else{var i=sf.base.Browser.info.name!==h?e.touches[0]:e;this.changeCoordinates({x:i.pageX,y:i.pageY},t)}},p.prototype.changeCoordinates=function(e,t){"previous"===t?this.previousCoordinates=e:this.currentCoordinates=e},p.prototype.isResizable=function(){var e,t=this.getNextPaneIndex(),i=this.getPreviousPaneIndex();return(!sf.base.isNullOrUndefined(this.paneSettings[i])&&this.paneSettings[i].resizable&&!sf.base.isNullOrUndefined(this.paneSettings[t])&&this.paneSettings[t].resizable||sf.base.isNullOrUndefined(this.paneSettings[t]))&&(e=!0),e},p.prototype.clickHandler=function(e){if(e.detail<=1){if(!e.target.classList.contains("e-navigate-arrow")){var i=sf.base.selectAll(".e-splitter > ."+t+".e-split-bar-hover");i.length>0&&sf.base.removeClass(i,"e-split-bar-hover"),sf.base.addClass([e.target],"e-split-bar-hover")}this.updateIconClass();var n=e.target;(n.classList.contains(o)||n.classList.contains(r))&&this.collapseAction(e),(n.classList.contains("e-arrow-right")||n.classList.contains(a))&&this.expandAction(e);for(var s=0,l=this.element.children,h=0;h<l.length;h++)s+=this.orientation===d?l[h].offsetWidth:l[h].offsetHeight;s>this.element.offsetWidth&&this.updateSplitterSize()}},p.prototype.collapseAction=function(e){if(this.splitterDetails(e),this.collapseFlag)this.collapsePane(e);else{var t={cancel:!1,event:e,index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]};this.onCollapseEnabled?this.dotNetRef.invokeMethodAsync("OnCollapseEvent",-1,t):sf.base.isNullOrUndefined(e)?this.collapseMethodEvent(-1,t):this.onCollapseEvent(t)}},p.prototype.onCollapseEvent=function(e){var t=this.orientation===d?o:r,i={target:this.allBars[e.index[0]].querySelector("."+t)};this.collapsePane(i),this.collapsedEnabled&&(this.getPaneDimensions(!0),this.dotNetRef.invokeMethodAsync("CollapsedEvent",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],paneSize:[this.prePaneDimenson,this.nextPaneDimension]}))},p.prototype.collapsePane=function(e){var t=this.element.querySelectorAll(".e-collapsed").length,i=this.nextPane.nextElementSibling,s=this.previousPane.classList.contains(n)&&!this.previousPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-collapsed")&&i.classList.contains("e-pane")&&!i.classList.contains(n)&&!i.classList.contains("e-collapsed")&&!(t===this.allPanes.length-2)||this.nextPane.classList.contains("e-collapsed")&&!this.previousPane.classList.contains(n)&&this.nextPane.classList.contains(n),o=["e-collapsed","e-pane-hidden"];this.nextPane.classList.contains("e-collapsed")?(sf.base.removeClass([this.previousPane],"e-expanded"),sf.base.removeClass([this.nextPane],o),this.collapseFlag||this.updatePaneSettings(this.nextPaneIndex,!1)):(sf.base.removeClass([this.previousPane],"e-expanded"),sf.base.removeClass([this.nextPane],o),sf.base.addClass([this.nextPane],"e-expanded"),sf.base.addClass([this.previousPane],o),this.collapseFlag||this.updatePaneSettings(this.prevPaneIndex,!0)),this.updateIconsOnCollapse(e),this.previousPane.setAttribute("aria-expanded","false"),this.nextPane.setAttribute("aria-expanded","true"),this.updateFlexGrow(this.checkStaticPanes()),s&&(sf.base.removeClass([this.nextPane],"e-expanded"),this.nextPane.style.flexGrow="")},p.prototype.updateIconsOnCollapse=function(e){this.splitterProperty(),this.previousPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-collapsed")?(sf.base.addClass([e.target],l),this.paneSettings[this.prevPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],l),this.resizableModel(this.currentBarIndex,!1),!this.previousPane.classList.contains("e-collapsed")||this.nextPane.classList.contains("e-collapsed")||this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.rightArrow),this.previousPane.previousElementSibling&&!this.previousPane.previousElementSibling.classList.contains("e-collapsed")&&(this.previousPane.classList.contains("e-collapsed")&&this.paneSettings[this.prevPaneIndex].collapsible?this.showTargetBarIcon(this.prevBar,this.leftArrow):this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.leftArrow)),sf.base.isNullOrUndefined(this.prevBar)||(this.resizableModel(this.currentBarIndex-1,!1),this.hideTargetBarIcon(this.prevBar,this.arrow)),this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):this.splitInstance.prevPaneCollapsed||this.splitInstance.nextPaneExpanded||(this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),!this.splitInstance.nextPaneNextEle.classList.contains("e-collapsed")&&this.paneSettings[this.currentBarIndex+1].resizable&&this.resizableModel(this.currentBarIndex+1,!0),this.paneSettings[this.currentBarIndex].collapsible||sf.base.addClass([e.target],l),this.previousPane&&0===this.prevPaneIndex&&this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.leftArrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.allBars[this.nextPaneIndex-1],this.rightArrow),!this.previousPane.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.rightArrow),sf.base.isNullOrUndefined(this.nextBar)||(this.nextPane.nextElementSibling&&this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex+1].collapsible||!this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible?this.showTargetBarIcon(this.nextBar,this.leftArrow):!this.paneSettings[this.splitInstance.nextPaneIndex+1].collapsible&&this.paneSettings[this.currentBarIndex]&&this.hideTargetBarIcon(this.nextBar,this.arrow)),this.nextPaneIndex===this.allPanes.length-1||!this.nextPane.nextElementSibling||this.nextPane.classList.contains("e-collapsed")||this.nextPane.nextElementSibling.classList.contains("e-collapsed")||this.paneSettings[this.nextPaneIndex+1].collapsible||this.hideTargetBarIcon(this.nextBar,this.rightArrow))},p.prototype.expandAction=function(e){if(this.expandingFlag){this.splitterDetails(e);var t=[this.getPreviousPaneIndex(),this.getNextPaneIndex()];this.expandFlag?this.onExpandEnabled?this.dotNetRef.invokeMethodAsync("OnExpandEvent",{cancel:!1,index:t,event:this.getMouseEvtArgs(e)}):this.onExpandEvent({event:e,index:t}):this.expandPane(e)}},p.prototype.onExpandEvent=function(e){var t=this.orientation===d?"e-arrow-right":a,i={target:this.allBars[e.index[0]].querySelector("."+t)};this.expandPane(i),this.expandedEnabled&&(this.getPaneDimensions(!0),this.dotNetRef.invokeMethodAsync("ExpandedEvent",{event:this.getMouseEvtArgs(e.event),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],paneSize:[this.prePaneDimenson,this.nextPaneDimension]}))},p.prototype.getSeparatorIndex=function(e){var t=this.orientation===d?"e-split-bar-horizontal":"e-split-bar-vertical";this.allBars.length<1&&(this.allBars=sf.base.selectAll("."+t,this.element));var i=[].slice.call(this.allBars);return(i=this.enableReversePanes?i.reverse():i).indexOf(e)},p.prototype.updateBars=function(e){this.prevBar=this.allBars[e-1],this.nextBar=this.allBars[e+1]},p.prototype.splitterDetails=function(e){this.element.classList.contains("e-splitter-horizontal")?(this.orientation=d,this.arrow=e.target.classList.contains(o)?"e-arrow-right":o):(this.orientation="Vertical",this.arrow=e.target.classList.contains(r)?a:r),this.updateCurrentSeparator(e.target),this.currentIndex(e),this.updateBars(this.currentBarIndex),this.getPaneDetails()},p.prototype.currentIndex=function(e){this.currentBarIndex=this.getOrderIndex(parseInt(e.target.parentElement.style.order,10),"splitbar")},p.prototype.expandPane=function(e){var t=this.element.querySelectorAll(".e-collapsed").length,i=!this.previousPane.classList.contains("e-collapsed")&&this.previousPane.classList.contains(n)&&!this.nextPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-expanded")&&this.nextPane.nextElementSibling.classList.contains("e-pane")&&!this.nextPane.nextElementSibling.classList.contains(n)&&!(t===this.allPanes.length-2),s=["e-collapsed","e-pane-hidden"];this.previousPane.classList.contains("e-collapsed")?(sf.base.removeClass([this.previousPane],s),sf.base.removeClass([this.nextPane],"e-expanded"),this.expandFlag&&this.updatePaneSettings(this.prevPaneIndex,!1)):(sf.base.removeClass([this.nextPane],"e-expanded"),sf.base.removeClass([this.previousPane],s),sf.base.addClass([this.previousPane],"e-expanded"),sf.base.addClass([this.nextPane],s),this.expandFlag&&this.updatePaneSettings(this.nextPaneIndex,!0)),this.updateIconsOnExpand(e),this.previousPane.setAttribute("aria-expanded","true"),this.nextPane.setAttribute("aria-expanded","false"),this.updateFlexGrow(this.checkStaticPanes()),i&&(sf.base.removeClass([this.previousPane],"e-expanded"),this.previousPane.style.flexGrow=""),this.expandingFlag=!0},p.prototype.checkStaticPanes=function(){for(var e=!0,t=0;t<this.allPanes.length;t++)!this.allPanes[t].classList.contains("e-collapsed")&&e&&(e=!!this.allPanes[t].classList.contains(n));return e},p.prototype.splitterProperty=function(){this.splitInstance={currentBarIndex:this.currentBarIndex,nextPaneCollapsible:this.nextPane.classList.contains("e-collapsible"),prevPaneCollapsible:this.previousPane.classList.contains("e-collapsible"),prevPaneExpanded:this.previousPane.classList.contains("e-expanded"),nextPaneExpanded:this.nextPane.classList.contains("e-expanded"),nextPaneCollapsed:this.nextPane.classList.contains("e-collapsed"),prevPaneCollapsed:this.previousPane.classList.contains("e-collapsed"),nextPaneIndex:this.getNextPaneIndex(),prevPaneIndex:this.getPreviousPaneIndex(),nextPaneNextEle:this.nextPane.nextElementSibling,prevPanePreEle:this.previousPane.previousElementSibling}},p.prototype.updateIconsOnExpand=function(e){this.splitterProperty(),sf.base.addClass([e.target],l),this.splitInstance.prevPaneExpanded||this.splitInstance.nextPaneCollapsed?this.splitInstance.prevPaneExpanded&&this.splitInstance.nextPaneCollapsed&&(this.resizableModel(this.currentBarIndex,!1),this.resizableModel(this.currentBarIndex+1,!1),this.paneSettings[this.nextPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],l),sf.base.isNullOrUndefined(this.nextBar)||this.hideTargetBarIcon(this.nextBar,this.arrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&!this.paneSettings[this.nextPaneIndex].collapsible&&this.splitInstance.nextPaneCollapsed&&this.hideTargetBarIcon(this.currentSeparator,this.arrow),this.nextPaneIndex!==this.allPanes.length-1&&this.nextPane.nextElementSibling&&this.nextPane.classList.contains("e-collapsed")&&!this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.nextBar,this.rightArrow)):(this.paneSettings[this.prevPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],l),this.paneSettings[this.nextPaneIndex].collapsible&&sf.base.removeClass([e.target],l),this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),sf.base.isNullOrUndefined(this.prevBar)||this.splitInstance.prevPanePreEle.classList.contains("e-collapsed")?(this.previousPane.previousElementSibling&&this.paneSettings[this.prevPaneIndex].collapsible&&this.previousPane.previousElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.prevPaneIndex-1].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex+1].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):(this.paneSettings[this.currentBarIndex-1].resizable&&this.resizableModel(this.currentBarIndex-1,!0),this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex-1].collapsible||this.hideTargetBarIcon(this.prevBar,this.arrow),this.paneSettings[this.currentBarIndex].collapsible&&!this.paneSettings[this.currentBarIndex+1].collapsible&&this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)))},p.prototype.showResizer=function(e){!sf.base.isNullOrUndefined(this.previousPane)&&this.previousPane.classList.contains("e-resizable")&&!sf.base.isNullOrUndefined(this.nextPane)&&this.nextPane.classList.contains("e-resizable")&&sf.base.removeClass([sf.base.select("."+s,e)],"e-hide-handler")},p.prototype.resizableModel=function(e,t){var i,n=e;i=e===this.allBars.length?e-1:e,sf.base.EventHandler.remove(this.allBars[i],"mousedown",this.onMouseDown),t?(sf.base.EventHandler.add(this.allBars[i],"mousedown",this.onMouseDown,this),this.isResizable()&&(this.showResizer(this.allBars[i]),sf.base.removeClass([sf.base.select("."+s,this.allBars[i])],"e-hide-handler"),sf.base.addClass([this.allBars[i]],"e-resizable-split-bar"),e===this.allBars.length?sf.base.addClass([this.allPanes[e]],"e-resizable"):sf.base.addClass([this.allPanes[i]],"e-resizable"),this.updateResizablePanes(n))):(this.updateResizablePanes(n),sf.base.addClass([sf.base.select("."+s,this.allBars[i])],"e-hide-handler"),sf.base.removeClass([this.allBars[i]],"e-resizable-split-bar"),e===this.allBars.length?sf.base.removeClass([this.allPanes[e]],"e-resizable"):sf.base.removeClass([this.allPanes[i]],"e-resizable"))},p.prototype.hideTargetBarIcon=function(e,t){sf.base.addClass([sf.base.select("."+t,e)],l)},p.prototype.showTargetBarIcon=function(e,t){sf.base.removeClass([sf.base.select("."+t,e)],l)},p.prototype.updateFlexGrow=function(e){for(var t=this.allPanes,i=0;i<t.length;i++)t[i].style.flexGrow=t[i].classList.contains("e-expanded")?"1":t[i].classList.contains("e-collapsed")?"0":"",e&&!this.nextPane.classList.contains("e-collapsed")&&(this.nextPane.style.flexGrow="1")},p.prototype.updatePaneSettings=function(e,t){this.isToggleInvoke||(this.paneSettings[e].collapsed=t,this.updatePersistData(),this.dotNetRef.invokeMethodAsync("UpdateCollapsed",e,t))},p.prototype.addMouseActions=function(e){var t,i,n=this;e.addEventListener("mouseenter",(function(){t=setTimeout((function(){sf.base.addClass([e],["e-split-bar-hover"])}),n.iconsDelay)})),e.addEventListener("mouseleave",(function(){clearTimeout(t),sf.base.removeClass([e],["e-split-bar-hover"])})),e.addEventListener("mouseout",(function(){clearTimeout(i)})),e.addEventListener("mouseover",(function(){i=setTimeout((function(){sf.base.addClass([e],["e-split-bar-hover"])}),n.iconsDelay)}))},p.prototype.updateIconClass=function(){this.orientation===d?(this.leftArrow=o,this.rightArrow="e-arrow-right"):(this.leftArrow=r,this.rightArrow=a)},p.prototype.isCollapsed=function(e){if(!(!sf.base.isNullOrUndefined(e)&&this.paneSettings[e].collapsed&&this.allPanes.length>0&&!sf.base.isNullOrUndefined(this.allPanes[e])&&this.allPanes[e].classList.contains("e-collapsed"))){if(this.expandFlag=!1,sf.base.isNullOrUndefined(e)){for(var t=0;t<this.allPanes.length;t++)!sf.base.isNullOrUndefined(this.paneSettings[t])&&this.paneSettings[t].collapsed&&this.updateIsCollapsed(t,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(t=this.allPanes.length-1;t>=0;t--)if(!sf.base.isNullOrUndefined(this.paneSettings[t])&&this.paneSettings[t].collapsed&&!this.allPanes[t].classList.contains("e-collapsed")){var i=this.orientation===d?"e-arrow-right":a;if(0!==t)this.collapseArrow(t-1,i).click();if(!this.nextPane.classList.contains("e-collapsed"))this.collapseArrow(t-1,i).click()}}else{this.collapseFlag=!0;var n=e===this.allBars.length,s=n?e-1:e,o={target:!n&&this.allPanes[e+1].classList.contains("e-collapsed")&&0!==e?this.collapseArrow(s-1,this.targetArrows().lastBarArrow):n?this.collapseArrow(s,this.targetArrows().lastBarArrow):this.collapseArrow(s,this.targetArrows().collapseArrow)};this.splitterDetails(o);var r={cancel:!1,index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]};this.onCollapseEnabled?this.dotNetRef.invokeMethodAsync("OnCollapseEvent",e,r):this.collapseMethodEvent(e,r)}this.expandFlag=!0}},p.prototype.collapseMethodEvent=function(e,t){this.expandFlag=!1;var i=[];i[0]=e;for(var n=1,s=0;s<this.allPanes.length;s++)this.allPanes[s].classList.contains("e-collapsed")&&(i[n]=s,n++);i=i.sort(),this.updateIsCollapsed(e,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(s=0;s<i.length;s++)this.allPanes[i[s]].classList.contains("e-collapsed")||this.updateIsCollapsed(i[s],this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(s=i.length;s>0;s--)if(!this.allPanes[i[s-1]].classList.contains("e-collapsed")){var o=this.targetArrows();this.updateIsCollapsed(i[s-1],o.collapseArrow,o.lastBarArrow)}this.collapsedEnabled&&this.dotNetRef.invokeMethodAsync("CollapsedEvent",{event:this.getMouseEvtArgs(t),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]}),this.collapseFlag=!1,this.expandFlag=!0},p.prototype.toggle=function(e,t){this.isToggleInvoke=!0;for(var i=0;i<this.paneSettings.length;i++)e.indexOf(i)>-1&&this.paneSettings[i].collapsed&&(this.collapsedOnchange(i),this.paneSettings[i].collapsed=!1);for(i=0;i<this.paneSettings.length;i++)t.indexOf(i)>-1&&!this.paneSettings[i].collapsed&&(this.isCollapsed(i),this.paneSettings[i].collapsed=!0);this.isToggleInvoke=!1,this.updatePersistData(),this.dotNetRef.invokeMethodAsync("UpdateSettings",this.paneSettings)},p.prototype.expand=function(e){this.collapsedOnchange(e),this.updatePaneSettings(e,!1)},p.prototype.collapse=function(e){this.isCollapsed(e),this.updatePaneSettings(e,!0)},p.prototype.collapsedOnchange=function(e){sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].collapsed)||!this.allPanes[e].classList.contains("e-collapsed")||this.updateIsCollapsed(e,this.targetArrows().lastBarArrow,this.targetArrows().collapseArrow)},p.prototype.collapsibleModelUpdate=function(e){var t,i,n;n=e===this.allBars.length?e-1:e,t=this.orientation===d?this.checkArrow(n,o):this.checkArrow(n,r),i=this.orientation===d?this.checkArrow(n,"e-arrow-right"):this.checkArrow(n,a),this.paneCollapsible(this.allPanes[e],e),this.updateCollapseIcons(n,i,t)},p.prototype.updateCollapseIcons=function(e,t,i){sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].collapsible)||(this.paneSettings[e].collapsible?sf.base.removeClass([i],[l]):sf.base.addClass([i],[l]),sf.base.isNullOrUndefined(this.paneSettings[e+1])||(this.paneSettings[e+1].collapsible?sf.base.removeClass([t],[l]):sf.base.addClass([t],[l])))},p.prototype.checkArrow=function(e,t){return this.allBars[e].querySelector(".e-navigate-arrow."+t)},p.prototype.paneCollapsible=function(e,t){this.paneSettings[t].collapsible?sf.base.addClass([e],"e-collapsible"):sf.base.removeClass([e],"e-collapsible")},p.prototype.propertyChanged=function(t,i){var s=e({},this.paneSettings);if(sf.base.extend(this,this,t),this.updateClass(),i)for(var o=0;o<=Object.keys(i).length;o++){var r=parseInt(Object.keys(i)[o],10);if(Object(i)[r])for(var a=0;a<Object(i)[r].length;a++)switch(Object(i)[r][a]){case"Visible":case"Resizable":this.resizableModel(r,this.paneSettings[r].resizable);break;case"Collapsible":this.collapsibleModelUpdate(r);break;case"Collapsed":s[r].collapsed!==t.paneSettings[r].collapsed&&(this.paneSettings[r].collapsed?this.isCollapsed(r):this.collapsedOnchange(r));break;case"Size":for(var l=0;l<this.allPanes.length;l++)s[l].size!==t.paneSettings[l].size?null==s[l].size?(this.allPanes[l].style.flexBasis=null,this.allPanes[l].classList.remove(n)):(this.paneSettings[l].size=t.paneSettings[l].size,this.allPanes[l].style.flexBasis=t.paneSettings[l].size):this.allPanes[l].classList.contains(n)||(this.allPanes[l].style.flexBasis=null)}}this.enablePersistence&&this.updatePersistData()},p.prototype.targetArrows=function(){return this.splitterProperty(),{collapseArrow:this.orientation===d?o:r,lastBarArrow:"Vertical"===this.orientation?a:"e-arrow-right"}},p.prototype.collapseArrow=function(e,t){return sf.base.selectAll("."+t,this.allBars[e])[0]},p.prototype.updateIsCollapsed=function(e,t,i){if(!sf.base.isNullOrUndefined(e)){var n=e===this.allBars.length,s=n?e-1:e;(!n&&this.allPanes[e+1].classList.contains("e-collapsed")&&0!==e?this.collapseArrow(s-1,i):n?this.collapseArrow(s,i):this.collapseArrow(s,t)).click()}},p.prototype.updatePersistData=function(){for(var e=[],t=this.element.querySelectorAll(".e-pane"),i=0;i<this.paneSettings.length;i++)e.push(JSON.parse(JSON.stringify(this.paneSettings[i]))),delete e[i].collapsible,delete e[i].content,delete e[i].cssClass,delete e[i].resizable,e[i].size=t[i].style.flexBasis;this.enablePersistence&&window.localStorage.setItem(this.id,JSON.stringify(e))},p.prototype.destroy=function(){for(sf.base.EventHandler.remove(document,"touchstart click",this.onDocumentClick),sf.base.EventHandler.remove(this.element,"keydown",this.onMove),this.updatePersistData(),this.paneSettings=[],this.allBars=[],this.allPanes=[];this.element.attributes.length>0;)this.element.removeAttribute(this.element.attributes[0].name)},p}();return{initialize:function(e){if(e.dataId&&(new p(e),window.sfBlazor.instances[e.dataId].initialize()),e.enablePersistence)for(var t=e.element.querySelectorAll(".e-pane"),i=0;i<t.length;i++)t[i].style.flexBasis=e.paneSettings[i].size},collapse:function(e,t){e&&window.sfBlazor.instances[e].collapse(t)},expand:function(e,t){e&&window.sfBlazor.instances[e].expand(t)},toggle:function(e,t,i){e&&window.sfBlazor.instances[e].toggle(t,i)},resizeEvent:function(e,t){e&&window.sfBlazor.instances[e].resizeEvent(t)},onCollapseEvent:function(e,t){e&&window.sfBlazor.instances[e].onCollapseEvent(t)},collapseMethodEvent:function(e,t,i){e&&window.sfBlazor.instances[e].collapseMethodEvent(i,t)},onExpandEvent:function(e,t){e&&window.sfBlazor.instances[e].onExpandEvent(t)},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()},setReversePane:function(e){e&&window.sfBlazor.instances[e].setReversePane()},updateSeparator:function(e){e.dataId&&(window.sfBlazor.instances[e.dataId].updateSeparator(),e.enableReversePanes&&window.sfBlazor.instances[e.dataId].setReversePane())},propertyChanged:function(e,t){e.dataId&&window.sfBlazor.instances[e.dataId].propertyChanged(e,t)}}}()},"./modules/sf-stepper.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Stepper=function(){"use strict";var e="e-indicator",t="e-step-text-container",i="e-step-selected",n="e-step-inprogress",s="e-step-notstarted",o="e-step-focus",r="e-step-completed",a=function(){function a(e){window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor.setCompInstance(this),this.stepperItemList=this.element.querySelector(".e-stepper-steps"),this.progressValue=this.element.querySelector(".e-progressbar-value"),this.progressbar=this.element.querySelector(".e-stepper-progressbar"),this.getElements(),this.bindEvent(),this.renderProgressBar(),this.navigateToStep(this.activeStep,!1,null,!0)}return a.prototype.updateContext=function(e){sf.base.extend(this,this,e)},a.prototype.getElements=function(){this.liElements=this.element.querySelectorAll(".e-step-container")},a.prototype.bindItemEvent=function(e,t){var i=this;sf.base.EventHandler.add(e,"mouseover",(function(e){return i.openStepperTooltip(t,e)}),this),sf.base.EventHandler.add(e,"mouseleave",(function(){if(i.showTooltip)return i.closeTooltip()}),this),sf.base.EventHandler.add(e,"keydown",this.keyActionHandler.bind(this),this),sf.base.EventHandler.add(e,"click",(function(e){return i.linearModeHandler(e,t)}),this),sf.base.EventHandler.add(window,"resize",(function(){i.resizeHandler()}),this)},a.prototype.bindEvent=function(){var e=this;sf.base.EventHandler.add(window,"click",(function(){e.updateStepFocus()}),this);for(var t=0;t<this.liElements.length;t++)this.bindItemEvent(this.liElements[t],t)},a.prototype.unBindItemEvent=function(e,t){var i=this;sf.base.EventHandler.remove(e,"mouseover",(function(e){return i.openStepperTooltip(t,e)})),sf.base.EventHandler.remove(e,"mouseleave",(function(){if(i.showTooltip)return i.closeTooltip()})),sf.base.EventHandler.remove(e,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(e,"click",(function(e){return i.linearModeHandler(e,t)})),sf.base.EventHandler.remove(window,"resize",(function(){i.resizeHandler()}))},a.prototype.unBindEvent=function(){var e=this;sf.base.EventHandler.remove(window,"click",(function(){e.updateStepFocus()}));for(var t=0;t<this.liElements.length;t++)this.unBindItemEvent(this.liElements[t],t)},a.prototype.linearModeHandler=function(e,t){if(this.linear){var i=t-this.activeStep;1===Math.abs(i)&&this.stepClickHandler(t,e)}else this.stepClickHandler(t,e)},a.prototype.resizeHandler=function(){if(this.stepperItemList&&this.progressbar&&this.element.classList.contains("e-horizontal"))return this.renderProgressBar()},a.prototype.stepClickHandler=function(e,t){this.readOnly||(this.dotNetRef.invokeMethodAsync("StepClickHandler",this.activeStep,e),this.isValueUpdated=!1,this.navigateToStep(e,!0,t),this.isValueUpdated=!0)},a.prototype.updateStepFocus=function(){if(this.isKeyNavFocus){this.isKeyNavFocus=!1;var e=this.element.querySelector("."+o);e&&(e.classList.remove(o),this.element.classList.remove("e-steps-focus"))}},a.prototype.renderProgressBar=function(){if(this.element.classList.contains("e-horizontal")){var i=this.element.querySelector(".e-step-container"),n=i.firstChild,s=this.stepperItemList.lastChild.firstChild,o=i.querySelector("."+t),r=i.querySelector(".e-step-label-container");if(!i.classList.contains("e-step-icon")&&(o&&!o.classList.contains("e-text")||r&&!r.classList.contains("e-label")))o?this.progressbar.style.setProperty("--progress-top-position",o.querySelector(".e-text").offsetHeight/2+5+"px"):this.progressbar.style.setProperty("--progress-top-position",r.querySelector(".e-label").offsetHeight/2+5+"px");else{var a=0;a=this.element.classList.contains("e-label-before")?this.stepperItemList.offsetHeight-n.offsetHeight/2-1:n.offsetHeight/2,this.progressbar.style.setProperty("--progress-top-position",a+"px")}if(this.element.classList.contains("e-rtl")){var l=n.offsetLeft+n.offsetWidth-this.stepperItemList.offsetWidth;this.progressbar.style.setProperty("--progress-left-position",Math.abs(l)+"px"),this.progressbar.style.setProperty("--progress-bar-width",Math.abs(s.offsetLeft-n.offsetLeft)+"px")}else this.progressbar.style.setProperty("--progress-left-position",n.offsetLeft+1+"px"),this.progressbar.style.setProperty("--progress-bar-width",s.offsetWidth+s.offsetLeft-2-(n.offsetLeft+2)+"px")}else{this.progressBarPosition=this.beforeLabelWidth=this.textEleWidth=0;for(var h=!!this.element.classList.contains("e-label-before"),d=0;d<this.liElements.length;d++){o=this.liElements[d].querySelector("."+t);var c=!(!this.liElements[d].classList.contains("e-step-icon")||this.liElements[d].classList.contains("e-step-text")||this.liElements[d].classList.contains("e-step-label"));if(o&&(this.textEleWidth=this.textEleWidth<o.offsetWidth?o.offsetWidth:this.textEleWidth),h){var p=void 0,u=this.liElements[d].querySelector(".e-label").offsetWidth+15;this.beforeLabelWidth<u&&(this.beforeLabelWidth=u),this.element.querySelector("ol").lastChild.querySelector("."+e)?p=this.beforeLabelWidth+this.liElements[d].querySelector("."+e).offsetWidth/2:this.liElements[d].querySelector("."+t)&&(p=this.beforeLabelWidth+this.liElements[d].querySelector("."+t).offsetWidth/2),this.progressBarPosition<p&&(this.progressBarPosition=p)}else this.progressBarPosition<(c?this.liElements[d].offsetWidth:this.element.querySelector("ol").lastChild.firstChild.offsetWidth)&&(this.progressBarPosition=c?this.liElements[d].offsetWidth:this.element.querySelector("ol").lastChild.firstChild.offsetWidth)}var f=this.element.querySelector("li").querySelector(".e-step-label-container");if(this.element.classList.contains("e-label-bottom")||this.element.classList.contains("e-label-top")?this.progressbar.style.setProperty("--progress-position",this.stepperItemList.offsetWidth/2+"px"):this.progressbar.style.setProperty("--progress-position",this.progressBarPosition/2-1+"px"),f&&f.classList.contains("e-label-before")){var g=this.stepperItemList.querySelectorAll(".e-label");for(d=0;d<g.length;d++){(r=g[parseInt(d.toString(),10)]).style.setProperty("--label-width",this.beforeLabelWidth+"px")}this.progressbar.style.setProperty("--progress-position",this.progressBarPosition-1+"px")}}},a.prototype.updateStepperStatus=function(){for(var e=0;e<this.liElements.length;e++)if(this.stepperStatus&&this.statusIndex===this.activeStep){var t=this.liElements[e];t.classList.remove(i,n,r,s),this.updateStatusClass(e,this.statusIndex,t,"completed"===this.stepperStatus.toLowerCase()?null:"inprogress"===this.stepperStatus.toLowerCase())}},a.prototype.updateStatusClass=function(e,t,o,a){e<t?o.classList.add(r):e===t?null==a?o.classList.add(r,i):a?o.classList.add(n,i):o.classList.add(s):o.classList.add(s)},a.prototype.navigateToStep=function(e,t,i,n,s){var o=this;if(!1!==t){if(!1===this.isValueUpdated||s){var r=this.activeStep,a={cancel:!1,isInteracted:!0,previousStep:this.activeStep,activeStep:e,element:this.element,event:i};this.dotNetRef.invokeMethodAsync("StepChangingHandler",a).then((function(i){i.cancel?(o.navigationHandler(o.activeStep),o.updateStepperStatus()):(o.navigationHandler(e),n&&o.updateStepperStatus(),o.dotNetRef.invokeMethodAsync("StepChangedHandler",t,r,o.activeStep))}))}}else this.navigationHandler(e),n&&this.updateStepperStatus()},a.prototype.navigationHandler=function(t){t=t>=this.liElements.length-1?this.liElements.length-1:t;var o=this.liElements.length;t>=0&&t<o-1&&(t=this.liElements[parseInt(t.toString(),10)].classList.contains("e-stepper-disabled")?this.activeStep:t),this.activeStep=t;for(var a=0;a<this.liElements.length;a++){var l=this.liElements[a];if(l.classList.remove(i,n,r,s),a===this.activeStep&&l.classList.add(i),this.activeStep>=0&&this.progressValue)if(this.element.classList.contains("e-horizontal"))if((this.element.classList.contains("e-label-before")||this.element.classList.contains("e-label-after"))&&!this.element.classList.contains("e-step-type-indicator")&&this.liElements[this.activeStep].classList.contains("e-step-icon")){var h=this.liElements[this.activeStep].firstChild,d=0===this.activeStep?0:(h.offsetLeft-this.progressbar.offsetLeft+h.offsetWidth/2)/this.progressbar.offsetWidth*100;if(this.element.classList.contains("e-rtl")){var c=this.liElements[0].firstChild;d=(this.progressbar.offsetWidth-h.offsetLeft+Math.abs(c.offsetLeft+c.offsetWidth-this.stepperItemList.offsetWidth))/this.progressbar.offsetWidth*100,this.progressValue.style.setProperty("--progress-value",d+"%")}else this.progressValue.style.setProperty("--progress-value",d+"%")}else{for(var p=0,u=0,f=0;f<this.liElements.length;f++)p+=this.liElements[f].offsetWidth,f<=this.activeStep&&(f<this.activeStep?u+=this.liElements[f].offsetWidth:f===this.activeStep&&0!==f&&(u+=this.liElements[f].offsetWidth/2));var g=(u+(this.stepperItemList.offsetWidth-p)/(this.liElements.length-1)*this.activeStep)/this.stepperItemList.offsetWidth*100;this.progressValue.style.setProperty("--progress-value",g+"%")}else this.progressValue.style.setProperty("--progress-value",100/(this.liElements.length-1)*t+"%");else this.activeStep<0&&this.progressValue&&this.progressValue.style.setProperty("--progress-value","0%");a===this.activeStep&&this.activeStep!==this.liElements.length-1?l.classList.add(n):this.activeStep>0&&(a<this.activeStep||this.activeStep===this.liElements.length-1)?l.classList.add(r):l.classList.add(s),l.classList.contains(n)?sf.base.attributes(l,{tabindex:"0","aria-current":"true"}):sf.base.attributes(l,{tabindex:"-1","aria-current":"false"}),this.element.classList.contains("e-step-type-indicator")&&this.isDefaultStep&&(l.classList.contains(r)?(l.firstChild.classList.remove("e-icons","e-step-indicator"),l.firstChild.classList.add(e,"e-icons","e-check")):(l.classList.contains(n)||l.classList.contains(s))&&(l.firstChild.classList.remove(e,"e-icons","e-check"),l.firstChild.classList.add("e-icons","e-step-indicator")))}},a.prototype.openStepperTooltip=function(e,t){var i=this.tooltipContent[e];if(this.showTooltip&&i){var n=t.target.classList.contains("e-step-container")?t.target:t.target.closest(".e-step-container");this.element.querySelector(".e-stepper-tooltip").classList.contains("e-show-tooltip")||(this.tooltipTemplate?this.dotNetRef.invokeMethodAsync("TooltipHandler",!0,e):this.openTooltip(n,i))}},a.prototype.openTooltip=function(e,t){if(e){var i=this.element.querySelector(".e-stepper-tooltip");i.querySelector(".e-tip-content").innerHTML=t,e.appendChild(i),i.classList.add("e-show-tooltip")}},a.prototype.closeTooltip=function(){var e=this.element.querySelector(".e-stepper-tooltip");e&&e.classList.remove("e-show-tooltip"),this.dotNetRef.invokeMethodAsync("TooltipHandler",!1,0)},a.prototype.keyActionHandler=function(e){if(!this.readOnly)switch(e.key){case"ArrowUp":case"ArrowDown":this.element.classList.contains("e-vertical")&&this.handleNavigation("ArrowUp"!==e.key,e);break;case"ArrowLeft":case"ArrowRight":this.element.classList.contains("e-horizontal")&&this.handleNavigation(this.enableRtl?"ArrowLeft"===e.key:"ArrowRight"===e.key,e);break;case"Tab":case" ":case"Enter":case"Escape":this.handleNavigation(null,e);break;case"Home":case"End":this.handleNavigation(null,e,this.enableRtl)}},a.prototype.handleNavigation=function(e,t,n){this.isKeyNavFocus=!0,this.element.classList.add("e-steps-focus");var s=this.element.querySelector("."+o);s||(s=this.element.querySelector("."+i));var r=Array.prototype.slice.call(this.stepperItemList.children),a=r.indexOf(s);if("Tab"!==t.key&&"Escape"!==t.key||(r[parseInt(a.toString(),10)].classList.remove(o),this.element.classList.remove("e-steps-focus"))," "!==t.key&&"Enter"!==t.key&&"Tab"!==t.key){var l=a;for(a=e?a+1:a-1;a>=0&&a<r.length&&r[parseInt(a.toString(),10)].classList.contains("e-step-disabled");)a=e?a+1:a-1;a=a<0?0:a>r.length-1?r.length-1:a,r[parseInt(l.toString(),10)].classList.contains(o)&&r[parseInt(l.toString(),10)].classList.remove(o),"Home"!==t.key&&"End"!==t.key||(a="Home"===t.key?n?r.length-1:0:n?0:r.length-1),a>=0&&a<r.length&&r[parseInt(a.toString(),10)].classList.add(o)}else if(" "===t.key||"Enter"===t.key){if(this.linear){var h=this.activeStep-a;1===Math.abs(h)&&this.navigateToStep(a,!0,null,null,!0)}else this.navigateToStep(a,!0,null,null,!0);this.dotNetRef.invokeMethodAsync("UpdateActiveStep",a)}},a.prototype.updateLabelClass=function(e){var t=this.element.classList.value.match(/(e-label-[after|before|start|end|top|bottom]+)/g);t&&sf.base.removeClass([this.element],t),this.element.classList.add(e)},a.prototype.destroy=function(){this.unBindEvent()},a}();return{initialize:function(e){e.dataId&&(e.showLabelClass&&e.element.classList.add(e.showLabelClass),new a(e))},updateStepperProps:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);t.updateContext(e),t.getElements(),e.showLabelClass&&t.updateLabelClass(e.showLabelClass),t.navigateToStep(e.activeStep,!0,null,!0)}},updateDynamicStepperProps:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);t.updateContext(e),t.getElements(),e.showLabelClass&&t.updateLabelClass(e.showLabelClass),t.renderProgressBar(),t.navigateToStep(e.activeStep,!0,null,null,!0)}},updateStepperValue:function(e,t){window.sfBlazor.getCompInstance(e).navigateToStep(t,!0,null,null,!0)},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()}}}()},"./modules/sf-stock-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.StockChart=function(){"use strict";var e=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new i((function(t){t(e.value)})).then(r,a)}l((n=n.apply(e,t||[])).next())}))},t=function(e,t){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=function(){function e(e,t,i,n){window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.eventInterval=80,this.mouseMoveRef=null,this.mouseMoveThreshold=null,this.mouseLeaveRef=null,this.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus()},this.id=t,this.element=i,this.dotnetref=n,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.unWireEvents(this.id,this.dotnetref),this.wireEvents(this.id,this.dotnetref)},e.prototype.destroy=function(){this.unWireEvents(this.id,this.dotnetref)},e.prototype.unWireEvents=function(e,t){var i=document.getElementById(e);if(i){this.dotnetref=t,n.dotnetrefCollection=n.dotnetrefCollection.filter((function(t){return t.id!==e}));var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";i.removeEventListener("mousemove",this.mouseMoveRef),i.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(i,s,this.mouseLeaveRef),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,o,n.resizeBound)}},e.prototype.wireEvents=function(e,t){var i=document.getElementById(e);if(i){this.dotnetref=t,n.dotnetrefCollection.push({id:e,dotnetref:t});var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";this.mouseMoveRef=this.mouseMove.bind(this,t,e),this.mouseLeaveRef=this.mouseLeave.bind(this,t,e),i.addEventListener("mousemove",this.mouseMoveRef),i.addEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.add(i,s,this.mouseLeaveRef),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler),n.resizeBound=n.chartResize.bind(this,n.dotnetrefCollection);var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,o,n.resizeBound)}},e.prototype.getEventArgs=function(e,t){var i=e.changedTouches?e.changedTouches[0].clientX:e.clientX,n=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.setMouseXY(i,n,t);var s=e.touches,o=[];if(e.type.indexOf("touch")>-1)for(var r=0,a=s.length;r<a;r++)o.push({pageX:s[r].clientX,pageY:s[r].clientY,pointerId:e.pointerId||0});return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:o,pointerId:e.pointerId}},e.prototype.setMouseXY=function(e,t,i){var n=document.getElementById(i.replace("_stockChart_chart","")+"_svg").getBoundingClientRect(),s=document.getElementById(i).getBoundingClientRect();this.mouseY=t-s.top-Math.max(n.top-s.top,0),this.mouseX=e-s.left-Math.max(n.left-s.left,0)},e.prototype.mouseMove=function(e,t,i){if(null==this.mouseMoveThreshold||(new Date).getTime()-this.mouseMoveThreshold>this.eventInterval){this.mouseMoveThreshold=(new Date).getTime();var n=void 0,s=void 0,o=void 0;"touchmove"===i.type?(this.isTouch=!0,n=(o=i).changedTouches[0].clientX,s=o.changedTouches[0].clientY,o.cancelable&&i.preventDefault()):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,n=i.clientX,s=i.clientY),this.dotnetref=e,document.getElementById(t.replace("_stockChart_chart","")+"_svg")&&(this.setMouseXY(n,s,t),e.invokeMethodAsync("OnStockChartMouseMove",this.getEventArgs(i,t)))}return!1},e.prototype.mouseLeave=function(e,t,i){return this.dotnetref=e,e.invokeMethodAsync("OnStockChartMouseLeave",this.getEventArgs(i,t)),!1},e}(),n={initialize:function(e,t,n){new i(e,t.id,t,n).render()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},eventInterval:80,dotnetref:{},dotnetrefCollection:[],renderTooltip:function(e,t,i,n){var s=document.getElementById(t+"_svg"),o=!(s&&parseInt(s.getAttribute("opacity"),10)>0),r=JSON.parse(e),a=window.sfBlazor.getCompInstance(n);o&&!sf.base.isNullOrUndefined(a)?(a.tooltip=new sf.svgbase.Tooltip(r),a.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(a.tooltip)||(a.tooltip.location=new sf.svgbase.TooltipLocation(r.location.x,r.location.y),a.tooltip.content=r.content,a.tooltip.header=r.header,a.tooltip.offset=r.offset,a.tooltip.palette=r.palette,a.tooltip.shapes=r.shapes,a.tooltip.data=r.data,a.tooltip.template=r.template,a.tooltip.textStyle.color=r.textStyle.color||a.tooltip.textStyle.color,a.tooltip.textStyle.fontFamily=r.textStyle.fontFamily||a.tooltip.textStyle.fontFamily,a.tooltip.textStyle.fontStyle=r.textStyle.fontStyle||a.tooltip.textStyle.fontStyle,a.tooltip.textStyle.fontWeight=r.textStyle.fontWeight||a.tooltip.textStyle.fontWeight,a.tooltip.textStyle.opacity=r.textStyle.opacity||a.tooltip.textStyle.opacity,a.tooltip.textStyle.size=r.textStyle.size||a.tooltip.textStyle.size,a.tooltip.isNegative=r.isNegative,a.tooltip.clipBounds=new sf.svgbase.TooltipLocation(r.clipBounds.x,r.clipBounds.y),a.tooltip.arrowPadding=r.arrowPadding,a.tooltip.dataBind())},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);if(!(sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip))){var i=document.getElementById(t.tooltip.element.id+"_svg");i&&"0"===i.getAttribute("opacity")||t.tooltip.fadeOut()}},getParentElementBoundsById:function(e){var t=document.getElementById(e);if(t&&t.parentElement){var i=t.parentElement.style.width;t.parentElement.style.width="100%";var n=t.parentElement.getBoundingClientRect(),s=window.getComputedStyle(t.parentElement),o=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),r={width:Math.max(0,n.width-o),height:t.clientHeight||t.offsetHeight,left:n.left,top:n.top,right:n.right,bottom:n.bottom};return t.parentElement.style.width=i,r}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:t.clientWidth||t.offsetWidth,height:t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getBrowserDeviceInfo:function(){return{browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer,isDevice:sf.base.Browser.isDevice,isTouch:sf.base.Browser.isTouch,isIos:sf.base.Browser.isIos||sf.base.Browser.isIos7}},setAttribute:function(e,t,i){var n=document.getElementById(e);n&&n.setAttribute(t,i)},createTooltip:function(e,t,i,n,s){var o=document.getElementById(e),r="top:"+i.toString()+"px;left:"+n.toString()+"px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:"+s+";border-radius:2px; z-index:1";o?(o.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),o.setAttribute("styles",r)):(o=sf.base.createElement("div",{id:e,innerHTML:"&nbsp;"+t+"&nbsp;",styles:r}),document.body.appendChild(o))},removeElement:function(e){var t=this.getElement(e);t&&sf.base.remove(t)},onAfterStockChartPanning:function(e,t){""!==e&&window.sfBlazor.getCompInstance(e).fadeOutTooltip(!0);document.getElementById(t+"_stockChart_chart").setAttribute("cursor","auto")},exportToImage:function(e,t,i,n){var s=document.getElementById(i+"_stockChart_Title"),o=document.getElementById(i+"_svg"),r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.id="stockChart_exportElement",o.setAttribute("y",s.getAttribute("height")),r.setAttribute("height",s.clientHeight+o.clientHeight+"px"),r.setAttribute("width",Math.max(s.clientWidth,o.clientWidth)+"px"),r.appendChild(s.cloneNode(!0)),r.appendChild(o.cloneNode(!0)),document.body.appendChild(r);var a=window.sfExport.exportToImage(e,t,r.id,n);return document.body.removeChild(r),a},getTooltipPosition:function(i){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return i?[4,i.invokeMethodAsync("GetStockChartTooltipPosition")]:[3,2];case 1:return[2,e.sent()];case 2:return[2,null]}}))}))},resizeBound:{},resize:{},chartResize:function(e,t){var i=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var n=e.length,s=0;s<n;s++)e[s].dotnetref.invokeMethodAsync("OnStockChartResize",t);clearTimeout(i.resize)}),500),!1}};return n}()},"./modules/sf-svg-export.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return t};var e,t={},s=Object.prototype,o=s.hasOwnProperty,r=Object.defineProperty||function(e,t,i){e[t]=i.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",h=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function p(e,t,i,n){var s=t&&t.prototype instanceof b?t:b,o=Object.create(s.prototype),a=new j(n||[]);return r(o,"_invoke",{value:E(e,i,a)}),o}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var f="suspendedStart",g="executing",m="completed",v={};function b(){}function y(){}function C(){}var w={};c(w,l,(function(){return this}));var M=Object.getPrototypeOf,S=M&&M(M(A([])));S&&S!==s&&o.call(S,l)&&(w=S);var x=C.prototype=b.prototype=Object.create(w);function N(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(s,r,a,l){var h=u(e[s],e,r);if("throw"!==h.type){var d=h.arg,c=d.value;return c&&"object"==i(c)&&o.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(c).then((function(e){d.value=e,a(d)}),(function(e){return n("throw",e,a,l)}))}l(h.arg)}var s;r(this,"_invoke",{value:function(e,i){function o(){return new t((function(t,s){n(e,i,t,s)}))}return s=s?s.then(o,o):o()}})}function E(t,i,n){var s=f;return function(o,r){if(s===g)throw new Error("Generator is already running");if(s===m){if("throw"===o)throw r;return{value:e,done:!0}}for(n.method=o,n.arg=r;;){var a=n.delegate;if(a){var l=I(a,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(s===f)throw s=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);s=g;var h=u(t,i,n);if("normal"===h.type){if(s=n.done?m:"suspendedYield",h.arg===v)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(s=m,n.method="throw",n.arg=h.arg)}}}function I(t,i){var n=i.method,s=t.iterator[n];if(s===e)return i.delegate=null,"throw"===n&&t.iterator.return&&(i.method="return",i.arg=e,I(t,i),"throw"===i.method)||"return"!==n&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=u(s,t.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,v;var r=o.arg;return r?r.done?(i[t.resultName]=r.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,v):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,r=function i(){for(;++s<t.length;)if(o.call(t,s))return i.value=t[s],i.done=!1,i;return i.value=e,i.done=!0,i};return r.next=r}}throw new TypeError(i(t)+" is not iterable")}return y.prototype=C,r(x,"constructor",{value:C,configurable:!0}),r(C,"constructor",{value:y,configurable:!0}),y.displayName=c(C,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c(e,d,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},N(O.prototype),c(O.prototype,h,(function(){return this})),t.AsyncIterator=O,t.async=function(e,i,n,s,o){void 0===o&&(o=Promise);var r=new O(p(e,i,n,s),o);return t.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},N(x),c(x,d,"Generator"),c(x,l,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(n,s){return a.type="throw",a.arg=t,i.next=n,s&&(i.method="next",i.arg=e),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var l=o.call(r,"catchLoc"),h=o.call(r,"finallyLoc");if(l&&h){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=e,r.arg=t,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),D(i),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;D(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:A(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function s(e,t,i,n,s,o,r){try{var a=e[o](r),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(n,s)}function o(e){return function(){var t=this,i=arguments;return new Promise((function(n,o){var r=e.apply(t,i);function a(e){s(r,n,o,a,l,"next",e)}function l(e){s(r,n,o,a,l,"throw",e)}a(void 0)}))}}var r,a,l;window.sfExport={exportToImage:(l=o(n().mark((function e(t,i,s,r){var a,l,h,d=arguments;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>4&&void 0!==d[4]&&d[4],l=d.length>5&&void 0!==d[5]?d[5]:"Material",e.next=4,window.sfExport.imageExport(t,i,s,r,a,l);case 4:if(!((h=e.sent)instanceof Promise)){e.next=10;break}return e.next=8,h.then(function(){var e=o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:e.next=11;break;case 10:return e.abrupt("return",h);case 11:case"end":return e.stop()}}),e)}))),function(e,t,i,n){return l.apply(this,arguments)}),validateExport:(a=o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Promise)){e.next=3;break}return e.next=3,t.then(function(){var e=o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),imageExport:(r=o(n().mark((function e(t,i,s,o,r,a){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var l=document.getElementById(s);if(null!=l&&r){var h=l.cloneNode(!0),d=h;if(null!=d&&null!=(d=d.children[0])){var c=d.getAttribute("fill");"Tailwind"!==a&&"Bootstrap5"!==a&&"Fluent"!==a&&"Material3"!==a||"rgba(255,255,255, 0.0)"!==c&&"transparent"!==c?"TailwindDark"!==a&&"Bootstrap5Dark"!==a&&"FluentDark"!==a&&"Material3Dark"!==a||"rgba(255,255,255, 0.0)"!==c&&"transparent"!==c||d.setAttribute("fill","rgba(0, 0, 0, 1)"):d.setAttribute("fill","rgba(255,255,255, 1)")}l=h}var p='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+l.outerHTML+"</svg>",u=window.URL.createObjectURL(new Blob("SVG"===t?[p]:[(new XMLSerializer).serializeToString(l)],{type:"image/svg+xml"}));if("SVG"===t)if(o)window.sfExport.triggerDownload(t,i,u),e(null);else{var f="data:image/svg+xml;base64,"+window.btoa(p);e(f)}else{var g=document.createElement("canvas");g.height=l&&0==l.clientHeight?parseFloat(l.getAttribute("height").replace("px","")):l.clientHeight,g.width=l&&0==l.clientWidth?parseFloat(l.getAttribute("width").replace("px","")):l.clientWidth;var m=g.getContext("2d"),v=new Image;v.onload=function(){if(m.drawImage(v,0,0),window.URL.revokeObjectURL(u),o)window.sfExport.triggerDownload(t,i,g.toDataURL("image/png").replace("image/png","image/octet-stream")),e(null);else{var n="JPEG"===t?g.toDataURL("image/jpeg"):"PNG"===t?g.toDataURL("image/png"):"";e(n)}},v.src=u}})));case 1:case"end":return e.stop()}}),e)}))),function(e,t,i,n,s,o){return r.apply(this,arguments)}),triggerDownload:function(e,t,i){var n=document.createElement("a");n.download=t+"."+e.toLocaleLowerCase(),n.href=i,n.click()},downloadPdf:function(e,t){for(var i=atob(e),n=[],s=0;s<i.length;s+=512){for(var o=i.slice(s,s+512),r=new Array(o.length),a=0;a<o.length;a++)r[a]=o.charCodeAt(a);var l=new Uint8Array(r);n.push(l)}var h=new Blob(n,{type:"application/pdf"}),d=(URL||webkitURL).createObjectURL(h);sfExport.triggerDownload("PDF",t,d)},print:function(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Material",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i="string"==typeof e?document.getElementById(e):e;var a=n?document.getElementById(e+"_selector"):null,l=5;if(a&&(i.style.height=i.clientHeight-(a.clientHeight+l)+"px",document.getElementById(e+"_stock_border").style.height=i.style.height,document.getElementById(e+"_svg").style.transform="translateY(-"+(a.clientHeight+l)+"px)",a.style.display="none"),s){var h=i.cloneNode(!0),d=r?h.getElementsByTagName("svg")[1]:h.getElementsByTagName("svg")[0];if(null!=d&&null!=(d=d.children[0])){var c=d.getAttribute("fill");"Tailwind"!==o&&"Bootstrap5"!==o&&"Fluent"!==o&&"Material3"!==o||"rgba(255,255,255, 0.0)"!==c&&"transparent"!==c?"TailwindDark"!==o&&"Bootstrap5Dark"!==o&&"FluentDark"!==o&&"Material3Dark"!==o||"rgba(255,255,255, 0.0)"!==c&&"transparent"!==c||d.setAttribute("fill","rgba(0, 0, 0, 1)"):d.setAttribute("fill","rgba(255,255,255, 1)")}i=h}(t=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no")).moveTo(0,0),t.resizeTo(screen.availWidth,screen.availHeight);var p=document.createElement("div");p.appendChild(i.cloneNode(!0));var u=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),f=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style")),g="";if(f.length)for(var m=0,v=f.length;m<v;m++)u.push(f[m]);var b=0;for(v=u.length;b<v;b++)g+=u[b].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+g+"</head><body>"+p.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var y=setInterval((function(){t.ready&&(t.print(),t.close(),clearInterval(y))}),500);a&&(a.style.display="",i.style.height=i.clientHeight+(a.clientHeight+l)+"px",document.getElementById(e+"_stock_border").style.height=i.style.height,document.getElementById(e+"_svg").style.transform="")},exportToExcel:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);var o=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}},"./modules/sf-tab.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Tab=function(){"use strict";var e="e-tab-header",t="e-tab-wrap",i="e-toolbar-items",n="e-toolbar-item",s="e-toolbar-popup",o=function(){function o(e,t,i,n){this.show={},this.hide={},this.draggableItems=[{}],this.resizeContext=this.refreshActElePosition.bind(this),window.sfBlazor=window.sfBlazor,this.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return o.prototype.render=function(){var e=sf.base.closest(this.element,".e-content");this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwiped=!1,sf.base.isNullOrUndefined(e)||(e.parentElement.classList.add("e-nested"),this.isNested=!0);var t=sf.base.Browser.info.name,i="msie"===t?"e-ie":"edge"===t?"e-edge":"safari"===t?"e-safari":"";sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.options.width),height:sf.base.formatUnit(this.options.height)}),sf.base.attributes(this.element,{"aria-disabled":"false"}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig(),this.tabId=this.element.id.length>0?"-"+this.element.id:sf.base.getRandomId(),this.wireEvents(),this.initRender=!1},o.prototype.serverItemsChanged=function(e){if(this.enableAnimation=!1,this.setActive(this.options.selectedItem,e),"Dynamic"!==this.options.loadOn&&!sf.base.isNullOrUndefined(this.cntEle)){var t=[].slice.call(this.cntEle.children),i="e-content"+this.tabId+"_"+this.options.selectedItem;t.forEach((function(e){e.classList.contains("e-active")&&e.id!==i&&e.classList.remove("e-active"),e.id===i&&e.classList.add("e-active")})),this.prevIndex=this.options.selectedItem,this.triggerAnimation("e-item"+this.tabId+"_"+this.options.selectedItem,!1)}"Disable"!==sf.base.animationMode&&(this.enableAnimation=!0)},o.prototype.headerReady=function(){if(this.initRender=!0,this.hdrEle=this.getTabHeader(),this.setOrientation(this.options.headerPlacement,this.hdrEle),this.tbItems=sf.base.select("."+e+" ."+i,this.element),sf.base.isNullOrUndefined(this.tbItems)||sf.base.rippleEffect(this.tbItems,{selector:".e-tab-wrap"}),sf.base.selectAll("."+n,this.element).length>0){this.bdrLine=sf.base.select(".e-indicator.e-ignore",this.element);var t=sf.base.select("."+this.scrCntClass,this.tbItems);sf.base.isNullOrUndefined(t)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstElementChild):t.insertBefore(this.bdrLine,t.firstElementChild),this.select(this.options.selectedItem)}if(this.cntEle=sf.base.select(".e-tab > .e-content",this.element),sf.base.isNullOrUndefined(this.cntEle)||(sf.base.isNullOrUndefined(this.touchModule)&&(this.touchModule=new sf.base.Touch(this.cntEle,{swipe:this.swipeHandler.bind(this)})),"auto"===this.options.height||this.isVertical()||(this.cntEle.style.height="calc(100% - "+this.hdrEle.offsetHeight+"px)")),"Demand"===this.options.loadOn){var s=this.setActiveContent();this.triggerAnimation(s,!1)}this.initRender=!1},o.prototype.setActiveContent=function(){var e="e-item"+this.tabId+"_"+this.options.selectedItem,t=this.getTrgContent(this.cntEle,this.extIndex(e));return sf.base.isNullOrUndefined(t)||t.classList.add("e-active"),e},o.prototype.removeActiveClass=function(){var e=this.getTabHeader();if(e){var t=sf.base.selectAll("."+n+".e-active",e);sf.base.removeClass(t,"e-active"),[].slice.call(t).forEach((function(e){return e.firstElementChild.setAttribute("aria-selected","false")}))}},o.prototype.checkPopupOverflow=function(e){this.tbPop=sf.base.select(".e-toolbar-pop",this.element);var t=sf.base.select(".e-hor-nav",this.element),n=sf.base.select("."+i,this.element),o=n.lastChild;return(!this.isVertical()&&(this.options.enableRtl&&t.offsetLeft+t.offsetWidth>n.offsetLeft||!this.options.enableRtl&&t.offsetLeft<n.offsetWidth)||this.isVertical()&&t.offsetTop<o.offsetTop+o.offsetHeight)&&(e.classList.add(s),this.tbPop.insertBefore(e,sf.base.selectAll("."+s,this.tbPop)[0])),!0},o.prototype.popupHandler=function(e){var o=e.querySelector(".e-ripple-element");sf.base.isNullOrUndefined(o)||(o.outerHTML="",e.querySelector("."+t).classList.remove("e-ripple")),this.tbItem=sf.base.selectAll("."+i+" ."+n,this.hdrEle);var r=this.tbItem[this.tbItem.length-1];if(0!==this.tbItem.length){if(e.classList.remove(s),e.removeAttribute("style"),this.tbItems.appendChild(e),this.checkPopupOverflow(r)){var a=this.tbItems.lastChild.previousElementSibling;this.checkPopupOverflow(a)}this.isPopup=!0}return sf.base.selectAll("."+n,this.tbItems).length-1},o.prototype.previousContentAnimation=function(e,t){return this.isPopup||e<=t?"SlideLeftIn"===this.options.animation.previous.effect?{name:"SlideLeftOut",duration:this.options.animation.previous.duration,timingFunction:this.options.animation.previous.easing}:null:"SlideRightIn"===this.options.animation.next.effect?{name:"SlideRightOut",duration:this.options.animation.next.duration,timingFunction:this.options.animation.next.easing}:null},o.prototype.triggerPreviousAnimation=function(e,t){var i=this.previousContentAnimation(t,this.options.selectedItem);sf.base.isNullOrUndefined(i)?e.classList.remove("e-active"):(i.begin=function(){sf.base.setStyleAttribute(e,{position:"absolute"}),sf.base.addClass([e],["e-progress","e-view"])},i.end=function(){e.style.display="none",sf.base.removeClass([e],["e-active","e-progress","e-view"]),sf.base.setStyleAttribute(e,{display:"",position:""}),0===e.childNodes.length&&sf.base.detach(e)},new sf.base.Animation(i).animate(e))},o.prototype.triggerAnimation=function(e,t){var i,n,s=this,o=this.prevIndex;if("Dynamic"!==this.options.loadOn){[].slice.call(this.element.querySelector(".e-content").children).forEach((function(e){e.id===s.prevActiveEle&&(i=e)}));var r=this.tbItem[o];if(n=this.getTrgContent(this.cntEle,this.extIndex(e)),sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(r)){var a=this.extIndex(r.id);i=this.getTrgContent(this.cntEle,a)}}else n=this.cntEle.firstElementChild;if(sf.base.isNullOrUndefined(n)||(this.prevActiveEle=n.id),this.initRender||!1===t||this.options.animation==={}||sf.base.isNullOrUndefined(this.options.animation))i&&i!==n&&i.classList.remove("e-active");else{var l,h=sf.base.select(".e-content",this.element);if(this.prevIndex>this.options.selectedItem&&!this.isPopup){var d="None"===this.options.animation.previous.effect&&"Enable"===sf.base.animationMode?"SlideLeftIn":this.options.animation.previous.effect;l={name:"None"===d?"":"SlideLeftIn"!==d?d:"SlideLeftIn",duration:this.options.animation.previous.duration,timingFunction:this.options.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.options.selectedItem||this.prevIndex===this.options.selectedItem){var c="None"===this.options.animation.next.effect&&"Enable"===sf.base.animationMode?"SlideRightIn":this.options.animation.next.effect;l={name:"None"===c?"":"SlideRightIn"!==c?c:"SlideRightIn",duration:this.options.animation.next.duration,timingFunction:this.options.animation.next.easing}}l.progress=function(){h.classList.add("e-progress"),s.setActiveBorder()},l.end=function(){h.classList.remove("e-progress"),n.classList.add("e-active")},this.initRender||sf.base.isNullOrUndefined(i)||this.triggerPreviousAnimation(i,o),this.isPopup=!1,""===l.name?n.classList.add("e-active"):new sf.base.Animation(l).animate(n)}},o.prototype.keyPressed=function(t){var i=sf.base.closest(t,"."+e+" ."+n),s=this.getEleIndex(i);!sf.base.isNullOrUndefined(this.popEle)&&t.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):t.classList.contains("e-scroll-nav")?t.click():sf.base.isNullOrUndefined(i)||!1!==i.classList.contains("e-active")||(this.select(s,!0),sf.base.isNullOrUndefined(this.popEle)||this.popObj.hide(this.hide))},o.prototype.getTabHeader=function(){var t=[].slice.call(this.element.children).filter((function(t){return t.classList.contains(e)}));if(t.length>0)return t[0];var i=[].slice.call(this.element.children).filter((function(e){return!e.classList.contains("blazor-template")}))[0];return i?[].slice.call(i.children).filter((function(t){return t.classList.contains(e)}))[0]:void 0},o.prototype.getEleIndex=function(e){return Array.prototype.indexOf.call(sf.base.selectAll("."+n,this.getTabHeader()),e)},o.prototype.extIndex=function(e){return e.replace("e-item"+this.tabId+"_","")},o.prototype.getTrgContent=function(e,t){return this.element.classList.contains("e-nested")?sf.base.select(".e-nested> .e-content > #e-content"+this.tabId+"_"+t,this.element):this.findEle(e.children,"e-content"+this.tabId+"_"+t)},o.prototype.findEle=function(e,t){for(var i,n=0;n<e.length;n++)if(e[n].id===t){i=e[n];break}return i},o.prototype.isVertical=function(){var e="Left"===this.options.headerPlacement||"Right"===this.options.headerPlacement;return this.scrCntClass=e?"e-vscroll-content":"e-hscroll-content",e},o.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},o.prototype.focusItem=function(e,t){void 0===t&&(t=!1);var i=sf.base.select(" #e-item"+this.tabId+"_"+this.options.selectedItem,this.hdrEle);sf.base.isNullOrUndefined(i)||t||i.firstElementChild.focus({preventScroll:e})},o.prototype.serverChangeOrientation=function(e,t,i,n){if(this.setOrientation(e,this.hdrEle),sf.base.removeClass([this.element],["e-vertical-tab","e-vertical-left","e-vertical-right","e-horizontal-bottom"]),n&&this.changeToolbarOrientation(t,i),"Bottom"===this.options.headerPlacement&&sf.base.addClass([this.element],"e-horizontal-bottom"),this.isVertical()){var s="Left"===this.options.headerPlacement?"e-vertical-left":"e-vertical-right";this.element.classList.contains("e-nested")?sf.base.addClass([this.hdrEle],["e-vertical-tab",s]):sf.base.addClass([this.element],["e-vertical-tab",s])}this.setActiveBorder(),this.focusItem(!0,!0)},o.prototype.changeToolbarOrientation=function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.width=t?"auto":"100%",i.options.height=t?"100%":"auto",i.options.isVertical=t,i.changeOrientation()),this.updatePopAnimationConfig()},o.prototype.setOrientation=function(e,t){var i=Array.prototype.indexOf.call(this.element.children,t),n=Array.prototype.indexOf.call(this.element.children,this.element.querySelector(".e-content"));"Bottom"===e&&n>i?this.element.appendChild(t):"Bottom"!==e&&(sf.base.removeClass([t],["e-horizontal-bottom"]),this.element.insertBefore(t,sf.base.select(".e-content",this.element)))},o.prototype.setCssClass=function(e,t,i){""!==t&&(i?sf.base.addClass([e],t.split(" ")):sf.base.removeClass([e],t.split(" ")))},o.prototype.setActiveBorder=function(){var e=this.getTabHeader(),t=sf.base.select("."+n+".e-active",e);if(!sf.base.isNullOrUndefined(t)){this.options.reorderActiveTab?e.classList.remove("e-reorder-active-item"):(t.classList.contains(s)&&!this.bdrLine.classList.contains("e-hidden")&&this.bdrLine.classList.add("e-hidden"),e.classList.contains("e-reorder-active-item")||e.classList.add("e-reorder-active-item")),t.classList.contains(s)&&this.options.reorderActiveTab&&this.popupHandler(t);var o=sf.base.closest(t,".e-tab");if(this.element===o){this.tbItems=sf.base.select("."+i,e);var r=sf.base.select(".e-indicator",e),a=sf.base.select("."+i+" ."+this.scrCntClass,e);if(this.isVertical()){sf.base.setStyleAttribute(r,{left:"",right:""}),0!==(sf.base.isNullOrUndefined(a)?this.tbItems.offsetHeight:a.offsetHeight)?sf.base.setStyleAttribute(r,{top:t.offsetTop+"px",height:t.offsetHeight+"px"}):sf.base.setStyleAttribute(r,{top:0,height:0})}else{if("MultiRow"===this.options.overflowMode){var l="Bottom"===this.options.headerPlacement?t.offsetTop:t.offsetHeight+t.offsetTop;sf.base.setStyleAttribute(r,{top:l+"px",height:""})}else sf.base.setStyleAttribute(r,{top:"",height:""});var h=sf.base.isNullOrUndefined(a)?this.tbItems.offsetWidth:a.offsetWidth;0!==h?sf.base.setStyleAttribute(r,{left:t.offsetLeft+"px",right:h-(t.offsetLeft+t.offsetWidth)+"px"}):sf.base.setStyleAttribute(r,{left:"auto",right:"auto"})}sf.base.isNullOrUndefined(this.bdrLine)||t.classList.contains(s)||this.bdrLine.classList.remove("e-hidden")}}},o.prototype.setActive=function(e,t){void 0===t&&(t=!1),this.tbItem=sf.base.selectAll("."+n,this.getTabHeader()),sf.base.isNullOrUndefined(this.hdrEle)&&(this.hdrEle=this.getTabHeader());var i=this.hdrEle.querySelector("."+n+'[data-index="'+e+'"]');if(!(!i||e<0||isNaN(e)||0===this.tbItem.length))if(this.options.selectedItem=e,i.classList.contains("e-active"))this.setActiveBorder();else{var s=this.tbItem[this.prevIndex];sf.base.isNullOrUndefined(s)||s.firstElementChild.removeAttribute("aria-controls"),sf.base.attributes(i.firstElementChild,{"aria-controls":"e-content"+this.tabId+"_"+e});var o=i.id;this.removeActiveClass(),i.classList.add("e-active"),i.firstElementChild.setAttribute("aria-selected","true");var r=Number(this.extIndex(o));if(sf.base.isNullOrUndefined(this.prevActiveEle)&&(this.prevActiveEle="e-content"+this.tabId+"_"+r),"Init"===this.options.loadOn){this.cntEle=sf.base.select(".e-tab > .e-content",this.element);var a=this.getTrgContent(this.cntEle,this.extIndex(o));sf.base.isNullOrUndefined(a)||a.classList.add("e-active"),this.triggerAnimation(o,this.enableAnimation)}this.setActiveBorder(),this.refreshItemVisibility(i),this.initRender||t||i.firstElementChild.focus()}},o.prototype.contentReady=function(){var e=this.setActiveContent();this.triggerAnimation(e,this.enableAnimation)},o.prototype.setRTL=function(e){this.setCssClass(this.element,"e-rtl",e),this.refreshActiveBorder()},o.prototype.refreshActiveBorder=function(){sf.base.isNullOrUndefined(this.bdrLine)||this.bdrLine.classList.add("e-hidden"),this.setActiveBorder()},o.prototype.setDragAndDrop=function(e){e?this.bindDraggable():this.draggableItems&&this.draggableItems.forEach((function(e){e&&0!==Object.keys(e).length&&e.destroy()}))},o.prototype.showPopup=function(e){var t=sf.base.select(".e-popup.e-toolbar-pop",this.hdrEle);if(t&&t.classList.contains("e-popup-close")){var i=t&&t.ej2_instances[0];i.position.X="Left"===this.options.headerPlacement?"left":"right",i.dataBind(),i.show(e)}},o.prototype.initializeDrag=function(i){var s=this;this.options.dragArea=sf.base.isNullOrUndefined(this.options.dragArea)?"#"+this.element.id+" ."+e:this.options.dragArea;var o=new sf.base.Draggable(i,{dragArea:this.options.dragArea,dragTarget:"."+n,clone:!0,distance:5,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:function(i){var o,r=s.getEleIndex(s.dragItem);if(sf.base.isNullOrUndefined(i.target.closest(".e-tab"))||i.target.closest(".e-tab").isEqualNode(s.element)||s.options.dragArea==="."+e){if(i.target.closest(s.options.dragArea)||"Popup"===s.options.overflowMode?(document.body.style.cursor="",s.dragItem.querySelector("."+t).style.visibility="hidden",s.cloneElement.classList.contains("e-hidden")&&sf.base.removeClass([s.cloneElement],"e-hidden")):(document.body.style.cursor="not-allowed",sf.base.addClass([s.cloneElement],"e-hidden"),s.dragItem.classList.contains("e-hidden")&&sf.base.removeClass([s.dragItem],"e-hidden"),s.dragItem.querySelector("."+t).style.visibility="visible"),"Scrollable"===s.options.overflowMode&&!sf.base.isNullOrUndefined(s.element.querySelector(".e-hscroll"))){var a=s.element.querySelector(".e-scroll-right-nav"),l=s.element.querySelector(".e-scroll-left-nav"),h=s.element.querySelector(".e-hscroll-bar");!sf.base.isNullOrUndefined(a)&&Math.abs(a.offsetWidth/2+a.offsetLeft)>s.cloneElement.offsetLeft+s.cloneElement.offsetWidth&&(h.scrollLeft-=10),!sf.base.isNullOrUndefined(l)&&Math.abs(l.offsetLeft+l.offsetWidth-s.cloneElement.offsetLeft)>l.offsetWidth/2&&(h.scrollLeft+=10)}s.cloneElement.style.pointerEvents="none";var d=s.cloneElement.getBoundingClientRect().left,c=s.cloneElement.getBoundingClientRect().top,p=document.elementFromPoint(d,c),u=sf.base.closest(p,"."+e+" ."+n),f=0;"Scrollable"!==s.options.overflowMode||sf.base.isNullOrUndefined(s.element.querySelector(".e-hscroll"))||(f=s.element.querySelector(".e-hscroll-content").offsetWidth),null!=u&&!u.isSameNode(s.dragItem)&&u.closest(".e-tab").isSameNode(s.dragItem.closest(".e-tab"))&&((o=s.getEleIndex(u))<r&&Math.abs(u.offsetLeft+u.offsetWidth-s.cloneElement.offsetLeft)>u.offsetWidth/2&&s.dragAction(u,r,o),o>r&&Math.abs(u.offsetWidth/2)+u.offsetLeft-f<s.cloneElement.offsetLeft+s.cloneElement.offsetWidth&&s.dragAction(u,r,o)),s.droppedIndex=s.getEleIndex(s.dragItem)}},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(o)},o.prototype.helper=function(e){return e.element&&(this.cloneElement=e.element.cloneNode(!0),sf.base.addClass([this.cloneElement],["e-tab-clone-element","e-tab"]),sf.base.removeClass([this.cloneElement.querySelector("."+t)],"e-ripple"),sf.base.isNullOrUndefined(this.cloneElement.querySelector(".e-ripple-element"))||sf.base.remove(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement},o.prototype.itemDragStart=function(e){var i=this;this.dragItem=e.element,this.dragStartIndex=this.getEleIndex(this.dragItem);this.element.querySelector(".e-toolbar");this.dotNetRef.invokeMethodAsync("OnDragStart",this.dragStartIndex).then((function(n){n?sf.base.detach(i.cloneElement):(i.removeActiveClass(),sf.base.addClass([i.tbItems.querySelector(".e-indicator")],"e-hidden"),i.dragItem.querySelector("."+t).style.visibility="hidden",e.bindEvents(sf.base.getElement(e.dragElement)))}))},o.prototype.dragAction=function(e,t,i){if("MultiRow"===this.options.overflowMode&&e.parentNode.insertBefore(this.dragItem,e.nextElementSibling),t>i)if(this.dragItem.parentElement.isSameNode(e.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,e);else if("Extended"===this.options.overflowMode)if(e.isSameNode(e.parentElement.lastChild)){var n=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),n.insertBefore(e.parentElement.lastChild,n.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e);else{var s=e.parentElement.lastChild;if(e.isSameNode(s)){n=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),n.insertBefore(s,n.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)}t<i&&(this.dragItem.parentElement.isSameNode(e.parentElement)?this.dragItem.parentNode.insertBefore(e,this.dragItem):"Extended"===this.options.overflowMode?(this.dragItem.parentElement.appendChild(e.parentElement.firstElementChild),e.parentNode.insertBefore(this.dragItem,e.nextSibling)):(this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)))},o.prototype.itemDragStop=function(e){sf.base.detach(this.cloneElement);var i=this.element.querySelector(".e-toolbar");this.dragItem.querySelector("."+t).style.visibility="visible",sf.base.addClass([i],"e-drag-action"),document.body.style.cursor="";var n=this.getXYValue(e.event,"X"),s=this.getXYValue(e.event,"Y");this.dotNetRef.invokeMethodAsync("Dragged",this.droppedIndex,this.dragStartIndex,n,s)},o.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;return i="X"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY,Math.ceil(i)},o.prototype.bindDraggable=function(){var t=this;this.options.allowDragAndDrop&&this.element.querySelectorAll("."+e+" ."+n).forEach((function(i){sf.base.isNullOrUndefined(t.options.dragArea)&&(t.options.dragArea="#"+t.element.id+" ."+e),i.classList.contains("e-draggable")||t.initializeDrag(i)}))},o.prototype.wireEvents=function(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),sf.base.EventHandler.add(this.element,"keydown",this.spaceKeyDown,this),sf.base.isNullOrUndefined(this.cntEle)||(this.touchModule=new sf.base.Touch(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},o.prototype.unWireEvents=function(){this.keyModule.destroy(),this.tabKeyModule.destroy(),sf.base.isNullOrUndefined(this.cntEle)||this.touchModule.destroy(),window.removeEventListener("resize",this.resizeContext),sf.base.EventHandler.remove(this.element,"keydown",this.spaceKeyDown),sf.base.removeClass([this.element],["e-rtl","e-focused"])},o.prototype.swipeHandler=function(e){if(!(e.velocity<3&&sf.base.isNullOrUndefined(e.originalEvent.changedTouches))){this.isNested&&this.element.setAttribute("data-swipe","true");var t=this.element.querySelector('[data-swipe="true"]');if(t)t.removeAttribute("data-swipe");else{if(this.isSwiped=!0,"Right"===e.swipeDirection&&0!==this.options.selectedItem){for(var i=this.options.selectedItem-1;i>=0;i--)if(!this.tbItem[i].classList.contains("e-hidden")&&!this.tbItem[i].classList.contains("e-disable")){this.select(i,!0);break}}else if("Left"===e.swipeDirection&&this.options.selectedItem!==sf.base.selectAll("."+n,this.element).length-1)for(var s=this.options.selectedItem+1;s<this.tbItem.length;s++)if(!this.tbItem[s].classList.contains("e-hidden")&&!this.tbItem[s].classList.contains("e-disable")){this.select(s,!0);break}this.isSwiped=!1}}},o.prototype.spaceKeyDown=function(t){if(32===t.keyCode&&32===t.which||35===t.keyCode&&35===t.which){var i=sf.base.closest(t.target,"."+e);sf.base.isNullOrUndefined(i)||t.preventDefault()}},o.prototype.keyHandler=function(e){if(!this.element.classList.contains("e-disable")){this.element.classList.add("e-focused");var i,s,o=e.target,r=this.getTabHeader(),a=sf.base.select(".e-active",r);switch(this.popEle=sf.base.select(".e-toolbar-pop",r),sf.base.isNullOrUndefined(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]),e.action){case"space":case"enter":if(o.parentElement.classList.contains("e-disable"))return;if("enter"===e.action&&o.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(o);break;case"tab":case"shiftTab":o.classList.contains(t)&&!1===sf.base.closest(o,"."+n).classList.contains("e-active")&&o.setAttribute("tabindex",o.getAttribute("data-tabindex")),this.popObj&&sf.base.isVisible(this.popObj.element)&&this.popObj.hide(this.hide),sf.base.isNullOrUndefined(a)||"-1"!==a.children.item(0).getAttribute("tabindex")||a.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":i=sf.base.closest(document.activeElement,"."+n),sf.base.isNullOrUndefined(i)||this.refreshItemVisibility(i);break;case"openPopup":e.preventDefault(),!sf.base.isNullOrUndefined(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(s=sf.base.closest(o,"."+n),!0===this.options.showCloseButton&&!sf.base.isNullOrUndefined(s)){if(-1===this.getEleIndex(s))return;var l=s.nextElementSibling;!sf.base.isNullOrUndefined(l)&&l.classList.contains(n)&&l.firstElementChild.focus(),this.dotNetRef.invokeMethodAsync("RemoveTab",parseInt(s.getAttribute("data-index"),10))}this.setActiveBorder()}}},o.prototype.refreshActElePosition=function(){var e=sf.base.select("."+n+"."+s+".e-active",this.element);!sf.base.isNullOrUndefined(e)&&this.options.reorderActiveTab&&this.select(this.getEleIndex(e)),this.refreshActiveBorder()},o.prototype.refreshItemVisibility=function(e){var t=sf.base.select("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!sf.base.isNullOrUndefined(t)){var i=sf.base.select(".e-hscroll-bar",this.tbItems),n=i.scrollLeft,s=n+(this.options.enableRtl?-i.offsetWidth:i.offsetWidth),o=e.offsetWidth,r=this.options.enableRtl?-(t.scrollWidth-e.offsetLeft):e.offsetLeft+e.offsetWidth,a=this.options.enableRtl?r+o:e.offsetLeft;if(n<a&&s<r){var l=this.options.enableRtl?-(r-n):s-a;i.scrollLeft=n+(o-l)}else if(n>a&&s>r){l=this.options.enableRtl?-(s-a):r-n;i.scrollLeft=n-(o-l)}}},o.prototype.enableTab=function(e,t){var i=sf.base.selectAll("."+n,this.element)[e];sf.base.isNullOrUndefined(i)||(!0===t?(i.classList.remove("e-disable","e-overlay"),i.firstElementChild.setAttribute("tabindex",i.firstElementChild.getAttribute("data-tabindex"))):(i.classList.add("e-disable","e-overlay"),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains("e-active")&&this.select(e+1)),sf.base.isNullOrUndefined(i.firstElementChild)||i.firstElementChild.setAttribute("aria-disabled",!0===t?"false":"true"))},o.prototype.hideTab=function(e,t){var i;void 0===t&&(t=!0);var s=sf.base.selectAll("."+n,this.element)[e];if(!sf.base.isNullOrUndefined(s)){if(this.bdrLine.classList.add("e-hidden"),t)if(s.classList.add("e-hidden"),0!==(i=sf.base.selectAll("."+n+":not(.e-hidden)",this.tbItems)).length&&s.classList.contains("e-active")){if(0!==e)for(var o=e-1;o>=0;o--){if(!this.tbItem[o].classList.contains("e-hidden")){this.select(o);break}if(0===o)for(var r=e+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}}else for(r=e+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}}else 0===i.length&&this.element.classList.add("e-hidden");else this.element.classList.remove("e-hidden"),i=sf.base.selectAll("."+n+":not(.e-hidden)",this.tbItems),s.classList.remove("e-hidden"),0===i.length&&this.select(e);this.setActiveBorder(),sf.base.isNullOrUndefined(s.firstElementChild)||s.firstElementChild.setAttribute("aria-hidden",""+t)}},o.prototype.select=function(e,t){void 0===t&&(t=!1);var s,o=this.getTabHeader();this.tbItems=sf.base.select("."+i,o),this.tbItem=sf.base.selectAll("."+n,o),this.prevItem=this.tbItem[this.prevIndex];var r=this.options.selectedItem;(sf.base.isNullOrUndefined(r)||r<0||this.tbItem.length<=r||isNaN(r))&&(this.options.selectedItem=0);var a=this.tbItem[e];if(sf.base.isNullOrUndefined(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex",this.prevItem.firstElementChild.getAttribute("tabindex")),this.initRender)this.selectingContent(e);else{a&&(s=parseInt(a.getAttribute("data-index"),10));var l={previousItem:null,previousIndex:this.prevIndex,selectedItem:null,selectedIndex:this.options.selectedItem,selectedContent:null,selectingItem:null,selectingIndex:s,selectingContent:null,isSwiped:this.isSwiped,isInteracted:t,cancel:!1};this.dotNetRef.invokeMethodAsync("SelectingEvent",l,s)}},o.prototype.setPersistence=function(e,t){this.options.enablePersistence&&window.localStorage.setItem(e,t)},o.prototype.selectingContent=function(e,t){if(void 0===t&&(t=!1),this.tbItem=sf.base.selectAll("."+n,this.hdrEle),this.tbItem.length>e&&e>=0&&!isNaN(e)){this.prevIndex=this.options.selectedItem;var i=this.hdrEle.querySelector("."+n+'[data-index="'+e+'"]');i&&i.classList.contains(s)&&this.options.reorderActiveTab&&this.popupHandler(i),this.setActive(e,t)}else this.setActive(0,t)},o.prototype.disable=function(e){this.setCssClass(this.element,"e-disable",e),this.element.setAttribute("aria-disabled",""+e)},o.prototype.headerItemsUpdate=function(e){var t=this.getTabHeader();this.tbItems=sf.base.select("."+i,t),this.tbItem=sf.base.selectAll("."+n,t),this.prevItem=this.tbItem[this.prevIndex],sf.base.isNullOrUndefined(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex",this.prevItem.firstElementChild.getAttribute("tabindex")),this.selectingContent(e)},o.prototype.destroy=function(){this.unWireEvents(),this.element.removeAttribute("aria-disabled")},o.prototype.getContentElement=function(e){return sf.base.select(".e-content #e-content"+this.tabId+"_"+e,this.element)},o}();return{initialize:function(e,t,i,n){if(t&&e){var s=new o(e,t,i,n);s.render(),s.headerReady()}},headerReady:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.headerReady(),t||i.isDestroyed||i.dotNetRef.invokeMethodAsync("CreatedEvent",null))},contentReady:function(t,s){var o=window.sfBlazor.getCompInstance(t);if(!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(o.element)){var r={isPopupElement:!1};o.element.classList.remove("e-focused"),o.isPopup=!1;var a=o.element.querySelector("."+e+" ."+n+'[data-index="'+s+'"]');sf.base.isNullOrUndefined(a)||(r.isPopupElement=!sf.base.isNullOrUndefined(sf.base.closest(a,".e-toolbar-pop")));var l=sf.base.selectAll("."+e+" ."+i+" ."+n,o.element);return r.toolbarItemIndex=l.length-1,o.headerItemsUpdate(s),o.setPersistence("tab"+o.element.id,s.toString()),"Init"!==o.options.loadOn&&o.contentReady(),JSON.stringify(r)}return null},selectingContent:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.selectingContent(t,!0),i.setPersistence("tab"+i.element.id,t.toString()),"Init"!==i.options.loadOn&&i.contentReady())},serverItemsChanged:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.element)||(o.options.selectedItem=t,o.options.animation=i,sf.base.isNullOrUndefined(o.element.querySelector(".e-toolbar"))||(sf.base.removeClass([o.element.querySelector(".e-toolbar")],"e-drag-action"),sf.base.removeClass([o.element.querySelector(".e-indicator")],"e-hidden")),n?sf.base.addClass([o.element],"e-vertical-icon"):sf.base.removeClass([o.element],"e-vertical-icon"),o.serverItemsChanged(s),o.options.allowDragAndDrop&&o.bindDraggable())},enableTab:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||n.enableTab(t,i)},hideTab:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||n.hideTab(t,i)},select:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.select(t)},disable:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.disable(t)},setCssClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(""!==i.options.cssClass&&i.setCssClass(i.element,i.options.cssClass,!1),i.setCssClass(i.element,t,!0),i.options.cssClass=t)},showCloseButton:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.showCloseButton=t,i.refreshActElePosition())},headerPlacement:function(e,t,i,n,s,o,r){var a=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(a)&&!sf.base.isNullOrUndefined(a.element)){a.options.headerPlacement=t,a.options.selectedItem=i;var l=window.sfBlazor.getCompInstance(n);sf.base.isNullOrUndefined(l.element)||l.setCssClass(s),a.serverChangeOrientation(t,n,o,r)}},enableRtl:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableRtl=t,i.setRTL(t))},overflowMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.overflowMode=t,i.refreshActElePosition())},allowDragAndDrop:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.allowDragAndDrop=t,i.setDragAndDrop(t))},refresh:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.refreshActiveBorder()},destroy:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||(n.isDestroyed=!0,n.setPersistence(t,i),n.destroy())},getTabItem:function(e,t){if(!sf.base.isNullOrUndefined(e)){var i=e.querySelector("."+n+'[data-index="'+t+'"]');if(i)return JSON.stringify(window.sfBlazor.getDomObject("tabitem",i))}return null},getTabContent:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(i.element)){var n=i.getContentElement(t);if(n)return JSON.stringify(window.sfBlazor.getDomObject("tabcontent",n))}return null},focusSelectedTab:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.focusItem(!1,t)}}}()},"./modules/sf-textbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TextBox=function(){"use strict";var e=function(){function e(e,t,i){this.element=e,this.container=i,this.element.blazor_input_instance=this,this.dotNetRef=t,this.isDestroyed=!1}return e.prototype.initialize=function(){sf.base.EventHandler.add(this.element,"blur",this.blurHandler,this);var e=this.container?this.container.querySelectorAll(".e-input-group-icon"):null;if(e&&e.length>0)for(var t=0;t<e.length;t++)sf.base.EventHandler.add(e[t],"mousedown",this.onMouseDownRipple,this),sf.base.EventHandler.add(e[t],"mouseup",this.onMouseUpRipple,this)},e.prototype.calculateWidth=function(){var e=document.getElementsByClassName("e-float-text");if(null!==e)for(var t=0;t<e.length;t++)if(this.container.classList.contains("e-outline")&&this.container.classList.contains("e-prepend")&&e[t].classList.contains("e-label-top")){var i=this.container.clientWidth-this.element.clientWidth;e[t].style.left=-i.toString()+"px",e[t].style.width="auto"}else e[t].style.left="0px"},e.prototype.onMouseDownRipple=function(e){var t=e?e.currentTarget:null;!t||this.container.classList.contains("e-disabled")||this.container.querySelector("input").readOnly||t.classList.add("e-input-btn-ripple")},e.prototype.onMouseUpRipple=function(e){var t=e?e.currentTarget:null;t&&setTimeout((function(){t.classList.remove("e-input-btn-ripple")}),500)},e.prototype.blurHandler=function(){this.isDestroyed?sf.base.EventHandler.remove(this.element,"blur",this.blurHandler):this.dotNetRef.invokeMethodAsync("BlurHandler").catch((function(){}))},e.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"blur",this.blurHandler)},e}();return{initialize:function(t,i,n){if(t){var s=new e(t,i,n);if(t&&t.blazor_input_instance&&(t.blazor_input_instance.initialize(),!sf.base.isNullOrUndefined(sf.base.closest(t,"fieldset"))&&sf.base.closest(t,"fieldset").disabled)){s.dotNetRef.invokeMethodAsync("UpdateFieldSetStatus",!1)}}},calculateWidth:function(t,i,n){t&&new e(t,i,n),t&&t.blazor_input_instance&&t.blazor_input_instance.calculateWidth()},focusIn:function(e){e.focus()},focusOut:function(e){e.blur()},destroyInput:function(e){e&&e.blazor_input_instance&&(e.blazor_input_instance.isDestroyed=!0,e.blazor_input_instance.destroy())}}}()},"./modules/sf-timepicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TimePicker=function(){"use strict";var e=function(){function e(){this.mask="",this.hiddenMask="",this.validCharacters="dMyhmHts",this.isDayPart=!1,this.isMonthPart=!1,this.isYearPart=!1,this.isHourPart=!1,this.isMinutePart=!1,this.isSecondsPart=!1,this.isMilliSecondsPart=!1,this.monthCharacter="",this.periodCharacter="",this.isHiddenMask=!1,this.isComplete=!1,this.isNavigate=!1,this.navigated=!1,this.formatRegex=/E{3,4}|d{1,4}|M{1,4}|y{1,4}|H{1,2}|h{1,2}|m{1,2}|f{1,7}|FF|t{1,2}|s{1,2}|z{1,4}|'[^']*'|'[^']*'/g,this.isDeletion=!1,this.isShortYear=!1,this.isDeleteKey=!1,this.isDateZero=!1,this.isMonthZero=!1,this.isYearZero=!1,this.dayTypeCount=0,this.monthTypeCount=0,this.hourTypeCount=0,this.minuteTypeCount=0,this.secondTypeCount=0}return e.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":"Delete"!==e.code&&e.preventDefault(),this.isPopupOpen||this.maskKeydownHandler(e);break;case"Tab":case"shiftTab":this.maskKeydownHandler(e)}},e.prototype.clearHandler=function(){this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.updateValue()},e.prototype.updateValue=function(){this.monthCharacter=this.periodCharacter="";var e=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e},e.prototype.zeroCheck=function(e,t,i){var n=i;return e&&!t&&(n="0"),n},e.prototype.roundOff=function(e,t){for(var i=e.toString(),n=t-i.length,s="",o=0;o<n;o++)s+="0";return s+i},e.prototype.formatCheck=function(){var e=this;return function(t){var i,n,s=e.dayAbbreviatedName,o=Object.keys(s),r=e.dayName,a=Object.keys(r),l=e.monthAbbreviatedName,h=e.monthName,d=e.dayPeriod,c=Object.keys(d);switch(t){case"d":i=e.isDayPart?e.maskDateValue.getDate().toString():e.maskPlaceholderDictionary.Day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2==e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"dd":i=e.isDayPart?e.roundOff(e.maskDateValue.getDate(),2):e.maskPlaceholderDictionary.Day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2==e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"ddd":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?s[o[e.maskDateValue.getDay()]].toString():e.maskPlaceholderDictionary.DayOfWeek.toString();break;case"dddd":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?r[a[e.maskDateValue.getDay()]].toString():e.maskPlaceholderDictionary.DayOfWeek.toString();break;case"M":i=e.isMonthPart?(e.maskDateValue.getMonth()+1).toString():e.maskPlaceholderDictionary.Month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2==e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MM":i=e.isMonthPart?e.roundOff(e.maskDateValue.getMonth()+1,2):e.maskPlaceholderDictionary.Month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2==e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MMM":i=e.isMonthPart?l[e.maskDateValue.getMonth()]:e.maskPlaceholderDictionary.Month.toString();break;case"MMMM":i=e.isMonthPart?h[e.maskDateValue.getMonth()]:e.maskPlaceholderDictionary.Month.toString();break;case"yy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear()%100,2):e.maskPlaceholderDictionary.Year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i),e.isYearPart&&(e.isNavigate=e.isShortYear=2===(e.maskDateValue.getFullYear()%100).toString().length);break;case"y":case"yyyy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear(),4):e.maskPlaceholderDictionary.Year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i);break;case"h":i=e.isHourPart?(e.maskDateValue.getHours()%12||12).toString():e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"hh":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours()%12||12,2):e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"H":i=e.isHourPart?e.maskDateValue.getHours().toString():e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"HH":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours(),2):e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"m":i=e.isMinutePart?e.maskDateValue.getMinutes().toString():e.maskPlaceholderDictionary.Minute.toString(),2==e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"mm":i=e.isMinutePart?e.roundOff(e.maskDateValue.getMinutes(),2):e.maskPlaceholderDictionary.Minute.toString(),2==e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"s":i=e.isSecondsPart?e.maskDateValue.getSeconds().toString():e.maskPlaceholderDictionary.Second.toString(),2==e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"ss":i=e.isSecondsPart?e.roundOff(e.maskDateValue.getSeconds(),2):e.maskPlaceholderDictionary.Second.toString(),2==e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"f":i=Math.floor(e.maskDateValue.getMilliseconds()/100).toString();break;case"FF":case"ff":n=e.maskDateValue.getMilliseconds(),e.maskDateValue.getMilliseconds()>99&&(n=Math.floor(e.maskDateValue.getMilliseconds()/10)),i=e.roundOff(n,2);break;case"fff":i=e.roundOff(e.maskDateValue.getMilliseconds(),3);break;case"ffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),4);break;case"fffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),5);break;case"ffffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),6);break;case"t":case"tt":i=e.maskDateValue.getHours()<12?d[c[0]]:d[c[1]];break;case"z":case"zz":i=e.offset.substring(0,3);break;case"zzz":case"zzzz":i=e.offset}if("ddd"===t&&(t="EEE"),"dddd"===t&&(t="EEEE"),i=void 0!==i?i:t.slice(1,t.length-1),e.isHiddenMask){for(var p="",u=0;u<i.length;u++)p+=t[0];return p}return i}},e.prototype.differenceCheck=function(){var e=this.element,t=e.selectionStart,i=e.value,n=this.previousValue.substring(0,t+this.previousValue.length-i.length),s=i.substring(0,t),o=!sf.base.isNullOrUndefined(s)&&s.length>0?new Date(+this.maskDateValue):new Date(this.options.valueString),r=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();if(0===n.indexOf(s)&&(0===s.length||this.previousHiddenMask[s.length-1]!==this.previousHiddenMask[s.length])){for(var a=s.length;a<n.length;a++)""!==this.previousHiddenMask[a]&&this.validCharacters.indexOf(this.previousHiddenMask[a])>=0&&(this.isDeletion=this.handleDeletion(this.previousHiddenMask[a],!1));if(this.isDeletion)return}switch(this.previousHiddenMask[t-1]){case"d":var l=(this.isDayPart&&o.getDate().toString().length<2&&!this.isPersist()?10*o.getDate():0)+parseInt(s[t-1],10);if(this.isDateZero="0"==s[t-1],this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(l))return;for(a=0;l>r;a++)l=parseInt(l.toString().slice(1),10);if(l>=1){if(o.setDate(l),this.isNavigate=2===l.toString().length,this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),o.getMonth()!==this.maskDateValue.getMonth())return;this.isDayPart=!0,this.dayTypeCount=this.dayTypeCount+1}else this.isDayPart=!1,this.dayTypeCount=this.isDateZero?this.dayTypeCount+1:this.dayTypeCount;break;case"M":var h=void 0;if(h=o.getMonth().toString().length<2&&!this.isPersist()?(this.isMonthPart?10*(o.getMonth()+1):0)+parseInt(s[t-1],10):parseInt(s[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,this.isMonthZero="0"==s[t-1],isNaN(h)){var d=this.monthName,c=Object.keys(d);for(this.monthCharacter+=s[t-1].toLowerCase();this.monthCharacter.length>0;){a=0;for(var p=0,u=c;p<u.length;p++){u[p];if(0===d[a].toLowerCase().indexOf(this.monthCharacter))return o.setMonth(a),this.isMonthPart=!0,void(this.maskDateValue=o);a++}this.monthCharacter=this.monthCharacter.substring(1,this.monthCharacter.length)}}else{for(;h>12;){var f=h;0===(h=parseInt(h.toString().slice(1),10))&&(h=parseInt(f.toString().slice(0,1),10))}if(h>=1){if(o.setMonth(h-1),this.isNavigate=2===h.toString().length,o.getMonth()!==h-1&&(o.setDate(1),o.setMonth(h-1)),this.isDayPart){var g=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),m=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();this.previousDate.getDate()==g&&m<=g&&o.setDate(m)}this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),this.isMonthPart=!0,this.monthTypeCount=this.monthTypeCount+1}else o.setMonth(0),this.isMonthPart=!1,this.monthTypeCount=this.isMonthZero?this.monthTypeCount+1:this.monthTypeCount}break;case"y":var v=(this.isYearPart&&o.getFullYear().toString().length<4&&!this.isShortYear?10*o.getFullYear():0)+parseInt(s[t-1],10);if(this.isShortYear=!1,this.isYearZero="0"==s[t-1],isNaN(v))return;for(;v>9999;)v=parseInt(v.toString().slice(1),10);v<1?this.isYearPart=!1:(o.setFullYear(v),4===v.toString().length&&(this.isNavigate=!0),this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),this.isYearPart=!0);break;case"h":if(this.hour=(this.isHourPart&&(o.getHours()%12||12).toString().length<2&&!this.isPersist()?10*(o.getHours()%12||12):0)+parseInt(s[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(;this.hour>12;)this.hour=parseInt(this.hour.toString().slice(1),10);o.setHours(12*Math.floor(o.getHours()/12)+this.hour%12),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"H":if(this.hour=(this.isHourPart&&o.getHours().toString().length<2&&!this.isPersist()?10*o.getHours():0)+parseInt(s[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(a=0;this.hour>23;a++)this.hour=parseInt(this.hour.toString().slice(1),10);o.setHours(this.hour),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"m":var b=(this.isMinutePart&&o.getMinutes().toString().length<2&&!this.isPersist()?10*o.getMinutes():0)+parseInt(s[t-1],10);if(this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(b))return;for(a=0;b>59;a++)b=parseInt(b.toString().slice(1),10);o.setMinutes(b),this.isNavigate=2===b.toString().length,this.isMinutePart=!0,this.minuteTypeCount=this.minuteTypeCount+1;break;case"s":var y=(this.isSecondsPart&&o.getSeconds().toString().length<2&&!this.isPersist()?10*o.getSeconds():0)+parseInt(s[t-1],10);if(this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(y))return;for(a=0;y>59;a++)y=parseInt(y.toString().slice(1),10);o.setSeconds(y),this.isNavigate=2===y.toString().length,this.isSecondsPart=!0,this.secondTypeCount=this.secondTypeCount+1;break;case"t":this.periodCharacter+=s[t-1].toLowerCase();var C=this.dayPeriod,w=Object.keys(C);for(a=0;this.periodCharacter.length>0;a++)(0===C[w[0]].toLowerCase().indexOf(this.periodCharacter)&&o.getHours()>=12||0===C[w[1]].toLowerCase().indexOf(this.periodCharacter)&&o.getHours()<12)&&(o.setHours((o.getHours()+12)%24),this.maskDateValue=o),this.periodCharacter=this.periodCharacter.substring(1,this.periodCharacter.length)}this.maskDateValue=o},e.prototype.maskKeydownHandler=function(e){var t=this.element;if(this.dayTypeCount=this.monthTypeCount=this.hourTypeCount=this.minuteTypeCount=this.secondTypeCount=0,"Delete"!==e.key){if(!(e.altKey||e.ctrlKey||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"shiftTab"!==e.key&&"Tab"!==e.key&&"shiftTab"!==e.action&&"End"!==e.key&&"Home"!==e.key)){var i=t.selectionStart,n=t.selectionEnd,s=t.value.length;if(0==i&&n==s&&("Tab"===e.key&&!e.shiftKey||"Tab"===e.key&&e.shiftKey)){var o="Tab"===e.key&&e.shiftKey?n:0;t.selectionStart=t.selectionEnd=o}if("End"===e.key||"Home"===e.key){var r="End"===e.key?s:0;t.selectionStart=t.selectionEnd=r}if(("ArrowLeft"===e.key||"ArrowRight"===e.key)&&0===i&&n===s){if("ArrowLeft"===e.key)for(var a=t.selectionEnd,l=a,h=a-1;l<this.hiddenMask.length||h>=0;l++,h--){if(l<this.hiddenMask.length&&-1!==this.validCharacters.indexOf(this.hiddenMask[l]))return void this.setSelection(this.hiddenMask[l]);if(h>=0&&-1!==this.validCharacters.indexOf(this.hiddenMask[h]))return void this.setSelection(this.hiddenMask[h])}else this.validCharacterCheck();return}this.navigateSelection(!!("ArrowLeft"===e.key||e.shiftKey&&"Tab"===e.key||"End"===e.key))}if(!(e.altKey||e.ctrlKey||"ArrowUp"!==e.key&&"ArrowDown"!==e.key)){i=t.selectionStart;var d="";-1!==this.validCharacters.indexOf(this.hiddenMask[i])&&(d=this.hiddenMask[i]),this.dateAlteration("ArrowDown"===e.key);var c=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=c,t.value=c;for(l=0;l<this.hiddenMask.length;l++)if(d===this.hiddenMask[l]){i=l;break}t.selectionStart=i,this.validCharacterCheck()}}else this.isDeleteKey=!0},e.prototype.dateAlteration=function(e){var t=this.element.selectionStart,i="";if(-1!==this.validCharacters.indexOf(this.hiddenMask[t])){i=this.hiddenMask[t];var n=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());this.previousDate=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());var s=e?-1:1;switch(i){case"d":n.setDate(n.getDate()+s);break;case"M":var o=n.getMonth()+s;if(n.setDate(1),n.setMonth(o),this.isDayPart){var r=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),a=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();this.previousDate.getDate()==r&&a<=r?n.setDate(a):n.setDate(this.previousDate.getDate())}else n.setDate(this.previousDate.getDate());this.previousDate=new Date(n.getFullYear(),n.getMonth(),n.getDate());break;case"y":n.setFullYear(n.getFullYear()+s);break;case"H":case"h":n.setHours(n.getHours()+s);break;case"m":n.setMinutes(n.getMinutes()+s);break;case"s":n.setSeconds(n.getSeconds()+s);break;case"t":n.setHours((n.getHours()+12)%24)}this.maskDateValue=n.getFullYear()>0?n:this.maskDateValue,-1!==this.validCharacters.indexOf(this.hiddenMask[t])&&this.handleDeletion(this.hiddenMask[t],!0)}},e.prototype.handleDeletion=function(e,t){switch(e){case"d":this.isDayPart=t;break;case"M":this.isMonthPart=t,t||(this.maskDateValue.setMonth(0),this.monthCharacter="");break;case"y":this.isYearPart=t;break;case"H":case"h":this.isHourPart=t,t||(this.periodCharacter="");break;case"m":this.isMinutePart=t;break;case"s":this.isSecondsPart=t;break;default:return!1}return!0},e.prototype.isPersist=function(){return this.isFocused||this.navigated},e.prototype.setDynamicValue=function(){this.maskDateValue=new Date(this.options.valueString),this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!0,this.updateValue(),this.options.isBlurred||this.validCharacterCheck()},e.prototype.validCharacterCheck=function(){var e=this.element,t=e.selectionStart;if("TimePicker"!==this.componentName&&t===this.hiddenMask.length&&this.mask===e.value&&(t=0),"TimePicker"===this.componentName){if(t===this.hiddenMask.length)return void e.setSelectionRange(0,t);if(this.isPopupOpen)return void e.setSelectionRange(0,this.hiddenMask.length)}for(var i=t,n=t-1;i<this.hiddenMask.length||n>=0;i++,n--){if(i<this.hiddenMask.length&&-1!==this.validCharacters.indexOf(this.hiddenMask[i]))return void this.setSelection(this.hiddenMask[i]);if(n>=0&&-1!==this.validCharacters.indexOf(this.hiddenMask[n]))return void this.setSelection(this.hiddenMask[n])}},e.prototype.setSelection=function(e){for(var t=this.element,i=-1,n=0,s=0;s<this.hiddenMask.length;s++)this.hiddenMask[s]===e&&(n=s+1,-1===i&&(i=s));i<0&&(i=0),t.setSelectionRange(i,n)},e.prototype.maskInputHandler=function(){var e,t=this.element,i=t.selectionStart,n="";-1!==this.validCharacters.indexOf(this.hiddenMask[i])&&(n=this.hiddenMask[i]),this.differenceCheck(),e=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isDateZero=this.isMonthZero=this.isYearZero=!1,this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e,t.value=e;for(var s=0;s<this.hiddenMask.length;s++)if(n===this.hiddenMask[s]){i=s;break}if(t.selectionStart=i,this.validCharacterCheck(),(this.isNavigate||this.isDeletion)&&!this.isDeleteKey){var o=!this.isNavigate;this.isNavigate=this.isDeletion=!1,this.navigateSelection(o)}this.isDeleteKey&&(this.isDeletion=!1),this.isDeleteKey=!1},e.prototype.navigateSelection=function(e){var t=this.element,i=t.selectionStart,n=t.selectionEnd,s=e?i-1:n;for(this.navigated=!0;s<this.hiddenMask.length&&s>=0;){if(this.validCharacters.indexOf(this.hiddenMask[s])>=0){this.setSelection(this.hiddenMask[s]);break}s+=e?-1:1}},e.prototype.createMask=function(e){this.options=e;this.element;this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.dateformat=this.options.format;var t=this.dateformat.replace(this.formatRegex,this.formatCheck());return this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.mask=this.previousValue=t,this.options.value&&(this.value=this.options.value,this.navigated=this.options.navigated,this.setDynamicValue()),t=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.options.minMax&&this.validCharacterCheck(),{currentMaskFormat:this.mask,inputElementValue:t}},e.prototype.updateCurrentValue=function(e){this.element.value=e},e}(),t=(new Date).getDate(),i=(new Date).getMonth(),n=(new Date).getFullYear(),s=function(){function s(t,i,n,s,o){window.sfBlazor=window.sfBlazor,this.maskObj=new e,this.componentName="TimePicker",this.dataId=t,this.containerElement=i,this.element=n,this.options=o,window.sfBlazor.setCompInstance(this),this.dotNetRef=s,this.maskObj.element=this.element,this.enableMask=this.options.enableMask,this.enableMask&&(this.maskObj.dateformat=this.options.format,this.maskObj.isRendered=this.options.isRendered,this.maskObj.componentName=this.componentName,this.maskObj.offset=this.options.offset,this.maskObj.floatLabelType=this.options.floatLabelType,this.maskObj.maskPlaceholderDictionary=this.options.maskPlaceholderDictionary,this.maskObj.dayAbbreviatedName=this.options.dayAbbreviatedName,this.maskObj.dayName=this.options.dayName,this.maskObj.dayPeriod=this.options.dayPeriod,this.maskObj.monthAbbreviatedName=this.options.monthAbbreviatedName,this.maskObj.monthName=this.options.monthName,this.maskObj.maskDateValue=sf.base.isNullOrUndefined(this.options.value)?new Date:new Date(this.options.value.toString()),this.maskObj.maskDateValue.setMonth(0),this.maskObj.maskDateValue.setHours(0),this.maskObj.maskDateValue.setMinutes(0),this.maskObj.maskDateValue.setSeconds(0),this.maskObj.previousDate=new Date(this.maskObj.maskDateValue.getFullYear(),this.maskObj.maskDateValue.getMonth(),this.maskObj.maskDateValue.getDate(),this.maskObj.maskDateValue.getHours(),this.maskObj.maskDateValue.getMinutes(),this.maskObj.maskDateValue.getSeconds()),this.removeEventListener(),this.addEventListener())}return s.prototype.initialize=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},sf.base.Browser.isDevice||(this.keyConfigure=sf.base.extend(this.keyConfigure,this.options.keyConfigs),new sf.base.KeyboardEvents(this.containerElement,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}))},s.prototype.bindInputEvent=function(){this.enableMask?sf.base.EventHandler.add(this.element,"input",this.inputkeyHandler,this):sf.base.EventHandler.remove(this.element,"input",this.inputkeyHandler)},s.prototype.addEventListener=function(){sf.base.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keydownHandler,this),this.bindInputEvent()},s.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.element,"mouseup",this.mouseUpHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keydownHandler)},s.prototype.mouseUpHandler=function(e){this.enableMask&&(this.maskObj.element=this.element,e.preventDefault(),this.maskObj.validCharacterCheck())},s.prototype.inputkeyHandler=function(){this.enableMask&&(this.maskObj.element=this.element,this.maskObj.maskInputHandler())},s.prototype.keydownHandler=function(e){this.enableMask&&!this.options.readonly&&(this.maskObj.element=this.element,this.maskObj.keydownHandler(e))},s.prototype.renderPopup=function(e,t,i,n){this.options=n,this.maskObj.isPopupOpen=!0,this.popupHolder=t,this.timeCollections=[],this.listWrapper=t.querySelector(".e-content")||sf.base.select(".e-content"),this.getTimeCollection(),sf.base.isNullOrUndefined(this.element.value)||(this.removeSelection(),this.selectedElement=this.listWrapper.querySelector('li[data-value = "'+this.element.value+'"]'),this.updateSelection(this.selectedElement)),this.popupCreation(e,n),sf.base.Browser.isDevice&&(this.mobilePopupWrapper=sf.base.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),("model"===i.appendTo?this.mobilePopupWrapper:document.body).appendChild(this.popupWrapper),this.setScrollPosition(),this.popupObj.refreshPosition(this.element);var s={name:"FadeIn",duration:sf.base.Browser.isDevice?0:300};1e3===this.options.zIndex?this.popupObj.show(new sf.base.Animation(s),this.element):this.popupObj.show(new sf.base.Animation(s),null),this.setOverlayIndex(this.mobilePopupWrapper,this.popupObj.element,this.modal,sf.base.Browser.isDevice),sf.base.EventHandler.add(document,"mousedown touchstart",this.documentClickHandler,this)},s.prototype.getTimeCollection=function(){for(var e=this.listWrapper.querySelectorAll(".e-list-item"),t=0;t<e.length;t++)this.timeCollections.push(e[t].getAttribute("data-value"))},s.prototype.updateSelection=function(e){e&&(sf.base.addClass([e],"e-active"),e.setAttribute("aria-selected","true"))},s.prototype.setScrollPosition=function(){sf.base.isNullOrUndefined(this.selectedElement)?this.popupWrapper&&this.options.scrollTo&&this.checkDateValue(new Date(this.options.scrollTo))&&this.setScrollTo():this.findScrollTop(this.selectedElement)},s.prototype.checkDateValue=function(e){return!sf.base.isNullOrUndefined(e)&&e instanceof Date&&!isNaN(+e)?e:null},s.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,n=i?i.offsetTop:e.offsetTop,s=e.getBoundingClientRect().height;n+e.offsetTop>t?this.popupWrapper.scrollTop=i?n-(t/2+s/2):n:this.popupWrapper.scrollTop=0},s.prototype.setScrollTo=function(){var e;if(sf.base.isNullOrUndefined(this.popupWrapper))this.popupWrapper.scrollTop=0;else{var t=this.popupWrapper.querySelectorAll(".e-list-item");if(t.length){var i=new Date((new Date).toDateString()+" "+this.timeCollections[0]).setMilliseconds(0),n=this.getDateObject(new Date(this.options.scrollTo)).getTime();e=t[Math.round((n-i)/(6e4*this.options.step))]}}sf.base.isNullOrUndefined(e)?this.popupWrapper.scrollTop=0:this.findScrollTop(e)},s.prototype.getDateObject=function(e){if(!sf.base.isNullOrUndefined(e)){var s=e,o=!sf.base.isNullOrUndefined(this.options.value);if(this.checkDateValue(s)){var r=o?new Date(this.options.value).getDate():t,a=o?new Date(this.options.value).getMonth():i,l=o?new Date(this.options.value).getFullYear():n;return new Date(l,a,r,s.getHours(),s.getMinutes(),s.getSeconds())}}return null},s.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupWrapper.getBoundingClientRect().height;return t>e?e:t},s.prototype.popupCreation=function(e,t){var i=this;this.popupWrapper=e,this.containerStyle=this.containerElement.getBoundingClientRect(),sf.base.Browser.isDevice&&(this.modal=sf.base.createElement("div"),this.modal.className="e-timepicker e-time-modal",document.body.className+=" e-time-overflow",this.modal.style.display="block",document.body.appendChild(this.modal)),this.popupObj=new sf.popups.Popup(this.popupWrapper,{width:this.setPopupWidth(this.options.width),relateTo:sf.base.Browser.isDevice?document.body:this.containerElement,position:sf.base.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:sf.base.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},offsetY:4,targetType:"relative",enableRtl:t.enableRtl,zIndex:t.zIndex,open:function(){i.popupWrapper.style.visibility="visible"},close:function(){i.popupHolder.appendChild(i.popupWrapper),i.popupObj&&i.popupObj.destroy(),i.isDisposed||i.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),i.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||i.isDisposed||i.dotNetRef.invokeMethodAsync("HidePopup",null)}}),sf.base.Browser.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),this.popupWrapper.classList.contains("e-popup-expand")?(this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%"):this.popupObj.element.style.maxHeight="240px"},s.prototype.closePopup=function(e,t){this.options=t,this.maskObj.isPopupOpen=!1,sf.base.removeClass([document.body],"e-time-overflow"),this.closeEventCallback(e)},s.prototype.removeSelection=function(){if(this.removeHover("e-hover"),!sf.base.isNullOrUndefined(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll(".e-active");e.length&&(sf.base.removeClass(e,"e-active"),e[0].removeAttribute("aria-selected"))}},s.prototype.removeHover=function(e){var t=this.popupWrapper?this.popupWrapper.querySelectorAll("."+e):[];t&&t.length&&(sf.base.removeClass(t,e),"e-navigation"===e&&t[0].removeAttribute("aria-selected"))},s.prototype.setWidth=function(e){return e="number"==typeof e||"string"==typeof e?sf.base.formatUnit(e):"100%"},s.prototype.setPopupWidth=function(e){(e=this.setWidth(e)).indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px");return e},s.prototype.closeEventCallback=function(e){var t=e;if(this.isPopupOpen()&&!t.cancel&&this.popupObj){var i={name:"FadeOut",duration:50,delay:0};this.popupObj.hide(new sf.base.Animation(i))}sf.base.Browser.isDevice&&(this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.isNullOrUndefined(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentClickHandler)},s.prototype.isPopupOpen=function(){return!(sf.base.isNullOrUndefined(this.popupObj)||!this.popupObj.element.classList.contains("e-popup"))},s.prototype.documentClickHandler=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&(this.containerElement.contains(t)||this.popupObj.element&&this.popupObj.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault();var i=this.containerElement.querySelector(".e-clear-icon"),n=this.containerElement.querySelector(".e-time-icon.e-icons");sf.base.closest(t,".e-popup-wrapper")||t===this.element||t===n||t===i||t===this.containerElement||this.isPopupOpen()&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("HidePopup",null)},s.prototype.setOverlayIndex=function(e,t,i,n){if(n&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(e)){var s=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(s-1).toString(),e.style.zIndex=s.toString()}},s.prototype.selectInputText=function(e,t,i){sf.base.Browser.isDevice||this.enableMask&&!this.maskObj.isPopupOpen||t&&this.listWrapper&&(this.selectedElement=this.listWrapper.querySelectorAll(".e-list-item")[i],this.setScrollPosition())},s.prototype.isDevice=function(){return sf.base.Browser.isDevice},s.prototype.inputHandler=function(e){var t=this.element;"right"!=e.action&&"left"!=e.action&&"tab"!=e.action&&("home"!=e.action&&"end"!=e.action&&"up"!=e.action&&"down"!=e.action||this.isPopupOpen()||this.enableMask)&&e.preventDefault(),"enter"===e.action&&this.isPopupOpen()&&e.stopPropagation();var i={Action:e.action,Key:e.key,KeyCode:e.keyCode,Events:e,SelectDate:null,FocusedDate:null,classList:"",Id:null,TargetClassList:null};this.enableMask&&this.maskObj.isPopupOpen&&(t.value=null),this.isDisposed||this.dotNetRef.invokeMethodAsync("KeyboardHandler",i,t.value),"enter"===e.action&&!sf.base.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj.element)&&e.preventDefault()},s}();return{initialize:function(e,t,i,n,o){if(i){var r=new s(e,t,i,n,o);if(r.initialize(),!sf.base.isNullOrUndefined(sf.base.closest(i,"fieldset"))&&sf.base.closest(i,"fieldset").disabled){var a=o.enabled=!1;r.dotNetRef.invokeMethodAsync("UpdateFieldSetStatus",a)}if(o.enableMask)return r.maskObj.createMask(o)}return{currentMaskFormat:null,inputElementValue:o.value}},createMask:function(e,t){return e&&t.enableMask?window.sfBlazor.getCompInstance(e).maskObj.createMask(t):{currentMaskFormat:null,inputElementValue:t.value}},updateCurrentValue:function(e,t){window.sfBlazor.getCompInstance(e).maskObj.updateCurrentValue(t)},renderPopup:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&i&&o.renderPopup(t,i,n,s)},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(n)&&t&&n.closePopup(t,i)},selectInputText:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.selectInputText(n.element,t,i)},focusIn:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(t&&i.element.setAttribute("readonly","true"),i.element.focus())},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},destroy:function(e,t,i,n,s){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(n,s))}}}()},"./modules/sf-toast.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Toast=function(){"use strict";var e="e-toast-progress",t=function(){function t(e){this.progressObj=[],window.sfBlazor=window.sfBlazor,this.progressObj=[],this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return t.prototype.initialize=function(){this.isDevice=sf.base.Browser.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px",this.toastContainer.classList.add("e-toast-full-width")),this.isDevice&&screen.width<768&&new sf.base.Touch(this.element,{swipe:this.swipeHandler.bind(this)})},t.prototype.show=function(t){sf.base.isNullOrUndefined(this.refElement)&&(this.refElement=sf.base.createElement("div",{className:"e-toast-ref-element"}),this.toastContainer=this.element.parentElement,this.toastContainer.parentElement.insertBefore(this.refElement,this.element.parentElement));this.setAnimation(t);var n="string"===i(this.target)?document.querySelector(this.target):document.body;if(t.rootElement.style.zIndex=sf.popups.getZindexPartial(t.rootElement)+"",!sf.base.isNullOrUndefined(n)){"BODY"===n.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",n.style.position="relative"),n.appendChild(this.toastContainer),this.appendToast(t.element);var s=parseInt(t.element.id.split("toast_")[1],10);this.progressObj[s]={hideEstimatedTimeOfArrival:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[s].element=t.element,this.extendedTimeout>0&&this.timeOut>0&&(sf.base.EventHandler.add(t.element,"mouseover",this.toastHoverAction.bind(this,s)),sf.base.EventHandler.add(t.element,"mouseleave",this.delayedToastProgress.bind(this,s))),t.showProgressBar&&(this.progressObj[s].progressEle=t.element.querySelector("."+e)),sf.base.EventHandler.add(t.element,"keydown",this.keyDownHandler,this)}},t.prototype.getDomObject=function(e,t){return null!=t?window.sfBlazor.getDomObject(e,t):null},t.prototype.swipeHandler=function(e){var t=sf.base.closest(e.originalEvent.target,".e-toast:not(.e-toast-container)"),i=this.hideAnimation.effect;sf.base.isNullOrUndefined(t)||("Right"===e.swipeDirection?(this.hideAnimation.effect="SlideRightOut",this.hide("swipe",t)):"Left"===e.swipeDirection&&(this.hideAnimation.effect="SlideLeftOut",this.hide("swipe",t)),this.hideAnimation.effect=i)},t.prototype.delayedToastProgress=function(t){var i=this.progressObj[t],n=i.element;i.timeOutId=window.setTimeout(this.destroyToast.bind(this,n),this.extendedTimeout),i.maxHideTime=parseFloat(this.extendedTimeout+""),i.hideEstimatedTimeOfArrival=(new Date).getTime()+i.maxHideTime,sf.base.isNullOrUndefined(n.querySelector("."+e))||(i.intervalId=setInterval(this.updateProgressBar.bind(this,i),10))},t.prototype.toastHoverAction=function(t){this.dotNetRef.invokeMethodAsync("ClearTimeout",t),clearTimeout(this.progressObj[t].timeOutId),clearInterval(this.progressObj[t].intervalId),this.progressObj[t].hideEstimatedTimeOfArrival=0;var i=this.progressObj[t].element;sf.base.isNullOrUndefined(i.querySelector("."+e))||(this.progressObj[t].progressEle.style.width="0%"),this.dotNetRef.invokeMethodAsync("MouseoverEvent",t)},t.prototype.updateProgressBar=function(e){var t=(e.hideEstimatedTimeOfArrival-(new Date).getTime())/e.maxHideTime*100;t="LTR"===this.progressDirection?100-t:t,e.progressEle.style.width=t+"%"},t.prototype.appendToast=function(e){this.newestOnTop&&0!==this.toastContainer.childElementCount&&this.toastContainer.insertBefore(e,this.toastContainer.children[0]),sf.base.removeClass([e],"e-blazor-toast-hidden")},t.prototype.setAnimation=function(e){var t=this,i=this,n=this.showAnimation,s={duration:n.duration,name:n.effect,timingFunction:n.easing,begin:function(){e.element.style.display=""},end:function(){sf.base.isNullOrUndefined(document.querySelector("#"+i.element.id))||i.dotNetRef.invokeMethodAsync("OpenEvent",e.index,t.getDomObject("element",e.element))}};new sf.base.Animation(s).animate(e.element)},t.prototype.hide=function(e,t){if(!sf.base.isNullOrUndefined(this.toastContainer)&&0!==this.toastContainer.childElementCount)if("string"!==i(t)||"All"!==t){if("string"===i(t)&&"All"!==t){var n=this.toastContainer.querySelector("#toast_"+t);n&&(this.destroyToast(n,e),this.dotNetRef.invokeMethodAsync("DestroyTimer",parseInt(t,10)))}sf.base.isNullOrUndefined(t)&&(t=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(t,e);var s=parseInt(t.id.split("toast_")[1],10);this.dotNetRef.invokeMethodAsync("DestroyTimer",s)}else for(var o=0;o<this.toastContainer.childElementCount;o++)this.destroyToast(this.toastContainer.children[o],e)},t.prototype.destroyToast=function(e,t){if(0!==this.toastContainer.attributes.length){var i=parseInt(e.id.split("toast_")[1],10);this.dotNetRef.invokeMethodAsync("OnCloseEvent",i,t)}},t.prototype.hideAnimationToast=function(e,t){var i=this,n=this.hideAnimation,s={duration:n.duration,name:n.effect,timingFunction:n.easing,end:function(){sf.base.detach(e),i.dotNetRef.invokeMethodAsync("CloseEvent",t)}};new sf.base.Animation({}).animate(e,s)},t.prototype.destroy=function(){for(;this.toastContainer.attributes.length>0;)this.toastContainer.removeAttribute(this.toastContainer.attributes[0].name);for(var e=this.toastContainer.children,t=e.length-1;t>=0;t--)sf.base.detach(e[t]);sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.toastContainer,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0)},t.prototype.keyDownHandler=function(e){if(e.target.classList.contains("e-toast-close-icon")&&(13===e.keyCode||32===e.keyCode)){var t=e.target,i=sf.base.closest(t,".e-toast");this.destroyToast(i,"key")}},t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t}();return{initialize:function(e){e.dataId&&(new t(e),window.sfBlazor.instances[e.dataId].initialize())},show:function(e){e.rootElement&&(window.sfBlazor.instances[e.dataId].updateContext(e),window.sfBlazor.instances[e.dataId].show(e))},hideAnimationToast:function(e,t){if(e){var i=window.sfBlazor.instances[e].rootElement;window.sfBlazor.instances[e].hideAnimationToast(i.querySelector("#toast_"+t),t)}},hide:function(e,t,i,n){e&&(window.sfBlazor.instances[e].updateContext(i),window.sfBlazor.instances[e].hide(n,t))},appendToast:function(e,t){e&&window.sfBlazor.instances[e].appendToast(t)},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()}}}()},"./modules/sf-toolbar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Toolbar=function(){"use strict";var e="e-toolbar-items",t="e-blazor-toolbar-items",i="e-toolbar-item",n="e-toolbar-popup",s=function(){function s(e,t,i,n){this.resizeContext=this.resize.bind(this),this.orientationChangeContext=this.orientationChange.bind(this),window.sfBlazor=window.sfBlazor,this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return s.prototype.destroy=function(){this.unwireEvents(),this.clearProperty(),this.popObj=null,this.tbarAlign=null},s.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),window.addEventListener("orientationchange",this.orientationChangeContext),this.options.allowKeyboard&&this.wireKeyboardEvent()},s.prototype.wireKeyboardEvent=function(){this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),sf.base.EventHandler.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},s.prototype.updateTabIndex=function(e){var t=this.element.querySelector("."+i+":not(.e-overlay ):not(.e-separator ):not(.e-hidden )");if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(t.firstElementChild)){var n=t.firstElementChild.getAttribute("data-tabindex");if(n&&"-1"===n&&"INPUT"!==t.firstElementChild.tagName)t.firstElementChild.setAttribute("tabindex",e);else if(t.classList.contains("e-template")){var s=t.firstElementChild;sf.base.isNullOrUndefined(s)||(s.setAttribute("tabindex",sf.base.isNullOrUndefined(s.getAttribute("tabIndex"))?"-1":this.getDataTabindex(s)),s.setAttribute("data-tabindex",sf.base.isNullOrUndefined(s.getAttribute("tabIndex"))?"-1":this.getDataTabindex(s)))}}},s.prototype.unwireKeyboardEvent=function(){this.keyModule&&(sf.base.EventHandler.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},s.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var t=!sf.base.isNullOrUndefined(this.popObj)&&sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},s.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),window.removeEventListener("orientationchange",this.orientationChangeContext),sf.base.EventHandler.remove(document,"scroll",this.docEvent),sf.base.EventHandler.remove(document,"click",this.docEvent)},s.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},s.prototype.docEvent=function(e){var t=sf.base.closest(e.target,".e-popup");this.popObj&&sf.base.isVisible(this.popObj.element)&&!t&&"Popup"===this.options.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},s.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&sf.base.addClass([this.scrollModule.element],"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},s.prototype.destroyMode=function(){this.scrollModule&&(this.scrollPosition=this.scrollModule.scrollEle[this.scrollModule.element.classList.contains("e-hscroll")?"scrollLeft":"scrollTop"],sf.base.removeClass([this.scrollModule.element],"e-rtl"),this.destroyScroll()),sf.base.removeClass([this.element],"e-tbar-extended"),sf.base.removeClass([this.element],"e-extended-toolbar");var e=this.element.querySelector(".e-toolbar-multirow");e&&sf.base.removeClass([e],"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},s.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},s.prototype.clstElement=function(e,t){return e&&this.popObj&&sf.base.isVisible(this.popObj.element)?this.popObj.element.querySelector("."+i):this.element===t||e?this.element.querySelector("."+i+":not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):sf.base.closest(t,"."+i)},s.prototype.keyHandling=function(t,n,s,o,r){var a,l,h,d=this.popObj,c=this.element,p={name:"FadeOut",duration:100};switch(n.action){case"moveRight":if(this.options.isVertical)return;c===s?this.elementFocus(t):o||this.eleFocus(t,"next");break;case"moveLeft":if(this.options.isVertical)return;o||this.eleFocus(t,"previous");break;case"home":case"end":if(t){var u=sf.base.closest(t,".e-popup"),f=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&f&&f.classList.contains("e-popup-open")&&(u="end"===n.action?f:null),u?sf.base.isVisible(this.popObj.element)&&(l=[].slice.call(u.children),a="home"===n.action?l[0]:l[l.length-1]):(l=this.element.querySelectorAll("."+e+" ."+i+":not(.e-separator)"),a="home"===n.action?l[0]:l[l.length-1]),a&&this.elementFocus(a)}break;case"moveUp":case"moveDown":if(h="moveUp"===n.action?"previous":"next",this.options.isVertical)"moveUp"===n.action?this.eleFocus(t,"previous"):this.eleFocus(t,"next");else if(d&&sf.base.closest(s,".e-popup")){var g=d.element,m=g.firstElementChild;if("previous"===h&&m===t||"next"===h&&g.lastElementChild===t)return;this.eleFocus(t,h)}else"moveDown"===n.action&&d&&sf.base.isVisible(d.element)&&this.elementFocus(t);break;case"tab":if(!r&&!o){var v=t.firstElementChild;c===s&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(v),v.focus()))}break;case"popupClose":d&&"Extended"!==this.options.overflowMode&&d.hide(p);break;case"popupOpen":if(!o)return;d&&!sf.base.isVisible(d.element)?(d.element.style.top=c.offsetHeight+"px",d.show({name:"FadeIn",duration:100})):d.hide(p)}},s.prototype.keyActionHandler=function(e){var t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains("e-overlay")){e.preventDefault();var i=t.classList.contains("e-hor-nav"),n=t.classList.contains("e-scroll-nav"),s=this.clstElement(i,t);(s||n)&&this.keyHandling(s,e,t,i,n)}},s.prototype.eleContains=function(e){var t=!!e.classList.contains("e-template")&&!sf.base.isNullOrUndefined(e.querySelector(".e-input"));return e.classList.contains("e-separator")||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!sf.base.isVisible(e)||t},s.prototype.eleFocus=function(e,t){var n=Object(e)[t+"ElementSibling"];if(n){if(this.eleContains(n))return void this.eleFocus(n,t);this.elementFocus(n)}else if(this.tbarAlign){var s=Object(e.parentElement)[t+"ElementSibling"];if(sf.base.isNullOrUndefined(s)||0!==s.children.length||(s=Object(s)[t+"ElementSibling"]),!sf.base.isNullOrUndefined(s)&&s.children.length>0)if("next"===t){var o=s.querySelector("."+i);this.eleContains(o)?this.eleFocus(o,t):(o.firstElementChild.focus(),this.activeEleSwitch(o))}else{o=s.lastElementChild;this.eleContains(o)?this.eleFocus(o,t):this.elementFocus(o)}}},s.prototype.clickHandler=function(e){if(!this.element.classList.contains("e-drag-action")){var t=sf.base.closest(e.target,"."+i);if(sf.base.isNullOrUndefined(t)||t.classList.contains("e-overlay")||sf.base.isNullOrUndefined(t.firstElementChild)||"true"===t.firstElementChild.getAttribute("aria-disabled")){var n,s,o=e.target,r=o.classList,a=this.element,l=sf.base.closest(o,".e-hor-nav");if(l||(l=o),a.children[0].classList.contains("e-hscroll")||a.children[0].classList.contains("e-vscroll")||!r.contains("e-hor-nav")||(r=o.querySelector(".e-icons").classList),(r.contains("e-popup-up-icon")||r.contains("e-popup-down-icon"))&&this.popupClickHandler(a,l,"e-rtl"),!sf.base.isNullOrUndefined(t)||l.classList.contains("e-hor-nav")){sf.base.isNullOrUndefined(t)||(n=parseInt(t.getAttribute("data-index"),10),s={id:t.id});var h={altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,offsetX:e.offsetX,offsetY:e.offsetY,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type};this.dotNetRef.invokeMethodAsync("TriggerClickEvent",h,n,s)}}}},s.prototype.popupClickHandler=function(e,t,i){var n=this.popObj;sf.base.isVisible(n.element)?(t.classList.remove("e-nav-active"),n.hide({name:"FadeOut",duration:100})):((e.classList.contains(i)||this.options.isVerticalLeft)&&(e.classList.contains(i)&&(n.enableRtl=!0),n.position={X:"left",Y:"top"}),0!==n.offsetX||e.classList.contains(i)||this.options.isVerticalLeft||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.options.overflowMode&&(n.element.style.left="0px",n.element.style.minHeight="0px"),t.classList.add("e-nav-active"),n.show({name:"FadeIn",duration:100}))},s.prototype.render=function(){this.scrollModule=null,this.popObj=null,this.isExtendedOpen=!1,this.popupPriCount=0;var e=sf.base.formatUnit(this.options.width),t=sf.base.formatUnit(this.options.height);this.element&&("msie"===sf.base.Browser.info.name&&"auto"===this.options.height||sf.base.setStyleAttribute(this.element,{height:t}),sf.base.setStyleAttribute(this.element,{width:e}),this.renderControl(),this.wireEvents())},s.prototype.renderControl=function(){this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},s.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},s.prototype.itemsAlign=function(e,n,s){var o,r;this.tbarEle||(this.tbarEle=[]);for(var a=0;a<e.length;a++){var l=this.element.querySelector("."+t);(o=s?n.querySelector("."+i+'[id="'+e[a].id+'"]'):l.querySelector("."+i+'[id="'+e[a].id+'"]'))&&("Show"!==e[a].overflow&&e[a].showAlwaysInPopup&&!o.classList.contains("e-separator")&&this.popupPriCount++,e[a].htmlAttributes&&this.setAttr(e[a].htmlAttributes,o),"Button"===e[a].type&&(sf.base.EventHandler.remove(o,"click",this.itemClick),sf.base.EventHandler.add(o,"click",this.itemClick,this)),-1===this.tbarEle.indexOf(o)&&this.tbarEle.push(o),"MultiRow"===this.options.overflowMode&&s||(this.tbarAlign||this.tbarItemAlign(e[a],n,a),(r=n.querySelector(".e-toolbar-"+e[a].align.toLowerCase()))?(e[a].showAlwaysInPopup&&"Show"!==e[a].overflow||this.tbarAlgEle[(e[a].align+"s").toLowerCase()].push(o),r.appendChild(o)):s||n.appendChild(o)))}},s.prototype.serverItemsRefresh=function(i){var n=this.element,s=n.querySelector("."+t),o=n.querySelector("."+e);(o&&o.children.length>0||s.children.length>0)&&(!o&&n&&n.classList.contains("e-toolbar")&&n.firstElementChild&&(o=sf.base.createElement("div",{className:e}),n.insertBefore(o,n.firstElementChild)),this.itemsAlign(this.options.items,o,i),this.renderLayout(),this.refreshOverflow())},s.prototype.resetServerItems=function(n){if(!n){var s=this.element.querySelector("."+t),o=[].slice.call(sf.base.selectAll("."+e+" ."+i,this.element));sf.base.append(o,s),this.clearProperty()}},s.prototype.changeOrientation=function(){this.options.isVertical?(this.element.classList.add("e-vertical"),this.element.setAttribute("aria-orientation","vertical"),sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.options.height),width:sf.base.formatUnit(this.options.width)})):(this.element.classList.remove("e-vertical"),this.element.setAttribute("aria-orientation","horizontal"),"auto"!==this.options.height&&"100%"!==this.options.height||(this.element.style.height=this.options.height)),this.destroyMode(),this.refreshOverflow()},s.prototype.initScroll=function(t,i){!this.scrollModule&&this.checkOverflow(t,i[0])&&(this.tbarAlign&&this.element.querySelector("."+e+" .e-toolbar-center").removeAttribute("style"),this.options.isVertical?this.scrollModule=new sf.navigations.VScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]):this.scrollModule=new sf.navigations.HScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]),this.scrollPosition&&(this.scrollModule.scrollEle[this.scrollModule.element.classList.contains("e-hscroll")?"scrollLeft":"scrollTop"]=this.scrollPosition,this.scrollPosition=null),sf.base.removeClass([this.scrollModule.element],"e-tbar-pos"),sf.base.setStyleAttribute(this.element,{overflow:"hidden"}))},s.prototype.itemWidthCal=function(e){var t,n=this,s=0;return[].slice.call(sf.base.selectAll("."+i,e)).forEach((function(e){sf.base.isVisible(e)&&(t=window.getComputedStyle(e),s+=n.options.isVertical?e.offsetHeight:e.offsetWidth,s+=parseFloat(n.options.isVertical?t.marginTop:t.marginRight),s+=parseFloat(n.options.isVertical?t.marginBottom:t.marginLeft))})),s},s.prototype.getScrollCntEle=function(e){var t=this.options.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(t)},s.prototype.checkOverflow=function(e,t){if(sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(t)||!sf.base.isVisible(e))return!1;var i=this.options.isVertical?e.offsetHeight:e.offsetWidth,n=this.options.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var s=e.querySelector(".e-hor-nav"),o=e.querySelector(".e-scroll-nav"),r=0;return s?r=this.options.isVertical?s.offsetHeight:s.offsetWidth:o&&(r=this.options.isVertical?2*o.offsetHeight:2*o.offsetWidth),n>i-r},s.prototype.refreshOverflow=function(){this.resize()},s.prototype.toolbarAlign=function(e){this.tbarAlign&&(sf.base.addClass([e],"e-tbar-pos"),this.itemPositioning())},s.prototype.renderOverflowMode=function(){var t=this.element,i=t.querySelector("."+e),n=this.popupPriCount>0;if(t&&t.children.length>0)switch(this.offsetWid=t.offsetWidth,sf.base.removeClass([this.element],"e-toolpop"),"msie"===sf.base.Browser.info.name&&"auto"===this.options.height&&(t.style.height=""),this.options.overflowMode){case"Scrollable":sf.base.isNullOrUndefined(this.scrollModule)&&this.initScroll(t,[].slice.call(t.getElementsByClassName(e)));break;case"Popup":sf.base.addClass([this.element],"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(t,i)||n)&&this.setOverflowAttributes(t),this.toolbarAlign(i);break;case"MultiRow":sf.base.addClass([i],"e-toolbar-multirow"),this.checkOverflow(t,i)&&this.tbarAlign&&(this.removePositioning(),sf.base.addClass([i],"e-multirow-pos")),"hidden"===t.style.overflow&&(t.style.overflow=""),"msie"!==sf.base.Browser.info.name&&"auto"===t.style.height||(t.style.height="auto");break;case"Extended":sf.base.addClass([this.element],"e-extended-toolbar"),(this.checkOverflow(t,i)||n)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(t)),this.toolbarAlign(i)}},s.prototype.setOverflowAttributes=function(t){this.createPopupEle(t,[].slice.call(sf.base.selectAll("."+e+" ."+i,t)));sf.base.attributes(this.element.querySelector(".e-hor-nav"),{tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"})},s.prototype.separator=function(){var e=this.element,t=[].slice.call(e.querySelectorAll(".e-separator")),i=e.querySelector(".e-multirow-separator"),n=e.querySelector(".e-extended-separator"),s="MultiRow"===this.options.overflowMode?i:n;null!==s&&("MultiRow"===this.options.overflowMode?s.classList.remove("e-multirow-separator"):"Extended"===this.options.overflowMode&&s.classList.remove("e-extended-separator"));for(var o=0;o<=t.length-1;o++)t[o].offsetLeft<30&&0!==t[o].offsetLeft&&("MultiRow"===this.options.overflowMode?t[o].classList.add("e-multirow-separator"):"Extended"===this.options.overflowMode&&t[o].classList.add("e-extended-separator"))},s.prototype.createPopupEle=function(e,t){var i=e.querySelector(".e-hor-nav"),n=this.options.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");var s=n?i.offsetHeight:i.offsetWidth,o=(n?e.offsetHeight:e.offsetWidth)-s;this.element.classList.remove("e-rtl"),sf.base.setStyleAttribute(this.element,{direction:"initial"}),this.checkPriority(e,t,o,!0),this.options.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},s.prototype.pushingPoppedEle=function(t,s,o,r,a){var l=this.element,h=sf.base.selectAll(".e-overflow-show",o),d=0,c=[].slice.call(sf.base.selectAll("."+n,l.querySelector("."+e))),p=0;c.forEach((function(e,i){h=sf.base.selectAll(".e-overflow-show",o),e.classList.contains("e-overflow-show")&&h.length>0?t.tbResize&&h.length>i?(o.insertBefore(e,h[i]),++p):(o.insertBefore(e,o.children[h.length]),++p):e.classList.contains("e-overflow-show")||t.tbResize&&e.classList.contains("e-overflow-hide")&&o.children.length>0&&0===h.length?(o.insertBefore(e,o.firstChild),++p):e.classList.contains("e-overflow-hide")?s.push(e):t.tbResize?(o.insertBefore(e,o.children[d+p]),++d):o.appendChild(e),e.classList.contains("e-separator")?sf.base.setStyleAttribute(e,{display:"",height:a+"px"}):sf.base.setStyleAttribute(e,{display:"",height:r+"px"})})),s.forEach((function(e){o.appendChild(e)}));for(var u=sf.base.selectAll("."+i,l.querySelector("."+e)),f=u.length-1;f>=0;f--){var g=u[f];if(!g.classList.contains("e-separator")||"Extended"===this.options.overflowMode)break;sf.base.setStyleAttribute(g,{display:"none"})}},s.prototype.createPopup=function(){var e,t,s=this.element;"Extended"===this.options.overflowMode&&(t=s.querySelector(".e-separator:not(."+n+")"),e="auto"===s.style.height||""===s.style.height?null:t&&t.offsetHeight);var o,r=s.querySelector("."+i+":not(.e-separator):not(."+n+"):not(.e-hidden)"),a="auto"===s.style.height||""===s.style.height?null:r&&r.offsetHeight;if(s.querySelector("#"+s.id+"_popup.e-toolbar-pop"))o=s.querySelector("#"+s.id+"_popup.e-toolbar-pop");else{var l=sf.base.createElement("div",{id:s.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),h=sf.base.createElement("div",{id:s.id+"_popup",className:"e-toolbar-pop"});o="Extended"===this.options.overflowMode?l:h}this.pushingPoppedEle(this,[],o,a,e),this.popupInit(s,o)},s.prototype.getElementOffsetY=function(){return"Extended"===this.options.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},s.prototype.popupInit=function(e,t){if(this.popObj){var i=this.popObj.element;if("Extended"===this.options.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),this.popObj.offsetX=0,this.popObj.dataBind()}sf.base.setStyleAttribute(i,{maxHeight:"",display:"block"}),sf.base.setStyleAttribute(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),sf.base.setStyleAttribute(this.element,{overflow:""});var s=window.getComputedStyle(this.element),o=new sf.popups.Popup(null,{relateTo:this.element,offsetY:this.options.isVertical?0:this.getElementOffsetY(),enableRtl:this.options.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.options.enableCollision?"flip":"none"},position:this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if("Extended"===this.options.overflowMode&&(o.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth),o.offsetX=0),o.appendTo(t),sf.base.EventHandler.add(document,"scroll",this.docEvent.bind(this)),sf.base.EventHandler.add(document,"click ",this.docEvent.bind(this)),o.element.style.maxHeight=o.element.offsetHeight+"px",this.options.isVertical&&(o.element.style.visibility="hidden"),this.isExtendedOpen){var r=this.element.querySelector(".e-hor-nav");r.classList.add("e-nav-active"),sf.base.classList(r.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")}else o.hide();this.popObj=o}},s.prototype.tbarPopupHandler=function(e){"Extended"===this.options.overflowMode&&(e?sf.base.addClass([this.element],"e-tbar-extended"):sf.base.removeClass([this.element],"e-tbar-extended"))},s.prototype.popupOpen=function(e){var t=this.popObj;this.options.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,s=n.querySelector(".e-hor-nav");s.setAttribute("aria-expanded","true"),sf.base.setStyleAttribute(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.options.overflowMode&&(t.element.style.left="",t.element.style.minHeight="");var o=i.offsetTop+i.offsetHeight+sf.popups.calculatePosition(n).top,r=s.firstElementChild;s.classList.add("e-nav-active"),sf.base.classList(r,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var a=sf.base.isNullOrUndefined(window.scrollY)?0:window.scrollY;if(("Extended"!==this.options.overflowMode||this.options.enableCollision)&&!this.options.isVertical&&window.innerHeight+a<o&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(o-window.innerHeight-a+5);t.height=l+"px";for(var h=0;h<=i.childElementCount;h++){var d=i.children[h];if(d.offsetTop+d.offsetHeight>l){l=d.offsetTop;break}}sf.base.setStyleAttribute(t.element,{maxHeight:l+"px"})}else if(this.options.isVertical){var c=this.element.getBoundingClientRect();sf.base.setStyleAttribute(t.element,{maxHeight:c.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){var p=i.getBoundingClientRect();p.right>document.documentElement.clientWidth&&p.width>n.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}},s.prototype.popupClose=function(e){var t=this.element.querySelector(".e-hor-nav");t.setAttribute("aria-expanded","false");var i=t.firstElementChild;t.classList.remove("e-nav-active"),sf.base.classList(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)},s.prototype.checkPriority=function(e,t,s,o){for(var r,a=this.popupPriCount>0,l=s,h=0,d=0,c=0,p=function(e,t){var i=!1;return t.forEach((function(t){e.classList.contains(t)&&(i=!0)})),i},u=t.length-1;u>=0;u--){var f=void 0,g=window.getComputedStyle(t[u]);this.options.isVertical?(f=parseFloat(g.marginTop),f+=parseFloat(g.marginBottom)):(f=parseFloat(g.marginRight),f+=parseFloat(g.marginLeft));var m=t[u]===this.tbarEle[0];m&&(this.tbarEleMrgn=f),r=this.options.isVertical?t[u].offsetHeight:t[u].offsetWidth;var v=m?r+f:r;if(p(t[u],["e-popup-alone"])&&a&&(t[u].classList.add(n),this.options.isVertical?sf.base.setStyleAttribute(t[u],{display:"none",minHeight:v+"px"}):sf.base.setStyleAttribute(t[u],{display:"none",minWidth:v+"px"}),c++),this.options.isVertical?t[u].offsetTop+t[u].offsetHeight+f>s:t[u].offsetLeft+t[u].offsetWidth+f>s){if(t[u].classList.contains("e-separator")){if("Extended"===this.options.overflowMode){if(d===c)p(b=t[u],["e-separator","e-ignore"])&&(t[u].classList.add(n),c++);d++}else if("Popup"===this.options.overflowMode){var b;if(h>0&&d===c)p(b=t[u+d+(h-1)],["e-separator","e-ignore"])&&sf.base.setStyleAttribute(b,{display:"none"});h++,d=0,c=0}}else d++;t[u].classList.contains("e-overflow-show")&&o||p(t[u],["e-separator","e-ignore"])?s-=(this.options.isVertical?t[u].offsetHeight:t[u].offsetWidth)+f:(t[u].classList.add(n),this.options.isVertical?sf.base.setStyleAttribute(t[u],{display:"none",minHeight:v+"px"}):sf.base.setStyleAttribute(t[u],{display:"none",minWidth:v+"px"}),c++)}}if(o){var y=sf.base.selectAll("."+i+":not(."+n+")",this.element);this.checkPriority(e,y,l,!1)}},s.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.options.overflowMode?i+" e-expended-nav":i;var n=sf.base.createElement("div",{id:t,className:i});"msie"!==sf.base.Browser.info.name&&"edge"!==sf.base.Browser.info.name||n.classList.add("e-ie-align");var s=sf.base.createElement("div",{className:"e-popup-down-icon e-icons"});n.appendChild(s),n.setAttribute("tabindex","0"),n.setAttribute("role","button"),e.appendChild(n)},s.prototype.tbarPriRef=function(e,t,i,s,o,r,a,l){var h=l,d=this.popObj.element,c=sf.base.selectAll("."+n+":not(.e-overflow-show)",d).length,p=function(e,t){return e.classList.contains(t)};if(0===sf.base.selectAll(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var u=e.children[t-(t-i)-1],f=!sf.base.isNullOrUndefined(u)&&p(u,"e-ignore");if(!sf.base.isNullOrUndefined(u)&&p(u,"e-separator")&&!sf.base.isVisible(u)||f){u.style.display="inherit";var g=u.offsetWidth+2*parseFloat(window.getComputedStyle(u).marginRight),m=u.previousElementSibling;r+g<a||o?(e.insertBefore(s,e.children[t+h-(t-i)]),sf.base.isNullOrUndefined(m)||(m.style.display="")):m.classList.contains("e-separator")&&(m.style.display="none"),u.style.display=""}else e.insertBefore(s,e.children[t+h-(t-i)])}else e.insertBefore(s,e.children[t+h-c])},s.prototype.popupRefresh=function(t,i){var n=this,s=this.element,o=this.options.isVertical,r=s.querySelector(".e-hor-nav"),a=s.querySelector("."+e);if(!sf.base.isNullOrUndefined(r)&&!sf.base.isNullOrUndefined(a)){var l;a.removeAttribute("style"),t.style.display="block",l=o?s.offsetHeight-(r.offsetHeight+a.offsetHeight):s.offsetWidth-(r.offsetWidth+a.offsetWidth);var h=0;[].slice.call(t.children).forEach((function(e){h+=n.popupEleWidth(e),sf.base.setStyleAttribute(e,{position:""})})),l+(o?r.offsetHeight:r.offsetWidth)>h&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(l,t,i),t.style.display="",0===t.children.length&&r&&this.popObj&&(sf.base.detach(r),r=null,this.popObj.destroy(),sf.base.detach(this.popObj.element),this.popObj=null)}},s.prototype.ignoreEleFetch=function(e,t){var i=[].slice.call(t.querySelectorAll(".e-ignore")),n=[],s=0;return i.length>0?(i.forEach((function(e){n.push([].slice.call(t.children).indexOf(e))})),n.forEach((function(t){t<=e&&s++})),s):0},s.prototype.checkPopupRefresh=function(t,i){i.style.display="block";var n=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var s=t.offsetWidth-t.querySelector(".e-hor-nav").offsetWidth,o=t.querySelector("."+e).offsetWidth;return i.style.removeProperty("display"),s>n+o},s.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=this.options.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){var n=e.children[0];!sf.base.isNullOrUndefined(i)&&e.classList.contains("e-popup-text")?i.style.display="none":!sf.base.isNullOrUndefined(i)&&e.classList.contains("e-toolbar-text")&&(i.style.display="block"),n.style.minWidth="0%",t=parseFloat(this.options.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",sf.base.isNullOrUndefined(i)||(i.style.display="")}return t},s.prototype.popupEleRefresh=function(t,i,s){for(var o,r,a=this.popupPriCount>0,l=this.tbarEle,h=this.element.querySelector("."+e),d=0,c=function(i){if(i.classList.contains("e-popup-alone")&&a&&!s)return"continue";var c=p.popupEleWidth(i);if(i===p.tbarEle[0]&&(c+=p.tbarEleMrgn),i.style.position="",!(c<t||s))return"break";if(sf.base.setStyleAttribute(i,{minWidth:"",height:"",minHeight:""}),i.classList.contains("e-overflow-hide")||i.classList.remove(n),r=p.tbarEle.indexOf(i),p.tbarAlign){var u=p.options.items[r].align;r=p.tbarAlgEle[(u+"s").toLowerCase()].indexOf(i),l=p.tbarAlgEle[(u+"s").toLowerCase()],h=p.element.querySelector("."+e+" .e-toolbar-"+u.toLowerCase())}var f=0;"Extended"!==p.options.overflowMode&&l.slice(0,r).forEach((function(e){sf.base.isNullOrUndefined(e.classList)||!e.classList.contains("e-overflow-show")&&!e.classList.contains("e-separator")||(e.classList.contains("e-separator")&&(e.style.display="",t-=e.offsetWidth),f++)})),d=p.ignoreEleFetch(r,h),i.classList.contains("e-overflow-show")?(p.tbarPriRef(h,r,f,i,s,c,t,d),t-=i.offsetWidth):0===r?(h.insertBefore(i,h.firstChild),t-=i.offsetWidth):(o=sf.base.selectAll(".e-overflow-show",p.popObj.element).length,h.insertBefore(i,h.children[r+d-o]),t-=i.offsetWidth),i.style.height=""},p=this,u=0,f=[].slice.call(i.children);u<f.length;u++){if("break"===c(f[u]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(e)[0])&&!s&&this.renderOverflowMode()},s.prototype.removePositioning=function(){var t=this.element.querySelector("."+e);if(!sf.base.isNullOrUndefined(t)&&t.classList.contains("e-tbar-pos")){sf.base.removeClass([t],"e-tbar-pos");var i=[].slice.call(t.children);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},s.prototype.refreshPositioning=function(){var t=this.element.querySelector("."+e);sf.base.addClass([t],"e-tbar-pos"),this.itemPositioning()},s.prototype.itemPositioning=function(){var t,i=this.element.querySelector("."+e);if(!sf.base.isNullOrUndefined(i)&&i.classList.contains("e-tbar-pos")){var n,s=this.element.querySelector(".e-hor-nav");if(this.scrollModule){var o=this.options.isVertical?"e-vscroll-content":"e-hscroll-content";n=[].slice.call(i.querySelector("."+o).children)}else n=[].slice.call(i.children);t=this.options.isVertical?n[0].offsetHeight+n[2].offsetHeight:n[0].offsetWidth+n[2].offsetWidth;var r=this.options.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(s){r-=this.options.isVertical?s.offsetHeight:s.offsetWidth;var a=(this.options.isVertical?s.offsetHeight:s.offsetWidth)+"px";n[2].removeAttribute("style"),this.options.isVertical?this.options.enableRtl?n[2].style.top=a:n[2].style.bottom=a:this.options.enableRtl?n[2].style.left=a:n[2].style.right=a}if(!(r<=t)){var l=(r-t-(this.options.isVertical?n[1].offsetHeight:n[1].offsetWidth))/2;n[1].removeAttribute("style");var h=(this.options.isVertical?n[0].offsetHeight:n[0].offsetWidth)+l+"px";this.options.isVertical?this.options.enableRtl?n[1].style.marginBottom=h:n[1].style.marginTop=h:this.options.enableRtl?n[1].style.marginRight=h:n[1].style.marginLeft=h}}},s.prototype.tbarItemAlign=function(e,t,i){var n=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var s=[];if(s.push(sf.base.createElement("div",{className:"e-toolbar-left"})),s.push(sf.base.createElement("div",{className:"e-toolbar-center"})),s.push(sf.base.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)s.forEach((function(e){t.appendChild(e)})),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos");else if("Left"!==e.align){var o=[].slice.call(t.children),r=s[0];[].slice.call(o).forEach((function(e){n.tbarAlgEle.lefts.push(e),r.appendChild(e)})),t.appendChild(r),t.appendChild(s[1]),t.appendChild(s[2]),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos")}}},s.prototype.renderItems=function(){var t=this.element,i=this.options.items;if(t&&i.length>0){var n=t.querySelector("."+e);this.itemsAlign(i,n,!0)}},s.prototype.setAttr=function(e,t){for(var i,n=Object.keys(e),s=0;s<n.length;s++)"class"===(i=n[s])?sf.base.addClass([t],e[i]):t.setAttribute(i,e[i])},s.prototype.getDataTabindex=function(e){return sf.base.isNullOrUndefined(e.getAttribute("data-tabindex"))?"-1":e.getAttribute("data-tabindex")},s.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},s.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},s.prototype.activeEleRemove=function(e){if(sf.base.isNullOrUndefined(this.activeEle)||this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),this.activeEle=e,"-1"===this.getDataTabindex(this.activeEle))if(sf.base.isNullOrUndefined(this.trgtEle)&&!e.parentElement.classList.contains("e-template"))this.updateTabIndex("-1"),e.removeAttribute("tabindex");else{var t=parseInt(this.getDataTabindex(this.activeEle))+1;this.activeEle.setAttribute("tabindex",t.toString())}},s.prototype.resize=function(){var t=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.options.overflowMode&&this.popObj.hide();var i=this.checkOverflow(t,t.getElementsByClassName(e)[0]);if(!i){this.destroyScroll();var n=t.querySelector("."+e);sf.base.isNullOrUndefined(n)||(sf.base.removeClass([n],"e-multirow-pos"),this.tbarAlign&&sf.base.addClass([n],"e-tbar-pos"))}if(!i||!this.scrollModule||this.offsetWid!==t.offsetWidth){if((this.offsetWid>t.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.options.overflowMode){var s=window.getComputedStyle(this.element);this.popObj.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.offsetWid=t.offsetWidth,this.tbResize=!1,this.separator()}},s.prototype.orientationChange=function(){var e=this;setTimeout((function(){e.resize()}),500)},s.prototype.extendedOpen=function(){var e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains("e-popup-open"))},s.prototype.updateHideEleTabIndex=function(e,t,i,n){for(var s=n[++i];s;){if(!this.eleContains(s)){var o=s.firstElementChild.getAttribute("data-tabindex");t||"-1"!==o?o!==s.firstElementChild.getAttribute("tabindex")&&s.firstElementChild.setAttribute("tabindex",o):s.firstElementChild.setAttribute("tabindex","0");break}s=n[++i]}},s.prototype.disable=function(e){var t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},s.prototype.setCssClass=function(e){this.extendedOpen(),this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" ")),e&&sf.base.addClass([this.element],e.split(" ")),this.options.cssClass=e},s}();return{initialize:function(e,t,i,n){0===i.scrollStep&&(i.scrollStep=null),new s(e,t,i,n).render()},hidePopup:function(e,t){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.popObj)){var s=n.element.querySelector("."+i+'[data-index="'+t+'"]');sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(sf.base.closest(s,".e-toolbar-pop"))||n.popObj.hide({name:"FadeOut",duration:100})}},setCssClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.setCssClass(t)},setWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(i.element)){i.options.width=t,i.extendedOpen();var n=i.element.offsetWidth;sf.base.setStyleAttribute(i.element,{width:sf.base.formatUnit(t)}),i.renderOverflowMode(),i.popObj&&n<i.element.offsetWidth&&i.popupRefresh(i.popObj.element,!1)}},setHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.height=t,i.extendedOpen(),sf.base.setStyleAttribute(i.element,{height:sf.base.formatUnit(t)}))},setOverflowMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.overflowMode=t,i.extendedOpen(),i.destroyMode(),i.renderOverflowMode(),i.options.enableRtl&&sf.base.addClass([i.element],"e-rtl"),i.refreshOverflow())},setEnableRTL:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableRtl=t,i.extendedOpen(),t?sf.base.addClass([i.element],"e-rtl"):sf.base.removeClass([i.element],"e-rtl"),sf.base.isNullOrUndefined(i.scrollModule)||(t?sf.base.addClass([i.scrollModule.element],"e-rtl"):sf.base.removeClass([i.scrollModule.element],"e-rtl")),sf.base.isNullOrUndefined(i.popObj)||(t?sf.base.addClass([i.popObj.element],"e-rtl"):sf.base.removeClass([i.popObj.element],"e-rtl")),i.tbarAlign&&i.itemPositioning())},setScrollStep:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.scrollStep=t,i.extendedOpen(),i.scrollModule&&(i.scrollModule.scrollStep=t))},setEnableCollision:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableCollision=t,i.extendedOpen(),i.popObj&&(i.popObj.collision={Y:t?"flip":"none"}))},setAllowKeyboard:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.allowKeyboard=t,i.extendedOpen(),i.unwireKeyboardEvent(),t&&i.wireKeyboardEvent())},serverItemsRerender:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.element)){var s=document.activeElement;n.options.items=t,n.extendedOpen(),n.destroyMode(),n.resetServerItems(i),n.serverItemsRefresh(i),document.activeElement!=s&&s.focus()}},hideItem:function(e,t,n){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(s.element)){s.options.items=t;var o=[].slice.call(sf.base.selectAll("."+i,this.element)),r=o[parseInt(n.toString(),10)];r&&(t[n].visible?r.classList.contains("e-separator")||s.updateHideEleTabIndex(r,t[n].visible,n,o):r.classList.contains("e-separator")||(sf.base.isNullOrUndefined(r.firstElementChild.getAttribute("tabindex"))||"-1"!==r.firstElementChild.getAttribute("tabindex"))&&s.updateHideEleTabIndex(r,t[n].visible,n,o)),s.refreshOverflow()}},disable:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.disable(t)},refreshOverflow:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.refreshOverflow()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.destroy()},refresh:function(e,t){var i=window.sfBlazor.getCompInstance(e);0===t.scrollStep&&(t.scrollStep=null),sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options=t,i.destroyMode(),i.resetServerItems(!1),i.serverItemsRefresh(!1))}}}()},"./modules/sf-tooltip.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Tooltip=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},t=function(){function e(e,t,i,n,s){this.popupObj=null,this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isContinuousOpen=!1,this.isRestrictUpdate=!1,this.showTimer=0,this.hideTimer=0,this.contentTargetValue=null,this.contentEvent=null,this.contentAnimation=null,this.beforeCloseAnimation=null,this.isPopupHidden=!0,this.isMultiTarget=!1,this.mouseAction=!1,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.isBodyContainer=!0,this.element=t,this.dataId=e,this.properties=n,this.dotnetRef=i,sf.base.isNullOrUndefined(this.element)||(this.ctrlId=this.element.id,window.sfBlazor.setCompInstance(this),this.eventList=s)}return e.prototype.getTriggerList=function(e){return"Auto"===e&&(e=sf.base.Browser.isDevice?"Hover":"Hover Focus"),e.split(" ")},e.prototype.formatPosition=function(){var e,t;0===this.properties.position.indexOf("Top")||0===this.properties.position.indexOf("Bottom")?(e=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},e.prototype.getTargetList=function(e){if(!e||""===e)return[this.element];var t=[].slice.call(sf.base.selectAll(e,this.element));return t.length>0?t:[].slice.call(sf.base.selectAll(e,document))},e.prototype.wireEvents=function(e){var t=this,i=this.getTriggerList(e),n=this.getTargetList(this.properties.target);i.forEach((function(e){"Custom"!==e&&n.forEach((function(i){switch(e){case"Focus":sf.base.EventHandler.add(i,"focus",t.targetHover,t);break;case"Click":sf.base.EventHandler.add(i,sf.base.Browser.touchStartEvent,t.targetClick,t);break;case"Hover":sf.base.Browser.isDevice?(t.touchModule=new sf.base.Touch(i,{tapHoldThreshold:500,tapHold:t.tapHoldHandler.bind(t)}),sf.base.EventHandler.add(i,sf.base.Browser.touchEndEvent,t.touchEndHandler,t)):(sf.base.EventHandler.add(i,"mouseover",t.targetHover,t),t.properties.isSticky||sf.base.EventHandler.add(i,"mouseleave",t.onMouseOut,t))}}))})),sf.base.EventHandler.add(document,"touchend",this.touchEnd,this),sf.base.EventHandler.add(document,"scroll wheel",this.scrollHandler.bind(this),{passive:!0}),sf.base.EventHandler.add(document,"keydown",this.keyDown,this),window.addEventListener("resize",this.onWindowResize.bind(this))},e.prototype.onWindowResize=function(){this.isHidden()||this.reposition(this.findTarget())},e.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.properties.isSticky||("focus"===e.type&&sf.base.EventHandler.add(t,"blur",this.onMouseOut,this),this.properties.closeDelay&&(sf.base.EventHandler.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),sf.base.EventHandler.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.properties.mouseTrail&&sf.base.EventHandler.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},e.prototype.unWireEvents=function(e){var t=this,i=this.getTriggerList(e),n=this.getTargetList(this.properties.target);i.forEach((function(e){"Custom"!==e&&n.forEach((function(i){switch(e){case"Focus":sf.base.EventHandler.remove(i,"focus",t.targetHover);break;case"Click":sf.base.EventHandler.remove(i,sf.base.Browser.touchStartEvent,t.targetClick);break;case"Hover":sf.base.Browser.isDevice?(t.touchModule&&t.touchModule.destroy(),sf.base.EventHandler.remove(i,sf.base.Browser.touchEndEvent,t.touchEndHandler)):(sf.base.EventHandler.remove(i,"mouseover",t.targetHover),t.properties.isSticky||sf.base.EventHandler.remove(i,"mouseleave",t.onMouseOut))}}))})),sf.base.EventHandler.remove(document,"touchend",this.touchEnd),sf.base.EventHandler.remove(document,"scroll wheel",this.scrollHandler),sf.base.EventHandler.remove(document,"keydown",this.keyDown),window.removeEventListener("resize",this.onWindowResize.bind(this))},e.prototype.unWireMouseEvents=function(e){var t=this;this.properties.isSticky||(this.getTriggerList(this.properties.opensOn).forEach((function(i){"Focus"===i&&sf.base.EventHandler.remove(e,"blur",t.onMouseOut)})),this.properties.closeDelay&&(sf.base.EventHandler.remove(e,"mouseenter",this.tooltipHover),sf.base.EventHandler.remove(e,"mouseleave",this.tooltipMouseOut)));this.properties.mouseTrail&&sf.base.EventHandler.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},e.prototype.findTarget=function(){return sf.base.select('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},e.prototype.addDescribedBy=function(e,t){var i=(sf.base.getAttributeOrDefault(e,"aria-describedby",null)||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),sf.base.attributes(e,{ARIA_DESCRIBEDBY:i.join(" ").trim(),"data-tooltip-id":t})},e.prototype.removeDescribedBy=function(e){var t=sf.base.getAttributeOrDefault(e,"data-tooltip-id",null),i=(sf.base.getAttributeOrDefault(e,"aria-describedby",null)||"").split(/\s+/),n=i.indexOf(t);-1!==n&&i.splice(n,1),e.removeAttribute("data-tooltip-id");var s=i.join(" ").trim();s?sf.base.attributes(e,{ARIA_DESCRIBEDBY:s}):e.removeAttribute("aria-describedby")},e.prototype.clear=function(){if(this.isPopupHidden){if(this.popupObj&&this.popupObj.destroy(),this.tooltipEle){sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],"e-popup-open"),this.tooltipEle.style.display="none";var e=document.getElementById(this.ctrlId+"_content_placeholder");e&&e.appendChild(this.tooltipEle),document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!1).catch((function(){}))}this.tooltipEle=null,this.popupObj=null}},e.prototype.tapHoldHandler=function(e){this.targetHover(e.originalEvent)},e.prototype.touchEndHandler=function(){this.properties.isSticky||this.hideTooltip(this.properties.animation.close)},e.prototype.targetClick=function(e){var t=this.properties.target?sf.base.closest(e.target,this.properties.target):this.element;t&&(null===sf.base.getAttributeOrDefault(t,"data-tooltip-id",null)?this.targetHover(e):this.properties.isSticky||this.hideTooltip(this.properties.animation.close,e,t))},e.prototype.restoreElement=function(e){this.unWireMouseEvents(e),sf.base.isNullOrUndefined(sf.base.getAttributeOrDefault(e,"data-content",null))||e.removeAttribute("data-content"),this.removeDescribedBy(e)},e.prototype.checkForOpen=function(e,t,i){if(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i))return!1;var n=this.properties.target?sf.base.closest(i.target,this.properties.target):this.element;if(sf.base.isNullOrUndefined(n))return!1;var s=!0;return"Hover"===e?s=sf.base.matches(n,":hover"):"Auto"===e?s=sf.base.matches(n,":hover")||sf.base.matches(n,":focus"):"Focus"===e?s=sf.base.matches(n,":focus"):"Click"!==e&&"Custom"!==e||(s=null===sf.base.getAttributeOrDefault(n,"data-tooltip-id",null)),s},e.prototype.targetHover=function(e){var t=this;if(this.checkForOpen(this.properties.opensOn,this.element,e)){var i=this.properties.target?sf.base.closest(e.target,this.properties.target):this.element,n=i.getAttribute("title");if(i.title="",""!==n&&sf.base.attributes(i,{"sf-tooltip":n}),!sf.base.isNullOrUndefined(i)&&null===sf.base.getAttributeOrDefault(i,"data-tooltip-id",null)){if(this.isMultiTarget=this.getTargetList(this.properties.target).length>1,this.properties.target&&this.isMultiTarget&&e&&!sf.base.isNullOrUndefined(e.target)&&!sf.base.isNullOrUndefined(e.relatedTarget))if(sf.base.closest(e.target,this.properties.target)==sf.base.closest(e.relatedTarget,this.properties.target))return;[].slice.call(sf.base.selectAll('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)).forEach((function(e){t.restoreElement(e)})),this.mouseAction=!1,this.showTooltip(i,this.properties.animation.open,e)}}},e.prototype.isHidden=function(){return!this.tooltipEle||!this.tooltipEle.classList.contains("e-popup-open")},e.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},e.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&sf.base.EventHandler.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},e.prototype.showTooltip=function(e,t,i){var n=this;this.mouseAction=!1,this.clear(),clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.properties.mouseTrail&&this.properties.openDelay&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,sf.base.EventHandler.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this));this.showTimer=setTimeout((function(){n.isContinuousOpen=!sf.base.isNullOrUndefined(n.tooltipEle),n.tooltipEventArgs={type:i?i.type.toString():null,cancel:!1,target:n.getDomObject("target",e),event:i||null,hasText:n.hasText(),element:n.getDomObject("tooltipElement",n.tooltipEle),isInteracted:!sf.base.isNullOrUndefined(i),name:"beforeRender",left:i?n.getXYValue(i,"x"):null,top:i?n.getXYValue(i,"y"):null},n.contentTargetValue=e,n.contentEvent=i,n.contentAnimation=t,n.isRestrictUpdate=n.eventList.beforeRender&&!n.isHidden(),n.eventList.beforeRender?n.triggerEvent("TriggerBeforeRenderEvent",n.tooltipEventArgs):n.beforeRenderCallBack(!1)}),this.properties.openDelay)},e.prototype.triggerEvent=function(e,t){document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync(e,t).catch((function(){}))},e.prototype.beforeRenderCallBack=function(e){e?(this.isPopupHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isPopupHidden=!1,sf.base.isNullOrUndefined(this.tooltipEle)?document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!0).catch((function(){})):this.isContinuousOpen&&!this.isRestrictUpdate?this.contentUpdated():this.isRestrictUpdate=!1)},e.prototype.checkCollision=function(e,t,i){var n={left:t,top:i,position:this.properties.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},s=sf.popups.isCollide(this.tooltipEle,this.checkCollideTarget(),t,i);return s.length>0&&(n.horizontal=s.indexOf("left")>=0?"Right":s.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=s.indexOf("top")>=0?"Bottom":s.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},e.prototype.checkCollideTarget=function(){return!this.properties.windowCollision&&this.properties.target?this.element:null},e.prototype.calculateElementPosition=function(e,t){return[this.isBodyContainer?e.left+t.left:e.left-this.containerElement.offsetLeft+t.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+t.top:e.top-this.containerElement.offsetTop+t.top+window.pageYOffset+this.containerElement.scrollTop]},e.prototype.getScalingFactor=function(e){if(!e)return{x:1,y:1};var t={x:1,y:1},i=e.closest('[style*="transform: scale"]');if(i&&i!=this.tooltipEle&&i.contains(this.tooltipEle)){var n=window.getComputedStyle(i).getPropertyValue("transform").match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);t.x=n[0],t.y=n[3]}return t},e.prototype.collisionFlipFit=function(e,t,i){var n=this.checkCollision(e,t,i),s=n.position;this.tooltipPositionY!==n.vertical&&(s=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===s.indexOf("Left")&&(n.vertical="LeftTop"===s||"LeftCenter"===s?"Top":"Bottom",s=n.vertical+"Left"),0===s.indexOf("Right")&&(n.vertical="RightTop"===s||"RightCenter"===s?"Top":"Bottom",s=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:this.getDomObject("target",e),event:null,isInteracted:!1,hasText:this.hasText(),element:this.getDomObject("tooltipElement",this.tooltipEle),collidedPosition:s,name:"beforeCollision",left:null,top:null},this.isRestrictUpdate=this.eventList.beforeCollision&&!this.isHidden(),this.eventList.beforeCollision&&this.triggerEvent("TriggerBeforeCollisionEvent",this.tooltipEventArgs);var o=n.vertical,r=n.horizontal;if(n.position!==s){var a=sf.popups.calculatePosition(e,r,o,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,s,r,o);var l=this.getScalingFactor(e),h=this.calculateTooltipOffset(s,l.x,l.y);h.top-=this.getOffSetPosition("TopBottom",s,this.properties.offsetY),h.left-=this.getOffSetPosition("RightLeft",s,this.properties.offsetX),n.position=s;var d=this.calculateElementPosition(a,h),c=d[0],p=d[1];n.left=c,n.top=p}else this.adjustArrow(e,s,r,o);var u={left:n.left,top:n.top},f=sf.popups.fit(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},u).left;if(sf.base.setStyleAttribute(this.tooltipEle,{display:"block"}),this.properties.showTipPointer&&(0===s.indexOf("Bottom")||0===s.indexOf("Top"))){var g=sf.base.select(".e-arrow-tip",this.tooltipEle),m=parseInt(g.style.left,10)-(f-n.left);m<0?m=0:m+g.offsetWidth>this.tooltipEle.clientWidth&&(m=this.tooltipEle.clientWidth-g.offsetWidth),sf.base.setStyleAttribute(g,{left:m.toString()+"px"})}return sf.base.setStyleAttribute(this.tooltipEle,{display:""}),u.left=f,window.scrollX&&"BottomRight"==this.properties.position&&(u.left=this.element.getBoundingClientRect().left+window.scrollX-this.element.offsetWidth),u},e.prototype.getOffSetPosition=function(e,t,i){return-1!==e.indexOf(this.properties.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(t.split(/(?=[A-Z])/)[0])?2*i:0},e.prototype.hideTooltip=function(e,t,i){var n=this;clearTimeout(this.hideTimer),clearTimeout(this.showTimer);var s=function(){var s;n.checkForOpen(n.properties.opensOn,n.element,t)||(n.properties.closeDelay&&n.tooltipEle&&n.isTooltipOpen||(s=t?n.properties.target?i||t.target:n.element:sf.base.select('[data-tooltip-id= "'+n.ctrlId+'_content"]',document),n.tooltipEventArgs={type:t?t.type.toString():null,cancel:!1,target:n.getDomObject("target",s),event:t||null,element:n.getDomObject("tooltipElement",n.tooltipEle),hasText:n.hasText(),isInteracted:!sf.base.isNullOrUndefined(t),name:"beforeClose",collidedPosition:null,left:t?n.getXYValue(t,"x"):null,top:t?n.getXYValue(t,"y"):null},n.beforeCloseTarget=s,n.beforeCloseAnimation=e,n.isRestrictUpdate=n.eventList.beforeClose&&!n.isHidden(),n.eventList.beforeClose?n.triggerEvent("TriggerBeforeCloseEvent",n.tooltipEventArgs):n.beforeCloseCallBack(!1)))};!sf.base.isNullOrUndefined(this.tooltipEle)&&this.properties.closeDelay<=0?s():this.hideTimer=setTimeout(s,this.properties.closeDelay)},e.prototype.beforeCloseCallBack=function(e){if(e)this.isPopupHidden=!1;else{var t=this;t.mouseMoveBeforeRemove();this.popupObj?this.popupHide(this.beforeCloseAnimation,this.beforeCloseTarget):setTimeout((function(){t.isMultiTarget||t.popupHide(t.beforeCloseAnimation,t.beforeCloseTarget)}),200)}},e.prototype.popupHide=function(e,t){t&&this.restoreElement(t),this.isPopupHidden=!0;var i={name:"None"===e.effect&&"Enable"===sf.base.animationMode?"FadeOut":e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};("None"===e.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&(i=void 0),this.popupObj&&this.popupObj.hide(i)},e.prototype.calculateTooltipOffset=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=1);var n=this.tooltipEle.getBoundingClientRect(),s=sf.base.select(".e-arrow-tip",this.tooltipEle),o=s?s.getBoundingClientRect():null,r=s?o.width:0,a=s?o.height:0,l=this.properties.showTipPointer?0:8,h={top:0,left:0},d=a/2+2+(n.height-this.tooltipEle.clientHeight*i),c=r/2+2+(n.width-this.tooltipEle.clientWidth*t);switch(this.properties.mouseTrail&&(l+=2),e){case"RightTop":h.left+=r+l,h.top-=n.height-d;break;case"RightCenter":h.left+=r+l,h.top-=n.height/2;break;case"RightBottom":h.left+=r+l,h.top-=d;break;case"BottomRight":h.top+=a+l,h.left-=c;break;case"BottomCenter":h.top+=a+l,h.left-=n.width/2;break;case"BottomLeft":h.top+=a+l,h.left-=n.width-c;break;case"LeftBottom":h.left-=r+n.width+l,h.top-=d;break;case"LeftCenter":h.left-=r+n.width+l,h.top-=n.height/2;break;case"LeftTop":h.left-=r+n.width+l,h.top-=n.height-d;break;case"TopLeft":h.top-=n.height+a+l,h.left-=n.width-c;break;case"TopRight":h.top-=n.height+a+l,h.left-=c;break;default:h.top-=n.height+a+l,h.left-=n.width/2}return h.left+=this.properties.offsetX,h.top+=this.properties.offsetY,h},e.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass="e-tip-left":0===e.indexOf("Bottom")?this.tipClass="e-tip-top":0===e.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass="e-tip-bottom"},e.prototype.updateTipPosition=function(e){var t=sf.base.selectAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner",this.tooltipEle),i=["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"];sf.base.removeClass(t,i),this.setTipClass(e),sf.base.addClass(t,this.tipClass)},e.prototype.adjustArrow=function(e,t,i,n){if(!1!==this.properties.showTipPointer){this.updateTipPosition(t),sf.base.setStyleAttribute(this.tooltipEle,{display:"block"});var s,o,r=this.tooltipEle.clientWidth,a=this.tooltipEle.clientHeight,l=sf.base.select(".e-arrow-tip",this.tooltipEle),h=sf.base.select(".e-arrow-tip-inner",this.tooltipEle),d=l.offsetWidth,c=l.offsetHeight;sf.base.setStyleAttribute(this.tooltipEle,{display:""});var p,u="End"===this.properties.tipPointerPosition,f="Start"===this.properties.tipPointerPosition;if("e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass){if(o="e-tip-bottom"===this.tipClass?"99.9%":-(c-1)+"px",sf.base.setStyleAttribute(h,{top:"-"+("e-tip-bottom"===this.tipClass?c-2:c-6)+"px"}),e)s=(p="Center"!==i||r>e.offsetWidth||this.properties.mouseTrail)&&"Left"===i||!p&&u?r-d-2+"px":p&&"Right"===i||!p&&f?"2px":p&&(u||f)?u?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2-2+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-d/2+2+"px":r/2-d/2+"px"}else s="e-tip-right"===this.tipClass?"99.9%":-(d-1)+"px",sf.base.setStyleAttribute(h,{left:(this.tipClass,-(d-2)+"px")}),o=(p="Center"!==n||a>e.offsetHeight||this.properties.mouseTrail)&&"Top"===n||!p&&u?a-c-2+"px":p&&"Bottom"===n||!p&&f?"2px":a/2-c/2+"px";window.scrollX&&"BottomRight"===this.properties.position&&(s=this.element.offsetLeft+"px"),sf.base.setStyleAttribute(l,{top:o,left:s})}},e.prototype.tooltipHover=function(){this.tooltipEle&&(this.isTooltipOpen=!0)},e.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.properties.animation.close,e,this.findTarget())},e.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(this.mouseAction=!0,t&&!this.properties.mouseTrail){var i=sf.base.closest(t,".e-tooltip-wrap.e-lib.e-popup");i?sf.base.EventHandler.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.properties.animation.close,e,this.findTarget()),0===this.properties.closeDelay&&this.clear())}else this.hideTooltip(this.properties.animation.close,e,this.findTarget()),this.clear()},e.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.properties.animation.close,e,this.findTarget()),sf.base.EventHandler.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},e.prototype.onMouseMove=function(e){if(this.tooltipEle){var t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),sf.base.Animation.stop(this.tooltipEle),sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],"e-popup-open"),this.adjustArrow(e.target,this.properties.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.getScalingFactor(e.target),s=this.calculateTooltipOffset(this.properties.position,n.x,n.y),o=t+s.left+this.properties.offsetX,r=i+s.top+this.properties.offsetY,a=this.checkCollision(e.target,o,r);if(this.tooltipPositionX!==a.horizontal||this.tooltipPositionY!==a.vertical){var l=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?a.vertical+a.horizontal:a.horizontal+a.vertical;a.position=l,this.adjustArrow(e.target,a.position,a.horizontal,a.vertical);var h=this.calculateTooltipOffset(a.position,n.x,n.y);a.left=t+h.left-this.properties.offsetX,a.top=i+h.top-this.properties.offsetY}sf.base.setStyleAttribute(this.tooltipEle,{left:a.left+"px",top:a.top+"px"})}},e.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.hideTooltip(this.properties.animation.close)},e.prototype.touchEnd=function(e){this.tooltipEle&&null===sf.base.closest(e.target,".e-tooltip")&&!this.properties.isSticky&&this.hideTooltip(this.properties.animation.close)},e.prototype.scrollHandler=function(e){this.tooltipEle&&!this.properties.isSticky&&(sf.base.closest(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.hideTooltip(this.properties.animation.close))},e.prototype.renderContent=function(e){var t=sf.base.getAttributeOrDefault(e,"sf-tooltip",null),i=sf.base.getAttributeOrDefault(e,"data-title",null);(!sf.base.isNullOrUndefined(t)&&e?(sf.base.attributes(e,{"data-content":t}),this.isMultiTarget=!0):!sf.base.isNullOrUndefined(i)&&e&&(sf.base.attributes(e,{"data-content":i}),this.isMultiTarget=!0),this.properties.content)||(sf.base.select(".e-tip-content",this.tooltipEle).innerText=e.getAttribute("data-content"))},e.prototype.setHeightWidth=function(e,t,i){this.tooltipEle&&sf.base.setStyleAttribute(this.tooltipEle,{height:t,width:e}),i&&"auto"!==this.tooltipEle.style.width&&(this.tooltipEle.style.maxWidth=e)},e.prototype.appendContainer=function(){"string"==typeof this.properties.container&&("body"===this.properties.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=sf.base.select(this.properties.container,document),sf.base.addClass([this.containerElement],"e-tooltip-popup-container"))),this.containerElement.appendChild(this.tooltipEle)},e.prototype.updateTarget=function(){if(this.contentTargetValue){sf.base.Browser.isDevice&&sf.base.addClass([this.tooltipEle],"e-bigger"),this.appendContainer(),sf.base.removeClass([this.tooltipEle],"e-hidden"),this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content"),this.renderContent(this.contentTargetValue),sf.base.addClass([this.tooltipEle],"e-popup-open"),this.renderPopup(this.contentTargetValue);var e=this.properties.position;this.adjustArrow(this.contentTargetValue,e,this.tooltipPositionX,this.tooltipPositionY),sf.base.Animation.stop(this.tooltipEle),this.reposition(this.contentTargetValue),this.afterContentRender()}},e.prototype.contentUpdated=function(){if(this.tooltipEle){if(!this.isContinuousOpen||this.isRestrictUpdate)return;this.updateTarget()}else this.ctrlId=this.element.id,this.tooltipEle=sf.base.select("#"+this.ctrlId+"_content",document),this.tooltipEle&&(this.setHeightWidth(sf.base.formatUnit(this.properties.width),sf.base.formatUnit(this.properties.height),this.contentTargetValue),this.updateTarget())},e.prototype.afterContentRender=function(){sf.base.removeClass([this.tooltipEle],"e-popup-open"),sf.base.addClass([this.tooltipEle],"e-popup-close"),this.tooltipEventArgs={type:this.contentEvent?this.contentEvent.type.toString():null,isInteracted:!sf.base.isNullOrUndefined(this.contentEvent),hasText:this.hasText(),target:this.getDomObject("target",this.contentTargetValue),name:"beforeOpen",cancel:!1,event:this.contentEvent?this.contentEvent:null,element:this.getDomObject("tooltipElement",this.tooltipEle),left:this.contentEvent?this.getXYValue(this.contentEvent,"x"):null,top:this.contentEvent?this.getXYValue(this.contentEvent,"y"):null},this.isRestrictUpdate=this.eventList.beforeOpen&&!this.isHidden(),this.eventList.beforeOpen?this.triggerEvent("TriggerBeforeOpenEvent",this.tooltipEventArgs):this.beforeOpenCallBack(!1)},e.prototype.beforeOpenCallBack=function(e){if(e)this.isPopupHidden=!0,this.contentTargetValue&&this.popupHide(this.properties.animation.close,this.contentTargetValue),this.mouseMoveBeforeRemove();else{if(sf.base.isNullOrUndefined(this.contentAnimation))return;var t={name:"None"===this.contentAnimation.effect&&"Enable"===sf.base.animationMode?"FadeIn":this.contentAnimation.effect,duration:this.contentAnimation.duration,delay:this.contentAnimation.delay,timingFunction:"easeOut"};("None"===this.contentAnimation.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&(t=void 0),this.popupObj&&(this.popupObj.show(t,this.contentTargetValue),this.properties.openDelay&&this.properties.mouseTrail&&this.mouseMoveEvent&&this.onMouseMove(this.mouseMoveEvent))}this.contentEvent&&this.wireMouseEvents(this.contentEvent,this.contentTargetValue),this.contentTargetValue=this.contentEvent=this.contentAnimation=null},e.prototype.reposition=function(e){if(null!==e&&this.tooltipEle){var t=this.getTooltipPosition(e);this.popupObj&&(this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind())}},e.prototype.renderPopup=function(e){var t=this.properties.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new sf.popups.Popup(this.tooltipEle,{height:this.properties.height,width:this.properties.width,position:{X:t.left,Y:t.top},enableRtl:this.properties.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},e.prototype.openPopupHandler=function(){this.tooltipEle&&this.tooltipEle.classList.contains("e-popup-close")&&this.isMultiTarget&&(sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],"e-popup-open")),this.properties.mouseTrail||this.reposition(this.contentTargetValue?this.contentTargetValue:this.findTarget()),this.tooltipEventArgs.name="Opened",this.isRestrictUpdate=this.eventList.opened&&!this.isHidden(),this.eventList.opened&&this.triggerEvent("TriggerOpenedEvent",this.tooltipEventArgs),this.mouseAction&&!sf.base.isNullOrUndefined(this.tooltipEle)&&this.hideTooltip(this.properties.animation.close)},e.prototype.closePopupHandler=function(){this.clear(),this.tooltipEventArgs.name="Closed",this.isRestrictUpdate=this.eventList.closed&&!this.isHidden(),this.eventList.closed&&this.triggerEvent("TriggerClosedEvent",this.tooltipEventArgs)},e.prototype.getTooltipPosition=function(e){sf.base.setStyleAttribute(this.tooltipEle,{display:"block"}),this.formatPosition();var t=sf.popups.calculatePosition(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),i=this.getScalingFactor(e),n=this.calculateTooltipOffset(this.properties.position,i.x,i.y),s=this.calculateElementPosition(t,n),o=this.collisionFlipFit(e,s[0],s[1]);return o.left=o.left/i.x,o.top=o.top/i.y,sf.base.setStyleAttribute(this.tooltipEle,{display:""}),o},e.prototype.getDomObject=function(e,t){return t?window.sfBlazor.getDomObject(e,t):null},e.prototype.hasText=function(){return!!this.tooltipEle&&""!==this.tooltipEle.innerText.trim()},e.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="x"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var s=e.target.getBoundingClientRect();i=s?"x"===t?s.left:s.top:null}return Math.ceil(i)},e.prototype.destroy=function(){if(this.tooltipEle){var e=sf.base.select("#"+this.ctrlId+"_content_placeholder",document);e&&e.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),sf.base.removeClass([this.element],"e-tooltip"),this.unWireEvents(this.properties.opensOn),this.unWireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},e}();return{wireEvents:function(e,i,n,s,o){new t(e,i,n,s,o);var r=window.sfBlazor.getCompInstance(e);i&&!sf.base.isNullOrUndefined(r)&&(r.formatPosition(),r.wireEvents(s.opensOn),sf.base.removeClass([i],["e-blazor-hidden"]))},contentUpdated:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.contentUpdated()},beforeRenderCallBack:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beforeRenderCallBack(t)},beforeOpenCallBack:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beforeOpenCallBack(t)},beforeCloseCallBack:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beforeCloseCallBack(t)},showTooltip:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s)){if(null!==n&&""!==n){var o=sf.base.select(n,s.element),r=sf.base.select(n,document);o?t=o:r&&(t=r)}t&&0==t.offsetWidth||s.showTooltip(t,i,null)}},hideTooltip:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.hideTooltip(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},refresh:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.isPopupHidden||t.hideTooltip(t.properties.animation.close),t.unWireEvents(t.properties.opensOn),t.wireEvents(t.properties.opensOn))},refreshPosition:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(null===t&&(t=null!==i&&""!==i?sf.base.select(i,n.element):n.element),n.reposition(t))},updateProperties:function(t,i){var n=window.sfBlazor.getCompInstance(t);if(!sf.base.isNullOrUndefined(n))if(n.isRestrictUpdate=!0,(i.target||i.opensOn||i.isSticky)&&n.unWireEvents(n.properties.opensOn),n.properties=e({},n.properties,i),i.target||i.opensOn||i.isSticky)n.wireEvents(n.properties.opensOn),n.formatPosition();else{var s=n.findTarget();if(i.container&&(sf.base.isNullOrUndefined(this.containerElement)||sf.base.removeClass([this.containerElement],"e-tooltip-popup-container"),n.tooltipEle&&s&&n.appendContainer()),(i.height||i.width)&&n.setHeightWidth(sf.base.formatUnit(i.width),sf.base.formatUnit(i.height),s),i.position&&n.formatPosition(),n.tooltipEle&&s){if(i.position&&n.properties.showTipPointer){var o=sf.base.select(".e-arrow-tip-inner",n.tooltipEle),r=sf.base.select(".e-arrow-tip",n.tooltipEle);sf.base.removeClass([r],[n.tipClass]),n.setTipClass(i.position),sf.base.addClass([r],[n.tipClass]),sf.base.setStyleAttribute(o,{top:null,left:null})}n.reposition(s)}n.isRestrictUpdate=!1}}}}()},"./modules/sf-treegrid.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TreeGrid=function(){"use strict";var e=function(){function e(e){this.treeCopyContent="",this.copiedUIdCollection=[],this.parent=e,this.gridClipboard=this.parent.grid.clipboardModule}return e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.gridClipboard.clipBoardTextArea.blur()),this.gridClipboard.isSelect&&(window.getSelection().removeAllRanges(),this.gridClipboard.isSelect=!1)},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){this.gridClipboard.clipBoardTextArea.value=this.gridClipboard.copyContent="";var t=this.parent.grid.getRows();if("Cell"!==this.parent.grid.options.selectionMode){for(var i=this.parent.grid.getSelectedRowIndexes().sort((function(e,t){return e-t})),n=0;n<i.length;n++)if(n>0&&(this.treeCopyContent+="\n"),!t[i[n]].classList.contains("e-summaryrow")){var s=[].slice.call(t[i[n]].querySelectorAll(".e-rowcell")),o=t[i[n]].getAttribute("data-uid");-1===this.copiedUIdCollection.indexOf(o)&&("Parent"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.parentContentData(i[n],t,e,n),this.gridClipboard.getCopyData(s,!1,"\t",e),this.treeCopyContent+=this.gridClipboard.copyContent,this.copiedUIdCollection.push(o),this.gridClipboard.copyContent="","Child"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.childContentData(i[n],t,e))}if(e){var r=[];for(n=0;n<this.parent.grid.getVisibleColumns().length;n++)r[n]=this.parent.grid.getVisibleColumns()[n].headerText;this.gridClipboard.getCopyData(r,!1,"\t",e),this.treeCopyContent=this.gridClipboard.copyContent+"\n"+this.treeCopyContent}var a=document.activeElement;this.gridClipboard.clipBoardTextArea.value=this.gridClipboard.copyContent=this.treeCopyContent,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.gridClipboard.clipBoardTextArea.setSelectionRange(0,this.gridClipboard.clipBoardTextArea.value.length):(window.getSelection().removeAllRanges(),this.gridClipboard.clipBoardTextArea.select()),a.focus(),this.gridClipboard.isSelect=!0,this.copiedUIdCollection=[],this.treeCopyContent=""}}},e.prototype.parentContentData=function(e,t,i,n){var s=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex,o=t[e].cells[s].className.match(/index(\d+)|Level(\d+)/g),r=o[0].match(/\d+/)[0],a=+o[1].match(/\d+/)[0],l=a?a-1:0,h=t.filter((function(e){return e.cells[s].classList.contains("e-gridrowindex"+(parseInt(r)-(l>0?a-l:l))+"Level"+l)}))[0];if(!sf.base.isNullOrUndefined(h)&&h.rowIndex!=e)for(var d=l,c=h.getAttribute("data-uid"),p=0;p<d+1;p++)for(var u=0;u<t.length;u++){var f=t[u].getAttribute("data-uid");if(f===c){e=u;var g=[].slice.call(t[e].querySelectorAll(".e-rowcell"));if(-1===this.copiedUIdCollection.indexOf(f)){this.gridClipboard.getCopyData(g,!1,"\t",i),this.treeCopyContent=n>0?this.treeCopyContent+this.gridClipboard.copyContent+"\n":this.gridClipboard.copyContent+"\n"+this.treeCopyContent,this.copiedUIdCollection.push(f),this.gridClipboard.copyContent="";break}}}},e.prototype.childContentData=function(e,t,i){var n=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex,s=t[e].cells[n].className.match(/index(\d+)|Level(\d+)/g),o=s[0].match(/\d+/)[0],r=+s[1].match(/\d+/)[0]+1,a=t.filter((function(e){return e.cells[n].classList.contains("e-gridrowindex"+o+"Level"+r)}));if(a.length)for(var l=0;l<a.length;l++)for(var h=0;h<t.length;h++)if(!sf.base.isNullOrUndefined(a[l].getAttribute("data-uid"))&&t[h].getAttribute("data-uid")===a[l].getAttribute("data-uid")){if(!sf.base.isNullOrUndefined(t[h])&&!t[h].classList.contains("e-summaryrow")){var d=[].slice.call(t[h].querySelectorAll(".e-rowcell")),c=t[h].getAttribute("data-uid");-1===this.copiedUIdCollection.indexOf(c)&&(this.gridClipboard.getCopyData(d,!1,"\t",i),this.treeCopyContent+="\n"+this.gridClipboard.copyContent,this.gridClipboard.copyContent="",this.copiedUIdCollection.push(c),this.childContentData(h,t,i))}break}},e}();function t(e,t,i){for(var n=e;n&&!(i?n.id===t:n.classList.contains(t));)n=n.parentElement;return n}var i=function(){function e(e){var i=this;this.draggedRows=[],this.selectedRows=[],this.canDrop=!0,this.treegridRows=[],this.rowDragStart=function(e){i.parent.options.hasDetailTemplate&&(i.treegridRows=i.parent.grid.getRows().filter((function(e){return e.classList.contains("e-disable-gridhover")}))),i.startedRow=i.parent.grid.rowDragAndDropModule.startedRow,i.parent.options.hasDetailTemplate&&(i.startedRow.dataset.rowindex=i.treegridRows.indexOf(i.treegridRows.filter((function(e){return e.getAttribute("data-uid")===i.startedRow.getAttribute("data-uid")}))[0]).toString());var t=i.parent.grid.getSelectedRowIndexes();if(i.parent.options.hasDetailTemplate&&i.parent.grid.getSelectedRows().length){t=[];for(var n=0;n<i.parent.grid.getSelectedRows().length;n++)t.push(i.treegridRows.indexOf(i.parent.grid.getSelectedRows()[n]))}i.parent.options.enableVirtualization?i.parent.grid.getSelectedRowIndexes().length?(t=i.parent.grid.getSelectedRowIndexes(),i.selectedRows=i.parent.grid.getSelectedRows()):(t.push(sf.base.closest(e.target,"tr").rowIndex),i.startedRow.dataset.rowindex=sf.base.closest(e.target,"tr").rowIndex.toString(),i.selectedRows.push(sf.base.closest(e.target,"tr"))):i.selectedRows=i.parent.grid.getSelectedRows(),i.gridDragStart.apply(i.parent.grid,[e]);var s=parseInt(i.startedRow.getAttribute("data-rowindex"),10);i.parent.options.hasDetailTemplate&&(s=i.treegridRows.indexOf(i.treegridRows.filter((function(e){return e.getAttribute("data-uid")===i.startedRow.getAttribute("data-uid")}))[0])),0!==i.selectedRows.length&&0!==t.length||(i.selectedRows.push(i.startedRow),t.push(s));for(n=0;n<t.length;n++)i.parent.options.hasDetailTemplate?i.draggedRows.push(i.treegridRows[t[n]]):i.draggedRows.push(i.parent.grid.getRows()[t[n]]);if(i.parent.options.enableVirtualization){var o=parseInt(i.startedRow.getAttribute("data-rowindex"),10);i.parent.dotNetRef.invokeMethodAsync("DragRows",o)}},this.rowDraging=function(e){i.parent.options.hasDetailTemplate&&(i.startedRow.dataset.rowindex=i.treegridRows.indexOf(i.treegridRows.filter((function(e){return e.getAttribute("data-uid")===i.startedRow.getAttribute("data-uid")}))[0]).toString());var n=i.parent.grid.element.querySelector(".e-dropitemscount");i.parent.grid.getSelectedRows().length>1&&n&&(n.style.left=i.parent.grid.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px"),i.gridDrag.apply(i.parent.grid,[e]),i.dragTarget=i.parent.grid.rowDragAndDropModule.dragTarget;var s=i.parent,o=i.parent.element.querySelector(".e-cloneproperties");o.style.cursor="";var r=e.target?sf.base.closest(e.target,"tr"):null,a=-1;a=s.options.hasDetailTemplate?r?i.treegridRows.indexOf(r):-1:r?r.rowIndex:-1;var l,h=s.grid.getRows()[a];(s.options.hasDetailTemplate&&(h=i.treegridRows[a]),i.removeErrorElem(),i.canDrop=!0,-1!==a?i.ensuredropPosition(i.draggedRows,h):(i.canDrop=!1,i.addErrorElem()),!s.options.rowDropTargetID&&i.canDrop&&s.rowDragAndDropModule.updateIcon(i.selectedRows,a,e),s.options.rowDropTargetID)&&((l=t(e.target,"e-treegrid"))&&l.id===i.parent.options.rowDropTargetID&&l.blazor_instance.rowDragAndDropModule.updateIcon(i.selectedRows,a,e));e.target&&sf.base.closest(e.target,"#"+s.options.rowDropTargetID)&&((l=t(e.target,"e-treegrid"))||(o.style.cursor="default"))},this.rowDropped=function(e){i.parent.options.hasDetailTemplate&&!sf.base.isNullOrUndefined(e.target.parentElement)&&(e.target.classList.contains("e-treecolumn-container")||e.target.classList.contains("e-treecell")||e.target.classList.contains("e-treegridexpand")||e.target.classList.contains("e-treegridcollapse")?i.dragTarget=i.treegridRows.indexOf(e.target.offsetParent.parentElement):i.dragTarget=i.treegridRows.indexOf(e.target.parentElement));var n=i.getElementFromPosition(e.helper,e.event),s=n&&!n.classList.contains("e-dlg-overlay")?n:e.target;i.parent.grid.element.classList.remove("e-rowdrag");var o=document.getElementById(i.parent.options.rowDropTargetID);if(i.parent.options.allowRowDragAndDrop&&i.parent.options.rowDropTargetID&&!t(s,"e-treegrid")){var r=s.classList.value,a=s.id,l=parseInt(i.startedRow.getAttribute("data-rowindex"),10);i.parent.options.hasDetailTemplate&&(l=i.treegridRows.indexOf(i.treegridRows.filter((function(e){return e.getAttribute("data-uid")===i.startedRow.getAttribute("data-uid")}))[0]));var h="topSegment"===i.dropPosition?"Above":"bottomSegment"===i.dropPosition?"Below":"middleSegment"===i.dropPosition?"Child":"Invalid";i.parent.dotNetRef.invokeMethodAsync("ReorderRows",l,0,"add",!1,r,a,null,!0,h)}if(i.parent.options.rowDropTargetID&&o&&o.blazor_instance&&o.blazor_instance.getContent().classList.remove("e-allowRowDrop"),!t(s,"e-gridcontent"))return i.dragTarget=null,sf.base.remove(e.helper),void i.updateRowDrop();var d=i.parent;if(d.options.rowDropTargetID?(e.target&&sf.base.closest(e.target,"#"+d.options.rowDropTargetID)||t(e.target,"e-treegrid")&&t(e.target,"e-treegrid").id===d.options.rowDropTargetID)&&sf.base.setValue("dropPosition",i.dropPosition,e):t(e.target,"e-content")&&(i.parent.element.querySelector(".e-errorelem")&&(i.dropPosition="Invalid"),sf.base.setValue("dropPosition",i.dropPosition,e),sf.base.isNullOrUndefined(d.getHeaderContent().querySelector(".e-firstrow-border"))||d.getHeaderContent().querySelector(".e-firstrow-border").remove()),i.updateRowDrop(),i.parent.options.allowRowDragAndDrop&&!i.parent.options.rowDropTargetID){i.parent.grid.rowDragAndDropModule.stopTimer(),i.parent.grid.getContent().classList.remove("e-grid-relative"),i.parent.grid.rowDragAndDropModule.removeBorder(n);var c=i.parent.grid.element.querySelector(".e-dragstartrow");c&&c.classList.remove("e-dragstartrow");var p=i.dragTarget,u=s.classList.value,f=s.id,g=parseInt(i.startedRow.getAttribute("data-rowindex"),10);i.parent.options.hasDetailTemplate&&(g=i.treegridRows.indexOf(i.treegridRows.filter((function(e){return e.getAttribute("data-uid")===i.startedRow.getAttribute("data-uid")}))[0]));var m="topSegment"===i.dropPosition?"Above":"bottomSegment"===i.dropPosition?"Below":"middleSegment"===i.dropPosition?"Child":"Invalid";"Invalid"!==m&&setTimeout((function(){i.parent.dotNetRef.invokeMethodAsync("ReorderRows",g,p,"delete",!0,u,f,null,!1,m)}),10),i.dragTarget=null,i.draggedRows=[]}},this.drop=function(e){i.treeGridDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowRowDragAndDrop&&(this.gridDrag=this.parent.grid.rowDragAndDropModule.drag,this.gridDragStart=this.parent.grid.rowDragAndDropModule.dragStart,this.parent.grid.rowDragAndDropModule.draggable.drag=this.rowDraging,this.parent.grid.rowDragAndDropModule.draggable.dragStop=this.rowDropped,this.parent.grid.rowDragAndDropModule.draggable.dragStart=this.rowDragStart,this.parent.grid.rowDragAndDropModule.droppable.drop=this.drop)}return e.prototype.updateRowDrop=function(){this.removetopOrBottomBorder(),this.removeChildBorder(),sf.base.isNullOrUndefined(this.parent.element.getElementsByClassName("e-firstrow-border")[0])?sf.base.isNullOrUndefined(this.parent.element.getElementsByClassName("e-lastrow-border")[0])||this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove():this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.removeFirstrowBorder=function(e){var t="bottomSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-firstrow-border").length>0&&e&&(0!==e.rowIndex||t)&&this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.removeLastrowBorder=function(e){var t=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader")),i=e&&!t&&this.parent.getRows()[this.parent.getRows().length-1].getAttribute("data-uid")!==e.getAttribute("data-uid"),n=i||"topSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-lastrow-border").length>0&&e&&(i||n)&&this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove()},e.prototype.updateIcon=function(e,i,n){var s=n.target?sf.base.closest(n.target,"tr"):null;this.dropPosition=void 0;var o=0;if(this.removeFirstrowBorder(s),this.removeLastrowBorder(s),this.parent.options.enableVirtualization)if(this.parent.grid.getSelectedRows().length)for(var r=0;r<this.parent.grid.getSelectedRows().length;r++)(sf.base.isNullOrUndefined(s)||s.getAttribute("data-uid")!==this.parent.grid.getSelectedRows()[r].getAttribute("data-uid"))&&t(n.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());else(sf.base.isNullOrUndefined(s)||s.getAttribute("data-uid")!==this.startedRow.getAttribute("data-uid"))&&t(n.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());else for(r=0;r<this.selectedRows.length;r++)(sf.base.isNullOrUndefined(s)||s.getAttribute("data-uid")!==this.selectedRows[r].getAttribute("data-uid"))&&t(n.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());var a=this.parent,l=0,h=this.parent.element.querySelector(".e-toolbar"),d=h?h.offsetHeight:0,c=this.getOffset(a.element),p=a.getHeaderContent().offsetHeight+c.top+d,u=a.grid.scrollModule.content.scrollTop;sf.base.isNullOrUndefined(s)||(o=s.offsetTop-u);var f=((l=a.options.allowTextWrap?e[0].offsetHeight:a.options.enableVirtualization?s.getBoundingClientRect().top:o+p+0)+e[0].offsetHeight-l)/3,g=l+f,m=g+f,v=m+f,b=(c.left,n.event),y=sf.base.isNullOrUndefined(b.pageY)?n.event.changedTouches[0].clientY:b.pageY,C=y<=g,w=y>g&&y<=m,M=y>m&&y<=v;if(C||w||M){if(C&&"Invalid"!==this.dropPosition&&(this.removeChildBorder(),this.dropPosition="topSegment",this.removetopOrBottomBorder(),this.addFirstrowBorder(s),this.removeErrorElem(),this.removeLastrowBorder(s),this.topOrBottomBorder(n.target)),w&&"Invalid"!==this.dropPosition){this.removetopOrBottomBorder();var S,x=sf.base.closest(n.target,"tr");(S=sf.base.isNullOrUndefined(x)?[]:[].slice.call(x.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))).length>0&&this.addRemoveClasses(S,!0,"e-childborder"),this.addLastRowborder(s),this.addFirstrowBorder(s),this.dropPosition="middleSegment"}M&&"Invalid"!==this.dropPosition&&(this.removeErrorElem(),this.removetopOrBottomBorder(),this.removeChildBorder(),this.dropPosition="bottomSegment",this.addLastRowborder(s),this.removeFirstrowBorder(s),this.topOrBottomBorder(n.target))}return this.dropPosition},e.prototype.removeChildBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-childborder"))).length>0&&this.addRemoveClasses(e,!1,"e-childborder")},e.prototype.addFirstrowBorder=function(e){var t=this.parent.element,i=this.parent;if(e&&0===e.rowIndex&&!e.classList.contains("e-emptyrow")){var n=sf.base.createElement("div",{className:"e-firstrow-border"}),s=this.parent.getHeaderContent(),o=0;i.options.toolbar&&(o=document.getElementById(i.element.id+"_gridcontrol_toolbarItems").offsetHeight);var r=!sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID);r&&(n.style.top=this.parent.grid.element.getElementsByClassName("e-gridheader")[0].offsetHeight+o+"px"),n.style.width=r?t.offsetWidth+"px":t.offsetWidth-this.getScrollWidth()+"px",s.querySelectorAll(".e-firstrow-border").length||s.appendChild(n)}},e.prototype.addLastRowborder=function(e){var t=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader"));if(e&&!t&&this.parent.getRows()[this.parent.getRows().length-1].getAttribute("data-uid")===e.getAttribute("data-uid")&&(!this.parent.options.enableVirtualization||this.parent.grid.rowDragAndDropModule.isOverflowBorder)){var i=sf.base.createElement("div",{className:"e-lastrow-border"}),n=this.parent.getContent();i.style.width=this.parent.element.offsetWidth-this.getScrollWidth()+"px",n.querySelectorAll(".e-lastrow-border").length||(n.classList.add("e-treegrid-relative"),n.appendChild(i),i.style.bottom=this.getScrollWidth()+"px")}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?this.parent.grid.Scroll.getScrollBarWidth():0},e.prototype.addErrorElem=function(){var e=document.getElementsByClassName("e-cloneproperties")[0];if(!e.querySelectorAll(".e-errorelem").length&&!this.parent.options.rowDropTargetID){var t=document.createElement("div");sf.base.classList(t,["e-errorcontainer"],[]),sf.base.classList(t,["e-icons","e-errorelem"],[]);var i=e.querySelector(".errorValue"),n=e.querySelector(".e-rowcell").innerHTML;i&&(n=i.innerHTML,i.parentNode.removeChild(i)),e.querySelector(".e-rowcell").innerHTML="";var s=document.createElement("span");s.className="errorValue",s.style.paddingLeft="16px",s.innerHTML=n,e.querySelector(".e-rowcell").appendChild(t),e.querySelector(".e-rowcell").appendChild(s)}},e.prototype.removeErrorElem=function(){var e=document.querySelector(".e-errorelem");e&&e.remove()},e.prototype.topOrBottomBorder=function(e){var t,i=sf.base.closest(e,"tr");!(t=i?[].slice.call(i.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")):[]).length||this.parent.options.enableVirtualization&&!this.parent.grid.rowDragAndDropModule.isOverflowBorder||("topSegment"===this.dropPosition&&(this.addRemoveClasses(t,!0,"e-droptop"),this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()),"bottomSegment"===this.dropPosition&&this.addRemoveClasses(t,!0,"e-dropbottom"))},e.prototype.removetopOrBottomBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-dropbottom, .e-droptop"))).length&&(this.addRemoveClasses(e,!1,"e-dropbottom"),this.addRemoveClasses(e,!1,"e-droptop"))},e.prototype.addRemoveClasses=function(e,t,i){for(var n=0,s=e.length;n<s;n++)t?e[n].classList.add(i):e[n].classList.remove(i)},e.prototype.getOffset=function(e){var t=e.getBoundingClientRect(),i=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||i.scrollTop,o=window.pageXOffset||n.scrollLeft||i.scrollLeft,r=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,l=t.top+s-r,h=t.left+o-a;return{top:Math.round(l),left:Math.round(h)}},e.prototype.treeGridDrop=function(e){var t,i=this.parent,n=sf.base.closest(e.target,"tr");if(!("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.parentElement.id===i.element.id||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.parentElement.id!==i.element.id)&&(e.droppedElement.parentElement.parentElement.id!==i.element.id&&(t=e.droppedElement.parentElement.parentElement.blazor_instance),t.element.id===i.element.id||t.options.rowDropTargetID===i.element.id)){var s=this.getTargetIdx(n);isNaN(s)&&(s=0),i.options.allowPaging&&(s=s+i.options.currentPage*i.options.pageSize-i.options.pageSize),this.removetopOrBottomBorder(),this.removeChildBorder();var o=e.target.classList.value,r=e.target.id,a="topSegment"===this.dropPosition?"Above":"bottomSegment"===this.dropPosition?"Below":"middleSegment"===this.dropPosition?"Child":"Invalid";i.dotNetRef.invokeMethodAsync("ReorderRows",0,s,"add",!1,o,r,t.dotNetRef,!1,a),t.dotNetRef.invokeMethodAsync("ReorderRows",0,s,"delete",!1,o,r,null,!1,a)}},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("data-rowindex"),10):0},e.prototype.getElementFromPosition=function(e,t){var i=this.getPosition(t);e.style.display="none";var n=document.elementFromPoint(i.x,i.y);return e.style.display="",n},e.prototype.ensuredropPosition=function(e,t){var i=this,n=this.parent,s=n.grid.getRows();n.options.hasDetailTemplate&&(s=this.treegridRows);var o=this.parent.options.hasDetailTemplate,r=this.parent.options.treeColumnIndex,a=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?o?r+2:r+1:o?r+1:r;e.filter((function(n){for(var o=/index(\d+)|Level(\d+)/g,r=+n.cells[a].className.match(o)[1].match(/\d+/)[0],l=!1,h=new Array,d=0;d<s.length;d++)if(s[d]==e[0]&&(l=!0),l&&s[d]!=e[0]){var c=+s[d].cells[a].className.match(o)[1].match(/\d+/)[0];if(!(c!=r&&c>r))break;h.push(s[d])}if(h.length){if(-1!==h.map((function(e){return e.getAttribute("data-uid")})).indexOf(t.getAttribute("data-uid")))return i.dropPosition="Invalid",i.addErrorElem(),void(i.canDrop=!1);i.ensuredropPosition(h,t)}}))},e.prototype.getPosition=function(e){var t={};return t.x=sf.base.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=sf.base.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,t},e}(),n=function(){function e(e,t){this.parent=t,this.dotNetRef=e}return e.prototype.renderHeaderCheckbox=function(e,t){var i=sf.base.createElement("div",{className:"e-checkbox-wrapper e-css e-hierarchycheckbox"}),n=sf.base.createElement("input",{className:"e-treeselectall",attrs:{type:"checkbox"}});i.appendChild(n);var s=sf.base.createElement("span",{className:"e-frame e-icons",styles:"width: 18px;"});i.appendChild(s),s.addEventListener("click",this.headerSelect.bind(this));var o=sf.base.createElement("span",{className:"e-label"});i.appendChild(o);var r=e.querySelectorAll(".e-headercontent th")[t];if(sf.base.isNullOrUndefined(r.querySelector(".e-checkbox-wrapper"))){var a=r.querySelector(".e-headercelldiv");a.insertBefore(i,a.firstChild)}},e.prototype.updateHeaderCheckbox=function(e,t){"intermediate"===t?(e.classList.add("e-stop"),e.classList.remove("e-check")):"check"===t?(e.classList.add("e-check"),e.classList.remove("e-stop")):(e.classList.remove("e-stop"),e.classList.remove("e-check"))},e.prototype.headerSelect=function(e){var t=e.currentTarget,i="uncheck";t.classList.contains("e-check")?t.classList.remove("e-check"):t.classList.contains("e-stop")?t.classList.remove("e-stop"):(t.classList.add("e-check"),i="check"),this.dotNetRef.invokeMethodAsync("HeaderSelectAll",i)},e}(),s=function(){function t(e,t,i,n){var s=this;if(this.columnModel=[],window.sfBlazor=window.sfBlazor,this.element=t,!sf.base.isNullOrUndefined(this.element))if(this.grid=t.querySelector("#"+t.id+"_gridcontrol").blazor__instance,this.dotNetRef=n,this.options=i,this.dataId=e,sf.base.isNullOrUndefined(this.element)||(this.element.blazor_instance=this,window.sfBlazor.setCompInstance(this)),this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.element.parentElement.classList.contains("e-dlg-content")){var o=setInterval((function(){s.initModules(),clearInterval(o)}),500);sf.base.isNullOrUndefined(this.checkboxcolumnModule)&&this.initModules()}else this.initModules()}return t.prototype.initModules=function(){this.clipboardModule=new e(this),this.rowDragAndDropModule=new i(this),this.checkboxcolumnModule=new n(this.dotNetRef,this),this.wireEvents()},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.KeyDownHandler,this)},t.prototype.getContent=function(){return this.content},t.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},t.prototype.getHeaderContent=function(){return this.header},t.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},t.prototype.getRows=function(){return[].slice.call(this.getContent().querySelectorAll(".e-row"))},t.prototype.KeyDownHandler=function(e){67===e.keyCode&&e.ctrlKey?this.clipboardModule.copy():72===e.keyCode&&e.ctrlKey&&e.shiftKey&&this.clipboardModule.copy(!0)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"keydown",this.KeyDownHandler)},t.prototype.destroy=function(){this.unWireEvents()},t}();return{initialize:function(e,t,i,n){sf.base.enableBlazorMode(),new s(e,t,i,n)},modelChanged:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&(i.options=t,t.enableVirtualization&&t.isExpandCollapse)){i.grid.virtualContentModule.preventEvent=!0}},treeColumnIndexUpdate:function(e,t){window.sfBlazor.getCompInstance(e).options.treeColumnIndex=t},frozenHeight:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.grid.freezeModule.refreshRowHeight()},headerCheckbox:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.checkboxcolumnModule.renderHeaderCheckbox(i.element,t)},updateCheckbox:function(e,t,i){var n=window.sfBlazor.getCompInstance(e),s=n.element.querySelectorAll(".e-gridheader th")[t].querySelector("span.e-frame");n.checkboxcolumnModule.updateHeaderCheckbox(s,i)},copyToClipBoard:function(e,t){var i=window.sfBlazor.getCompInstance(e);"Cell"===i.grid.options.selectionMode?i.grid.clipboardModule.copy(t):i.clipboardModule.copy(t)},paste:function(e,t,i,n){window.sfBlazor.getCompInstance(e).grid.clipboardModule.paste(t,i,n)},destroy:function(e){window.sfBlazor.getCompInstance(e).destroy()}}}()},"./modules/sf-treemap.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Treemap=function(){"use strict";var e=function(){function e(e,t){window.sfBlazor=window.sfBlazor,this.resizeTo=0,this.element=e,this.dotNetRef=t,this.dataId=e.id,window.sfBlazor.setCompInstance(this)}return e.prototype.initializeEvents=function(){sf.base.EventHandler.add(this.element,"touchend mouseup",this.mouseUp.bind(this),this),sf.base.EventHandler.add(this.element,"touchmove mousemove",this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"touchstart mousedown",this.mouseDown.bind(this),this),sf.base.EventHandler.add(this.element,"mouseleave",this.mouseLeave.bind(this),this),sf.base.EventHandler.add(this.element,"contextmenu",this.contextMenuEvent.bind(this),this),sf.base.EventHandler.add(this.element,"keyup",this.keyActionHandler.bind(this),this),window.addEventListener("resize",this.resize.bind(this)),new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"})},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"touchend mouseup",this.mouseUp),sf.base.EventHandler.remove(this.element,"touchmove mousemove",this.mouseMove),sf.base.EventHandler.remove(this.element,"touchstart mousedown",this.mouseDown),sf.base.EventHandler.remove(this.element,"mouseleave",this.mouseLeave),sf.base.EventHandler.remove(this.element,"contextmenu",this.contextMenuEvent),window.removeEventListener("resize",this.resize.bind(this)),sf.base.EventHandler.remove(this.element,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.element,"keyup",this.keyActionHandler);var e=sf.base.getInstance(this.element,this.keyActionHandler);e&&e.destroy(),this.element=null,this.dotNetRef=null},e.prototype.keyActionHandler=function(e){if("enter"===e.action&&"keydown"===e.type&&(this.mouseDownProcess(e),this.mouseUpProcess(e)),"Tab"===e.code&&"keyup"===e.type&&(this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",e.target.id,0,0,!0,""),(e.target.id.indexOf("_Left_Page_Rect")>-1||e.target.id.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef))){var t=e.target.id,i=document.getElementById(this.element.id+"_Paging_Text").textContent,n=(i=i.trim().replace("\n","")).split("/").map(Number);t.indexOf("_Left_Page_Rect")>-1?document.getElementById(t).style.outlineColor=n[0]+1!=n[1]?"":"transparent":document.getElementById(t).style.outlineColor=n[0]!=n[1]+1?"":"transparent"}},e.prototype.contextMenuEvent=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerRightClick",e.layerX,e.layerY)},e.prototype.resize=function(){var e,t,i=this;if(!sf.base.isNullOrUndefined(this.element)){var n=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(n)){n.style.display="none";var s=this.element.getBoundingClientRect();e=s.width,t=s.height,n.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){i.dotNetRef.invokeMethodAsync("TriggerResize",e,t,sf.base.Browser.isIE)}),500)))},e.prototype.mouseDown=function(e){this.enableDrillDown&&document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto"),"touchstart"===e.type&&this.treemapTooltip(e),this.mouseDownProcess(e)},e.prototype.mouseDownProcess=function(e){e.preventDefault();var t=this.getElementId(e.target.id);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseDown",e.target.id,t,3===e.which,"touchstart"===e.type?e.touches[0].clientX:e.layerX,"touchstart"===e.type?e.touches[0].clientY:e.layerY)},e.prototype.mouseUp=function(e){this.mouseUpProcess(e)},e.prototype.mouseUpProcess=function(e){var t=this,i=this.getElementId(e.target.id);this.dotNetRef&&("touchend"==e.type&&document.getElementById(this.element.id+"_Interactive_Legend")&&(clearTimeout(this.arrowCountTimer),this.arrowCountTimer=setTimeout((function(){var e=document.getElementById(t.element.id+"_Interactive_Legend");null!=e&&e.setAttribute("d","")}),1500)),this.dotNetRef.invokeMethodAsync("TriggerMouseUp",e.target.id,i,3===e.which))},e.prototype.mouseMove=function(e){"mousemove"==e.type&&this.treemapTooltip(e);var t=e.target.id;this.enableDrillDown&&(t.indexOf("_Level_Index_")>-1&&t.indexOf("_Item_Index_")>-1&&t.indexOf("_Text")>-1&&parseInt(t.split("_Level_Index_")[1])!==this.levelCount-1&&(e.target.textContent.indexOf("[+]")>-1||e.target.textContent.indexOf("[-]")>-1)?document.getElementById(this.element.id+"_svg").setAttribute("cursor","pointer"):document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto"))},e.prototype.treemapTooltip=function(e){var t,i,n=this;if(null!=this.element){var s=this.element.children[1],o=s.getBoundingClientRect(),r=s.ownerDocument.defaultView.pageXOffset,a=s.ownerDocument.defaultView.pageYOffset,l=s.ownerDocument.documentElement.clientTop,h=s.ownerDocument.documentElement.clientLeft,d=o.left+r-h,c=o.top+a-l;t=("touchstart"===e.type?e.touches[0].clientX:e.pageX)-d,i=("touchstart"===e.type?e.touches[0].clientY:e.pageY)-c}if(this.dotNetRef){var p=e.target.id;if(-1===p.indexOf(this.element.id)){var u=e.target.closest("."+this.element.id+"_Label_Template");!sf.base.isNullOrUndefined(u)&&u.id.indexOf("_Item_Index_")>-1&&(p=u.id)}var f="";p===this.element.id+"_TreeMap_Title"&&e.target.textContent.indexOf("...")>-1?f="Title":p===this.element.id+"_LegendTitle"&&e.target.textContent.indexOf("...")>-1?f="LegendTitle":p.indexOf("_Legend_Text_")>-1&&e.target.textContent.indexOf("...")>-1&&(f="LegendText"),clearTimeout(this.tooltipCountTimer),this.dotNetRef.invokeMethodAsync("TriggerMouseMove",p,t,i,!1,f),"touchstart"===e.type&&(this.tooltipCountTimer=setTimeout((function(){n.dotNetRef.invokeMethodAsync("TriggerMouseLeave")}),1500))}},e.prototype.mouseLeave=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseLeave")},e.prototype.getElementId=function(e){return sf.base.isNullOrUndefined(e)||""===e?"":document.getElementById(e).textContent},e}();return{initialize:function(t,i,n,s){return new e(t,i).initializeEvents(),this.getElementSize(t.id,n,s)},getElementSize:function(e,t,i){var n,s,o=document.getElementById(e);if(null!=o){o.style.height=t,o.style.width=i;var r=o.getBoundingClientRect();n=r.width,s=r.height}return{width:n,height:s,isIE:sf.base.Browser.isIE}},updateProperty:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.enableDrillDown=t.enableDrillDown,i.levelCount=t.levelCount)},setElementAttribute:function(e,t,i,n,s,o,r,a,l){for(var h=0;h<i.length;h++){var d=document.getElementById(i[h]+"_RectPath");if(null!==d){var c=d.getAttribute("class"),p=void 0;if(sf.base.isNullOrUndefined(c)&&(p=document.createAttribute("class"),c=""),"Selection"===a&&"treeMapHighlight"===c&&(d.setAttribute("class",""),c=""),"treeMapSelection"!==c){for(var u=0;u<t.length;u++){var f=document.getElementById(t[u]);null!==f&&(f.setAttribute("fill",n),f.setAttribute("opacity",s),f.setAttribute("stroke",o),f.setAttribute("stroke-width",r))}d.setAttribute("fill",n),d.setAttribute("opacity",s),d.setAttribute("stroke",o),d.setAttribute("stroke-width",r),c="Highlight"===a||"LegendHighlight"===a?"treeMapHighlight":"treeMapSelection",!sf.base.isNullOrUndefined(p)&&sf.base.isNullOrUndefined(d.getAttribute("class"))?(p.value=c,d.setAttributeNode(p)):d.setAttribute("class",c);var g=window.sfBlazor.getCompInstance(l).getElementId(i[h]+"_Text");"Selection"===a?e.invokeMethodAsync("TriggerItemSelect",g):"Highlight"===a&&e.invokeMethodAsync("TriggerItemHighlight")}}}},removeElementAttribute:function(e,t,i,n,s,o,r,a,l,h,d){for(var c=0;c<o.length;c++){var p=document.getElementById(o[c]+"_RectPath");if(null!=p){var u=p.getAttribute("class");if("Highlight"===d&&"treeMapSelection"!==u||"Selection"===d&&"treeMapSelection"===u){for(var f=0;f<e.length;f++){var g=document.getElementById(e[f]);null!=g&&(g.setAttribute("fill",t),g.setAttribute("opacity",i),g.setAttribute("stroke",n),g.setAttribute("stroke-width",s))}p.setAttribute("fill",r[c]),p.setAttribute("opacity",a[c]),p.setAttribute("stroke",l[c]),p.setAttribute("stroke-width",h[c]),p.setAttribute("class","")}}}},templateElementSize:function(e,t){for(var i,n,s,o,r=document.getElementById(e),a=r.clientWidth,l=r.clientHeight,h=r.getAttribute("style").split(";"),d=0;d<h.length;d++){if(-1!==h[d].indexOf("left")){var c=h[d].split(":"),p=parseFloat(c[c.length-1]);i=-1!==t.indexOf("Left")?p:-1===t.indexOf("Right")?p-a/2:p-a,h[d]="left:"+i+"px"}else if(-1!==h[d].indexOf("top")){var u=h[d].split(":"),f=parseFloat(u[u.length-1]);n=-1!==t.indexOf("Top")?f:-1===t.indexOf("Bottom")?f-l/2:f-l,h[d]="top:"+n+"px"}o=h[d]+";",s=0===d?o:s.concat(o)}r.setAttribute("style",s)},setTemplateTooltipLocation:function(e,t,i){var n=document.getElementById(e+"_Tooltip"),s=document.getElementById(e+"_TreeMap_Border");if(n&&s){var o,r=Number(s.getAttribute("x")),a=Number(s.getAttribute("y")),l=Number(s.getAttribute("width")),h=n.getBoundingClientRect(),d=void 0;i-h.height<a?(d=t+h.width/2>l?(l-h.width).toString()+"px":t-h.width/2<r?n.style.left=r.toString()+"px":(t-h.width/2).toString()+"px",o=i.toString()+"px"):t+h.width/2>l?(d=(l-h.width).toString()+"px",o=(i-h.height).toString()+"px"):t-h.width/2<r?(d=r.toString()+"px",o=(i-h.height).toString()+"px"):(d=(t-h.width/2).toString()+"px",o=(i-h.height).toString()+"px"),n.style.left=d||"0",n.style.top=o||"0",n.style.visibility="visible"}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.unWireEvents()}}}()},"./modules/sf-treeview.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TreeView=function(){"use strict";var e="e-list-item",t="e-list-parent",n="e-hover",s="e-icon-collapsible",o="e-icon-expandable",r="e-icons",a="block",l="e-active",h="e-treeview",d="e-node-focus",c="e-checkbox-wrapper",p="e-text-content",u="e-sibling",f="e-drop-in",g="e-drop-next",m="e-no-drop",v="e-disable",b=function(){function b(e,t,i,n){this.isHelperElement=!0,this.mouseDownStatus=!1,this.mouseUpStatus=!1,this.preventExpand=!1,this.keyBoardAction=!1,this.isNodeRendered=!1,this.isEdited=!1,this.startTime=0,this.endTime=0,this.isKeyUp=!1,this.timer=0,this.isParentMouseDown=!1,this.isAnimationCompleted=!0,this.element=t,this.dataId=e,this.dotNetRef=n,this.options=i,window.sfBlazor.setCompInstance(this)}return b.prototype.render=function(){this.dragStartAction=!1,this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:o,expandIconPosition:"Left"},this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.animationObj=new sf.base.Animation({});var e=this.element.querySelectorAll("li");e.length>0&&!sf.base.Browser.isDevice&&e[0].setAttribute("tabindex","0"),this.setDisabledMode(this.options.disabled),this.setMultiSelect(this.options.allowMultiSelection),this.options.hasTemplate&&this.element.classList.add("e-interaction")},b.prototype.setDisabledMode=function(e){this.setDragAndDrop(this.options.allowDragAndDrop),this.wireEditingEvents(this.options.allowEditing),this.checkAllDisabled(e),e?this.unWireEvents():this.wireEvents()},b.prototype.checkAllDisabled=function(e){e?this.element.classList.add("e-disabled"):this.element.classList.remove("e-disabled")},b.prototype.updateWrap=function(e){var t=this;this.options.fullRowSelect&&sf.base.selectAll("li",e||this.element).forEach((function(e){var i=sf.base.select(".e-fullrow",e);i&&i.nextElementSibling&&(i.style.height=t.options.allowTextWrap?i.nextElementSibling.offsetHeight+"px":"")}))},b.prototype.setTextWrap=function(){this.options.allowTextWrap&&!this.element.classList.contains("e-text-wrap")?sf.base.addClass([this.element],"e-text-wrap"):!this.options.allowTextWrap&&this.element.classList.contains("e-text-wrap")&&sf.base.removeClass([this.element],"e-text-wrap"),this.updateWrap()},b.prototype.mouseDownHandler=function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.options.allowMultiSelection&&sf.base.EventHandler.add(this.element,"contextmenu",this.preventContextMenu,this)},b.prototype.mouseupHandler=function(){this.mouseUpStatus=!0},b.prototype.onMouseLeave=function(e){this.removeHover()},b.prototype.unWireEvents=function(){if(this.wireExpandOnEvent(!1),this.options.allowTextWrap){var e=this.getParentElement(this.element);"BODY"!=e.nodeName&&sf.base.EventHandler.remove(e,"mousedown mouseup mousemove",this.resizeHandler)}sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"focusin",this.focusIn),sf.base.EventHandler.remove(this.element,"focusout",this.focusOut),sf.base.EventHandler.remove(this.element,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.element,"mouseout",this.onMouseLeave),sf.base.EventHandler.remove(this.element,"contextmenu",this.contextLongPress),sf.base.Browser.isDevice&&(sf.base.EventHandler.remove(this.element,"touchstart",this.touchStart),sf.base.EventHandler.remove(this.element,"touchend",this.touchEnd)),!this.options.disabled&&this.keyboardModule&&this.keyboardModule.destroy()},b.prototype.keyboardActionHandler=function(e){this.isKeyUp=!0,this.keyAction=e;var t=e.target,i=this.getFocusedNode();if(!t||!t.classList.contains("e-input")&&"INPUT"!=t.nodeName&&"TEXTAREA"!=t.nodeName){e.preventDefault();var n={cancel:!1,event:e},s=i.getAttribute("data-uid");this.dotNetRef.invokeMethodAsync("TriggerKeyboardEvent",n,s,e.action,e.key)}else{var o=t;"enter"===e.action?(o.blur(),i.focus(),sf.base.addClass([i],d)):"escape"===e.action&&(o.value=this.oldText,o.blur(),i.focus(),sf.base.addClass([i],d))}},b.prototype.setMultiSelect=function(e){this.options.allowMultiSelection=e,this.element.toggleAttribute("aria-multiselectable",e)},b.prototype.setCssClass=function(e){this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" ")),e&&sf.base.addClass([this.element],e.split(" ")),this.options.cssClass=e},b.prototype.wireEditingEvents=function(e){var t=this;if(e&&!this.options.disabled){var i=this;this.touchEditObj=new sf.base.Touch(this.element,{tap:function(e){t.isDoubleTapped(e)&&2===e.tapCount&&(e.originalEvent.preventDefault(),i.editingHandler(e.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},b.prototype.setDragAndDrop=function(e){e&&!this.options.disabled?this.initializeDrag():this.destroyDrag()},b.prototype.setDragArea=function(e){this.options.allowDragAndDrop&&(this.dragObj.dragArea=e)},b.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},b.prototype.scrollUp=function(e){var t=sf.base.select(".e-fullrow",this.element);e.scrollBy(0,-t.offsetHeight/2)},b.prototype.scrollDown=function(e){var t=sf.base.select(".e-fullrow",this.element);e.scrollBy(0,t.offsetHeight/2)},b.prototype.clearTimer=function(){window.clearInterval(this.timer)},b.prototype.initializeDrag=function(){var i,s=this;this.dragObj=new sf.base.Draggable(this.element,{enableTailMode:!0,dragArea:this.options.dropArea,distance:5,dragTarget:"."+p,helper:function(n){s.dragTarget=n.sender.target;var a=sf.base.closest(s.dragTarget,"."+h),d=sf.base.closest(s.dragTarget,"."+p);if(s.dragLi=sf.base.closest(s.dragTarget,"."+e),s.options.fullRowSelect&&!d&&s.dragTarget.classList.contains("e-fullrow")&&(d=s.dragTarget.nextElementSibling),!s.dragTarget||!n.element.isSameNode(a)||!d||s.dragTarget.classList.contains(h)||s.dragTarget.classList.contains(t)||s.dragTarget.classList.contains(e)||s.dragLi.classList.contains(v))return!1;var c=d.cloneNode(!0);if(sf.base.isNullOrUndefined(sf.base.select("div."+r,c))){var u=sf.base.createElement("div",{className:r+" "+o});c.insertBefore(u,c.children[0])}var f="e-drag-item "+h+" "+s.options.cssClass+" "+(s.options.enableRtl?"e-rtl":"");(i=sf.base.createElement("div",{className:f})).appendChild(c);var g=s.element.querySelectorAll("."+l).length;if(g>1&&s.options.allowMultiSelection&&s.dragLi.classList.contains(l)){var m=sf.base.createElement("span",{className:"e-drop-count",innerHTML:""+g});i.appendChild(m)}return document.body.appendChild(i),document.body.style.cursor="",s.dragData=s.getNodeData(s.dragLi),s.virtualEle=i,i},drag:function(e){if(s.clearTimer(),s.mouseUpStatus)return sf.base.detach(i),sf.base.removeClass([s.element],"e-dragging"),s.removeVirtualEle(),void(document.body.style.cursor="");s.dragObj.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(e.event.targetTouches)||sf.base.Browser.isDevice?60:-20}}),s.dragAction(e,i);var t,n=s.getScrollParent(e.target);if(!sf.base.isNullOrUndefined(n)){if(t=n.getBoundingClientRect(),s.virtualEle.style.position="fixed",e.event.y<=t.top+30||t.top<0&&e.event.y<=30){var o=s;s.timer=window.setInterval((function(){o.scrollUp(n)}),200)}if(e.event.y>=(t.top<0?n.clientHeight-60:t.top+n.clientHeight-60)){var r=s;s.timer=window.setInterval((function(){r.scrollDown(n)}),200)}}},dragStart:function(t){if(!sf.base.isNullOrUndefined(t.target)){sf.base.addClass([s.element],"e-dragging");var n,o=sf.base.closest(t.target,"."+e);o&&(n=parseInt(o.getAttribute("aria-level"),10),sf.base.EventHandler.add(o,"mouseup",s.mouseupHandler,s));var r=s.getDragEvent(t.event,s,null,t.target,null,i,n);if(r.draggedNode.classList.contains("e-editing"))s.dragObj.intDestroy(t.event),s.dragCancelAction(i);else{s.dragStartEventArgs=t;var a=s.getXYValue(t.event,"X"),l=s.getXYValue(t.event,"Y");i.style.display="none",s.dotNetRef.invokeMethodAsync("TriggerDragStartEvent",s.updateObjectValues(r),a,l)}}},dragStop:function(t){if(!sf.base.isNullOrUndefined(t.target)){s.clearTimer(),sf.base.removeClass([s.element],"e-dragging");var i,o=sf.base.select("."+n,s.element);t.target.classList.contains(u)&&(t.target=sf.base.isNullOrUndefined(o)?sf.base.closest(t.target,"."+e):o),s.sibEle=sf.base.select("."+u),s.sibEle&&(i=s.sibEle.offsetTop),s.removeVirtualEle();var r=t.target;s.dropRoot=sf.base.closest(r,".e-droppable"),s.isHelperElement=!0,r&&s.dropRoot||(t.helper&&t.helper.parentNode&&sf.base.remove(t.helper),document.body.style.cursor="",s.isHelperElement=!1);var a,l=sf.base.closest(r,"."+e),h=l;h&&(s.isUp=h.offsetTop>i),sf.base.isNullOrUndefined(s.sibEle)&&(s.isUp=!0),l&&(a=parseInt(l.getAttribute("aria-level"),10),sf.base.EventHandler.remove(l,"mouseup",s.mouseupHandler),s.mouseUpStatus=!1);var d=r,c=s.getDragEvent(t.event,s,r,d,null,t.helper,a);s.dragStopEventArgs=t,c.preventTargetExpand=!1;var p=s.getXYValue(t.event,"X"),f=s.getXYValue(t.event,"Y");sf.base.isNullOrUndefined(c.dropIndicator)&&(c.dropIndicator=m,document.body.style.cursor="not-allowed"),s.dotNetRef.invokeMethodAsync("TriggerDragStopEvent",s.updateObjectValues(c),p,f)}}}),this.dropObj=new sf.base.Droppable(this.element,{out:function(e){sf.base.isNullOrUndefined(e&&e.target)||e.target.classList.contains(u)||(document.body.style.cursor="not-allowed")},over:function(e){document.body.style.cursor=""}})},b.prototype.updateObjectValues=function(e){return e.clonedNode=null,e.draggedNode=null,e.draggedParentNode=null,e.dropTarget=null,e.droppedNode=null,e.target=null,e},b.prototype.dragNodeStop=function(e){this.dragParent=e.draggedParentNode,this.preventExpand=e.preventTargetExpand,(e.cancel||e.dropIndicator==m)&&(this.dragStopEventArgs.helper.parentNode&&sf.base.remove(this.dragStopEventArgs.helper),document.body.style.cursor="",this.isHelperElement=!1),this.dragStartAction=!1,this.isHelperElement&&this.dropAction(this.dragStopEventArgs,!0)},b.prototype.dragStartActionContinue=function(e){e?(this.dragObj.intDestroy(this.dragStartEventArgs.event),this.dragCancelAction(this.virtualEle)):(this.virtualEle.style.display=a,this.dragStartAction=!0,this.dragStartEventArgs.bindEvents(sf.base.getElement(this.dragStartEventArgs.dragElement)))},b.prototype.getId=function(e){return sf.base.isNullOrUndefined(e)?null:"string"==typeof e?e:"object"===i(e)?sf.base.getElement(e).getAttribute("data-uid"):null},b.prototype.getOffsetValue=function(e,t){var i,n=e.target.classList;if("mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(n))i="Y"===t?e.event.offsetY:e.event.offsetX;else{var s=e.target.getBoundingClientRect();i=Math.ceil("Y"===t?e.event.clientY-s.top:e.event.clientX-s.left)}return i},b.prototype.dropAction=function(t,i){var n,s,o=this.getOffsetValue(t,"Y"),r=t.target,a=!1;if((n=i?window.sfBlazor.getCompInstance(this.dataId):t.dragData.draggable.blazor__instance)&&n.dragTarget){var d=n.dragTarget,c=sf.base.closest(d,"."+e),p=sf.base.closest(r,"."+e);if(null==p&&r.classList.contains(h)&&(p=r.firstElementChild),i?sf.base.remove(t.helper):sf.base.remove(t.droppedElement),r&&!r.closest("."+h+".e-droppable"))return;if(document.body.style.cursor="",!p||p.isSameNode(c)||this.isDescendant(c,p))return;if(n.options.allowMultiSelection&&c.classList.contains(l)){var u=sf.base.selectAll("."+l,n.element);if(t.target.offsetHeight<=33&&o>t.target.offsetHeight-10&&o>6)for(var f=u.length-1;f>=0;f--)p.isSameNode(u[f])||this.isDescendant(u[f],p)||this.appendNode(r,u[f],p,t,n,o);else for(f=0;f<u.length;f++)p.isSameNode(u[f])||this.isDescendant(u[f],p)||this.appendNode(r,u[f],p,t,n,o)}else this.appendNode(r,c,p,t,n,o);s=parseInt(c.getAttribute("aria-level"),10),a=!0}var g=i?t.element:t.dragData.draggedElement,m=this.getDragEvent(t.event,n,r,t.target,g,null,s,a),v=this.getXYValue(t.event,"X"),b=this.getXYValue(t.event,"Y");this.dotNetRef.invokeMethodAsync("TriggerNodeDropped",this.updateObjectValues(m),v,b)},b.prototype.isDoubleTapped=function(t){var i,n=t.originalEvent.target;return n&&t.tapCount&&(1===t.tapCount?this.firstTap=sf.base.closest(n,"."+e):2===t.tapCount&&(i=sf.base.closest(n,"."+e))),this.firstTap===i},b.prototype.isDescendant=function(e,t){for(var i=t.parentNode;!sf.base.isNullOrUndefined(i);){if(i===e)return!0;i=i.parentNode}return!1},b.prototype.appendNode=function(e,t,i,n,r,a){var l=sf.base.closest(e,"."+c),d=sf.base.closest(n.target,"."+s),p=sf.base.closest(n.target,"."+o),u=this.getOffsetValue(n,"X");t.classList.contains(v)||l||!(p&&a<5||d&&u<3||p&&a>19||d&&u>19||!p&&!d)?this.dropAsChildNode(t,i,r,null,n,a,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,n,r):e.firstElementChild&&e.classList.contains(h)?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,n,r):e.classList.contains(s)||e.classList.contains(o)?this.dropAsSiblingNode(t,i,n,r):this.dropAsChildNode(t,i,r,null,n,a)},b.prototype.dropAsSiblingNode=function(i,n,r,a){var l,h=sf.base.closest(n,"."+t),d=sf.base.closest(i,"."+t),c=sf.base.closest(d,"."+e),p=sf.base.closest(h,"."+e),f=null,g=null,m=this.getOffsetValue(r,"X"),v=this.getOffsetValue(r,"Y");r.target.offsetHeight>0&&v>r.target.offsetHeight-2?l=!1:v<2?l=!0:(r.target.classList.contains(o)||r.target.classList.contains(s))&&(v<5||m<3?l=!0:(v>15||m>17)&&(l=!1)),r.event.target.classList.contains(u)&&this.isUp&&(l=!0),p&&(f=p.getAttribute("data-uid")),c&&(g=c.getAttribute("data-uid"));var b=this.isExternalDrop(i),y=this.dropRoot?window.sfBlazor.getCompInstance(this.dataId):null,C=b?y:this,w=this.getDropArgs(i,n,g,a,f,l);C.dotNetRef.invokeMethodAsync("DropNodeAsSibling",w),this.updateAriaLevel(i)},b.prototype.updateAriaLevel=function(e){var i=this.parents(e,"."+t).length;e.setAttribute("aria-level",""+i),this.updateChildAriaLevel(sf.base.select("."+t,e),i+1)},b.prototype.updateChildAriaLevel=function(e,i){if(!sf.base.isNullOrUndefined(e))for(var n=0,s=e.querySelectorAll("li");n<s.length;n++){var o=s[n];o.setAttribute("aria-level",String(i)),this.updateChildAriaLevel(sf.base.select("."+t,o),i+1)}},b.prototype.dropAsChildNode=function(i,n,s,o,r,a,l){var d=sf.base.closest(i,"."+t),c=sf.base.closest(d,"."+e),p=sf.base.closest(n,"."+t),u=sf.base.closest(p,"."+e),f=null,g=null;u&&(f=u.getAttribute("data-uid")),c&&(g=c.getAttribute("data-uid"));var m,v=this.isExternalDrop(i),b=sf.base.closest(i,"."+h)||this.element?window.sfBlazor.getCompInstance(this.dataId):null,y=this.dropRoot?window.sfBlazor.getCompInstance(this.dropRoot.getAttribute("data-id")):null,C=v?y:this;r&&a<7&&!l?(m=this.getDropArgs(i,n,g,b,f,!0),C.dotNetRef.invokeMethodAsync("DropNodeAsSibling",m)):r&&r.target.offsetHeight>0&&a>r.target.offsetHeight-10&&!l?(m=this.getDropArgs(i,n,g,b,f,!1),C.dotNetRef.invokeMethodAsync("DropNodeAsSibling",m)):(m=this.getDropArgs(i,n,g,b),C.dotNetRef.invokeMethodAsync("DropNodeAsChild",m)),this.updateAriaLevel(i)},b.prototype.isExternalDrop=function(e){var t=!1,i=sf.base.closest(e,"."+h)?sf.base.closest(e,"."+h):this.element,n=this.dropRoot;return null==i||null==n||i.isSameNode(n)||(t=!0),t},b.prototype.getDropArgs=function(e,t,i,n,s,o){return{dragLi:e.getAttribute("data-uid"),dropLi:t.getAttribute("data-uid"),dragParentLi:i,dropParentLi:s,pre:o,srcTree:n.dotNetRef,isExternalDrag:this.isExternalDrop(e)}},b.prototype.dragCancelAction=function(e){sf.base.detach(e),sf.base.removeClass([this.element],"e-dragging"),this.dragStartAction=!1},b.prototype.removeVirtualEle=function(){var e=sf.base.select("."+u);e&&sf.base.detach(e)},b.prototype.dragAction=function(t,i){if(!sf.base.isNullOrUndefined(t.target)){var n=sf.base.closest(t.target,".e-droppable"),a=sf.base.closest(t.target,"."+p),l=sf.base.select("div."+r,i),d=this.getOffsetValue(t,"X"),v=this.getOffsetValue(t,"Y");sf.base.removeClass([l],[f,g,"e-drop-out",m]),this.removeVirtualEle(),document.body.style.cursor="";var b=t.target.classList;if(this.options.fullRowSelect&&!a&&!sf.base.isNullOrUndefined(b)&&b.contains("e-fullrow")&&(a=t.target.nextElementSibling),n){var y=sf.base.closest(t.target,"."+e),C=sf.base.closest(t.target,"."+c),w=sf.base.closest(t.target,"."+s),M=sf.base.closest(t.target,"."+o);if(!n.classList.contains(h)||a&&!y.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,y))if(y&&t&&!M&&!w&&v<7&&!C||M&&v<5||w&&d<3){sf.base.addClass([l],g);var S=sf.base.createElement("div",{className:u}),x=this.options.fullRowSelect?1:0;y.insertBefore(S,y.children[x])}else if(y&&t&&!M&&!w&&t.target.offsetHeight>0&&v>t.target.offsetHeight-10&&!C||M&&v>19||w&&d>19){sf.base.addClass([l],g);S=sf.base.createElement("div",{className:u}),x=this.options.fullRowSelect?2:1;y.insertBefore(S,y.children[x])}else sf.base.addClass([l],f);else"LI"!==t.target.nodeName||y.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,y)?t.target.classList.contains(u)?sf.base.addClass([l],g):t.target.classList.contains("e-droppable")?sf.base.addClass([l],f):sf.base.addClass([l],"e-drop-out"):(sf.base.addClass([l],g),this.renderVirtualEle(t))}else sf.base.addClass([l],m),document.body.style.cursor="not-allowed";var N,O=sf.base.closest(t.target,e);O&&(N=parseInt(O.getAttribute("aria-level"),10));var E=this.getDragEvent(t.event,this,t.target,t.target,null,i,N);E.dropIndicator&&sf.base.removeClass([l],E.dropIndicator),this.iconElement=l,this.draggingEventArgs=E;var I=this.getXYValue(t.event,"X"),T=this.getXYValue(t.event,"Y");this.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",this.updateObjectValues(E),I,T)}},b.prototype.nodeDragging=function(e){this.draggingEventArgs.dropIndicator&&sf.base.addClass([this.iconElement],this.draggingEventArgs.dropIndicator)},b.prototype.renderVirtualEle=function(e){var t,i=this.getOffsetValue(e,"Y");i>e.target.offsetHeight-2?t=!1:i<2&&(t=!0);var n=sf.base.createElement("div",{className:u}),s=this.options.fullRowSelect?t?1:2:t?0:1;this.dropTargetElement=e.target.children[s],e.target.insertBefore(n,e.target.children[s])},b.prototype.parents=function(e,t){for(var i=[],n=e.parentNode;!sf.base.isNullOrUndefined(n);)sf.base.matches(n,t)&&i.push(n),n=n.parentNode;return i},b.prototype.getDragEvent=function(t,i,n,s,o,a,l,d){var c=n?sf.base.closest(n,"."+e):null,p=c?this.getNodeData(c):null,u=i?i.dragLi:o,v=i?i.dragData:null,b=n?this.parents(n,"."+e):null,y=i.dragLi.parentElement,C=i.dragLi?sf.base.closest(y,"."+e):null,w=null,M=null,S=[g,f,"e-drop-out",m],x=null,N=d?u:c,O=N?sf.base.closest(N,".e-list-parent"):null,E=0;if(C=i.dragLi&&null===C?sf.base.closest(y,"."+h):C,C=d?this.dragParent:C,a)for(;E<4;){if(sf.base.select("."+r,a).classList.contains(S[E])){x=S[E];break}E++}if(O){for(var I=void 0,T=i.element.querySelectorAll("."+c.classList[1]),D=0;D<T.length&&(T[D]===c&&(M=D),T[D]===u&&(I=D),sf.base.isNullOrUndefined(I)||sf.base.isNullOrUndefined(M));D++);if(sf.base.isNullOrUndefined(this.sibEle)){if(I>M&&(M+=1),u.classList[1]!==c.classList[1]?M=0!==M?M===T.length-1?T.length:M+1:0:t.offsetY<=5&&0!=M&&(M-=1),x===f&&(M=0,c.classList.contains("e-has-child"))){var j=parseInt(c.getAttribute("aria-level"))+1,A=c.querySelectorAll('[aria-level="'+j+'"]');M=-1===Array.from(A).findIndex((function(e){return e==u}))?A.length:A.length-1}}else I>(M=u.classList[1]===c.classList[1]?this.isUp?M-1:M:M===T.length-1?this.isUp?M:T.length:this.isUp?M:M+1)&&(M+=1);null!=x&&x!=m||(M=null)}if(n&&(w=0===b.length?null:n.classList.contains(e)?b[0]:b[1]),c===u&&(w=c),n&&s.offsetHeight<=33&&t.offsetY<s.offsetHeight-10&&t.offsetY>6&&(w=c,!d)){l=++l;var z=w?sf.base.select(".e-list-parent",w):null;M=z?z.children.length:0}return{cancel:!1,clonedNode:a,event:t,draggedNode:u,draggedNodeData:v,droppedNode:c,droppedNodeData:p,dropIndex:M,dropLevel:l,draggedParentNode:C,dropTarget:w,dropIndicator:x,target:s}},b.prototype.editingHandler=function(i){var n=i.target;!n||n.classList.contains(h)||n.classList.contains(t)||n.classList.contains(e)||n.classList.contains(r)||n.classList.contains("e-input")||n.classList.contains("e-input-group")||this.createTextbox(sf.base.closest(n,"."+e),i)},b.prototype.createTextbox=function(e,t){this.editEventArgs=this.getEditEvent(e,null,null),sf.base.addClass([e],"e-editing"),this.isEdited=!0,this.dotNetRef.invokeMethodAsync("TriggerNodeEditingEvent",this.editEventArgs)},b.prototype.getEditEvent=function(e,t,i){return{newText:t,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}},b.prototype.focusIn=function(){if("INPUT"==document.activeElement.nodeName||"TEXTAREA"==document.activeElement.nodeName){var e=document.activeElement;this.updateOldText(e.value)}this.mouseDownStatus||sf.base.addClass([this.getFocusedNode()],d),this.mouseDownStatus=!1},b.prototype.focusOut=function(){this.removeHover(),sf.base.removeClass([this.getFocusedNode()],d)},b.prototype.touchStart=function(e){this.startTime=e.timeStamp},b.prototype.touchEnd=function(t){if(this.endTime=t.timeStamp,this.endTime-this.startTime>500&&!this.dragStartAction){var i=t.target,n=sf.base.closest(i,"."+e);t.preventDefault(),this.toggleSelect(n,t,!0)}},b.prototype.getParentElement=function(e){var t=e.parentElement;return"none"!=window.getComputedStyle(t).resize||"BODY"!=t.nodeName&&(t=this.getParentElement(t)),t},b.prototype.resizeHandler=function(e){switch(e.type){case"mousedown":this.isParentMouseDown=!0;break;case"mouseup":this.isParentMouseDown=!1;break;case"mousemove":this.isParentMouseDown&&this.updateWrap()}},b.prototype.wireEvents=function(){if(!this.options.disabled){if(this.setExpandOnType(),this.options.allowTextWrap){var e=this.getParentElement(this.element);"BODY"!=e.nodeName&&sf.base.EventHandler.add(e,"mousedown mouseup mousemove",this.resizeHandler,this)}if(sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.element,"focusin",this.focusIn,this),sf.base.EventHandler.add(this.element,"focusout",this.focusOut,this),sf.base.EventHandler.add(this.element,"mouseout",this.onMouseLeave,this),sf.base.EventHandler.add(this.element,"contextmenu",this.contextLongPress,this),sf.base.Browser.isDevice&&(sf.base.EventHandler.add(this.element,"touchstart",this.touchStart,this),sf.base.EventHandler.add(this.element,"touchend",this.touchEnd,this)),this.options.showCheckBox){var t=sf.base.select(".e-frame",this.element);sf.base.isNullOrUndefined(t)||(sf.base.EventHandler.add(t,"mousedown",this.frameMouseHandler,this),sf.base.EventHandler.add(t,"mouseup",this.frameMouseHandler,this))}"None"!==this.options.expandOnType&&this.wireExpandOnEvent(!0),this.keyboardModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyboardActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}},b.prototype.frameMouseHandler=function(e){var t=sf.base.select(".e-ripple-container",e.target.parentElement);this.rippleMouseHandler(e,t)},b.prototype.rippleMouseHandler=function(e,t){if(t){var i=document.createEvent("MouseEvents");i.initEvent(e.type,!1,!0),t.dispatchEvent(i)}},b.prototype.setExpandOnType=function(){var e=this.options.expandOnType;this.options.expandOnType="DoubleClick"===e?sf.base.Browser.isDevice?"Click":"DoubleClick":e},b.prototype.expandHandler=function(i){var n=i.originalEvent.target;!n||n.classList.contains("e-input")||n.classList.contains(h)||n.classList.contains(t)||n.classList.contains(e)||n.classList.contains(r)||this.options.showCheckBox&&sf.base.closest(n,"."+c)||this.expandCollapseAction(sf.base.closest(n,"."+e),i)},b.prototype.expandCollapseAction=function(e,t){var i=sf.base.select("div."+r,e);i&&!i.classList.contains("e-process")&&(i.classList.contains(o)?this.expandAction(e,t):i.classList.contains(s)&&(this.tapEvent=t,this.expandArgs=this.getExpandEvent(e,t),this.dotNetRef.invokeMethodAsync("NodeCollapsingEventCallback",this.expandArgs,!1)))},b.prototype.animateHeight=function(e,t,i){var n=(i-t)*((e.duration-e.timeStamp)/e.duration)+t;e.element.parentElement.style.height=n+"px"},b.prototype.expandAction=function(e,i){if(this.expandArgs=this.getExpandEvent(e,i),this.options.allowTextWrap){var n=sf.base.select("."+t,e);this.isNodeRendered=!!n}e&&e.classList.contains("e-process")&&sf.base.removeClass([e],"e-process"),this.dotNetRef.invokeMethodAsync("TriggerNodeExpandingEvent",this.expandArgs)},b.prototype.collapseAction=function(i,n,a,h){if(sf.base.isNullOrUndefined(n)&&(n=this.tapEvent),this.expandArgs=this.getExpandEvent(i,n),!h){var d=0,c=0,u=this,f=sf.base.select("."+t,i),g=i,m=sf.base.select("."+e+"."+l,i);if(f){var v=sf.base.select("div."+r,g);sf.base.removeClass([v],s),sf.base.addClass([v],o)}sf.base.isNullOrUndefined(i.getAttribute("aria-expanded"))||i.setAttribute("aria-expanded","false"),0===this.options.animation.collapse.duration?(f.style.display="none",u.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",u.expandArgs),a&&u.triggerClickEvent(n.originalEvent,i)):this.animationObj.animate(f,{name:"None"===this.options.animation.collapse.effect&&"Enable"===sf.base.animationMode?"SlideUp":this.options.animation.collapse.effect,duration:this.options.animation.collapse.duration,timingFunction:this.options.animation.collapse.easing,begin:function(e){u.isAnimationCompleted=!1,g.style.overflow="hidden",!sf.base.isNullOrUndefined(m)&&m instanceof HTMLElement&&m.classList.add("e-animation-active"),d=sf.base.select("."+p,i).offsetHeight,c=g.offsetHeight},progress:function(e){u.animateHeight(e,d,c)},end:function(e){e.element.style.display="none",!sf.base.isNullOrUndefined(m)&&m instanceof HTMLElement&&m.classList.remove("e-animation-active"),u.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",u.expandArgs),a&&u.triggerClickEvent(n.originalEvent,i),u.isAnimationCompleted=!0}})}},b.prototype.wireExpandOnEvent=function(e){var t=this;if(e){var i=this;this.touchExpandObj=new sf.base.Touch(this.element,{tap:function(e){("Click"===t.options.expandOnType||"DoubleClick"===t.options.expandOnType&&t.isDoubleTapped(e)&&2===e.tapCount)&&3!==e.originalEvent.which&&i.expandHandler(e)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},b.prototype.getNodeData=function(t,i){if(!sf.base.isNullOrUndefined(t)&&t.classList.contains(e)&&!sf.base.isNullOrUndefined(sf.base.closest(t,".e-control"))&&sf.base.closest(t,".e-control").classList.contains(h)){var n=t.getAttribute("data-uid"),s=sf.base.closest(t.parentNode,"."+e),o=s?s.getAttribute("data-uid"):null,r=t.classList.contains(l),a="true"===t.getAttribute("aria-expanded"),d=null===t.getAttribute("aria-expanded"),p=null;return this.options.showCheckBox&&(p=sf.base.select("."+c,t).getAttribute("aria-checked")),{id:n,text:null,parentID:o,selected:r,expanded:a,isChecked:p,hasChildren:d}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},b.prototype.getExpandEvent=function(e,t){var i=this.getNodeData(e);return{isInteracted:!sf.base.isNullOrUndefined(t),nodeData:i,event:t,isLoaded:null!=e.querySelector("ul"),nodeLevel:parseInt(e.getAttribute("aria-level"),10)}},b.prototype.updateSpinnerClass=function(){var e=this.element.querySelector(".e-icons-spinner");sf.base.removeClass([e],"e-icons-spinner")},b.prototype.expandedNode=function(i){var n=this,h=this.element.querySelector('[data-uid="'+i.nodeData.id+'"]');this.focussedElement=h;var d=sf.base.select("."+t,h);if(d){d.classList.remove("e-display-none");var c=sf.base.select("div."+r,h);this.expandArgs=this.getExpandEvent(h,i.event);var u=h,f=sf.base.select("."+e+"."+l,h),g=0,m=0,v=this;this.setHeight(u,d),0===this.options.animation.expand.duration?(sf.base.removeClass([c],o),sf.base.addClass([c],s),v.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",v.expandArgs),d.style.display=a,u.style.display=a,u.style.overflow="",u.style.height="",sf.base.removeClass([c],"e-icons-spinner"),this.options.allowTextWrap&&(!this.isNodeRendered||this.isEdited?(this.isEdited=!1,this.updateWrap(d)):this.isNodeRendered&&this.updateWrap())):this.animationObj.animate(d,{name:"None"===this.options.animation.expand.effect&&"Enable"===sf.base.animationMode?"SlideDown":this.options.animation.expand.effect,duration:this.options.animation.expand.duration,timingFunction:this.options.animation.expand.easing,begin:function(e){v.isAnimationCompleted=!1,u.style.overflow="hidden",!sf.base.isNullOrUndefined(f)&&f instanceof HTMLElement&&f.classList.add("e-animation-active"),g=u.offsetHeight,m=sf.base.select("."+p,h).offsetHeight},progress:function(e){sf.base.removeClass([c],o),sf.base.addClass([c],s),e.element.style.display=a,v.animateHeight(e,g,m)},end:function(e){e.element.style.display=a,!sf.base.isNullOrUndefined(f)&&f instanceof HTMLElement&&f.classList.remove("e-animation-active"),v.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",v.expandArgs),d.style.display=a,u.style.display=a,u.style.overflow="",u.style.height="",sf.base.removeClass([c],"e-icons-spinner"),n.options.allowTextWrap&&(!n.isNodeRendered||n.isEdited?(n.isEdited=!1,n.updateWrap(d)):n.isNodeRendered&&n.updateWrap()),v.isAnimationCompleted=!0}})}if(!d){this.expandArgs=this.getExpandEvent(h,i.event),this.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",this.expandArgs)}this.setHover(this.getFocusedNode())},b.prototype.setHeight=function(e,t){t.style.display=a,t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""},b.prototype.collapsedNode=function(e){var t=this.element.querySelector('[data-uid="'+e.nodeData.id+'"]');this.focussedElement=t;var i=t.querySelector("ul");i&&(i.style.display="none",i.classList.add("e-display-none")),t.style.overflow="",t.style.height="",this.expandArgs=this.getExpandEvent(t,null);var n=sf.base.select("div."+r,t);sf.base.removeClass([n],s),sf.base.addClass([n],o),this.dotNetRef.invokeMethodAsync("TriggerNodeCollapsedEvent",this.expandArgs)},b.prototype.preventContextMenu=function(e){e.preventDefault()},b.prototype.contextLongPress=function(t){var i=t.target,n={event:t,node:null},s=sf.base.closest(i,"."+e);this.dotNetRef.invokeMethodAsync("TriggerNodeClickingEvent",n,s.getAttribute("data-uid"),this.getXYValue(n.event,"X"),this.getXYValue(n.event,"Y"))},b.prototype.clickHandler=function(i){this.tapEvent=i;var n=i.target,a=!1;if(sf.base.EventHandler.remove(this.element,"contextmenu",this.preventContextMenu),n){if("INPUT"==n.nodeName||"TEXTAREA"==n.nodeName){var l=n;this.updateOldText(l.value)}var h=n.classList,d=sf.base.closest(n,"."+e);if(d){if(3!==i.which){var p=sf.base.select(".e-ripple-element",d),u=sf.base.select("."+r,d);if(this.removeHover(),this.focussedElement=d,this.setFocusElement(d),this.options.showCheckBox&&!d.classList.contains(v)){var f=sf.base.closest(n,"."+c);if(!sf.base.isNullOrUndefined(f)){var g=sf.base.select(".e-frame",f);return this.validateCheckNode(f,g.classList.contains("e-check"),d,i),void this.triggerClickEvent(i,d)}}h.contains(o)?this.expandAction(d,i):h.contains(s)?(this.expandArgs=this.getExpandEvent(d,i),this.dotNetRef.invokeMethodAsync("NodeCollapsingEventCallback",this.expandArgs,!0),a=!0):p&&u?u.classList.contains("e-ripple")&&u.classList.contains(o)?this.expandAction(d,i):u.classList.contains("e-ripple")&&u.classList.contains(s)?(this.collapseAction(d,i,!0),a=!0):h.contains(t)||h.contains(e)||this.toggleSelect(d,i,!1):h.contains(t)||h.contains(e)||this.toggleSelect(d,i,!1)}a||this.triggerClickEvent(i,d)}}},b.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="X"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var s=e.target.getBoundingClientRect();i=s?"X"===t?s.left:s.top:null}return Math.ceil(i)},b.prototype.triggerClickEvent=function(e,t){var i={event:e,node:null};this.dotNetRef.invokeMethodAsync("TriggerNodeClickingEvent",i,t.getAttribute("data-uid"),this.getXYValue(e,"X"),this.getXYValue(e,"Y"))},b.prototype.getCheckEvent=function(e,t,i){return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:this.getNodeData(e)}},b.prototype.validateCheckNode=function(t,i,n,s){var o=sf.base.closest(t,"."+e),r=i?"false":"true";sf.base.isNullOrUndefined(r)||t.setAttribute("aria-checked",r);var a=this.getCheckEvent(o,i?"uncheck":"check",s);this.dotNetRef.invokeMethodAsync("TriggerNodeCheckingEvent",a)},b.prototype.toggleSelect=function(e,t,i){e.classList.contains(v)||(this.options.allowMultiSelection&&(t&&t.ctrlKey||i)&&e.classList.contains(l)?this.unselectNode(e,t,i):(this.selectNode(e,t,i),this.options.allowMultiSelection&&t&&(t.ctrlKey||t.shiftKey)&&(this.setFocusElement(e),this.focussedElement=e)))},b.prototype.unselectNode=function(e,t,i){var n=this.getSelectEvent(e,"un-select",t,i,[]);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",n)},b.prototype.getSelectEvent=function(e,t,i,n,s){var o=this.getNodeData(e);return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:o,isMultiSelect:n,isCtrKey:!(sf.base.isNullOrUndefined(i)||!i.ctrlKey),isShiftKey:!(sf.base.isNullOrUndefined(i)||!i.shiftKey),nodes:s}},b.prototype.selectNode=function(t,i,n){var s;if(sf.base.isNullOrUndefined(t)||!this.options.allowMultiSelection&&t.classList.contains(l)&&!sf.base.isNullOrUndefined(i))return this.setFocusElement(t),void(this.focussedElement=t);var o=[];if(this.options.allowMultiSelection&&i&&i.shiftKey){var r=sf.base.selectAll("."+e+"."+l,this.element),a=r?r.length:0;this.startNode=a>0?r[a-1]:t;var h=Array.prototype.slice.call(sf.base.selectAll("."+e,this.element)),d=h.indexOf(this.startNode),c=h.indexOf(t);d>c&&(d=(s=[c,d])[0],c=s[1]);for(var p=d;p<=c;p++){var u=h[p];sf.base.isVisible(u)&&!u.classList.contains(v)&&o.push(u.getAttribute("data-uid"))}}else this.startNode=t;var f=this.getSelectEvent(t,"select",i,n,o);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",f)},b.prototype.setFocusElement=function(e){if(!sf.base.isNullOrUndefined(e)){var t=this.getFocusedNode();t&&(sf.base.removeClass([t],d),sf.base.Browser.isDevice||t.setAttribute("tabindex","-1")),sf.base.addClass([e],d),sf.base.Browser.isDevice||e.setAttribute("tabindex","0"),this.focussedElement=e,this.updateIdAttr(t,e)}},b.prototype.updateIdAttr=function(e,t){this.element.removeAttribute("aria-activedescendant");var i=this.element.querySelectorAll("[id=_active]");i[0]!=e&&i.forEach((function(e){e.removeAttribute("id")})),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},b.prototype.getFocusedNode=function(){var t,i;return i=sf.base.select("."+e+'[tabindex="0"]',this.element),!this.isKeyUp&&sf.base.isNullOrUndefined(i)&&(i=sf.base.select("."+e+"."+l,this.element)),sf.base.isNullOrUndefined(i)&&(i=this.focussedElement?this.focussedElement:sf.base.select("."+e+"."+d,this.element)),sf.base.isNullOrUndefined(i)&&(t=sf.base.select("."+e,this.element)),sf.base.isNullOrUndefined(i)?sf.base.isNullOrUndefined(t)?this.element.firstElementChild:t:i},b.prototype.setFullRow=function(e){(e?sf.base.addClass:sf.base.removeClass)([this.element],"e-fullrow-wrap"),this.options.fullRowSelect=e},b.prototype.onMouseOver=function(i){var n=i.target,s=n.classList,o=sf.base.closest(n,"."+e);!o||s.contains(t)||s.contains(e)?this.removeHover():o&&!o.classList.contains(v)&&this.setHover(o)},b.prototype.setHover=function(e){e.classList.contains(n)||(this.removeHover(),sf.base.addClass([e],n))},b.prototype.removeHover=function(){var e=sf.base.selectAll("."+n,this.element);e&&e.length&&sf.base.removeClass(e,n)},b.prototype.checkNode=function(e){var t=this.getFocusedNode(),i=sf.base.select("."+c,t),n=sf.base.select(" .e-frame",i).classList.contains("e-check");t.classList.contains(v)||0!==t.getElementsByClassName("e-checkbox-disabled").length||this.validateCheckNode(i,n,t,e)},b.prototype.openNode=function(i,n){var a=this.getFocusedNode(),l=sf.base.select("div."+r,a);if(i){if(!l)return;l.classList.contains(o)?this.expandAction(a,n):this.focusNextNode(a,!0)}else if(l&&l.classList.contains(s))this.tapEvent=n,this.expandArgs=this.getExpandEvent(a,n),this.dotNetRef.invokeMethodAsync("NodeCollapsingEventCallback",this.expandArgs,!1);else{var h=sf.base.closest(sf.base.closest(a,"."+t),"."+e);if(!h)return;h.classList.contains(v)||(this.setNodeFocus(a,h),this.navigateToFocus(!0),h.focus())}},b.prototype.getScrollParent=function(e){return sf.base.isNullOrUndefined(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)},b.prototype.navigateToFocus=function(e){var t=this.getFocusedNode().querySelector("."+p),i=t.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!sf.base.isNullOrUndefined(n)){var s=n.getBoundingClientRect();i.bottom>s.bottom?n.scrollTop+=i.bottom-s.bottom:i.top<s.top&&(n.scrollTop-=s.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)},b.prototype.isVisibleInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},b.prototype.setNodeFocus=function(e,t){sf.base.removeClass([e],d),sf.base.Browser.isDevice||e.setAttribute("tabindex","-1"),t.classList.contains(v)||(this.focussedElement=t,sf.base.addClass([t],d),sf.base.Browser.isDevice||t.setAttribute("tabindex","0"),this.updateIdAttr(e,t))},b.prototype.focusNextNode=function(e,t){var i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setNodeFocus(e,i),this.navigateToFocus(!t),i.classList.contains(v)){var n=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&n.classList.contains(p)?this.focusNextNode(i,!1):this.focusNextNode(i,t)}i.focus()},b.prototype.shiftKeySelect=function(e,t){if(this.options.allowMultiSelection){var i=this.getFocusedNode(),n=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(n),this.focussedElement=n,this.toggleSelect(n,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)},b.prototype.getNextNode=function(e){var t,i=this.liList.indexOf(e);do{if(i++,t=this.liList[i],sf.base.isNullOrUndefined(t))return e}while(!sf.base.isVisible(t));return t},b.prototype.getPrevNode=function(e){var t,i=this.liList.indexOf(e);do{if(i--,t=this.liList[i],sf.base.isNullOrUndefined(t))return e}while(!sf.base.isVisible(t));return t},b.prototype.getRootNode=function(){var e,t=0;do{e=this.liList[t],t++}while(!sf.base.isVisible(e));return e},b.prototype.getEndNode=function(){var e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!sf.base.isVisible(e));return e},b.prototype.navigateNode=function(e){this.focusNextNode(this.getFocusedNode(),e)},b.prototype.updateOldText=function(e){this.oldText=e},b.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){switch(i[t]){case"showCheckBox":this.options.showCheckBox=e.showCheckBox;break;case"allowDragAndDrop":this.setDragAndDrop(e.allowDragAndDrop);break;case"allowTextWrap":this.options.allowTextWrap=e.allowTextWrap,this.setTextWrap();break;case"allowEditing":this.wireEditingEvents(e.allowEditing);break;case"disabled":this.options.disabled!==e.disabled&&(this.options.disabled=e.disabled,this.setDisabledMode(e.disabled));break;case"dragArea":this.setDragArea(e.dropArea);break;case"cssClass":this.setCssClass(e.cssClass);break;case"fullRowSelect":this.setFullRow(e.fullRowSelect);break;case"expandOnType":this.options.expandOnType=e.expandOnType,this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.options.expandOnType||this.options.disabled||this.wireExpandOnEvent(!0);break;case"enableRtl":this.options.enableRtl=e.enableRtl,(this.options.enableRtl?sf.base.addClass:sf.base.removeClass)([this.element],"e-rtl");break;case"animation":this.options.animation=e.animation}}},b.prototype.navigateRootNode=function(e){var t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains(v)||(this.setNodeFocus(t,i),this.navigateToFocus(e))},b.prototype.selectGivenNodes=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];n.classList.contains(v)||this.selectNode(n,null,!0)}},b.prototype.beginEdit=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');sf.base.isNullOrUndefined(t)||this.options.disabled||this.createTextbox(t,null)},b.prototype.ensureVisible=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');sf.base.isNullOrUndefined(t)||setTimeout((function(){t.scrollIntoView(!0)}),450)},b.prototype.nodeCollapse=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');this.collapseAction(t,null,!1)},b.prototype.nodeExpand=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');this.expandAction(t,null)},b.prototype.nodeSelection=function(t){for(var i=[],n=0,s=t;n<s.length;n++){var o=s[n];i.push(this.element.querySelector('[data-uid="'+o+'"]'))}var r=sf.base.selectAll("."+e+"."+l,this.element);sf.base.removeClass(r,l),sf.base.addClass(i,l)},b.prototype.KeyActionHandler=function(t,i){this.liList=Array.prototype.slice.call(sf.base.selectAll("."+e,this.element));var n=this.element.querySelector('[data-uid="'+i+'"]'),s=sf.base.isNullOrUndefined(n)?this.getFocusedNode():n;switch(t.action){case"space":this.options.showCheckBox?this.checkNode(this.keyAction):this.toggleSelect(s,this.keyAction,!1);break;case"moveRight":this.keyBoardAction=!0,this.openNode(!this.options.enableRtl,this.keyAction);break;case"moveLeft":this.keyBoardAction=!0,this.openNode(this.options.enableRtl,this.keyAction);break;case"shiftDown":this.shiftKeySelect(!0,this.keyAction);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,this.keyAction);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":this.toggleSelect(s,this.keyAction,!1);break;case"f2":this.options.allowEditing&&!s.classList.contains(v)&&this.createTextbox(s,this.keyAction);break;case"ctrlA":if(this.options.allowMultiSelection){var o=sf.base.selectAll("."+e+":not(."+l+")",this.element);this.selectGivenNodes(o)}}this.isKeyUp=!1;var r=this;setTimeout((function(){r.keyBoardAction&&(r.setHover(r.getFocusedNode()),r.keyBoardAction=!1)}),100)},b}();return{initialize:function(e,t,i,n){new b(e,t,i,n);var s=window.sfBlazor.getCompInstance(e);s.render(),t&&!sf.base.isNullOrUndefined(s)&&s.options.allowTextWrap&&s.updateWrap(),document.getElementById(t.id)&&s.dotNetRef.invokeMethodAsync("CreatedEvent",null)},updateTextWrap:function(e){var t=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(t)&&t.options.allowTextWrap&&t.updateWrap()},dataSourceChanged:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.unWireEvents(),t.wireEvents())},collapseAction:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)){var n=i.element.querySelector('[data-uid="'+t+'"]');i.collapseAction(n,null,!1)}},NodeCollapseAction:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s)){var o=s.element.querySelector('[data-uid="'+t+'"]');s.collapseAction(o,null,n,i)}},expandAction:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)){var n=i.element.querySelector('[data-uid="'+t+'"]');i.expandAction(n,null)}},expandedNode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||setTimeout((function(){i.expandedNode(t)}),10)},collapsedNode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.collapsedNode(t)},KeyActionHandler:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||setTimeout((function(){n.KeyActionHandler(t,i)}),n.isAnimationCompleted?0:n.animationObj.duration)},setMultiSelect:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setMultiSelect(t)},dragStartActionContinue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.dragStartActionContinue(t)},dragNodeStop:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.dragNodeStop(t)},nodeDragging:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeDragging(t)},setFocus:function(e,t){if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(t)){var i=document.getElementById(e.id);i.focus(),i.setSelectionRange(0,i.value.length)}},nodeEdited:function(e){sf.base.isNullOrUndefined(e)||sf.base.removeClass([e],"e-editing")},updateOldText:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateOldText(t)},updateSpinnerClass:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.updateSpinnerClass()},onPropertyChanged:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.onPropertyChanged(t)},beginEdit:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beginEdit(t)},ensureVisible:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.ensureVisible(t)},nodeCollapse:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeCollapse(t)},nodeExpand:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeExpand(t)},nodeSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeSelection(t)},getAriaLevel:function(e,t){var i=window.sfBlazor.getCompInstance(e),n=0;if(!sf.base.isNullOrUndefined(i)){var s=i.element.querySelector('[data-uid="'+t.nodeData.id+'"]');n=parseInt(s.getAttribute("aria-level"),10)}return n}}}()},"./modules/sf-uploader.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Uploader=function(){"use strict";var e={};function t(t,i){if(t.target){var r,l=sf.base.isNullOrUndefined(i)?sf.base.createElement:i,h=function(e,t){var i=t("div",{}),n=t("div",{});return i.classList.add("e-spinner-pane"),n.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(t.target,l);if(sf.base.isNullOrUndefined(t.cssClass)||h.wrap.classList.add(t.cssClass),sf.base.isNullOrUndefined(t.template)&&sf.base.isNullOrUndefined(null)){var d=sf.base.isNullOrUndefined(t.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(h.wrap):t.type;r=function(e,t){var i;switch(t){case"Material":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(sf.base.isNullOrUndefined(t.width)?void 0:t.width,d),function(t,i,r,l){var h=i.querySelector(".e-spinner-inner"),d=h.querySelector("svg");sf.base.isNullOrUndefined(d)||h.removeChild(d);switch(t){case"Material":!function(t,i,s){var r=n();e[r]={timeOut:0,type:"Material",radius:i},o(t,r,s,"e-spin-material"),a(i,t,"Material","e-spin-material")}(h,r,l);break;case"Fabric":!function(t,i,o){var r=n();e[r]={timeOut:0,type:"Fabric",radius:i},s(t,r,"e-spin-fabric",o),c(i,t,"e-spin-fabric")}(h,r,l);break;case"Bootstrap":!function(t,i,s){var o=n();e[o]={timeOut:0,type:"Bootstrap",radius:i},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(var s=0;s<=7;s++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class","e-path-circle_"+s),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),n.appendChild(o)}}(t,o),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var n=90,s=0;s<=7;s++){var o=p(0,0,24,n),r=i.querySelector(".e-path-circle_"+s);r.setAttribute("cx",o.x+""),r.setAttribute("cy",o.y+""),n=n>=360?0:n,n+=45}}(t,i)}(h,r);break;case"HighContrast":!function(t,i,o){var r=n();e[r]={timeOut:0,type:"HighContrast",radius:i},s(t,r,"e-spin-high-contrast",o),c(i,t,"e-spin-high-contrast")}(h,r,l);break;case"Bootstrap4":!function(t,i,s){var r=n();e[r]={timeOut:0,type:"Bootstrap4",radius:i},o(t,r,s,"e-spin-bootstrap4"),a(i,t,"Bootstrap4","e-spin-bootstrap4")}(h,r,l);break;case"Tailwind":case"Tailwind-dark":!function(t,i,o){var r=n();e[r]={timeOut:0,type:"Tailwind",radius:i},s(t,r,"e-spin-tailwind",o),c(i,t,"e-spin-tailwind")}(h,r,l)}}(d,h.wrap,r,l),sf.base.isNullOrUndefined(t.label)||function(e,t,i){var n=i("div",{});n.classList.add("e-spin-label"),n.innerHTML=t,e.appendChild(n)}(h.inner_wrap,t.label,l)}else{var u=sf.base.isNullOrUndefined(t.template)?null:t.template;h.wrap.classList.add("e-spin-template"),function(e,t,i){sf.base.isNullOrUndefined(i)||e.classList.add(i);e.querySelector(".e-spinner-inner").innerHTML=t}(h.wrap,u,null)}h.wrap.classList.add("e-spin-hide"),h=null}}function n(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function s(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class",i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-circle");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-arc"),e.insertBefore(s,e.firstChild),s.appendChild(o),s.appendChild(r)}function o(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",n),s.setAttribute("id",t),o.setAttribute("class","e-path-circle"),e.insertBefore(s,e.firstChild),s.appendChild(o)}function r(t){!function(t,i,n,s,o,a,d){var c=++d.globalInfo[d.uniqueID].previousId,p=(new Date).getTime(),u=i-t,f=(v=2*d.globalInfo[d.uniqueID].radius+"",parseFloat(v)),g=l(f),m=-90*(d.globalInfo[d.uniqueID].count||0);var v;!function i(o){var l=Math.max(0,Math.min((new Date).getTime()-p,s));!function(e,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))&&!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",h(f,g,e,a)+""),i.setAttribute("transform","rotate("+m+" "+f/2+" "+f/2+")")}}(n(l,t,u,s),o.container),c===o.globalInfo[o.uniqueID].previousId&&l<s?e[o.uniqueID].timeOut=setTimeout(i.bind(null,o),1):r(o)}(d)}(1,149,d,1333,t.globalInfo[t.uniqueID].count,75,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}function a(e,t,i,n){var s=2*e,o=t.querySelector("svg."+n),r=o.querySelector("path.e-path-circle"),a=l(s),d=s/2+"px";o.setAttribute("viewBox","0 0 "+s+" "+s),o.style.width=o.style.height=s+"px",o.style.transformOrigin=d+" "+d+" "+d,r.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(s,a)),"Material"===i&&(r.setAttribute("stroke-width",a+""),r.setAttribute("stroke-dasharray",(s-a)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",h(s,a,1,75)+""))}function l(e){return.1*e}function h(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function d(e,t,i,n){var s=(e/=n)*e,o=s*e;return t+i*(6*o*s+-15*s*s+10*o)}function c(e,t,i){var n=e,s=e,o=2*e,r=t.querySelector("."+i),a=r.querySelector(".e-path-circle"),l=r.querySelector(".e-path-arc"),h=o/2+"px";a.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,s,e)),l.setAttribute("d",function(e,t,i,n,s){var o=p(e,t,i,s),r=p(e,t,i,n);return["M",o.x,o.y,"A",i,i,0,0,0,r.x,r.y].join(" ")}(n,s,e,315,45)),r.setAttribute("viewBox","0 0 "+o+" "+o),r.style.transformOrigin=h+" "+h+" "+h,r.style.width=r.style.height=o+"px"}function p(e,t,i,n){var s=(n-90)*Math.PI/180;return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}}function u(e){f(e,!1),e=null}function f(t,i){var n;if(t&&(n=t.classList.contains("e-spinner-pane")?t:t.querySelector(".e-spinner-pane")),t&&n){var s=n.querySelector(".e-spinner-inner");if(i?!n.classList.contains("e-spin-template")&&!n.classList.contains("e-spin-hide"):!n.classList.contains("e-spin-template")&&!n.classList.contains("e-spin-show")){var o=n.querySelector("svg");if(sf.base.isNullOrUndefined(o))return;var a=o.getAttribute("id");switch(e[a].isAnimate=!i,e[a].type){case"Material":i?clearTimeout(e[a].timeOut):function(t,i,n){var s={};e[i].timeOut=0,s[i]=function(e,t,i,n){return{radius:t,count:i,previousId:n}}(0,n,0,0),r({uniqueID:i,container:t,globalInfo:s,timeOutVar:0})}(s,a,e[a].radius);break;case"Bootstrap":i?clearTimeout(e[a].timeOut):function(t){for(var i,n,s,o,r,a=t.querySelector("svg.e-spin-bootstrap").getAttribute("id"),l=1;l<=8;l++){h(t.getElementsByClassName("e-path-circle_"+(8===l?0:l))[0],l,l,(i=void 0,n=void 0,s=void 0,o=void 0,r=void 0,i=[],s=l,o=!1,r=1,function e(t){i.push(t),(t!==s||1===r)&&(t<=n&&t>1&&!o?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),o=!0):t<8&&o?8===(t=parseFloat((t+.2).toFixed(2)))&&(o=!1):t<=8&&!o&&(t=parseFloat((t-.2).toFixed(2))),++r,e(t))}(n=l),i),a)}function h(t,i,n,s,o){var r=0;!function i(n){e[o].isAnimate&&(++r,t.setAttribute("r",n+""),r>=s.length&&(r=0),e[o].timeOut=setTimeout(i.bind(null,s[r]),18))}(i)}}(s)}}i?sf.base.classList(n,["e-spin-hide"],["e-spin-show"]):sf.base.classList(n,["e-spin-show"],["e-spin-hide"]),t=null}}function g(e){f(e,!0),e=null}var m=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){e.done?s(e.value):new i((function(t){t(e.value)})).then(r,a)}l((n=n.apply(e,t||[])).next())}))},v=function(e,t){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},b="e-upload-file-list",y="e-file-status",C="e-file-remove-btn",w="e-file-delete-btn",M="e-file-abort-btn",S="e-file-reload-btn",x="e-upload-drag-hover",N="e-upload-progress-wrap",O="e-upload-progress-bar",E="e-upload-success",I="e-upload-fails",T="e-file-pause-btn",D=function(){function e(e,t,i,n){this.initialAttr={accept:null,multiple:!1,disabled:!1},this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.pausedData=[],this.uploadMetaData=[],this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.count=-1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.fileStreams=[],this.newFileRef=0,this.isFirstFileOnSelection=!1,this.dragCounter=0,this.fileList=[],this.filesData=[],window.sfBlazor=window.sfBlazor,this.dataId=e,this.element=t.element,this.updateProperty(n),window.sfBlazor.setCompInstance(this),this.dotNetRef=i,this.withCredentials=!1}return e.prototype.initialize=function(){this.preRender(),this.render()},e.prototype.updateProperty=function(e){sf.base.extend(this,this,e)},e.prototype.reRenderFileList=function(){this.listParent&&(sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},e.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&sf.base.remove(e)}},e.prototype.propertyChanges=function(e,t){this.updateProperty(e),this.isBlazorSaveUrl=""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl);for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"AllowedExtensions":this.clearAll();break;case"EnableRtl":this.reRenderFileList();break;case"Buttons":this.buttons.browse=sf.base.isNullOrUndefined(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=sf.base.isNullOrUndefined(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=sf.base.isNullOrUndefined(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"DropArea":this.unBindDropEvents(),this.updateDropArea();break;case"Files":this.renderPreLoadFiles();break;case"MinFileSize":case"MaxFileSize":case"AutoUpload":case"SequentialUpload":this.clearAll()}}},e.prototype.preRender=function(){this.isBlazorTemplate=""!==this.template&&!sf.base.isNullOrUndefined(this.template),this.isBlazorSaveUrl=""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl),this.isBlazorSaveUrl&&this.sequentialUpload&&(this.sequentialUpload=!1),this.isBlazorSaveUrl||this.formRendered(),this.keyConfigs={enter:"enter"},this.browserName=sf.base.Browser.info.name,this.uploaderName=this.element.getAttribute("name")},e.prototype.formRendered=function(){var e=sf.base.closest(this.element,"form");if(!sf.base.isNullOrUndefined(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},e.prototype.render=function(){this.dropAreaWrapper=sf.base.closest(this.element,".e-file-select-wrap"),this.uploadWrapper=sf.base.closest(this.element,".e-upload.e-control-wrapper"),this.browseButton=this.dropAreaWrapper.querySelector("button.e-upload-browse-btn"),this.setDropArea(),this.renderPreLoadFiles(),this.wireEvents()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.browseButton,"click",this.browseButtonClick,this),sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this),sf.base.EventHandler.add(document,"click",this.removeFocus,this),this.keyboardModule=new sf.base.KeyboardEvents(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&sf.base.EventHandler.add(this.formElement,"reset",this.resetForm,this)},e.prototype.renderPreLoadFiles=function(){if(this.files&&this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(sf.base.isNullOrUndefined(this.files[0].size))return;var e=[].slice.call(this.files),t=[];this.multiple||(this.clearData(),e=[e[0]]);for(var i=0,n=e;i<n.length;i++){var s=n[i],o={name:s.name+"."+s.type.split(".")[s.type.split(".").length-1],rawFile:"",size:s.size,status:this.localizedTexts("uploadSuccessMessage"),type:s.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};t.push(o),this.filesData.push(o)}if(this.isBlazorTemplate)return;this.createFileList(t),this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1)}},e.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.actionButtons=sf.base.createElement("div",{className:"e-upload-actions"}),this.uploadButton=sf.base.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=sf.base.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.uploadButton.focus(),this.wireActionButtonEvents())},e.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:document.querySelector(this.dropArea);for(var t=this.element,i=!1;t.parentNode;)(t=t.parentNode)===this.dropZoneElement&&(i=!0);!i&&e&&sf.base.remove(e)}else sf.base.isNullOrUndefined(this.dropArea)&&(this.dropZoneElement=this.uploadWrapper);this.bindDropEvents()},e.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},e.prototype.serverUlElement=function(e){e&&(this.isBlazorSaveUrl||this.isBlazorTemplate)&&(this.listParent=e,this.fileList=[].slice.call(this.listParent.querySelectorAll("li")),this.serverRemoveIconBindEvent(),this.isForm||this.checkAutoUpload(this.filesData))},e.prototype.wireActionButtonEvents=function(){sf.base.EventHandler.add(this.uploadButton,"click",this.uploadButtonClick,this),sf.base.EventHandler.add(this.clearButton,"click",this.clearButtonClick,this)},e.prototype.unwireActionButtonEvents=function(){sf.base.EventHandler.remove(this.uploadButton,"click",this.uploadButtonClick),sf.base.EventHandler.remove(this.clearButton,"click",this.clearButtonClick)},e.prototype.checkActionButtonStatus=function(){if(this.actionButtons&&!this.isBlazorTemplate){var e=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+E).length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},e.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e;e=sf.base.isNullOrUndefined(this.buttons.upload)?"Upload":this.buttons.upload,this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var t;t=sf.base.isNullOrUndefined(this.buttons.clear)?"Clear":this.buttons.clear,this.buttons.clear=t,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},e.prototype.checkAutoUpload=function(e){if(this.autoUpload){if(this.sequentialUpload)this.sequenceUpload(e);else if("e-fm-upload"==this.cssClass)for(var t=0;t<e.length;t++)this.upload(e[t]);else this.upload(e);this.removeActionButtons()}else this.actionButtons||this.renderActionButtons();this.checkActionButtonStatus()},e.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),this.isBlazorSaveUrl||this.isBlazorTemplate||sf.base.detach(this.actionButtons),this.actionButtons=null)},e.prototype.sequenceUpload=function(e){var t=e&&e.length?e.length:e?1:0;if(this.filesData.length-t==0||"1"!==this.filesData[this.filesData.length-t-1].statusCode){(this.multiple||this.count<0)&&++this.count;var n=!this.showFileList;"object"===i(this.filesData[this.count])?(this.isFirstFileOnSelection=!1,"2"!=this.filesData[this.count].statusCode&&this.upload(this.filesData[this.count],n),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.browseButton,"click",this.browseButtonClick),sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles),sf.base.EventHandler.remove(document,"click",this.removeFocus),this.isForm&&sf.base.EventHandler.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},e.prototype.resetForm=function(){this.clearAll()},e.prototype.keyActionHandler=function(e){var t=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(t.classList.contains(T)){(i=this.getCurrentMetaData(null,e)).file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)}else if(t.classList.contains("e-file-play-btn"))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(t.classList.contains(S)){var i=this.getCurrentMetaData(null,e);if(sf.base.isNullOrUndefined(i)){var n=e.target.parentElement,s=this.filesData[this.fileList.indexOf(n)];this.retry(s)}else i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file)}else{if(this.isBlazorSaveUrl)break;this.removeFiles(e),t.classList.contains(M)||this.browseButton.focus()}e.preventDefault(),e.stopPropagation()}},e.prototype.getCurrentMetaData=function(e,t){var i,n;if(sf.base.isNullOrUndefined(e)){var s=t.target.parentElement;i=this.filesData[this.fileList.indexOf(s)]}else i=e;for(var o=0;o<this.uploadMetaData.length;o++)this.uploadMetaData[o].file.name===i.name&&(n=this.uploadMetaData[o]);return n},e.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector(".e-clear-icon-focus")&&(document.activeElement.blur(),this.listParent.querySelector(".e-clear-icon-focus").classList.remove("e-clear-icon-focus"))},e.prototype.browseButtonClick=function(){this.element.click()},e.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},e.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},e.prototype.bindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.add(this.dropZoneElement,"drop",this.dropElement,this),sf.base.EventHandler.add(this.dropZoneElement,"dragover",this.dragHover,this),sf.base.EventHandler.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),sf.base.EventHandler.add(this.dropZoneElement,"paste",this.onPasteFile,this),sf.base.EventHandler.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},e.prototype.unBindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.remove(this.dropZoneElement,"drop",this.dropElement),sf.base.EventHandler.remove(this.dropZoneElement,"dragover",this.dragHover),sf.base.EventHandler.remove(this.dropZoneElement,"dragleave",this.onDragLeave),sf.base.EventHandler.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},e.prototype.onDragEnter=function(e){this.enabled&&(this.dropZoneElement.classList.add(x),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())},e.prototype.onDragLeave=function(e){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(x))},e.prototype.dragHover=function(e){this.enabled&&("Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),-1!==e.dataTransfer.types.indexOf("Files")&&(e.preventDefault(),e.stopPropagation()))},e.prototype.getFileFromEntry=function(e){return new Promise((function(t,i){e.file(t,i)}))},e.prototype.traverseDirectory=function(e){return m(this,void 0,void 0,(function(){var t,i=this;return v(this,(function(n){return t=e.createReader(),[2,new Promise((function(e,n){t.readEntries((function(t){return m(i,void 0,void 0,(function(){var i,n,s,o;return v(this,(function(r){switch(r.label){case 0:i=0,r.label=1;case 1:if(!(i<t.length))return[3,9];if(!(n=t[i]).isFile)return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.getFileFromEntry(n)];case 3:return s=r.sent(),this.FileDirectoryDetails.push({path:n.fullPath,file:s}),this.DropDirectoryFiles.items.add(s),[3,5];case 4:return o=r.sent(),console.error("Failed to convert FileEntry to File object:",o),[3,5];case 5:return[3,8];case 6:return n.isDirectory?[4,this.traverseDirectory(n)]:[3,8];case 7:r.sent(),r.label=8;case 8:return i++,[3,1];case 9:return e(),[2]}}))}))}),n)}))]}))}))},e.prototype.dropElement=function(e){var t=this;if(this.dragCounter=0,e.preventDefault(),this.isBlazorSaveUrl&&this.directoryUpload){this.FileDirectoryDetails=[],this.DropDirectoryFiles=new DataTransfer;for(var i=e.dataTransfer.items,n=0;n<i.length;n++){var s=i[n].webkitGetAsEntry();s&&s.isDirectory&&this.traverseDirectory(s).then((function(){t.element.files=t.DropDirectoryFiles.files;var i=new CustomEvent("change",{bubbles:!0,detail:{DropEvent:e}});t.element.dispatchEvent(i),t.dropZoneElement.classList.remove(x),-1!==e.dataTransfer.types.indexOf("Files")&&(e.preventDefault(),e.stopPropagation())})).catch((function(e){console.error("Failed to traverse directory:",e)}))}}else{this.element.files=e.dataTransfer.files;var o=new CustomEvent("change",{bubbles:!0,detail:{DropEvent:e}});this.element.dispatchEvent(o),this.dropZoneElement.classList.remove(x),-1!==e.dataTransfer.types.indexOf("Files")&&(e.preventDefault(),e.stopPropagation())}},e.prototype.onPasteFile=function(e){var t=e.clipboardData.items;if(1===t.length){var i=[].slice.call(t)[0];if("file"===i.kind&&i.type.match("^image/")){this.element.files=e.clipboardData.files;var n=new CustomEvent("change",{bubbles:!0,detail:{isDirectory:!1,isPaste:!0}});this.element.dispatchEvent(n)}}},e.prototype.getSelectedFiles=function(e){for(var t=[],i=this.fileList[e],n=this.getFilesData(),s=+i.getAttribute("data-files-count"),o=0,r=0;r<e;r++)o+=+this.fileList[r].getAttribute("data-files-count");for(var a=o;a<o+s;a++)t.push(n[a]);return t},e.prototype.removeFiles=function(e){if(this.enabled){var i=e.target.parentElement;this.isBlazorSaveUrl&&(this.fileList=[].slice.call(this.uploadWrapper.querySelectorAll("li")));var n=this.fileList.indexOf(i),s=this.fileList[n],o=this.isFormUpload(),r=o?this.getSelectedFiles(n):this.getFilesInArray(this.filesData[n]);if(!sf.base.isNullOrUndefined(r)){if(e.target.classList.contains(M)&&!o){if(r[0].statusCode="5",!sf.base.isNullOrUndefined(s)){var a=s.querySelector("."+M);t({target:a,width:"20px"}),u(a)}this.sequentialUpload&&this.uploadSequential(),s.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else sf.base.closest(e.target,".e-spinner-pane")||this.remove(r,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}}},e.prototype.removeFilesData=function(e,t){var i;if(t)this.showFileList||(i=this.filesData.indexOf(e),this.filesData.splice(i,1));else{var n=this.getLiElement(e);if(!sf.base.isNullOrUndefined(n)){this.isBlazorSaveUrl||this.isBlazorTemplate||sf.base.detach(n);var s=n.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(s)||g(s),i=this.fileList.indexOf(n),this.fileList.splice(i,1),this.filesData.splice(i,1),this.isBlazorSaveUrl||this.isBlazorTemplate||0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)?this.dotNetRef.invokeMethodAsync("RemoveFileData",i):(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons(),this.sequentialUpload&&i<=this.count&&--this.count)}}},e.prototype.removeUploadedFile=function(e,t,i,n){var s=this,o=e,r=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);r.emitError=!1;var a=new FormData;r.beforeSend=function(n){t.currentRequest=r.httpRequest,s.currentRequestHeader&&s.updateCustomheader(r.httpRequest,s.currentRequestHeader),s.customFormDatas&&s.updateFormData(a,s.customFormDatas),!i&&s.removingEnabled?s.dotNetRef.invokeMethodAsync("RemovingEvent",t).then((function(t){t.cancel?n.cancel=!0:s.removingEventCallback(e)})):s.removingEventCallback(e),s.sequentialUpload&&--s.count};var l=this.element.getAttribute("name");t.postRawFile&&!sf.base.isNullOrUndefined(o.rawFile)&&""!==o.rawFile?a.append(l,o.rawFile,o.name):a.append(l,o.name),r.onLoad=function(e){return s.removeCompleted(e,o,n),{}},r.onError=function(e){return s.removeFailed(e,o,n),{}},r.send(a)},e.prototype.removeCompleted=function(e,t,i){var n=e&&e.currentTarget?this.getResponse(e):null,s=e.target;if(4===s.readyState&&s.status>=200&&s.status<=299){var o={e:e,response:n,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")};this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",o),this.removeFilesData(t,i);var r=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(r,1),this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData})}else this.removeFailed(e,t,i)},e.prototype.removeFailed=function(e,t,i){var n={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedFailedMessage"),"0")};if(!i){var s=this.filesData.indexOf(t),o=this.fileList[s];if(o){o.classList.remove(E),o.classList.add(I);var r=o.querySelector("."+y);r&&(r.classList.remove(E),r.classList.add(I))}this.checkActionButtonStatus()}this.failuredEnabled&&this.dotNetRef.invokeMethodAsync("FailureEvent",n);var a=this.getLiElement(t);sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(a.querySelector("."+w))||(g(a.querySelector("."+w)),sf.base.detach(a.querySelector(".e-spinner-pane")))},e.prototype.removingEventCallback=function(e){var i=this.getLiElement(e);if(!(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.querySelector("."+w))&&sf.base.isNullOrUndefined(i.querySelector("."+C)))){var n;t({target:n=i.querySelector("."+w)?i.querySelector("."+w):i.querySelector("."+C),width:"20px"}),u(n)}},e.prototype.updateFormData=function(e,t){if(t&&t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.append(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var n=t[i],s=Object.keys(n).map((function(e){return n[e]}));e.setRequestHeader(Object.keys(n)[0],s)},n=0;n<t.length;n++)i(n)},e.prototype.getFilesFromFolder=function(e){var t;if(this.filesEntries=[],t=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]],this.checkDirectoryUpload(t))for(var i=function(i){var s=t[i].webkitGetAsEntry();if(s.isFile){var o=[];s.file((function(e){var t=s.fullPath;o.push({path:t,file:e})})),n.renderSelectedFiles(e,o,!0)}else s.isDirectory&&n.traverseFileTree(s,e)},n=this,s=0;s<t.length;s++)i(s)},e.prototype.checkDirectoryUpload=function(e){for(var t=0;e&&t<e.length;t++){if(e[t].webkitGetAsEntry().isDirectory)return!0}return!1},e.prototype.traverseFileTree=function(e,t){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var i=e.createReader();this.readFileFromDirectory(i,t)}},e.prototype.readFileFromDirectory=function(e,t){var i=this;e.readEntries((function(n){for(var s=0;s<n.length;s++)i.traverseFileTree(n[s],t);i.pushFilesEntries(t),n.length&&i.readFileFromDirectory(e)}))},e.prototype.pushFilesEntries=function(e){for(var t=this,i=[],n=function(n){s.filesEntries[n].file((function(s){if(t.filesEntries.length){var o=t.filesEntries[n].fullPath;i.push({path:o,file:s}),n===t.filesEntries.length-1&&(t.filesEntries=[],t.renderSelectedFiles(e,i,!0))}}))},s=this,o=0;o<this.filesEntries.length;o++)n(o)},e.prototype.onSelectFiles=function(e){var t;if(this.enabled)if(e&&e.detail&&e.detail.DropEvent&&"drop"===e.detail.DropEvent.type)if(this.directoryUpload)this.isBlazorSaveUrl?this.renderSelectedFiles(e.detail.DropEvent,this.FileDirectoryDetails,!0):this.getFilesFromFolder(e.detail.DropEvent);else{for(var i=this.sortFilesList=e.detail.DropEvent.dataTransfer.files,n=[],s=e.detail.DropEvent.dataTransfer.items,o=0;o<i.length;o++)for(var r=0;r<s.length;r++){var a=s[r].webkitGetAsEntry();a&&a.isFile&&a.name==i[o].name&&n.push(i[o])}var l=new DataTransfer;for(o=0;o<n.length;o++)l.items.add(n[o]);var h=l.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=h),h.length>0&&(t=this.multiple?this.sortFileList(h):[h[0]],this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),e.detail?this.renderSelectedFiles(e,t,e.detail.isDirectory,e.detail.isPaste):this.renderSelectedFiles(e,t)},e.prototype.getBase64=function(e){return new Promise((function(t,i){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return i(e)}}))},e.prototype.renderSelectedFiles=function(e,t,i,n){var s=this;this.base64String=[];var o={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null,type:e&&e.type};if(t.length<1)return o.isCanceled=!0,void(this.selectedEnabled&&this.dotNetRef.invokeMethodAsync("SelectedEvent",o));this.flag=!0;var r=[];this.multiple||(this.clearData(!0),this.actionCompleteCount=0,t=[t[0]]);for(var a=0;a<t.length;a++){var l=i?t[a].file:t[a];this.updateInitialFileDetails(e,t,l,a,r,i,n)}if(o.filesData=r,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.enableHtmlSanitizer)for(a=0;a<r.length;a++){var h=sf.base.SanitizeHtmlHelper.beforeSanitize();if(sf.base.SanitizeHtmlHelper.serializeValue(h,r[a].name)!=r[a].name){var d=t[a].name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}));r[a].name=d,r[a].status=this.localizedTexts("invalidFileName"),r[a].statusCode="0"}}this.allTypes||(r=this.checkExtension(r)),this.selectedEnabled?this.dotNetRef.invokeMethodAsync("SelectedEvent",o).then((function(e){for(var t={},i=0,n=r;i<n.length;i++){t[(l=n[i]).id]=l}if(e.isModified&&e.filesData.length>0)for(var o=0,a=e.filesData;o<a.length;o++){var l,h=a[o];(l=t[h.id])&&(l.name=h.name)}s._internalRenderSelect(e,r)})):this._internalRenderSelect(o,r)},e.prototype.updateInitialFileDetails=function(e,t,i,n,s,o,r){var a={name:o?t[n].path.substring(1,t[n].path.length):r?sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?t[n].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),mimeContentType:i.type,lastModifiedDate:new Date(i.lastModified),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};r&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0"),s.push(a)},e.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(this.currentRequestHeader=e.currentRequest,this.customFormDatas=e.customFormData,this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var i=0;i<e.modifiedFilesData.length;i++)for(var n=0;n<t.length;n++)e.modifiedFilesData[i].id===t[n].id&&(e.modifiedFilesData[i].rawFile=t[n].rawFile);var s=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(s),this.filesData=this.filesData.concat(s),this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(s)}else{if(this.createFileList(t,!0),this.autoUpload&&this.sequenceUpload&&!this.isBlazorSaveUrl&&this.filesData.length>0&&"2"!==this.filesData[this.filesData.length-1].statusCode)return void(this.filesData=this.filesData.concat(t));this.isBlazorSaveUrl||this.isBlazorTemplate||(this.filesData=this.filesData.concat(t)),this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(t)}sf.base.isNullOrUndefined(e.progressInterval)||""===e.progressInterval||(this.progressInterval=e.progressInterval)}else{if(this.filesData=this.filesData.concat(t),this.isBlazorSaveUrl)return void this.dotNetRef.invokeMethodAsync("UpdateServerFileData",this.filesData,this.isForm);this.autoUpload&&(this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData,!0))}this.isBlazorSaveUrl||this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},e.prototype.allowUpload=function(){var e=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},e.prototype.isFormUpload=function(){var e=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(e=!0),e},e.prototype.clearData=function(e){sf.base.isNullOrUndefined(this.listParent)||this.isBlazorSaveUrl||this.isBlazorTemplate||(sf.base.detach(this.listParent),this.listParent=null),"msie"===this.browserName||e||(this.element.value=""),this.fileList=[],this.filesData=[],this.isBlazorSaveUrl||this.isBlazorTemplate?this.dotNetRef.invokeMethodAsync("ClearAllFile"):this.removeActionButtons()},e.prototype.updateSortedFileList=function(e){var t=sf.base.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var s=this.listParent.querySelectorAll("li")[n];t.appendChild(s.cloneNode(!0))}this.removeActionButtons();var o=[].slice.call(t.childNodes);this.createParentUL();for(var r=0;r<e.length;r++){for(var a=0;a<this.filesData.length;a++)this.filesData[a].name===e[r].name&&(this.listParent.appendChild(o[a]),sf.base.EventHandler.add(o[a].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(o[a]),i=r);i!==r&&this.createFileList([e[r]])}}else this.createFileList(e)},e.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},e.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var i=[],n=0,s=this.allowedExtensions.split(",");n<s.length;n++){var o=s[n];i.push(o.trim().toLocaleLowerCase())}for(var r=0;r<e.length;r++)-1===i.indexOf(("."+e[r].type).toLocaleLowerCase())&&(e[r].status=this.localizedTexts("invalidFileType"),e[r].statusCode="0")}return t},e.prototype.validatedFileSize=function(e){var t="",i="";return e<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(t="",i=""),{minSize:t,maxSize:i}},e.prototype.isPreLoadFile=function(e){var t=!1;if(this.files)for(var i=0;i<this.files.length;i++)if(this.files[i].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[i].type===e.type){t=!0;break}return t},e.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=sf.base.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},e.prototype.formFileList=function(e,t){var i=sf.base.createElement("li",{className:b});i.setAttribute("data-files-count",e.length+"");for(var n,s=sf.base.createElement("span",{className:"e-file-container"}),o=0,r=e;o<r.length;o++){var a=r[o],l=sf.base.createElement("span",{className:"e-file-name"});l.innerHTML=this.getFileNameOnly(a.name);var h=sf.base.createElement("span",{className:"e-file-type"}),d=this.getFileType(a.name);if(h.innerHTML="."+d,d||h.classList.add("e-hidden"),this.enableRtl){var c=sf.base.createElement("span",{className:"e-rtl-container"});c.appendChild(h),c.appendChild(l),s.appendChild(c)}else s.appendChild(l),s.appendChild(h);this.truncateName(l),n=this.formValidateFileInfo(a,i)}i.appendChild(s),this.setListToFileInfo(e,i);var p=this.listParent.querySelectorAll("li").length,u=sf.base.createElement("span");if(i.classList.contains("e-file-invalid")?(u.classList.add(y),u.classList.add("e-file-invalid"),u.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):n):(u.classList.add(e.length>1?"e-file-information":"e-file-size"),u.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),s.appendChild(u),sf.base.isNullOrUndefined(i.querySelector(".e-icons"))){var f=sf.base.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&f.classList.add("e-msie"),f.setAttribute("title",this.localizedTexts("remove")),f.setAttribute("aria-label",this.localizedTexts("remove")),i.appendChild(s),i.appendChild(f),sf.base.EventHandler.add(f,"click",this.removeFiles,this),f.classList.add(C)}var g={element:i,fileInfo:this.mergeFileInfo(e,i),index:p,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,i))};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",g),this.listParent.appendChild(i),this.fileList.push(i)},e.prototype.formValidateFileInfo=function(e,t){var i=e.status,n=this.validatedFileSize(e.size);""===n.minSize&&""===n.maxSize||(this.addInvalidClass(t),i=""!==n.minSize?this.localizedTexts("invalidMinFileSize"):""!==n.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var s=this.checkExtension(this.getFilesInArray(e))[0].status;return s===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),i=s),i},e.prototype.addInvalidClass=function(e){e.classList.add("e-file-invalid")},e.prototype.createFormInput=function(e){var t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(var i=0,n=e;i<n.length;i++){n[i].input=t}t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},e.prototype.getFileSize=function(e){for(var t=0,i=0,n=e;i<n.length;i++){t+=n[i].size}return t},e.prototype.mergeFileInfo=function(e,t){for(var i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},n=[],s="",o=0,r=e;o<r.length;o++){var a=r[o];n.push(a.name),s=a.type}return i.name=n.join(", "),i.size=this.getFileSize(e),i.type=s,i.status=this.statusForFormUpload(e,t),i},e.prototype.statusForFormUpload=function(e,t){for(var i,n=!0,s=0,o=e;s<o.length;s++){var r=o[s];i=r.status;var a=this.validatedFileSize(r.size);""===a.minSize&&""===a.maxSize||(n=!1,i=""!==a.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var l=this.checkExtension(this.getFilesInArray(r))[0].status;l===this.localizedTexts("invalidFileType")&&(n=!1,i=l)}return n?i=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(t.classList.add("e-file-invalid"),i=e.length>1?this.localizedTexts("invalidFileSelection"):i),i},e.prototype.createFileList=function(e,t){if(this.isBlazorSaveUrl||this.isBlazorTemplate)if(!this.isBlazorSaveUrl&&this.isBlazorTemplate){var i=t?this.filesData=this.filesData.concat(e):e;this.dotNetRef.invokeMethodAsync("CreateFileList",i,this.isForm)}else this.dotNetRef.invokeMethodAsync("CreateFileList",e,this.isForm);else if(this.createParentUL(),this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(e,this.element.files);else for(var n=0,s=e;n<s.length;n++){var o=s[n],r=sf.base.createElement("li",{className:b,attrs:{"data-file-name":o.name,"data-files-count":"1"}}),a=sf.base.createElement("span",{className:"e-file-container"}),l=sf.base.createElement("span",{className:"e-file-name",attrs:{title:o.name}});l.innerHTML=this.getFileNameOnly(o.name);var h=sf.base.createElement("span",{className:"e-file-type"}),d=this.getFileType(o.name);if(h.innerHTML="."+d,d||h.classList.add("e-hidden"),this.enableRtl){var c=sf.base.createElement("span",{className:"e-rtl-container"});c.appendChild(h),c.appendChild(l),a.appendChild(c)}else a.appendChild(l),a.appendChild(h);var p=sf.base.createElement("span",{className:"e-file-size"});p.innerHTML=this.bytesToSize(o.size),a.appendChild(p);var u=sf.base.createElement("span",{className:y});a.appendChild(u),u.innerHTML=o.status,r.appendChild(a);var f=sf.base.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&f.classList.add("e-msie"),f.setAttribute("title",this.localizedTexts("remove")),f.setAttribute("aria-label",this.localizedTexts("remove")),r.appendChild(f),sf.base.EventHandler.add(f,"click",this.removeFiles,this),"2"===o.statusCode?(u.classList.add(E),f.classList.add(w),f.setAttribute("title",this.localizedTexts("delete")),f.setAttribute("aria-label",this.localizedTexts("delete"))):"1"!==o.statusCode&&(u.classList.remove(E),u.classList.add("e-validation-fails")),this.autoUpload&&"1"===o.statusCode&&""!==this.asyncSettings.saveUrl&&(u.innerHTML=""),f.classList.contains(w)||f.classList.add(C);var g={element:r,fileInfo:o,index:e.indexOf(o),isPreload:this.isPreLoadFile(o)};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",g),this.listParent.appendChild(r),this.fileList.push(r),this.truncateName(l);var m=this.flag;this.isPreLoadFile(o)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=m)}},e.prototype.getSlicedName=function(e){var t;t=e.textContent,e.dataset.tail=t.slice(t.length-10)},e.prototype.setListToFileInfo=function(e,t){for(var i=0,n=e;i<n.length;i++){n[i].list=t}},e.prototype.truncateName=function(e){var t=e;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},e.prototype.getFileType=function(e){var t,i=e.lastIndexOf(".");return i>=0&&(t=e.substring(i+1)),t||""},e.prototype.getFileNameOnly=function(e){var t=this.getFileType(e);return e.split("."+t)[0]},e.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},e.prototype.filterfileList=function(e){for(var t=[],i=0;i<e.length;i++)this.getLiElement(e[i]).classList.contains(E)||t.push(e[i]);return t},e.prototype.updateStatus=function(e,t,i,n){if(void 0===n&&(n=!0),""!==t&&!sf.base.isNullOrUndefined(t)&&""!==i&&!sf.base.isNullOrUndefined(i))if(this.isBlazorSaveUrl)for(var s=0;s<this.filesData.length;s++)this.filesData[s].name===e.name&&(this.filesData[s].status=t,this.filesData[s].statusCode=i);else e.status=t,e.statusCode=i;if(n){var o=this.getLiElement(e);sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.querySelector("."+y))||""===t||sf.base.isNullOrUndefined(t)||(o.querySelector("."+y).textContent=t)}return e},e.prototype.getLiElement=function(e){for(var t,i=0;i<this.filesData.length;i++)(sf.base.isNullOrUndefined(this.filesData[i].id)||sf.base.isNullOrUndefined(e.id)?this.filesData[i].name===e.name:this.filesData[i].name===e.name&&this.filesData[i].id===e.id)&&(t=i);return this.fileList[t]},e.prototype.createProgressBar=function(e){var t=sf.base.createElement("span",{className:N}),i=sf.base.createElement("progressbar",{className:O,attrs:{value:"0",max:"100"}}),n=sf.base.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var s=sf.base.createElement("span",{className:"e-progress-bar-text"});s.textContent="0%",n.appendChild(i),t.appendChild(n),t.appendChild(s),e.querySelector(".e-file-container").appendChild(t)},e.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+O)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{var i=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}},e.prototype.changeProgressValue=function(e,t){e.querySelector("."+O).setAttribute("style","width:"+t),e.querySelector(".e-progress-bar-text").textContent=t},e.prototype.uploadInProgress=function(e,t,i,n){var s=this.getLiElement(t);if(!sf.base.isNullOrUndefined(s)||i){if(sf.base.isNullOrUndefined(s))this.cancelUploadingFile(t,e,n);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,n,s),s.querySelectorAll("."+N).length>0||!s.querySelector("."+y)||(s.querySelector("."+y).classList.add("e-upload-progress"),this.createProgressBar(s),this.updateProgressBarClasses(s,"e-upload-progress"),s.querySelector("."+y).classList.remove(I)),this.updateProgressbar(e,s);var o=s.querySelector("."+C);sf.base.isNullOrUndefined(o)||(o.classList.add(M,"e-upload-progress"),o.setAttribute("title",this.localizedTexts("abort")),o.setAttribute("aria-label",this.localizedTexts("abort")),o.classList.remove(C))}var r={e:e,operation:"upload",file:this.updateStatus(t,this.localizedTexts("inProgress"),"3"),lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total};this.progressingEnabled&&this.dotNetRef.invokeMethodAsync("ProgressEvent",r)}},e.prototype.cancelEventCallback=function(e,t,i,n){var s=this;if(n.cancel){if(e.statusCode="3",!sf.base.isNullOrUndefined(i)){var o=i.querySelector("."+M);sf.base.isNullOrUndefined(o)||(g(o),sf.base.detach(i.querySelector(".e-spinner-pane")))}}else{t.emitError=!1,t.httpRequest.abort();var r=new FormData;if("5"===e.statusCode){var a=this.element.getAttribute("name");r.append(a,e.name),r.append("cancel-uploading",e.name);var l=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1,l.onLoad=function(t){return s.removecanceledFile(t,e),{}},l.send(r)}}},e.prototype.cancelUploadingFile=function(e,t,i,n){var s=this;if("5"===e.statusCode){var o={event:t,fileData:e,cancel:!1};this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",o).then((function(t){s.cancelEventCallback(e,i,n,t)})):this.cancelEventCallback(e,i,n,o)}},e.prototype.removecanceledFile=function(e,t){var i=this.getLiElement(t);if(!(sf.base.isNullOrUndefined(i)||i.querySelector("."+S)||sf.base.isNullOrUndefined(i.querySelector("."+M)))){this.updateStatus(t,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,t,i);var n=i.querySelector("."+C);sf.base.isNullOrUndefined(i)||(g(n),sf.base.detach(i.querySelector(".e-spinner-pane")));var s={event:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"cancel",file:t};this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",s)}},e.prototype.renderFailureState=function(e,t,i){var n=this;this.updateProgressBarClasses(i,I),this.removeProgressbar(i,"failure"),sf.base.isNullOrUndefined(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add(I);var s=i.querySelector("."+M);sf.base.isNullOrUndefined(s)||(s.classList.remove(M,"e-upload-progress"),s.classList.add(C),s.setAttribute("title",this.localizedTexts("remove")),s.setAttribute("aria-label",this.localizedTexts("remove")),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("retry")),i.querySelector("."+S).addEventListener("click",(function(e){n.reloadcanceledFile(e,t,i,!1)}),!1))},e.prototype.reloadcanceledFile=function(e,t,i,n){t.statusCode="1",t.status=this.localizedTexts("readyToUploadMessage"),n||(i.querySelector("."+y).classList.remove(I),sf.base.isNullOrUndefined(i.querySelector("."+S))||sf.base.detach(i.querySelector("."+S)),this.pauseButton=null),i.classList.add("e-restrict-retry"),this.upload([t])},e.prototype.uploadComplete=function(e,t,i){var n=e.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var s=this.getLiElement(t);if(sf.base.isNullOrUndefined(s)&&(!i||sf.base.isNullOrUndefined(i)))return;if(!sf.base.isNullOrUndefined(s)){this.updateProgressBarClasses(s,E),this.removeProgressbar(s,"success");var o=s.querySelector("."+M);sf.base.isNullOrUndefined(o)||(o.classList.add(w),o.setAttribute("title",this.localizedTexts("delete")),o.setAttribute("aria-label",this.localizedTexts("delete")),o.classList.remove(M),o.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},e.prototype.getResponse=function(e){var t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},e.prototype.serverRemoveIconBindEvent=function(){if(this.uploadWrapper&&this.isBlazorSaveUrl)for(var e=[].slice.call(this.uploadWrapper.querySelectorAll("ul li")),t=0;t<e.length;t++){var i=e[t]?e[t].querySelector(".e-icons"):null;i&&(sf.base.EventHandler.remove(i,"click",this.removeFiles),sf.base.EventHandler.add(i,"click",this.removeFiles,this))}},e.prototype.raiseSuccessEvent=function(e,t){var i=this,n=e&&e.currentTarget?this.getResponse(e):null,s=this.localizedTexts("uploadSuccessMessage"),o={e:e,response:n,operation:"upload",file:this.updateStatus(t,s,"2",!1),statusText:s};if(!this.isBlazorSaveUrl){var r=this.getLiElement(t);if(!sf.base.isNullOrUndefined(r)){var a=r.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(a)||(g(r),sf.base.detach(a))}}this.successEnabled?this.dotNetRef.invokeMethodAsync("SuccessEvent",o).then((function(e){i.successEventCallback(t,e)})):this.successEventCallback(t,o)},e.prototype.successEventCallback=function(e,t){this.updateStatus(e,t.statusText,"2"),this.uploadedFilesData.push(e),!this.isBlazorSaveUrl&&this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData}),!this.isBlazorSaveUrl&&this.isBlazorTemplate&&this.dotNetRef.invokeMethodAsync("CreateFileList",this.filesData,this.isForm),this.checkActionButtonStatus(),this.sequentialUpload&&!this.showFileList&&this.uploadSequential(),this.fileList.length>0&&(this.getLiElement(e).classList.contains("e-restrict-retry")?this.getLiElement(e).classList.remove("e-restrict-retry"):(this.uploadSequential(),this.checkActionComplete(!0)))},e.prototype.uploadFailed=function(e,t){var i=this,n=this.getLiElement(t),s=e&&e.currentTarget?this.getResponse(e):null,o=this.localizedTexts("uploadFailedMessage"),r={e:e,response:s,operation:"upload",file:this.updateStatus(t,o,"0",!1),statusText:o,retryFiles:null};sf.base.isNullOrUndefined(n)||this.renderFailureState(e,t,n),this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",r).then((function(e){i.failureEventCallback(t,e)})):this.failureEventCallback(t,r)},e.prototype.failureEventCallback=function(e,t){this.updateStatus(e,t.statusText,"0"),this.checkActionButtonStatus(),this.uploadSequential(),this.checkActionComplete(!0);var i=t.retryFiles;null!=i&&this.retry(i)},e.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},e.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},e.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.actionCompleteEnabled&&this.dotNetRef.invokeMethodAsync("ActionCompleteEvent",e)}},e.prototype.getSelectedFileStatus=function(e){for(var t=[],i=0,n=0;n<e.length;n++)for(var s=e[n],o=0;o<this.filesData.length;o++)this.filesData[o].name===s.name&&this.filesData[o].status===s.status&&(t[i]=this.filesData[o],++i);return t},e.prototype.updateProgressBarClasses=function(e,t){var i=e.querySelector("."+O);sf.base.isNullOrUndefined(i)||i.classList.add(t)},e.prototype.removeProgressbar=function(e,t){var i=this;sf.base.isNullOrUndefined(e.querySelector("."+N))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(e.querySelector("."+N),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout((function(){i.animateProgressBar(e,t)}),750))},e.prototype.animateProgressBar=function(e,t){"success"===t?(e.classList.add(E),sf.base.isNullOrUndefined(e.querySelector("."+y))||(e.querySelector("."+y).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+y),{name:"FadeIn"}),e.querySelector("."+y).classList.add(E),e.querySelector("."+y).classList.remove(I))):sf.base.isNullOrUndefined(e.querySelector("."+y))||(e.querySelector("."+y).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+y),{name:"FadeIn"}),e.querySelector("."+y).classList.add(I)),e.querySelector("."+N)&&sf.base.detach(e.querySelector("."+N))},e.prototype.localizedTexts=function(e){return this.localeText[e]},e.prototype.chunkUpload=function(e,t,i){var n=Math.min(this.asyncSettings.chunkSize,e.size),s={chunkIndex:0,blob:e.rawFile.slice(0,n),file:e,start:0,end:n,retryCount:0,request:null};this.sendRequest(e,s,t,i)},e.prototype.sendRequest=function(e,t,i,n){var s=this,o=new FormData;if(!e.rawFile)for(var r=0;r<this.selectedFiles.length;r++)e.id===this.selectedFiles[r].id&&(e.rawFile=this.selectedFiles[r].rawFile);var a=e.rawFile.slice(t.start,t.end);o.append("chunkFile",a,e.name),o.append(this.uploaderName,a,e.name),o.append("chunk-index",t.chunkIndex.toString()),o.append("chunkIndex",t.chunkIndex.toString());var l=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);o.append("total-chunk",l.toString()),o.append("totalChunk",l.toString());var h=new sf.base.Ajax({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});h.emitError=!1,h.onLoad=function(e){return s.chunkUploadComplete(e,t,i),{}},h.onUploadProgress=function(e){return s.chunkUploadInProgress(e,t,i),{}};var d={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};h.beforeSend=function(i){d.currentRequest=h.httpRequest,d.currentChunkIndex=t.chunkIndex,s.currentRequestHeader&&s.updateCustomheader(h.httpRequest,s.currentRequestHeader),s.customFormDatas&&s.updateFormData(o,s.customFormDatas),0===d.currentChunkIndex?s.uploadingEnabled?s.dotNetRef.invokeMethodAsync("UploadingEvent",d).then((function(t){s.uploadingEventCallback(o,t,i,e)})):s.uploadingEventCallback(o,d,i,e):s.chunkUploadingEnabled?s.dotNetRef.invokeMethodAsync("ChunkUploadingEvent",d).then((function(t){s.uploadingEventCallback(o,t,i,e)})):s.uploadingEventCallback(o,d,i,e)},h.onError=function(e){return s.chunkUploadFailed(e,t,i),{}},h.send(o),t.request=h},e.prototype.uploadingEventCallback=function(e,t,i,n){t.cancel?this.eventCancelByArgs(i,t,n):this.updateFormData(e,t.customFormData)},e.prototype.eventCancelByArgs=function(e,t,i){var n=this;if(e.cancel=!0,"5"!==t.fileData.statusCode){var s=this.getLiElement(t.fileData);s.querySelector("."+y).innerHTML=this.localizedTexts("fileUploadCancel"),s.querySelector("."+y).classList.add(I),t.fileData.statusCode="5",t.fileData.status=this.localizedTexts("fileUploadCancel"),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=s.querySelector("."+C);o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",(function(e){n.reloadcanceledFile(e,i,s)}),!1),this.checkActionButtonStatus()}},e.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||sf.base.isNullOrUndefined(this.asyncSettings.chunkSize))},e.prototype.chunkUploadComplete=function(e,t,i){var n,s=this,o=e.target;if(4===o.readyState&&o.status>=200&&o.status<300){var r=e&&e.currentTarget?this.getResponse(e):null,a=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),l={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:a,chunkSize:this.asyncSettings.chunkSize,response:r};if(this.chunkSuccessEnabled&&this.dotNetRef.invokeMethodAsync("ChunkSuccessEvent",l),!sf.base.isNullOrUndefined(i)&&i||(n=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),"5"===t.file.statusCode){var h={event:e,fileData:t.file,cancel:!1};this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",h).then((function(e){s.cancelingEventCallback(t,n,o,i,e)})):this.cancelingEventCallback(t,n,o,i,h)}else{if(a-1===t.chunkIndex&&a>t.chunkIndex){var d=this.pausedData.indexOf(t);return d>=0&&this.pausedData.splice(d,1),sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&n&&(n&&!sf.base.isNullOrUndefined(n.querySelector("."+T))&&sf.base.detach(n.querySelector("."+T)),this.removeChunkProgressBar(t)),void this.raiseSuccessEvent(e,t.file)}"4"!==t.file.statusCode&&this.sendNextRequest(t)}}else this.chunkUploadFailed(e,t)},e.prototype.cancelingEventCallback=function(e,t,i,n,s){var o=this;if(s.cancel){e.file.statusCode="3";var r=t.querySelector("."+M);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(r)||(g(r),sf.base.detach(t.querySelector(".e-spinner-pane"))),this.sendNextRequest(e)}else{e.request.emitError=!1,i.abort();var a=new FormData,l=this.element.getAttribute("name");a.append(l,e.file.name),a.append("cancel-uploading",e.file.name),a.append("cancelUploading",e.file.name);var h=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1,h.onLoad=function(t){return o.removeChunkFile(t,e,n),{}},h.send(a)}},e.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},e.prototype.removeChunkFile=function(e,t,i){if(sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(i)&&!i){var n=this.getLiElement(t.file),s=n.querySelector("."+M),o=s;this.updateStatus(t.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(n,I),this.removeProgressbar(n,"failure"),s&&s.classList.remove(M),s&&s.classList.add(C),s&&s.setAttribute("title",this.localizedTexts("remove")),s&&s.setAttribute("aria-label",this.localizedTexts("remove"));var r=n.querySelector("."+T);r&&r.classList.add(S),r&&r.classList.remove(T),r&&r.setAttribute("title",this.localizedTexts("retry")),r&&r.setAttribute("aria-label",this.localizedTexts("retry")),sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(n.querySelector(".e-spinner-pane"))||(g(o),sf.base.detach(n.querySelector(".e-spinner-pane")))}},e.prototype.pauseUpload=function(e,t,i){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var n={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,i,n)},e.prototype.abortUpload=function(e,t,i){"4"!==e.file.statusCode&&(e.request.emitError=!1,e.request.httpRequest.abort());var n=this.getLiElement(e.file);if(sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(t)||!t)){var s=n.querySelector("."+T);s.classList.remove(T),s.classList.add("e-file-play-btn"),s.setAttribute("title",this.localizedTexts("resume")),s.setAttribute("aria-label",this.localizedTexts("resume")),s.nextElementSibling.classList.add(C),s.nextElementSibling.classList.remove(M),s.nextElementSibling.setAttribute("title",this.localizedTexts("remove")),s.nextElementSibling.setAttribute("aria-label",this.localizedTexts("remove"))}for(var o=0;o<this.pausedData.length;o++)this.pausedData[o].file.name===e.file.name&&this.pausedData.splice(o,1);this.pausedData.push(e),this.pausedEnabled&&this.dotNetRef.invokeMethodAsync("PausingEvent",i)},e.prototype.resumeUpload=function(e,t,i){var n,s=this.getLiElement(e.file);sf.base.isNullOrUndefined(s)||(n=s.querySelector(".e-file-play-btn")),sf.base.isNullOrUndefined(n)||!sf.base.isNullOrUndefined(i)&&i||(n.classList.remove("e-file-play-btn"),n.classList.add(T),n.setAttribute("title",this.localizedTexts("pause")),n.setAttribute("aria-label",this.localizedTexts("pause")),n.nextElementSibling.classList.remove(C),n.nextElementSibling.classList.add(M),n.nextElementSibling.setAttribute("title",this.localizedTexts("abort")),n.nextElementSibling.setAttribute("aria-label",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var o={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.resumeEnabled&&this.dotNetRef.invokeMethodAsync("ResumingEvent",o);for(var r=0;r<this.pausedData.length;r++)this.pausedData[r].end===this.pausedData[r].file.size?this.chunkUploadComplete(t,e,i):this.pausedData[r].file.name===e.file.name&&(this.pausedData[r].start=this.pausedData[r].end,this.pausedData[r].end=this.pausedData[r].end+this.asyncSettings.chunkSize,this.pausedData[r].end=Math.min(this.pausedData[r].end,this.pausedData[r].file.size),this.pausedData[r].chunkIndex=this.pausedData[r].chunkIndex+1,this.sendRequest(this.pausedData[r].file,this.pausedData[r],i))},e.prototype.updateMetaData=function(e){-1===this.uploadMetaData.indexOf(e)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e)},e.prototype.removeChunkProgressBar=function(e){var t=this.getLiElement(e.file);if(!sf.base.isNullOrUndefined(t)){this.updateProgressBarClasses(t,E),this.removeProgressbar(t,"success");var i=t.querySelector("."+M);sf.base.isNullOrUndefined(i)||(i.classList.add(w),i.setAttribute("title",this.localizedTexts("delete")),i.setAttribute("aria-label",this.localizedTexts("delete")),i.classList.remove(M,"e-upload-progress"))}},e.prototype.chunkUploadFailed=function(e,t,i){var n,s=this,o=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);!sf.base.isNullOrUndefined(this.template)||!sf.base.isNullOrUndefined(i)&&i||(n=this.getLiElement(t.file));var r=e&&e.currentTarget?this.getResponse(e):null,a={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:o,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:r};this.chunkFailuredEnabled?this.dotNetRef.invokeMethodAsync("ChunkFailureEvent",a).then((function(o){s.chunkFailureCallback(e,t,n,r,i,o)})):this.chunkFailureCallback(e,t,n,r,i,a)},e.prototype.chunkFailureCallback=function(e,t,i,n,s,o){var r=this;if(!o.cancel)if(t.retryCount<this.asyncSettings.retryCount)setTimeout((function(){r.retryRequest(i,t,s)}),this.asyncSettings.retryAfterDelay);else{if(!sf.base.isNullOrUndefined(i)){var a=i.querySelector("."+T)?i.querySelector("."+T):i.querySelector(".e-file-play-btn");sf.base.isNullOrUndefined(a)||(a.classList.add(S),a.classList.remove(T,"e-file-play-btn")),this.updateProgressBarClasses(i,I),this.removeProgressbar(i,"failure"),i.querySelector(".e-icons").classList.remove("e-upload-progress");var l=i.querySelector("."+M)?i.querySelector("."+M):i.querySelector("."+C);l.classList.remove(M),sf.base.isNullOrUndefined(i.querySelector("."+T))||sf.base.detach(i.querySelector("."+T)),t.start>0?(l.classList.add(w),l.setAttribute("title",this.localizedTexts("delete")),l.setAttribute("aria-label",this.localizedTexts("delete"))):(l.classList.add(C),l.setAttribute("title",this.localizedTexts("remove")),l.setAttribute("aria-label",this.localizedTexts("remove")))}t.retryCount=0;var h=t.file,d=this.localizedTexts("uploadFailedMessage"),c={e:e,response:n,operation:"upload",file:this.updateStatus(h,d,"0",!1),statusText:d,retryFiles:null};this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",c).then((function(e){r.failureCallback(h,e)})):this.failureCallback(h,c)}},e.prototype.failureCallback=function(e,t){this.updateStatus(e,t.statusText,"0"),this.uploadSequential(),this.checkActionComplete(!0);var i=t.retryFiles;null!=i&&this.retry(i)},e.prototype.retryRequest=function(e,t,i){sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&e&&this.updateProgressBarClasses(e,I),t.retryCount+=1,this.sendRequest(t.file,t)},e.prototype.checkPausePlayAction=function(e){var t=e.target,i=e.target.parentElement,n=this.fileList.indexOf(i),s=this.filesData[n],o=this.getCurrentMetaData(s);t.classList.contains(T)?this.pauseUpload(o,e):t.classList.contains("e-file-play-btn")?this.resumeUpload(o,e):t.classList.contains(S)&&(o.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(o,!1):this.retryUpload(o,!0))},e.prototype.retryUpload=function(e,t){t?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add("e-restrict-retry")},e.prototype.chunkUploadInProgress=function(e,t,i){var n=this;if("4"!==t.file.statusCode){"4"!==t.file.statusCode&&"5"!==t.file.statusCode&&(t.file.statusCode="3",t.file.status=this.localizedTexts("inProgress")),this.updateMetaData(t);var s=this.getLiElement(t.file);if(!sf.base.isNullOrUndefined(s)){var o=s.querySelector("."+S);if(sf.base.isNullOrUndefined(o)||(o.classList.add(T),o.setAttribute("title",this.localizedTexts("pause")),o.setAttribute("aria-label",this.localizedTexts("pause")),o.classList.remove(S)),!sf.base.isNullOrUndefined(s)){if(!(s.querySelectorAll("."+N).length>0)){var r=s.querySelector("."+y);sf.base.isNullOrUndefined(this.template)&&(r.classList.add("e-upload-progress"),r.classList.remove(I),this.createProgressBar(s),this.updateProgressBarClasses(s,"e-upload-progress"));var a=s.querySelector("."+C)?s.querySelector("."+C):s.querySelector("."+w);sf.base.isNullOrUndefined(a)||(a.classList.add(M),a.setAttribute("title",this.localizedTexts("abort")),a.setAttribute("aria-label",this.localizedTexts("abort")),a.classList.remove(C))}if(!isNaN(Math.round(e.loaded/e.total*100))&&sf.base.isNullOrUndefined(this.template)&&"4"!==t.file.statusCode){var l=void 0,h=Math.ceil(t.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&h&&(l=Math.round(t.chunkIndex/h*100),this.changeProgressValue(s,l.toString()+"%"))}0===t.chunkIndex&&this.checkActionButtonStatus()}if(sf.base.isNullOrUndefined(s.querySelector("."+T))&&sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(s.querySelector("."+w))){this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var d=s.querySelector("."+M);d.parentElement.insertBefore(this.pauseButton,d),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",(function(e){n.checkPausePlayAction(e)}),!1)}}}},e.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},e.prototype.sortFileList=function(e){for(var t=e=e||this.sortFilesList,i=[],n=0;n<t.length;n++)i.push(t[n].name);for(var s=[],o=0,r=i.sort();o<r.length;o++){var a=r[o];for(n=0;n<t.length;n++)a===t[n].name&&s.push(t[n])}return s},e.prototype.destroy=function(){this.element.value=null,this.isBlazorSaveUrl||this.isBlazorTemplate||this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=0,t=["aria-label","directory","webkitdirectory","tabindex"];e<t.length;e++){var i=t[e];this.element.removeAttribute(i)}},e.prototype.upload=function(e,t){var i=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t)&&this.showFileList)this.sequenceUpload(e);else{var n=this.getFilesInArray(e),s={customFormData:[],currentRequest:null,cancel:!1,withCredentials:!1,filesData:n};this.beforeUploadEnabled?this.dotNetRef.invokeMethodAsync("BeforeUploadEvent",s).then((function(e){i.beforeUploadCallback(n,t,e)})):this.beforeUploadCallback(n,t,s)}},e.prototype.beforeUploadCallback=function(e,t,i){i.cancel||(this.currentRequestHeader=i.currentRequest?i.currentRequest:this.currentRequestHeader,this.customFormDatas=i.customFormData&&i.customFormData.length>0?i.customFormData:this.customFormDatas,this.withCredentials=i.withCredentials?i.withCredentials:this.withCredentials,this.uploadFiles(e,t))},e.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=this.getFileListData(e):t.push(e),t},e.prototype.getFileListData=function(e){var t=[];if(!sf.base.isNullOrUndefined(this.filesData)&&!sf.base.isNullOrUndefined(e))for(var i=function(i){t.push(n.filesData.filter((function(t){return t.id?t.id===e[i].id:t.name===e[i].name}))[0])},n=this,s=0;s<e.length;s++)i(s);return sf.base.isNullOrUndefined(t)?[]:t},e.prototype.uploadFiles=function(e,t){var i=this,n=[];if(""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl))this.dotNetRef.invokeMethodAsync("GetFileDetails",e);else{if(!t||sf.base.isNullOrUndefined(t))if(this.multiple)n=this.filterfileList(e);else{var s=[];s.push(e[0]),n=this.filterfileList(s)}else n=e;for(var o=function(e){r.checkChunkUpload()?r.uploadFilesRequest(n,e,t):n[e]&&n[e].rawFile instanceof File&&r.getBase64(n[e].rawFile).then((function(s){i.base64String.push(s),i.uploadFilesRequest(n,e,t)}))},r=this,a=0;a<n.length;a++)o(a)}},e.prototype.uploadFilesRequest=function(e,t,i){var n,s=this,o=[],r=this.checkChunkUpload(),a=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null);a.emitError=!1,n=e.slice(0),o.push(n[t].rawFile);var l={cancel:!1,currentRequest:null,customFormData:[],fileData:n[t]},h=new FormData;if(a.beforeSend=function(i){l.currentRequest=a.httpRequest,l.currentRequest.withCredentials=s.withCredentials,l.fileData.rawFile=r?l.fileData.rawFile:s.base64String[t],s.currentRequestHeader&&s.updateCustomheader(a.httpRequest,s.currentRequestHeader),s.customFormDatas&&s.updateFormData(h,s.customFormDatas),s.uploadingEnabled?s.dotNetRef.invokeMethodAsync("UploadingEvent",l).then((function(n){l=n,s.uploadCallback(i,r,e,h,t,o,n)})):s.uploadCallback(i,r,e,h,t,o,l)},"1"===e[t].statusCode){var d=this.element.getAttribute("name");h.append(d,e[t].rawFile,e[t].name),r&&e[t].size>this.asyncSettings.chunkSize?this.chunkUpload(e[t],i,t):(a.onLoad=function(n){return l.cancel||s.uploadComplete(n,e[t],i),{}},a.onUploadProgress=function(n){return l.cancel||s.uploadInProgress(n,e[t],i,a),{}},a.onError=function(i){return s.uploadFailed(i,e[t]),{}},a.send(h))}},e.prototype.uploadCallback=function(e,t,i,n,s,o,r){t||(i[s].rawFile=r.fileData.rawFile=o[s]),r.cancel&&this.eventCancelByArgs(e,r,i[s]),this.updateFormData(n,r.customFormData)},e.prototype.spliceFiles=function(e){for(var t=this.fileList[e],i=this.getFilesData(),n=+t.getAttribute("data-files-count"),s=0,o=0;o<e;o++)s+=+this.fileList[o].getAttribute("data-files-count");for(var r=s+n-1;r>=s;r--)i.splice(r,1)},e.prototype.remove=function(e,t,i,n,s){var o=this;sf.base.isNullOrUndefined(n)&&(n=!0);var r={cancel:!1,customFormData:[],currentRequest:null,filesData:this.getFilesInArray(e),postRawFile:n};this.beforeRemoveEnabled?this.dotNetRef.invokeMethodAsync("BeforeRemoveEvent",r).then((function(n){o.beforeRemoveCallback(e,t,i,s,n)})):this.beforeRemoveCallback(e,t,i,s,r)},e.prototype.beforeRemoveCallback=function(e,t,i,n,s){var o=this,r={event:n,cancel:!1,filesData:[],customFormData:[],postRawFile:s.postRawFile,currentRequest:null};if(!s.cancel){this.currentRequestHeader=s.currentRequest,this.customFormDatas=s.customFormData;if(this.isFormUpload()&&!this.isBlazorSaveUrl)r.filesData=e,this.dotNetRef.invokeMethodAsync("RemovingEvent",r).then((function(t){o.removeCallback(e,t)}));else if(!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||this.isBlazorSaveUrl){var a=[];(e=sf.base.isNullOrUndefined(e)?this.filesData:e)instanceof Array?a=e:a.push(e),r.filesData=a;for(var l=this.asyncSettings.removeUrl,h=""!==l&&!sf.base.isNullOrUndefined(l),d=function(e){c.filesData.indexOf(e);var s=c.uploadedFilesData.indexOf(e);("2"===e.statusCode||"4"===e.statusCode||"0"===e.statusCode&&-1!==s)&&h?c.removeUploadedFile(e,r,i,t):!i&&c.removingEnabled?c.dotNetRef.invokeMethodAsync("RemovingEvent",r).then((function(i){i.cancel||o.removeFilesData(e,t)})):c.removeFilesData(e,t),n&&!n.target.classList.contains(C)&&c.checkActionComplete(!1)},c=this,p=0,u=a;p<u.length;p++){d(u[p])}}else r.filesData=this.getFilesData(),this.removingEnabled?this.dotNetRef.invokeMethodAsync("RemovingEvent",r).then((function(e){e.cancel||o.clearAll()})):this.clearAll()}},e.prototype.removeCallback=function(e,t){if(!t.cancel)for(var i=!1,n=void 0,s=0,o=this.getFilesInArray(e);s<o.length;s++){var r=o[s];if(i||(n=this.fileList.indexOf(r.list)),n>-1){var a=sf.base.isNullOrUndefined(r.input)?null:r.input;a&&sf.base.detach(a),this.spliceFiles(n),sf.base.detach(this.fileList[n]),this.fileList.splice(n,1),i=!0,n=-1}}},e.prototype.clearAll=function(){var e=this;if(sf.base.isNullOrUndefined(this.listParent)&&!this.isBlazorSaveUrl&&!this.isBlazorTemplate)return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);var t={cancel:!1,filesData:this.filesData};this.clearEnabled?this.dotNetRef.invokeMethodAsync("ClearingEvent",t).then((function(t){t.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})):(this.clearData(),this.actionCompleteCount=0,this.count=-1)},e.prototype.getFilesData=function(e){return sf.base.isNullOrUndefined(e)?this.filesData:this.getSelectedFiles(e)},e.prototype.pause=function(e,t){e=e||this.filesData;var i=this.getFilesInArray(e);this.pauseUploading(i,t)},e.prototype.pauseUploading=function(e,t){for(var i=this.getFiles(e),n=0;n<i.length;n++)"3"===i[n].statusCode&&this.pauseUpload(this.getCurrentMetaData(i[n],null),null,t)},e.prototype.getFiles=function(e){var t=[];return sf.base.isNullOrUndefined(e)||e instanceof Array?t=e:t.push(e),t},e.prototype.resume=function(e,t){e=e||this.filesData;var i=this.getFilesInArray(e);this.resumeFiles(i,t)},e.prototype.resumeFiles=function(e,t){for(var i=this.getFiles(e),n=0;n<i.length;n++)"4"===i[n].statusCode&&this.resumeUpload(this.getCurrentMetaData(i[n],null),null,t)},e.prototype.retry=function(e,t,i){e=e||this.filesData;var n=this.getFilesInArray(e);this.retryFailedFiles(n,t,i)},e.prototype.retryFailedFiles=function(e,t,i){for(var n=this.getFiles(e),s=0;s<n.length;s++)if("5"===n[s].statusCode||"0"===n[s].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(n[s],null),t);else{var o=void 0;i||(o=this.fileList[this.filesData.indexOf(n[s])]),this.reloadcanceledFile(null,n[s],o,i)}},e.prototype.cancel=function(e){e=e||this.filesData;var t=this.getFilesInArray(e);this.cancelUpload(t)},e.prototype.cancelUpload=function(e){var t=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var i=0;i<t.length;i++)if("3"===t[i].statusCode){var n=this.getCurrentMetaData(t[i],null);n.file.statusCode="5",n.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(n),this.showHideUploadSpinner(t[i])}}else for(i=0;i<t.length;i++)"3"===t[i].statusCode&&(t[i].statusCode="5",t[i].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(t[i]))},e.prototype.showHideUploadSpinner=function(e){var i=this.getLiElement(e);if(!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(this.template)){var n=i.querySelector("."+M);t({target:n,width:"20px"}),u(n)}},e}();return{initialize:function(e,t,i,n){t&&e&&new D(e,t,i,n).initialize()},raiseSuccessEvent:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.raiseSuccessEvent(null,t)},serverRemoveIconBindEvent:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.serverRemoveIconBindEvent()},serverFileListElement:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(s.serverUlElement(t),n||s.serverActionButtonsEventBind(i))},bytesToSize:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?"":i.bytesToSize(t)},cancel:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.cancel(t)},clearAll:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.clearAll()},createFileList:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.createFileList(t,i)},getFilesData:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:i.getFilesData(t)},pause:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.pause(t,i)},remove:function(e,t,i,n,s,o){for(var r=window.sfBlazor.getCompInstance(e),a=0;a<r.filesData.length;a++)t&&r.filesData[a].id===t[0].id&&(t[0]=r.filesData[a]);sf.base.isNullOrUndefined(r)||r.remove(t,i,n,s,o)},resume:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.resume(t,i)},retry:function(e,t,i,n){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.retry(t,i,n)},sortFileList:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:i.sortFileList(t)},upload:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.upload(t,i)},propertyChanges:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.propertyChanges(t,i)}}}()},"./modules/sortable.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.lists=sf.base.extend({},sf.lists,function(e){"use strict";var t,n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},o=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.getHelper=function(e){var t,i=n.getSortableElement(e.sender.target);return!!n.isValidTarget(i,n)&&(n.helper?t=n.helper({sender:i,element:e.element}):((t=i.cloneNode(!0)).style.width=i.offsetWidth+"px",t.style.height=i.offsetHeight+"px"),sf.base.addClass([t],["e-sortableclone"]),document.body.appendChild(t),t)},n.onDrag=function(e){if(e.target){n.trigger("drag",{event:e.event,element:n.element,target:e.target});var t,i=n.getSortableInstance(e.target),s=n.getSortableElement(e.target,i);if(!(n.isValidTarget(s,i)||e.target.className.indexOf("e-list-group-item")>-1)||n.curTarget===s&&sf.base.isNullOrUndefined(i.placeHolder)||i.placeHolderElement&&i.placeHolderElement===e.target)n.curTarget!==n.target&&n.scope&&n.curTarget!==s&&!sf.base.isNullOrUndefined(i.placeHolder)&&(sf.base.remove(n.getSortableInstance(n.curTarget).placeHolderElement),n.curTarget=n.target);else{if(e.target.className.indexOf("e-list-group-item")>-1&&(s=e.target),n.curTarget=s,n.target===s)return;var o=n.getIndex(i.placeHolderElement,i),r=n.getPlaceHolder(s,i),a=void 0;if(r){o=sf.base.isNullOrUndefined(o)?n.getIndex(n.target):o,a=n.getIndex(s,i,e.event);var l=n.isPlaceHolderPresent(i);if(l&&o===a)return;l&&sf.base.remove(i.placeHolderElement),i.placeHolderElement=r,e.target.className.indexOf("e-list-group-item")>-1?i.element.insertBefore(i.placeHolderElement,i.element.children[a]):i.element!==n.element&&a===i.element.childElementCount?i.element.appendChild(i.placeHolderElement):i.element.insertBefore(i.placeHolderElement,i.element.children[a]),n.refreshDisabled(o,a,i)}else{o=sf.base.isNullOrUndefined(o)?n.getIndex(n.target):n.getIndex(s,i)<o||!o?o:o-1,a=n.getIndex(s,i);var h=i.element!==n.element?a:o<a?a+1:a;n.updateItemClass(i),i.element.insertBefore(n.target,i.element.children[h]),n.refreshDisabled(o,a,i),n.curTarget=n.target,n.trigger("drop",{droppedElement:n.target,element:i.element,previousIndex:o,currentIndex:a,target:e.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:e.event,scope:n.scope})}}if(i=n.getSortableInstance(n.curTarget),sf.base.isNullOrUndefined(s)&&e.target!==i.placeHolderElement)n.isPlaceHolderPresent(i)&&n.removePlaceHolder(i);else[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach((function(e){(t=n.getSortableInstance(e)).element&&t!==i&&n.removePlaceHolder(t)}))}},n.onDragStart=function(e){n.target=n.getSortableElement(e.target);var t=!1;n.target.classList.add("e-grabbed"),n.curTarget=n.target,e.helper=document.getElementsByClassName("e-sortableclone")[0];var i={cancel:!1,element:n.element,target:n.target};n.trigger("beforeDragStart",i,(function(i){i.cancel&&(t=i.cancel,n.onDragStop(e))})),t||(sf.base.isBlazor?n.trigger("dragStart",{event:e.event,element:n.element,target:n.target,bindEvents:e.bindEvents,dragElement:e.dragElement}):n.trigger("dragStart",{event:e.event,element:n.element,target:n.target}))},n.onDragStop=function(e){var t,i,s,o=n.getSortableInstance(n.curTarget);t=n.getIndex(n.target);var r=n.isPlaceHolderPresent(o);if(r){var a=n.getIndex(o.placeHolderElement,o),l={previousIndex:t,currentIndex:a,target:e.target,droppedElement:n.target,helper:e.helper,cancel:!1,handled:!1};n.trigger("beforeDrop",l,(function(i){if(!i.cancel){if(s=i.handled,n.updateItemClass(o),i.handled){var r=n.target.cloneNode(!0);n.target.classList.remove("e-grabbed"),n.target=r}o.element.insertBefore(n.target,o.placeHolderElement);var a=n.getIndex(n.target,o);t=n===o&&t-a>1?t-1:t,n.trigger("drop",{event:e.event,element:o.element,previousIndex:t,currentIndex:a,target:e.target,helper:e.helper,droppedElement:n.target,scopeName:n.scope,handled:s})}sf.base.remove(o.placeHolderElement)}))}if(o=n.getSortableInstance(e.target),i=o.element.childElementCount,t=n.getIndex(n.target),o.element===e.target||!r&&n.curTarget===n.target){var h={previousIndex:t,currentIndex:n.curTarget===n.target?t:i,target:e.target,droppedElement:n.target,helper:e.helper,cancel:!1};n.trigger("beforeDrop",h,(function(s){(o.element===e.target||e.target.className.indexOf("e-list-nrt")>-1||e.target.className.indexOf("e-list-nr-template")>-1||e.target.closest(".e-list-nr-template"))&&!s.cancel&&(n.updateItemClass(o),o.element.appendChild(n.target),n.trigger("drop",{event:e.event,element:o.element,previousIndex:t,currentIndex:i,target:e.target,helper:e.helper,droppedElement:n.target,scopeName:n.scope}))}))}n.target.classList.remove("e-grabbed"),n.target=null,n.curTarget=null,sf.base.remove(e.helper),sf.base.getComponent(n.element,"draggable").intDestroy(e.event)},n.bind(),n}var i;return n(t,e),i=t,t.prototype.bind=function(){this.element.id||(this.element.id=sf.base.getUniqueID("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},t.prototype.initializeDraggable=function(){new sf.base.Draggable(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:1}),this.wireEvents()},t.prototype.wireEvents=function(){var e=this.element;sf.base.EventHandler.add(e,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){var e=this.element;sf.base.EventHandler.remove(e,"keydown",this.keyDownHandler)},t.prototype.keyDownHandler=function(e){if(27===e.keyCode){var t=sf.base.getComponent(this.element,"draggable");t&&t.intDestroy(null);var i=document.getElementsByClassName("e-sortableclone")[0];i&&i.remove();var n=document.getElementsByClassName("e-sortable-placeholder")[0];n&&n.remove()}},t.prototype.getPlaceHolder=function(e,t){if(t.placeHolder){var i=t.placeHolder({element:t.element,grabbedElement:this.target,target:e});return i.classList.add("e-sortable-placeholder"),i}return null},t.prototype.isValidTarget=function(e,t){return e&&sf.base.compareElementParent(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(e){sf.base.remove(e.placeHolderElement),e.placeHolderElement=null},t.prototype.updateItemClass=function(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))},t.prototype.getSortableInstance=function(e){if(e=sf.base.closest(e,".e-"+this.getModuleName())){var t=sf.base.getComponent(e,i);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this},t.prototype.refreshDisabled=function(e,t,i){if(i===this)for(var n=void 0,s=e<t,o=void 0,r=s?e:t,a=s?t:e;r<=a;)(n=this.element.children[r]).classList.contains("e-disabled")?(o=this.getIndex(n),this.element.insertBefore(n,this.element.children[s?o+2:o-1]),r=s?o+2:o+1):r++},t.prototype.getIndex=function(e,t,i){var n,s;return void 0===t&&(t=this),[].slice.call(t.element.children).forEach((function(t,o){if(t.classList.contains("e-sortable-placeholder")&&(s=!0),t!==e);else if(n=o,!sf.base.isNullOrUndefined(i)){s&&(n-=1);var r=e.getBoundingClientRect(),a=r.bottom-(r.bottom-r.top)/2,l=i.changedTouches?i.changedTouches[0].clientY:i.clientY;n=l<=a?n:n+1}})),n},t.prototype.getSortableElement=function(e,t){return void 0===t&&(t=this),sf.base.closest(e,"."+t.itemClass)},t.prototype.queryPositionInfo=function(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e},t.prototype.isPlaceHolderPresent=function(e){return e.placeHolderElement&&!!sf.base.closest(e.placeHolderElement,"#"+e.element.id)},t.prototype.moveTo=function(e,t,i){r(this.element,e,t,i)},t.prototype.destroy=function(){this.unwireEvents(),"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),sf.base.getComponent(this.element,sf.base.Draggable).destroy(),e.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"itemClass":[].slice.call(this.element.children).forEach((function(i){i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass),e.itemClass&&i.classList.add(e.itemClass)}))}}},s([sf.base.Property(!1)],t.prototype,"enableAnimation",void 0),s([sf.base.Property(null)],t.prototype,"itemClass",void 0),s([sf.base.Property(null)],t.prototype,"scope",void 0),s([sf.base.Property()],t.prototype,"helper",void 0),s([sf.base.Property()],t.prototype,"placeHolder",void 0),s([sf.base.Event()],t.prototype,"drag",void 0),s([sf.base.Event()],t.prototype,"beforeDragStart",void 0),s([sf.base.Event()],t.prototype,"dragStart",void 0),s([sf.base.Event()],t.prototype,"beforeDrop",void 0),s([sf.base.Event()],t.prototype,"drop",void 0),t=i=s([sf.base.NotifyPropertyChanges],t)}(sf.base.Base);function r(e,t,i,n){var s=[];if(t||(t=e),i&&i.length?i.forEach((function(t){s.push(e.children[t])})):s=[].slice.call(e.children),sf.base.isNullOrUndefined(n))s.forEach((function(e){t.appendChild(e)}));else{var o=t.children[n];s.forEach((function(e){t.insertBefore(e,o)}))}}return e.Sortable=o,e.moveTo=r,e}({}))},"./modules/spinner.js":function(e,t){window.sf=window.sf||{};sf.popups=sf.base.extend({},sf.popups,function(e){"use strict";var t={},i=null,n=null;function s(e,t){var s;if(e.target){var a,l=sf.base.isNullOrUndefined(t)?sf.base.createElement:t,h=function(e,t){var i=t("div",{}),n=t("div",{});return i.classList.add("e-spinner-pane"),n.classList.add("e-spinner-inner"),n.setAttribute("aria-disabled","true"),e.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(e.target,l);if(!sf.base.isNullOrUndefined(e.cssClass)){var d=e.cssClass.split(" ").filter((function(e){return""!==e.trim()}));(s=h.wrap.classList).add.apply(s,d)}if(sf.base.isNullOrUndefined(e.template)&&sf.base.isNullOrUndefined(i)){var c=sf.base.isNullOrUndefined(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(h.wrap):e.type;a=function(e,t){var i;switch(t){case"Material":case"Material3":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":case"Fluent":i=30;break;case"Bootstrap4":case"Bootstrap5":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(sf.base.isNullOrUndefined(e.width)?void 0:e.width,c),o(c,h.wrap,a,l),sf.base.isNullOrUndefined(e.label)||function(e,t,i){var n=i("div",{});n.classList.add("e-spin-label"),n.innerHTML=t,e.appendChild(n)}(h.inner_wrap,e.label,l)}else{var p=sf.base.isNullOrUndefined(e.template)?i:e.template;h.wrap.classList.add("e-spin-template"),r(h.wrap,p,n)}h.wrap.classList.add("e-spin-hide"),h=null}}function o(e,i,n,s){var o=i.querySelector(".e-spinner-inner"),r=o.querySelector("svg");switch(sf.base.isNullOrUndefined(r)||o.removeChild(r),e){case"Material":!function(e,i,n){var s=a();t[""+s]={timeOut:0,type:"Material",radius:i},h(e,s,n,"e-spin-material"),c(i,e,"Material","e-spin-material")}(o,n,s);break;case"Material3":!function(e,i,n){var s=a();t[""+s]={timeOut:0,type:"Material3",radius:i},h(e,s,n,"e-spin-material3"),c(i,e,"Material3","e-spin-material3")}(o,n,s);break;case"Fabric":!function(e,i,n){var s=a();t[""+s]={timeOut:0,type:"Fabric",radius:i},l(e,s,"e-spin-fabric",n),g(i,e,"e-spin-fabric")}(o,n,s);break;case"Fluent":!function(e,i,n){var s=a();t[""+s]={timeOut:0,type:"Fluent",radius:i},l(e,s,"e-spin-fluent",n),g(i,e,"e-spin-fluent")}(o,n,s);break;case"Bootstrap":!function(e,i,n){var s=a();t[""+s]={timeOut:0,type:"Bootstrap",radius:i},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(var s=0;s<=7;s++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class","e-path-circle_"+s),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),n.appendChild(o)}}(e,s),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var n=90,s=0;s<=7;s++){var o=m(0,0,24,n),r=i.querySelector(".e-path-circle_"+s);r.setAttribute("cx",o.x+""),r.setAttribute("cy",o.y+""),n=n>=360?0:n,n+=45}}(e,i)}(o,n);break;case"HighContrast":!function(e,i,n){var s=a();t[""+s]={timeOut:0,type:"HighContrast",radius:i},l(e,s,"e-spin-high-contrast",n),g(i,e,"e-spin-high-contrast")}(o,n,s);break;case"Bootstrap4":!function(e,i,n){var s=a();t[""+s]={timeOut:0,type:"Bootstrap4",radius:i},h(e,s,n,"e-spin-bootstrap4"),c(i,e,"Bootstrap4","e-spin-bootstrap4")}(o,n,s);break;case"Bootstrap5":!function(e,i,n){var s=a();t[""+s]={timeOut:0,type:"Bootstrap5",radius:i},h(e,s,n,"e-spin-bootstrap5"),c(i,e,"Bootstrap5","e-spin-bootstrap5")}(o,n,s);break;case"Tailwind":case"Tailwind-dark":!function(e,i,n){var s=a();t[""+s]={timeOut:0,type:"Tailwind",radius:i},l(e,s,"e-spin-tailwind",n),g(i,e,"e-spin-tailwind")}(o,n,s)}}function r(e,t,i){sf.base.isNullOrUndefined(i)||e.classList.add(i),e.querySelector(".e-spinner-inner").innerHTML=t}function a(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function l(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class",i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-circle");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-arc"),e.insertBefore(s,e.firstChild),s.appendChild(o),s.appendChild(r)}function h(e,t,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",n),s.setAttribute("id",t),o.setAttribute("class","e-path-circle"),e.insertBefore(s,e.firstChild),s.appendChild(o)}function d(e){!function(e,i,n,s,o,r,a){var l=++a.globalInfo[a.uniqueID].previousId,h=(new Date).getTime(),c=i-e,f=(v=2*a.globalInfo[a.uniqueID].radius+"",parseFloat(v)),g=p(f),m=-90*(a.globalInfo[a.uniqueID].count||0);var v;!function i(o){var a=Math.max(0,Math.min((new Date).getTime()-h,s));!function(e,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))||!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3"))){var i=void 0;if(sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))||(i=t.querySelector("svg.e-spin-material3")):i=t.querySelector("svg.e-spin-material"),!sf.base.isNullOrUndefined(i)){var n=i.querySelector("path.e-path-circle");n.setAttribute("stroke-dashoffset",u(f,g,e,r)+""),n.setAttribute("transform","rotate("+m+" "+f/2+" "+f/2+")")}}}(n(a,e,c,s),o.container),l===o.globalInfo[o.uniqueID].previousId&&a<s?t[o.uniqueID].timeOut=setTimeout(i.bind(null,o),1):d(o)}(a)}(1,149,f,1333,e.globalInfo[e.uniqueID].count,75,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function c(e,t,i,n){var s=2*e,o=t.querySelector("svg."+n),r=o.querySelector("path.e-path-circle"),a=p(s),l=s/2+"px";o.setAttribute("viewBox","0 0 "+s+" "+s),o.style.width=o.style.height=s+"px",o.style.transformOrigin=l+" "+l+" "+l,r.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(s,a)),"Material"!==i&&"Material3"!==i||(r.setAttribute("stroke-width",a+""),r.setAttribute("stroke-dasharray",(s-a)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",u(s,a,1,75)+""))}function p(e){return.1*e}function u(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function f(e,t,i,n){var s=(e/=n)*e,o=s*e;return t+i*(6*o*s+-15*s*s+10*o)}function g(e,t,i){var n=e,s=e,o=2*e,r=t.querySelector("."+i),a=r.querySelector(".e-path-circle"),l=r.querySelector(".e-path-arc"),h=o/2+"px";a.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,s,e)),l.setAttribute("d",function(e,t,i,n,s){var o=m(e,t,i,s),r=m(e,t,i,n);return["M",o.x,o.y,"A",i,i,0,0,0,r.x,r.y].join(" ")}(n,s,e,315,45)),r.setAttribute("viewBox","0 0 "+o+" "+o),r.style.transformOrigin=h+" "+h+" "+h,r.style.width=r.style.height=o+"px"}function m(e,t,i,n){var s=(n-90)*Math.PI/180;return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}}function v(e){b(e,!1),e=null}function b(e,i){var n;if(e)if(e.classList.contains("e-spinner-pane"))n=e;else{var s=e.querySelectorAll(".e-spinner-pane");if(sf.base.Browser.isIE){for(var o=0;o<s.length;o++)if(s[o].parentElement&&s[o].parentElement===e){n=s[o];break}}else n=Array.from(s).find((function(t){return t.parentElement===e}))||null}if(e&&n){var r=n.querySelector(".e-spinner-inner");if(i?!n.classList.contains("e-spin-template")&&!n.classList.contains("e-spin-hide"):!n.classList.contains("e-spin-template")&&!n.classList.contains("e-spin-show")){var a=n.querySelector("svg");if(sf.base.isNullOrUndefined(a))return;var l=a.getAttribute("id");switch(t[""+l].isAnimate=!i,t[""+l].type){case"Material":case"Material3":i?clearTimeout(t[l].timeOut):function(e,i,n){var s={};t[""+i].timeOut=0,s[""+i]=function(e,t,i,n){return{radius:t,count:i,previousId:n}}(0,n,0,0),d({uniqueID:i,container:e,globalInfo:s,timeOutVar:0})}(r,l,t[l].radius);break;case"Bootstrap":i?clearTimeout(t[l].timeOut):function(e){for(var i,n,s,o,r,a=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),l=1;l<=8;l++){h(e.getElementsByClassName("e-path-circle_"+(8===l?0:l))[0],l,l,(i=void 0,n=void 0,s=void 0,o=void 0,r=void 0,i=[],s=l,o=!1,r=1,function e(t){i.push(t),(t!==s||1===r)&&(t<=n&&t>1&&!o?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),o=!0):t<8&&o?8===(t=parseFloat((t+.2).toFixed(2)))&&(o=!1):t<=8&&!o&&(t=parseFloat((t-.2).toFixed(2))),++r,e(t))}(n=l),i),a)}function h(e,i,n,s,o){var r=0;!function i(n){t[""+o].isAnimate&&(++r,e.setAttribute("r",n+""),r>=s.length&&(r=0),t[o].timeOut=setTimeout(i.bind(null,s[r]),18))}(i)}}(r)}}i?sf.base.classList(n,["e-spin-hide"],["e-spin-show"]):sf.base.classList(n,["e-spin-show"],["e-spin-hide"]),e=null}}function y(e){b(e,!0),e=null}function C(e,t){var s=sf.base.isNullOrUndefined(t)?sf.base.createElement:t;void 0!==e.template&&(i=e.template,void 0!==e.template&&(n=e.cssClass));for(var o=document.querySelectorAll(".e-spinner-pane"),r=0;r<o.length;r++)w(e.template,o[r],e.type,e.cssClass,s)}function w(e,s,a,l,h){sf.base.isNullOrUndefined(e)&&!s.classList.contains("e-spin-template")?(!function(e,i,n,s){sf.base.isNullOrUndefined(n)||e.classList.add(n);var r=e.querySelector("svg");if(!sf.base.isNullOrUndefined(r)){var a="Bootstrap"===i?parseFloat(r.style.height):parseFloat(r.style.height)/2;if(r.getAttribute("class").split(/\s/).indexOf("e-spin-material")>=0){var l=r.getAttribute("id");clearTimeout(t[""+l].timeOut)}o(i,e,a,s)}}(s,a,l,h),s.classList.contains("e-spin-show")?(s.classList.remove("e-spin-show"),v(s)):(s.classList.remove("e-spin-hide"),y(s))):(i=e,sf.base.isNullOrUndefined(l)||(n=l),sf.base.isNullOrUndefined(i)||r(s,i,n))}return e.Spinner=function(e,t,i,n){switch(e){case"Create":s({type:n,target:document.querySelector(t.target),cssClass:t.cssClass,label:t.label,width:t.width});break;case"Show":v(document.querySelector(i));break;case"Hide":y(document.querySelector(i));break;case"Set":C({cssClass:t.cssClass,type:n})}},e.createSpinner=s,e.showSpinner=v,e.hideSpinner=y,e.setSpinner=C,e}({}))},"./modules/splitbuttonsbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};window.sf.splitbuttons=window.sf.base.extend({},window.sf.splitbuttons,function(e){"use strict";var t,n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=function(e,t,n,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),s([sf.base.Property("")],t.prototype,"iconCss",void 0),s([sf.base.Property("")],t.prototype,"id",void 0),s([sf.base.Property(!1)],t.prototype,"separator",void 0),s([sf.base.Property("")],t.prototype,"text",void 0),s([sf.base.Property("")],t.prototype,"url",void 0),s([sf.base.Property(!1)],t.prototype,"disabled",void 0),t}(sf.base.ChildProperty);return e.getModel=function(e,t){for(var i=sf.base.extend({},e),n=0,s=Object.keys(i);n<s.length;n++){var o=s[n];t.indexOf(o)<0&&sf.base.deleteObject(i,o)}return i},e.upDownKeyHandler=function(e,t){var i=40===t?0:e.childElementCount-1,n=i,s=e.querySelector(".e-selected");s&&s.classList.remove("e-selected");for(var o=0,r=e.children.length;o<r;o++)e.children[o].classList.contains("e-focused")&&(n=o,e.children[o].classList.remove("e-focused"),40===t?n++:n--,n===(40===t?e.childElementCount:-1)&&(n=i));-1!==(n=function e(t,i,n,s,o){void 0===o&&(o=0);(i.classList.contains("e-separator")||i.classList.contains("e-disabled"))&&(n===(40===s?t.childElementCount-1:0)?n=40===s?0:t.childElementCount-1:40===s?n++:n--);if((i=t.children[n]).classList.contains("e-separator")||i.classList.contains("e-disabled")){if(++o===t.childElementCount)return n=-1;n=e(t,i,n,s,o)}return n}(e,e.children[n],n,t))&&(sf.base.addClass([e.children[n]],"e-focused"),e.children[n].focus())},e.setBlankIconStyle=function(e,t){var i=[].slice.call(e.getElementsByClassName("e-blank-icon"));if(t&&[].slice.call(e.getElementsByClassName("e-item")).forEach((function(e){(e.style.paddingLeft||e.style.paddingRight)&&e.removeAttribute("style")})),i.length){var n=e.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!sf.base.isNullOrUndefined(n)){n.classList.contains("e-url")&&(n=n.querySelector(".e-menu-url"));var s,o=n.querySelector(".e-menu-icon"),r=e.classList.contains("e-rtl");s=r?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var a=parseInt(getComputedStyle(o).fontSize,10)+parseInt(getComputedStyle(o)[s.margin],10)+parseInt(getComputedStyle(n).paddingLeft,10)+"px";i.forEach((function(e){e.classList.contains("e-url")?e.querySelector(".e-menu-url").style[s.padding]=a:e.style[s.padding]=a}))}}},e.Item=o,e}({}))},"./modules/svgbase.js":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{},window.sf.svgbase=function(e){"use strict";var t=function(){function e(e){this.svgLink="http://www.w3.org/2000/svg",this.rootId=e}return e.prototype.getOptionValue=function(e,t){return e[t]},e.prototype.createSvg=function(e){return sf.base.isNullOrUndefined(e.id)&&(e.id=this.rootId+"_svg"),this.svgObj=document.getElementById(e.id),sf.base.isNullOrUndefined(document.getElementById(e.id))&&(this.svgObj=document.createElementNS(this.svgLink,"svg")),this.svgObj=this.setElementAttributes(e,this.svgObj),this.setSVGSize(e.width,e.height),this.svgObj},e.prototype.setSVGSize=function(e,t){var i=document.getElementById(this.rootId),n=sf.base.isNullOrUndefined(i)?null:i.getBoundingClientRect();sf.base.isNullOrUndefined(this.width)||this.width<=0?this.svgObj.setAttribute("width",e?e.toString():n.width.toString()):this.svgObj.setAttribute("width",this.width.toString()),sf.base.isNullOrUndefined(this.height)||this.height<=0?this.svgObj.setAttribute("height",t?t.toString():"450"):this.svgObj.setAttribute("height",this.height.toString())},e.prototype.drawPath=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"path")),t=this.setElementAttributes(e,t)},e.prototype.drawLine=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"line")),t=this.setElementAttributes(e,t)},e.prototype.drawRectangle=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"rect")),t=this.setElementAttributes(e,t)},e.prototype.drawCircle=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"circle")),t=this.setElementAttributes(e,t)},e.prototype.drawPolyline=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"polyline")),t=this.setElementAttributes(e,t)},e.prototype.drawEllipse=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"ellipse")),t=this.setElementAttributes(e,t)},e.prototype.drawPolygon=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"polygon")),t=this.setElementAttributes(e,t)},e.prototype.drawImage=function(e){var t=document.createElementNS(this.svgLink,"image");return t.setAttributeNS(null,"height",e.height.toString()),t.setAttributeNS(null,"width",e.width.toString()),t.setAttributeNS("http://www.w3.org/1999/xlink","href",e.href),t.setAttributeNS(null,"x",e.x.toString()),t.setAttributeNS(null,"y",e.y.toString()),t.setAttributeNS(null,"id",e.id),t.setAttributeNS(null,"visibility",e.visibility),sf.base.isNullOrUndefined(this.getOptionValue(e,"clip-path"))||t.setAttributeNS(null,"clip-path",this.getOptionValue(e,"clip-path")),sf.base.isNullOrUndefined(e.preserveAspectRatio)||t.setAttributeNS(null,"preserveAspectRatio",e.preserveAspectRatio),t},e.prototype.createText=function(e,t){var i=document.createElementNS(this.svgLink,"text");return i=this.setElementAttributes(e,i),sf.base.isNullOrUndefined(t)||(i.textContent=t),i},e.prototype.createTSpan=function(e,t){var i=document.createElementNS(this.svgLink,"tspan");return i=this.setElementAttributes(e,i),sf.base.isNullOrUndefined(t)||(i.textContent=t),i},e.prototype.createTitle=function(e){var t=document.createElementNS(this.svgLink,"title");return t.textContent=e,t},e.prototype.createDefs=function(){return document.createElementNS(this.svgLink,"defs")},e.prototype.createClipPath=function(e){var t=document.createElementNS(this.svgLink,"clipPath");return t=this.setElementAttributes(e,t)},e.prototype.createForeignObject=function(e){var t=document.createElementNS(this.svgLink,"foreignObject");return t=this.setElementAttributes(e,t)},e.prototype.createGroup=function(e){var t=document.createElementNS(this.svgLink,"g");return t=this.setElementAttributes(e,t)},e.prototype.createPattern=function(e,t){var i=document.createElementNS(this.svgLink,t);return i=this.setElementAttributes(e,i)},e.prototype.createRadialGradient=function(e,t,i){var n;if(sf.base.isNullOrUndefined(e[0].colorStop))n=e[0].color.toString();else{var s={id:this.rootId+"_"+t+"radialGradient",cx:i.cx+"%",cy:i.cy+"%",r:i.r+"%",fx:i.fx+"%",fy:i.fy+"%"};this.drawGradient("radialGradient",s,e),n="url(#"+this.rootId+"_"+t+"radialGradient)"}return n},e.prototype.createLinearGradient=function(e,t,i){var n;if(sf.base.isNullOrUndefined(e[0].colorStop))n=e[0].color.toString();else{var s={id:this.rootId+"_"+t+"linearGradient",x1:i.x1+"%",y1:i.y1+"%",x2:i.x2+"%",y2:i.y2+"%"};this.drawGradient("linearGradient",s,e),n="url(#"+this.rootId+"_"+t+"linearGradient)"}return n},e.prototype.drawGradient=function(e,t,i){var n=this.createDefs(),s=document.createElementNS(this.svgLink,e);s=this.setElementAttributes(t,s);for(var o=0;o<i.length;o++){var r=document.createElementNS(this.svgLink,"stop");r.setAttribute("offset",i[o].colorStop),r.setAttribute("stop-color",i[o].color),r.setAttribute("stop-opacity",i[o].opacity?i[o].opacity:"1"),sf.base.isNullOrUndefined(i[o].style)||(r.style.cssText=i[o].style),s.appendChild(r)}return n.appendChild(s),n},e.prototype.drawClipPath=function(e){var t=this.createDefs(),i=this.createClipPath({id:e.id});e.id=e.id+"_Rect";var n=this.drawRectangle(e);return i.appendChild(n),t.appendChild(i),t},e.prototype.drawCircularClipPath=function(e){var t=this.createDefs(),i=this.createClipPath({id:e.id});e.id=e.id+"_Circle";var n=this.drawCircle(e);return i.appendChild(n),t.appendChild(i),t},e.prototype.setElementAttributes=function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++)"style"===i[n]?t.style.cssText=e[i[n]]:t.setAttribute(i[n],e[i[n]]);return t},e.prototype.createCanvas=function(){return null},e}(),i=function(){function e(e){this.rootId=e}return e.prototype.getOptionValue=function(e,t){return e[t]},e.prototype.createCanvas=function(e){var t=document.createElement("canvas");return t.setAttribute("id",this.rootId+"_canvas"),this.ctx=t.getContext("2d"),this.canvasObj=t,this.setCanvasSize(e.width,e.height),this.canvasObj},e.prototype.setCanvasSize=function(e,t){var i=document.getElementById(this.rootId),n=sf.base.isNullOrUndefined(i)?null:i.getBoundingClientRect();sf.base.isNullOrUndefined(this.width)?this.canvasObj.setAttribute("width",e?e.toString():n.width.toString()):this.canvasObj.setAttribute("width",this.width.toString()),sf.base.isNullOrUndefined(this.height)?this.canvasObj.setAttribute("height",t?t.toString():"450"):this.canvasObj.setAttribute("height",this.height.toString())},e.prototype.setAttributes=function(e){this.ctx.lineWidth=this.getOptionValue(e,"stroke-width");var t=this.getOptionValue(e,"stroke-dasharray");if(!sf.base.isNullOrUndefined(t)){var i=t.split(",");this.ctx.setLineDash([parseInt(i[0],10),parseInt(i[1],10)])}this.ctx.strokeStyle=this.getOptionValue(e,"stroke")},e.prototype.drawLine=function(e){this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.moveTo(e.x1,e.y1),this.ctx.lineTo(e.x2,e.y2),this.ctx.stroke(),this.ctx.restore()},e.prototype.drawRectangle=function(e,t){var i=this.ctx,n=e.rx;return this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=this.getOptionValue(e,"opacity"),this.setAttributes(e),this.ctx.rect(e.x,e.y,e.width,e.height),null!==n&&n>=0?this.drawCornerRadius(e):("none"===e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.stroke()),this.ctx.restore(),this.ctx=i,this.canvasObj},e.prototype.drawCornerRadius=function(e){var t=e.rx,i=e.x,n=e.y,s=e.width,o=e.height;"none"===e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,s<2*t&&(t=s/2),o<2*t&&(t=o/2),this.ctx.beginPath(),this.ctx.moveTo(i+s-t,n),this.ctx.arcTo(i+s,n,i+s,n+o,t),this.ctx.arcTo(i+s,n+o,i,n+o,t),this.ctx.arcTo(i,n+o,i,n,t),this.ctx.arcTo(i,n,i+s,n,t),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()},e.prototype.drawPath=function(e,t){var i=e.d.split(" "),n=this.getOptionValue(e,"stroke-width"),s=this.ctx,o=!0;this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=e.opacity?e.opacity:this.getOptionValue(e,"fill-opacity"),this.setAttributes(e);for(var r=0;r<i.length;r+=3){var a=parseFloat(i[r+1]),l=parseFloat(i[r+2]);switch(i[r]){case"M":e.innerR||e.cx||this.ctx.moveTo(a,l);break;case"L":e.innerR||this.ctx.lineTo(a,l);break;case"Q":var h=parseFloat(i[r+3]),d=parseFloat(i[r+4]);this.ctx.quadraticCurveTo(a,l,h,d),r+=2;break;case"C":var c=parseFloat(i[r+3]),p=parseFloat(i[r+4]),u=parseFloat(i[r+5]),f=parseFloat(i[r+6]);this.ctx.bezierCurveTo(a,l,c,p,u,f),r+=4;break;case"A":e.innerR?o&&(this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.arc(e.x,e.y,e.innerR,e.end,e.start,!e.counterClockWise),o=!1):e.cx?this.ctx.arc(e.cx,e.cy,e.radius,0,2*Math.PI,e.counterClockWise):(this.ctx.moveTo(e.x,e.y),this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.lineTo(e.x,e.y)),r+=5;break;case"z":case"Z":this.ctx.closePath(),r-=2}}return"none"!==e.fill&&void 0!==e.fill&&(this.ctx.fillStyle=e.fill,this.ctx.fill()),n>0&&this.ctx.stroke(),this.ctx.restore(),this.ctx=s,this.canvasObj},e.prototype.createText=function(e,t,i,n,s,o){var r=this.getOptionValue(e,"font-weight");sf.base.isNullOrUndefined(r)||"regular"!==r.toLowerCase()||(r="normal");var a=this.getOptionValue(e,"font-size"),l=this.getOptionValue(e,"font-family"),h=this.getOptionValue(e,"font-style").toLowerCase()+" "+r+" "+a+" "+l,d=this.getOptionValue(e,"text-anchor"),c=void 0!==e.opacity?e.opacity:1;if("middle"===d&&(d="center"),this.ctx.save(),this.ctx.fillStyle=e.fill,this.ctx.font=h,this.ctx.textAlign=d,this.ctx.globalAlpha=c,e.baseline&&(this.ctx.textBaseline=e.baseline),!o){this.ctx.translate(e.x+0+(i||0),e.y+(n||0)),this.ctx.rotate(e.labelRotation*Math.PI/180)}return this.ctx.fillText(t,o?e.x:0,o?s:0),this.ctx.restore(),this.canvasObj},e.prototype.drawCircle=function(e,t){var i=this.ctx;return this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.cx,e.cy,e.r,0,2*Math.PI),this.ctx.fillStyle=e.fill,this.ctx.globalAlpha=e.opacity,this.ctx.fill(),t&&this.ctx.translate(t[0],t[1]),this.setAttributes(e),this.ctx.stroke(),this.ctx.restore(),this.ctx=i,this.canvasObj},e.prototype.drawPolyline=function(e){this.ctx.save(),this.ctx.beginPath();for(var t=e.points.split(" "),i=0;i<t.length-1;i++){var n=t[i].split(","),s=parseFloat(n[0]),o=parseFloat(n[1]);0===i?this.ctx.moveTo(s,o):this.ctx.lineTo(s,o)}this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore()},e.prototype.drawEllipse=function(e,t){var i=this.ctx,n=Math.max(e.rx,e.ry),s=e.rx/n,o=e.ry/n;this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(e.cx,e.cy),t&&this.ctx.translate(t[0],t[1]),this.ctx.save(),this.ctx.scale(s,o),this.ctx.arc(0,0,n,0,2*Math.PI,!1),this.ctx.fillStyle=e.fill,this.ctx.fill(),this.ctx.restore(),this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore(),this.ctx=i},e.prototype.drawImage=function(e){this.ctx.save();var t=new Image;sf.base.isNullOrUndefined(e.href)||(t.src=e.href,this.ctx.drawImage(t,e.x,e.y,e.width,e.height)),this.ctx.restore()},e.prototype.createLinearGradient=function(e){var t;return sf.base.isNullOrUndefined(e[0].colorStop)||(t=this.ctx.createLinearGradient(0,0,0,this.canvasObj.height)),this.setGradientValues(e,t)},e.prototype.createRadialGradient=function(e){var t;return sf.base.isNullOrUndefined(e[0].colorStop)||(t=this.ctx.createRadialGradient(0,0,0,0,0,this.canvasObj.height)),this.setGradientValues(e,t)},e.prototype.setGradientValues=function(e,t){var i;if(sf.base.isNullOrUndefined(e[0].colorStop))i=e[0].color.toString();else{for(var n=0;n<=e.length-1;n++){var s=e[n].color,o=e[n].colorStop.slice(0,-1),r=parseInt(o,10)/100;t.addColorStop(r,s)}i=t.toString()}return i},e.prototype.setElementAttributes=function(e,t){for(var i=Object.keys(e),n=Object.keys(e).map((function(t){return e[t]})),s=0;s<i.length;s++)t.setAttribute(i[s],n[s]);return null},e.prototype.updateCanvasAttributes=function(e){this.setElementAttributes(e,this.canvasObj);var t=this.ctx;if(!sf.base.isNullOrUndefined(this.dataUrl)){var i=new Image;i.onload=function(){t.drawImage(i,0,0)},i.src=this.dataUrl}},e.prototype.clearRect=function(e){this.ctx.restore(),this.ctx.clearRect(e.x,e.y,e.width,e.height)},e.prototype.createGroup=function(){return null},e.prototype.drawClipPath=function(){return null},e.prototype.drawCircularClipPath=function(){return null},e.prototype.canvasClip=function(e){this.ctx.save(),this.ctx.fillStyle="transparent",this.ctx.rect(e.x,e.y,e.width,e.height),this.ctx.fill(),this.ctx.clip()},e.prototype.canvasRestore=function(){this.ctx.restore()},e.prototype.drawPolygon=function(){return null},e.prototype.createDefs=function(){return null},e.prototype.createClipPath=function(){return null},e.prototype.createSvg=function(){return null},e}();function s(e){var t;switch(e){case"Highcontrast":case"HighContrast":t={tooltipFill:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696",textStyle:{fontFamily:"Segoe UI",color:"#000000"}};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":t={tooltipFill:"MaterialDark"===e?"#F4F4F4":"FabricDark"===e?"#A19F9D":"#F0F0F0",tooltipBoldLabel:"MaterialDark"===e?"rgba(18, 18, 18, 1)":"FabricDark"===e?"#DADADA":"#1A1A1A",tooltipLightLabel:"MaterialDark"===e?"rgba(18, 18, 18, 1)":"FabricDark"===e?"#DADADA":"#1A1A1A",tooltipHeaderLine:"#9A9A9A",textStyle:"MaterialDark"===e?{fontFamily:"Roboto",color:"rgba(18, 18, 18, 1)"}:"FabricDark"===e?{fontFamily:"Segoe UI",color:"#DADADA"}:{fontFamily:"Helvetica",color:"#1A1A1A"}};break;case"Bootstrap4":t={tooltipFill:"#212529",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"rgba(255, 255, 255, 0.2)",textStyle:{fontFamily:"Helvetica",color:"#F9FAFB"}};break;case"Tailwind":t={tooltipFill:"#111827",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#6B7280",textStyle:{fontFamily:"Inter",color:"#F9FAFB"}};break;case"TailwindDark":t={tooltipFill:"#E9ECEF",tooltipBoldLabel:"#1F2937",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#9CA3AF",textStyle:{fontFamily:"Inter",color:"#1F2937"}};break;case"Bootstrap5":t={tooltipFill:"#212529",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#9CA3AF",textStyle:{fontFamily:"Helvetica",color:"#F9FAFB"}};break;case"Bootstrap5Dark":t={tooltipFill:"#E9ECEF",tooltipBoldLabel:"#212529",tooltipLightLabel:"#212529",tooltipHeaderLine:"#ADB5BD",textStyle:{fontFamily:"Helvetica",color:"#212529"}};break;case"Fluent":t={tooltipFill:"#FFFFFF",tooltipBoldLabel:"#323130",tooltipLightLabel:"#323130",tooltipHeaderLine:"#D2D0CE",textStyle:{fontFamily:"Segoe UI",color:"#323130"}};break;case"FluentDark":t={tooltipFill:"#323130",tooltipBoldLabel:"#F3F2F2",tooltipLightLabel:"#F3F2F1",tooltipHeaderLine:"#3B3A39",textStyle:{fontFamily:"Segoe UI",color:"#F3F2F1"}};break;case"Material3":t={tooltipFill:"#313033",tooltipBoldLabel:"#F4EFF4",tooltipLightLabel:"#F4EFF4",tooltipHeaderLine:"#F4EFF4",textStyle:{fontFamily:"Roboto",color:"#F4EFF4"}};break;case"Material3Dark":t={tooltipFill:"#E6E1E5",tooltipBoldLabel:"#313033",tooltipLightLabel:"#313033",tooltipHeaderLine:"#313033",textStyle:{fontFamily:"Roboto",color:"#313033"}};break;default:t={tooltipFill:"Material"===e?"#000816":"Fabric"===e?"#FFFFFF":"#212529",tooltipBoldLabel:"Material"===e?"rgba(249, 250, 251, 1)":"Fabric"===e?"#333333":"#F9FAFB",tooltipLightLabel:"Material"===e?"rgba(249, 250, 251, 1)":"Fabric"===e?"#333333":"#F9FAFB",tooltipHeaderLine:"Fabric"===e?"#D2D0CE":"#ffffff",textStyle:"Material"===e?{fontFamily:"Roboto",color:"rgba(249, 250, 251, 1)"}:"Fabric"===e?{fontFamily:"Segoe UI",color:"#333333"}:{fontFamily:"Helvetica",color:"#F9FAFB"}}}return t}var o,r=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});function a(e,t,i){var n=e||"",s=document.getElementById("chartmeasuretext");if(null===s&&(s=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(s)),"string"==typeof e&&(e.indexOf("<")>-1||e.indexOf(">")>-1)){for(var o=e.split(" "),r=0;r<o.length;r++)-1===o[r].indexOf("<br/>")&&(o[r]=o[r].replace(/[<>]/g,"&"));e=o.join(" ")}return s.innerHTML=n.indexOf("<br>")>-1||n.indexOf("<br/>")>-1?n:e,s.style.position="fixed",s.style.fontSize=t.size,s.style.fontWeight=t.fontWeight,s.style.fontStyle=t.fontStyle,s.style.fontFamily=t.fontFamily||i.fontFamily,s.style.visibility="hidden",s.style.top="-100",s.style.left="0",s.style.whiteSpace="nowrap",s.style.lineHeight="normal",new d(s.clientWidth,s.clientHeight)}function l(e,t,i,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),e>=i.x-n&&e<=i.x+i.width+n&&t>=i.y-s&&t<=i.y+i.height+s}function h(e,t,i,n,s,o,r,a,l,h,d){void 0===d&&(d="");var c="",p=i.x,u=i.y,f=i.x+i.width,g=i.y+i.height;return o?(c=(c=c.concat("M "+p+" "+(u+t)+" Q "+p+" "+u+" "+(p+e)+" "+u+"  L "+(f-e)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+t))).concat(" L "+f+" "+(g-t)+" Q "+f+" "+g+" "+(f-e)+" "+g),0!==s&&(c="RangeNavigator"===d?n.x-s>f/2?(c=c.concat(" L "+(n.x+s)+" "+g)).concat(" L "+(l+s)+" "+(g+s)+" L "+n.x+" "+g):(c=c.concat(" L "+n.x+" "+g)).concat(" L "+(l-s)+" "+(g+s)+" L "+(n.x-s)+" "+g):(c=c.concat(" L "+(n.x+s)+" "+g)).concat(" L "+l+" "+(g+s)+" L "+(n.x-s)+" "+g)),c=n.x-s>p||0===s?c.concat(" L "+(p+e)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-t)+" z"):c.concat(" L "+p+" "+(g+t)+" z")):r?c=(c=(c=(c=(c=c.concat("M "+p+" "+(u+t)+" Q "+p+" "+u+" "+(p+e)+" "+u+" L "+(n.x-s)+" "+u)).concat(" L "+l+" "+n.y)).concat(" L "+(n.x+s)+" "+u)).concat(" L "+(f-e)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+t))).concat(" L "+f+" "+(g-t)+" Q "+f+" "+g+" "+(f-e)+" "+g+" L "+(p+e)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-t)+" z"):a?(c=(c=c.concat("M "+p+" "+(u+t)+" Q "+p+" "+u+" "+(p+e)+" "+u)).concat(" L "+(f-e)+" "+u+" Q "+f+" "+u+" "+f+" "+("RangeNavigator"===d?0:u+t)+" L "+f+" "+("RangeNavigator"===d?0:n.y-s)),c="RangeNavigator"===d?c.concat(" L "+(f+s)+" 0"):c.concat(" L "+(f+s)+" "+h),c=(c=(c="RangeNavigator"===d?c.concat(" L "+f+" "+(n.y-t)):c.concat(" L "+f+" "+(n.y+s))).concat(" L "+f+" "+(g-t)+" Q "+f+" "+g+" "+(f-e)+" "+g)).concat(" L "+(p+e)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-t)+" z")):(c=c.concat("M "+(p+e)+" "+u+" Q "+p+" "+u+" "+p+" "+("RangeNavigator"===d?0:u+t)+" L "+p+" "+("RangeNavigator"===d?0:n.y-s)),c="RangeNavigator"===d?c.concat(" L "+(p-s)+" 0"):c.concat(" L "+(p-s)+" "+h),c=(c=(c="RangeNavigator"===d?c.concat(" L "+p+" "+(n.y-t)):c.concat(" L "+p+" "+(n.y+s))).concat(" L "+p+" "+(g-t)+" Q "+p+" "+g+" "+(p+e)+" "+g)).concat(" L "+(f-e)+" "+g+" Q "+f+" "+g+" "+f+" "+(g-t)+" L "+f+" "+(u+t)+" Q "+f+" "+u+" "+(f-e)+" "+u+" z")),c}var d=function(e,t){this.width=e,this.height=t},c=function(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n},p=function(e,t){this.isRight=t,this.isBottom=e},u=function(e){this.id=e},f=function(e){function t(t,i,n,s,o,r,a,l){void 0===r&&(r="");var h=e.call(this,t)||this;return h.transform="",h.baseLine="auto",h.labelRotation=0,h.x=i,h.y=n,h.anchor=s,h.text=o,h.transform=r,h.baseLine=a,h.labelRotation=l,h}return r(t,e),t}(u);function g(e){return document.getElementById(e)}function m(e){var t=g(e);t&&sf.base.remove(t)}function v(e,i,n,s,o,r){var a=new t(""),l=b(e,n,i,o,s),h=a["draw"+l.functionName](l.renderOption);return h.setAttribute("aria-label",r),h}function b(e,t,i,n,s){var o,r="Path",a=t.width,l=t.height,h=e.x,d=e.y,c=e.x+-a/2,p=e.y+-l/2;switch(i){case"Circle":case"Bubble":r="Ellipse",sf.base.merge(n,{rx:a/2,ry:l/2,cx:h,cy:d});break;case"Plus":o="M "+c+" "+d+" L "+(h+a/2)+" "+d+" M "+h+" "+(d+l/2)+" L "+h+" "+(d+-l/2),sf.base.merge(n,{d:o,stroke:n.fill});break;case"Cross":o="M "+c+" "+(d+-l/2)+" L "+(h+a/2)+" "+(d+l/2)+" M "+c+" "+(d+l/2)+" L "+(h+a/2)+" "+(d+-l/2),sf.base.merge(n,{d:o,stroke:n.fill});break;case"HorizontalLine":o="M "+c+" "+d+" L "+(h+a/2)+" "+d,sf.base.merge(n,{d:o,stroke:n.fill});break;case"VerticalLine":o="M "+h+" "+(d+l/2)+" L "+h+" "+(d+-l/2),sf.base.merge(n,{d:o,stroke:n.fill});break;case"Diamond":o="M "+c+" "+d+" L "+h+" "+(d+-l/2)+" L "+(h+a/2)+" "+d+" L "+h+" "+(d+l/2)+" L "+c+" "+d+" z",sf.base.merge(n,{d:o});break;case"Rectangle":o="M "+c+" "+(d+-l/2)+" L "+(h+a/2)+" "+(d+-l/2)+" L "+(h+a/2)+" "+(d+l/2)+" L "+c+" "+(d+l/2)+" L "+c+" "+(d+-l/2)+" z",sf.base.merge(n,{d:o});break;case"Triangle":o="M "+c+" "+(d+l/2)+" L "+h+" "+(d+-l/2)+" L "+(h+a/2)+" "+(d+l/2)+" L "+c+" "+(d+l/2)+" z",sf.base.merge(n,{d:o});break;case"InvertedTriangle":o="M "+(h+a/2)+" "+(d-l/2)+" L "+h+" "+(d+l/2)+" L "+(h-a/2)+" "+(d-l/2)+" L "+(h+a/2)+" "+(d-l/2)+" z",sf.base.merge(n,{d:o});break;case"Pentagon":for(var u=void 0,f=void 0,g=0;g<=5;g++)u=a/2*Math.cos(Math.PI/180*(72*g)),f=l/2*Math.sin(Math.PI/180*(72*g)),o=0===g?"M "+(h+u)+" "+(d+f)+" ":o.concat("L "+(h+u)+" "+(d+f)+" ");o=o.concat("Z"),sf.base.merge(n,{d:o});break;case"Image":r="Image",sf.base.merge(n,{href:s,height:l,width:a,x:c,y:p})}return{renderOption:n,functionName:r}}var y=function(e){function t(t,i,n,s,o,r,a){var l=e.call(this,t)||this;return l.opacity=o,l.fill=i,l.stroke=s,l["stroke-width"]=n,l["stroke-dasharray"]=r,l.d=a,l}return r(t,e),t}(u);function C(e,i,n,s,o){var r,a=new t("");r={id:e.id,x:e.x,y:e.y,fill:n,"font-size":i.size,"font-style":i.fontStyle,"font-family":i.fontFamily||o.fontFamily,"font-weight":i.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:i.opacity,"dominant-baseline":e.baseLine};var l="string"==typeof e.text?e.text:e.text[0],h=a.createText(r,l);return s&&s.appendChild(h),h}var w,M=function(e,t){this.x=e,this.y=t},S=(w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),x=function(e,t,i,s){var o,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),x([sf.base.Property(null)],t.prototype,"size",void 0),x([sf.base.Property("")],t.prototype,"color",void 0),x([sf.base.Property("Segoe UI")],t.prototype,"fontFamily",void 0),x([sf.base.Property("Normal")],t.prototype,"fontWeight",void 0),x([sf.base.Property("Normal")],t.prototype,"fontStyle",void 0),x([sf.base.Property(1)],t.prototype,"opacity",void 0),t}(sf.base.ChildProperty),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),x([sf.base.Property("")],t.prototype,"color",void 0),x([sf.base.Property(1)],t.prototype,"width",void 0),x([sf.base.Property("")],t.prototype,"dashArray",void 0),t}(sf.base.ChildProperty),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),x([sf.base.Property(0)],t.prototype,"x",void 0),x([sf.base.Property(0)],t.prototype,"y",void 0),x([sf.base.Property(0)],t.prototype,"width",void 0),x([sf.base.Property(0)],t.prototype,"height",void 0),t}(sf.base.ChildProperty),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),x([sf.base.Property(0)],t.prototype,"x",void 0),x([sf.base.Property(0)],t.prototype,"y",void 0),t}(sf.base.ChildProperty),T=function(e){function i(t,i){return e.call(this,t,i)||this}return S(i,e),i.prototype.preRender=function(){this.allowServerDataBinding=!1,this.initPrivateVariable(),this.isCanvas||this.removeSVG(),this.createTooltipElement()},i.prototype.initPrivateVariable=function(){this.renderer=new t(this.element.id),this.themeStyle=s(this.theme),this.formattedText=[],this.padding=5,this.highlightPadding=3,this.areaMargin=10,this.isFirst=!0,this.markerPoint=[]},i.prototype.removeSVG=function(){var e=document.getElementById(this.element.id+"_svg"),t=document.getElementById(this.element.id+"parent_template");this.blazorTemplate&&sf.base.resetBlazorTemplate(this.element.id+"parent_template_blazorTemplate"),e&&e.parentNode&&sf.base.remove(e),t&&t.parentNode&&sf.base.remove(t)},i.prototype.render=function(){if(this.fadeOuted=!1,this.template)this.updateTemplateFn(),this.createTemplate(this.areaBounds,this.location);else{this.renderText(this.isFirst);var e={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",e);var t=this.renderTooltipElement(this.areaBounds,this.location);this.drawMarker(t.isBottom,t.isRight,this.markerSize)}this.trigger("loaded",{tooltip:this});var i=document.getElementById("chartmeasuretext");i&&sf.base.remove(i),this.allowServerDataBinding=!0},i.prototype.createTooltipElement=function(){if(this.textElements=[],!this.template||this.shared){this.enableRTL&&this.element.setAttribute("dir","ltr");var e=this.renderer.createSvg({id:this.element.id+"_svg"});this.element.appendChild(e);var t=document.getElementById(this.element.id+"_group");t||(t=this.renderer.createGroup({id:this.element.id+"_group"})).setAttribute("transform","translate(0,0)"),e.appendChild(t);var i=this.renderer.drawPath({id:this.element.id+"_path","stroke-width":"Fabric"!==this.theme&&"Fluent"!==this.theme||this.border.width?this.border.width:1,fill:this.fill||this.themeStyle.tooltipFill,opacity:"TailwindDark"!==this.theme&&"Tailwind"!==this.theme&&"Bootstrap5"!==this.theme&&"Bootstrap5Dark"!==this.theme||.75!==this.opacity?this.opacity:1,stroke:this.border.color||("Fabric"===this.theme||"Fluent"===this.theme?"#D2D0CE":this.border.color)});t.appendChild(i)}},i.prototype.drawMarker=function(e,t,i){if(this.shapes.length<=0)return null;for(var n,s=0,o=this.renderer.createGroup({id:this.element.id+"_trackball_group"}),r=g(this.element.id+"_group"),a=(this.enableRTL?this.elementSize.width-i/2:2*this.marginX+i/2)+(t?this.arrowPadding:0),l=0,h=this.shapes;l<h.length;l++){var c=h[l];if("None"!==c){if(n=new y(this.element.id+"_Trackball_"+s,this.palette[s],1,"#cccccc",1,null),this.markerPoint[s]){var p=0;this.header.indexOf("<br")>-1&&(p=this.header.split(/<br.*?>/g).length+s),o.appendChild(v(new M(a,this.markerPoint[s]-this.padding+(e?this.arrowPadding:p)),c,new d(i,i),"",n,null))}s++}}r.appendChild(o)},i.prototype.renderTooltipElement=function(e,t){var i,n=g(this.element.id),s=new M(0,0),o=new M(0,0),r=g(this.element.id+"_svg"),l=g(this.element.id+"_group"),d=g(this.element.id+"_path"),u=!1,f=!1,m=!1,v=0,b=0;if(!sf.base.isNullOrUndefined(l)){if(""!==this.header&&(this.elementSize.height+=this.marginY),this.isFixed){var y=this.elementSize.width+2*this.marginX,C=this.elementSize.height+2*this.marginY;i=new c(t.x,t.y,y,C)}else this.content.length>1?(i=this.sharedTooltipLocation(e,this.location.x,this.location.y),u=!0):(i=this.tooltipLocation(e,t,s,o),this.inverted?(v=(f=i.x<t.x+this.clipBounds.x)?0:this.arrowPadding,this.allowHighlight&&(i.x+=f?this.highlightPadding:-2*this.highlightPadding)):(m=!(u=i.y<t.y+this.clipBounds.y),b=u?0:this.arrowPadding));if(""!==this.header){var w=2,S=0,x=this.isWrap?this.wrappedText:this.header;if(this.isWrap&&"string"==typeof x&&(x.indexOf("<")>-1||x.indexOf(">")>-1))w=x.split("<br>").length;this.header.indexOf("<br")>-1&&(S=5*(this.header.split(/<br.*?>/g).length-1));var N=sf.base.extend({},this.textStyle,null,!0).properties,O=a(this.isWrap?this.wrappedText:this.header,N,this.themeStyle.textStyle).height+this.marginY*w+(m?this.arrowPadding:0)+(this.isWrap?5:S),E="M "+(3*this.marginX+(f||u||m?0:this.arrowPadding))+" "+O+"L "+(i.width+(f||u||m?0:this.arrowPadding)-2*this.marginX)+" "+O,I=this.renderer.drawPath({id:this.element.id+"_header_path","stroke-width":1,fill:null,opacity:"Material3"===this.theme?.2:.8,stroke:this.themeStyle.tooltipHeaderLine,d:E});l.appendChild(I)}var T=this.border.width/2,D=new c(T+v,T+b,i.width-T,i.height-T);if(l.setAttribute("opacity","1"),!this.enableAnimation||this.isFirst||this.crosshair?this.updateDiv(n,i.x,i.y):this.animateTooltipDiv(n,i),r.setAttribute("height",(i.height+this.border.width+(this.inverted?0:this.arrowPadding)+5).toString()),r.setAttribute("width",(i.width+this.border.width+(this.inverted?this.arrowPadding:0)+5).toString()),r.setAttribute("opacity","1"),sf.base.isNullOrUndefined(this.tooltipPlacement)||(u=this.tooltipPlacement.indexOf("Top")>-1,m=this.tooltipPlacement.indexOf("Bottom")>-1,f=this.tooltipPlacement.indexOf("Left")>-1),d.setAttribute("d",h(this.rx,this.ry,D,s,this.arrowPadding,u,m,f,o.x,o.y,this.controlName)),this.enableShadow&&"Bootstrap4"!==this.theme){var j=this.element.id+"_shadow";"Tailwind"===this.theme||"TailwindDark"===this.theme||"Bootstrap5"===this.theme||"Bootstrap5Dark"===this.theme?d.setAttribute("box-shadow","0px 1px 2px rgba(0, 0, 0, 0.06), 0px 1px 3px rgba(0, 0, 0, 0.1)"):d.setAttribute("filter",sf.base.Browser.isIE?"":"url(#"+j+")");var A='<filter id="'+j+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>';A+='<feOffset dx="3" dy="3" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.5"/>',A+='</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';var z=this.renderer.createDefs();z.setAttribute("id",this.element.id+"SVG_tooltip_definition"),l.appendChild(z),z.innerHTML=A}var k="Fabric"!==this.theme&&"Fluent"!==this.theme||this.border.color?this.border.color:"#D2D0CE";d.setAttribute("stroke",k),sf.base.isNullOrUndefined(this.border.dashArray)||d.setAttribute("stroke-dasharray",this.border.dashArray),this.changeText(new M(v,b),m,!f&&!u&&!m),this.revert&&(this.inverted=!this.inverted,this.revert=!1)}return new p(m,!f&&!u&&!m)},i.prototype.changeText=function(e,t,i){var n=document.getElementById(this.element.id+"_text");t&&n.setAttribute("transform","translate(0,"+this.arrowPadding+")"),i&&n.setAttribute("transform","translate("+this.arrowPadding+" 0)")},i.prototype.findFormattedText=function(){this.formattedText=[],""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()&&(this.formattedText=this.formattedText.concat(this.header)),this.formattedText=this.formattedText.concat(this.content)},i.prototype.renderText=function(e){var t,i,n,s,o,r=0,l=0,h=0,c="properties",p=sf.base.extend({},this.textStyle,null,!0)[c],u=g(this.element.id+"_group"),v="";this.findFormattedText(),this.isWrap=!1;var b="rtl"===document.body.getAttribute("dir")&&!this.enableRTL?"end":"start";this.leftSpace=this.areaBounds.x+this.location.x,this.rightSpace=this.areaBounds.x+this.areaBounds.width-this.leftSpace;var y=this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim(),w=this.header.indexOf("<b>")>-1&&this.header.indexOf("</b>")>-1,M=a(this.formattedText[0],p,this.themeStyle.textStyle).width+2*this.marginX+this.arrowPadding,S=this.location.x-M<this.location.x,x=this.areaBounds.x+this.areaBounds.width<this.location.x+M,N=""!==y?this.marginY:0,O=!0,E=!0;this.markerPoint=[];var I,T=this.shapes.length>0?10:0,D=this.shapes.length>0?5:0,j="400",A=this.themeStyle.tooltipLightLabel,z=22/parseFloat("12px")*parseFloat(p.size),k=[];e&&!this.isCanvas||(m(this.element.id+"_text"),m(this.element.id+"_header_path"),m(this.element.id+"_trackball_group"),m(this.element.id+"SVG_tooltip_definition"));for(var P=new f(this.element.id+"_text",2*this.marginX,2*this.marginY+2*this.padding+(2===this.marginY?"RangeNavigator"===this.controlName?5:3:0),b,""),L=C(P,p,p.color||this.themeStyle.tooltipBoldLabel,u,this.themeStyle.textStyle),B=1===this.formattedText.length&&this.formattedText[0].indexOf(" : <b>")>-1,R=""!==this.header,U=R&&w?16:13,H=0,F=this.formattedText.length;H<F;H++)if(n=this.formattedText[H].replace(/<(b|strong)>/g,"<b>").replace(/<\/(b|strong)>/g,"</b>").split(/<br.*?>/g),this.isTextWrap&&this.header!==this.formattedText[H]&&-1===this.formattedText[H].indexOf("<br")&&(I=Math.round(this.leftSpace>this.rightSpace?this.leftSpace/U:this.rightSpace/U),n=this.formattedText[H].match(new RegExp(".{1,"+I+"}","g"))),0===H&&!B&&this.isTextWrap&&(this.leftSpace<M||S)&&(this.rightSpace<M||x)&&(I=Math.round(this.leftSpace>this.rightSpace?this.leftSpace/U:this.rightSpace/U),n=(""!==y?y:this.formattedText[H]).match(new RegExp(".{1,"+I+"}","g")),this.wrappedText=w?"<b>"+n.join("<br>")+"</b>":n.join("<br>"),this.isWrap=n.length>1),""!==n[0]){0===H&&""!==y||this.markerPoint.push((""!==y?this.marginY:0)+P.y+r);for(var Y=0,q=n.length;Y<q;Y++){t=n[Y].replace(/<b>/g,"<br><b>").replace(/<\/b>/g,"</b><br>").replace(/:/g,this.enableRTL?"<br>‎: <br>":"<br>‎:<br>").split("<br>"),this.enableRTL&&t.length>0&&n[Y].match(/:/g)&&(t[0]=t[0].trim(),t.reverse()),h=0,E=!0,r+=z;for(var _=0,W=t.length;_<W;_++)if(s=t[_],this.enableRTL&&""!==s&&this.isRTLText(s)&&(s=s.concat("‎")),/\S/.test(s)||""===s||(s=" "),!E&&" "===s||""!==s.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()){h+=" "!==s?4:0,E&&!O?(this.header.indexOf("<br")>-1&&0!==H&&(N+=this.header.split(/<br.*?>/g).length),o={x:2*this.marginX+(T+D),dy:z+(E?N:0),fill:""},N=null):o=O&&E?{x:""===y?2*this.marginX+(T+D):2*this.marginX+(this.isWrap?T+D:0)}:{},E=!1,i=this.renderer.createTSpan(o,""),L.appendChild(i),s.indexOf("<b>")>-1||w&&0===_&&0===H&&(R||this.isWrap)?(j="600",A=this.themeStyle.tooltipBoldLabel,v="font-weight:"+j,p.fontWeight=j,i.setAttribute("fill",this.textStyle.color||A)):(v="600"===j?"font-weight:"+j:"",p.fontWeight=j,i.setAttribute("fill",this.textStyle.color||A)),(s.indexOf("</b>")>-1||w&&_===W-1&&0===H&&(R||this.isWrap))&&(j="Normal",A=this.themeStyle.tooltipLightLabel),""!==v&&(i.style.fontWeight=v.split("font-weight:")[1],i.style.color=i.getAttribute("fill")),i.style.fontFamily="inherit",i.style.fontStyle="inherit",i.style.fontSize=this.header===this.formattedText[H]?p.size:this.textStyle.size,i.style.fontWeight=this.header===this.formattedText[H]&&-1===(this.header.indexOf("<b>")||this.header.indexOf("</b>"))?this.textStyle.fontWeight||"600":s.indexOf("<b>")>-1||s.indexOf("</b>")>-1?"bold":this.textStyle.fontWeight||p.fontWeight;var V=sf.base.extend({},this.textStyle,null,!0)[c];V.fontWeight=i.style.fontWeight,O=!1,i.textContent=s=this.getTooltipTextContent(s),h+=a(s,V,this.themeStyle.textStyle).width}h-=4,l=Math.max(l,h),k.push(h)}}this.elementSize=new d(l+(l>0?2*this.marginX:0),r),this.elementSize.width+=T+D;var X=L.childNodes[0];if(""!==y&&X&&!this.isWrap){p.fontWeight="600";var Q=(this.elementSize.width+2*this.padding)/2-a(y,p,this.themeStyle.textStyle).width/2;X.setAttribute("x",Q.toString())}this.renderContentRTL(L,R,T+D,k)},i.prototype.renderContentRTL=function(e,t,i,n){if(this.enableRTL)for(var s=void 0,o=t?1:0,r=0;r<e.childNodes.length;r++)s=e.childNodes[r],t&&!(r>0)||sf.base.isNullOrUndefined(s.getAttribute("x"))||(s.setAttribute("x",(this.elementSize.width-(i+n[o])).toString()),o++)},i.prototype.getTooltipTextContent=function(e){var t=e.match(/<[a-zA-Z\/](.|\n)*?>/g);if(sf.base.isNullOrUndefined(t))return e;for(var i=this.isRTLText(e),n=0;n<t.length;n++)this.isValidHTMLElement(t[n].replace("<","").replace("/","").replace(">","").trim())&&(e=e.replace(t[n],i?"‎":""));return e},i.prototype.isValidHTMLElement=function(e){return"[object HTMLUnknownElement]"!==document.createElement(e).toString()},i.prototype.isRTLText=function(e){return/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(e)},i.prototype.createTemplate=function(e,t){var i={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",i);var n=document.getElementById(this.element.id);this.isCanvas&&this.removeSVG();var s=n.firstElementChild;if(s&&sf.base.remove(s),i.cancel)sf.base.remove(g(this.element.id+"_tooltip"));else{var o=sf.base.createElement("div",{id:this.element.id+"parent_template"}),r=void 0;if("Chart"===this.controlName&&this.shared)for(var a=0;a<this.data.length;a++){var l=this.templateFn(this.data[a],this.controlInstance,o.id,o.id+"_blazorTemplate","");0===a?r=l:r[r.length-1].outerHTML+="<br>"+l[0].outerHTML}else r=this.templateFn(this.data,this.controlInstance,o.id,o.id+"_blazorTemplate","");for(;r&&r.length>0;)sf.base.isBlazor()||1===r.length?(o.appendChild(r[0]),r=null):o.appendChild(r[0]);n.appendChild(o);var h=this.isCanvas?o:this.element,c=h.getBoundingClientRect();this.padding=0,this.elementSize=new d(c.width,c.height);var p=this.shared?this.sharedTooltipLocation(e,this.location.x,this.location.y):this.tooltipLocation(e,t,new M(0,0),new M(0,0));if(!this.enableAnimation||this.isFirst||this.crosshair?this.updateDiv(h,p.x,p.y):this.animateTooltipDiv(this.element,p),this.blazorTemplate){var u=function(){var i=g(f.element.id).getBoundingClientRect();f.elementSize=new d(i.width,i.height);var n=f.tooltipLocation(e,t,new M(0,0),new M(0,0));f.updateDiv(g(f.element.id),n.x,n.y)},f=this;u.bind(f,e,t),sf.base.updateBlazorTemplate(this.element.id+"parent_template_blazorTemplate",this.blazorTemplate.name,this.blazorTemplate.parent,void 0,u)}}},i.prototype.sharedTooltipLocation=function(e,t,i){var n=this.elementSize.width+2*this.marginX,s=this.elementSize.height+2*this.marginY,o=new c(t+2*this.padding,i-s-this.padding,n,s);return o.y<e.y&&(o.y+=o.height+2*this.padding),o.y+o.height>e.y+e.height&&(o.y=Math.max(e.y+e.height-(o.height+2*this.padding),e.y)),o.x+o.width>e.x+e.width&&(o.x=e.x+this.location.x-(o.width+4*this.padding)),o.x<e.x&&(o.x=e.x),o},i.prototype.getCurrentPosition=function(e,t,i,n){var s=this.tooltipPlacement,o=this.clipBounds.x,r=this.clipBounds.y,a=this.offset,l=this.elementSize.width+2*this.marginX,h=this.elementSize.height+2*this.marginY,d=new M(t.x,t.y);return"Top"===s||"Bottom"===s?(d=new M(d.x+o-this.elementSize.width/2-this.padding,d.y+r-this.elementSize.height-2*this.padding-this.arrowPadding-a),i.x=n.x=l/2,"Bottom"===s&&(d.y=t.y+r+a),e.x+e.width<d.x+l?(d.x=e.width>l?e.x+e.width-l+6:e.x,i.x=n.x=e.width>l?e.x+t.x-d.x:t.x):e.x>d.x&&(d.x=e.x,i.x=n.x=t.x)):(d=new M(d.x+o+a,d.y+r-this.elementSize.height/2-this.padding),i.y=n.y=h/2,"Left"===s&&(d.x=t.x+o-a-(l+this.arrowPadding)),e.y+e.height<d.y+h?(d.y=e.height>h?e.y+e.height-h+6:e.y,i.y=n.y=e.height>h?e.y+t.y-d.y:t.y):e.y>d.y&&(d.y=e.y,i.y=n.y=t.y)),new c(d.x,d.y,l,h)},i.prototype.tooltipLocation=function(e,t,i,n){if(!sf.base.isNullOrUndefined(this.tooltipPlacement))return this.getCurrentPosition(e,t,i,n);var s=new M(t.x,t.y),o=this.elementSize.width+2*this.marginX,r=this.elementSize.height+2*this.marginY,a=this.offset,h=this.clipBounds.x,d=this.clipBounds.y,p=e.x,u=e.y;return this.outOfBounds=!1,this.inverted?(s=new M(s.x+h+a,s.y+d-this.elementSize.height/2-this.padding),i.y=n.y=r/2,(s.x+o+this.arrowPadding>p+e.width||this.isNegative)&&(s.x=(t.x>e.width+e.x?e.width:t.x)+h-a-(o+this.arrowPadding)),s.x<p&&(s.x=(t.x<0?0:t.x)+h+a),s.x+o+this.arrowPadding>p+e.width&&(s.x=(t.x>e.width+e.x?e.width:t.x)+h-a-(o+this.arrowPadding)),s.y<=u&&(i.y-=u-s.y,n.y-=u-s.y,s.y=u),s.y+r>=u+e.height&&(i.y+=s.y+r-(u+e.height),n.y+=s.y+r-(u+e.height),s.y-=s.y+r-(u+e.height)),i.y+this.arrowPadding>r-this.ry&&(i.y=r-this.ry-this.arrowPadding,n.y=r),i.y-this.arrowPadding<this.ry&&(i.y=n.y=this.ry+this.arrowPadding),"Chart"===this.controlName&&((s.y+i.y<this.areaMargin+this.arrowPadding||e.y+e.height-(s.y+i.y)<this.areaMargin+this.arrowPadding)&&(this.outOfBounds=!0),l(s.x,s.y,e)&&!this.outOfBounds||(this.inverted=!this.inverted,s=new M(t.x+h-this.padding-this.elementSize.width/2,t.y+d-this.elementSize.height-2*this.padding-a-this.arrowPadding),this.revert=!0,n.x=i.x=o/2,n.y=i.y=0,(s.y<u||this.isNegative)&&(s.y=(t.y<0?0:t.y)+a+d),s.y+this.arrowPadding+r>u+e.height&&(s.y=Math.min(t.y,u+e.height)+d-this.elementSize.height-2*this.padding-a-this.arrowPadding),n.x=o/2,s.x<p&&(n.x-=p-s.x,i.x-=p-s.x,s.x=p),s.x+o>e.width+p&&(i.x+=s.x+o-(e.width+p),n.x+=s.x+o-(e.width+p),s.x-=s.x+o-(e.width+p)),this.arrowPadding+i.x>o-this.rx&&(n.x=o-this.rx-this.arrowPadding,i.x=o-this.rx-this.arrowPadding),i.x-this.arrowPadding<this.rx&&(i.x=n.x=this.rx+this.arrowPadding)))):(s=new M(s.x+h-this.elementSize.width/2-this.padding,s.y+d-this.elementSize.height-2*(this.allowHighlight?this.highlightPadding:this.padding)-this.arrowPadding-a),i.x=n.x=o/2,(s.y<u||this.isNegative)&&"Progressbar"!==this.controlName&&(s.y=(t.y<0?0:t.y)+d+a),s.y+r+this.arrowPadding>u+e.height&&(s.y=Math.min(t.y,u+e.height)+d-this.elementSize.height-2*this.padding-this.arrowPadding-a),(s.x+o>p+e.width&&s.y<u||this.isNegative)&&"Progressbar"!==this.controlName&&(s.y=(t.y<0?0:t.y)+d+a),n.x=o/2,s.x<p&&"Progressbar"!==this.controlName&&(i.x-=p-s.x,n.x-=p-s.x,s.x=p),s.x+o>p+e.width&&"Progressbar"!==this.controlName&&(i.x+=s.x+o-(p+e.width),n.x+=s.x+o-(p+e.width),s.x-=s.x+o-(p+e.width)),s.x<p&&"Progressbar"!==this.controlName&&(i.x-=p-s.x,n.x-=p-s.x,s.x=p),i.x+this.arrowPadding>o-this.rx&&(i.x=o-this.rx-this.arrowPadding,n.x=o-this.rx-this.arrowPadding),i.x-this.arrowPadding<this.rx&&(i.x=n.x=this.rx+this.arrowPadding),"Chart"===this.controlName&&((e.x+e.width-(s.x+i.x)<this.areaMargin+this.arrowPadding||s.x+i.x<this.areaMargin+this.arrowPadding)&&(this.outOfBounds=!0),l(s.x,s.y,e)&&!this.outOfBounds||(this.inverted=!this.inverted,this.revert=!0,s=new M(t.x+a+h,t.y+d-this.elementSize.height/2-this.padding),n.x=i.x=0,n.y=i.y=r/2,(s.x+this.arrowPadding+o>p+e.width||this.isNegative)&&(s.x=(t.x>e.width?e.width:t.x)+h-a-(this.arrowPadding+o)),s.x<p&&(s.x=(t.x<0?0:t.x)+a+h),s.y<=u&&(n.y-=u-s.y,i.y-=u-s.y,s.y=u),s.y+r>=e.height+u&&(i.y+=s.y+r-(e.height+u),n.y+=s.y+r-(e.height+u),s.y-=s.y+r-(e.height+u)),this.arrowPadding+i.y>r-this.ry&&(i.y=r-this.arrowPadding-this.ry,n.y=r),i.y-this.arrowPadding<this.ry&&(i.y=this.arrowPadding+this.ry,n.y=0)))),new c(s.x,s.y,o,r)},i.prototype.animateTooltipDiv=function(e,t){var i,n=this,s=parseFloat(e.style.left),o=parseFloat(e.style.top);new sf.base.Animation({}).animate(e,{duration:0===this.duration&&"Enable"===sf.base.animationMode?300:this.duration,progress:function(r){i=r.timeStamp/r.duration,e.style.animation=null,"Chart"===n.controlName&&n.shared&&!n.enableRTL?(e.style.transition=sf.base.isBlazor()?"transform 0.3s":"transform 0.1s",e.style.transform="translate("+(s+i*(t.x-s))+"px,"+(o+i*(t.y-o))+"px)"):(e.style.left=s+i*(t.x-s)+"px",e.style.top=o+i*(t.y-o)+"px")},end:function(i){n.updateDiv(e,t.x,t.y),n.trigger("animationComplete",{tooltip:n})}})},i.prototype.updateDiv=function(e,t,i){"Chart"!==this.controlName||!this.shared||this.crosshair||this.enableRTL?(e.style.left=t+"px",e.style.top=i+"px"):e.style.transform="translate("+t+"px,"+i+"px)"},i.prototype.updateTemplateFn=function(){if(this.template)try{"function"!=typeof this.template&&document.querySelectorAll(this.template).length?this.templateFn=sf.base.compile(document.querySelector(this.template).innerHTML.trim()):this.templateFn=sf.base.compile(this.template)}catch(e){this.templateFn=sf.base.compile(this.template)}},i.prototype.fadeOut=function(){var e=this,t=this.isCanvas&&!this.template?g(this.element.id+"_svg"):g(this.element.id),i=g(this.element.id);if(t){var n=t.firstChild;if(n.nodeType!==Node.ELEMENT_NODE&&(n=t.firstElementChild),this.isCanvas&&!this.template&&(n=document.getElementById(this.element.id+"_group")?document.getElementById(this.element.id+"_group"):n),!n)return null;var s=parseFloat(n.getAttribute("opacity"));s=sf.base.isNullOrUndefined(s)?1:s,new sf.base.Animation({}).animate(n,{duration:200,progress:function(t){e.progressAnimation(n,s,t.timeStamp/t.duration)},end:function(){e.fadeOuted=!0,e.endAnimation(n),i.style.transition=""}})}},i.prototype.progressAnimation=function(e,t,i){e.style.animation="",e.setAttribute("opacity",(t-i).toString())},i.prototype.endAnimation=function(e){e.setAttribute("opacity","0"),this.template&&(e.style.display="none"),this.trigger("animationComplete",{tooltip:this})},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.getModuleName=function(){return"tooltip"},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.element.classList.remove("e-tooltip")},i.prototype.onPropertyChanged=function(e,t){this.blazorTemplate&&sf.base.resetBlazorTemplate(this.element.id+"parent_template_blazorTemplate"),this.isFirst=!1,this.render()},x([sf.base.Property(!1)],i.prototype,"enable",void 0),x([sf.base.Property(!1)],i.prototype,"shared",void 0),x([sf.base.Property(!1)],i.prototype,"crosshair",void 0),x([sf.base.Property(!1)],i.prototype,"enableShadow",void 0),x([sf.base.Property(null)],i.prototype,"fill",void 0),x([sf.base.Property("")],i.prototype,"header",void 0),x([sf.base.Property(.75)],i.prototype,"opacity",void 0),x([sf.base.Complex({size:"12px",fontWeight:null,color:null,fontStyle:"Normal",fontFamily:null},N)],i.prototype,"textStyle",void 0),x([sf.base.Property(null)],i.prototype,"template",void 0),x([sf.base.Property(!0)],i.prototype,"enableAnimation",void 0),x([sf.base.Property(300)],i.prototype,"duration",void 0),x([sf.base.Property(!1)],i.prototype,"inverted",void 0),x([sf.base.Property(!1)],i.prototype,"isNegative",void 0),x([sf.base.Complex({color:null,width:null},O)],i.prototype,"border",void 0),x([sf.base.Property([])],i.prototype,"content",void 0),x([sf.base.Property(10)],i.prototype,"markerSize",void 0),x([sf.base.Complex({x:0,y:0},I)],i.prototype,"clipBounds",void 0),x([sf.base.Property([])],i.prototype,"palette",void 0),x([sf.base.Property([])],i.prototype,"shapes",void 0),x([sf.base.Complex({x:0,y:0},I)],i.prototype,"location",void 0),x([sf.base.Property(0)],i.prototype,"offset",void 0),x([sf.base.Property(4)],i.prototype,"rx",void 0),x([sf.base.Property(4)],i.prototype,"ry",void 0),x([sf.base.Property(5)],i.prototype,"marginX",void 0),x([sf.base.Property(5)],i.prototype,"marginY",void 0),x([sf.base.Property(7)],i.prototype,"arrowPadding",void 0),x([sf.base.Property(null)],i.prototype,"data",void 0),x([sf.base.Property("Material")],i.prototype,"theme",void 0),x([sf.base.Complex({x:0,y:0,width:0,height:0},E)],i.prototype,"areaBounds",void 0),x([sf.base.Property(null)],i.prototype,"availableSize",void 0),x([sf.base.Property()],i.prototype,"blazorTemplate",void 0),x([sf.base.Property(!1)],i.prototype,"isCanvas",void 0),x([sf.base.Property(!1)],i.prototype,"isTextWrap",void 0),x([sf.base.Property(!1)],i.prototype,"isFixed",void 0),x([sf.base.Property(null)],i.prototype,"tooltipPlacement",void 0),x([sf.base.Property(null)],i.prototype,"controlInstance",void 0),x([sf.base.Property("")],i.prototype,"controlName",void 0),x([sf.base.Event()],i.prototype,"tooltipRender",void 0),x([sf.base.Event()],i.prototype,"loaded",void 0),x([sf.base.Event()],i.prototype,"animationComplete",void 0),x([sf.base.Property(!1)],i.prototype,"enableRTL",void 0),x([sf.base.Property(!1)],i.prototype,"allowHighlight",void 0),i=x([sf.base.NotifyPropertyChanges],i)}(sf.base.Component);return e.TextStyle=N,e.TooltipBorder=O,e.AreaBounds=E,e.ToolLocation=I,e.Tooltip=T,e.getTooltipThemeColor=s,e.measureText=a,e.withInAreaBounds=l,e.findDirection=h,e.Size=d,e.Rect=c,e.Side=p,e.CustomizeOption=u,e.TextOption=f,e.getElement=g,e.removeElement=m,e.drawSymbol=v,e.calculateShapes=b,e.PathOption=y,e.textElement=C,e.TooltipLocation=M,e.SvgRenderer=t,e.CanvasRenderer=i,e},sf.svgbase=sf.svgbase({})},"./single-bundle.js":function(e,t,i){"use strict";i.r(t);i("./modules/base.js"),i("./modules/spinner.js"),i("./modules/popup.js"),i("./modules/popupsbase.js"),i("./modules/navigationsbase.js"),i("./modules/splitbuttonsbase.js"),i("./modules/svgbase.js"),i("./modules/sortable.js"),i("./syncfusion-blazor.js"),i("./modules/sf-accordion.js"),i("./modules/sf-accumulation-chart.js"),i("./modules/sf-barcode.js"),i("./modules/sf-breadcrumb.js"),i("./modules/sf-bullet-chart.js"),i("./modules/sf-calendar.js"),i("./modules/sf-carousel.js"),i("./modules/sf-chart.js"),i("./modules/sf-circulargauge.js"),i("./modules/sf-colorpicker.js"),i("./modules/sf-contextmenu.js"),i("./modules/sf-dashboard-layout.js"),i("./modules/sf-datepicker.js"),i("./modules/sf-daterangepicker.js"),i("./modules/sf-diagramcomponent.js"),i("./modules/sf-dialog.js"),i("./modules/sf-drop-down-button.js"),i("./modules/sf-dropdownlist.js"),i("./modules/sf-dropdowntree.js"),i("./modules/sf-filemanager.js"),i("./modules/sf-floating-action-button.js"),i("./modules/sf-gantt.js"),i("./modules/sf-grid.js"),i("./modules/sf-heatmap.js"),i("./modules/sf-image-editor.js"),i("./modules/sf-inplaceeditor.js"),i("./modules/sf-kanban.js"),i("./modules/sf-lineargauge.js"),i("./modules/sf-listbox.js"),i("./modules/sf-listview.js"),i("./modules/sf-maps.js"),i("./modules/sf-maskedtextbox.js"),i("./modules/sf-mention.js"),i("./modules/sf-menu.js"),i("./modules/sf-multiselect.js"),i("./modules/sf-numerictextbox.js"),i("./modules/sf-pager.js"),i("./modules/sf-pivotview.js"),i("./modules/sf-progressbar.js"),i("./modules/sf-range-navigator.js"),i("./modules/sf-rating.js"),i("./modules/sf-richtexteditor.js"),i("./modules/sf-schedule.js"),i("./modules/sf-sidebar.js"),i("./modules/sf-signature.js"),i("./modules/sf-slider.js"),i("./modules/sf-smith-chart.js"),i("./modules/sf-sparkline.js"),i("./modules/sf-speeddial.js"),i("./modules/sf-spinner.js"),i("./modules/sf-splitter.js"),i("./modules/sf-stepper.js"),i("./modules/sf-stock-chart.js"),i("./modules/sf-svg-export.js"),i("./modules/sf-tab.js"),i("./modules/sf-textbox.js"),i("./modules/sf-timepicker.js"),i("./modules/sf-toast.js"),i("./modules/sf-toolbar.js"),i("./modules/sf-tooltip.js"),i("./modules/sf-treegrid.js"),i("./modules/sf-treemap.js"),i("./modules/sf-treeview.js"),i("./modules/sf-uploader.js")},"./syncfusion-blazor.js":function(e,t){var i={instances:[],getElementByXpath:function(e){return document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},getElement:function(e,t,i){var n=null!=e&&null!=window[e]?window[e][t]:null;return null!=n?n:window.sfBlazor.getElementByXpath(i)},getAttribute:function(e,t,i,n){var s=window.sfBlazor.getElement(e,t,i);if(null!=s)return s.getAttribute(n)},setAttribute:function(e,t,i,n,s){window.sfBlazor.getElement(e,t,i).setAttribute(n,s)},addClass:function(e,t,i,n){sf.base.addClass([window.sfBlazor.getElement(e,t,i)],n)},removeClass:function(e,t,i,n){sf.base.removeClass([window.sfBlazor.getElement(e,t,i)],n)},getClassList:function(e,t,i){return Array.prototype.slice.call(window.sfBlazor.getElement(e,t,i).classList)},enableRipple:function(e){sf.base.enableRipple(e)},isRTL:function(e){e&&this.enableRtl(e)},isDevice:function(e){return e&&this.enableRtl(e),sf.base.Browser.isDevice},animate:function(e,t){new sf.base.Animation(t).animate(e)},setGlobalAnimationValue:function(e){sf.base.setGlobalAnimation(e)},callRipple:function(e,t){sf.base.rippleEffect(e,t)},createXPathFromElement:function(e){for(var t=document.getElementsByTagName("*"),i=[];e&&1===e.nodeType;e=e.parentNode)if(e.hasAttribute("id")){for(var n=0,s=0;s<t.length&&(t[s].hasAttribute("id")&&t[s].id===e.id&&n++,!(n>1));s++);if(1===n)return i.unshift('id("'+e.getAttribute("id")+'")'),i.join("/");i.unshift(e.localName.toLowerCase()+'[@id="'+e.getAttribute("id")+'"]')}else{for(var o=1,r=e.previousSibling;r;r=r.previousSibling)r.localName===e.localName&&o++;i.unshift(e.localName.toLowerCase()+"["+o+"]")}return i.length?"/"+i.join("/"):null},getDomObject:function(e,t,i){var n=e+sf.base.getUniqueID(e),s={id:t.id,class:t.className,xPath:window.sfBlazor.createXPathFromElement(t),domUUID:n},o=i&&i.elementID;return o&&(window[o]=sf.base.isNullOrUndefined(window[o])?{}:window[o],window[o][n]=t,s.elementID=o),s},focusButton:function(e){e.focus()},setCompInstance:function(e){window.sfBlazor.instances[e.dataId]=e},getCompInstance:function(e){return window.sfBlazor.instances[e]},setProgress:function(e,t,i,n,s,o){return i=i.querySelector(".e-spinner"),window.requestAnimationFrame((function(){s&&(e.style[o?"height":"width"]=n+"%"),t.parentElement.setAttribute("aria-valuenow",n.toString()),100===n&&(t.classList.remove("e-cont-animate","e-animate-end"),i.style.width="auto",i.style.height="auto")}))},setAnimation:function(e,t,i,n,s,o){t=t.querySelector(".e-spinner"),new sf.base.Animation({}).animate(e,{duration:n,name:"Progress"+i,timingFunction:s,begin:function(){o&&(t.style.width=Math.max(t.offsetWidth,e.offsetWidth)+"px",t.style.height=Math.max(t.offsetHeight,e.offsetHeight)+"px",e.classList.add("e-cont-animate"))},end:function(){e.classList.add("e-animate-end")}})},cancelAnimation:function(e){window.cancelAnimationFrame(e)},getSpinnerTheme:function(e){var t=e?window.getComputedStyle(e,":after").getPropertyValue("content"):"Material";return t&&t.replace(/['"]+/g,"")},chipKeydownHandler:function(e){e&&e.addEventListener("keydown",(function(e){e.target&&e.target.classList.contains("e-chip")&&" "==e.key&&e.preventDefault()}))},MediaQuery:{initialize:function(e){return e.dataId?(sf.base.extend(e,this,e),window.sfBlazor.setCompInstance(e),e.activeBreakpoint="",e.isMediaChanged=!1,e.initializeMediaQueries(e),e.updateActiveBreakpoint(e,!0),e.activeBreakpoint):null},initializeMediaQueries:function(e){for(var t=0;t<e.mediaBreakpoints.length;t++){var i=window.matchMedia(e.mediaBreakpoints[t].mediaQuery);e.mediaBreakpoints[t].mq=i,sf.base.EventHandler.add(i,"change",e.mediaQueryChangeHandler,e)}},updateActiveBreakpoint:function(e,t){for(var i=!1,n=0;n<e.mediaBreakpoints.length;n++){if(e.mediaBreakpoints[n].mq.matches){e.isMediaChanged&&!i||t||(e.isMediaChanged=e.activeBreakpoint!=e.mediaBreakpoints[n].breakpoint),e.activeBreakpoint=e.mediaBreakpoints[n].breakpoint;break}e.activeBreakpoint==e.mediaBreakpoints[n].breakpoint&&(i=e.isMediaChanged=!0,e.activeBreakpoint="")}},mediaQueryChangeHandler:function(){this.updateActiveBreakpoint(this),this.isMediaChanged&&(this.dotNetRef.invokeMethodAsync("UpdateActiveBreakpoint",this.activeBreakpoint),this.isMediaChanged=!1)},destroyComponent:function(){for(var e=0;e<this.mediaBreakpoints.length;e++)sf.base.EventHandler.remove(this.mediaBreakpoints[e].mq,"change",this.mediaQueryChangeHandler)},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroyComponent()}},validateBlazorLicense:function(e,t,i){if(i){var n=sf.base.createElement("div",{innerHTML:'<div style="position: fixed;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 99999;">\n                    <div style="background: #FFFFFF;\n                    height: 490px;\n                    width: 840px;\n                    font-family: Helvetica Neue, Helvetica, Arial;\n                    color: #000000;\n                    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n                    display: block;\n                    margin: 6% auto;\n                    border-radius: 20px;">\n                        <div style="\n                        position: absolute;\n                        width: 838px;\n                        height: 80px;\n                        background-color: #F9F9F9;\n                        border: 1px solid #EEEEEE;\n                        border-top-left-radius: 20px;\n                        border-top-right-radius: 20px;">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n                text-align: left;\n                width: 146px;\n                position: absolute;\n                top: 24px;\n                left: 40px;"></div>\n                <div style="position: relative;\n                top: 104px;\n                left: 32px;\n                font-size: 20px;\n                text-align: left;\n                font-weight: 700;\n                letter-spacing: 0.02em;\n                font-style: normal;\n                line-height: 125%;">Claim your FREE account and get a key in less than a minute</div>\n                        <ul style="font-size: 15px;\n                        margin-top: 15px;\n                        font-weight: 400;\n                        color: #333333;\n                        letter-spacing: 0.01em;\n                        position: relative;\n                        left: 40px;\n                        top: 103px;\n                        line-height: 180%;">\n                            <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                            <li><span>Access to 24x5 support by developers via the <a\n                                        href="https://support.syncfusion.com/create"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">support tickets</a>, <a\n                                        href="https://www.syncfusion.com/forums"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">forum</a>, <a\n                                        href="https://www.syncfusion.com/feedback"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">feature & feedback page</a> and chat.</span></li>\n                            <li><span>200+ <a\n                                        href="https://www.syncfusion.com/succinctly-free-ebooks"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">ebooks</a> on the latest technologies, industry trends, and research topics.</span>\n                            </li>\n                            <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a\n                                        href="https://www.syncfusion.com/downloads/metrostudio"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">Metro Studio</a>.</span></li>\n                            <li><span>Free and unlimited access to Syncfusion technical <a\n                                        href="https://www.syncfusion.com/blogs/"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">blogs</a> and <a\n                                        href="https://www.syncfusion.com/resources/techportal/whitepapers"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">white papers.</a></span></li>\n                        </ul>\n                        <div style="font-size: 18px;\n                        font-weight: 700;\n                        position: relative;\n                        line-height: 125%;\n                        letter-spacing: 0.02em;\n                        top: 113px;\n                        left: 32px;">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n                <img src=\'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K\'style="width: 742.5px;\n                    position: relative;\n                    top: 123px;\n                    left: 32px;"/>\n                    <a href="'.concat(t,'" style="float: left;\n                    border-radius: 56px;\n                    background: #0D6EFD;\n                    padding-top: 12px;\n                    width: 280px;\n                    height: 45px;\n                    text-align: center;\n                    position: relative;\n                    top: 141px;\n                    left: 270px;\n                    font-size: 17px;\n                    color: white;\n                    text-decoration: none;\n                    line-height: 125%;\n                    letter-spacing: 0.02em;">Claim your free account</a>\n                        <div style="\n                        font-size: 14px;\n                        position: relative;\n                        top: 197px;\n                        left: 15px;\n                        letter-spacing: 0.02em;\n                        font-weight: 500;\n                        line-height: 125%;">have a Syncfusion account? <a\n                href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login"\n                style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Sign In</a></div>\n                    </div>\n                </div>')});document.body.appendChild(n)}else{var s=sf.base.createElement("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"\n            position: absolute;\n            left: 16px;\n            height: 24px;\"/><span>".concat(e,' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href="').concat(t,'">Claim your free account</a>.</span>')});s.setAttribute("style","position: fixed;\n            top: 10px;\n            left: 10px;\n            right: 10px;\n            font-size: 14px;\n            background: #EEF2FF;\n            color: #222222;\n            z-index: 999999999;\n            text-align: left;\n            border: 1px solid #EEEEEE;\n            padding: 10px 11px 10px 50px;\n            border-radius: 8px;\n            font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(s)}}};sf.base.enableBlazorMode(),window.sfBlazor=window.sfBlazor||{},Object.assign(window.sfBlazor,i)}});